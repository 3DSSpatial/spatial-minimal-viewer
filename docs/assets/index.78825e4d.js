var HF=Object.defineProperty;var zi=Object.getOwnPropertySymbols;var xF=Object.prototype.hasOwnProperty,wF=Object.prototype.propertyIsEnumerable;var aC=(i,e,g)=>e in i?HF(i,e,{enumerable:!0,configurable:!0,writable:!0,value:g}):i[e]=g,FC=(i,e)=>{for(var g in e||(e={}))xF.call(e,g)&&aC(i,g,e[g]);if(zi)for(var g of zi(e))wF.call(e,g)&&aC(i,g,e[g]);return i};var DF=(i,e)=>()=>(e||i((e={exports:{}}).exports,e),e.exports);var tt=(i,e,g)=>(aC(i,typeof e!="symbol"?e+"":e,g),g);var ar=DF((sr,hi)=>{const KF=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const I of document.querySelectorAll('link[rel="modulepreload"]'))t(I);new MutationObserver(I=>{for(const l of I)if(l.type==="childList")for(const C of l.addedNodes)C.tagName==="LINK"&&C.rel==="modulepreload"&&t(C)}).observe(document,{childList:!0,subtree:!0});function g(I){const l={};return I.integrity&&(l.integrity=I.integrity),I.referrerpolicy&&(l.referrerPolicy=I.referrerpolicy),I.crossorigin==="use-credentials"?l.credentials="include":I.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(I){if(I.ep)return;I.ep=!0;const l=g(I);fetch(I.href,l)}};KF();function oa(i,e,g,t){var I;i.onmousedown=l;function l(n){I={e:n,offsetLeft:i.offsetLeft,offsetTop:i.offsetTop,leftPanelWidth:e.offsetWidth,mainPanelWidth:g.offsetWidth,leftPanelHeight:e.offsetHeight,mainPanelHeight:g.offsetHeight},document.onmousemove=C,document.onmouseup=()=>{document.onmousemove=document.onmouseup=null}}function C(n){var F={x:n.clientX-I.e.clientX,y:n.clientY-I.e.clientY};t==="H"?(F.x=Math.min(Math.max(F.x,-I.leftPanelWidth),I.mainPanelWidth),i.style.left=I.offsetLeft+F.x+"px",e.style.width=I.leftPanelWidth+F.x+"px"):t==="V"&&(g.style.height=I.mainPanelHeight-F.y+"px")}}const LF=document.getElementById("separatorV"),zF=document.getElementById("leftPanel"),_F=document.getElementById("mainPanel");oa(LF,zF,_F,"H");const _i=document.getElementById("separatorH"),Oi=document.getElementById("topPanel"),Pi=document.getElementById("bottomPanel");_i&&Oi&&Pi&&oa(_i,Oi,Pi,"V");var Aa="4.3.0-88bedfc";class OF{constructor(e){this.version=e,this.registry={}}registerLib(e){const g=e.name,t=e.version;this.registry[g]&&console.warn("Library already registered:"+g),this.registry[g]=t,console.log(`Registered lib '${g}' v${t}`)}listLibs(){return this.registry}}function PF(){return(navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i))!=null}function jF(){return(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/webOS/i)||navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPod/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/Pixel/i)||navigator.userAgent.match(/Windows Phone/i))!=null}function qF(){const i=navigator.userAgent;let e=navigator.appName,g=""+parseFloat(navigator.appVersion),t=parseInt(navigator.appVersion,10),I,l,C;return navigator.brave?(e="Brave",l=i.indexOf("Chrome"),g=i.substring(l+7,i.indexOf(" ",l+7))):(l=i.indexOf("Opera"))!=-1?(e="Opera",g=i.substring(l+6),(l=i.indexOf("Version"))!=-1&&(g=i.substring(l+8))):(l=i.indexOf("MSIE"))!=-1?(e="Microsoft Internet Explorer",g=i.substring(l+5)):(l=i.indexOf("Edge"))!=-1?(e="Edge",g=i.substring(l+4)):(l=i.indexOf("Chrome"))!=-1?(e="Chrome",g=i.substring(l+7,i.indexOf(" ",l+7))):(l=i.indexOf("Safari"))!=-1?(e="Safari",g=i.substring(l+7),(l=i.indexOf("Version"))!=-1&&(g=i.substring(l+8))):(l=i.indexOf("Firefox"))!=-1?(e="Firefox",g=i.substring(l+8)):(I=i.lastIndexOf(" ")+1)<(l=i.lastIndexOf("/"))&&(e=i.substring(I,l),g=i.substring(l+1),e.toLowerCase()==e.toUpperCase()&&(e=navigator.appName)),(C=g.indexOf(";"))!=-1&&(g=g.substring(0,C)),(C=g.indexOf(" "))!=-1&&(g=g.substring(0,C)),t=parseInt(""+g,10),isNaN(t)&&(g=""+parseFloat(navigator.appVersion),t=parseInt(navigator.appVersion,10)),{browserName:e,fullVersion:g,majorVersion:t,appName:navigator.appName,userAgent:navigator.userAgent}}function $F(){let i;try{i=document.createElement("canvas").getContext("webgl")}catch{}if(!i)return{vendor:"Unknown",renderer:"Unknown",gpuVendor:"Unknown",maxTextureSize:0,supportsWebGL:!1,supportsWebGL2:!1};let e;try{e=document.createElement("canvas").getContext("webgl2")}catch{}const g=i.getExtension("WEBGL_debug_renderer_info");if(!g)return console.warn("Unable to determine GPU Info:"),{vendor:"Unknown",renderer:"Unknown",gpuVendor:"Unknown",maxTextureSize:0,supportsWebGL:i!=null,supportsWebGL2:e!=null};const t=i.getParameter(g.UNMASKED_VENDOR_WEBGL),I=i.getParameter(g.UNMASKED_RENDERER_WEBGL),l=i.getParameter(i.MAX_TEXTURE_SIZE);let C;return I.match(/NVIDIA/i)?C="NVidia":I.match(/AMD/i)||I.match(/Radeon/i)?C="AMD":I.match(/Intel/i)?C="Intel":I.match(/Mali/i)?C="ARM":I.match(/Apple/i)?C="Apple":I.match(/Adreno/i)?C="Adreno":I.match(/Swiftshader/i)?(C="Google",console.warn("Hardware rendering is disabled or not working on your system. Falling back to the Swiftshader. Expect poor performance:",I)):console.warn("Unable to determine GPU vendor:",I),{vendor:t,renderer:I,gpuVendor:C,maxTextureSize:l,supportsWebGL:!0,supportsWebGL2:e!=null}}const _e=function(){if(!globalThis.navigator)return{isMobileDevice:!1,isIOSDevice:!1,browserName:"Node",webGLSupported:!1,deviceCategory:"High",hardwareConcurrency:4};const i=jF(),e=qF(),g=$F();let t="Low";if(g.supportsWebGL)if(i)t="Low";else{const l=g.renderer.replace(/[()]/g,"").split(" ");if(g.gpuVendor=="NVidia"){const C=l.indexOf("GTX");if(C!=-1){const n=l[C+1];n.endsWith("M")?parseInt(n.substring(0,n.length-2))>=900?t="Medium":t="Low":parseInt(n)>=1030?t="High":t="Medium"}else l.includes("RTX")||l.includes("TITAN")||l.includes("Quadro")?t="High":t="Low"}else if(g.gpuVendor=="AMD"){const C=l.indexOf("Radeon");if(C!=-1){const n=l.indexOf("RX");if(n!=-1)if(l[n+1]=="Vega")t="High";else{const F=l[n+1];let a;F.endsWith("X")?(a=parseInt(F.substring(0,F.length-2)),t="High"):a=parseInt(F),a>=480?t="High":t="Medium"}else l[C+1]=="Pro"?parseInt(l[n+1])>=450?t="Medium":t="Low":l[C+1]=="Sky"&&parseInt(l[n+1])>=700?t="Medium":t="Low"}else l.includes("FirePro")||l.includes("Quadro")?t="High":t="Low"}else(g.gpuVendor=="Adreno"||g.gpuVendor=="Intel"||g.gpuVendor=="Google")&&(t="Low")}let I=globalThis.navigator.hardwareConcurrency;return I||(i?I=4:I=6),{isMobileDevice:i,isIOSDevice:PF(),browserName:e.browserName,fullVersion:e.fullVersion,majorVersion:e.majorVersion,appName:e.appName,userAgent:e.userAgent,webGLSupported:g.supportsWebGL,gpuDesc:g,deviceCategory:t,hardwareConcurrency:I}}();globalThis.ZeaSystemDesc||(globalThis.ZeaSystemDesc=_e);let ut={},qI={},St=[];class S{static register(e,g){if(e in ut){console.warn(`There's a class registered with '${e}' name. Second registration failed.`);return}const t=St.length;St.push(g),qI[t]=e,ut[e]=t}static getClassDefinition(e){if(!(e in ut))throw new Error(`${e} class is not registered`);return St[ut[e]]}static getClassName(e){const g=St.indexOf(e);if(g>=0&&qI[g])return qI[g];throw new Error("class is not registered")}static constructClass(e){const g=St[ut[e]];if(!g)throw new Error(`${e} class is not registered`);return new g}static flush(){ut={},qI={},St=[]}}class tg{static replaceAll(e,g,t){return e.replace(new RegExp(g,"g"),t)}static stringifyJSONWithFixedPrecision(e,g=0,t=5){return JSON.stringify(e,(I,l)=>l&&(l.toFixed?Number(l.toFixed(t)):l),g)}static hashStr(e){let g=0,t,I,l;if(e.length===0)return g;for(t=0,l=e.length;t<l;t++)I=e.charCodeAt(t),g=(g<<5)-g+I,g|=0;return Math.abs(g)}}class f{constructor(e=0,g=0){e instanceof Float32Array||e instanceof Uint32Array||e instanceof Int32Array?this.__data=e:typeof e=="number"&&typeof g=="number"?(this.__data=new Float32Array(2),this.__data[0]=e,this.__data[1]=g):typeof e=="object"?(this.__data=new Float32Array(2),this.fromJSON(e)):this.__data=new Float32Array(2)}get x(){return this.__data[0]}set x(e){this.__data[0]=e}get y(){return this.__data[1]}set y(e){this.__data[1]=e}set(e,g){this.__data[0]=e,this.__data[1]=g}setFromOther(e){this.x=e.x,this.y=e.y}isEqual(e){return this.x==e.x&&this.y==e.y}notEqual(e){return this.x!=e.x&&this.y!=e.y}approxEqual(e,g=Number.EPSILON){return Math.abs(this.x-e.x)<g&&Math.abs(this.y-e.y)<g}add(e){return new f(this.x+e.x,this.y+e.y)}addInPlace(e){this.x+=e.x,this.y+=e.y}subtract(e){return new f(this.x-e.x,this.y-e.y)}subtractInPlace(e){return this.x-=e.x,this.y-=e.y,this}scale(e){return new f(this.x*e,this.y*e)}scaleInPlace(e){this.x*=e,this.y*=e}invert(){return new f(1/this.x,1/this.y)}invertInPlace(){return this.x=1/this.x,this.y=1/this.y,this}multiply(e){return new f(this.x*e.x,this.y*e.y)}multiplyInPlace(e){this.x*=e.x,this.y*=e.y}lengthSquared(){const e=this.__data[0],g=this.__data[1];return e*e+g*g}length(){return Math.sqrt(this.lengthSquared())}distanceTo(e){const g=this.__data[0]-e.x,t=this.__data[1]-e.y;return Math.sqrt(g*g+t*t)}normalize(){const e=this.__data[0],g=this.__data[1];let t=e*e+g*g;return t<Number.EPSILON?new f:(t=1/Math.sqrt(t),new f(e*t,g*t))}normalizeInPlace(){const e=this.__data[0],g=this.__data[1];let t=e*e+g*g;t<Number.EPSILON||(t=1/Math.sqrt(t),this.set(e*t,g*t))}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}angleTo(e){const g=this.normalize().dot(e.normalize());return g>1?0:g<-1?Math.PI:Math.acos(g)}signedAngleTo(e){const g=this.angleTo(e);return this.cross(e)<0?-g:g}rotate(e){const g=Math.cos(e),t=Math.sin(e);return new f(this.x*g-this.y*t,this.x*t+this.y*g)}lerp(e,g){const t=this.x,I=this.y;return new f(t+g*(e.x-t),I+g*(e.y-I))}setRandomDir(e=1){const g=Math.random()*2*Math.PI;return this.__data[0]=Math.cos(g)*e,this.__data[1]=Math.sin(g)*e,this}setRandom(e=1){return this.__data[0]=Math.random()*e,this.__data[1]=Math.random()*e,this}clone(){return new f(this.__data[0],this.__data[1])}asArray(){return this.__data}toString(){return tg.stringifyJSONWithFixedPrecision(this.toJSON())}toJSON(){return{x:this.x,y:this.y}}fromJSON(e){this.x=e.x,this.y=e.y}readBinary(e){this.x=e.loadFloat32(),this.y=e.loadFloat32()}static intersectionOfLines(e,g,t,I){const l=(e.x-g.x)*(t.y-I.y),C=(e.y-g.y)*(t.x-I.x),n=l-C;if(n==0)return null;const F=e.x*g.y-e.y*g.x,a=t.x*I.y-t.y*I.x,U=t.x-I.x,d=e.x-g.x,s=t.y-I.y,o=e.y-g.y,A=(F*U-d*a)/n,B=(F*s-o*a)/n;return new f(A,B)}isValid(){for(const e of this.__data)if(e==1/0||isNaN(e))return!1;return!0}}class b{constructor(e=0,g=0,t=0){if(e instanceof Float32Array||e instanceof Uint32Array)this.__data=e;else if(e instanceof ArrayBuffer){console.warn("deprecated, please use new Vec3(new Float32Array(buffer, byteOffset, 3))");const I=e,l=g;this.__data=new Float32Array(I,l,3)}else typeof e=="number"&&typeof g=="number"&&typeof t=="number"?(this.__data=new Float32Array(3),this.__data[0]=e,this.__data[1]=g,this.__data[2]=t):e!=null&&typeof e=="object"?(this.__data=new Float32Array(3),this.fromJSON(e)):this.__data=new Float32Array(3)}get x(){return this.__data[0]}set x(e){this.__data[0]=e}get y(){return this.__data[1]}set y(e){this.__data[1]=e}get z(){return this.__data[2]}set z(e){this.__data[2]=e}get xy(){return new f(this.__data[0],this.__data[1])}get yz(){return new f(this.__data[1],this.__data[2])}set(e,g,t){this.x=e,this.y=g!==void 0?g:e,this.z=t!==void 0?t:e}setDataArray(e){this.__data=e}setFromOther(e){this.x=e.x,this.y=e.y,this.z=e.z}isNull(){return Math.abs(this.x)<Number.EPSILON&&Math.abs(this.y)<Number.EPSILON&&Math.abs(this.z)<Number.EPSILON}is111(){return Math.abs(1-this.x)<Number.EPSILON&&Math.abs(1-this.y)<Number.EPSILON&&Math.abs(1-this.z)<Number.EPSILON}isEqual(e){return this.x==e.x&&this.y==e.y&&this.z==e.z}notEqual(e){return this.x!=e.x&&this.y!=e.y&&this.z!=e.z}approxEqual(e,g=Number.EPSILON){return Math.abs(this.x-e.x)<g&&Math.abs(this.y-e.y)<g&&Math.abs(this.z-e.z)<g}add(e){return new b(this.x+e.x,this.y+e.y,this.z+e.z)}addInPlace(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}subtract(e){return new b(this.x-e.x,this.y-e.y,this.z-e.z)}subtractInPlace(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}multiply(e){return new b(this.x*e.x,this.y*e.y,this.z*e.z)}multiplyInPlace(e){this.x*=e.x,this.y*=e.y,this.z*=e.z}divide(e){return new b(this.x/e.x,this.y/e.y,this.z/e.z)}divideInPlace(e){this.x/=e.x,this.y/=e.y,this.z/=e.z}scale(e){return new b(this.x*e,this.y*e,this.z*e)}scaleInPlace(e){this.x*=e,this.y*=e,this.z*=e}negate(){return new b(-this.x,-this.y,-this.z)}inverse(){return new b(1/this.x,1/this.y,1/this.z)}lengthSquared(){const e=this.__data[0],g=this.__data[1],t=this.__data[2];return e*e+g*g+t*t}length(){return Math.sqrt(this.lengthSquared())}distanceTo(e){const g=this.__data[0]-e.x,t=this.__data[1]-e.y,I=this.__data[2]-e.z;return Math.sqrt(g*g+t*t+I*I)}normalize(){let e=this.__data[0]*this.__data[0]+this.__data[1]*this.__data[1]+this.__data[2]*this.__data[2];return e<Number.EPSILON?new b:(e=1/Math.sqrt(e),new b(this.__data[0]*e,this.__data[1]*e,this.__data[2]*e))}normalizeInPlace(){let e=this.__data[0]*this.__data[0]+this.__data[1]*this.__data[1]+this.__data[2]*this.__data[2];if(e<Number.EPSILON)return;e=Math.sqrt(e);const g=1/e;return this.__data[0]*=g,this.__data[1]*=g,this.__data[2]*=g,e}resize(e){const g=this.__data[0]*this.__data[0]+this.__data[1]*this.__data[1]+this.__data[2]*this.__data[2];if(g<Number.EPSILON)return;const t=e/Math.sqrt(g);return new b(this.__data[0]*t,this.__data[1]*t,this.__data[2]*t)}resizeInPlace(e){const g=this.__data[0]*this.__data[0]+this.__data[1]*this.__data[1]+this.__data[2]*this.__data[2];if(g<Number.EPSILON)return;const t=e/Math.sqrt(g);this.__data[0]*=t,this.__data[1]*=t,this.__data[2]*=t}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}cross(e){const g=this.x,t=this.y,I=this.z,l=e.x,C=e.y,n=e.z;return new b(t*n-I*C,I*l-g*n,g*C-t*l)}angleTo(e){const g=this.dot(e);return g>1?0:Math.acos(g)}lerp(e,g){const t=this.x,I=this.y,l=this.z;return new b(t+g*(e.x-t),I+g*(e.y-I),l+g*(e.z-l))}abs(){return new b(Math.abs(this.x),Math.abs(this.y),Math.abs(this.z))}setRandomDir(e=1){const g=Math.random()*2*Math.PI,t=Math.random()*2-1,I=Math.sqrt(1-t*t)*e;return this.__data[0]=Math.cos(g)*I,this.__data[1]=Math.sin(g)*I,this.__data[2]=t*e,this}setRandom(e=1){return this.__data[0]=(Math.random()-.5)*e,this.__data[1]=(Math.random()-.5)*e,this.__data[2]=(Math.random()-.5)*e,this}clone(){return new b(this.__data[0],this.__data[1],this.__data[2])}asArray(){return this.__data}toString(){return tg.stringifyJSONWithFixedPrecision(this.toJSON())}toJSON(){return{x:this.x,y:this.y,z:this.z}}fromJSON(e){this.x=e.x,this.y=e.y,this.z=e.z}readBinary(e){this.x=e.loadFloat32(),this.y=e.loadFloat32(),this.z=e.loadFloat32()}isValid(){for(const e of this.__data)if(e==1/0||isNaN(e))return!1;return!0}}class Be{constructor(e=0,g=0,t=0,I=0){if(e instanceof Float32Array||e instanceof Uint32Array)this.__data=e;else if(e instanceof ArrayBuffer){console.warn("deprecated, please use new Vec4(new Float32Array(buffer, byteOffset, 4))");const l=e,C=g;this.__data=new Float32Array(l,C,4)}else typeof e=="number"&&typeof g=="number"&&typeof t=="number"&&typeof I=="number"?(this.__data=new Float32Array(4),this.__data[0]=e,this.__data[1]=g,this.__data[2]=t,this.__data[3]=I):e!=null&&typeof e=="object"?(this.__data=new Float32Array(4),this.fromJSON(e)):this.__data=new Float32Array(4)}get x(){return this.__data[0]}set x(e){this.__data[0]=e}get y(){return this.__data[1]}set y(e){this.__data[1]=e}get z(){return this.__data[2]}set z(e){this.__data[2]=e}get t(){return this.__data[3]}set t(e){this.__data[3]=e}get w(){return this.__data[3]}set w(e){this.__data[3]=e}get xyz(){return new b(this.__data[0],this.__data[1],this.__data[2])}set(e,g,t,I){this.x=e,this.y=g,this.z=t,this.t=I}setFromOther(e){this.x=e.x,this.y=e.y,this.z=e.z,this.t=e.t}isEqual(e){return this.x==e.x&&this.y==e.y&&this.z==e.z&&this.t==e.t}notEqual(e){return this.x!=e.x&&this.y!=e.y&&this.z!=e.z&&this.t!=e.t}approxEqual(e,g=Number.EPSILON){return Math.abs(this.x-e.x)<g&&Math.abs(this.y-e.y)<g&&Math.abs(this.z-e.z)<g&&Math.abs(this.t-e.t)<g}add(e){return new Be(this.x+e.x,this.y+e.y,this.z+e.z,this.t+e.t)}addInPlace(e){this.x+=e.x,this.y+=e.y,this.z+=e.z,this.t+=e.t}subtract(e){return new Be(this.x-e.x,this.y-e.y,this.z-e.z,this.t-e.t)}subtractInPlace(e){this.x-=e.x,this.y-=e.y,this.z-=e.z,this.t-=e.t}multiply(e){return new Be(this.x*e.x,this.y*e.y,this.z*e.z,this.t*e.t)}multiplyInPlace(e){this.x*=e.x,this.y*=e.y,this.z*=e.z,this.t*=e.t}divide(e){return new Be(this.x/e.x,this.y/e.y,this.z/e.z,this.t/e.t)}divideInPlace(e){this.x/=e.x,this.y/=e.y,this.z/=e.z,this.t/=e.t}scale(e){return new Be(this.x*e,this.y*e,this.z*e,this.t*e)}scaleInPlace(e){this.set(this.x*e,this.y*e,this.z*e,this.t*e)}length(){const e=this.__data[0],g=this.__data[1],t=this.__data[2],I=this.__data[2];return Math.sqrt(e*e+g*g+t*t+I*I)}lengthSquared(){const e=this.__data[0],g=this.__data[1],t=this.__data[2],I=this.__data[3];return e*e+g*g+t*t+I*I}normalize(){const e=this.__data[0],g=this.__data[1],t=this.__data[2],I=this.__data[3];let l=e*e+g*g+t*t+I*I;return l<Number.EPSILON?new Be:(l=1/Math.sqrt(l),new Be(e*l,g*l,t*l))}normalizeInPlace(){const e=this.__data[0],g=this.__data[1],t=this.__data[2],I=this.__data[3];let l=e*e+g*g+t*t+I*I;l<Number.EPSILON||(l=1/Math.sqrt(l),this.set(e*l,g*l,t*l,I*l))}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.t*e.t}cross(e){const g=this.x,t=this.y,I=this.z,l=this.t,C=e.x,n=e.y,F=e.z,a=e.t;return new Be(t*F-I*n,I*a-l*F,l*C-g*a,g*n-t*C)}angleTo(e){const g=this.normalize(),t=e.normalize(),I=g.dot(t);return I>1?0:Math.acos(I)}lerp(e,g){const t=this.x,I=this.y,l=this.z,C=this.t;return new Be(t+g*(e.x-t),I+g*(e.y-I),l+g*(e.z-l),C+g*(e.t-C))}clone(){return new Be(this.__data[0],this.__data[1],this.__data[2],this.__data[3])}toVec3(){return new b(this.__data[0],this.__data[1],this.__data[2])}asArray(){return this.__data}toString(){return tg.stringifyJSONWithFixedPrecision(this.toJSON())}toJSON(){return{x:this.x,y:this.y,z:this.z,t:this.t}}fromJSON(e){this.x=e.x,this.y=e.y,this.z=e.z,this.t=e.t}readBinary(e){this.x=e.loadFloat32(),this.y=e.loadFloat32(),this.z=e.loadFloat32(),this.t=e.loadFloat32()}isValid(){for(const e of this.__data)if(e==1/0||isNaN(e))return!1;return!0}}class E{constructor(e=0,g=0,t=0,I=1){if(e instanceof Float32Array)this.__data=e;else if(e instanceof ArrayBuffer){console.warn("deprecated, please use new Vec4(new Float32Array(buffer, byteOffset, 4))");const l=e,C=g;this.__data=new Float32Array(l,C,4)}else this.__data=new Float32Array(4),typeof e=="string"?e.startsWith("#")?this.setFromHex(e):this.setFromCSSColorName(e):(this.__data[0]=e,this.__data[1]=g,this.__data[2]=t,this.__data[3]=I)}get r(){return this.__data[0]}set r(e){this.__data[0]=e}get g(){return this.__data[1]}set g(e){this.__data[1]=e}get b(){return this.__data[2]}set b(e){this.__data[2]=e}get a(){return this.__data[3]}set a(e){this.__data[3]=e}set(e,g,t,I=1){this.r=e,this.g=g,this.b=t,this.a=I}setFromOther(e){this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a}setFromScalarArray(e){this.r=e[0],this.g=e[1],this.b=e[2],this.a=e.length==4?e[3]:1}getAsRGBArray(){return[this.r*255,this.g*255,this.b*255]}getAsRGBDict(){return{r:this.r*255,g:this.g*255,b:this.b*255}}setFromRGB(e,g,t,I){this.r=e/255,this.g=g/255,this.b=t/255,this.a=I?I/255:1}setFromRGBArray(e){this.r=e[0]/255,this.g=e[1]/255,this.b=e[2]/255,this.a=e.length==4?e[3]/255:1}setFromRGBDict(e){this.r=e.r/255,this.g=e.g/255,this.b=e.b/255,this.a=e.a==4?e.a/255:1}setFromHex(e){function g(I){const l=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(I);return l?{r:parseInt(l[1],16),g:parseInt(l[2],16),b:parseInt(l[3],16)}:null}const t=g(e);if(!t){console.warn("Invalid hex code:"+e);return}this.setFromRGB(t.r,t.g,t.b)}setFromCSSColorName(e){const g=t=>({aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"})[t.toLowerCase()];if(e.startsWith("#"))this.setFromHex(e);else{const t=g(e);t&&this.setFromHex(t)}}toHex(){function e(g){const I=Math.round(g*255).toString(16);return I.length==1?"0"+I:I}return"#"+e(this.r)+e(this.g)+e(this.b)}isEqual(e){return this.r==e.r&&this.g==e.g&&this.b==e.b&&this.a==e.a}notEquals(e){return this.r!=e.r&&this.g!=e.g&&this.b!=e.b&&this.a!=e.a}approxEqual(e,g=Number.EPSILON){return Math.abs(this.r-e.r)<g&&Math.abs(this.g-e.g)<g&&Math.abs(this.b-e.b)<g&&Math.abs(this.a-e.a)<g}add(e){return new E(this.r+e.r,this.g+e.g,this.b+e.b,this.a+e.a)}addInPlace(e){this.r+=e.r,this.g+=e.g,this.b+=e.b,this.a+=e.a}subtract(e){return new E(this.r-e.r,this.g-e.g,this.b-e.b,this.a-e.a)}scale(e){return new E(this.r*e,this.g*e,this.b*e,this.a*e)}scaleInPlace(e){this.r*=e,this.g*=e,this.b*=e,this.a*=e}applyGamma(e){this.set(Math.pow(this.r,e),Math.pow(this.g,e),Math.pow(this.b,e),this.a)}toLinear(e=2.2){return new E(Math.pow(this.r,e),Math.pow(this.g,e),Math.pow(this.b,e),this.a)}toGamma(e=2.2){return new E(Math.pow(this.r,1/e),Math.pow(this.g,1/e),Math.pow(this.b,1/e),this.a)}luminance(){return .2126*this.r+.7152*this.g+.0722*this.b}lerp(e,g){const t=this.r,I=this.g,l=this.b,C=this.a;return new E(t+g*(e.r-t),I+g*(e.g-I),l+g*(e.b-l),C+g*(e.a-C))}static random(e=0,g=!1){return e>0?new E(e+Math.random()*(1-e),e+Math.random()*(1-e),e+Math.random()*(1-e),g?e+Math.random()*(1-e):1):e<0?new E(Math.random()*(1+e),Math.random()*(1+e),Math.random()*(1+e),g?Math.random()*(1+e):1):new E(Math.random(),Math.random(),Math.random(),g?Math.random():1)}clone(){return new E(this.__data[0],this.__data[1],this.__data[2],this.__data[3])}asArray(){return this.__data}as3ComponentArray(){return[this.__data[0],this.__data[1],this.__data[2]]}toJSON(){return{r:this.r,g:this.g,b:this.b,a:this.a}}fromJSON(e){this.r=e.r,this.g=e.g,this.b=e.b,this.a=e.a}readBinary(e){this.r=e.loadFloat32(),this.g=e.loadFloat32(),this.b=e.loadFloat32(),this.a=e.loadFloat32()}toCSSString(){return"rgba("+Math.round(this.r*255)+", "+Math.round(this.g*255)+", "+Math.round(this.b*255)+", "+this.a+")"}}class lt{constructor(e=0,g=0,t=0,I=0){if(typeof I=="number"&&!isNaN(I))this.order=I;else switch(I){case"XYZ":this.order=0;break;case"YZX":this.order=1;break;case"ZXY":this.order=2;break;case"XZY":this.order=3;break;case"ZYX":this.order=4;break;case"YXZ":this.order=5;break;default:throw new Error("Invalid Euler Angles Order:"+I)}if(e instanceof ArrayBuffer){const l=e,C=g;this.__data=new Float32Array(l,C,4)}else this.__data=new Float32Array(3),this.__data[0]=e,this.__data[1]=g,this.__data[2]=t}get x(){return this.__data[0]}set x(e){this.__data[0]=e}get y(){return this.__data[1]}set y(e){this.__data[1]=e}get z(){return this.__data[2]}set z(e){this.__data[2]=e}set(e,g,t){this.__data[0]=e,this.__data[1]=g,this.__data[2]=t}toString(){return tg.stringifyJSONWithFixedPrecision(this.toJSON())}toJSON(){return{x:this.__data[0],y:this.__data[1],z:this.__data[2],order:this.order}}fromJSON(e){this.__data[0]=e.x,this.__data[1]=e.y,this.__data[2]=e.z,this.order=e.order}}class ng{constructor(e=1,g=0,t=0,I=0,l=1,C=0,n=0,F=0,a=1){if(e instanceof b&&g instanceof b&&t instanceof b)this.__data=new Float32Array(9),this.set(e.x,e.y,e.z,g.x,g.y,g.z,t.x,t.y,t.z);else if(e instanceof Float32Array)this.__data=e;else if(e instanceof ArrayBuffer){console.warn("Deprecated, please use new Vec3(new Float32Array(buffer, byteOffset, 9))");const U=e,d=g;this.__data=new Float32Array(U,d,9)}else this.__data=new Float32Array(9),this.set(e,g,t,I,l,C,n,F,a)}get m00(){return this.__data[0]}set m00(e){this.__data[0]=e}get m01(){return this.__data[1]}set m01(e){this.__data[1]=e}get m02(){return this.__data[2]}set m02(e){this.__data[2]=e}get m10(){return this.__data[3]}set m10(e){this.__data[3]=e}get m11(){return this.__data[4]}set m11(e){this.__data[4]=e}get m12(){return this.__data[5]}set m12(e){this.__data[5]=e}get m20(){return this.__data[6]}set m20(e){this.__data[6]=e}get m21(){return this.__data[7]}set m21(e){this.__data[7]=e}get m22(){return this.__data[8]}set m22(e){this.__data[8]=e}get xAxis(){return new b(new Float32Array(this.__data.buffer,0,3))}set xAxis(e){this.xAxis.set(e.x,e.y,e.z)}get yAxis(){return new b(new Float32Array(this.__data.buffer,3*4,3))}set yAxis(e){this.yAxis.set(e.x,e.y,e.z)}get zAxis(){return new b(new Float32Array(this.__data.buffer,6*4,3))}set zAxis(e){this.zAxis.set(e.x,e.y,e.z)}set(e=1,g=0,t=0,I=0,l=1,C=0,n=0,F=0,a=1){this.__data[0]=e,this.__data[1]=g,this.__data[2]=t,this.__data[3]=I,this.__data[4]=l,this.__data[5]=C,this.__data[6]=n,this.__data[7]=F,this.__data[8]=a}setIdentity(){this.set()}setFromMat(e){this.__data[0]=e.m00,this.__data[1]=e.m01,this.__data[2]=e.m02,this.__data[3]=e.m10,this.__data[4]=e.m11,this.__data[5]=e.m12,this.__data[6]=e.m20,this.__data[7]=e.m21,this.__data[8]=e.m22}setFromDirectionAndUpvector(e,g){const t=e,I=t.length();if(I<Number.EPSILON){this.setIdentity();return}t.scaleInPlace(1/I);const l=g.cross(t),C=l.length();C>Number.EPSILON&&l.scaleInPlace(1/C);const n=t.cross(l),F=n.length();F>Number.EPSILON&&n.scaleInPlace(1/F),this.set(l.x,l.y,l.z,n.x,n.y,n.z,t.x,t.y,t.z)}inverse(){const e=this.__data[0],g=this.__data[1],t=this.__data[2],I=this.__data[3],l=this.__data[4],C=this.__data[5],n=this.__data[6],F=this.__data[7],a=this.__data[8],U=a*l-C*F,d=-a*I+C*n,s=F*I-l*n;let o=e*U+g*d+t*s;return o?(o=1/o,new ng(U*o,(-a*g+t*F)*o,(C*g-t*l)*o,d*o,(a*e-t*n)*o,(-C*e+t*I)*o,s*o,(-F*e+g*n)*o,(l*e-g*I)*o)):(console.warn("Unable to invert Mat3"),new ng)}invertInPlace(){const e=this.__data[0],g=this.__data[1],t=this.__data[2],I=this.__data[3],l=this.__data[4],C=this.__data[5],n=this.__data[6],F=this.__data[7],a=this.__data[8],U=a*l-C*F,d=-a*I+C*n,s=F*I-l*n;let o=e*U+g*d+t*s;return o?(o=1/o,this.set(U*o,(-a*g+t*F)*o,(C*g-t*l)*o,d*o,(a*e-t*n)*o,(-C*e+t*I)*o,s*o,(-F*e+g*n)*o,(l*e-g*I)*o),!0):(console.warn("Unable to invert Mat3"),!1)}transpose(){return new ng(this.__data[0],this.__data[3],this.__data[6],this.__data[1],this.__data[4],this.__data[7],this.__data[2],this.__data[5],this.__data[8])}transposeInPlace(){const e=this.__data[1],g=this.__data[2],t=this.__data[5];this.__data[1]=this.__data[3],this.__data[2]=this.__data[6],this.__data[3]=e,this.__data[5]=this.__data[7],this.__data[6]=g,this.__data[7]=t}transformVec3(e){return new b(this.__data[0]*e.x+this.__data[1]*e.y+this.__data[2]*e.z,this.__data[3]*e.x+this.__data[4]*e.y+this.__data[5]*e.z,this.__data[6]*e.x+this.__data[7]*e.y+this.__data[8]*e.z)}clone(){return new ng(this.__data[0],this.__data[1],this.__data[2],this.__data[3],this.__data[4],this.__data[5],this.__data[6],this.__data[7],this.__data[8])}readBinary(e){this.__data=e.loadFloat32Array(9)}toJSON(){return this.__data}fromJSON(e){this.__data=new Float32Array(e)}toString(){return tg.stringifyJSONWithFixedPrecision(this.toJSON())}asArray(){return this.__data}}class Ee{constructor(e=1,g=0,t=0,I=0,l=0,C=1,n=0,F=0,a=0,U=0,d=1,s=0,o=0,A=0,B=0,Q=1){if(e instanceof Float32Array)this.__data=e;else if(e instanceof ArrayBuffer){const r=e,R=g;this.__data=new Float32Array(r,R,16)}else this.__data=new Float32Array(16),this.set(e,g,t,I,l,C,n,F,a,U,d,s,o,A,B,Q)}get m00(){return this.__data[0]}set m00(e){this.__data[0]=e}get m01(){return this.__data[1]}set m01(e){this.__data[1]=e}get m02(){return this.__data[2]}set m02(e){this.__data[2]=e}get m03(){return this.__data[3]}set m03(e){this.__data[3]=e}get m10(){return this.__data[4]}set m10(e){this.__data[4]=e}get m11(){return this.__data[5]}set m11(e){this.__data[5]=e}get m12(){return this.__data[6]}set m12(e){this.__data[6]=e}get m13(){return this.__data[7]}set m13(e){this.__data[7]=e}get m20(){return this.__data[8]}set m20(e){this.__data[8]=e}get m21(){return this.__data[9]}set m21(e){this.__data[9]=e}get m22(){return this.__data[10]}set m22(e){this.__data[10]=e}get m23(){return this.__data[11]}set m23(e){this.__data[11]=e}get m30(){return this.__data[12]}set m30(e){this.__data[12]=e}get m31(){return this.__data[13]}set m31(e){this.__data[13]=e}get m32(){return this.__data[14]}set m32(e){this.__data[14]=e}get m33(){return this.__data[15]}set m33(e){this.__data[15]=e}get xAxis(){return new b(new Float32Array(this.__data.buffer,0,3))}set xAxis(e){this.xAxis.set(e.x,e.y,e.z)}get yAxis(){return new b(new Float32Array(this.__data.buffer,4*4,3))}set yAxis(e){this.yAxis.set(e.x,e.y,e.z)}get zAxis(){return new b(new Float32Array(this.__data.buffer,8*4,3))}set zAxis(e){this.zAxis.set(e.x,e.y,e.z)}get translation(){return new b(new Float32Array(this.__data.buffer,12*4,3))}set translation(e){this.translation.set(e.x,e.y,e.z)}set(e=1,g=0,t=0,I=0,l=0,C=1,n=0,F=0,a=0,U=0,d=1,s=0,o=0,A=0,B=0,Q=1){this.__data[0]=e,this.__data[1]=g,this.__data[2]=t,this.__data[3]=I,this.__data[4]=l,this.__data[5]=C,this.__data[6]=n,this.__data[7]=F,this.__data[8]=a,this.__data[9]=U,this.__data[10]=d,this.__data[11]=s,this.__data[12]=o,this.__data[13]=A,this.__data[14]=B,this.__data[15]=Q}setIdentity(){this.set()}setDataArray(e){this.__data=e}setFromMat4(e){this.__data[0]=e.m00,this.__data[1]=e.m01,this.__data[2]=e.m02,this.__data[3]=e.m03,this.__data[4]=e.m10,this.__data[5]=e.m11,this.__data[6]=e.m12,this.__data[7]=e.m13,this.__data[8]=e.m20,this.__data[9]=e.m21,this.__data[10]=e.m22,this.__data[11]=e.m23,this.__data[12]=e.m30,this.__data[13]=e.m31,this.__data[14]=e.m32,this.__data[15]=e.m33}toMat3(){return new ng(this.__data[0],this.__data[1],this.__data[2],this.__data[4],this.__data[5],this.__data[6],this.__data[8],this.__data[9],this.__data[10])}transposeInPlace(){const e=this.__data[1],g=this.__data[2],t=this.__data[3],I=this.__data[6],l=this.__data[7],C=this.__data[11];this.__data[1]=this.__data[4],this.__data[2]=this.__data[8],this.__data[3]=this.__data[12],this.__data[4]=e,this.__data[6]=this.__data[9],this.__data[7]=this.__data[13],this.__data[8]=g,this.__data[9]=I,this.__data[11]=this.__data[14],this.__data[12]=t,this.__data[13]=l,this.__data[14]=C}transpose(){return new Ee(this.__data[0],this.__data[4],this.__data[8],this.__data[12],this.__data[1],this.__data[5],this.__data[9],this.__data[13],this.__data[2],this.__data[6],this.__data[10],this.__data[14],this.__data[3],this.__data[7],this.__data[11],this.__data[15])}inverse(){const e=this.__data[0],g=this.__data[1],t=this.__data[2],I=this.__data[3],l=this.__data[4],C=this.__data[5],n=this.__data[6],F=this.__data[7],a=this.__data[8],U=this.__data[9],d=this.__data[10],s=this.__data[11],o=this.__data[12],A=this.__data[13],B=this.__data[14],Q=this.__data[15],r=e*C-g*l,R=e*n-t*l,V=e*F-I*l,h=g*n-t*C,m=g*F-I*C,Z=t*F-I*n,c=a*A-U*o,W=a*B-d*o,u=a*Q-s*o,J=U*B-d*A,N=U*Q-s*A,X=d*Q-s*B;let y=r*X-R*N+V*J+h*u-m*W+Z*c;return y?(y=1/y,new Ee((C*X-n*N+F*J)*y,(t*N-g*X-I*J)*y,(A*Z-B*m+Q*h)*y,(d*m-U*Z-s*h)*y,(n*u-l*X-F*W)*y,(e*X-t*u+I*W)*y,(B*V-o*Z-Q*R)*y,(a*Z-d*V+s*R)*y,(l*N-C*u+F*c)*y,(g*u-e*N-I*c)*y,(o*m-A*V+Q*r)*y,(U*V-a*m-s*r)*y,(C*W-l*J-n*c)*y,(e*J-g*W+t*c)*y,(A*R-o*h-B*r)*y,(a*h-U*R+d*r)*y)):(console.warn("Unable to invert Mat4"),this)}invertInPlace(){const e=this.__data[0],g=this.__data[1],t=this.__data[2],I=this.__data[3],l=this.__data[4],C=this.__data[5],n=this.__data[6],F=this.__data[7],a=this.__data[8],U=this.__data[9],d=this.__data[10],s=this.__data[11],o=this.__data[12],A=this.__data[13],B=this.__data[14],Q=this.__data[15],r=e*C-g*l,R=e*n-t*l,V=e*F-I*l,h=g*n-t*C,m=g*F-I*C,Z=t*F-I*n,c=a*A-U*o,W=a*B-d*o,u=a*Q-s*o,J=U*B-d*A,N=U*Q-s*A,X=d*Q-s*B;let y=r*X-R*N+V*J+h*u-m*W+Z*c;return y?(y=1/y,this.set((C*X-n*N+F*J)*y,(t*N-g*X-I*J)*y,(A*Z-B*m+Q*h)*y,(d*m-U*Z-s*h)*y,(n*u-l*X-F*W)*y,(e*X-t*u+I*W)*y,(B*V-o*Z-Q*R)*y,(a*Z-d*V+s*R)*y,(l*N-C*u+F*c)*y,(g*u-e*N-I*c)*y,(o*m-A*V+Q*r)*y,(U*V-a*m-s*r)*y,(C*W-l*J-n*c)*y,(e*J-g*W+t*c)*y,(A*R-o*h-B*r)*y,(a*h-U*R+d*r)*y),!0):(console.warn("Unable to invert Mat4"),!1)}setInverse(e){const g=e.__data[0],t=e.__data[1],I=e.__data[2],l=e.__data[3],C=e.__data[4],n=e.__data[5],F=e.__data[6],a=e.__data[7],U=e.__data[8],d=e.__data[9],s=e.__data[10],o=e.__data[11],A=e.__data[12],B=e.__data[13],Q=e.__data[14],r=e.__data[15],R=g*n-t*C,V=g*F-I*C,h=g*a-l*C,m=t*F-I*n,Z=t*a-l*n,c=I*a-l*F,W=U*B-d*A,u=U*Q-s*A,J=U*r-o*A,N=d*Q-s*B,X=d*r-o*B,y=s*r-o*Q;let p=R*y-V*X+h*N+m*J-Z*u+c*W;if(!p)throw new Error("Unable to invert Mat4");p=1/p,this.set((n*y-F*X+a*N)*p,(I*X-t*y-l*N)*p,(B*c-Q*Z+r*m)*p,(s*Z-d*c-o*m)*p,(F*J-C*y-a*u)*p,(g*y-I*J+l*u)*p,(Q*h-A*c-r*V)*p,(U*c-s*h+o*V)*p,(C*X-n*J+a*W)*p,(t*J-g*X-l*W)*p,(A*Z-B*h+r*R)*p,(d*h-U*Z-o*R)*p,(n*u-C*N-F*W)*p,(g*N-t*u+I*W)*p,(B*V-A*m-Q*R)*p,(U*m-d*V+s*R)*p)}multiply(e){const g=this.__data[0],t=this.__data[1],I=this.__data[2],l=this.__data[3],C=this.__data[4],n=this.__data[5],F=this.__data[6],a=this.__data[7],U=this.__data[8],d=this.__data[9],s=this.__data[10],o=this.__data[11],A=this.__data[12],B=this.__data[13],Q=this.__data[14],r=this.__data[15],R=e.asArray();let V=R[0],h=R[1],m=R[2],Z=R[3];const c=new Ee;return c.m00=V*g+h*C+m*U+Z*A,c.m01=V*t+h*n+m*d+Z*B,c.m02=V*I+h*F+m*s+Z*Q,c.m03=V*l+h*a+m*o+Z*r,V=R[4],h=R[5],m=R[6],Z=R[7],c.m10=V*g+h*C+m*U+Z*A,c.m11=V*t+h*n+m*d+Z*B,c.m12=V*I+h*F+m*s+Z*Q,c.m13=V*l+h*a+m*o+Z*r,V=R[8],h=R[9],m=R[10],Z=R[11],c.m20=V*g+h*C+m*U+Z*A,c.m21=V*t+h*n+m*d+Z*B,c.m22=V*I+h*F+m*s+Z*Q,c.m23=V*l+h*a+m*o+Z*r,V=R[12],h=R[13],m=R[14],Z=R[15],c.m30=V*g+h*C+m*U+Z*A,c.m31=V*t+h*n+m*d+Z*B,c.m32=V*I+h*F+m*s+Z*Q,c.m33=V*l+h*a+m*o+Z*r,c}multiplyInPlace(e){const g=this.asArray(),t=g[0],I=g[1],l=g[2],C=g[3],n=g[4],F=g[5],a=g[6],U=g[7],d=g[8],s=g[9],o=g[10],A=g[11],B=g[12],Q=g[13],r=g[14],R=g[15],V=e.asArray();let h=V[0],m=V[1],Z=V[2],c=V[3];return this.m00=h*t+m*n+Z*d+c*B,this.m01=h*I+m*F+Z*s+c*Q,this.m02=h*l+m*a+Z*o+c*r,this.m03=h*C+m*U+Z*A+c*R,h=V[4],m=V[5],Z=V[6],c=V[7],this.m10=h*t+m*n+Z*d+c*B,this.m11=h*I+m*F+Z*s+c*Q,this.m12=h*l+m*a+Z*o+c*r,this.m13=h*C+m*U+Z*A+c*R,h=V[8],m=V[9],Z=V[10],c=V[11],this.m20=h*t+m*n+Z*d+c*B,this.m21=h*I+m*F+Z*s+c*Q,this.m22=h*l+m*a+Z*o+c*r,this.m23=h*C+m*U+Z*A+c*R,h=V[12],m=V[13],Z=V[14],c=V[15],this.m30=h*t+m*n+Z*d+c*B,this.m31=h*I+m*F+Z*s+c*Q,this.m32=h*l+m*a+Z*o+c*r,this.m33=h*C+m*U+Z*A+c*R,this}postMultiplyInPlace(e){const g=e.asArray(),t=g[0],I=g[1],l=g[2],C=g[3],n=g[4],F=g[5],a=g[6],U=g[7],d=g[8],s=g[9],o=g[10],A=g[11],B=g[12],Q=g[13],r=g[14],R=g[15],V=this.asArray();let h=V[0],m=V[1],Z=V[2],c=V[3];return this.m00=h*t+m*n+Z*d+c*B,this.m01=h*I+m*F+Z*s+c*Q,this.m02=h*l+m*a+Z*o+c*r,this.m03=h*C+m*U+Z*A+c*R,h=V[4],m=V[5],Z=V[6],c=V[7],this.m10=h*t+m*n+Z*d+c*B,this.m11=h*I+m*F+Z*s+c*Q,this.m12=h*l+m*a+Z*o+c*r,this.m13=h*C+m*U+Z*A+c*R,h=V[8],m=V[9],Z=V[10],c=V[11],this.m20=h*t+m*n+Z*d+c*B,this.m21=h*I+m*F+Z*s+c*Q,this.m22=h*l+m*a+Z*o+c*r,this.m23=h*C+m*U+Z*A+c*R,h=V[12],m=V[13],Z=V[14],c=V[15],this.m30=h*t+m*n+Z*d+c*B,this.m31=h*I+m*F+Z*s+c*Q,this.m32=h*l+m*a+Z*o+c*r,this.m33=h*C+m*U+Z*A+c*R,this}translateInPlace(e){const g=this.__data,t=e.x,I=e.y,l=e.z;return g[12]=g[0]*t+g[4]*I+g[8]*l+g[12],g[13]=g[1]*t+g[5]*I+g[9]*l+g[13],g[14]=g[2]*t+g[6]*I+g[10]*l+g[14],g[15]=g[3]*t+g[7]*I+g[11]*l+g[15],this}setLookAt(e,g,t){const I=e.subtract(g),l=I.length();if(l<Number.EPSILON){this.setIdentity();return}I.scaleInPlace(1/l);const C=t.cross(I),n=C.length();n>Number.EPSILON&&C.scaleInPlace(1/n);const F=I.cross(C),a=F.length();a>Number.EPSILON&&F.scaleInPlace(1/a),this.set(C.x,C.y,C.z,0,F.x,F.y,F.z,0,I.x,I.y,I.z,0,e.x,e.y,e.z,1)}setRotation(e,g){const t=e.length();if(Math.abs(t)<Number.EPSILON)return null;const I=e.x/t,l=e.y/t,C=e.z/t,n=Math.sin(g),F=Math.cos(g),a=1-F,U=this.__data;return U[0]=I*I*a+F,U[1]=l*I*a+C*n,U[2]=C*I*a-l*n,U[3]=0,U[4]=I*l*a-C*n,U[5]=l*l*a+F,U[6]=C*l*a+I*n,U[7]=0,U[8]=I*C*a+l*n,U[9]=l*C*a-I*n,U[10]=C*C*a+F,U[11]=0,U[12]=0,U[13]=0,U[14]=0,U[15]=1,this}setXRotation(e){const g=Math.sin(e),t=Math.cos(e),I=this.__data;return I[0]=1,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=t,I[6]=g,I[7]=0,I[8]=0,I[9]=-g,I[10]=t,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,this}setYRotation(e){const g=Math.sin(e),t=Math.cos(e),I=this.__data;return I[0]=t,I[1]=0,I[2]=-g,I[3]=0,I[4]=0,I[5]=1,I[6]=0,I[7]=0,I[8]=g,I[9]=0,I[10]=t,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,this}setZRotation(e){const g=Math.sin(e),t=Math.cos(e),I=this.__data;return I[0]=t,I[1]=g,I[2]=0,I[3]=0,I[4]=-g,I[5]=t,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=1,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,this}transformVec4(e){const g=this.__data,t=e.x,I=e.y,l=e.z,C=e.t;return new Be(g[0]*t+g[4]*I+g[8]*l+g[12]*C,g[1]*t+g[5]*I+g[9]*l+g[13]*C,g[2]*t+g[6]*I+g[10]*l+g[14]*C,g[3]*t+g[7]*I+g[11]*l+g[15]*C)}transformVec3(e){const g=this.__data,t=e.x,I=e.y,l=e.z;return new b(g[0]*t+g[4]*I+g[8]*l+g[12],g[1]*t+g[5]*I+g[9]*l+g[13],g[2]*t+g[6]*I+g[10]*l+g[14])}rotateVec3(e){const g=this.__data,t=e.x,I=e.y,l=e.z;return new b(g[0]*t+g[4]*I+g[8]*l,g[1]*t+g[5]*I+g[9]*l,g[2]*t+g[6]*I+g[10]*l)}setPerspectiveMatrix(e,g,t,I){const l=Math.tan(Math.PI*.5-.5*e),C=1/(t-I);this.set(l/g,0,0,0,0,l,0,0,0,0,(t+I)*C,-1,0,0,t*I*C*2,0)}setOrthographicMatrix(e,g,t,I,l,C){const n=1/(e-g),F=1/(t-I),a=1/(l-C);this.set(-2*n,0,0,0,0,-2*F,0,0,0,0,2*a,0,(e+g)*n,(I+t)*F,(C+l)*a,1)}setScale(e,g,t){e instanceof b?this.set(e.x,0,0,0,0,e.y,0,0,0,0,e.z,0,0,0,0,1):this.set(e,0,0,0,0,g,0,0,0,0,t,0,0,0,0,1)}setFromMat3x4Array(e){this.set(e[0],e[1],e[2],0,e[3],e[4],e[5],0,e[6],e[7],e[8],0,e[9],e[10],e[11],1)}clone(){return new Ee(this.__data[0],this.__data[1],this.__data[2],this.__data[3],this.__data[4],this.__data[5],this.__data[6],this.__data[7],this.__data[8],this.__data[9],this.__data[10],this.__data[11],this.__data[12],this.__data[13],this.__data[14],this.__data[15])}toString(){return tg.stringifyJSONWithFixedPrecision(this.toJSON())}toJSON(){return this.__data}fromJSON(e){this.__data=new Float32Array(e)}readBinary(e){this.__data=e.loadFloat32Array(16)}asArray(){return this.__data}}class de{constructor(e=0,g=0,t=0,I=1){if(e instanceof Float32Array)this.__data=e;else if(e instanceof ArrayBuffer){console.warn("deprecated, please use new Vec4(new Float32Array(buffer, byteOffset, 4))");const l=e,C=g;this.__data=new Float32Array(l,C,4)}else this.__data=new Float32Array(4),typeof e=="object"?(this.__data[0]=0,this.__data[1]=0,this.__data[2]=0,this.__data[3]=1,this.fromJSON(e)):(this.__data[0]=e,this.__data[1]=g,this.__data[2]=t,this.__data[3]=I)}get x(){return this.__data[0]}set x(e){this.__data[0]=e}get y(){return this.__data[1]}set y(e){this.__data[1]=e}get z(){return this.__data[2]}set z(e){this.__data[2]=e}get w(){return this.__data[3]}set w(e){this.__data[3]=e}set(e,g,t,I){this.__data[0]=e,this.__data[1]=g,this.__data[2]=t,this.__data[3]=I}setDataArray(e){this.__data=e}setFromOther(e){this.__data[0]=e.x,this.__data[1]=e.y,this.__data[2]=e.z,this.__data[3]=e.w}setFromEulerAngles(e){const g=new b;switch(e.order){case 0:g.set(e.x,-e.y,e.z);break;case 1:g.set(e.y,-e.z,e.x);break;case 2:g.set(e.z,-e.x,e.y);break;case 3:g.set(e.x,e.z,e.y);break;case 4:g.set(e.z,e.y,e.x);break;case 5:g.set(e.y,e.x,e.z);break;default:throw new Error(`Invalid EulerAngles order: ${e.order}`)}const t=g.x*.5,I=g.y*.5,l=g.z*.5,C=Math.cos(t),n=Math.cos(I),F=Math.cos(l),a=Math.sin(t),U=Math.sin(I),d=Math.sin(l),s=C*F,o=C*d,A=a*F,B=a*d,Q=n*A-U*o,r=n*B+U*s,R=n*o-U*A;switch(this.w=n*s+U*B,e.order){case 0:this.x=Q,this.y=-r,this.z=R;break;case 1:this.x=R,this.y=Q,this.z=-r;break;case 2:this.x=-r,this.y=R,this.z=Q;break;case 3:this.x=Q,this.y=R,this.z=r;break;case 4:this.x=R,this.y=r,this.z=Q;break;case 5:this.x=r,this.y=Q,this.z=R;break;default:throw new Error(`Invalid EulerAngles order: ${e.order}`)}}toEulerAngles(e){const g=new b;switch(e){case 0:g.set(this.z,this.x,this.y);break;case 1:g.set(this.x,this.y,this.z);break;case 2:g.set(this.y,this.z,this.x);break;case 3:g.set(this.y,-this.x,this.z);break;case 4:g.set(this.x,-this.z,this.y);break;case 5:g.set(this.z,-this.y,this.x);break;default:throw new Error("Invalid rotation order:"+e)}const t=new b,I=g.x*g.y+g.z*this.w;if(I>.49999)t.y=2*Math.atan2(g.x,this.w),t.z=Math.PI*.5,t.x=0;else if(I<-.49999)t.y=-2*Math.atan2(g.x,this.w),t.z=Math.PI*-.5,t.x=0;else{const l=g.x*g.x,C=g.y*g.y,n=g.z*g.z;t.y=Math.atan2(2*g.y*this.w-2*g.x*g.z,1-2*C-2*n),t.z=Math.asin(2*I),t.x=Math.atan2(2*g.x*this.w-2*g.y*g.z,1-2*l-2*n)}switch(e){case 0:return new lt(t.y,t.z,t.x,e);case 1:return new lt(t.x,t.y,t.z,e);case 2:return new lt(t.z,t.x,t.y,e);case 3:return new lt(-t.y,t.x,t.z,e);case 4:return new lt(t.x,t.z,-t.y,e);case 5:return new lt(t.z,-t.y,t.x,e)}}setFromAxisAndAngle(e,g){const t=g/2,I=e.normalize().scale(Math.sin(t));this.set(I.x,I.y,I.z,Math.cos(t))}setFromDirectionAndUpvector(e,g){const t=new ng;t.setFromDirectionAndUpvector(e,g),this.setFromMat3(t)}setFrom2Vectors(e,g){const t=e.cross(g),I=e.dot(g),l=Math.sqrt((1+I)*2);this.set(t.x/l,t.y/l,t.z/l,l/2),this.normalizeInPlace()}setFromMat3(e){const g=e.asArray(),t=g[0]+g[4]+g[8];let I;if(t>0)I=Math.sqrt(t+1),this.__data[3]=.5*I,I=.5/I,this.__data[0]=(g[5]-g[7])*I,this.__data[1]=(g[6]-g[2])*I,this.__data[2]=(g[1]-g[3])*I;else{let l=0;g[4]>g[0]&&(l=1),g[8]>g[l*3+l]&&(l=2);const C=(l+1)%3,n=(l+2)%3;I=Math.sqrt(g[l*3+l]-g[C*3+C]-g[n*3+n]+1),this.__data[l]=.5*I,I=.5/I,this.__data[3]=(g[C*3+n]-g[n*3+C])*I,this.__data[C]=(g[C*3+l]+g[l*3+C])*I,this.__data[n]=(g[n*3+l]+g[l*3+n])*I}this.normalizeInPlace()}setFromMat4(e){const g=e.asArray(),t=g[0]+g[5]+g[10];let I;if(t>0)I=Math.sqrt(t+1),this.__data[3]=.5*I,I=.5/I,this.__data[0]=(g[6]-g[9])*I,this.__data[1]=(g[8]-g[2])*I,this.__data[2]=(g[1]-g[4])*I;else{let l=0;g[5]>g[0]&&(l=1),g[10]>g[l*4+l]&&(l=2);const C=(l+1)%3,n=(l+2)%3;I=Math.sqrt(g[l*4+l]-g[C*4+C]-g[n*4+n]+1),this.__data[l]=.5*I,I=.5/I,this.__data[3]=(g[C*4+n]-g[n*4+C])*I,this.__data[C]=(g[C*4+l]+g[l*4+C])*I,this.__data[n]=(g[n*4+l]+g[l*4+n])*I}this.normalizeInPlace()}isIdentity(){return this.getAngle()<Number.EPSILON}getAngle(){return Math.acos(this.w)*2}isEqual(e){return this.x==e.x&&this.y==e.y&&this.z==e.z&&this.w==e.w}notEquals(e){return this.x!=e.x&&this.y!=e.y&&this.z!=e.z&&this.w!=e.w}approxEqual(e,g=Number.EPSILON){return Math.abs(this.x-e.x)<g&&Math.abs(this.y-e.y)<g&&Math.abs(this.z-e.z)<g&&Math.abs(this.w-e.w)<g}add(e){return new de(this.x+e.x,this.y+e.y,this.z+e.z,this.w+e.w)}addInPlace(e){this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w}subtract(e){return new de(this.x-e.x,this.y-e.y,this.z-e.z,this.w-e.w)}scale(e){return new de(this.x*e,this.y*e,this.z*e,this.w*e)}scaleInPlace(e){this.x*=e,this.y*=e,this.z*=e,this.w*=e}length(){const e=this.__data[0],g=this.__data[1],t=this.__data[2],I=this.__data[3];return Math.sqrt(e*e+g*g+t*t+I*I)}lengthSquared(){const e=this.__data[0],g=this.__data[1],t=this.__data[2],I=this.__data[3];return e*e+g*g+t*t+I*I}normalize(){const e=this.__data[0],g=this.__data[1],t=this.__data[2],I=this.__data[3];let l=e*e+g*g+t*t+I*I;return l<Number.EPSILON?new de:(l=1/Math.sqrt(l),new de(e*l,g*l,t*l,I*l))}normalizeInPlace(){const e=this.__data[0],g=this.__data[1],t=this.__data[2],I=this.__data[3];let l=e*e+g*g+t*t+I*I;l<Number.EPSILON||(l=1/Math.sqrt(l),this.set(e*l,g*l,t*l,I*l))}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}cross(e){const g=this.x,t=this.y,I=this.z,l=this.w,C=e.x,n=e.y,F=e.z,a=e.w;return new de(t*F-I*n,I*a-l*F,l*C-g*a,g*n-t*C)}conjugate(){return new de(-this.x,-this.y,-this.z,this.w)}inverse(){return this.conjugate()}alignWith(e){this.dot(e)<0&&this.set(-this.x,-this.y,-this.z,-this.w)}multiply(e){const g=this.__data[0],t=this.__data[1],I=this.__data[2],l=this.__data[3],C=e.__data[0],n=e.__data[1],F=e.__data[2],a=e.__data[3];return new de(g*a+l*C+t*F-I*n,t*a+l*n+I*C-g*F,I*a+l*F+g*n-t*C,l*a-g*C-t*n-I*F)}multiplyInPlace(e){const g=this.__data[0],t=this.__data[1],I=this.__data[2],l=this.__data[3],C=e.__data[0],n=e.__data[1],F=e.__data[2],a=e.__data[3];this.set(g*a+l*C+t*F-I*n,t*a+l*n+I*C-g*F,I*a+l*F+g*n-t*C,l*a-g*C-t*n-I*F)}rotateVec3(e){const g=new de(e.x,e.y,e.z,0),t=this.multiply(g).multiply(this.conjugate());return new b(t.x,t.y,t.z)}rotateX(e){e*=.5;const g=this.x,t=this.y,I=this.z,l=this.w,C=Math.sin(e),n=Math.cos(e);this.x=g*n+l*C,this.y=t*n+I*C,this.z=I*n-t*C,this.w=l*n-g*C}rotateY(e){e*=.5;const g=this.x,t=this.y,I=this.z,l=this.w,C=Math.sin(e),n=Math.cos(e);this.x=g*n-I*C,this.y=t*n+l*C,this.z=I*n+g*C,this.w=l*n-t*C}rotateZ(e){e*=.5;const g=this.x,t=this.y,I=this.z,l=this.w,C=Math.sin(e),n=Math.cos(e);this.x=g*n+t*C,this.y=t*n-g*C,this.z=I*n+l*C,this.w=l*n-I*C}toMat3(){const e=this.x,g=this.y,t=this.z,I=this.w,l=e+e,C=g+g,n=t+t,F=e*l,a=g*l,U=g*C,d=t*l,s=t*C,o=t*n,A=I*l,B=I*C,Q=I*n,r=new ng;return r.m00=1-U-o,r.m10=a-Q,r.m20=d+B,r.m01=a+Q,r.m11=1-F-o,r.m21=s-A,r.m02=d-B,r.m12=s+A,r.m22=1-F-U,r}getXaxis(){const e=this.x*this.y,g=this.x*this.z,t=this.y*this.y,I=this.y*this.w,l=this.z*this.z,C=this.z*this.w;return new b(1-2*(l+t),2*(e+C),2*(g-I))}getYaxis(){const e=this.x*this.x,g=this.x*this.y,t=this.x*this.w,I=this.y*this.z,l=this.z*this.z,C=this.z*this.w;return new b(2*(g-C),1-2*(l+e),2*(I+t))}getZaxis(){const e=this.x*this.x,g=this.x*this.z,t=this.x*this.w,I=this.y*this.y,l=this.y*this.z,C=this.y*this.w;return new b(2*(C+g),2*(l-t),1-2*(I+e))}mirror(e){switch(e){case 0:return new de(this.z,this.w,this.x,this.y);case 1:return new de(-this.w,this.z,this.y,-this.x);case 2:return new de(this.x,this.y,this.z,-this.w);case 0:default:return new de(this.z,this.w,this.x,this.y)}}toMat4(){const e=this.x,g=this.y,t=this.z,I=this.w,l=e+e,C=g+g,n=t+t,F=e*l,a=g*l,U=g*C,d=t*l,s=t*C,o=t*n,A=I*l,B=I*C,Q=I*n,r=new Ee;return r.m00=1-U-o,r.m10=a-Q,r.m20=d+B,r.m01=a+Q,r.m11=1-F-o,r.m21=s-A,r.m02=d-B,r.m12=s+A,r.m22=1-F-U,r}lerp(e,g){const t=new de(this.x+g*(e.x-this.x),this.y+g*(e.y-this.y),this.z+g*(e.z-this.z),this.w+g*(e.w-this.w));return t.normalizeInPlace(),t}slerp(e,g){const t=this.dot(e);if(t>.999)return this;const I=Math.acos(t),l=Math.sin(I),C=Math.sin(g*I),F=Math.sin((1-g)*I)/l,a=C/l,U=new de(F*this.x+a*e.x,F*this.y+a*e.y,F*this.z+a*e.z,F*this.w+a*e.w);return U.normalizeInPlace(),U}clone(){return new de(this.__data[0],this.__data[1],this.__data[2],this.__data[3])}asArray(){return this.__data}toString(){return tg.stringifyJSONWithFixedPrecision(this.toJSON())}toJSON(){return{x:this.x,y:this.y,z:this.z,w:this.w}}fromJSON(e){this.__data[0]=e.x,this.__data[1]=e.y,this.__data[2]=e.z,this.__data[3]=e.w,this.normalizeInPlace()}readBinary(e){this.x=e.loadFloat32(),this.y=e.loadFloat32(),this.z=e.loadFloat32(),this.w=e.loadFloat32()}}class q{static radToDeg(e){return e/(Math.PI/180)}static degToRad(e){return e*(Math.PI/180)}static isNumeric(e){return!isNaN(parseFloat(e))&&isFinite(e)}static randomInt(e,g){return e=Math.ceil(e),g=Math.floor(g),Math.floor(Math.random()*(g-e))+e}static lerp(e,g,t){return e+t*(g-e)}static clamp(e,g,t){return Math.min(Math.max(e,g),t)}static nearestPow2(e){return Math.pow(2,Math.round(Math.log(e)/Math.log(2)))}static nearestPow10(e){return Math.pow(10,Math.round(Math.log10(e)/Math.log10(10)))}static nextPow2(e){if(this.fract(Math.log2(e))==0)return e;let g=0;for(;e>0;)g++,e=e>>1;return 1<<g}static fract(e){return e==0?0:e<0?e>-1?-e:-e%Math.floor(-e):e<1?e:e%Math.floor(e)}static remap(e,g,t,I,l){return I+(l-I)*((e-g)/(t-g))}static smoothStep(e,g,t){const I=this.clamp((t-e)/(g-e),0,1);return I*I*(3-2*I)}static linStep(e,g,t){return this.clamp((t-e)/(g-e),0,1)}static decode16BitFloatFrom2xUInt8(e){const g=e[0],t=e[1],I=g&128?1:-1,l=(g&120)>>3,C=g&7;let n=l==0?0:2048;const F=n+(C<<8)+t;n=l==0?1:0;const a=Math.pow(2,l+n-16);return I*F*a}static encode16BitFloatInto2xUInt8(e){const g=new Uint8Array(2),t=e>=0?128:0;e=Math.abs(e);let I=15,l=1024;for(let U=15;U>0;U--)e<l&&(l/=2,I--);let C;I==0?C=e/l/2:C=(e-l)/l;const n=Math.round(C*2048),F=n/256,a=n-F*256;return g[0]=t+I*8+F,g[1]=a,e>=2048&&(g[0]=255),g}static encode16BitFloat(e){const g=new Float32Array(1);g[0]=e;const t=new Int32Array(g.buffer);return(l=>{let C=l>>16&32768,n=l>>12&2047;const F=l>>23&255;return F<103?C:F>142?(C|=31744,C|=(F==255?0:1)&&l&8388607,C):F<113?(n|=2048,C|=(n>>114-F)+(n>>113-F&1),C):(C|=F-112<<10|n>>1,C+=n&1,C)})(t[0])}static decode16BitFloat(e){const g=(e&32768)>>15,t=(e&31744)>>10,I=e&1023;return t==0?(g?-1:1)*Math.pow(2,-14)*(I/Math.pow(2,10)):t==31?I?NaN:(g?-1:1)*(1/0):(g?-1:1)*Math.pow(2,t-15)*(1+I/Math.pow(2,10))}static convertFloat32ArrayToUInt16Array(e){const g=new Uint16Array(e.length),t=new Int32Array(e.buffer),I=l=>{let C=l>>16&32768,n=l>>12&2047;const F=l>>23&255;return F<103?C:F>142?(C|=31744,C|=(F==255?0:1)&&l&8388607,C):F<113?(n|=2048,C|=(n>>114-F)+(n>>113-F&1),C):(C|=F-112<<10|n>>1,C+=n&1,C)};for(let l=0;l<e.length;l++)g[l]=I(t[l]);return g}}class Ag{constructor(e,g){e instanceof b?this.start=e:this.start=new b,g instanceof b?this.dir=g:this.dir=new b}closestPoint(e){const t=e.subtract(this.start).dot(this.dir);if(t<Number.EPSILON)return 0;const I=this.dir.dot(this.dir);return I<Number.EPSILON?0:t/I}closestPointOnLineSegment(e,g){const t=this.dir,I=g.subtract(e),l=I.length();I.normalizeInPlace();const C=this.start.subtract(e),n=t.dot(t),F=t.dot(I),a=I.dot(I),U=t.dot(C),d=I.dot(C);if(n==0&&a==0)return[this.start.distanceTo(e),0];if(n==0)return[0,0];if(a==0)return[this.closestPoint(e),0];const s=n*a-F*F;let o,A;return s<.001?(o=0,F>a?A=U/F:A=d/a):(o=(F*d-a*U)/s,A=(n*d-F*U)/s),[o,q.clamp(A/l,0,1)]}pointAtDist(e){return this.start.add(this.dir.scale(e))}intersectRayVector(e){const g=this.dir,t=e.dir,I=this.start.subtract(e.start),l=g.dot(g),C=g.dot(t),n=t.dot(t),F=g.dot(I),a=t.dot(I);if(l==0&&n==0)return this.start.distanceTo(e.start);if(l==0)return e.closestPoint(this.start);if(n==0)return this.closestPoint(e.start);const U=l*n-C*C;let d,s;return U<.001?(d=0,C>n?s=F/C:s=a/n):(d=(C*a-n*F)/U,s=(l*a-C*F)/U),[d,s]}intersectRayPlane(e){const g=this.start.subtract(e.start),t=e.dir.dot(this.dir),I=-e.dir.dot(g);if(Math.abs(t)<Number.PRECISION)return I==0,-1;const l=I/t;return l<-Number.PRECISION?-1:l}intersectRayBox3(e,g=0){const t=new b(1/this.dir.x,1/this.dir.y,1/this.dir.z),I=[];I[0]=t.x<0?1:0,I[1]=t.y<0?1:0,I[2]=t.z<0?1:0;const l=[];if(g>0){const s=e.diagonal();s.normalizeInPlace(),s.scaleInPlace(g),l[0]=e.p0.subtract(s),l[1]=e.p1.add(s)}else l[0]=e.p0,l[1]=e.p1;let C=(l[I[0]].x-this.start.x)*t.x,n=(l[1-I[0]].x-this.start.x)*t.x;const F=(l[I[1]].y-this.start.y)*t.y,a=(l[1-I[1]].y-this.start.y)*t.y;if(C>a||F>n)return!1;F>C&&(C=F),a<n&&(n=a);const U=(l[I[2]].z-this.start.z)*t.z,d=(l[1-I[2]].z-this.start.z)*t.z;return C>d||U>n?!1:(U>C&&(C=U),d<n&&(n=d),!0)}clone(){return new Ag(this.start.clone(),this.dir.clone())}toJSON(){return{start:this.start.toJSON(),dir:this.dir.toJSON()}}fromJSON(e){this.start.fromJSON(e.start),this.dir.fromJSON(e.dir)}toString(){return tg.stringifyJSONWithFixedPrecision(this.toJSON())}}class v{constructor(e,g,t){if(e instanceof Float32Array){this.setFromFloat32Array(e);return}if(e instanceof b)this.tr=e;else if(e instanceof de&&g==null&&t==null){this.tr=new b,this.ori=e,this.sc=new b(1,1,1);return}else this.tr=new b;g instanceof de?this.ori=g:this.ori=new de,t instanceof b?this.sc=t:this.sc=new b(1,1,1)}set(e,g,t){this.tr=e,this.ori=g,t instanceof b&&(this.sc=t)}setFromOther(e){this.tr=e.tr,this.ori=e.ori,this.sc=e.sc}isIdentity(){return this.tr.isNull()&&this.ori.isIdentity()&&this.sc.is111()}isEqual(e){return this.tr.isEqual(e.tr)&&this.ori.isEqual(e.ori)&&this.sc.isEqual(e.sc)}approxEqual(e,g=Number.EPSILON){return(e.tr?this.tr.approxEqual(e.tr,g):!0)&&(e.ori?this.ori.approxEqual(e.ori,g):!0)&&(e.sc?this.sc.approxEqual(e.sc,g):!0)}setLookAt(e,g,t){const I=e.subtract(g);if(I.length()<Number.EPSILON)throw new Error("Invalid dir");this.ori.setFromDirectionAndUpvector(I,t),this.tr=e}multiply(e){let g=this.sc;if(Math.abs(this.sc.y-this.sc.x)>.001||Math.abs(this.sc.z-this.sc.x)>.001||Math.abs(this.sc.z-this.sc.y)>.001){const I=this.ori.toMat4(),C=new Ee(this.sc.x,0,0,0,0,this.sc.y,0,0,0,0,this.sc.z,0,0,0,0,1).multiply(I);g=new b(C.xAxis.length(),C.yAxis.length(),C.zAxis.length())}return new v(this.tr.add(this.ori.rotateVec3(this.sc.multiply(e.tr))),this.ori.multiply(e.ori),g.multiply(e.sc))}inverse(){const e=new v;if(e.ori=this.ori.inverse(),Math.abs(this.sc.y-this.sc.x)>.001||Math.abs(this.sc.z-this.sc.x)>.001||Math.abs(this.sc.z-this.sc.y)>.001){const g=e.ori.toMat4(),I=new Ee(this.sc.x,0,0,0,0,this.sc.y,0,0,0,0,this.sc.z,0,0,0,0,1).multiply(g);e.sc=new b(1/I.xAxis.length(),1/I.yAxis.length(),1/I.zAxis.length())}else e.sc=this.sc.inverse();return e.tr=e.ori.rotateVec3(this.tr.negate().multiply(e.sc)),e}transformVec3(e){return this.tr.add(this.ori.rotateVec3(this.sc.multiply(e)))}toMat4(){const e=new Ee(this.sc.x,0,0,0,0,this.sc.y,0,0,0,0,this.sc.z,0,0,0,0,1),g=this.ori.toMat4(),t=new Ee;return t.translation=this.tr,t.multiply(g).multiply(e)}setFromMat4(e){this.tr=e.translation,this.ori.setFromMat4(e)}setFromFloat32Array(e){if(e.length==7){this.tr=new b(new Float32Array(e.buffer,e.byteOffset,3)),this.ori=new de(new Float32Array(e.buffer,e.byteOffset+12,4)),this.sc=new b(1,1,1);return}else if(e.length==8){this.tr=new b(new Float32Array(e.buffer,e.byteOffset,3)),this.ori=new de(new Float32Array(e.buffer,e.byteOffset+12,4));const g=e[7];this.sc=new b(g,g,g);return}else if(e.length==10){this.tr=new b(new Float32Array(e.buffer,e.byteOffset,3)),this.ori=new de(new Float32Array(e.buffer,e.byteOffset+12,4)),this.sc=new b(new Float32Array(e.buffer,e.byteOffset+21,3));return}else console.warn("unitialized: float32array.length == ",e.length)}clone(){return new v(this.tr.clone(),this.ori.clone(),this.sc.clone())}toJSON(){return{tr:this.tr.toJSON(),ori:this.ori.toJSON(),sc:this.sc.toJSON()}}fromJSON(e){this.tr.fromJSON(e.tr),this.ori.fromJSON(e.ori),e.sc&&this.sc.fromJSON(e.sc)}readBinary(e){this.tr.readBinary(e),this.ori.readBinary(e),this.sc.readBinary(e)}toString(){return tg.stringifyJSONWithFixedPrecision(this.toJSON())}}class Yt{constructor(e,g){e instanceof f?this.p0=e:this.p0=new f(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),g instanceof f?this.p1=g:this.p1=new f(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY)}set(e,g){this.p0=e,this.p1=g}reset(){this.p0.x=Number.POSITIVE_INFINITY,this.p1.x=Number.NEGATIVE_INFINITY,this.p0.y=Number.POSITIVE_INFINITY,this.p1.y=Number.NEGATIVE_INFINITY}isValid(){return this.p0.x!=Number.POSITIVE_INFINITY&&this.p1.x!=Number.NEGATIVE_INFINITY&&this.p0.y!=Number.POSITIVE_INFINITY&&this.p1.y!=Number.NEGATIVE_INFINITY}addPoint(e){(this.p0.x==Number.POSITIVE_INFINITY||e.x<this.p0.x)&&(this.p0.x=e.x),(this.p0.y==Number.POSITIVE_INFINITY||e.y<this.p0.y)&&(this.p0.y=e.y),(this.p1.y==Number.NEGATIVE_INFINITY||e.x>this.p1.x)&&(this.p1.x=e.x),(this.p1.y==Number.NEGATIVE_INFINITY||e.y>this.p1.y)&&(this.p1.y=e.y)}size(){return this.p1.distanceTo(this.p0)}diagonal(){return this.p1.subtract(this.p0)}center(){const e=this.p1.subtract(this.p0);return e.scaleInPlace(.5),e.addInPlace(this.p0),e}clone(){return new Yt(this.p0.clone(),this.p1.clone())}toJSON(){return{p0:this.p0.toJSON(),p1:this.p1.toJSON()}}toString(){return tg.stringifyJSONWithFixedPrecision(this.toJSON())}}class KC{constructor(e=new b,g=0){e instanceof b?this.pos=e:this.pos=new b,this.radius=g}clone(){return new KC(this.pos.clone(),this.radius)}intersectsBox(e){return e.intersectsSphere(this)}toJSON(){return{pos:this.pos.toJSON(),radius:this.radius}}toString(){return tg.stringifyJSONWithFixedPrecision(this.toJSON())}}class gg{constructor(e,g){e instanceof Float32Array?(this.p0=new b(new Float32Array(e.buffer,e.byteOffset,3)),this.p1=new b(new Float32Array(e.buffer,e.byteOffset+12,3))):(e instanceof b?this.p0=e:this.p0=new b(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),g instanceof b?this.p1=g:this.p1=new b(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY))}get min(){return this.p0}get max(){return this.p1}set(e,g){this.p0=e,this.p1=g}reset(){this.p0.x=Number.POSITIVE_INFINITY,this.p0.y=Number.POSITIVE_INFINITY,this.p0.z=Number.POSITIVE_INFINITY,this.p1.x=Number.NEGATIVE_INFINITY,this.p1.y=Number.NEGATIVE_INFINITY,this.p1.z=Number.NEGATIVE_INFINITY}isValid(){return this.p0.x!=Number.POSITIVE_INFINITY&&this.p1.x!=Number.NEGATIVE_INFINITY&&this.p0.y!=Number.POSITIVE_INFINITY&&this.p1.y!=Number.NEGATIVE_INFINITY&&this.p0.z!=Number.POSITIVE_INFINITY&&this.p1.z!=Number.NEGATIVE_INFINITY}addPoint(e){e.x!=Number.POSITIVE_INFINITY&&e.x!=Number.NEGATIVE_INFINITY&&(e.x<this.p0.x&&(this.p0.x=e.x),e.x>this.p1.x&&(this.p1.x=e.x)),e.y!=Number.POSITIVE_INFINITY&&e.y!=Number.NEGATIVE_INFINITY&&(e.y<this.p0.y&&(this.p0.y=e.y),e.y>this.p1.y&&(this.p1.y=e.y)),e.z!=Number.POSITIVE_INFINITY&&e.z!=Number.NEGATIVE_INFINITY&&(e.z<this.p0.z&&(this.p0.z=e.z),e.z>this.p1.z&&(this.p1.z=e.z))}addBox3(e,g){g?(this.addPoint(g.transformVec3(e.p0)),this.addPoint(g.transformVec3(new b(e.p0.x,e.p0.y,e.p1.z))),this.addPoint(g.transformVec3(new b(e.p0.x,e.p1.y,e.p0.z))),this.addPoint(g.transformVec3(new b(e.p1.x,e.p0.y,e.p0.z))),this.addPoint(g.transformVec3(new b(e.p0.x,e.p1.y,e.p1.z))),this.addPoint(g.transformVec3(new b(e.p1.x,e.p0.y,e.p1.z))),this.addPoint(g.transformVec3(new b(e.p1.x,e.p1.y,e.p0.z))),this.addPoint(g.transformVec3(e.p1))):(this.addPoint(e.p0),this.addPoint(e.p1))}size(){return this.p1.distanceTo(this.p0)}diagonal(){return this.p1.subtract(this.p0)}center(){const e=this.p1.subtract(this.p0);return e.scaleInPlace(.5),e.addInPlace(this.p0),e}toMat4(){const e=this.p1.x-this.p0.x,g=this.p1.y-this.p0.y,t=this.p1.z-this.p0.z;return new Ee(e,0,0,0,0,g,0,0,0,0,t,0,this.p0.x,this.p0.y,this.p0.z,1)}getBoundingSphere(){return new KC(this.center(),this.diagonal().length()*.5)}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return new b().distanceTo(e.pos)<=e.radius*e.radius}intersectsPlane(e){let g,t;return e.normal.x>0?(g=e.normal.x*this.min.x,t=e.normal.x*this.max.x):(g=e.normal.x*this.max.x,t=e.normal.x*this.min.x),e.normal.y>0?(g+=e.normal.y*this.min.y,t+=e.normal.y*this.max.y):(g+=e.normal.y*this.max.y,t+=e.normal.y*this.min.y),e.normal.z>0?(g+=e.normal.z*this.min.z,t+=e.normal.z*this.max.z):(g+=e.normal.z*this.max.z,t+=e.normal.z*this.min.z),g<=-e.w&&t>=-e.w}clone(){return new gg(this.p0.clone(),this.p1.clone())}toJSON(){return{p0:this.p0.toJSON(),p1:this.p1.toJSON()}}fromJSON(e){const g={x:q.isNumeric(e.p0.x)?e.p0.x:Number.POSITIVE_INFINITY,y:q.isNumeric(e.p0.y)?e.p0.y:Number.POSITIVE_INFINITY,z:q.isNumeric(e.p0.z)?e.p0.z:Number.POSITIVE_INFINITY},t={x:q.isNumeric(e.p1.x)?e.p1.x:Number.NEGATIVE_INFINITY,y:q.isNumeric(e.p1.y)?e.p1.y:Number.NEGATIVE_INFINITY,z:q.isNumeric(e.p1.z)?e.p1.z:Number.NEGATIVE_INFINITY};this.p0.fromJSON(g),this.p1.fromJSON(t)}setFromFloat32Array(e){this.p0=new b(e.buffer,e.byteOffset),this.p1=new b(e.buffer,e.byteOffset+12)}toString(){return tg.stringifyJSONWithFixedPrecision(this.toJSON())}}let eU=0;class LC{constructor(){this.__id=++eU}getId(){return this.__id}getClassName(){return S.getClassName(Object.getPrototypeOf(this).constructor)}}class Ke{constructor(){}}class Xe extends LC{constructor(){super();this.listeners={}}on(e,g){if(!g)throw new Error("Missing listener.");this.listeners[e]||(this.listeners[e]=[]);const t=this.listeners[e];if(t.includes(g))throw new Error(`Listener "${g.name}" already connected to event "${e}".`);const I=t.length;return t[I]=g,I}once(e,g){const t=I=>{g(I),this.off(e,t)};return this.on(e,t)}off(e,g){if(!g)throw new Error("Missing callback function (listener).");if(typeof g=="number"){console.warn("Deprecated. Un-register using the original listener instead."),this.removeListenerById(e,g);return}const t=this.listeners[e]||[],I=[];if(t.forEach((l,C)=>{l===g&&I.push(C)}),I.length==0)throw new Error(`Listener "${g.name}" is not connected to "${e}" event`);for(const l of I)t[l]=null}removeListenerById(e,g){const t=this.listeners[e];if(!t){console.warn("callback :"+g+" was not connected to this event:"+e);return}if(!t[g])throw new Error("Invalid ID");t[g]=null}emit(e,g=new Ke){(this.listeners[e]||[]).forEach(I=>{I&&I(g)})}}class Hg extends Ke{constructor(e,g){super();this.width=e,this.height=g}}class gU extends Xe{constructor(e=0,g=0){super();this.root={x:0,y:0,w:e,h:g}}fit(e){if(e.length==0)return;let t=!1;if(this.root.w<e[0].w&&(this.root.w=e[0].w,t=!0),this.root.h<e[0].h&&(this.root.h=e[0].h,t=!0),t){const l=new Hg(this.root.w,this.root.h);this.emit("resized",l)}const I=l=>{l.fit=this.__addBlock(l)};e.forEach(I)}__addBlock(e){const g=this.findNode(this.root,e.w,e.h);return g?this.splitNode(g,e.w,e.h):this.growNode(e.w,e.h)}addBlock(e){let g=!1;if(this.root.w<e.w&&(this.root.w=e.w,g=!0),this.root.h<e.h&&(this.root.h=e.h,g=!0),g){const I=new Hg(this.root.w,this.root.h);this.emit("resized",I)}const t=this.findNode(this.root,e.w,e.h);return t?this.splitNode(t,e.w,e.h):this.growNode(e.w,e.h)}findNode(e,g,t){return e.used?this.findNode(e.right,g,t)||this.findNode(e.down,g,t):g<=e.w&&t<=e.h?e:null}splitNode(e,g,t){return e.used=!0,e.down={x:e.x,y:e.y+t,w:e.w,h:e.h-t},e.right={x:e.x+g,y:e.y,w:e.w-g,h:t},e}growNode(e,g){const t=e<=this.root.w,I=g<=this.root.h,l=I&&this.root.h>=this.root.w+e,C=t&&this.root.w>=this.root.h+g;return l?this.growRight(e,g):C?this.growDown(e,g):I?this.growRight(e,g):t?this.growDown(e,g):null}growRight(e,g){this.root={used:!0,x:0,y:0,w:this.root.w+e,h:this.root.h,down:this.root,right:{x:this.root.w,y:0,w:e,h:this.root.h}};const t=this.findNode(this.root,e,g);let I;t&&(I=this.splitNode(t,e,g));const l=new Hg(this.root.w,this.root.h);return this.emit("resized",l),I}growDown(e,g){this.root={used:!0,x:0,y:0,w:this.root.w,h:this.root.h+g,down:{x:0,y:this.root.h,w:this.root.w,h:g},right:this.root};const t=this.findNode(this.root,e,g);let I;t&&(I=this.splitNode(t,e,g));const l=new Hg(this.root.w,this.root.h);return this.emit("resized",l),I}}class UC{constructor(e=0,g=0){this.start=e,this.size=g}}class vt extends Xe{constructor(){super();this.freeList=[],this.allocations=[],this.allocationsMap={},this.allocatedSpace=0,this.reservedSpace=0,this.freeSpace=0}getAllocation(e){return this.allocations[this.allocationsMap[e]]}allocate(e,g){if(this.allocationsMap[e]!=null){const I=this.allocationsMap[e],l=this.allocations[I];if(g==l.size)return l;if(g<l.size){const C=l.size-g;return this.addBlock(I+1,new UC(l.start+g,C)),this.freeBlock(I+1),l.size=g,l}else{const C=I+1;if(this.freeList.includes(C)&&l.size+this.allocations[C].size>=g){const n=this.allocations[C];if(l.size+n.size==g)return l.size+=n.size,this.freeSpace-=n.size,this.freeList.splice(this.freeList.indexOf(C),1),this.removeBlock(C),l;{const F=g-l.size;return l.size+=F,this.freeSpace-=F,n.start+=F,n.size-=F,l}}else delete this.allocationsMap[e],l.start+l.size==this.allocatedSpace?(this.removeBlock(I),this.allocatedSpace-=l.size):this.freeBlock(I)}}let t=-1;for(let I=0;I<this.freeList.length;I++){const l=this.freeList[I],C=this.allocations[l];if(C.size==g){t=l;break}else C.size>g&&(t=l)}if(t!=-1){const I=this.allocations[t];if(this.freeSpace-=I.size,this.freeList.splice(this.freeList.indexOf(t),1),I.size>g){const l=I.size-g;this.addBlock(t+1,new UC(I.start+g,l)),this.freeBlock(t+1),this.freeList.sort((C,n)=>this.allocations[n].size-this.allocations[C].size),this.allocations[t].size=g}this.allocationsMap[e]=t}else{const I=this.allocatedSpace,l=this.allocations.length;this.allocatedSpace+=g;const C=q.nextPow2(this.allocatedSpace);C!=this.reservedSpace&&(this.reservedSpace=C,this.emit("resized",{reservedSpace:this.reservedSpace})),this.allocations.push(new UC(I,g)),this.allocationsMap[e]=l}return this.allocations[this.allocationsMap[e]]}addBlock(e,g){this.allocations.splice(e,0,g);for(const t in this.allocationsMap)this.allocationsMap[t]>=e&&this.allocationsMap[t]++;for(let t=0;t<this.freeList.length;t++)this.freeList[t]>=e&&this.freeList[t]++}removeBlock(e){this.allocations.splice(e,1);for(const g in this.allocationsMap)this.allocationsMap[g]>e&&this.allocationsMap[g]--;for(let g=0;g<this.freeList.length;g++)this.freeList[g]>e&&this.freeList[g]--}freeBlock(e){const g=this.allocations[e];this.freeSpace+=g.size;const t=e-1;if(this.freeList.includes(t)){const l=this.allocations[t];l.size+=g.size,this.removeBlock(e);return}const I=e+1;if(this.freeList.includes(I)){const l=this.allocations[I];l.start-=g.size,l.size+=g.size,this.removeBlock(e);return}this.freeList.push(e)}deallocate(e){const g=this.allocationsMap[e];if(g==null)throw new Error(`allocation ${e} does not exist.`);this.freeBlock(g),delete this.allocationsMap[e]}getFragmentation(){return this.freeSpace/this.allocatedSpace}defragment(){}verifyConsistency(){if(Object.keys(this.allocationsMap).length+this.freeList.length!=this.allocations.length)throw new Error("number of blocks does not match the number of allocations");for(const g in this.allocationsMap){const t=this.allocationsMap[g];if(this.freeList.includes(t))throw new Error("block of used memory is also on the free list")}let e=0;for(let g=0;g<this.allocations.length;g++){const t=this.allocations[g];if(t.start!=e)throw"blocks of memory are not sequential";e+=t.size}if(e!=this.allocatedSpace)throw`allocated size: ${this.allocatedSpace}  does not match allocated blocks: ${e}`;if(this.reservedSpace<this.allocatedSpace)throw`reserved space: ${this.reservedSpace} is less than allocated space: ${this.allocatedSpace}`}}class tU{constructor(e,g,t,I,l){this.screenPos=e,this.pointerRay=g,this.intersectionPos=t,this.geomData=I,this.geomItem=l.geomItem,this.componentId=l.componentId,this.dist=l.dist}}class IU extends Ke{constructor(e){super();this.controller=e}}class It extends Ke{constructor(e,g){super();this.change=e,this.count=g}}class lU extends Ke{constructor(e){super();this.envMap=e}}class ji extends Ke{constructor(e){super();this.index=e}}class Ba extends Ke{constructor(){super();this.propagating=!0}}class qi extends Ba{constructor(e){super();this.propagating=!0,this.sourceEvent=e,this.altKey=e.altKey,this.code=e.code,this.ctrlKey=e.ctrlKey,this.isComposing=e.isComposing,this.key=e.key,this.location=e.location,this.metaKey=e.metaKey,this.repeat=e.repeat,this.shiftKey=e.shiftKey,this.which=e.which}stopPropagation(){this.propagating=!1,this.sourceEvent&&this.sourceEvent.stopPropagation()}preventDefault(){this.sourceEvent&&this.sourceEvent.preventDefault()}}class CU extends Ke{constructor(e){super();this.name=e}}class iU extends Ke{constructor(e){super();this.name=e}}class nU extends Ke{constructor(e){super();this.range=e}}class aU extends Ke{constructor(e){super();this.scene=e}}class FU extends Ke{constructor(e){super();this.value=e}}class UU extends Ke{constructor(e){super();this.selected=e}}class dU extends Ke{constructor(e){super();this.shaderName=e}}class YC extends Ke{constructor(e){super();this.state=e}}class $i extends Ke{constructor(e,g){super();this.geomFileID=e,this.geomCount=g}}class sU extends Ke{constructor(e,g){super();this.isTextured=e,this.param=g}}class Qa extends Ke{constructor(e,g){super();this.isOpaque=e,this.isOpaqueStateChanged=g}}class zC extends Ke{constructor(e,g){super();this.interfaceType=e,this.viewXfo=g}}class vC extends Ke{constructor(e){super();this.visible=e}}class oU extends zC{constructor(e){super("VR",e);this.hmd="",this.controllers=[]}}const ve={mouse:"mouse",touch:"touch",xr:"xr"};let dC=null;class yl extends Ba{constructor(e){super();this.pointerType=e}stopPropagation(){this.propagating=!1}setCapture(e){dC=e}getCapture(){return dC}releaseCapture(){dC=null}}class it extends yl{constructor(e,g,t,I){super(ve.xr);this.buttonPressed=0,this.viewport=e,this.controller=g,this.button=t,this.buttonPressed=I}stopPropagation(){this.propagating=!1}setCapture(e){this.controller.capturedItem=e}getCapture(){return this.controller.capturedItem}releaseCapture(){this.controller.capturedItem=null}}class AU extends yl{constructor(e,g,t){super(ve.xr);this.controllers=[],this.viewport=e,this.viewXfo=g,t.forEach(I=>{this.controllers.push(I)})}}class BU extends Ke{constructor(e){super();this.xrViewport=e}}class fg extends yl{constructor(e,g){super(ve.mouse);this.sourceEvent=e,this.button=e.button,this.clientX=e.clientX,this.clientY=e.clientY;const t=1;this.rendererX=(this.clientX-g.left)*t,this.rendererY=(this.clientY-g.top)*t,this.altKey=e.altKey,this.metaKey=e.metaKey,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey}stopPropagation(){super.stopPropagation(),this.sourceEvent&&this.sourceEvent.stopPropagation()}preventDefault(){this.sourceEvent&&this.sourceEvent.preventDefault()}}class sC{constructor(e,g){this.clientX=0,this.clientY=0,this.screenX=0,this.screenY=0,this.pageX=0,this.pageY=0,this.radiusX=0,this.radiusY=0,this.rotationAngle=0,this.force=0,this.altitudeAngle=0,this.azimuthAngle=0,this.touchType="direct",this.identifier=e.identifier,this.clientX=e.clientX,this.clientY=e.clientY,this.screenX=e.screenX,this.screenY=e.screenY,this.pageX=e.pageX,this.pageY=e.pageY,this.radiusX=e.radiusX,this.radiusY=e.radiusY,this.rotationAngle=e.rotationAngle,this.force=e.force;const t=1;this.rendererX=(this.clientX-g.left)*t,this.rendererY=(this.clientY-g.top)*t,this.touchPos=new f,this.touchRay=new Ag}}class nt extends yl{constructor(e,g){super(ve.touch);this.touches=[],this.changedTouches=[],this.targetTouches=[],this.altKey=!1,this.metaKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.sourceEvent=e,this.sourceEvent.stopPropagation(),this.altKey=e.altKey,this.metaKey=e.metaKey,this.ctrlKey=e.ctrlKey,this.shiftKey=e.shiftKey;for(let t=0;t<e.touches.length;t++)this.touches.push(new sC(e.touches[t],g));if(e.changedTouches)for(let t=0;t<e.changedTouches.length;t++)this.changedTouches.push(new sC(e.changedTouches[t],g));if(e.targetTouches)for(let t=0;t<e.targetTouches.length;t++)this.targetTouches.push(new sC(e.targetTouches[t],g))}stopPropagation(){super.stopPropagation(),this.sourceEvent&&this.sourceEvent.stopPropagation()}preventDefault(){}}class QU extends fg{constructor(e,g){super(e,g);this.wheelDelta=e.wheelDelta,this.deltaMode=e.deltaMode,this.deltaX=e.deltaX,this.deltaY=e.deltaY,this.deltaZ=e.deltaZ}}class VU extends Ke{constructor(e,g){super();this.index=e,this.childItem=g}}let rU=0;class Va extends Xe{constructor(){super();if(this.constructor.name=="RefCounted")throw new Error("RefCounted should not be instantiated directly.");this.__id=++rU,this.__refs=[],this.__destroyed=!1}getId(){return this.__id}numRefs(){return this.__refs.length}addRef(e){if(!e)throw new Error("Error in RefCounted.addRef: Must provide a referer");return this.__refs.push(e),!0}removeRef(e){if(!e)throw new Error("Error in RefCounted.removeRef: Must provide a referer");const g=this.__refs.indexOf(e);if(g==-1)throw new Error("Error in RefCounted.removeRef: referer not found in refs list.");this.__refs.splice(g,1),this.__refs.length==0&&this.destroy()}getRefer(e){return this.__refs[e]}getRefIndex(e){return this.__refs.indexOf(e)}isDestroyed(){return this.__destroyed}destroy(){this.__destroyed=!0,this.emit("destructing")}}class xt extends Xe{constructor(){super();this.paramEventListenerIDs={},this.paramMapping={},this.params=[],this.deprecatedParamMapping={}}getNumParameters(){return this.params.length}getParameters(){return this.params}getParameterIndex(e){return this.paramMapping[e]}getParameterByIndex(e){return this.params[e]}hasParameter(e){return e in this.paramMapping}addParameterDeprecationMapping(e,g){this.deprecatedParamMapping[e]=g}getParameter(e){let g=this.paramMapping[e];if(g==null){const t=this.deprecatedParamMapping[e];if(t)console.warn(`Parameter name ${e} is now deprecated. Please use ${t} instead.`),g=this.paramMapping[t];else return null}return this.params[g]}parameterValueChanged(e){this.emit("parameterValueChanged",e)}addParameter(e){return this.insertParameter(e,this.params.length)}insertParameter(e,g){const t=e.getName();this.paramMapping[t]!=null&&(console.warn("Replacing Parameter:"+t),this.removeParameter(t)),e.setOwner(this),this.paramEventListenerIDs[t]=e.on("valueChanged",l=>{const C={param:e};for(const n in l)C[n]=l[n];this.parameterValueChanged(C)}),this.params.splice(g,0,e);for(let l=g;l<this.params.length;l++)this.paramMapping[this.params[l].getName()]=l;const I=new CU(t);return this.emit("parameterAdded",I),e}removeParameter(e){if(this.paramMapping[e]==null)throw new Error("Unable to remove Parameter:"+e);const g=this.paramMapping[e];this.params[this.paramMapping[e]].removeListenerById("valueChanged",this.paramEventListenerIDs[e]),this.params.splice(g,1),delete this.paramMapping[e];for(let l=g;l<this.params.length;l++)this.paramMapping[this.params[l].getName()]=l;const I=new iU(e);this.emit("parameterRemoved",I)}replaceParameter(e){const g=e.getName();if(this.paramMapping[g]==null)throw new Error("Unable to replace Parameter:"+g);const t=this.paramMapping[g];return this.removeParameter(g),this.insertParameter(e,t),e}toJSON(e){const g={type:this.getClassName()},t={};let I=0;for(const l of this.params){const C=l.toJSON(e);C&&(t[l.getName()]=C,I++)}return I>0&&(g.params=t),g}fromJSON(e,g){if(e.params)for(const t in e.params){const I=e.params[t],l=this.getParameter(t);l?I.paramPath?g==null||g.resolvePath(I.paramPath,C=>{this.replaceParameter(C)},()=>{console.warn("Unable to resolve shared parameter:"+I.paramPath)}):l.fromJSON(I,g):console.warn("Param not found:"+t)}}readBinary(e,g){if((g==null?void 0:g.versions["zea-engine"].compare([0,0,3]))>=0){const t=e.loadUInt32();for(let I=0;I<t;I++){const l=e.loadStr(),C=e.loadStr();let n=this.getParameter(C);if(!n){if(n=S.constructClass(l),!n){console.error("Unable to construct prop:"+C+" of type:"+l);continue}n.setName(C),this.addParameter(n)}n.readBinary(e,g)}}}toString(e){return JSON.stringify(this.toJSON(),null,2)}copyFrom(e,g){let t=e.getNumParameters();for(;t--;){const I=e.getParameterByIndex(t),l=this.getParameter(I.getName());l?l.copyFrom(I):this.addParameter(I.clone())}}}let en=0;class RU extends Ke{constructor(e,g){super();this.oldName=e,this.newName=g}}class jg extends xt{constructor(e=""){super();this.__ownerItem=void 0,this.__selectable=!0,this.__selected=!1,this.__metaData={},this.__name=e,this.__path=[this.__name],en++}static getNumBaseItems(){return en}getName(){return this.__name}setName(e){if(this.__name!=e){const g=this.__name;this.__name=e,this.updatePath();const t=new RU(g,e);this.emit("nameChanged",t)}}get name(){return this.getName()}set name(e){this.setName(e)}updatePath(){this.__ownerItem==null?this.__path=[this.__name]:this.__path=[...this.__ownerItem.getPath(),this.__name]}getPath(){return this.__path}resolvePath(e,g=0){if(g==0&&(e[0]=="."||e[0]==this.__name)&&g++,g==e.length)return this;if(e[g]==">"&&g==e.length-1)return this.getParameter(e[g+1]);const t=this.getParameter(e[g]);if(t)return t;throw new Error("Invalid path:"+e+"["+g+"] member not found")}getOwner(){return this.__ownerItem}setOwner(e){this.__ownerItem!==e?(this.__ownerItem=e,this.updatePath()):e||(this.__ownerItem=void 0,this.updatePath())}isSelectable(){return this.__selectable}setSelectable(e){if(this.__selectable!=e){this.__selectable=e;let g=new FU(this.__selectable);return this.emit("selectabilityChanged",g),!0}return!1}isSelected(){return this.__selected}setSelected(e){this.__selected=e;let g=new UU(this.__selected);this.emit("selectedChanged",g)}getMetadata(e){return this.__metaData[e]}hasMetadata(e){return e in this.__metaData}setMetadata(e,g){this.__metaData[e]=g}deleteMetadata(e){delete this.__metaData[e]}toJSON(e){const g=super.toJSON(e);return g.name=this.__name,g}fromJSON(e,g){e.name&&(this.__name=e.name),super.fromJSON(e,g)}readBinary(e,g){e.loadStr(),this.setName(e.loadStr()),super.readBinary(e,g)}clone(e){throw new Error(this.constructor.name+" does not implement its clone method")}copyFrom(e,g){super.copyFrom(e,g),this.setName(e.getName()),this.setSelectable(e.isSelectable())}}const ra=function(i,e,g,t,I=void 0){try{const l=new XMLHttpRequest;l.responseType=e,l.addEventListener("timeout",C=>{throw new Error("The request for "+i+" timed out.")}),l.addEventListener("error",C=>{throw new Error("The request for "+i+": xhr.readyState:"+l.readyState)}),l.addEventListener("abort",C=>{throw new Error("The request for "+i+": xhr.readyState:"+l.readyState)}),l.addEventListener("progress",C=>{I&&I(C.total,C.loaded)}),l.addEventListener("loadend",C=>{l.status==200?g(l):t(l.statusText)}),l.open("GET",i,!0),l.send()}catch(l){t(l)}},MC=function(i,e,g=void 0,t=void 0){ra(i,"text",I=>{e(I.responseText)},I=>{if(g!=null)g(I);else throw new Error("Unable to XHR File:"+i)},t)},Ra=function(i,e,g=void 0,t=void 0){ra(i,"arraybuffer",I=>{e(I.response)},I=>{if(g!=null)g(I);else throw new Error("Unable to XHR File:"+i)},t)};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function VI(i,e,g,t){function I(l){return l instanceof g?l:new g(function(C){C(l)})}return new(g||(g=Promise))(function(l,C){function n(U){try{a(t.next(U))}catch(d){C(d)}}function F(U){try{a(t.throw(U))}catch(d){C(d)}}function a(U){U.done?l(U.value):I(U.value).then(n,F)}a((t=t.apply(i,e||[])).next())})}let $I=0;class ha{constructor(e){this.workers=[],this.workerTaskCount=[],this.taskPromiseResolves={},this.taskQueue=[],this.availableWorkers=[],this.terminationTimeouts=[],this.terminateWorkersWhenFree=!0,this.terminationLatency=2e3,this.terminateWorkersWhenFree=e}addTask(e,g){return this.addTaskCallback(()=>({taskData:e,transferables:g}))}addTaskCallback(e){$I++;const g=$I;return new Promise(t=>VI(this,void 0,void 0,function*(){this.taskPromiseResolves[g]=t,this.taskQueue.push({taskId:g,dataFactory:e});const I=_e.hardwareConcurrency-1;this.availableWorkers.length>0?this.consumeTask():this.workers.length<I-1&&(yield this.addWorker(),this.consumeTask())}))}consumeTask(){return VI(this,void 0,void 0,function*(){const e=this.availableWorkers.pop();if(this.workerTaskCount[e]>0||(this.terminationTimeouts[e]!=-1?(clearTimeout(this.terminationTimeouts[e]),this.terminationTimeouts[e]=-1):this.workers[e]||(yield this.allocWorker(e)),this.taskQueue.length==0))return;const g=this.taskQueue.pop(),{taskData:t,transferables:I}=g.dataFactory(e);t.taskId=g.taskId,this.workerTaskCount[e]++,this.workers[e].postMessage(t,I)})}addWorker(){const e=this.workers.length;return this.workers.push(null),this.allocWorker(e)}allocWorker(e){return new Promise(g=>{this.constructWorker().then(t=>{t.onmessage=I=>{if(I.data.taskId in this.taskPromiseResolves){const l=I.data.taskId;delete I.data.taskId,this.taskPromiseResolves[l](I.data),delete this.taskPromiseResolves[l]}this.workerTaskCount[e]--,!(this.workerTaskCount[e]>0)&&(this.availableWorkers.indexOf(e)==-1&&this.availableWorkers.push(e),this.taskQueue.length>0?this.consumeTask():this.terminateWorkersWhenFree&&this.scheduleWorkerTermination(e))},this.workers[e]=t,this.terminationTimeouts[e]=-1,this.workerTaskCount[e]=0,this.availableWorkers.push(e),g()})})}scheduleWorkerTermination(e){this.terminationTimeouts[e]=setTimeout(()=>{this.terminateWorker(e),this.terminationTimeouts[e]=-1},this.terminationLatency)}terminateWorker(e){this.workers[e].terminate(),this.workers[e]=null}messageWorker(e,g){$I++;const t=$I;return new Promise(I=>{this.taskPromiseResolves[t]=I,g.taskId=t,this.workers[e].postMessage(g)})}}function hU(i,e){var g=atob(i);if(e){for(var t=new Uint8Array(g.length),I=0,l=g.length;I<l;++I)t[I]=g.charCodeAt(I);return String.fromCharCode.apply(null,new Uint16Array(t.buffer))}return g}function cU(i,e,g){var t=e===void 0?null:e,I=g===void 0?!1:g,l=hU(i,I),C=l.indexOf(`
`,10)+1,n=l.substring(C)+(t?"//# sourceMappingURL="+t:""),F=new Blob([n],{type:"application/javascript"});return URL.createObjectURL(F)}function _C(i,e,g){var t;return function(l){return t=t||cU(i,e,g),new Worker(t,l)}}var ZU=_C("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwp2YXIgd29ya2VyX2NvZGUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHsKICAndXNlIHN0cmljdCc7CgogIHZhciB1bnBhY2tCYXNlNjRTdHIgPSAiQUdGemJRRUFBQUFCcmdJbFlBRi9BWDVnQTM5L2Z3Ri9ZQU4vZm44QVlBUi9mMzkvQVg5Z0FuOS9BWDlnQUFGL1lBSi9md0JnQTM5L2Z3QmdBQUJnQVg4QmYyQUVmMzkvZndCZ0JuOS9mMzkvZndCZ0JYOS9mMzkvQUdBQ2YzOEJmR0FGZjM5L2YzOEJmMkFHZjM5L2YzOS9BWDlnQ1g5L2YzOS9mMzkvZndGL1lBaC9mMzkvZjM1L2Z3Ri9ZQUorZmdGL1lBRi9BR0FEZjM5OEFHQUpmMzkvZjM5L2YzOS9BR0FLZjM5L2YzOS9mMzkvZndCZ0FuOStBR0FIZjM5L2YzOS9md0YvWUFwL2YzOS9mMzkvZjM5L0FYOWdCMzkvZjM5L2YzOEFZQXQvZjM5L2YzOS9mMzkvZndCZ0RYOS9mMzkvZjM5L2YzOS9mMzhBWUFoL2YzOS9mMzkvZndCZ0EzOStmd0YvWUFOK2YzOEJmMkFDZm44QmYyQUdmM3gvZjM5L0FYOWdBbngvQVh4Z0EzOS9md0Y4WUFSL2YzOThBQUtJRDFjRFpXNTJCbTFsYlc5eWVRSUFnQUlEWlc1MkJYUmhZbXhsQVhBQnZBSzhBZ05sYm5ZSmRHRmliR1ZDWVhObEEzOEFBMlZ1ZGc1RVdVNUJUVWxEVkU5UVgxQlVVZ04vQUFObGJuWUlVMVJCUTB0VVQxQURmd0FEWlc1MkJXRmliM0owQUJNRFpXNTJEV1Z1YkdGeVoyVk5aVzF2Y25rQUJRTmxibllPWjJWMFZHOTBZV3hOWlcxdmNua0FCUU5sYm5ZWFlXSnZjblJQYmtOaGJtNXZkRWR5YjNkTlpXMXZjbmtBQlFObGJuWUlhVzUyYjJ0bFgya0FDUU5sYm5ZSmFXNTJiMnRsWDJscEFBUURaVzUyQ21sdWRtOXJaVjlwYVdrQUFRTmxibllMYVc1MmIydGxYMmxwYVdrQUF3TmxibllNYVc1MmIydGxYMmxwYVdscEFBNERaVzUyRG1sdWRtOXJaVjlwYVdscGFXbHBBQmdEWlc1MkVXbHVkbTlyWlY5cGFXbHBhV2xwYVdscEFCa0RaVzUyQ0dsdWRtOXJaVjkyQUJNRFpXNTJDV2x1ZG05clpWOTJhUUFHQTJWdWRncHBiblp2YTJWZmRtbHBBQWNEWlc1MkMybHVkbTlyWlY5MmFXbHBBQW9EWlc1MkRHbHVkbTlyWlY5MmFXbHBhUUFNQTJWdWRnMXBiblp2YTJWZmRtbHBhV2xwQUFzRFpXNTJEbWx1ZG05clpWOTJhV2xwYVdscEFCb0RaVzUyRVdsdWRtOXJaVjkyYVdscGFXbHBhV2xwQUJZRFpXNTJFbWx1ZG05clpWOTJhV2xwYVdscGFXbHBhUUFiQTJWdWRobGZYMTlqZUdGZllXeHNiMk5oZEdWZlpYaGpaWEIwYVc5dUFBa0RaVzUyRWw5ZlgyTjRZVjlpWldkcGJsOWpZWFJqYUFBSkEyVnVkaEJmWDE5amVHRmZaVzVrWDJOaGRHTm9BQWdEWlc1MkhGOWZYMk40WVY5bWFXNWtYMjFoZEdOb2FXNW5YMk5oZEdOb1h6SUFCUU5sYm5ZY1gxOWZZM2hoWDJacGJtUmZiV0YwWTJocGJtZGZZMkYwWTJoZk13QUpBMlZ1ZGh4ZlgxOWplR0ZmWm1sdVpGOXRZWFJqYUdsdVoxOWpZWFJqYUY4MEFBUURaVzUyRlY5ZlgyTjRZVjltY21WbFgyVjRZMlZ3ZEdsdmJnQVRBMlZ1ZGd4ZlgxOWplR0ZmZEdoeWIzY0FCd05sYm5ZSFgxOWZiRzlqYXdBVEEyVnVkZ3RmWDE5dFlYQmZabWxzWlFBRUEyVnVkaEpmWDE5eVpYTjFiV1ZGZUdObGNIUnBiMjRBRXdObGJuWUxYMTlmYzJWMFJYSnlUbThBRXdObGJuWU5YMTlmYzNselkyRnNiREUwTUFBRUEyVnVkZzFmWDE5emVYTmpZV3hzTVRRMUFBUURaVzUyRFY5ZlgzTjVjMk5oYkd3eE5EWUFCQU5sYm5ZTlgxOWZjM2x6WTJGc2JERTRNd0FFQTJWdWRnMWZYMTl6ZVhOallXeHNNVGs0QUFRRFpXNTJERjlmWDNONWMyTmhiR3d5TUFBRUEyVnVkZ3RmWDE5emVYTmpZV3hzTmdBRUEyVnVkZ3hmWDE5emVYTmpZV3hzTmpBQUJBTmxibllNWDE5ZmMzbHpZMkZzYkRnekFBUURaVzUyREY5ZlgzTjVjMk5oYkd3NU1RQUVBMlZ1ZGdsZlgxOTFibXh2WTJzQUV3TmxiblllWDE5bGJXSnBibVJmWm1sdVlXeHBlbVZmZG1Gc2RXVmZiMkpxWldOMEFCTURaVzUyRmw5ZlpXMWlhVzVrWDNKbFoybHpkR1Z5WDJKdmIyd0FEQU5sYm5ZWFgxOWxiV0pwYm1SZmNtVm5hWE4wWlhKZlkyeGhjM01BSEFObGJuWWpYMTlsYldKcGJtUmZjbVZuYVhOMFpYSmZZMnhoYzNOZlkyOXVjM1J5ZFdOMGIzSUFDd05sYm5ZZ1gxOWxiV0pwYm1SZmNtVm5hWE4wWlhKZlkyeGhjM05mWm5WdVkzUnBiMjRBSFFObGJuWVhYMTlsYldKcGJtUmZjbVZuYVhOMFpYSmZaVzEyWVd3QUJnTmxibllYWDE5bGJXSnBibVJmY21WbmFYTjBaWEpmWm14dllYUUFCd05sYm5ZWlgxOWxiV0pwYm1SZmNtVm5hWE4wWlhKZmFXNTBaV2RsY2dBTUEyVnVkaDFmWDJWdFltbHVaRjl5WldkcGMzUmxjbDl0WlcxdmNubGZkbWxsZHdBSEEyVnVkaHhmWDJWdFltbHVaRjl5WldkcGMzUmxjbDl6ZEdSZmMzUnlhVzVuQUFZRFpXNTJIVjlmWlcxaWFXNWtYM0psWjJsemRHVnlYM04wWkY5M2MzUnlhVzVuQUFjRFpXNTJIbDlmWlcxaWFXNWtYM0psWjJsemRHVnlYM1poYkhWbFgyOWlhbVZqZEFBTEEyVnVkaVJmWDJWdFltbHVaRjl5WldkcGMzUmxjbDkyWVd4MVpWOXZZbXBsWTNSZlptbGxiR1FBRmdObGJuWVdYMTlsYldKcGJtUmZjbVZuYVhOMFpYSmZkbTlwWkFBR0EyVnVkZ1pmWVdKdmNuUUFDQU5sYm5ZV1gyVnRjMk55YVhCMFpXNWZiV1Z0WTNCNVgySnBad0FCQTJWdWRnZGZaMlYwWlc1MkFBa0RaVzUyQ1Y5blpYUm5jbTVoYlFBSkEyVnVkZ2xmWjJWMGNIZHVZVzBBQ1FObGJuWUlYMnB6UTJ4dmMyVUFFd05sYm5ZSlgycHpRM0psWVhSbEFBa0RaVzUyQjE5cWMwOXdaVzRBQ1FObGJuWUhYMnB6VW1WaFpBQUJBMlZ1ZGdkZmFuTlRaV1ZyQUFFRFpXNTJDRjlxYzFkeWFYUmxBQUVEWlc1MkUxOXNiSFp0WDJWb1gzUjVjR1ZwWkY5bWIzSUFDUU5sYm5ZS1gyeHZZMkZzZEdsdFpRQUpBMlZ1ZGdkZmJXdDBhVzFsQUFrRFpXNTJGRjl3ZEdoeVpXRmtYMmRsZEhOd1pXTnBabWxqQUFrRFpXNTJFMTl3ZEdoeVpXRmtYMnRsZVY5amNtVmhkR1VBQkFObGJuWU5YM0IwYUhKbFlXUmZiMjVqWlFBRUEyVnVkaFJmY0hSb2NtVmhaRjl6WlhSemNHVmphV1pwWXdBRUEyVnVkZ1ZmZEdsdFpRQUpBMlZ1ZGhCcGJuWnZhMlZmYVdscGFXbHBhbWxwQUJrRFpXNTJDbWx1ZG05clpWOXBhbW9BRGdObGJuWUphVzUyYjJ0bFgycHBBQVFEWlc1MkNtbHVkbTlyWlY5MmFXb0FDZ05sYm5ZTGFXNTJiMnRsWDNacGFta0FEQU5sYm5ZSFgycHpWR1ZzYkFBSkE0UUVnZ1FUQVFFR0V3UUpDUk1HRXdFQkNRY0FFd2NHQnd3SkNnRUVBUWtHQ1FFVENRa0VCQVFIQkFFVEFRRUpCeE1IQXdrR0JoTUlCZ2tUQVJNRUJCTVRBUUVCSUFrSkV4TUdFd0VEQ1FJRUV3Y0VFeE1LQmdFSkRBc0lCQXdFQkFFRUJBY0pCd2tEQ2hNR0VBRVJEQUFGQ3d3S0J3TUJCd0VFQmdFSkFRRU9BUWtFQUJNQUFRWUhCQk1UQVFrVEV3WVRCaE1KQ2dZTUNnRUFCd2NHQkFjVEJBUUVBaGNLRHdRSEJ3b0JFeE1UQlFFREJBY0pEZ1FFQ1FFQkF3UUpBU0lKQVFRSkJBa0dDUUVCQndRSEJCTUJDUTRKQmdNQkV3WVRBUXdCQndjSEJoTVhCaE1IQmhNVEV3a1BCQWtURXdRR0ZSME1CZ1lHQndrVENRa0pBUUVKQVFBSkJBb1RDUWtKRXdZR0JCTUVBQUlCQVJNTUNnUU9HUllWQ0JRU0VSSUdFQTRCRFJzV0dnc01DaVFIQmhNWkdBOE9Bd0VFSXdrQkNnd0xCd0VUQ1FrSUV3WUlDZ3dMQ2d3TEFRZ0VCaDBCQVFrRUJoMEVCZ1lHQ1FNRUJBRUVBUUVCQVFFRUJBUUpBd01IQkFFaElCOERBd1FCQkFRQkJBa0JCUUVCQ1FRSkV3Z0VDUUVFSGhNREZBMEZDZ1VIQkJNRkFRY0VCZzRNQlJNSkV3Y0lBd1lQRXhNVEJnY0hCZ01FQVFZQkJnTUpDUVlUQkFZVEJoTUVCZ1FUQVJNVEJoNEdGdzhCQndrREJnUURCd2NCQkFRR0JnWUJDUWtHRXdZR0F3Y1RFd29UQmhNVEJ3b0dFd2NHQndZVEJ3Y1RGUWNIRXhNVEJna0dCZ1FMRXdRSkJBTUJFd2dKQmhvRmZ3RWpBUXQvQVNNQ0MzOEJRUUFMZndGQkFBdC9BVUVBQ3dlWEJTVVlYMTlIVEU5Q1FVeGZYM04xWWw5SlgySnBibVJmWTNCd0FORURHbDlmUjB4UFFrRk1YMTl6ZFdKZlNWOWljbWxrWjJWZlkzQndBTzBERjE5ZlIweFBRa0ZNWDE5emRXSmZTVjlqY21OZlkzQndBTklFR2w5ZlIweFBRa0ZNWDE5emRXSmZTVjluYkc5aVlXeGZZM0J3QU9vQ0VGOWZYMk40WVY5allXNWZZMkYwWTJnQWh3TVdYMTlmWTNoaFgybHpYM0J2YVc1MFpYSmZkSGx3WlFDR0F4RmZYMTlsY25KdWIxOXNiMk5oZEdsdmJnREtBdzVmWDE5blpYUlVlWEJsVG1GdFpRRFBBd1ZmWm5KbFpRQlNCMTl0WVd4c2IyTUFiQXRrZVc1RFlXeHNYMlJwYVFDRkF3bGtlVzVEWVd4c1gya0Fud0lLWkhsdVEyRnNiRjlwYVFDRUF3dGtlVzVEWVd4c1gybHBhUUNEQXd4a2VXNURZV3hzWDJscGFXa0FnZ01OWkhsdVEyRnNiRjlwYVdscGFRQ0JBdzVrZVc1RFlXeHNYMmxwYVdscGFRQ0FBdzlrZVc1RFlXeHNYMmxwYVdscGFXa0Evd0lTWkhsdVEyRnNiRjlwYVdscGFXbHBhV2xwQVA0Q0VXUjVia05oYkd4ZmFXbHBhV2xwYW1scEFPY0NDMlI1YmtOaGJHeGZhV3BxQU9ZQ0NtUjVia05oYkd4ZmFta0E1UUlKWkhsdVEyRnNiRjkyQVAwQ0NtUjVia05oYkd4ZmRta0EvQUlMWkhsdVEyRnNiRjkyYVdrQSt3SU1aSGx1UTJGc2JGOTJhV2xrQVBvQ0RHUjVia05oYkd4ZmRtbHBhUUQ1QWcxa2VXNURZV3hzWDNacGFXbHBBUGdDRG1SNWJrTmhiR3hmZG1scGFXbHBBUGNDRDJSNWJrTmhiR3hmZG1scGFXbHBhUUQyQWhKa2VXNURZV3hzWDNacGFXbHBhV2xwYVdrQTlRSVRaSGx1UTJGc2JGOTJhV2xwYVdscGFXbHBhUUQwQWd0a2VXNURZV3hzWDNacGFnRGtBZ3hrZVc1RFlXeHNYM1pwYW1rQTR3SUxjMlYwVkdWdGNGSmxkREFBM0FJSWMyVjBWR2h5WlhjQTd3SUtjM1JoWTJ0QmJHeHZZd0RUQkFuS0JBRUFJd0FMdkFMekF0b0R2Z0hvQStFRDNRUGJBLzRCdmdHK0FZRUJ6UU9QQTQ0RFg4WUVmS2tEMHdPbEJNMEV1d0ttQWNvQ3l3SzRBcFlDMFFLV0FySUJjVmpxQTU4Q3h3S0JBWUVCZ1FHQkFZRUJnUUdCQWFvQjhRSGRBdThCdmdKcWM1a0UwZ0xiQXM0RThBSE1CTG9DeVFUU0E5VUQ1QVBYQWQ4RG5BS2FBdGNCbkFLYUF0Y0J1d09pQTV3RHFnR3FBYW9COGdMaEF1QUNtQUxVQWN3RHl3UEpBN3dEbWdQNkFZd0QrZ0dlQW1tdUFXOTdlcGtCendLNkFjd0NxZ0tVQktNRTFBTmU0Z09KQXNRQnJ3T0FBY01CdFFHWEJPNERtZ1QrQTlnRHp3U0FBWUFCZ0FHQUFZQUJnQUdBQWZFQzVnUDFBYmtDa3dUMUFmQUN1UUh0QXJzQjdBTHVBcjBCM2dMVEFXSFFBdEVCdlFHOUFha0Jtd09GQVpNREZxa0JxUUdwQVdKKzRnSncxd08zQVlnQnR3RzNBWWdCdHdHSUFmd0Ird0g3QVlnQmlBR0lBWWdCOGdOVzJBSzNBcjRFdlFMRUJMWUM4d1BVQXNzRW9nR3ZBcklFcHdUU0FaWUJ0Z1NMQlBFRDZRUGdBeXVkQXAwQ1BwRURZbUppWW1KaVltSmlZbUppWW1KaVltSmloZ0hhQXBnRXBnTHZBNUVFeUFHaUF2UUR4UVJreUFUSEJKY0JXNkFFVmVRQjVRUFZBYU1EcGdPZEE2Y0RxQU9DQVlZQmhnR0dBWVlCaGdHR0Flc0MyUU4vNmdGZ3dRU3NBdllEOVFQQUJPd0RmYjBFdkFTVkJMa0VaZU1EMWdIZUE1c0NtUUxXQVpzQ21RTFdBUnQvZjM5L2YzOS85QUdYQTVRRGlBUGNBOU1DdEFUMEFid0JtQU9WQTRrRHFRTG5BN3dCdkFHb0Faa0RsZ09LQThvRXFBR29BYWdCNlFLL0JPZ0NOL01Cc0FLU0JQTUI4Z0hmQXB3QjhnRUs3SXNOZ2dUb0RRRUlmeUFBUlFSQUR3dEIwTGNES0FJQUlRSWdBRUY0YWlJRUlBQkJmR29vQWdBaUFFRjRjU0lCYWlFR0FuOGdBRUVCY1FSL0lBUWlBQVVnQkNnQ0FDRURJQUJCQTNGRkJFQVBDeUFFSUFOcklnQWdBa2tFUUE4TElBTWdBV29oQVVIVXR3TW9BZ0FnQUVZRVFDQUFJQVpCQkdvaUFpZ0NBQ0lFUVFOeFFRTkhEUUlhUWNpM0F5QUJOZ0lBSUFJZ0JFRitjVFlDQUNBQUlBRkJBWEkyQWdRZ0FDQUJhaUFCTmdJQUR3c2dBMEVEZGlFRUlBTkJnQUpKQkVBZ0FDZ0NEQ0lESUFBb0FnZ2lBa1lFUUVIQXR3TkJ3TGNES0FJQVFRRWdCSFJCZjNOeE5nSUFCU0FDSUFNMkFnd2dBeUFDTmdJSUN5QUFEQUlMSUFBb0FoZ2hCd0pBSUFBb0Fnd2lCQ0FBUmdSQUlBQkJFR29pQTBFRWFpSUNLQUlBSWdSRkJFQWdBeWdDQUNJRUJFQWdBeUVDQlVFQUlRUU1Bd3NMQTBBZ0JFRVVhaUlGS0FJQUlnTUVRQ0FESVFRZ0JTRUNEQUVMSUFSQkVHb2lCU2dDQUNJREJFQWdBeUVFSUFVaEFnd0JDd3NnQWtFQU5nSUFCU0FBS0FJSUlnSWdCRFlDRENBRUlBSTJBZ2dMQ3lBSEJIOGdBQ2dDSENJRFFRSjBRZkM1QTJvaUFpZ0NBQ0FBUmdSQUlBSWdCRFlDQUNBRVJRUkFRY1MzQTBIRXR3TW9BZ0JCQVNBRGRFRi9jM0UyQWdBZ0FBd0VDd1VnQjBFUWFpQUhLQUlRSUFCSFFRSjBhaUFFTmdJQUlBQWdCRVVOQXhvTElBUWdCellDR0NBQVFSQnFJZ0lvQWdBaUF3UkFJQVFnQXpZQ0VDQURJQVEyQWhnTElBSW9BZ1FpQWdSQUlBUWdBallDRkNBQ0lBUTJBaGdMSUFBRklBQUxDd3NpQkNBR1R3UkFEd3NnQmtFRWFpSUNLQUlBSWdOQkFYRkZCRUFQQ3lBRFFRSnhCRUFnQWlBRFFYNXhOZ0lBSUFBZ0FVRUJjallDQkNBRUlBRnFJQUUyQWdBZ0FTRUVCVUhZdHdNb0FnQWdCa1lFUUVITXR3TkJ6TGNES0FJQUlBRnFJZ0UyQWdCQjJMY0RJQUEyQWdBZ0FDQUJRUUZ5TmdJRUlBQkIxTGNES0FJQVJ3UkFEd3RCMUxjRFFRQTJBZ0JCeUxjRFFRQTJBZ0FQQzBIVXR3TW9BZ0FnQmtZRVFFSEl0d05CeUxjREtBSUFJQUZxSWdFMkFnQkIxTGNESUFRMkFnQWdBQ0FCUVFGeU5nSUVJQVFnQVdvZ0FUWUNBQThMSUFOQmVIRWdBV29oQnlBRFFRTjJJUUVDUUNBRFFZQUNTUVJBSUFZb0Fnd2lBeUFHS0FJSUlnSkdCRUJCd0xjRFFjQzNBeWdDQUVFQklBRjBRWDl6Y1RZQ0FBVWdBaUFETmdJTUlBTWdBallDQ0FzRklBWW9BaGdoQ0FKQUlBWW9BZ3dpQVNBR1JnUkFJQVpCRUdvaUEwRUVhaUlDS0FJQUlnRkZCRUFnQXlnQ0FDSUJCRUFnQXlFQ0JVRUFJUUVNQXdzTEEwQWdBVUVVYWlJRktBSUFJZ01FUUNBRElRRWdCU0VDREFFTElBRkJFR29pQlNnQ0FDSURCRUFnQXlFQklBVWhBZ3dCQ3dzZ0FrRUFOZ0lBQlNBR0tBSUlJZ0lnQVRZQ0RDQUJJQUkyQWdnTEN5QUlCRUFnQmlnQ0hDSURRUUowUWZDNUEyb2lBaWdDQUNBR1JnUkFJQUlnQVRZQ0FDQUJSUVJBUWNTM0EwSEV0d01vQWdCQkFTQURkRUYvYzNFMkFnQU1CQXNGSUFoQkVHb2dDQ2dDRUNBR1IwRUNkR29nQVRZQ0FDQUJSUTBEQ3lBQklBZzJBaGdnQmtFUWFpSUNLQUlBSWdNRVFDQUJJQU0yQWhBZ0F5QUJOZ0lZQ3lBQ0tBSUVJZ0lFUUNBQklBSTJBaFFnQWlBQk5nSVlDd3NMQ3lBQUlBZEJBWEkyQWdRZ0JDQUhhaUFITmdJQUlBQkIxTGNES0FJQVJnUkFRY2kzQXlBSE5nSUFEd1VnQnlFRUN3c2dCRUVEZGlFQklBUkJnQUpKQkVBZ0FVRURkRUhvdHdOcUlRSkJ3TGNES0FJQUlnUkJBU0FCZENJQmNRUi9JQUpCQ0dvaUFTZ0NBQVZCd0xjRElBUWdBWEkyQWdBZ0FrRUlhaUVCSUFJTElRUWdBU0FBTmdJQUlBUWdBRFlDRENBQUlBUTJBZ2dnQUNBQ05nSU1Ed3NnQkVFSWRpSUJCSDhnQkVILy8vOEhTd1IvUVI4RklBUkJEaUFCSUFGQmdQNC9ha0VRZGtFSWNTSURkQ0lDUVlEZ0gycEJFSFpCQkhFaUFTQURjaUFDSUFGMElnSkJnSUFQYWtFUWRrRUNjU0lCY21zZ0FpQUJkRUVQZG1vaUFVRUhhblpCQVhFZ0FVRUJkSElMQlVFQUN5SUZRUUowUWZDNUEyb2hBeUFBSUFVMkFod2dBRUVBTmdJVUlBQkJBRFlDRUFKQVFjUzNBeWdDQUNJQ1FRRWdCWFFpQVhFRVFDQURLQUlBSVFGQkdTQUZRUUYyYXlFQ0lBUWdCVUVmUmdSL1FRQUZJQUlMZENFRkFrQURRQ0FCS0FJRVFYaHhJQVJHRFFFZ0JVRUJkQ0VESUFGQkVHb2dCVUVmZGtFQ2RHb2lCU2dDQUNJQ0JFQWdBeUVGSUFJaEFRd0JDd3NnQlNBQU5nSUFJQUFnQVRZQ0dDQUFJQUEyQWd3Z0FDQUFOZ0lJREFJTElBRkJDR29pQWlnQ0FDSUVJQUEyQWd3Z0FpQUFOZ0lBSUFBZ0JEWUNDQ0FBSUFFMkFnd2dBRUVBTmdJWUJVSEV0d01nQWlBQmNqWUNBQ0FESUFBMkFnQWdBQ0FETmdJWUlBQWdBRFlDRENBQUlBQTJBZ2dMQzBIZ3R3TkI0TGNES0FJQVFYOXFJZ0EyQWdBZ0FBUkFEd1ZCaUxzRElRQUxBMEFnQUNnQ0FDSUJRUWhxSVFBZ0FRMEFDMEhndHdOQmZ6WUNBQXZEQXdFRGZ5QUNRWURBQUU0RVFDQUFJQUVnQWhBNkR3c2dBQ0VFSUFBZ0Ftb2hBeUFBUVFOeElBRkJBM0ZHQkVBRFFDQUFRUU54QkVBZ0FrVUVRQ0FFRHdzZ0FDQUJMQUFBT2dBQUlBQkJBV29oQUNBQlFRRnFJUUVnQWtFQmF5RUNEQUVMQ3lBRFFYeHhJZ0pCUUdvaEJRTkFJQUFnQlV3RVFDQUFJQUVvQWdBMkFnQWdBQ0FCS0FJRU5nSUVJQUFnQVNnQ0NEWUNDQ0FBSUFFb0FndzJBZ3dnQUNBQktBSVFOZ0lRSUFBZ0FTZ0NGRFlDRkNBQUlBRW9BaGcyQWhnZ0FDQUJLQUljTmdJY0lBQWdBU2dDSURZQ0lDQUFJQUVvQWlRMkFpUWdBQ0FCS0FJb05nSW9JQUFnQVNnQ0xEWUNMQ0FBSUFFb0FqQTJBakFnQUNBQktBSTBOZ0kwSUFBZ0FTZ0NPRFlDT0NBQUlBRW9BancyQWp3Z0FFRkFheUVBSUFGQlFHc2hBUXdCQ3dzRFFDQUFJQUpJQkVBZ0FDQUJLQUlBTmdJQUlBQkJCR29oQUNBQlFRUnFJUUVNQVFzTEJTQURRUVJySVFJRFFDQUFJQUpJQkVBZ0FDQUJMQUFBT2dBQUlBQWdBU3dBQVRvQUFTQUFJQUVzQUFJNkFBSWdBQ0FCTEFBRE9nQURJQUJCQkdvaEFDQUJRUVJxSVFFTUFRc0xDd05BSUFBZ0EwZ0VRQ0FBSUFFc0FBQTZBQUFnQUVFQmFpRUFJQUZCQVdvaEFRd0JDd3NnQkF1WUFnRUVmeUFBSUFKcUlRUWdBVUgvQVhFaEFTQUNRY01BVGdSQUEwQWdBRUVEY1FSQUlBQWdBVG9BQUNBQVFRRnFJUUFNQVFzTElBUkJmSEVpQlVGQWFpRUdJQUVnQVVFSWRISWdBVUVRZEhJZ0FVRVlkSEloQXdOQUlBQWdCa3dFUUNBQUlBTTJBZ0FnQUNBRE5nSUVJQUFnQXpZQ0NDQUFJQU0yQWd3Z0FDQUROZ0lRSUFBZ0F6WUNGQ0FBSUFNMkFoZ2dBQ0FETmdJY0lBQWdBellDSUNBQUlBTTJBaVFnQUNBRE5nSW9JQUFnQXpZQ0xDQUFJQU0yQWpBZ0FDQUROZ0kwSUFBZ0F6WUNPQ0FBSUFNMkFqd2dBRUZBYXlFQURBRUxDd05BSUFBZ0JVZ0VRQ0FBSUFNMkFnQWdBRUVFYWlFQURBRUxDd3NEUUNBQUlBUklCRUFnQUNBQk9nQUFJQUJCQVdvaEFBd0JDd3NnQkNBQ2F3c3JBUUYvSUFBZ0FFRUVhaUlDS0FJQUlBRnFJZ0ZCQTNZZ0FDZ0NBR28yQWdBZ0FpQUJRUWR4TmdJQUMya0JBWDhqQkNFQkl3UkIwQUJxSkFRZ0FVRkFhMEVBTmdJQUlBRkJBRFlDUkNBQlFRYzJBa2dnQUVFSU5nSUFJQUJCQkdvaUFTQUJLQUlBUVFGcU5nSUFJQUJCQ0RZQ0FDQUJJQUVvQWdCQkFXbzJBZ0JCQkJBVUlnQkJDRFlDQUNBQVFZQUlRUUFRR3d1UUFRRUNmeUFBUlFSQUlBRVFiQThMSUFGQnYzOUxCRUJCaUx3RFFRdzJBZ0JCQUE4TElBRkJDMnBCZUhFaEFpQUFRWGhxSUFGQkMwa0VmMEVRQlNBQ0N4RE9BeUlDQkVBZ0FrRUlhZzhMSUFFUWJDSUNSUVJBUVFBUEN5QUNJQUFnQUVGOGFpZ0NBQ0lEUVhoeElBTkJBM0VFZjBFRUJVRUlDMnNpQXlBQlNRUi9JQU1GSUFFTEVGTWFJQUFRVWlBQ0MwSUJBbjhnQUNnQ0RDSUJJQUFvQWdBaUFrRUJhbW90QUFCQkNIUWdBU0FDYWkwQUFFRVFkSElnQVNBQ1FRSnFhaTBBQUhKQkNDQUFLQUlFYTNaQi8vOERjUXNvQVFKL0lBQWhBUU5BSUFGQkJHb2hBaUFCS0FJQUJFQWdBaUVCREFFTEN5QUJJQUJyUVFKMUN3b0FJQUFRRlJvUWtBTUxKQUVCZnlBQlJRUkFEd3NEUUNBQUlBSnFRUUE2QUFBZ0FrRUJhaUlDSUFGSERRQUxDeVlCQVg4Z0FFRUFPZ0NBQkFOQUlBQWdBV3BCQURvQUFDQUJRUUZxSWdGQmdBUkhEUUFMQzEwQkFYOGdBU0FBU0NBQUlBRWdBbXBJY1FSQUlBRWdBbW9oQVNBQUlnTWdBbW9oQUFOQUlBSkJBRW9FUUNBQ1FRRnJJUUlnQUVFQmF5SUFJQUZCQVdzaUFTd0FBRG9BQUF3QkN3c2dBeUVBQlNBQUlBRWdBaEJUR2dzZ0FBdVBCUUlRZndOK0lBSkJjSEVoQkNBQklRVWdBRUcxQVdvaUNTd0FBRVVFUUNBQ0lRUUxJQUJCTEdvaERTQUFRU0JxSVFvZ0FFSFJBR29oRGlBQVFUaHFJUThnQUVHUUFXb2hFQ0FBUWZBQWFpRUxJQUJCekFCcUlSRWdBRUVJYWlFU0lBQkJCR29oREFKQUFrQURRQ0FFUlFSQUlBTWhBZ3dDQ3lBTktBSUFJUWNnQUN3QUFBUkFJQUVnRWlnQ0FDQU1LQUlBRUZNYUlBd29BZ0FoQWlBTVFRQTJBZ0FGSUFvcEF3QWlFeUFFclZNaENDQVRweUVDSUFnRWZ5QUNCU0FFSWdJTEJFQWdEaXdBQUFSQUlBa3NBQUFFUUNBQ0lBSWdCbXBCRDNGcklnTkJBRW9FUUNBRElRSUxJQWhGQkVBZ0JDRUNDd3NMSUFjb0FnUkZEUVFnQnlBRklBSWdCeWdDQUNnQ0RFRWZjVUhLQUdvUkFRQWhBaUFIUWJDbkFXb2hDQ0FQS0FJQUlnTUVmeUFEQlNBSUMwR0p3UUJxTEFBQUJFQWdFQ0FGSUFJUXF3SUxCU0FESVFJTEN5QUxJQXNwQXdBZ0Fxd2lFM3czQXdBZ0FpQUdhaUVHSUFvZ0Npa0RBQ0FUZlNJVE53TUFJQk5DQUZFZ0Rpd0FBRUVBUjNGRkRRRWdBZ1JBSUFaQkQzRkZJQWtzQUFCRmNnMENDeUFGSUFKcUlRVWdCQ0FDYXlFRUlBY2dBRUVCSUJFb0FnQVF0UUVFUUNBQ0lRTU1BUXNMSUFCQkFUb0FVa0YvRHdzZ0RTZ0NBQ0lEQkVBZ0N5a0RBQ0FEUVlpOEEyb3BBd0I4SVJRZ0FDd0FLQVJBSUFBcEExZ2hGU0FBS1FPSUFTSVRRZ0JSQkVBZ0ZTRVRCU0FBS1FPQUFTQVVmQ0VVQ3lBRFFhenpBR29vQWdBaEF5QVRJQlJUQkg5QjVBQUZJQk5DQUZFRWYwRUFCU0FVUXVRQWZpQVRmNmNMQ3lFRklBTkJ6SVFEYWl3QUFFVUVRQ0FGSUFCQnlBQnFJZ01vQWdCSEJFQWdBeUFGTmdJQUN3c0xDeUFDUVg5R0JFQkJmeUVHQlNBSkxBQUFCRUFnQUNnQ1JDQUJJQVlRNmdFTEN4Q0ZBU0FHRHd0QmZ3dGlBUUYvSUFCRkJFQkJBU0VBQ3dKQUFrQUNRQU5BSUFBUWJDSUJEUUpCc0x3RFFiQzhBeWdDQUNJQk5nSUFJQUZGRFFFZ0FVRUhjVUdPQVdvUkNBQU1BQXNBQzBFRUVCUWlBRUhFSlRZQ0FDQUFRZGdLUVFvUUd3d0JDeUFCRHd0QkFBdFRBUUYvSXdRaEFDTUVRZUFnYWlRRUlBQkJnQ0JxSWdNZ0FqWUNBQ0FBUVlBSUlBRWdBeENBQWhvZ0FFR1FJR29pQVVFQU5nSkVJQUZCQVRZQ1NDQUJRVUJyUVFFMkFnQWdBU0FBTmdJQUlBQWtCQXQ2QWdWL0FYNGdBRUVZYWlJREtBSUFJZ0VnQUNnQ0ZDSUVUd1JBUWdBUEN5QUFLQUlBSVFVZ0FTRUFBa0FEUUNBRElBQkJBV29pQVRZQ0FDQUZJQUJxTFFBQUlnQkIvd0J4clNBQ3JZWWdCbndoQmlBQVFZQUJjVVVOQVNBQ1FRZHFJUUlnQVNBRVNRUkFJQUVoQUF3QkJVSUFJUVlMQ3dzZ0Jnc0dBRUVORUFBTEdBQWdBQ2dDQUVFZ2NVVUVRQ0FCSUFJZ0FCQ05BaG9MQys0Q0FRRi9Ba0FDUUFKQUFrQUNRQ0FCUVFGckR2OEJBQUlCQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01BQXdzZ0FDZ0NBRVVFUUNBQUlBRTJBZ0FMREFNTElBQW9BZ0JCQzBjRVFDQUFRUU0yQWdBTERBSUxJQUFvQWdCQkFra0VRQ0FBUVFJMkFnQUxEQUVMSUFBZ0FUWUNBQXNnQUVFRWFpSUNJQUlvQWdCQkFXbzJBZ0FMcmdJQkFuOGdBQ2dDTEVHczh3QnFLQUlBSWdOQnBNc0VhaWdDQUFSQUlBTkJzTXNFYWlnQ0FDSUVCRUJCQVNBRFFhekxCR29vQWdBZ0FTQUNJQVJCRDNGQjZnQnFFUU1BUVg5R0JFQkJyUFVDUWY4QkVLUUJDd3NnQTBHNHl3UnFLQUlBSWdNRVFDQUJJQUlnQTBFZmNVRXFhaEVFQUVVRVFFR3M5UUpCL3dFUXBBRUxDd3NnQUNBQk5nSWNJQUFnQWpZQ0dDQUFMQUFNQkVBZ0FFRVFhaUlES0FJQUlBSlBCRUFnQUVFVWFpSUVLQUlBSUFFZ0FoQlRHaUFFSUFRb0FnQWdBbW8yQWdBZ0F5QURLQUlBSUFKck5nSUFDd1VnQUN3QUtVVUVRQUovSUFBb0FqQWhBMEVCSUFKRkRRQWFJQU1vQWdRZ0FTQUNFRU1MR2dzTElBQkIrQUJxSWdNZ0F5a0RBQ0FDclh3M0F3QWdBQ3dBS2dSQUVJVUJEd3NnQUVHb0FXb2dBU0FDRUtzQ0VJVUJDNEFCQVFGL0l3UWhCU01FUVlBQ2FpUUVJQUlnQTBvZ0JFR0F3QVJ4UlhFRVFDQUZJQUZCR0hSQkdIVWdBaUFEYXlJQlFZQUNTUVIvSUFFRlFZQUNDeEJVR2lBQlFmOEJTd1JBSUFJZ0Eyc2hBZ05BSUFBZ0JVR0FBaEJqSUFGQmdINXFJZ0ZCL3dGTERRQUxJQUpCL3dGeElRRUxJQUFnQlNBQkVHTUxJQVVrQkFzckFDQUFRZjhCY1VFWWRDQUFRUWgxUWY4QmNVRVFkSElnQUVFUWRVSC9BWEZCQ0hSeUlBQkJHSFp5QzQwSkFSQi9Jd1FoQnlNRVFZQUJhaVFFSUFJZ0F6WUNBQ0FIUVVCcklnUkNBRGNDQUNBRVFnQTNBZ2dnQkVJQU53SVFJQVJDQURjQ0dDQUVRZ0EzQWlBZ0JFSUFOd0lvSUFSQ0FEY0NNQ0FFUWdBM0FqZ2dBMFVpRXdSL0lBUkJKR29oRUNBRVFTaHFJUkZCQUFWQkFDRUFBMEFnQkNBQklBQnFMQUFBUVE5eFFRSjBhaUlGSUFVb0FnQkJBV28yQWdBZ0FFRUJhaUlBSUFOSERRQUxJQVJCSkdvaUFDRVFJQVJCS0dvaUNpRVJJQVFvQWdnaEJpQUVLQUlNSVFnZ0JDZ0NFQ0VKSUFRb0FoUWhDeUFFS0FJWUlRd2dCQ2dDSENFTklBUW9BaUFoRGlBQUtBSUFJUklnQ2lnQ0FDRUtJQVFvQWdRTElRVWdCRUVBTmdJQUlBSkJpQmxxUVFBZ0EwRUJkQkJVR2lBQ1FjUUFhaUlBUVFBMkFnQWdBa0VBTmdJRUlBSWdCVUVQZERZQ0NDQUNRUUEyQWtnZ0FpQUdJQVZCQVhScUlnOUJEblEyQWd3Z0FpQUZOZ0pNSUFJZ0NDQVBRUUYwYWlJUFFRMTBOZ0lRSUFJZ0JpQUZhaUlGTmdKUUlBSWdDU0FQUVFGMGFpSUdRUXgwTmdJVUlBSWdDQ0FGYWlJRk5nSlVJQUlnQ3lBR1FRRjBhaUlHUVF0ME5nSVlJQUlnQ1NBRmFpSUZOZ0pZSUFJZ0RDQUdRUUYwYWlJR1FRcDBOZ0ljSUFJZ0N5QUZhaUlGTmdKY0lBSWdEU0FHUVFGMGFpSUdRUWwwTmdJZ0lBSWdEQ0FGYWlJRk5nSmdJQUlnRGlBR1FRRjBhaUlHUVFoME5nSWtJQUlnRFNBRmFpSUZOZ0prSUFJZ0VpQUdRUUYwYWlJR1FRZDBOZ0lvSUFJZ0RpQUZhaUlGTmdKb0lBSWdDaUFHUVFGMGFpSUdRUVowTmdJc0lBSWdFQ2dDQUNBRmFpSUZOZ0pzSUFJZ0JDZ0NMQ0lJSUFaQkFYUnFJZ1pCQlhRMkFqQWdBaUFSS0FJQUlBVnFJZ1UyQW5BZ0FpQUVLQUl3SWdrZ0JrRUJkR29pQmtFRWREWUNOQ0FDSUFnZ0JXb2lCVFlDZENBQ0lBUW9BalFpQ0NBR1FRRjBhaUlHUVFOME5nSTRJQUlnQ1NBRmFpSUZOZ0o0SUFJZ0JDZ0NPQ0lKSUFaQkFYUnFJZ1pCQW5RMkFqd2dBaUFJSUFWcUlnVTJBbndnQWtGQWF5QUVLQUk4SUFaQkFYUnFRUUYwTmdJQUlBSWdDU0FGYWpZQ2dBRWdCeUFBS1FJQU53SUFJQWNnQUNrQ0NEY0NDQ0FISUFBcEFoQTNBaEFnQnlBQUtRSVlOd0lZSUFjZ0FDa0NJRGNDSUNBSElBQXBBaWczQWlnZ0J5QUFLUUl3TndJd0lBY2dBQ2tDT0RjQ09BSkFBa0FnRXcwQVFRQWhBQU5BSUFFZ0FHb3NBQUJCRDNFaUJBUkFJQUpCaUJscUlBY2dCRUVDZEdvaUJDZ0NBQ0lGUVFGMGFpQUFPd0VBSUFRZ0JVRUJhallDQUFzZ0FFRUJhaUlBSUFOSERRQUxBa0FDUUFKQUlBTkJxZ0pyRGdrQUFBRUJBUUVCQVFBQkMwRUtJUVFNQVFzTUFRc01BUXRCQnlFRUN5QUNRWVFCYWlJRklBUTJBZ0JCQVNBRWRDRUdRUUFoQVVFQklRQURRQ0FCUVJBZ0JHdDBJUVFDUUNBQVFSQkpCRUFEUUNBRUlBSkJCR29nQUVFQ2RHb29BZ0JKRFFJZ0FFRUJhaUlBUVJCSkRRQkJFQ0VBQ3dzTElBSkJpQUZxSUFGcUlBQTZBQUFnQWtHSUNXb2dBVUVCZEdvZ0JDQUNJQUJCQW5ScUtBSUFhMEVRSUFCcmRpQUNRY1FBYWlBQVFRSjBhaWdDQUdvaUJDQURTUVIvSUFKQmlCbHFJQVJCQVhScUxnRUFCVUVBQ3lJRU93RUFJQUZCQVdvaUFTQUdTUVJBSUFVb0FnQWhCQXdCQ3dzZ0J5UUVDNmNEQVFaL0l3UWhBeU1FUVJCcUpBUWdBMEVJYWlFRUlBRkJBRG9BQUFKQUlBQkIvdjhERUhRRVFFR3NJeWdDQUNnQ0FBUi9RUVFGUVFFTElBSkdCRUJCQVNFRUJVRUJJUVFEUUFKQUFrQUNRQU5BQWtBZ0FDQUhRUUowYWlnQ0FDSUZRZjcvQTBnTkFpQUZRZjcvQTJzTkFDQUhRUUZxSVFjZ0JpQUNRYXdqS0FJQUtBSUFCSDlCQkFWQkFRdHJTUTBCREFnTEN3d0JDeUFGUlEwQkN5QUhRUUZxSVFjZ0JVR0FmM0ZCZ01FRFJnUi9JQUVnQm1vZ0JUb0FBQ0FHUVFGcUJTQURRZ0EzQXdBZ0FTQUdhaUlJSUFVZ0F4Q1JBVUYvUmdSQVFRQWhCQXNnQTBJQU53TUFJQWhCckNNb0FnQW9BZ0FFZjBFRUJVRUJDeUFERUlnQ0lnVkJBVW9FZnlBRkJVRUJDeUFHYWdzaUJpQUNRYXdqS0FJQUtBSUFCSDlCQkFWQkFRdHJTUTBCREFRTEN5QUJJQVpxUVFBNkFBQUxCU0FEUWdBM0F3QWdCQ0FBTmdJQUFuOENRQUpBQWtBZ0FTQUVJQUlnQXhDNEEwRi9hdzRDQUFFQ0MwRUFEQUlMSUFBb0FnQkZEQUVMUVFFTElRUUxDeUFDUlFSQUlBTWtCQ0FFUWY4QmNVRUFSdzhMSUFFZ0FrRi9hbXBCQURvQUFDQURKQVFnQkVIL0FYRkJBRWNMTmdFRGZ5QUFJUUlEUUNBQlFRUnFJUU1nQWtFRWFpRUVJQUlnQVNnQ0FDSUJOZ0lBSUFFRVFDQUVJUUlnQXlFQkRBRUxDeUFBQzFBQkFuOENmeUFDQkg4RFFDQUFMQUFBSWdNZ0FTd0FBQ0lFUmdSQUlBQkJBV29oQUNBQlFRRnFJUUZCQUNBQ1FYOXFJZ0pGRFFNYURBRUxDeUFEUWY4QmNTQUVRZjhCY1dzRlFRQUxDeUlBQzQ0M0FReC9Ba0FDUUFKQUl3UWhBU01FUVJCcUpBUWdBU0VLQWtBZ0FFSDFBVWtFUUNBQVFRdHFRWGh4SVFKQndMY0RLQUlBSWdZZ0FFRUxTUVIvUVJBaUFnVWdBZ3RCQTNZaUFIWWlBVUVEY1FSQUlBRkJBWEZCQVhNZ0FHb2lBRUVEZEVIb3R3TnFJZ0ZCQ0dvaUJTZ0NBQ0lDUVFocUlnUW9BZ0FpQXlBQlJnUkFRY0MzQXlBR1FRRWdBSFJCZjNOeE5nSUFCU0FESUFFMkFnd2dCU0FETmdJQUN5QUNJQUJCQTNRaUFFRURjallDQkNBQ0lBQnFRUVJxSWdBZ0FDZ0NBRUVCY2pZQ0FDQUtKQVFnQkE4TElBSkJ5TGNES0FJQUlnaExCRUFnQVFSQUlBRWdBSFJCQWlBQWRDSUFRUUFnQUd0eWNTSUFRUUFnQUd0eFFYOXFJZ0ZCREhaQkVIRWhBQ0FCSUFCMklnRkJCWFpCQ0hFaUF5QUFjaUFCSUFOMklnQkJBblpCQkhFaUFYSWdBQ0FCZGlJQVFRRjJRUUp4SWdGeUlBQWdBWFlpQUVFQmRrRUJjU0lCY2lBQUlBRjJhaUlEUVFOMFFlaTNBMm9pQUVFSWFpSUVLQUlBSWdGQkNHb2lCeWdDQUNJRklBQkdCRUJCd0xjRElBWkJBU0FEZEVGL2MzRWlBRFlDQUFVZ0JTQUFOZ0lNSUFRZ0JUWUNBQ0FHSVFBTElBRWdBa0VEY2pZQ0JDQUJJQUpxSWdRZ0EwRURkQ0lESUFKcklnVkJBWEkyQWdRZ0FTQURhaUFGTmdJQUlBZ0VRRUhVdHdNb0FnQWhBeUFJUVFOMklnSkJBM1JCNkxjRGFpRUJJQUJCQVNBQ2RDSUNjUVIvSUFGQkNHb2lBaWdDQUFWQndMY0RJQUFnQW5JMkFnQWdBVUVJYWlFQ0lBRUxJUUFnQWlBRE5nSUFJQUFnQXpZQ0RDQURJQUEyQWdnZ0F5QUJOZ0lNQzBISXR3TWdCVFlDQUVIVXR3TWdCRFlDQUNBS0pBUWdCdzhMUWNTM0F5Z0NBQ0lNQkVBZ0RFRUFJQXhyY1VGL2FpSUJRUXgyUVJCeElRQWdBU0FBZGlJQlFRVjJRUWh4SWdNZ0FISWdBU0FEZGlJQVFRSjJRUVJ4SWdGeUlBQWdBWFlpQUVFQmRrRUNjU0lCY2lBQUlBRjJJZ0JCQVhaQkFYRWlBWElnQUNBQmRtcEJBblJCOExrRGFpZ0NBQ0lES0FJRVFYaHhJQUpySVFFZ0EwRVFhaUFES0FJUVJVRUNkR29vQWdBaUFBUkFBMEFnQUNnQ0JFRjRjU0FDYXlJRklBRkpJZ1FFUUNBRklRRUxJQVFFUUNBQUlRTUxJQUJCRUdvZ0FDZ0NFRVZCQW5ScUtBSUFJZ0FOQUNBQklRVUxCU0FCSVFVTElBTWdBbW9pQ3lBRFN3UkFJQU1vQWhnaENRSkFJQU1vQWd3aUFDQURSZ1JBSUFOQkZHb2lBU2dDQUNJQVJRUkFJQU5CRUdvaUFTZ0NBQ0lBUlFSQVFRQWhBQXdEQ3dzRFFDQUFRUlJxSWdRb0FnQWlCd1JBSUFjaEFDQUVJUUVNQVFzZ0FFRVFhaUlFS0FJQUlnY0VRQ0FISVFBZ0JDRUJEQUVMQ3lBQlFRQTJBZ0FGSUFNb0FnZ2lBU0FBTmdJTUlBQWdBVFlDQ0FzTEFrQWdDUVJBSUFNZ0F5Z0NIQ0lCUVFKMFFmQzVBMm9pQkNnQ0FFWUVRQ0FFSUFBMkFnQWdBRVVFUUVIRXR3TWdERUVCSUFGMFFYOXpjVFlDQUF3REN3VWdDVUVRYWlBSktBSVFJQU5IUVFKMGFpQUFOZ0lBSUFCRkRRSUxJQUFnQ1RZQ0dDQURLQUlRSWdFRVFDQUFJQUUyQWhBZ0FTQUFOZ0lZQ3lBREtBSVVJZ0VFUUNBQUlBRTJBaFFnQVNBQU5nSVlDd3NMSUFWQkVFa0VRQ0FESUFVZ0Ftb2lBRUVEY2pZQ0JDQURJQUJxUVFScUlnQWdBQ2dDQUVFQmNqWUNBQVVnQXlBQ1FRTnlOZ0lFSUFzZ0JVRUJjallDQkNBTElBVnFJQVUyQWdBZ0NBUkFRZFMzQXlnQ0FDRUVJQWhCQTNZaUFVRURkRUhvdHdOcUlRQWdCa0VCSUFGMElnRnhCSDhnQUVFSWFpSUNLQUlBQlVIQXR3TWdCaUFCY2pZQ0FDQUFRUWhxSVFJZ0FBc2hBU0FDSUFRMkFnQWdBU0FFTmdJTUlBUWdBVFlDQ0NBRUlBQTJBZ3dMUWNpM0F5QUZOZ0lBUWRTM0F5QUxOZ0lBQ3lBS0pBUWdBMEVJYWc4RklBSWhBQXNGSUFJaEFBc0ZJQUloQUFzRklBQkJ2MzlMQkVCQmZ5RUFCU0FBUVF0cUlnQkJlSEVoQTBIRXR3TW9BZ0FpQlFSQUlBQkJDSFlpQUFSL0lBTkIvLy8vQjBzRWYwRWZCU0FEUVE0Z0FDQUFRWUQrUDJwQkVIWkJDSEVpQUhRaUFVR0E0QjlxUVJCMlFRUnhJZ0lnQUhJZ0FTQUNkQ0lBUVlDQUQycEJFSFpCQW5FaUFYSnJJQUFnQVhSQkQzWnFJZ0JCQjJwMlFRRnhJQUJCQVhSeUN3VkJBQXNoQ0VFQUlBTnJJUUlDUUFKQUlBaEJBblJCOExrRGFpZ0NBQ0lBQkVCQkdTQUlRUUYyYXlFRVFRQWhBU0FESUFoQkgwWUVmMEVBQlNBRUMzUWhCMEVBSVFRRFFDQUFLQUlFUVhoeElBTnJJZ1lnQWtrRVFDQUdCRUFnQUNFQklBWWhBZ1ZCQUNFQ0lBQWhBUXdFQ3dzZ0FDZ0NGQ0lHUlNBR0lBQkJFR29nQjBFZmRrRUNkR29vQWdBaUFFWnlSUVJBSUFZaEJBc2dCeUFBUlNJR1FRRnpkQ0VISUFaRkRRQUxCVUVBSVFFTElBUWdBWElFZnlBRUJTQUZRUUlnQ0hRaUFFRUFJQUJyY25FaUFFVUVRQ0FESVFBTUJ3c2dBRUVBSUFCcmNVRi9haUlFUVF4MlFSQnhJUUJCQUNFQklBUWdBSFlpQkVFRmRrRUljU0lISUFCeUlBUWdCM1lpQUVFQ2RrRUVjU0lFY2lBQUlBUjJJZ0JCQVhaQkFuRWlCSElnQUNBRWRpSUFRUUYyUVFGeElnUnlJQUFnQkhacVFRSjBRZkM1QTJvb0FnQUxJZ0FOQUNBQklRUU1BUXNEUUNBQUtBSUVRWGh4SUFOcklnUWdBa2tpQndSQUlBUWhBZ3NnQndSQUlBQWhBUXNnQUVFUWFpQUFLQUlRUlVFQ2RHb29BZ0FpQUEwQUlBRWhCQXNMSUFRRVFDQUNRY2kzQXlnQ0FDQURhMGtFUUNBRUlBTnFJZ2dnQkUwTkJpQUVLQUlZSVFrQ1FDQUVLQUlNSWdBZ0JFWUVRQ0FFUVJScUlnRW9BZ0FpQUVVRVFDQUVRUkJxSWdFb0FnQWlBRVVFUUVFQUlRQU1Bd3NMQTBBZ0FFRVVhaUlIS0FJQUlnWUVRQ0FHSVFBZ0J5RUJEQUVMSUFCQkVHb2lCeWdDQUNJR0JFQWdCaUVBSUFjaEFRd0JDd3NnQVVFQU5nSUFCU0FFS0FJSUlnRWdBRFlDRENBQUlBRTJBZ2dMQ3dKQUlBa0VRQ0FFSUFRb0Fod2lBVUVDZEVId3VRTnFJZ2NvQWdCR0JFQWdCeUFBTmdJQUlBQkZCRUJCeExjRElBVkJBU0FCZEVGL2MzRWlBRFlDQUF3REN3VWdDVUVRYWlBSktBSVFJQVJIUVFKMGFpQUFOZ0lBSUFCRkJFQWdCU0VBREFNTEN5QUFJQWsyQWhnZ0JDZ0NFQ0lCQkVBZ0FDQUJOZ0lRSUFFZ0FEWUNHQXNnQkNnQ0ZDSUJCRUFnQUNBQk5nSVVJQUVnQURZQ0dBc0xJQVVoQUFzQ1FDQUNRUkJKQkVBZ0JDQUNJQU5xSWdCQkEzSTJBZ1FnQkNBQWFrRUVhaUlBSUFBb0FnQkJBWEkyQWdBRklBUWdBMEVEY2pZQ0JDQUlJQUpCQVhJMkFnUWdDQ0FDYWlBQ05nSUFJQUpCQTNZaEFTQUNRWUFDU1FSQUlBRkJBM1JCNkxjRGFpRUFRY0MzQXlnQ0FDSUNRUUVnQVhRaUFYRUVmeUFBUVFocUlnSW9BZ0FGUWNDM0F5QUNJQUZ5TmdJQUlBQkJDR29oQWlBQUN5RUJJQUlnQ0RZQ0FDQUJJQWcyQWd3Z0NDQUJOZ0lJSUFnZ0FEWUNEQXdDQ3lBQ1FRaDJJZ0VFZnlBQ1FmLy8vd2RMQkg5Qkh3VWdBa0VPSUFFZ0FVR0EvajlxUVJCMlFRaHhJZ0YwSWdOQmdPQWZha0VRZGtFRWNTSUZJQUZ5SUFNZ0JYUWlBVUdBZ0E5cVFSQjJRUUp4SWdOeWF5QUJJQU4wUVE5MmFpSUJRUWRxZGtFQmNTQUJRUUYwY2dzRlFRQUxJZ0ZCQW5SQjhMa0RhaUVESUFnZ0FUWUNIQ0FJUVJCcUlnVkJBRFlDQkNBRlFRQTJBZ0FnQUVFQklBRjBJZ1Z4UlFSQVFjUzNBeUFBSUFWeU5nSUFJQU1nQ0RZQ0FDQUlJQU0yQWhnZ0NDQUlOZ0lNSUFnZ0NEWUNDQXdDQ3lBREtBSUFJUUJCR1NBQlFRRjJheUVESUFJZ0FVRWZSZ1IvUVFBRklBTUxkQ0VCQWtBRFFDQUFLQUlFUVhoeElBSkdEUUVnQVVFQmRDRURJQUJCRUdvZ0FVRWZka0VDZEdvaUFTZ0NBQ0lGQkVBZ0F5RUJJQVVoQUF3QkN3c2dBU0FJTmdJQUlBZ2dBRFlDR0NBSUlBZzJBZ3dnQ0NBSU5nSUlEQUlMSUFCQkNHb2lBU2dDQUNJQ0lBZzJBZ3dnQVNBSU5nSUFJQWdnQWpZQ0NDQUlJQUEyQWd3Z0NFRUFOZ0lZQ3dzZ0NpUUVJQVJCQ0dvUEJTQURJUUFMQlNBRElRQUxCU0FESVFBTEN3c0xRY2kzQXlnQ0FDSUNJQUJQQkVCQjFMY0RLQUlBSVFFZ0FpQUFheUlEUVE5TEJFQkIxTGNESUFFZ0FHb2lCVFlDQUVISXR3TWdBellDQUNBRklBTkJBWEkyQWdRZ0FTQUNhaUFETmdJQUlBRWdBRUVEY2pZQ0JBVkJ5TGNEUVFBMkFnQkIxTGNEUVFBMkFnQWdBU0FDUVFOeU5nSUVJQUVnQW1wQkJHb2lBQ0FBS0FJQVFRRnlOZ0lBQ3d3REMwSE10d01vQWdBaUFpQUFTd1JBUWN5M0F5QUNJQUJySWdJMkFnQU1BZ3RCbUxzREtBSUFCSDlCb0xzREtBSUFCVUdndXdOQmdDQTJBZ0JCbkxzRFFZQWdOZ0lBUWFTN0EwRi9OZ0lBUWFpN0EwRi9OZ0lBUWF5N0EwRUFOZ0lBUWZ5NkEwRUFOZ0lBUVppN0F5QUtRWEJ4UWRpcTFhb0ZjellDQUVHQUlBc2lBU0FBUVM5cUlnUnFJZ2RCQUNBQmF5SUdjU0lGSUFCTkRRQkIrTG9ES0FJQUlnRUVRRUh3dWdNb0FnQWlBeUFGYWlJSUlBTk5JQWdnQVV0eURRRUxJQUJCTUdvaENBSkFBa0JCL0xvREtBSUFRUVJ4QkVCQkFDRUNCUUpBQWtBQ1FFSFl0d01vQWdBaUFVVU5BRUdBdXdNaEF3TkFBa0FnQXlnQ0FDSUpJQUZOQkVBZ0NTQURRUVJxSWdrb0FnQnFJQUZMRFFFTElBTW9BZ2dpQXcwQkRBSUxDeUFISUFKcklBWnhJZ0pCLy8vLy93ZEpCRUFnQWhDSEFTSUJJQU1vQWdBZ0NTZ0NBR3BHQkVBZ0FVRi9SdzBHQlF3REN3VkJBQ0VDQ3d3Q0MwRUFFSWNCSWdGQmYwWUVRRUVBSVFJRlFaeTdBeWdDQUNJQ1FYOXFJZ01nQVdwQkFDQUNhM0VnQVdzaEFpQURJQUZ4Qkg4Z0FnVkJBQXNnQldvaUFrSHd1Z01vQWdBaUIyb2hBeUFDSUFCTElBSkIvLy8vL3dkSmNRUkFRZmk2QXlnQ0FDSUdCRUFnQXlBSFRTQURJQVpMY2dSQVFRQWhBZ3dGQ3dzZ0FoQ0hBU0lESUFGR0RRVWdBeUVCREFJRlFRQWhBZ3NMREFFTElBZ2dBa3NnQWtILy8vLy9CMGtnQVVGL1IzRnhSUVJBSUFGQmYwWUVRRUVBSVFJTUFnVU1CQXNBQ3lBRUlBSnJRYUM3QXlnQ0FDSURha0VBSUFOcmNTSURRZi8vLy84SFR3MENRUUFnQW1zaEJDQURFSWNCUVg5R0JFQWdCQkNIQVJwQkFDRUNCU0FESUFKcUlRSU1Bd3NMUWZ5NkEwSDh1Z01vQWdCQkJISTJBZ0FMSUFWQi8vLy8vd2RKQkVBZ0JSQ0hBU0lCUVFBUWh3RWlBMGtnQVVGL1J5QURRWDlIY1hFaEJTQURJQUZySWdNZ0FFRW9ha3NpQkFSQUlBTWhBZ3NnQVVGL1JpQUVRUUZ6Y2lBRlFRRnpja1VOQVFzTUFRdEI4TG9EUWZDNkF5Z0NBQ0FDYWlJRE5nSUFJQU5COUxvREtBSUFTd1JBUWZTNkF5QUROZ0lBQ3dKQVFkaTNBeWdDQUNJRUJFQkJnTHNESVFNQ1FBSkFBMEFnQVNBREtBSUFJZ1VnQTBFRWFpSUhLQUlBSWdacVJnMEJJQU1vQWdnaUF3MEFDd3dCQ3lBREtBSU1RUWh4UlFSQUlBRWdCRXNnQlNBRVRYRUVRQ0FISUFZZ0FtbzJBZ0JCekxjREtBSUFJQUpxSVFKQkFDQUVRUWhxSWdOclFRZHhJUUZCMkxjRElBUWdBMEVIY1FSL0lBRUZRUUFpQVF0cUlnTTJBZ0JCekxjRElBSWdBV3NpQVRZQ0FDQURJQUZCQVhJMkFnUWdCQ0FDYWtFb05nSUVRZHkzQTBHb3V3TW9BZ0EyQWdBTUJBc0xDeUFCUWRDM0F5Z0NBRWtFUUVIUXR3TWdBVFlDQUFzZ0FTQUNhaUVGUVlDN0F5RURBa0FDUUFOQUlBTW9BZ0FnQlVZTkFTQURLQUlJSWdNTkFFR0F1d01oQXdzTUFRc2dBeWdDREVFSWNRUkFRWUM3QXlFREJTQURJQUUyQWdBZ0EwRUVhaUlESUFNb0FnQWdBbW8yQWdCQkFDQUJRUWhxSWdKclFRZHhJUU5CQUNBRlFRaHFJZ2RyUVFkeElRa2dBU0FDUVFkeEJIOGdBd1ZCQUF0cUlnZ2dBR29oQmlBRklBZEJCM0VFZnlBSkJVRUFDMm9pQlNBSWF5QUFheUVISUFnZ0FFRURjallDQkFKQUlBUWdCVVlFUUVITXR3TkJ6TGNES0FJQUlBZHFJZ0EyQWdCQjJMY0RJQVkyQWdBZ0JpQUFRUUZ5TmdJRUJVSFV0d01vQWdBZ0JVWUVRRUhJdHdOQnlMY0RLQUlBSUFkcUlnQTJBZ0JCMUxjRElBWTJBZ0FnQmlBQVFRRnlOZ0lFSUFZZ0FHb2dBRFlDQUF3Q0N5QUZLQUlFSWdCQkEzRkJBVVlFZnlBQVFYaHhJUWtnQUVFRGRpRUNBa0FnQUVHQUFra0VRQ0FGS0FJTUlnQWdCU2dDQ0NJQlJnUkFRY0MzQTBIQXR3TW9BZ0JCQVNBQ2RFRi9jM0UyQWdBRklBRWdBRFlDRENBQUlBRTJBZ2dMQlNBRktBSVlJUVFDUUNBRktBSU1JZ0FnQlVZRVFDQUZRUkJxSWdGQkJHb2lBaWdDQUNJQUJFQWdBaUVCQlNBQktBSUFJZ0JGQkVCQkFDRUFEQU1MQ3dOQUlBQkJGR29pQWlnQ0FDSURCRUFnQXlFQUlBSWhBUXdCQ3lBQVFSQnFJZ0lvQWdBaUF3UkFJQU1oQUNBQ0lRRU1BUXNMSUFGQkFEWUNBQVVnQlNnQ0NDSUJJQUEyQWd3Z0FDQUJOZ0lJQ3dzZ0JFVU5BUUpBSUFVb0Fod2lBVUVDZEVId3VRTnFJZ0lvQWdBZ0JVWUVRQ0FDSUFBMkFnQWdBQTBCUWNTM0EwSEV0d01vQWdCQkFTQUJkRUYvYzNFMkFnQU1Bd1VnQkVFUWFpQUVLQUlRSUFWSFFRSjBhaUFBTmdJQUlBQkZEUU1MQ3lBQUlBUTJBaGdnQlVFUWFpSUNLQUlBSWdFRVFDQUFJQUUyQWhBZ0FTQUFOZ0lZQ3lBQ0tBSUVJZ0ZGRFFFZ0FDQUJOZ0lVSUFFZ0FEWUNHQXNMSUFVZ0NXb2hBQ0FKSUFkcUJTQUZJUUFnQndzaEJTQUFRUVJxSWdBZ0FDZ0NBRUYrY1RZQ0FDQUdJQVZCQVhJMkFnUWdCaUFGYWlBRk5nSUFJQVZCQTNZaEFTQUZRWUFDU1FSQUlBRkJBM1JCNkxjRGFpRUFRY0MzQXlnQ0FDSUNRUUVnQVhRaUFYRUVmeUFBUVFocUlnSW9BZ0FGUWNDM0F5QUNJQUZ5TmdJQUlBQkJDR29oQWlBQUN5RUJJQUlnQmpZQ0FDQUJJQVkyQWd3Z0JpQUJOZ0lJSUFZZ0FEWUNEQXdDQ3dKL0lBVkJDSFlpQUFSL1FSOGdCVUgvLy84SFN3MEJHaUFGUVE0Z0FDQUFRWUQrUDJwQkVIWkJDSEVpQUhRaUFVR0E0QjlxUVJCMlFRUnhJZ0lnQUhJZ0FTQUNkQ0lBUVlDQUQycEJFSFpCQW5FaUFYSnJJQUFnQVhSQkQzWnFJZ0JCQjJwMlFRRnhJQUJCQVhSeUJVRUFDd3NpQVVFQ2RFSHd1UU5xSVFBZ0JpQUJOZ0ljSUFaQkVHb2lBa0VBTmdJRUlBSkJBRFlDQUVIRXR3TW9BZ0FpQWtFQklBRjBJZ054UlFSQVFjUzNBeUFDSUFOeU5nSUFJQUFnQmpZQ0FDQUdJQUEyQWhnZ0JpQUdOZ0lNSUFZZ0JqWUNDQXdDQ3lBQUtBSUFJUUJCR1NBQlFRRjJheUVDSUFVZ0FVRWZSZ1IvUVFBRklBSUxkQ0VCQWtBRFFDQUFLQUlFUVhoeElBVkdEUUVnQVVFQmRDRUNJQUJCRUdvZ0FVRWZka0VDZEdvaUFTZ0NBQ0lEQkVBZ0FpRUJJQU1oQUF3QkN3c2dBU0FHTmdJQUlBWWdBRFlDR0NBR0lBWTJBZ3dnQmlBR05nSUlEQUlMSUFCQkNHb2lBU2dDQUNJQ0lBWTJBZ3dnQVNBR05nSUFJQVlnQWpZQ0NDQUdJQUEyQWd3Z0JrRUFOZ0lZQ3dzZ0NpUUVJQWhCQ0dvUEN3c0RRQUpBSUFNb0FnQWlCU0FFVFFSQUlBVWdBeWdDQkdvaUNDQUVTdzBCQ3lBREtBSUlJUU1NQVFzTFFRQWdDRUZSYWlJRFFRaHFJZ1ZyUVFkeElRY2dBeUFGUVFkeEJIOGdCd1ZCQUF0cUlnTWdCRUVRYWlJTVNRUi9JQVFpQXdVZ0F3dEJDR29oQmlBRFFSaHFJUVVnQWtGWWFpRUpRUUFnQVVFSWFpSUxhMEVIY1NFSFFkaTNBeUFCSUF0QkIzRUVmeUFIQlVFQUlnY0xhaUlMTmdJQVFjeTNBeUFKSUFkcklnYzJBZ0FnQ3lBSFFRRnlOZ0lFSUFFZ0NXcEJLRFlDQkVIY3R3TkJxTHNES0FJQU5nSUFJQU5CQkdvaUIwRWJOZ0lBSUFaQmdMc0RLUUlBTndJQUlBWkJpTHNES1FJQU53SUlRWUM3QXlBQk5nSUFRWVM3QXlBQ05nSUFRWXk3QTBFQU5nSUFRWWk3QXlBR05nSUFJQVVoQVFOQUlBRkJCR29pQWtFSE5nSUFJQUZCQ0dvZ0NFa0VRQ0FDSVFFTUFRc0xJQU1nQkVjRVFDQUhJQWNvQWdCQmZuRTJBZ0FnQkNBRElBUnJJZ2RCQVhJMkFnUWdBeUFITmdJQUlBZEJBM1loQWlBSFFZQUNTUVJBSUFKQkEzUkI2TGNEYWlFQlFjQzNBeWdDQUNJRFFRRWdBblFpQW5FRWZ5QUJRUWhxSWdNb0FnQUZRY0MzQXlBRElBSnlOZ0lBSUFGQkNHb2hBeUFCQ3lFQ0lBTWdCRFlDQUNBQ0lBUTJBZ3dnQkNBQ05nSUlJQVFnQVRZQ0RBd0RDeUFIUVFoMklnRUVmeUFIUWYvLy93ZExCSDlCSHdVZ0IwRU9JQUVnQVVHQS9qOXFRUkIyUVFoeElnRjBJZ0pCZ09BZmFrRVFka0VFY1NJRElBRnlJQUlnQTNRaUFVR0FnQTlxUVJCMlFRSnhJZ0p5YXlBQklBSjBRUTkyYWlJQlFRZHFka0VCY1NBQlFRRjBjZ3NGUVFBTElnSkJBblJCOExrRGFpRUJJQVFnQWpZQ0hDQUVRUUEyQWhRZ0RFRUFOZ0lBUWNTM0F5Z0NBQ0lEUVFFZ0FuUWlCWEZGQkVCQnhMY0RJQU1nQlhJMkFnQWdBU0FFTmdJQUlBUWdBVFlDR0NBRUlBUTJBZ3dnQkNBRU5nSUlEQU1MSUFFb0FnQWhBVUVaSUFKQkFYWnJJUU1nQnlBQ1FSOUdCSDlCQUFVZ0F3dDBJUUlDUUFOQUlBRW9BZ1JCZUhFZ0IwWU5BU0FDUVFGMElRTWdBVUVRYWlBQ1FSOTJRUUowYWlJQ0tBSUFJZ1VFUUNBRElRSWdCU0VCREFFTEN5QUNJQVEyQWdBZ0JDQUJOZ0lZSUFRZ0JEWUNEQ0FFSUFRMkFnZ01Bd3NnQVVFSWFpSUNLQUlBSWdNZ0JEWUNEQ0FDSUFRMkFnQWdCQ0FETmdJSUlBUWdBVFlDRENBRVFRQTJBaGdMQlVIUXR3TW9BZ0FpQTBVZ0FTQURTWElFUUVIUXR3TWdBVFlDQUF0QmdMc0RJQUUyQWdCQmhMc0RJQUkyQWdCQmpMc0RRUUEyQWdCQjVMY0RRWmk3QXlnQ0FEWUNBRUhndHdOQmZ6WUNBRUgwdHdOQjZMY0ROZ0lBUWZDM0EwSG90d00yQWdCQi9MY0RRZkMzQXpZQ0FFSDR0d05COExjRE5nSUFRWVM0QTBINHR3TTJBZ0JCZ0xnRFFmaTNBellDQUVHTXVBTkJnTGdETmdJQVFZaTRBMEdBdUFNMkFnQkJsTGdEUVlpNEF6WUNBRUdRdUFOQmlMZ0ROZ0lBUVp5NEEwR1F1QU0yQWdCQm1MZ0RRWkM0QXpZQ0FFR2t1QU5CbUxnRE5nSUFRYUM0QTBHWXVBTTJBZ0JCckxnRFFhQzRBellDQUVHb3VBTkJvTGdETmdJQVFiUzRBMEdvdUFNMkFnQkJzTGdEUWFpNEF6WUNBRUc4dUFOQnNMZ0ROZ0lBUWJpNEEwR3d1QU0yQWdCQnhMZ0RRYmk0QXpZQ0FFSEF1QU5CdUxnRE5nSUFRY3k0QTBIQXVBTTJBZ0JCeUxnRFFjQzRBellDQUVIVXVBTkJ5TGdETmdJQVFkQzRBMEhJdUFNMkFnQkIzTGdEUWRDNEF6WUNBRUhZdUFOQjBMZ0ROZ0lBUWVTNEEwSFl1QU0yQWdCQjRMZ0RRZGk0QXpZQ0FFSHN1QU5CNExnRE5nSUFRZWk0QTBIZ3VBTTJBZ0JCOUxnRFFlaTRBellDQUVId3VBTkI2TGdETmdJQVFmeTRBMEh3dUFNMkFnQkIrTGdEUWZDNEF6WUNBRUdFdVFOQitMZ0ROZ0lBUVlDNUEwSDR1QU0yQWdCQmpMa0RRWUM1QXpZQ0FFR0l1UU5CZ0xrRE5nSUFRWlM1QTBHSXVRTTJBZ0JCa0xrRFFZaTVBellDQUVHY3VRTkJrTGtETmdJQVFaaTVBMEdRdVFNMkFnQkJwTGtEUVppNUF6WUNBRUdndVFOQm1Ma0ROZ0lBUWF5NUEwR2d1UU0yQWdCQnFMa0RRYUM1QXpZQ0FFRzB1UU5CcUxrRE5nSUFRYkM1QTBHb3VRTTJBZ0JCdkxrRFFiQzVBellDQUVHNHVRTkJzTGtETmdJQVFjUzVBMEc0dVFNMkFnQkJ3TGtEUWJpNUF6WUNBRUhNdVFOQndMa0ROZ0lBUWNpNUEwSEF1UU0yQWdCQjFMa0RRY2k1QXpZQ0FFSFF1UU5CeUxrRE5nSUFRZHk1QTBIUXVRTTJBZ0JCMkxrRFFkQzVBellDQUVIa3VRTkIyTGtETmdJQVFlQzVBMEhZdVFNMkFnQkI3TGtEUWVDNUF6WUNBRUhvdVFOQjRMa0ROZ0lBSUFKQldHb2hBMEVBSUFGQkNHb2lCV3RCQjNFaEFrSFl0d01nQVNBRlFRZHhCSDhnQWdWQkFDSUNDMm9pQlRZQ0FFSE10d01nQXlBQ2F5SUNOZ0lBSUFVZ0FrRUJjallDQkNBQklBTnFRU2cyQWdSQjNMY0RRYWk3QXlnQ0FEWUNBQXNMUWN5M0F5Z0NBQ0lCSUFCTEJFQkJ6TGNESUFFZ0FHc2lBallDQUF3REN3dEJpTHdEUVF3MkFnQWdDaVFFUVFBUEN5QUtKQVJCQUE4TFFkaTNBMEhZdHdNb0FnQWlBU0FBYWlJRE5nSUFJQU1nQWtFQmNqWUNCQ0FCSUFCQkEzSTJBZ1FMSUFva0JDQUJRUWhxQzhFU0FTZC9Jd1FoQWlNRVFZQUJhaVFFSUFKQlFHc2lBeUFCTFFBQlFRaDBJQUV0QUFCeUlBRXRBQUpCRUhSeUlBRXRBQU5CR0hSeU5nSUFJQU1nQVMwQUJVRUlkQ0FCTFFBRWNpQUJMUUFHUVJCMGNpQUJMUUFIUVJoMGNqWUNCQ0FESUFFdEFBbEJDSFFnQVMwQUNISWdBUzBBQ2tFUWRISWdBUzBBQzBFWWRISTJBZ2dnQXlBQkxRQU5RUWgwSUFFdEFBeHlJQUV0QUE1QkVIUnlJQUV0QUE5QkdIUnlOZ0lNSUFNZ0FTMEFFVUVJZENBQkxRQVFjaUFCTFFBU1FSQjBjaUFCTFFBVFFSaDBjallDRUNBRElBRXRBQlZCQ0hRZ0FTMEFGSElnQVMwQUZrRVFkSElnQVMwQUYwRVlkSEkyQWhRZ0F5QUJMUUFaUVFoMElBRXRBQmh5SUFFdEFCcEJFSFJ5SUFFdEFCdEJHSFJ5TmdJWUlBTWdBUzBBSFVFSWRDQUJMUUFjY2lBQkxRQWVRUkIwY2lBQkxRQWZRUmgwY2pZQ0hDQURJQUV0QUNGQkNIUWdBUzBBSUhJZ0FTMEFJa0VRZEhJZ0FTMEFJMEVZZEhJMkFpQWdBeUFCTFFBbFFRaDBJQUV0QUNSeUlBRXRBQ1pCRUhSeUlBRXRBQ2RCR0hSeU5nSWtJQU1nQVMwQUtVRUlkQ0FCTFFBb2NpQUJMUUFxUVJCMGNpQUJMUUFyUVJoMGNqWUNLQ0FESUFFdEFDMUJDSFFnQVMwQUxISWdBUzBBTGtFUWRISWdBUzBBTDBFWWRISTJBaXdnQXlBQkxRQXhRUWgwSUFFdEFEQnlJQUV0QURKQkVIUnlJQUV0QUROQkdIUnlOZ0l3SUFNZ0FTMEFOVUVJZENBQkxRQTBjaUFCTFFBMlFSQjBjaUFCTFFBM1FSaDBjallDTkNBRElBRXRBRGxCQ0hRZ0FTMEFPSElnQVMwQU9rRVFkSElnQVMwQU8wRVlkSEkyQWpnZ0F5QUJMUUE5UVFoMElBRXRBRHh5SUFFdEFENUJFSFJ5SUFFdEFEOUJHSFJ5TmdJOElBSWlCU0FBUWZRQmFpSWpLQUlBSWdJb0FnQWlERFlDQUNBRlFRUnFJaFVnQWlnQ0JDSUtOZ0lBSUFWQkNHb2lGaUFDS0FJSUlnWTJBZ0FnQlVFTWFpSVhJQUlvQWd3aUFUWUNBQ0FGUVJCcUloZ2dBaWdDRUNJTE5nSUFJQVZCRkdvaUdTQUNLQUlVSWc4MkFnQWdCVUVZYWlJa0lBSW9BaGdpRFRZQ0FDQUZRUnhxSWlVZ0FpZ0NIQ0lJTmdJQUlBVkJJR29pSmtIbnpLZlFCallDQUNBRlFTUnFJaHBCaGQyZTIzczJBZ0FnQlVFb2FpSWJRZkxtdStNRE5nSUFJQVZCTEdvaUhFRzY2citxZWpZQ0FDQUZRVEJxSWgwZ0FDZ0MrQUVpQWlnQ0FFSC9wTG1JQlhNaUJ6WUNBQ0FGUVRScUloNGdBaWdDQkVHTTBaWFllWE1pQ1RZQ0FDQUZRVGhxSWljZ0FDZ0MvQUVpQUNnQ0FFR3JzNC84QVhNaUFqWUNBQ0FGUVR4cUlpZ2dBQ2dDQkVHWm1vUGZCWE1pQURZQ0FFSG56S2ZRQmlFUVFZWGRudHQ3SVJKQjh1YTc0d01oRTBHNjZyK3FlaUVVQTBBZ0N5QUhJQXNnREdvZ0F5QUVRUVIwUWZjdWFpMEFBRUVDZEdvb0FnQnFJZzV6SWdkQkVIUWdCMEVRZG5JaUN5QVFhaUlNY3lJSFFSUjBJQWRCREhaeUlnY2dEbW9nQXlBRVFRUjBRZmd1YWkwQUFFRUNkR29vQWdCcUlSRWdCeUFMSUJGeklnZEJHSFFnQjBFSWRuSWlEaUFNYWlJUWN5SUhRUmwwSUFkQkIzWnlJUjhnRHlBSklBOGdDbW9nQXlBRVFRUjBRZmt1YWkwQUFFRUNkR29vQWdCcUlncHpJZ2xCRUhRZ0NVRVFkbklpQ3lBU2FpSVBjeUlKUVJSMElBbEJESFp5SWd3Z0Ntb2dBeUFFUVFSMFFmb3VhaTBBQUVFQ2RHb29BZ0JxSVNBZ0RTQUNJQTBnQm1vZ0F5QUVRUVIwUWZzdWFpMEFBRUVDZEdvb0FnQnFJZ3B6SWdKQkVIUWdBa0VRZG5JaUNTQVRhaUlHY3lJQ1FSUjBJQUpCREhaeUlnSWdDbW9nQXlBRVFRUjBRZnd1YWkwQUFFRUNkR29vQWdCcUlTRWdBaUFKSUNGeklnSkJHSFFnQWtFSWRuSWlFaUFHYWlJSGN5SUNRUmwwSUFKQkIzWnlJUTBnQ0NBQUlBZ2dBV29nQXlBRVFRUjBRZjB1YWkwQUFFRUNkR29vQWdCcUlnWnpJZ0JCRUhRZ0FFRVFkbklpQVNBVWFpSUNjeUlBUVJSMElBQkJESFp5SWdBZ0Jtb2dBeUFFUVFSMFFmNHVhaTBBQUVFQ2RHb29BZ0JxSVNJZ0FDQUJJQ0p6SWdCQkdIUWdBRUVJZG5JaUFTQUNhaUlLY3lJQVFSbDBJQUJCQjNaeUlRZ2dBU0FNSUFzZ0lITWlBRUVZZENBQVFRaDJjaUlKSUE5cUlndHpJZ0JCR1hRZ0FFRUhkbklpQVNBUmFpQURJQVJCQkhSQi95NXFMUUFBUVFKMGFpZ0NBR29pQW5NaUFFRVFkQ0FBUVJCMmNpSUFJQWRxSVFZZ0FDQUJJQVp6SWdCQkZIUWdBRUVNZG5JaUFTQUNhaUFESUFSQkJIUkJnQzlxTFFBQVFRSjBhaWdDQUdvaURITWlBRUVZZENBQVFRaDJjaUlSSUFacUlSTWdBU0FUY3lJQVFSbDBJQUJCQjNaeUlROGdEU0FPSUEwZ0lHb2dBeUFFUVFSMFFZRXZhaTBBQUVFQ2RHb29BZ0JxSWdaeklnQkJFSFFnQUVFUWRuSWlBaUFLYWlJQmN5SUFRUlIwSUFCQkRIWnlJZ0FnQm1vZ0F5QUVRUVIwUVlJdmFpMEFBRUVDZEdvb0FnQnFJUW9nQUNBQ0lBcHpJZ0JCR0hRZ0FFRUlkbklpQnlBQmFpSVVjeUlBUVJsMElBQkJCM1p5SVEwZ0NDQUpJQWdnSVdvZ0F5QUVRUVIwUVlNdmFpMEFBRUVDZEdvb0FnQnFJZ1p6SWdCQkVIUWdBRUVRZG5JaUFpQVFhaUlCY3lJQVFSUjBJQUJCREhaeUlnQWdCbW9nQXlBRVFRUjBRWVF2YWkwQUFFRUNkR29vQWdCcUlRWWdBQ0FDSUFaeklnQkJHSFFnQUVFSWRuSWlDU0FCYWlJUWN5SUFRUmwwSUFCQkIzWnlJUTRnSHlBU0lCOGdJbW9nQXlBRVFRUjBRWVV2YWkwQUFFRUNkR29vQWdCcUlnaHpJZ0JCRUhRZ0FFRVFkbklpQWlBTGFpSUJjeUlBUVJSMElBQkJESFp5SWdBZ0NHb2dBeUFFUVFSMFFZWXZhaTBBQUVFQ2RHb29BZ0JxSVFnZ0FDQUNJQWh6SWdCQkdIUWdBRUVJZG5JaUFpQUJhaUlCY3lJQVFSbDBJQUJCQjNaeUlRc2dCRUVCYWlJQVFRcEhCRUFnQUNFRUlBRWhFaUFJSVFFZ0RpRUlJQkVoQUF3QkN3c2dCU0FNTmdJQUlCZ2dDellDQUNBZElBYzJBZ0FnSmlBUU5nSUFJQlVnQ2pZQ0FDQVpJQTgyQWdBZ0hpQUpOZ0lBSUJvZ0FUWUNBQ0FXSUFZMkFnQWdKQ0FOTmdJQUlDY2dBallDQUNBYklCTTJBZ0FnRnlBSU5nSUFJQ1VnRGpZQ0FDQW9JQkUyQWdBZ0hDQVVOZ0lBSUNNb0FnQWlBU0FNSUFFb0FnQnpJQkJ6TmdJQUlBRkJCR29pQUNBVktBSUFJQUFvQWdCeklCb29BZ0J6TmdJQUlBRkJDR29pQUNBV0tBSUFJQUFvQWdCeklCc29BZ0J6TmdJQUlBRkJER29pQUNBWEtBSUFJQUFvQWdCeklCd29BZ0J6TmdJQUlBRkJFR29pQUNBWUtBSUFJQUFvQWdCeklCMG9BZ0J6TmdJQUlBRkJGR29pQUNBWktBSUFJQUFvQWdCeklCNG9BZ0J6TmdJQUlBRkJHR29pQUNBTklBQW9BZ0J6SUFKek5nSUFJQUZCSEdvaUFDQU9JQUFvQWdCeklCRnpOZ0lBSUFVa0JBdUJBUUVEZndKQUlBQWlBa0VEY1FSQUlBSWhBUU5BSUFFc0FBQkZEUUlnQVVFQmFpSUJJZ0JCQTNFTkFDQUJJUUFMQ3dOQUlBQkJCR29oQVNBQUtBSUFJZ05CZ0lHQ2hIaHhRWUNCZ29SNGN5QURRZi85KzNkcWNVVUVRQ0FCSVFBTUFRc0xJQU5CL3dGeEJFQURRQ0FBUVFGcUlnQXNBQUFOQUFzTEN5QUFJQUpyQ3lzQkFYOGdBa1VFUUNBQUR3c2dBQ0FCSUFKQmYyb2lBeEN1QVJvZ0FDQURRUUowYWtFQU5nSUFJQUFMZHdFQ2Z5QUFRY1FkTmdJQUlBQkJCR29pQWlnQ0FDSUJSUVJBRHdzZ0FDd0FFQVJBRHdzZ0FDd0FFZ1JBUVFBa0JTTUZJUUJCQUNRRklBQkJBWEZGQkVBUEN3VkJBQ1FGUVN3Z0FSQU1Jd1VoQVVFQUpBVWdBVUVCY1VVRVFDQUNRUUEyQWdBZ0FFRUFOZ0lNRHdzTFFRQVFHQ0lBRUZvTGhRc0JGbjhnQUVIZ2x3RnFJaFFvQWdBaUF5QUFRY2dNYWlJUEtBSUFJZ1JQQkVCQmZ3OExJQUJCNkpjQmFpSUZLQUlBSWdJZ0JFa0VRRUYvRHdzZ0JDNEJBRUVCUmdSQUlBUWdBQkNKQkFVZ0JDZ0NDQ0lCSUFOTklBRWdBa3R5QkVCQmZ3OExJQVFnQUJDS0JFVUVRRUYvRHdzTElBQkI5SlFCYWlJSUtBSUFJQUJCZ0pVQmFpSUpLQUlBSWdJZ0FFSDhsQUZxSWdZb0FnQWlBV3hxSVFNZ0NDQUROZ0lBSUFZZ0FFR0VsUUZxSWd3b0FnQWdBbXNnQVd3aUFqWUNBQUpBSUFCQjFBeHFJaEFvQWdBaUFRUkFJQUJCNEF4cUlRTUZJQUJCK0pRQmFpRVZJQUJCakpVQmFpRVJJQUJCNEF4cUlRUWdBRUhZREdvaEJ5QURJUUVDUUFKQUEwQUNRQU5BQWtBZ0FpQUJhaUFCYzBHQWdJQUlUd1JBSUFKQmdJQUNUdzBCSUFaQkFDQUJhMEgvL3dGeE5nSUFDeUFWS0FJQUlSTWdFU2dDQUNJS1FRUnFJaElvQWdBaUFVSGkvd0ZLQkVBZ0NrSG9BR29pQ3lnQ0FDQUJheUlOUVFCT0JFQWdDa0h3QUdvaUZpQUtRZmdBYWlJT0tBSUFJQUZySUJZb0FnQnFOZ0lBQWtBQ1FDQU5CRUFnQ2tFUWFpSUNLQUlBSWdNZ0F5QUJhaUFORUYwYUlCSkJBRFlDQUNBTElBMDJBZ0FnRFVHQWdBSkhEUUZCZ0lBQ0lRRUZJQkpCQURZQ0FDQUxRUUEyQWdBZ0NrRVFhaUVDREFFTERBRUxJQW9vQWdBZ0FpZ0NBQ0FOYWtHQWdBSWdEV3NRWGlFRElBc29BZ0FpQVNBRGFpRUNJQU5CQUVvRVFDQUxJQUkyQWdBZ0FpRUJDd3NnQ2tIc0FHb2lBeUFCUVdKcUlnczJBZ0FnRGlBU0tBSUFJZ0UyQWdBZ0FVRi9haUFXS0FJQUlnSnFJUTRnQWtGL1J3UkFJQU1nQ3lBT1NBUi9JQXNGSUE0TE5nSUFDd3NMSUFvb0FoQWhBaUFTSUFGQkFXbzJBZ0FnRlNBVFFRaDBJQUlnQVdvdEFBQnlOZ0lBSUFZZ0JpZ0NBRUVJZENJQ05nSUFJQWdnQ0NnQ0FFRUlkQ0lCTmdJQURBRUxDeUFVS0FJQUlRTWdCQ2dDQUNFQ0lBOG9BZ0FoQVFOQUlBSkJBV29oQWlBRElBRW9BZ3dpQVU4TkFTQUZLQUlBSUFGSkRRRWdCeWdDQUNBQkx3RUFSZzBBQ3lBRUlBSTJBZ0FnRHlBQk5nSUFJQUVnQUJDSUJFVUVRRUYvSVFJTUF3c2dDQ0FJS0FJQUlBa29BZ0FpQXlBR0tBSUFJZ0pzYWlJQk5nSUFJQVlnRENnQ0FDQURheUFDYkNJQ05nSUFJQkFvQWdBaUEwVU5BU0FESVFFZ0JDRUREQVVMQ3d3QkMwRi9Ed3NnQkNBQ05nSUFJQThnQVRZQ0FFRi9Ed3NMSUFFdEFBQWhBZ0pBQWtBZ0F5Z0NBQTBBSUJRb0FnQWdBU2dDQkNJQlR3MEFJQUJCMEF4cUlBRTJBZ0FnRHlBQk5nSUFEQUVMSUFBUWh3UWdBRUh3RkdvaUFTd0FBRVVFUUNBQlFRRTZBQUFnQUVId0RHcEJBRUdBQWhCVUdnc0xJQUJCK0pRQmFpRVFJQUJCakpVQmFpRVRJQWdvQWdBaEFDQUdLQUlBSVFFRFFBSkFJQUVnQUdvZ0FITkJnSUNBQ0U4RVFDQUJRWUNBQWs4TkFTQUdRUUFnQUd0Qi8vOEJjVFlDQUFzZ0VDZ0NBQ0VPSUJNb0FnQWlCVUVFYWlJTUtBSUFJZ0JCNHY4QlNnUkFJQVZCNkFCcUlnY29BZ0FnQUdzaUNVRUFUZ1JBSUFWQjhBQnFJaEVnQlVINEFHb2lCQ2dDQUNBQWF5QVJLQUlBYWpZQ0FBSkFBa0FnQ1FSQUlBVkJFR29pQVNnQ0FDSURJQU1nQUdvZ0NSQmRHaUFNUVFBMkFnQWdCeUFKTmdJQUlBbEJnSUFDUncwQlFZQ0FBaUVBQlNBTVFRQTJBZ0FnQjBFQU5nSUFJQVZCRUdvaEFRd0JDd3dCQ3lBRktBSUFJQUVvQWdBZ0NXcEJnSUFDSUFsckVGNGhBeUFIS0FJQUlnQWdBMm9oQVNBRFFRQktCRUFnQnlBQk5nSUFJQUVoQUFzTElBVkI3QUJxSWdNZ0FFRmlhaUlITmdJQUlBUWdEQ2dDQUNJQU5nSUFJQUJCZjJvZ0VTZ0NBQ0lCYWlFRUlBRkJmMGNFUUNBRElBY2dCRWdFZnlBSEJTQUVDellDQUFzTEN5QUZLQUlRSVFFZ0RDQUFRUUZxTmdJQUlCQWdEa0VJZENBQklBQnFMUUFBY2pZQ0FDQUdJQVlvQWdCQkNIUWlBVFlDQUNBSUlBZ29BZ0JCQ0hRaUFEWUNBQXdCQ3dzZ0FndktBUUVDZndKQUlBQVFXQ0lCUVlDQUEzRWlBa0VRZEVFUWRVRUFTQVJBSUFKQkVIUkJFSFZCZ0lCK2F3MEJJQUJCQWhCVklBQVFXQ0VCSUFCQkVCQlZJQUVQQlNBQ1FSQjBRUkIxUVlDQUFVZ0VRQ0FDRFFJZ0FFRUdFRlVnQVVFS2RrRVBjUThMSUFKQkVIUkJFSFZCZ0lBQmF3MEJJQUZCZ1BnQWNRUkFJQUJCQ2hCVklBRkJCblpCL3dGeER3VWdBRUVPRUZVZ0FVRUNka0dBZm5JUEN3QUxBQXNnQUVFQ0VGVWdBQkJZUVJCMElRRWdBRUVRRUZVZ0FCQllJQUZ5SVFFZ0FFRVFFRlVnQVF0ZUFRSi9JQUVvQWdBaUFrVWdBQ2dDQUNJRFJTQURJQUpIY25JRVFDQUNJUUFnQXlFQkJRTkFJQUZCQkdvaUFTZ0NBQ0lDUlNBQVFRUnFJZ0FvQWdBaUEwVWdBeUFDUjNKeUJFQWdBaUVBSUFNaEFRVU1BUXNMQ3lBQklBQnJDMFFCQW44Z0FRUkFBMEFnQUVFRWFpRURJQUFvQWdBaUFrVWdBaUFCUm5KRkJFQWdBeUVBREFFTEN5QUNSUVJBUVFBaEFBc0ZJQUFnQUJCWlFRSjBhaUVBQ3lBQUM5Z0VBUUYvSUFBb0FvQUJJQUZMQkVBZ0FDZ0NBQ0FCYWc4TEFrQWdBQ2dDaEFFZ0FVc0VRRUVCSVFJRklBQW9Bb2dCSUFGTEJFQkJBaUVDQlNBQUtBS01BU0FCU3dSQVFRTWhBZ1VnQUNnQ2tBRWdBVXNFUUVFRUlRSUZJQUFvQXBRQklBRkxCRUJCQlNFQ0JTQUFLQUtZQVNBQlN3UkFRUVloQWdVZ0FDZ0NuQUVnQVVzRVFFRUhJUUlGSUFBb0FxQUJJQUZMQkVCQkNDRUNCU0FBS0FLa0FTQUJTd1JBUVFraEFnVWdBQ2dDcUFFZ0FVc0VRRUVLSVFJRklBQW9BcXdCSUFGTEJFQkJDeUVDQlNBQUtBS3dBU0FCU3dSQVFRd2hBZ1VnQUNnQ3RBRWdBVXNFUUVFTklRSUZJQUFvQXJnQklBRkxCRUJCRGlFQ0JTQUFLQUs4QVNBQlN3UkFRUThoQWdVZ0FDZ0N3QUVnQVVzRVFFRVFJUUlGSUFBb0FzUUJJQUZMQkVCQkVTRUNCU0FBS0FMSUFTQUJTd1JBUVJJaEFnVWdBQ2dDekFFZ0FVc0VRRUVUSVFJTUV3c2dBQ2dDMEFFZ0FVc0VRRUVVSVFJTUV3c2dBQ2dDMUFFZ0FVc0VRRUVWSVFJTUV3c2dBQ2dDMkFFZ0FVc0VRRUVXSVFJTUV3c2dBQ2dDM0FFZ0FVc0VRRUVYSVFJTUV3c2dBQ2dDNEFFZ0FVc0VRRUVZSVFJTUV3c2dBQ2dDNUFFZ0FVc0VRRUVaSVFJTUV3c2dBQ2dDNkFFZ0FVc0VRRUVhSVFJTUV3c2dBQ2dDN0FFZ0FVc0VRRUViSVFJTUV3c2dBQ2dDOEFFZ0FVc0VRRUVjSVFJTUV3c2dBQ2dDOUFFZ0FVc0VRRUVkSVFJTUV3c2dBQ2dDK0FFZ0FVc0VRRUVlSVFJTUV3c2dBQ2dDL0FFZ0FVc0VRRUVmSVFJTUV3c2dBQ2dDQUE4TEN3c0xDd3NMQ3dzTEN3c0xDd3NMQ3dzTElBQWdBa0VDZEdvb0FnQWdBU0FBSUFKQkFuUnFLQUo4YTJvTDdRTUJCMzhnQUVIZ0FHb2lCaWdDQUNJRUlBSnJJZ01nQUVITXpRTnFLQUlBUWY5ZmFpSUZTU0FFSUFWSmNVVUVRQ0FCUlFSQUR3c2dBRUdrbGdGcUlRY2dBeUVDSUFCQjBNMERhaUlJS0FJQUlRTWdCQ0VBQTBBZ0FrRUJhaUVFSUFjb0FnQWlCU0FBYWlBRklBTWdBbkZxTEFBQU9nQUFJQVlnQmlnQ0FFRUJhaUFJS0FJQUlnTnhJZ0EyQWdBZ0FVRi9haUlCQkVBZ0JDRUNEQUVMQ3c4TElBQkJwSllCYWlnQ0FDSUpJQU5xSVFNZ0NTQUVhaUVBSUFZZ0JDQUJhallDQUNBQlFRZExCRUFnQ1NBRUlBRkJlR29pQjBGNGNTSUlha0VJYWlJRklBSnJhaUVFSUFNaEFnTkFJQUFnQWl3QUFEb0FBQ0FBSUFJc0FBRTZBQUVnQUNBQ0xBQUNPZ0FDSUFBZ0Fpd0FBem9BQXlBQUlBSXNBQVE2QUFRZ0FDQUNMQUFGT2dBRklBQWdBaXdBQmpvQUJpQUFJQUlzQUFjNkFBY2dBa0VJYWlFQ0lBQkJDR29oQUNBQlFYaHFJZ0ZCQjBzTkFBc2dDU0FGYWlFQUlBUWhBeUFISUFocklRRUxJQUZGQkVBUEN5QUFJQU1zQUFBNkFBQWdBVUVCUmdSQUR3c2dBQ0FETEFBQk9nQUJJQUZCQWswRVFBOExJQUFnQXl3QUFqb0FBaUFCUVFOR0JFQVBDeUFBSUFNc0FBTTZBQU1nQVVFRVRRUkFEd3NnQUNBRExBQUVPZ0FFSUFGQkJVWUVRQThMSUFBZ0F5d0FCVG9BQlNBQlFRWk5CRUFQQ3lBQUlBTXNBQVk2QUFZTGh4QUJCSDhqQkNFRkl3UkJnQWhxSkFRZ0JVR0FCR29oQWlBQUxBQ0FCQVIvSUFJZ0FFR0FCQkJUR2lNRUlRQWpCRUVRYWlRRVFSUWdBQkFsSVFNZ0FDUUVJQU5CeXdCcUlRUkJBQ0VBQTBBZ0FpQUFhaUlESUFRZ0FHb2dBeTBBQUhNNkFBQWdBRUVCYWlJQVFZQUVSdzBBQ3lBQ1Fmd0RhZ1VnQWdzaEF5QUZJUUFnQTBFQU5nSUFJQUVzQUlBRUJIOGdBQ0FCUVlBRUVGTWFJd1FoQVNNRVFSQnFKQVJCRkNBQkVDVWhBeUFCSkFRZ0EwSExBR29oQkVFQUlRRURRQ0FBSUFGcUlnTWdCQ0FCYWlBRExRQUFjem9BQUNBQlFRRnFJZ0ZCZ0FSSERRQUxJQUJCL0FOcUJTQUFDMEVBTmdJQUlBSWdBQkJ6SVFFZ0FrRUFPZ0FBSUFKQkFEb0FBU0FDUVFBNkFBSWdBa0VBT2dBRElBSkJBRG9BQkNBQ1FRQTZBQVVnQWtFQU9nQUdJQUpCQURvQUJ5QUNRUUE2QUFnZ0FrRUFPZ0FKSUFKQkFEb0FDaUFDUVFBNkFBc2dBa0VBT2dBTUlBSkJBRG9BRFNBQ1FRQTZBQTRnQWtFQU9nQVBJQUpCQURvQUVDQUNRUUE2QUJFZ0FrRUFPZ0FTSUFKQkFEb0FFeUFDUVFBNkFCUWdBa0VBT2dBVklBSkJBRG9BRmlBQ1FRQTZBQmNnQWtFQU9nQVlJQUpCQURvQUdTQUNRUUE2QUJvZ0FrRUFPZ0FiSUFKQkFEb0FIQ0FDUVFBNkFCMGdBa0VBT2dBZUlBSkJBRG9BSHlBQ1FRQTZBQ0FnQWtFQU9nQWhJQUpCQURvQUlpQUNRUUE2QUNNZ0FrRUFPZ0FrSUFKQkFEb0FKU0FDUVFBNkFDWWdBa0VBT2dBbklBSkJBRG9BS0NBQ1FRQTZBQ2tnQWtFQU9nQXFJQUpCQURvQUt5QUNRUUE2QUN3Z0FrRUFPZ0F0SUFKQkFEb0FMaUFDUVFBNkFDOGdBa0VBT2dBd0lBSkJBRG9BTVNBQ1FRQTZBRElnQWtFQU9nQXpJQUpCQURvQU5DQUNRUUE2QURVZ0FrRUFPZ0EySUFKQkFEb0FOeUFDUVFBNkFEZ2dBa0VBT2dBNUlBSkJBRG9BT2lBQ1FRQTZBRHNnQWtFQU9nQThJQUpCQURvQVBTQUNRUUE2QUQ0Z0FrRUFPZ0EvSUFKQlFHdEJBRG9BQUNBQ1FRQTZBRUVnQWtFQU9nQkNJQUpCQURvQVF5QUNRUUE2QUVRZ0FrRUFPZ0JGSUFKQkFEb0FSaUFDUVFBNkFFY2dBa0VBT2dCSUlBSkJBRG9BU1NBQ1FRQTZBRW9nQWtFQU9nQkxJQUpCQURvQVRDQUNRUUE2QUUwZ0FrRUFPZ0JPSUFKQkFEb0FUeUFDUVFBNkFGQWdBa0VBT2dCUklBSkJBRG9BVWlBQ1FRQTZBRk1nQWtFQU9nQlVJQUpCQURvQVZTQUNRUUE2QUZZZ0FrRUFPZ0JYSUFKQkFEb0FXQ0FDUVFBNkFGa2dBa0VBT2dCYUlBSkJBRG9BV3lBQ1FRQTZBRndnQWtFQU9nQmRJQUpCQURvQVhpQUNRUUE2QUY4Z0FrRUFPZ0JnSUFKQkFEb0FZU0FDUVFBNkFHSWdBa0VBT2dCaklBSkJBRG9BWkNBQ1FRQTZBR1VnQWtFQU9nQm1JQUpCQURvQVp5QUNRUUE2QUdnZ0FrRUFPZ0JwSUFKQkFEb0FhaUFDUVFBNkFHc2dBa0VBT2dCc0lBSkJBRG9BYlNBQ1FRQTZBRzRnQWtFQU9nQnZJQUpCQURvQWNDQUNRUUE2QUhFZ0FrRUFPZ0J5SUFKQkFEb0FjeUFDUVFBNkFIUWdBa0VBT2dCMUlBSkJBRG9BZGlBQ1FRQTZBSGNnQWtFQU9nQjRJQUpCQURvQWVTQUNRUUE2QUhvZ0FrRUFPZ0I3SUFKQkFEb0FmQ0FDUVFBNkFIMGdBa0VBT2dCK0lBSkJBRG9BZnlBQVFRQTZBQUFnQUVFQU9nQUJJQUJCQURvQUFpQUFRUUE2QUFNZ0FFRUFPZ0FFSUFCQkFEb0FCU0FBUVFBNkFBWWdBRUVBT2dBSElBQkJBRG9BQ0NBQVFRQTZBQWtnQUVFQU9nQUtJQUJCQURvQUN5QUFRUUE2QUF3Z0FFRUFPZ0FOSUFCQkFEb0FEaUFBUVFBNkFBOGdBRUVBT2dBUUlBQkJBRG9BRVNBQVFRQTZBQklnQUVFQU9nQVRJQUJCQURvQUZDQUFRUUE2QUJVZ0FFRUFPZ0FXSUFCQkFEb0FGeUFBUVFBNkFCZ2dBRUVBT2dBWklBQkJBRG9BR2lBQVFRQTZBQnNnQUVFQU9nQWNJQUJCQURvQUhTQUFRUUE2QUI0Z0FFRUFPZ0FmSUFCQkFEb0FJQ0FBUVFBNkFDRWdBRUVBT2dBaUlBQkJBRG9BSXlBQVFRQTZBQ1FnQUVFQU9nQWxJQUJCQURvQUppQUFRUUE2QUNjZ0FFRUFPZ0FvSUFCQkFEb0FLU0FBUVFBNkFDb2dBRUVBT2dBcklBQkJBRG9BTENBQVFRQTZBQzBnQUVFQU9nQXVJQUJCQURvQUx5QUFRUUE2QURBZ0FFRUFPZ0F4SUFCQkFEb0FNaUFBUVFBNkFETWdBRUVBT2dBMElBQkJBRG9BTlNBQVFRQTZBRFlnQUVFQU9nQTNJQUJCQURvQU9DQUFRUUE2QURrZ0FFRUFPZ0E2SUFCQkFEb0FPeUFBUVFBNkFEd2dBRUVBT2dBOUlBQkJBRG9BUGlBQVFRQTZBRDhnQUVGQWEwRUFPZ0FBSUFCQkFEb0FRU0FBUVFBNkFFSWdBRUVBT2dCRElBQkJBRG9BUkNBQVFRQTZBRVVnQUVFQU9nQkdJQUJCQURvQVJ5QUFRUUE2QUVnZ0FFRUFPZ0JKSUFCQkFEb0FTaUFBUVFBNkFFc2dBRUVBT2dCTUlBQkJBRG9BVFNBQVFRQTZBRTRnQUVFQU9nQlBJQUJCQURvQVVDQUFRUUE2QUZFZ0FFRUFPZ0JTSUFCQkFEb0FVeUFBUVFBNkFGUWdBRUVBT2dCVklBQkJBRG9BVmlBQVFRQTZBRmNnQUVFQU9nQllJQUJCQURvQVdTQUFRUUE2QUZvZ0FFRUFPZ0JiSUFCQkFEb0FYQ0FBUVFBNkFGMGdBRUVBT2dCZUlBQkJBRG9BWHlBQVFRQTZBR0FnQUVFQU9nQmhJQUJCQURvQVlpQUFRUUE2QUdNZ0FFRUFPZ0JrSUFCQkFEb0FaU0FBUVFBNkFHWWdBRUVBT2dCbklBQkJBRG9BYUNBQVFRQTZBR2tnQUVFQU9nQnFJQUJCQURvQWF5QUFRUUE2QUd3Z0FFRUFPZ0J0SUFCQkFEb0FiaUFBUVFBNkFHOGdBRUVBT2dCd0lBQkJBRG9BY1NBQVFRQTZBSElnQUVFQU9nQnpJQUJCQURvQWRDQUFRUUE2QUhVZ0FFRUFPZ0IySUFCQkFEb0FkeUFBUVFBNkFIZ2dBRUVBT2dCNUlBQkJBRG9BZWlBQVFRQTZBSHNnQUVFQU9nQjhJQUJCQURvQWZTQUFRUUE2QUg0Z0FFRUFPZ0IvSUFBa0JDQUJSUXNsQVFGL0lBSWdBQkJaYTBGL2FpSURRUUJNQkVBZ0FBOExJQUFnQVNBREVMSURHaUFBQ3hZQUlBQkJBRUhBeXdRUVZCb2dBRUdvd0FKcUVGd0xiUUVFZnlBQUtBSVVJQUJCR0dvaUJDZ0NBQ0lGYXlJRElBSkpJZ1lFZnlBREJTQUNJZ01MQkVBZ0FTQUFLQUlBSUFWcUlBTVFVeG9MSUFaRkJFQWdCQ0FFS0FJQUlBTnFOZ0lBSUFNUEN5QUJJQU5xUVFBZ0FpQURheEJVR2lBRUlBUW9BZ0FnQTJvMkFnQWdBd3VlQXdFSWZ5TUVJUVFqQkVFZ2FpUUVJQVJCQ0dvaEJTQUJRUUEyQWdBZ0JFSUFOd01BSUFSQkVHb2lBeUFBTmdJQUFrQUNRQUpBQWtBQ1FBSkFJQUVnQXlBQ0lBUVF1UU5CZjJzT0FnQUJBZ3NNQWdzZ0FDd0FBQTBCUVFFaEFBd0NDMEVCSVFBTUFRc2dBa0VCU3dSQVFRQWhBd0pBQWtBRFFDQUFJQWhxSWdZc0FBQkZEUUVnQlVJQU53TUFJQUVnQTBFQ2RHb2lDU0FHUWF3aktBSUFLQUlBQkg5QkJBVkJBUXNnQlJDS0FrRi9SZ1IvSUFZc0FBQWlCMEVBVGcwRElBcEZCRUFnQ1VIKy93TTJBZ0FnQTBFQmFpSURJQUpQRFFRZ0Jpd0FBQ0VIQ3lBQklBTkJBblJxSUFkQi93RnhRWURBQTNJMkFnQkJBU0VLSUFoQkFXb0ZJQVZDQURjREFDQUdRYXdqS0FJQUtBSUFCSDlCQkFWQkFRc2dCUkNJQWlJSFFRRktCSDhnQndWQkFRc2dDR29MSVFnZ0EwRUJhaUlESUFKSkRRQkJBQ0VBREFVTEFBc2dBU0FEUVFKMGFrRUFOZ0lBUVFFaEFBd0RDMEVBSVFBRlFRQWhBQXdCQ3d3QkN5QUNSUVJBSUFRa0JDQUFRZjhCY1VFQVJ3OExDeUFCSUFKQmYycEJBblJxUVFBMkFnQWdCQ1FFSUFCQi93RnhRUUJIQy9FQkFnTi9BWDRqQkNFQkl3UkIwQUJxSkFRZ0FFR3R2QU5xTEFBQUJFQWdBU1FFUVFBUEN5QUFRWWk4QTJvaUF5QUFJQUFvQWdBb0FoUkJCM0ZCaGdGcUVRQUFJZ1EzQXdBQ1FBSkFBa0FDUUFKQUFrQWdBRUdZdkFOcUtBSUFRUUZyRGdNQUFRSURDeUFBRU5jQ0lRSU1Bd3NnQUJEV0FpRUNEQUlMSUFBUTFRSWhBZ3dCQ3d3QkN5QUNCRUFnQXlrREFDRUVCU0FCSkFSQkFBOExDeUFBUVpDOEEyb3BBd0FnQkZVRVFDQUJKQVFnQWc4TElBRkJBRFlDUkNBQlFSZzJBa2dnQVVGQWEwRUJOZ0lBSUFFZ0FFRVlhallDQUNBQVFheThBMnBCQVRvQUFFR3M5UUpCQXhCa0lBRWtCRUVBQzljQkFnWi9BWDRqQkNFREl3UkJvQUpxSkFRZ0EwRWdhaUVHSUFNaEJTQUFRU0JxSWdNcEF3QWhDU0FESUFrZ0FxMThOd01BSUFKRkJFQWdCVUVnRUZzZ0JrR0FBaEJiSUFVa0JBOExJQUJCS0dvaEJ5QUFRU3hxSVFnZ0NhZEJQM0VoQXdOQUlBSkJ3QUFnQTJzaUJFc0VmeUFFQlNBQ0lnUUxRY0FBUmdSQUlBY2dBVFlDQUFVZ0J5QUlOZ0lBSUFCQkxHb2dBMm9nQVNBRUVGTWFDeUFFSUFOcUlnTkJ3QUJHQkVBZ0FCRGhBVUVBSVFNTElBRWdCR29oQVNBQ0lBUnJJZ0lOQUFzZ0JVRWdFRnNnQmtHQUFoQmJJQVVrQkF0NEFRRi9JQUJCOUEwMkFnQWdBRUdvOHdCcUxBQUFCRUFnQUVHczh3QnFLQUlBSWdFRVFDQUJFSGtnQVJCU0N3c2dBRUdRN2dKcUtBSUFJZ0VFUUNBQkVGSUxJQUJCME9jQmFpZ0NBQ0lCQkVBZ0FSQlNDeUFBUWRqekFHb1F0UUlnQUVIdzhRQnFFSVFCSUFCQm5NQUFhaENPQVNBQUVIQUxCZ0JCRUJBQUN3Z0FRUVVRQUVFQUN3Z0FRUUlRQUVFQUN6QUJBWDhqQkNFQ0l3UkJFR29rQkNBQ0lBRTJBZ0JCOENBb0FnQWlBU0FBSUFJUXpnRWFRUW9nQVJDckF4b1FPUXVqQWdFRWZ5QUJSUVJBSUFCQnZNMERha0VBTmdJQUlBQkJ5TTBEYWtFQU5nSUFJQUJCbk0wRGFpSUVLQUlBSWdFRVFDQUFRWmpOQTJvaEJRTkFJQVVvQWdBZ0FrRUNkR29vQWdBaUF3UkFJQU1vQWp3aUFRUkFJQUVRVWdzZ0F5Z0NMQ0lCQkVBZ0FSQlNDeUFES0FJVUlnRUVRQ0FCRUZJTElBTVFVaUFFS0FJQUlRRUxJQUpCQVdvaUFpQUJTUTBBQ3dzZ0JFRUFOZ0lBQ3lBQVFhek5BMm9pQXlnQ0FDSUNSUVJBSUFOQkFEWUNBQThMSUFCQnFNMERhaUVFUVFBaEFTQUNJUUFEUUNBRUtBSUFJQUZCQW5ScUtBSUFJZ0lFUUNBQ0tBSThJZ0FFUUNBQUVGSUxJQUlvQWl3aUFBUkFJQUFRVWdzZ0FpZ0NGQ0lBQkVBZ0FCQlNDeUFDRUZJZ0F5Z0NBQ0VBQ3lBQlFRRnFJZ0VnQUVrTkFBc2dBMEVBTmdJQUMwZ0JBWDhnQUVGQWF5Z0NBQ0lCQkVBZ0FSQ09BU0FCRUZJTElBQW9Ba1FpQVFSQUlBRVFqZ0VnQVJCU0N5QUFRYWdCYWhDTkFTQUFRWndCYWhDTkFTQUFRWkFCYWhDTkFRc1lBRUczOVFJc0FBQkZCRUFQQzBHczlRSkIvd0VRcEFFTEJnQkJEaEFBQzFFQkFYOGdBRUVBU2lNREtBSUFJZ0VnQUdvaUFDQUJTSEVnQUVFQVNISUVRQkFER2tFTUVCOUJmdzhMSXdNZ0FEWUNBQ0FBRUFKS0JFQVFBVVVFUUNNRElBRTJBZ0JCREJBZlFYOFBDd3NnQVFzR0FDQUFFRklMRWdBZ0FnUkFJQUFnQVNBQ0VGTWFDeUFBQzBZQkFYOUJDQkFVSVFCQkFDUUZRUmNnQUVHLzdnQVFEU01GSVFGQkFDUUZJQUZCQVhFRVFCQVhJUUVnQUJBYUlBRVFIZ1VnQUVIc0pUWUNBQ0FBUWZnS1FRd1FHd3NMWGdFQ2Z5QUFMQUFBSWdKRklBSWdBU3dBQUNJRFIzSUVRQ0FESVFBZ0FpRUJCUU5BSUFCQkFXb2lBQ3dBQUNJQ1JTQUNJQUZCQVdvaUFTd0FBQ0lEUjNJRVFDQURJUUFnQWlFQkJRd0JDd3NMSUFGQi93RnhJQUJCL3dGeGF3c1VBUUYvSUFBUVp5RUNJQUVFZnlBQ0JTQUFDd3RxQVFGL1FRQWtCVUVPSUFCQkJHcEJCQkFOSXdVaEFVRUFKQVVnQVVFQmNVVUVRQ0FBUVFocUlnQW9BZ0FpQVVVRVFBOExRUUFrQlVFT0lBRkJ6QllRRFNNRklRRkJBQ1FGSUFGQkFYRkZCRUFnQUNnQ0FDSUFSUVJBRHdzZ0FCQlNEd3NMUVFBUUdCQmFDOGNCQVFGL1FRQWtCVUVPSUFCQndCRVFEU01GSVFGQkFDUUZJQUZCQVhGRkJFQkJBQ1FGUVE0Z0FFSEVFV3BCNEJNUURTTUZJUUZCQUNRRklBRkJBWEZGQkVBZ0FFR3NJR29RWENBQVFiUWJhaEJjSUFCQnZCWnFFRndnQUVIRUVXb1FYQ0FBUVpBTmFoQmNJQUJCNEFocUVGd2dBRUd3QkdvUVhDQUFFRndQQ3d0QkFCQVlJUUVnQUVHc0lHb1FYQ0FBUWJRYmFoQmNJQUJCdkJacUVGd2dBRUhFRVdvUVhDQUFRWkFOYWhCY0lBQkI0QWhxRUZ3Z0FFR3dCR29RWENBQUVGd2dBUkJhQ3p3QkFYOGdBZ1JBUVFBa0JVRWRJQUFnQVNBQ0VBY2FJd1VoQVVFQUpBVWdBVUVCY1FSQVFRQVFHQ0lBRUZvRklBQWhBd3NGSUFBaEF3c2dBd3NuQVFGL0l3UWhBeU1FUVJCcUpBUWdBeUFDTmdJQUlBQWdBU0FERU00QklRQWdBeVFFSUFBTHBBSUFBbjhnQUFSL0lBRkJnQUZKQkVBZ0FDQUJPZ0FBUVFFTUFndEJyQ01vQWdBb0FnQkZCRUFnQVVHQWYzRkJnTDhEUmdSQUlBQWdBVG9BQUVFQkRBTUZRWWk4QTBIVUFEWUNBRUYvREFNTEFBc2dBVUdBRUVrRVFDQUFJQUZCQm5aQndBRnlPZ0FBSUFBZ0FVRS9jVUdBQVhJNkFBRkJBZ3dDQ3lBQlFZQ3dBMGtnQVVHQVFIRkJnTUFEUm5JRVFDQUFJQUZCREhaQjRBRnlPZ0FBSUFBZ0FVRUdka0UvY1VHQUFYSTZBQUVnQUNBQlFUOXhRWUFCY2pvQUFrRUREQUlMSUFGQmdJQjhha0dBZ01BQVNRUi9JQUFnQVVFU2RrSHdBWEk2QUFBZ0FDQUJRUXgyUVQ5eFFZQUJjam9BQVNBQUlBRkJCblpCUDNGQmdBRnlPZ0FDSUFBZ0FVRS9jVUdBQVhJNkFBTkJCQVZCaUx3RFFkUUFOZ0lBUVg4TEJVRUJDd3NMZ1FFQ0FuOEJmaUFBcHlFQ0lBQkMvLy8vL3c5V0JFQURRQ0FCUVg5cUlnRWdBRUlLZ3FkQi93RnhRVEJ5T2dBQUlBQkNDb0FoQkNBQVF2Ly8vLytmQVZZRVFDQUVJUUFNQVFzTElBU25JUUlMSUFJRVFBTkFJQUZCZjJvaUFTQUNRUXB3UVRCeU9nQUFJQUpCQ200aEF5QUNRUXBQQkVBZ0F5RUNEQUVMQ3dzZ0FRc0pBQ0FBUVFBUWt3SUxTUUVCZjBHbzlRQkJxUFVBS0FJQVFRRnFJZ0ZCQTBzRWYwRUFJZ0VGSUFFTE5nSUFJQUFnQVVFTmRFR3M5UUJxSWdCQmdCQVFleG9nQVVFTmRFR290UUZxUVFBMkFnQWdBQXZUQVFFQmZ5QUFRUUFRZ3dFZ0FFR2tsZ0ZxS0FJQUlnRUVRQ0FCRUZJTElBQkJ1TTBEYWlnQ0FDSUJCRUFnQVJCU0N5QUFRYWpOQTJvb0FnQWlBUVJBSUFFUVVnc2dBRUdZelFOcUtBSUFJZ0VFUUNBQkVGSUxJQUJCaU0wRGFoQ1lBU0FBUWRETUEyb1FzZ0lnQUVIUXhnTnFJZ0VvQWdBRVFDQUJRUUEyQWdBZ0FFSDh4d05xS0FJQUVGSUxJQUJCcUpZQmFoRFlBU0FBS0FJMElnRUVRQ0FCRUZJTElBQW9BaVFpQVFSQUlBRVFVZ3NnQUNnQ0ZDSUJSUVJBSUFCQkJHb1FtQUVQQ3lBQkVGSWdBRUVFYWhDWUFRdk5Bd0VHZndKQUFrQWdBRUdRbFFGcUlnSW9BZ0FFUUNBQ1FRQTJBZ0FnQUVHOGxnRnFJZ0VvQWdBUVVpQUNLQUlBSWdOQmdJREFBRWdFUUNBRFJRMENCU0FEUVlDQVFHcEZEUU1MSUFKQkFEWUNBQ0FCS0FJQUVGSUZJQUJCdkpZQmFpRUJDd3NnQVVId3F0VUFFR3dpQVRZQ0FDQUJCRUFnQUVIb2x3RnFJQUZCNEtyVkFHbzJBZ0FnQWtHQWdNQUFOZ0lBQlVHczlRSVFWZ3NMSUFCQjhCUnFRUUU2QUFBZ0FFSGtER3BCQWpZQ0FDQUFFTjhCSUFCQjhCQnFRUUE2QUFBZ0FFSHhFR3BCQWpvQUFDQUFRZklRYWlJQlFvU0lrS0RBZ0lHQ0JEY0FBQ0FCUVFRNkFBZ2dBRUg3RUdwQkJrSDFBUkJVR2lBQVFmQU9ha0VBT2dBQUlBQkI4UTVxUVFFNkFBQWdBRUh5RG1wQkFqb0FBRUVESVFOQkFTRUJRUUVoQkVFRElRVURRQ0FBUWZBT2FpQUZhaUFET2dBQUlBUkJBV29oQWlBQlFYOXFJZ0ZGSWdZRVFDQUNJUUVMSUFNZ0Jtb2hBeUFHUlFSQUlBUWhBZ3NnQlVFQmFpSUZRWUFDUndSQUlBSWhCQXdCQ3dzZ0FFSHdFbW9pQVVJQU53SUFJQUZDQURjQ0NDQUJRZ0EzQWhBZ0FVSUFOd0lZSUFGQ0FEY0NJQ0FCUWdBM0FpZ2dBVUlBTndJd0lBRkNBRGNDT0NBQVFiQVRha0VJUWNBQkVGUWFJQUJCeEF4cVFRYzZBQUFMbUFNQ0JYOEJmaU1FSVFRakJFR2dBbW9rQkNBQUlBQkJMR29pQlRZQ0tDQUFRU0JxSWdZcEF3QWlCNmRCUDNFaUEwRUJhaUVDSUFCQkxHb2dBMnBCZ0g4NkFBQWdBa0U0UndSQUlBQkJMR29oQXdOQUlBSkJQM0VpQWdSQUlBQkJMR29nQW1wQkFEb0FBQ0FDUVFGcUlnSkJPRWNOQVFVZ0FCRGhBU0FEUVFBNkFBQkJBU0VDREFFTEN3c2dCRUVnYWlFRElBQWdCMEkxaUR3QVpDQUFJQWRDTFlnOEFHVWdBQ0FIUWlXSVBBQm1JQUFnQjBJZGlEd0FaeUFBSUFkQ0ZZZzhBR2dnQUNBSFFnMklQQUJwSUFBZ0IwSUZpRHdBYWlBQUlBZW5RZjhCY1VFRGREb0FheUFBRU9FQlFRQWhBZ05BSUFFZ0Ftb2dBQ0FDUVFKMlFRSjBhaWdDQUNBQ1FRTjBRUmh4UVJoemRqb0FBQ0FDUVFGcUlnSkJJRWNOQUFzZ0FFSG56S2ZRQmpZQ0FDQUFRWVhkbnR0N05nSUVJQUJCOHVhNzR3TTJBZ2dnQUVHNjZyK3FlallDRENBQVFmK2t1WWdGTmdJUUlBQkJqTkdWMkhrMkFoUWdBRUdyczQvOEFUWUNHQ0FBUVptYWc5OEZOZ0ljSUFaQ0FEY0RBQ0FFUVNBUVd5QURRWUFDRUZzZ0JVSEFBQkJiSUFRa0JBc2RBUUYvSUFBc0FBZ0VRQThMSUFBb0Fnd2lBVVVFUUE4TElBRVFVZ3Y1QWdFRWZ5QUNSUVJBSUFBUEN3SkFBa0FEUUNBQlFRZHhCRUFnQUVIL0FYRWdBUzBBQUhOQkFuUkJ2UFVDYWlnQ0FDQUFRUWgyY3lFQUlBRkJBV29oQVNBQ1FYOXFJZ0pGRFFJTUFRc0xEQUVMSUFBUEN5QUNRUWRMQkVBZ0FrRjRhaUlFUVhoeElnVkJDR29oQmlBQklRTURRQ0FES0FJQUlBQnpJZ0JCQ0haQi93RnhRUUowUWJ5bEEyb29BZ0FnQUVIL0FYRkJBblJCdkswRGFpZ0NBSE1nQUVFUWRrSC9BWEZCQW5SQnZKMERhaWdDQUhNZ0FFRVlka0VDZEVHOGxRTnFLQUlBY3lBREtBSUVJZ0JCL3dGeFFRSjBRYnlOQTJvb0FnQnpJQUJCQ0haQi93RnhRUUowUWJ5RkEyb29BZ0J6SUFCQkVIWkIvd0Z4UVFKMFFiejlBbW9vQWdCeklBQkJHSFpCQW5SQnZQVUNhaWdDQUhNaEFDQURRUWhxSVFNZ0FrRjRhaUlDUVFkTERRQUxJQUVnQm1vaEFTQUVJQVZySWdKRkJFQWdBQThMQ3dOQUlBQkIvd0Z4SUFFdEFBQnpRUUowUWJ6MUFtb29BZ0FnQUVFSWRuTWhBQ0FCUVFGcUlRRWdBa0YvYWlJQ0RRQUxJQUFMZ0FNQkJuOGpCQ0VFSXdSQlFHc2tCQ0FBSUFBb0FnQWlCMEY0YWlnQ0FHb2hDQ0FIUVh4cUtBSUFJUVlnQkNBQ05nSUFJQVFnQURZQ0JDQUVJQUUyQWdnZ0JDQUROZ0lNSUFSQkZHb2hBQ0FFUVJocUlRa2dCRUVjYWlFSElBUkJJR29oQXlBRVFTaHFJUUVnQkVFUWFpSUZRZ0EzQWdBZ0JVSUFOd0lJSUFWQ0FEY0NFQ0FGUWdBM0FoZ2dCVUVBTmdJZ0lBVkJBRHNCSkNBRlFRQTZBQ1lDUUNBR0lBSkdCSDhnQkVFQk5nSXdJQVlnQkNBSUlBaEJBVUVBSUFZb0FnQW9BaFJCQjNGQnFBSnFFUXNBSUFrb0FnQkJBVVlFZnlBSUJVRUFDd1VnQmlBRUlBaEJBVUVBSUFZb0FnQW9BaGhCQjNGQm9BSnFFUXdBQWtBQ1FBSkFBa0FnQkNnQ0pBNENBQUVDQ3lBQUtBSUFJUUFnQVNnQ0FFRUJSaUFIS0FJQVFRRkdjU0FES0FJQVFRRkdjVVVFUUVFQUlRQUxEQVFMREFFTFFRQWhBQXdDQ3lBSktBSUFRUUZIQkVBZ0FTZ0NBRVVnQnlnQ0FFRUJSbkVnQXlnQ0FFRUJSbkZGQkVCQkFDRUFEQU1MQ3lBRktBSUFDeUVBQ3lBRUpBUWdBQXREQVFKL0lBQVFXU0VCQWtBQ1FBTkFJQUZCQUV3TkFTQUFJQUZCZjJvaUFrRUNkR29vQWdCQkwwY0VRQ0FDSVFFTUFRc0xEQUVMSUFBUEN5QUFJQUZCQW5ScUN5VUFJQUFnQVNBQ0VOWURCRUFQQ3lBQUxBQVVSUVJBRHd0QnJQVUNJQUJCR0dvUXRBSUxDQUFnQUNBQkVITUxQQUVCZnlBQVFRQTJBaEFnQUNnQ0FDSUJCRUFnQVJCU0lBQkJBRFlDQUFzZ0FFRUFOZ0lFSUFCQkFEWUNDQ0FBUVFBMkFoUWdBRUVBTmdKWUM4UUdBUUYvUVFjaEFBTkFJQUVnQUNBQkxnRUFRWUQrQTNGeU93RUFJQUZCQW1vaUF5QUFJQU11QVFCQmdQNERjWEk3QVFBZ0FVRUVhaUlESUFBZ0F5NEJBRUdBL2dOeGNqc0JBQ0FCUVFacUlnTWdBQ0FETGdFQVFZRCtBM0Z5T3dFQUlBRkJDR29pQXlBQUlBTXVBUUJCZ1A0RGNYSTdBUUFnQVVFS2FpSURJQUFnQXk0QkFFR0EvZ054Y2pzQkFDQUJRUXhxSWdNZ0FDQURMZ0VBUVlEK0EzRnlPd0VBSUFGQkRtb2lBeUFBSUFNdUFRQkJnUDREY1hJN0FRQWdBVUVRYWlJRElBQWdBeTRCQUVHQS9nTnhjanNCQUNBQlFSSnFJZ01nQUNBRExnRUFRWUQrQTNGeU93RUFJQUZCRkdvaUF5QUFJQU11QVFCQmdQNERjWEk3QVFBZ0FVRVdhaUlESUFBZ0F5NEJBRUdBL2dOeGNqc0JBQ0FCUVJocUlnTWdBQ0FETGdFQVFZRCtBM0Z5T3dFQUlBRkJHbW9pQXlBQUlBTXVBUUJCZ1A0RGNYSTdBUUFnQVVFY2FpSURJQUFnQXk0QkFFR0EvZ054Y2pzQkFDQUJRUjVxSWdNZ0FDQURMZ0VBUVlEK0EzRnlPd0VBSUFGQklHb2lBeUFBSUFNdUFRQkJnUDREY1hJN0FRQWdBVUVpYWlJRElBQWdBeTRCQUVHQS9nTnhjanNCQUNBQlFTUnFJZ01nQUNBRExnRUFRWUQrQTNGeU93RUFJQUZCSm1vaUF5QUFJQU11QVFCQmdQNERjWEk3QVFBZ0FVRW9haUlESUFBZ0F5NEJBRUdBL2dOeGNqc0JBQ0FCUVNwcUlnTWdBQ0FETGdFQVFZRCtBM0Z5T3dFQUlBRkJMR29pQXlBQUlBTXVBUUJCZ1A0RGNYSTdBUUFnQVVFdWFpSURJQUFnQXk0QkFFR0EvZ054Y2pzQkFDQUJRVEJxSWdNZ0FDQURMZ0VBUVlEK0EzRnlPd0VBSUFGQk1tb2lBeUFBSUFNdUFRQkJnUDREY1hJN0FRQWdBVUUwYWlJRElBQWdBeTRCQUVHQS9nTnhjanNCQUNBQlFUWnFJZ01nQUNBRExnRUFRWUQrQTNGeU93RUFJQUZCT0dvaUF5QUFJQU11QVFCQmdQNERjWEk3QVFBZ0FVRTZhaUlESUFBZ0F5NEJBRUdBL2dOeGNqc0JBQ0FCUVR4cUlnTWdBQ0FETGdFQVFZRCtBM0Z5T3dFQUlBRkJQbW9pQXlBQUlBTXVBUUJCZ1A0RGNYSTdBUUFnQVVGQWF5RUJJQUJCZjJvaEF5QUFRUUJLQkVBZ0F5RUFEQUVMQ3lBQ1FRZHFRUUJCK1FFUVZCb2dBa0VnT2dBR0lBSkJ3QUE2QUFVZ0FrSGdBRG9BQkNBQ1FZQi9PZ0FESUFKQm9IODZBQUlnQWtGQU9nQUJJQUpCWURvQUFBdUZBd0VFZnlBQVFhb0JhaUlETEFBQUJFQWdBU0VDQlNBRFFYODZBQUFnQUJDTkJDQUFRYmdCYWlBQlFRSjBhaUlFS0FJQUlnSUVRQ0FFSUFJb0FnQTJBZ0FnQWc4RklBRWhBZ3NMQWtBQ1FBTkFJQUpCQVdvaUFrRW1SZzBCSUFCQnVBRnFJQUpCQW5ScUlnVW9BZ0FpQkVVTkFBd0NDd0FMSUFNZ0F5d0FBRUYvYWpvQUFDQUFRZHdDYWlJQ0tBSUFJZ01nQUNnQzBBSnJJQUJCQkdvZ0FXb3RBQUFpQVVFTWJDSUVUQVJBUVFBUEN5QUNJQU1nQkdzMkFnQWdBRUhVQW1vaUFpZ0NBQ0FCUVFSMGF5RUFJQUlnQURZQ0FDQUFEd3NnQlNBRUtBSUFOZ0lBSUFCQkJHb2dBbW90QUFBZ0FFRUVhaUFCYWkwQUFDSUNheUVCSUFRZ0FrRUVkR29oQWlBQklBQkJCR29nQUNBQmFpMEFLU0lEYWkwQUFFY0VRQ0FDSUFCQnVBRnFJQU5CZjJvaUEwRUNkR29pQlNnQ0FEWUNBQ0FGSUFJMkFnQWdBaUFBUVFScUlBTnFMUUFBSWdOQkJIUnFJUUlnQVNBRGF5RUJDeUFDSUFCQnVBRnFJQUFnQVdvdEFDbEJBblJxSWdBb0FnQTJBZ0FnQUNBQ05nSUFJQVFMSUFFQmZ5QUFLQUxJQVNJQkJFQWdBUkNWQVNBQkVGSUxJQUJCRUdvUWhBRUxZUUFnQUVIbnpLZlFCallDQUNBQVFZWGRudHQ3TmdJRUlBQkI4dWE3NHdNMkFnZ2dBRUc2NnIrcWVqWUNEQ0FBUWYra3VZZ0ZOZ0lRSUFCQmpOR1YySGsyQWhRZ0FFR3JzNC84QVRZQ0dDQUFRWm1hZzk4Rk5nSWNJQUJDQURjRElBdXNCQUVHZnlNRUlRUWpCRUZBYXlRRUlBQkJGR29pQlNnQ0FDSUlJQUpCQTNRaUNXb2hCaUFGSUFZMkFnQWdBRUVZYWlJSEtBSUFJUVVnQmlBSlNRUkFJQWNnQlVFQmFpSUZOZ0lBQ3lBSElBVWdBa0VkZG1vMkFnQWdDRUVEZGtFL2NTSUdJQUpxUVQ5TEJFQWdBRUVjYWlBR2FpQUJRY0FBSUFacklnVVFVeG9nQUNBQVFkd0FhaUlHSUFCQkhHb2dBeERqQVNBRlFUOXFJQUpKQkVBZ0F3UkFBMEFnQkNBQklBVnFJZ01wQUFBM0FBQWdCQ0FES1FBSU53QUlJQVFnQXlrQUVEY0FFQ0FFSUFNcEFCZzNBQmdnQkNBREtRQWdOd0FnSUFRZ0F5a0FLRGNBS0NBRUlBTXBBREEzQURBZ0JDQURLUUE0TndBNElBQWdCaUFFUVFFUTR3RWdCVUZBYXlFRElBVkIvd0JxSUFKSkJFQWdBeUVGREFFRlFRQWhCZ3NMQlFOQUlBUWdBU0FGYWlJREtRQUFOd0FBSUFRZ0F5a0FDRGNBQ0NBRUlBTXBBQkEzQUJBZ0JDQURLUUFZTndBWUlBUWdBeWtBSURjQUlDQUVJQU1wQUNnM0FDZ2dCQ0FES1FBd053QXdJQVFnQXlrQU9EY0FPQ0FBSUFZZ0JFRUFFT01CSUFNZ0JDa0FBRGNBQUNBRElBUXBBQWczQUFnZ0F5QUVLUUFRTndBUUlBTWdCQ2tBR0RjQUdDQURJQVFwQUNBM0FDQWdBeUFFS1FBb053QW9JQU1nQkNrQU1EY0FNQ0FESUFRcEFEZzNBRGdnQlVGQWF5RURJQVZCL3dCcUlBSkpCRUFnQXlFRkRBRUZRUUFoQmdzTEN3VkJBQ0VHSUFVaEF3c0ZRUUFoQXdzZ0F5QUNUd1JBSUFRa0JBOExJQUJCSEdvZ0Jtb2dBU0FEYWlBQ0lBTnJFRk1hSUFRa0JBc3hBUUYvSUFGQi93RkdCRUFnQUN3QUNFVUVRQThMQ3lBQUlBRVFaRUVFRUJRaUFpQUJOZ0lBSUFKQmdBaEJBQkFiQzlRREFRWi9Ba0FqQkNFREl3UkJnSUFCYWlRRUlBTkJnRUJySVFRZ0FrRUFTQ0VGQWtBZ0FrSC8vd054SWdJRVFDQUFFRmtoQmdKQUlBSkJBWElpQjBFRFJpSUlSUVJBSUFBZ0FTQUdFTWtCUlFSQUFrQUNRQ0FCSUFaQkFuUnFLQUlBRGwwQUFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRQUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRQUJDMEVCSVFBTUJnc0xDd3NnQWtFQlJnUkFJQU1rQkVFQUR3c2dBQ0FFUVlBUUVJSUNJQUVnQTBHQUVCQ0NBZ0ovSUFnRVFDQUZCSDhnQkNBREVITUZJQVFnQXhDZEFRc2lCRVVOQXdVZ0IwRUZSdzBESUFKQkJFWWhCaUFFRU1vQkJFQWdBQ0FCSUFVUTV3RU1BZ3NnQmtVRVFDQUFFTW9CUlFSQUlBVUVmeUFFSUFNUWN3VWdCQ0FERUowQkN5SUVSUTBGUVFBTUF3c0xJQVFvQWdCRkRRTWdCQ0FESUFRUVdSREpBVVVOQXd0QkFBc2hBQXdDQ3dzZ0FCQ2JBU0VBUWJ3T0lBRVFtd0VpQVVFR0VNa0JSUVJBSUFNa0JFRUFEd3NnQWtFQ1J3UkFJQUFnQVNBRkVPY0JJUUFNQVFzZ0JRUi9JQUFnQVJCekJTQUFJQUVRblFFTElRQWdBeVFFSUFCRkR3c2dBeVFFSUFBTFpnRURmeUFBUVJocUlnSW9BZ0FpQVVFRGFpSURJQUFvQWhSUEJFQkJBQThMSUFBb0FnQWlBQ0FCUVFGcWFpMEFBRUVJZENBQUlBRnFMUUFBY2lBQUlBRkJBbXBxTFFBQVFSQjBjaUFBSUFOcUxRQUFRUmgwY2lFQUlBSWdBVUVFYWpZQ0FDQUFDK2NDQVFkL0l3UWhCU01FUVpBRGFpUUVJQVZCOEFKcUlRZ2dCVUhnQVdvaEJpQUZRZkFBYWlFSklBVkIwQUpxSVFvQ1FBSkFJQUZCd0FCTEJFQWdCaENpQVNBR0lBQWdBUkI5SUFZZ0NCQ1hBVUVnSVFFZ0JpRUFCU0FCQkVBZ0FDRUlJQVloQUFVZ0FDRUlRUUFoQVNBR0lRQkJBU0VIREFJTEN3TkFJQVlnQjJvZ0NDQUhhaXdBQUVFMmN6b0FBQ0FIUVFGcUlnY2dBVWNOQUFzZ0FVSEFBRWtFUUVFQUlRY01BUVZCQUNFSEN3d0JDeUFHSUFGcVFUWkJ3QUFnQVdzUVZCcEJBU0VMQ3lBSkVLSUJJQWtnQUVIQUFCQjlJQWtnQWlBREVIMGdDU0FLRUpjQklBVVFvZ0VnQjBVRVFFRUFJUUlEUUNBR0lBSnFJQWdnQW1vc0FBQkIzQUJ6T2dBQUlBSkJBV29pQWlBQlJ3MEFDd3NnQzBVRVFDQUZJQUJCd0FBUWZTQUZJQXBCSUJCOUlBVWdCQkNYQVNBRkpBUVBDeUFHSUFGcVFkd0FRY0FBSUFGckVGUWFJQVVnQUVIQUFCQjlJQVVnQ2tFZ0VIMGdCU0FFRUpjQklBVWtCQXNHQUVFVEVBQUxCZ0JCREJBQUN3Z0FRUU1RQUVFQUMxZ0JBMzhnQUNnQ0JDSUdRUWgxSVFVZ0JrRUJjUVJBSUFJb0FnQWdCV29vQWdBaEJRc2dBQ2dDQUNJQUtBSUFLQUlZSVFjZ0FDQUJJQUlnQldvZ0JrRUNjUVIvSUFNRlFRSUxJQVFnQjBFSGNVR2dBbW9SREFBTEVRQWdBU2dDVEJvZ0FDQUJFS3dESWdBTFFRRUJmd0pBSUFBUVdTSUNRWDlLQkVBZ0FDQUNRUUowYWlFQ0EwQWdBaWdDQUNBQlJnMENJQUpCZkdvaUFpQUFUdzBBUVFBaEFnc0ZRUUFoQWdzTElBSUxaQUVEZndKQUlBSUVRQ0FCSVFNZ0FDRUJBMEFnQXlnQ0FDSUZSUTBDSUFOQkJHb2hBeUFCUVFScUlRUWdBU0FGTmdJQUlBSkJmMm9pQWdSQUlBUWhBUXdCQlNBRUlRRkJBQ0VDQ3dzRklBQWhBVUVBSVFJTEN5QUJRUUFnQWhDd0F4b2dBQXZDQkFFS2Z5TUVJUVlqQkVHQVFHc2tCQ0FBSVFjRFFBSkFBMEFnQUNJRUtBSUFJUWdDUUFKQUEwQUNRQUpBQWtBQ1FDQUlEakFBQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdFQ0N5QUhJUUFNQndzTUFRc01BZ3NnQkVFRWFpSUFLQUlBSWdoQkxrWU5BaUFBSVFRTUFBc0FDeUFFUVFScUlRQU1BUXNnQkNnQ0NFRXVSdzBBQ3lBRVFSQnFJUWdnQkNnQ0RFRXZSZ1JBSUFnaEJ3c01BUXNMQWtBQ1FBTkFBa0FDUUFKQUFrQUNRQ0FBS0FJQUlnY09YUUFDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQVFJTERBTUxJQUFvQWdSQjNBQkdCRUFnQUVFSWFrSGNBQkIwSWdJRVFDQUNRUVJxUWR3QUVIUWlBMEVFYWlFQ0lBTUVmeUFDQlNBQUlnSUxJUU1GSUFBaUF5RUNDd1VnQUNJRElRSUxRUTBoQlF3QkN5QUFJZ29oQ1NBSElRc0xBMEFnQlVFTlJnUkFRUUFoQlNBRElRb2dBaUVKSUFNb0FnQWhDd3NDUUFKQUFrQWdDMEV1YXc0Q0FBRUNDeUFLUVFScUlRTWdDU0VDUVEwaEJRd0NDeUFLUVFScUlnSWhBMEVOSVFVTUFRc0xJQWtnQUVZTkFpQUpJUUFNQVFzTERBRUxJQUFvQWdCQkxrWUVRQ0FBS0FJRVFTNUdCRUFnQUVFSWFpSUNLQUlBUlFSQUlBSWhBQXNMQ3dzZ0FVVUVRQ0FHSkFRZ0FBOExJQVlnQUVHQUVCQnZHaUFCSUFZUWFob2dCaVFFSUFBTEV3QWdBQVIvSUFBZ0FVRUFFSkVCQlVFQUN3dmFBd01CZndGK0FYd0NRQ0FCUVJSTkJFQUNRQUpBQWtBQ1FBSkFBa0FDUUFKQUFrQUNRQUpBSUFGQkNXc09DZ0FCQWdNRUJRWUhDQWtLQ3lBQ0tBSUFRUU5xUVh4eElnRW9BZ0FoQXlBQ0lBRkJCR28yQWdBZ0FDQUROZ0lBREFzTElBSW9BZ0JCQTJwQmZIRWlBU2dDQUNFRElBSWdBVUVFYWpZQ0FDQUFJQU9zTndNQURBb0xJQUlvQWdCQkEycEJmSEVpQVNnQ0FDRURJQUlnQVVFRWFqWUNBQ0FBSUFPdE53TUFEQWtMSUFJb0FnQkJCMnBCZUhFaUFTa0RBQ0VFSUFJZ0FVRUlhallDQUNBQUlBUTNBd0FNQ0FzZ0FpZ0NBRUVEYWtGOGNTSUJLQUlBSVFNZ0FpQUJRUVJxTmdJQUlBQWdBMEgvL3dOeFFSQjBRUkIxckRjREFBd0hDeUFDS0FJQVFRTnFRWHh4SWdFb0FnQWhBeUFDSUFGQkJHbzJBZ0FnQUNBRFFmLy9BM0d0TndNQURBWUxJQUlvQWdCQkEycEJmSEVpQVNnQ0FDRURJQUlnQVVFRWFqWUNBQ0FBSUFOQi93RnhRUmgwUVJoMXJEY0RBQXdGQ3lBQ0tBSUFRUU5xUVh4eElnRW9BZ0FoQXlBQ0lBRkJCR28yQWdBZ0FDQURRZjhCY2EwM0F3QU1CQXNnQWlnQ0FFRUhha0Y0Y1NJQkt3TUFJUVVnQWlBQlFRaHFOZ0lBSUFBZ0JUa0RBQXdEQ3lBQ0tBSUFRUWRxUVhoeElnRXJBd0FoQlNBQ0lBRkJDR28yQWdBZ0FDQUZPUU1BQ3dzTEN6QUJBbjhnQUVFRWFpSUJLQUlBSWdJRVFDQUFMQUFRUlFSQUlBSVFQZ3NnQVVFQU5nSUFDeUFBUVFBMkFneEJBUXVBQkFJSGZ3SitJQUlnQVVjRVFDQUFRYnFZQVdwQkFUb0FBQXNnQWlBQlNTSURCRUFnQUVHNW1BRnFRUUU2QUFBTElBQkJxSmdCYWl3QUFBUkFJQUJCME0wRGFpSUhLQUlBSWdNZ0FpQUJhM0VpQkVVRVFBOExJQUJCcUpZQmFpRUZJQUJCc0pnQmFpRUlJQUVoQWlBQVFjQ1lBV29pQmlrREFDRUtJQU1oQVFOQUlBVWdBaUFFRVB3RElRTWdDQ2tEQUNJTElBcFZCRUFnQlNBQ0VIVWhBU0FMSUFwOUlncW5JUWtnQUNnQ0FDQUJJQW9nQTYwaUNsTUVmeUFKQlNBREN4QmxJQVlnQmlrREFDQUtmQ0lLTndNQUlBY29BZ0FoQVFzZ0FTQURJQUpxY1NFQ0lBUWdBMnNpQkEwQUN3OExJQUJCcEpZQmFpSUZLQUlBSUFGcUlRUWdBMFVFUUNBQVFiQ1lBV29wQXdBaUNpQUFRY0NZQVdvaUF5a0RBQ0lMVndSQUR3c2dDaUFMZlNJS3B5RUZJQUFvQWdBZ0JDQUtJQUlnQVdzaUFLMGlDbE1FZnlBRkJTQUFDeEJsSUFNZ0F5a0RBQ0FLZkRjREFBOExJQUJCek0wRGFpZ0NBQ0FCYXlFRElBQkJzSmdCYWlJR0tRTUFJZ3NnQUVIQW1BRnFJZ0VwQXdBaUNsVUVRQ0FMSUFwOUlncW5JUWNnQUNnQ0FDQUVJQW9nQTYwaUNsTUVmeUFIQlNBREN4QmxJQUVnQVNrREFDQUtmQ0lLTndNQUlBWXBBd0FoQ3dzZ0N5QUtWd1JBRHdzZ0N5QUtmU0lLcHlFRUlBQW9BZ0FnQlNnQ0FDQUtJQUt0SWdwVEJIOGdCQVVnQWdzUVpTQUJJQUVwQXdBZ0NudzNBd0FMdWc4QkdYOGpCQ0VHSXdSQm9BaHFKQVFnQUVFRWFpSUpLQUlBSWdVZ0FFSG9BR29pRFNnQ0FDSUNRV2RxU2dSQUlBSWdCV3NpQVVFQVNBUkFJQVlrQkVFQUR3c2dBRUh3QUdvaUJ5QUFRZmdBYWlJREtBSUFJQVZySUFjb0FnQnFOZ0lBSUFWQmdJQUJTZ1JBSUFGQkFFb0VRQ0FBS0FJUUlnSWdBaUFGYWlBQkVGMGFDeUFKUVFBMkFnQWdEU0FCTmdJQUlBRWhBZ3NnQWtHQWdBSkdCRUJCQUNFQlFZQ0FBaUVDQlNBQUtBSUFJQUFvQWhBZ0FtcEJnSUFDSUFKckVGNGhBU0FOS0FJQUlnSWdBV29oQlNBQlFRQktCRUFnRFNBRk5nSUFJQVVoQWdzTElBQkI3QUJxSWdRZ0FrRmlhaUlJTmdJQUlBTWdDU2dDQUNJQ05nSUFJQUpCZjJvZ0J5Z0NBQ0lGYWlFRElBVkJmMGNFUUNBRUlBZ2dBMGdFZnlBSUJTQURDellDQUFzZ0FVRi9SZ1JBSUFZa0JFRUFEd3NGSUFVaEFnc2dBRUc0cmdKcUloTWdBRUVRYWlJUEtBSUFJZ2NnQWtFQmFtb3RBQUJCQ0hRZ0J5QUNhaTBBQUVFUWRISWdCeUFDUVFKcWFpMEFBSEpCQ0NBQVFRaHFJZ29vQWdBaUFXdDJJZ1JCZ0lBQ2NTSUZOZ0lBSUFSQmdJQUJjVVVFUUNBQVFiU21BbXBCQUVHRUNCQlVHZ3NnQ1NBQlFRSnFJZ0ZCQTNZZ0Ftb2lBallDQUNBS0lBRkJCM0VpQVRZQ0FDQUZCSDhnQUVHOHJnSnFJQVJCREhaQkEzRWlBMEVCYWlJRU5nSUFJQUJCd0s0Q2FpSUZLQUlBSUFOS0JFQWdCVUVBTmdJQUN5QUpJQUZCQW1vaUFVRURkaUFDYWlJQ05nSUFJQW9nQVVFSGNTSUJOZ0lBSUFSQmdRSnNCVUgyQWdzaERpQUdRWVFJYWlFRUlBWWhDRUVBSVFZRFFDQUVJQVpxSUFjZ0FrRUJhbW90QUFCQkNIUWdCeUFDYWkwQUFFRVFkSElnQnlBQ1FRSnFhaTBBQUhKQkNDQUJhM1pCREhaQkQzRTZBQUFnQ1NBQlFRUnFJZ0ZCQTNZZ0Ftb2lCVFlDQUNBS0lBRkJCM0VpQVRZQ0FDQUdRUUZxSWdKQkUwY0VRQ0FDSVFZZ0JTRUNEQUVMQzBFQUlBUWdBRUcwK0FCcUloUkJFeEJvSUFCQitBQnFJUkVnQUVId0FHb2hFQ0FBUWV3QWFpRVNJQUJCdVBrQWFpRVZJQWhCZjJvaEZrRUFJUVVnQ1NnQ0FDRUJJQTBvQWdBaEFnSkFBa0FEUUNBRklBNUlJUmNnQlVFQVNpRVlJQUloQmdKQUFrQUNRQU5BSUJkRkRRVWdBU0FHUVh0cVNnUkFJQVlnQVdzaUJFRUFTQTBISUJBZ0VTZ0NBQ0FCYXlBUUtBSUFhallDQUNBQlFZQ0FBVW9FUUNBRVFRQktCRUFnRHlnQ0FDSUNJQUlnQVdvZ0JCQmRHZ3NnQ1VFQU5nSUFJQTBnQkRZQ0FDQUVJZ1loQWdzZ0VpQUdRWUNBQWtZRWYwRUFJUUZCZ0lBQ0JTQUFLQUlBSUE4b0FnQWdCbXBCZ0lBQ0lBWnJFRjRoQVNBTktBSUFJZ0lnQVdvaEJpQUJRUUJLQkg4Z0RTQUdOZ0lBSUFZaUFnVWdBZ3NMSWdaQlltb2lDellDQUNBUklBa29BZ0FpQkRZQ0FDQUVRWDlxSUJBb0FnQWlBMm9oQnlBRFFYOUhCRUFnRWlBTElBZElCSDhnQ3dVZ0J3czJBZ0FMSUFGQmYwWU5Cd1VnQVNFRUN5QVBLQUlBSWd3Z0JFRUJhbW90QUFCQkNIUWdEQ0FFYWkwQUFFRVFkSElnRENBRVFRSnFhaTBBQUhKQkNDQUtLQUlBSWdkcmRrSCsvd054SWdzZ0FFRzQrQUJxSUJVb0FnQWlBVUVDZEdvb0FnQkpCSDhnQ1NBSElBQkJ2UGtBYWlBTFFSQWdBV3QySWdkcUxRQUFhaUlEUVFOMklBUnFJZ0UyQWdBZ0NpQURRUWR4SWdRMkFnQWdBRUc4Z1FGcUlBZEJBWFJxQlFOQUFrQWdBVUVCYWlJQlFROVBCRUJCRHlFRERBRUxJQXNnQUVHNCtBQnFJQUZCQW5ScUtBSUFUdzBCSUFFaEF3c0xJQWtnQXlBSGFpSUhRUU4ySUFScUlnRTJBZ0FnQ2lBSFFRZHhJZ1EyQWdBZ0FFRzhrUUZxSUFzZ0FDQURRUUowYWtHMCtBQnFLQUlBYTBFUUlBTnJkaUFBUWZqNEFHb2dBMEVDZEdvb0FnQnFJZ01nRkNnQ0FFOEVmMEVBQlNBREMwRUJkR29MSWdNdUFRQWlBMEgvL3dOeFFSQklEUUVnQTBFUVJ3MERJQXdnQVdvdEFBQWhHU0FNSUFGQkFXcHFMUUFBSVFzZ0RDQUJRUUpxYWkwQUFDRUhJQWtnQkVFQ2FpSURRUU4ySUFGcUlnRTJBZ0FnQ2lBRFFRZHhOZ0lBSUJoRkRRQU1BZ3NBQ3lBSUlBVnFJQUJCdEtZQ2FpQUZhaTBBQUNBRFFmLy9BM0ZxUVE5eE9nQUFJQVZCQVdvaEJRd0NDeUFXSUFWcUxBQUFJUU1nQzBIL0FYRkJDSFFnR1VFUWRISWdCMEgvQVhGeVFRZ2dCR3QyUVE1MlFRTnhRUU5xSVFRRFFDQUVRWDlxSVFZZ0NDQUZhaUFET2dBQUlBUkJBVW9nQlVFQmFpSUZJQTVJY1VVTkFpQUdJUVFNQUFzQUN5QU1JQUZCQVdwcUxRQUFRUWgwSUF3Z0FXb3RBQUJCRUhSeUlBd2dBVUVDYW1vdEFBQnlRUWdnQkd0MlFmLy9BM0VnQTBFUlJpSURCSDlCRFFWQkNRdDJJQU1FZjBFREJVRUxDMm9oQmlBSklBUWdBd1IvUVFNRlFRY0xhaUlEUVFOMklBRnFJZ1EyQWdBZ0NpQURRUWR4TmdJQUlBZ2dCV3BCQUVFQVFRQWdCbXNpQXlBRklBNXJJZ0ZMQkg4Z0F3VWdBUXRyRUZRYUlBWWhBUU5BSUFGQmYyb2hCaUFCUVFGS0lBVkJBV29pQlNBT1NIRUVRQ0FHSVFFTUFRVWdCQ0VCREFJTEFBc0FDd0FMSUFZZ0FVZ0VRQ0FJSkFSQkFROExJQk1vQWdBRVFDQUFRYnl1QW1vaUFTZ0NBRUVBU2dSQVFRQWhBZ05BUVFBZ0NDQUNRWUVDYkdvZ0FFR0Vyd0ZxSUFKQjdCMXNha0dCQWhCb0lBSkJBV29pQWlBQktBSUFTQTBBQ3dzRlFRQWdDQ0FBUVlRQmFrR3FBaEJvUVFBZ0NFR3FBbW9nQUVId0htcEJNQkJvUVFBZ0NFSGFBbW9nQUVISTJnQnFRUndRYUFzZ0FFRzBwZ0pxSUFoQmhBZ1FVeG9nQ0NRRVFRRVBDMEVBSVFBZ0NDUUVRUUFMOXd3Q0UzOENmaU1FSVFVakJFR2dvQUZxSkFRZ0JVR1l3QUJxSVFRZ0FFR3M4d0JxS0FJQUlRa2dBRUh3clFKcUlRZ2dBRUd3cHdGcUlRWWdBRUhNOHdCcUloVW9BZ0FpRTBFRFJ3UkFJQVloQ0FzQ1FDQVRRUUZ5UVFOR0JFQWdBVUVBUnlJTElBaEJpY0VBYWl3QUFFRUFSeUlQY1FSQUlBQkJtTHdEYWlnQ0FFRURSd1JBSUFndEFCbEJFMHdFUUVFQklRdEJBU0VQREFRTElBaEI1TUFBYWlnQ0FFRi9SZ1JBUVFFaEMwRUJJUThNQkFzTElBaEJ1OEVBYWlFR0lBRkJrQUZxSUFoQjRNQUFhaUFJUWJyQkFHb3NBQUFFZnlBR0JVRUFDeENxQWtVRVFDQUVRUUEyQWtRZ0JFRUZOZ0pJSUFRZ0FFRVlhallDQUNBRVFVQnJRUUkyQWdBZ0JDQUlRU0JxTmdJRUMwRUJJUTlCQVNFTEN3VWdBVUVBUnlFTEN3c2dBQ0FBS0FJQUtBSVVRUWR4UVlZQmFoRUFBQ0VYSUFzRVFDQUFFTkVCSVJnZ0FVR0FBV29pQmlBR0tRTUFJQmg4TndNQUN5QUZRUWhxSVJZZ0JTSU1RWmlRQVdvaEJpQU1RWmlBQVdvaEVDQUFFTElCR2lBTVFSaHFJZ1VnQUVFWWFpSVJFR29hSUFWQmdCQWdBRUdpdkFOcUxBQUFSUkRDQVFKQUlBQWdCU0FKUVoyRkEyb3NBQUFFZjBFRUJVRUFDeUlPSUFBb0FnQW9BZ2hCSDNGQnlnQnFFUUVBUlFSQUlBRkJpQUZxSVJRZ0NVR3d5d1JxSVFvZ0NVRzB5d1JxSVEwZ0NVR3N5d1JxSVJJQ1FBSkFJQXNFUUNBVVFnQTNBd0FnQkNBUkVHb2FJQVJCZ0JCQkFSRENBU0FBSUFRZ0RpQUFLQUlBS0FJSVFSOXhRY29BYWhFQkFBMEJBMEFDUUFKQUlBb29BZ0FFUUNBRUlBVVFhaHBCQXlBU0tBSUFJQVZCQUNBS0tBSUFRUTl4UWVvQWFoRURBRUYvUmdSQVFRRWhCd3dDQ3lBRUlBVVFjdzBDSUFVZ0JrR0FFQkJwR2lBUUlBWVEwQUVhUVFBZ0VpZ0NBQ0FHUVFBZ0NpZ0NBRUVQY1VIcUFHb1JBd0JCZjBZRVFFRUJJUWNGSUJBZ0JoQ0xBUVJBSUFZZ0JVR0FFQkI3R2d3RUJVRUFJUWNMQ3dWQkFDRUhDd3NnRFNnQ0FFVUVRQ0FIQkVBTUJnVU1BZ3NBQ3lBRklBUkJnQkFRYVJvZ0JFRUFJQTBvQWdCQkgzRkJLbW9SQkFCRkRRUWdCQ0FGUVlBUUVIc2FJQWNOQkFzZ0NpZ0NBRVVFUUNBTktBSUFSUTBFQ3lBQUlBVWdEaUFBS0FJQUtBSUlRUjl4UWNvQWFoRUJBQTBGSUJSQ0FEY0RBQXdBQ3dBRklBUWdFUkJxR2lBRVFZQVFRUUVRd2dFZ0FDQUVJQTRnQUNnQ0FDZ0NDRUVmY1VIS0FHb1JBUUFOQVFOQUFrQUNRQ0FLS0FJQUJFQWdCQ0FGRUdvYVFRTWdFaWdDQUNBRlFRQWdDaWdDQUVFUGNVSHFBR29SQXdCQmYwWUVRRUVCSVFjTUFnc2dCQ0FGRUhNTkFpQUZJQVpCZ0JBUWFSb2dFQ0FHRU5BQkdrRUFJQklvQWdBZ0JrRUFJQW9vQWdCQkQzRkI2Z0JxRVFNQVFYOUdCRUJCQVNFSEJTQVFJQVlRaXdFRVFDQUdJQVZCZ0JBUWV4b01CQVZCQUNFSEN3c0ZRUUFoQndzTElBMG9BZ0JGQkVBZ0J3UkFEQVlGREFJTEFBc2dCU0FFUVlBUUVHa2FJQVJCQUNBTktBSUFRUjl4UVNwcUVRUUFSUTBFSUFRZ0JVR0FFQkI3R2lBSERRUUxJQW9vQWdCRkJFQWdEU2dDQUVVTkJBc2dBQ0FGSUE0Z0FDZ0NBQ2dDQ0VFZmNVSEtBR29SQVFCRkRRQU1CUXNBQ3dBTElBVWdCQkJxR2d3Q0N5QUpRYWpMQkdwQkR6WUNBQ0FFUVFBMkFrUWdCRUhFQURZQ1NDQUVRVUJyUVFFMkFnQWdCQ0FGTmdJQUlBQWdFU0FPSUFBb0FnQW9BZ2hCSDNGQnlnQnFFUUVBR2lBQUlCZEJBQ0FBS0FJQUtBSVFRUU54UWJnQ2FoRUNBQ0FNSkFSQkFBOExDd0pBQWtBZ0EwSEZBR3NPRkFBQkFRRUJBUUVCQVFFQkFRRUJBUUFCQVFFQUFRc2dEQ0FSTmdJQUN5QUFRUUVRMlFJZ0JTQUdRWUFRRUdrYUFrQUNRQ0FKUWJETEJHb2lBeWdDQUNJSFJRMEFRUU1nQ1VHc3l3UnFJZ1FvQWdBZ0JVRUJJQWRCRDNGQjZnQnFFUU1BUVg5SEJFQkJBQ0FFS0FJQUlBWkJBU0FES0FJQVFROXhRZW9BYWhFREFFRi9SdzBCQ3d3QkN5QUpRYlRMQkdvb0FnQWlBd1JBSUFaQkFTQURRUjl4UVNwcUVRUUFSUTBCQ3lBUEJIOGdBQ0FURU84QkJTQUFFSHdMR2lBVktBSUFRUUpHQkVBZ0FCRHVBU0FBSUFCQmtMd0RhaWtEQUNBQVFmam5BV29wQXdCOVFRQWdBQ2dDQUNnQ0VFRURjVUc0QW1vUkFnQUxJQUlFUUNBV0lBQkIwS2NCYWpZQ0FDQUpRY3lFQTJvc0FBQWFDeUFMUlFSQUlBd2tCRUVCRHdzZ0UwRUZSZ1JBUVFBaEFBVWdDRUdKd1FCcUxBQUFJUUFnQVNBSVFjakFBR29wQXdBM0F5QUxJQUVnQURvQVVTQUJRZ0EzQTNBZ0FVR1FBV29nQ0VIZ3dBQnFLQUlBSUFsQm9Jc0VhaWdDQUJDc0FpQU1KQVJCQVE4TElBd2tCRUVBQ3prQUlBRkJnSUFRVHdSQUR3c2dBQ2dDRUNBQmFpSUFJQUpHQkVBUEN5QUFJQUpCZ0lBUUlBRnJJZ0FnQTBzRWZ5QURCU0FBQ3hCZEdnc0RBQUVMTXdBZ0FFSUFOd0lBSUFCQ0FEY0NDQ0FBSUFFMkFoQWdBRUVBTmdJRUlBQkJBRFlDR0NBQVFRQTJBaFFnQUVFQU5nSWNDLzhEQVFKL0l3UWhDU01FUVlBRmFpUUVJQUpGSUFNc0FJQUVSWElFUUNBSkpBUkJBQThMSUFCQnFDVnFJQUkyQWdBZ0F5QUpRWUFCRUxNRUlBa2dDVUdBQkdvaUNrR0FBUkJwR2dKQUFrQUNRQUpBQWtBQ1FDQUNRUUZyRGdVQUFRSURCQVVMSUFCQnhqRnFJZ1ZCQURvQUFDQUFRY1V4YWlJR1FRQTZBQUFnQUVIRU1Xb2lCMEVBT2dBQUlBb3NBQUFpQUFSQVFRQWhBVUVBSVFKQkFDRURRUUFoQkFOQUlBSkIvd0Z4SUFCQi93RnhJZ2hxSVFJZ0FDQURjeUVESUFSQi93RnhJQWhxSWdCQkIzWkJBWEVnQUVFQmRISWhCQ0FLSUFGQkFXb2lBV29zQUFBaUFBMEFDeUFISUFJNkFBQWdCaUFET2dBQUlBVWdCRG9BQUFzTUJBc2dBRUcwSjJvUXZBSWdBRUhJTVdwQmZ5QUtJQW9RYmhDWkFTSUJPd0VBSUFCQnlqRnFJQUZCRUhZN0FRQWdBRUhPTVdvaUJrRUFPd0VBSUFCQnpERnFJZ2RCQURzQkFDQUtMQUFBSWdFRVFFRUFJUUpCQUNFRFFRQWhCQU5BSUFCQnRDZHFJQUZCL3dGeElnRkJBblJxSVFVZ0J5QURRZi8vQTNFZ0FYTWdCU2dDQUhNaUF6c0JBQ0FHSUFSQi8vOERjU0FCYWlBRktBSUFRUkIyYWlJRU93RUFJQW9nQWtFQmFpSUNhaXdBQUNJQkRRQUxDd3dEQ3lBQUlBb1F4UUlNQWdzZ0FDQUJJQU1nQ1NBRUVNSUNEQUVMSUFBZ0FTQURJQWtnQkNBRklBWWdCeUFJRU1BQ0N5QUtRWUFCRUZzZ0NVR0FCQkJiSUFra0JFRUJDL1VHQVFkL0lBQWhCQ0FDUVg5cUlRQkJBU0VDSUFFaEJnSkFBa0FEUUFKQUFrQWdCa0VBUnlJSkJFQURRQUpBSUFRc0FBQWlCVVVOQmlBRVFRRnFJUU1nQlVIL0FYRWhBUUovSUFWQmYwb0VmeUFEQlNBQlFlQUJjVUhBQVVZRVFDQURMQUFBSWdOQndBRnhRWUFCUndSQVFRQWhBZ3dLQ3lBRFFUOXhJQUZCQm5SQndBOXhjaUVCSUFSQkFtb01BZ3NnQVVId0FYRkI0QUZHQkVBZ0F5d0FBQ0lGUWNBQmNVR0FBVWNFUUVFQUlRSU1DZ3NnQkN3QUFpSURRY0FCY1VHQUFVY0VRRUVBSVFJTUNnc2dCVUVHZEVIQUgzRWdBVUVNZEVHQTRBTnhjaUFEUVQ5eGNpRUJJQVJCQTJvTUFnc2dBVUg0QVhGQjhBRkhCRUJCQUNFQ0RBa0xJQU1zQUFBaUIwSEFBWEZCZ0FGSEJFQkJBQ0VDREFrTElBUXNBQUlpQlVIQUFYRkJnQUZIQkVCQkFDRUNEQWtMSUFRc0FBTWlBMEhBQVhGQmdBRkhCRUJCQUNFQ0RBa0xJQWRCREhSQmdPQVBjU0FCUVJKMFFZQ0E4QUJ4Y2lBRlFRWjBRY0FmY1hJZ0EwRS9jWEloQVNBRVFRUnFDd3NoQkNBQVFRRklEUVlnQVVILy93Tk5EUUFnQUVFQ1NBMEdJQUJCZm1vaEFDQUJRZi8vd3dCTkRRTkJBQ0VDREFFTEN5QUFRWDlxSVFBTUFnVURRQ0FFTEFBQUlnVkZEUVlnQkVFQmFpRURJQVZCL3dGeElRRWdCVUYvU2dSQUlBTWhCQXdFQ3dKL0lBRkI0QUZ4UWNBQlJnUi9JQU1zQUFBaUEwSEFBWEZCZ0FGSEJFQkJBQ0VDREFrTFFRSWhDQ0FEUVQ5eElRVWdBVUVHZEVIQUQzRUZJQUZCOEFGeFFlQUJSZ1JBSUFNc0FBQWlCVUhBQVhGQmdBRkhCRUJCQUNFQ0RBb0xJQVFzQUFJaUEwSEFBWEZCZ0FGSEJFQkJBQ0VDREFvTFFRTWhDQ0FGUVFaMFFjQWZjU0FCUVF4MFFZRGdBM0Z5SVFVZ0EwRS9jUXdDQ3lBQlFmZ0JjVUh3QVVjRVFFRUFJUUlNQ1FzZ0F5d0FBQ0lIUWNBQmNVR0FBVWNFUUVFQUlRSU1DUXNnQkN3QUFpSUZRY0FCY1VHQUFVY0VRRUVBSVFJTUNRc2dCQ3dBQXlJRFFjQUJjVUdBQVVjRVFFRUFJUUlNQ1F0QkJDRUlJQWRCREhSQmdPQVBjU0FCUVJKMFFZQ0E4QUJ4Y2lBRlFRWjBRY0FmY1hJaEJTQURRVDl4Q3dzaEFTQUVJQWhxSVFRZ0JTQUJjaUlCUWYvL0EwME5BeUFCUWYvL3d3QkxCRUJCQUNFQ0RBRUxDd3NMSUFsRkJFQkJBQ0VHREFJTElBWWdBVFlDQUNBR1FRUnFJUVlNQVFzZ0NRUkFJQVlnQVRZQ0FDQUdRUVJxSVFZTUFRVkJBQ0VHREFFTEFBc0FDeUFHUVFBMkFnQWdBZzhMSUFJTE9RQWdCQVJBSUFSQkFEb0FBQXNnQVVVRVFFRUJEd3NnQVNBQ0lBY0VmMEVTQlVFUkN5SUFFSmNDQkVCQkFROExJQUVnQWlBQUVKY0NDd1lBUVJJUUFBc0lBRUVMRUFCQ0FBc0lBRUVCRUFCQkFBdGFBUU4vSUFBb0FnUWlCMEVJZFNFR0lBZEJBWEVFUUNBREtBSUFJQVpxS0FJQUlRWUxJQUFvQWdBaUFDZ0NBQ2dDRkNFSUlBQWdBU0FDSUFNZ0Jtb2dCMEVDY1FSL0lBUUZRUUlMSUFVZ0NFRUhjVUdvQW1vUkN3QUx0Z0VBSUFGQkFUb0FOUUpBSUFFb0FnUWdBMFlFUUNBQlFRRTZBRFFnQVVFUWFpSUFLQUlBSWdORkJFQWdBQ0FDTmdJQUlBRWdCRFlDR0NBQlFRRTJBaVFnQVNnQ01FRUJSaUFFUVFGR2NVVU5BaUFCUVFFNkFEWU1BZ3NnQXlBQ1J3UkFJQUZCSkdvaUFDQUFLQUlBUVFGcU5nSUFJQUZCQVRvQU5nd0NDeUFCUVJocUlnSW9BZ0FpQUVFQ1JnUkFJQUlnQkRZQ0FBVWdBQ0VFQ3lBQktBSXdRUUZHSUFSQkFVWnhCRUFnQVVFQk9nQTJDd3NMQzIwQkFYOENRQ0FCUVJCcUlnQW9BZ0FpQkFSQUlBUWdBa2NFUUNBQlFTUnFJZ0FnQUNnQ0FFRUJhallDQUNBQlFRSTJBaGdnQVVFQk9nQTJEQUlMSUFGQkdHb2lBQ2dDQUVFQ1JnUkFJQUFnQXpZQ0FBc0ZJQUFnQWpZQ0FDQUJJQU0yQWhnZ0FVRUJOZ0lrQ3dzTHNRUUJCSDhDUUNBQUJFQWdBQkJaSVFRQ1FBSkFBMEFDUUNBRVFRQk1CRUFnQUNFRERBRUxJQUFnQkVGL2FpSURRUUowYWlnQ0FFRXZSZzBDSUFNaEJBd0JDd3NNQVFzZ0FDQUVRUUowYWlFREN5QURRUzRRclFFaUF3UkFBa0FDUUNBRFFRUnFJZ1FvQWdBTkFDQUFFRmtnQVVGOWFrOE5BQXdCQ3lBRVFaZ05FT3dCQkVBZ0JFSHNEQkRzQVEwRUN3c2dCRUdvRFJCcUdnVWdBRUdFRFNBQkVIZ2FJQUFRV1NFREFrQUNRQU5BQWtBZ0EwRUFUQVJBSUFBaEFRd0JDeUFBSUFOQmYyb2lBVUVDZEdvb0FnQkJMMFlOQWlBQklRTU1BUXNMREFFTElBQWdBMEVDZEdvaEFRc2dBVUV1RUswQklRTUxCVUVBUVlRTklBRVFlQm9MQ3lBQ1JRUkFJQUFRb1FNaEFnTkFBa0FnQWlBQ0tBSUFRUUZxSWdFMkFnQWdBVUU2UndSQVFTRWhCUXdCQ3lBQ1FUQTJBZ0FnQWtGOGFpSUdJQUJKRFFBZ0JpZ0NBRUZRYWtFS1NRUkFJQVloQWd3Q0N3c0xJQVZCSVVZRVFBOExJQUFnQUJCWlFRSjBhaUlBSUFaSEJFQURRQ0FBSUFBb0FnQTJBZ1FnQUVGOGFpRUJJQUFnQWtjRVFDQUJJUUFNQVFzTEN5QUNRVEUyQWdBUEN5QURRUWhxSWdFb0FnQkJVR3BCQ2trRVFDQURRUXhxSWdBb0FnQkJVR3BCQ2trRVFDQUFJQUFvQWdCQkFXb2lBVFlDQUNBQlFUcEhCRUFQQ3dOQUlBQkJmR29pQVNnQ0FDSUNRUzVIQkVBZ0FFRXdOZ0lBSUFFZ0FrRUJhaUlDTmdJQUlBSkJPa1lFUUNBQklRQU1BZ1ZCSVNFRkN3c0xJQVZCSVVZRVFBOExJQUJCd1FBMkFnQVBDd3NnQVVHNERSQnFHZ3RhQUFKQUFrQWdBVVVOQUNBQktBSUFSUTBBSUFJZ0FVY0VRQ0FDSUFFZ0F4Q3VBUm9MREFFTElBQUVRQ0FBSUFJZ0F4QjdHZ1VnQWtFQU5nSUFDd3NnQTBVRVFDQUNEd3NnQWlBRFFYOXFRUUowYWtFQU5nSUFJQUlMelFFQkJYOGdBQ2dDVkNFRUFrQUNRQ0FBS0FJY0lnTWdBVVlOQUNBQUlBTWdBQ2dDRkNBRGF4REVBVUYvUncwQVFYOGhBQXdCQ3dKQUlBSkJBRWNnQkVFRWFpSUZLQUlBUVFCSGNRUkFJQUloQUNBRUtBSUFJUVlEUUNBR0lBRWdBQkRNQVNJRFFYOU1CRUFnQXlFQURBTUxJQUVnQTJvaEFTQUZJQVVvQWdCQmYyb2lCellDQUNBRUlBUW9BZ0JCQkdvaUJqWUNBQ0FBSUFOcklnQkJBRWNnQjBFQVIzRU5BQ0FESVFBTEJVRUFJUUFMQ3lBRUtBSUFRUUEyQWdBZ0FFRUFUZ1JBSUFJaEFBc0xJQUFMT3dFQmZ3SkFJQUlFUUFOQUlBQW9BZ0JCSUhFTkFpQUJRUVJxSVFNZ0FTZ0NBQ0FBRUt3QkdpQUNRWDlxSWdJRVFDQURJUUVNQVFzTEN3c0xEZ0FnQUNBQklBSVFzUU1hSUFBTEhnRUJmeUFBSUFBZ0FSQzBBMEVDZEdvaUFpZ0NBQVIvSUFJRlFRQUxDemNCQVg4Z0FCQlpJZ0pGQkVBUEN5QUNRUUZxSUFGSklBQWdBa0YvYWtFQ2RHb29BZ0JCTDBkeFJRUkFEd3NnQUVIOERCQ0dBaG9MVVFFQ2Z3Si9JQUlFZndOQUlBRW9BZ0FpQTBVZ0FDZ0NBQ0lFUlNBRUlBTkhjbkpGQkVBZ0FFRUVhaUVBSUFGQkJHb2hBVUVBSUFKQmYyb2lBa1VOQXhvTUFRc0xJQVFnQTJzRlFRQUxDeUlBQ3hZQUlBQkZCRUJCQUE4TElBQkIyQTRReHdGQkFFY0xTZ0VCZnlNRUlRTWpCRUVRYWlRRUlBTWdBRFlDQUNBRElBRTJBZ1FnQXlBQ05nSUlRY1lCSUFNUUpDSUFRWUJnU3dSQVFZaThBMEVBSUFCck5nSUFRWDhoQUFzZ0F5UUVJQUFMeWdJQkEzOGpCQ0VFSXdSQkVHb2tCQUovSUFFRWZ3SkFJQUlFUUNBQVJRUkFJQVFoQUFzZ0FTd0FBQ0lEUVg5S0JFQWdBQ0FEUWY4QmNUWUNBQ0FEUVFCSERBUUxJQUVzQUFBaEEwR3NJeWdDQUNnQ0FFVUVRQ0FBSUFOQi83OERjVFlDQUVFQkRBUUxJQU5CL3dGeFFiNSthaUlEUVRKTkJFQWdBMEVDZEVHa0htb29BZ0FoQXlBQ1FRUkpCRUFnQTBHQWdJQ0FlQ0FDUVFac1FYcHFkbkVOQXdzZ0FTMEFBU0lDUVFOMklnVkJjR29nQlNBRFFScDFhbkpCQjAwRVFDQUNRWUIvYWlBRFFRWjBjaUlDUVFCT0JFQWdBQ0FDTmdJQVFRSU1CZ3NnQVMwQUFrR0FmMm9pQTBFL1RRUkFJQU1nQWtFR2RISWlBa0VBVGdSQUlBQWdBallDQUVFRERBY0xJQUV0QUFOQmdIOXFJZ0ZCUDAwRVFDQUFJQUVnQWtFR2RISTJBZ0JCQkF3SEN3c0xDd3NMUVlpOEEwSFVBRFlDQUVGL0JVRUFDd3NoQUNBRUpBUWdBQXV4RkFJVWZ3RitJd1FoQ3lNRVFVQnJKQVFnQzBFVWFpRVRJQXRCRUdvaURTQUJOZ0lBSUFCQkFFY2hFaUFMUVJocUlnRkJLR29pRUNFVklBRkJKMm9oRmlBTFFRaHFJaFJCQkdvaEdFRUFJUUVDUUFKQUEwQUNRQ0FNUVg5S0JFQWdCVUgvLy8vL0J5QU1hMG9FZjBHSXZBTkJ5d0EyQWdCQmZ3VWdCU0FNYWdzaERBc2dEU2dDQUNJSkxBQUFJZ1pGRFFJZ0NTRUZBa0FDUUFOQUFrQUNRQUpBQWtBZ0JrRVlkRUVZZFE0bUFRSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnQUNDeUFGSVFZTUJBc01BUXNnRFNBRlFRRnFJZ1UyQWdBZ0JTd0FBQ0VHREFFTEN3d0JDd05BSUFZc0FBRkJKVWNOQVNBRlFRRnFJUVVnRFNBR1FRSnFJZ1kyQWdBZ0Jpd0FBRUVsUmcwQUN3c2dCU0FKYXlFRklCSUVRQ0FBSUFrZ0JSQmpDeUFGRFFFZ0RTQU5LQUlBSWdVZ0RTZ0NBQ3dBQVVGUWFrRUtUd1IvUVg4aENrRUJCU0FGTEFBQ1FTUkdCSDhnQlN3QUFVRlFhaUVLUVFFaEFVRURCVUYvSVFwQkFRc0xhaUlGTmdJQUlBVXNBQUFpQ0VGZ2FpSUdRUjlMUVFFZ0JuUkJpZEVFY1VWeUJFQkJBQ0VHQlVFQUlRY2dDQ0VHQTBCQkFTQUdRUmgwUVJoMVFXQnFkQ0FIY2lFR0lBMGdCVUVCYWlJRk5nSUFJQVVzQUFBaUNFRmdhaUlIUVI5TFFRRWdCM1JCaWRFRWNVVnlSUVJBSUFZaEJ5QUlJUVlNQVFzTEN3SkFJQWhCL3dGeFFTcEdCSDhDZndKQUlBVXNBQUZCVUdwQkNrOE5BQ0FOS0FJQUlnVXNBQUpCSkVjTkFDQUVJQVZCQVdvaUFTd0FBRUZRYWtFQ2RHcEJDallDQUNBRElBRXNBQUJCVUdwQkEzUnFLUU1BcHlFQlFRRWhCeUFGUVFOcURBRUxJQUVFUUVGL0lRd01CQXNnRWdSQUlBSW9BZ0JCQTJwQmZIRWlCU2dDQUNFQklBSWdCVUVFYWpZQ0FBVkJBQ0VCQzBFQUlRY2dEU2dDQUVFQmFnc2hCU0FOSUFVMkFnQWdCa0dBd0FCeUlRaEJBQ0FCYXlFUElBRkJBRWdpRGtVRVFDQUdJUWdMSUE1RkJFQWdBU0VQQ3lBSElRRWdCUVVnRFJDUEFpSVBRUUJJQkVCQmZ5RU1EQU1MSUFZaENDQU5LQUlBQ3lJR0xBQUFRUzVHQkVBZ0Jpd0FBVUVxUndSQUlBMGdCa0VCYWpZQ0FDQU5FSThDSVFVZ0RTZ0NBQ0VHREFJTElBWXNBQUpCVUdwQkNra0VRQ0FOS0FJQUlnWXNBQU5CSkVZRVFDQUVJQVpCQW1vaUJTd0FBRUZRYWtFQ2RHcEJDallDQUNBRElBVXNBQUJCVUdwQkEzUnFLUU1BcHlFRklBMGdCa0VFYWlJR05nSUFEQU1MQ3lBQkJFQkJmeUVNREFNTElCSUVRQ0FDS0FJQVFRTnFRWHh4SWdZb0FnQWhCU0FDSUFaQkJHbzJBZ0FGUVFBaEJRc2dEU0FOS0FJQVFRSnFJZ1kyQWdBRlFYOGhCUXNMUVFBaERnTkFJQVlzQUFCQnYzOXFRVGxMQkVCQmZ5RU1EQUlMSUEwZ0JrRUJhaUlITmdJQUlBNUJPbXdnQml3QUFHcEJ6T1VBYWl3QUFDSVJRZjhCY1NJR1FYOXFRUWhKQkVBZ0JpRU9JQWNoQmd3QkN3c2dFVVVFUUVGL0lRd01BUXNnQ2tGL1NpRVhBa0FDUUNBUlFSTkdCRUFnRndSQVFYOGhEQXdFQlF3Q0N3QUZJQmNFUUNBRUlBcEJBblJxSUFZMkFnQWdDeUFESUFwQkEzUnFLUU1BTndNQURBSUxJQkpGQkVCQkFDRU1EQVFMSUFzZ0JpQUNFTEVCSUEwb0FnQWhCd3NNQVFzZ0VrVUVRRUVBSVFVTUF3c0xJQWRCZjJvc0FBQWlCa0ZmY1NFSElBNUJBRWNnQmtFUGNVRURSbkZGQkVBZ0JpRUhDeUFJUWYvL2UzRWhDaUFJUVlEQUFIRUVmeUFLQlNBSUN5RUdBa0FDUUFKQUFrQUNRQUpBQWtBQ1FBSkFBa0FDUUFKQUFrQUNRQUpBQWtBQ1FBSkFBa0FDUUNBSFFjRUFhdzQ0Q3d3SkRBc0xDd3dNREF3TURBd01EQXdNQ2d3TURBd0NEQXdNREF3TURBd0xEQVlFQ3dzTERBUU1EQXdIQUFNQkRBd0lEQVVNREFJTUN3SkFBa0FDUUFKQUFrQUNRQUpBQWtBZ0RrSC9BWEZCR0hSQkdIVU9DQUFCQWdNRUJ3VUdCd3NnQ3lnQ0FDQU1OZ0lBUVFBaEJRd2JDeUFMS0FJQUlBdzJBZ0JCQUNFRkRCb0xJQXNvQWdBZ0RLdzNBd0JCQUNFRkRCa0xJQXNvQWdBZ0REc0JBRUVBSVFVTUdBc2dDeWdDQUNBTU9nQUFRUUFoQlF3WEN5QUxLQUlBSUF3MkFnQkJBQ0VGREJZTElBc29BZ0FnREt3M0F3QkJBQ0VGREJVTFFRQWhCUXdVQzBINEFDRUhJQVZCQ0UwRVFFRUlJUVVMSUFaQkNISWhCZ3dMQ3d3S0N5QVZJQXNwQXdBaUdTQVFFTDRESWdocklncEJBV29oRGtFQUlRbEIzZWtBSVFjZ0JrRUljVVVnQlNBS1NuSkZCRUFnRGlFRkN3d05DeUFMS1FNQUlobENBRk1FUUNBTFFnQWdHWDBpR1RjREFFRUJJUWxCM2VrQUlRY0ZJQVpCZ0JCeFJTRUlJQVpCQVhFRWYwSGY2UUFGUWQzcEFBc2hCeUFHUVlFUWNVRUFSeUVKSUFoRkJFQkIzdWtBSVFjTEN3d0pDMEVBSVFsQjNla0FJUWNnQ3lrREFDRVpEQWdMSUJZZ0N5a0RBRHdBQUNBV0lRaEJBQ0VKUWQzcEFDRU9JQkFoQjBFQklRVWdDaUVHREF3TFFZaThBeWdDQUJDU0FpRUlEQWNMSUFzb0FnQWlDRVVFUUVHQzdnQWhDQXNNQmdzZ0ZDQUxLUU1BUGdJQUlCaEJBRFlDQUNBTElCUTJBZ0JCZnlFS0lCUWhDQXdHQ3lBTEtBSUFJUWdnQlFSQUlBVWhDZ3dHQlNBQVFTQWdEMEVBSUFZUVprRUFJUVVNQ0FzQUN5QUFJQXNyQXdBZ0R5QUZJQVlnQnhDOUF5RUZEQWtMSUFraENFRUFJUWxCM2VrQUlRNGdFQ0VIREFZTElBc3BBd0FpR1NBUUlBZEJJSEVRdndNaENDQUhRUVIxUWQzcEFHb2hCeUFHUVFoeFJTQVpRZ0JSY2lJSkJFQkIzZWtBSVFjTElBa0VmMEVBQlVFQ0N5RUpEQU1MSUJrZ0VCQ1NBU0VJREFJTElBaEJBQ0FGRU1NRElnWkZJUkVnQmlBSWF5RUpJQWdnQldvaEJ5QVJSUVJBSUFraEJRdEJBQ0VKUWQzcEFDRU9JQkZGQkVBZ0JpRUhDeUFLSVFZTUF3c2dDQ0VKUVFBaEJVRUFJUWNEUUFKQUlBa29BZ0FpRGtVTkFDQVRJQTRRc0FFaUIwRUFTQ0FISUFvZ0JXdExjZzBBSUFsQkJHb2hDU0FLSUFjZ0JXb2lCVXNOQVFzTElBZEJBRWdFUUVGL0lRd01CQXNnQUVFZ0lBOGdCU0FHRUdZZ0JRUkFRUUFoQndOQUlBZ29BZ0FpQ1VVTkF5QVRJQWtRc0FFaUNTQUhhaUlISUFWS0RRTWdDRUVFYWlFSUlBQWdFeUFKRUdNZ0J5QUZTUTBBREFNTEFBVkJBQ0VGREFJTEFBc2dCa0gvLzN0eElRb2dCVUYvU2dSQUlBb2hCZ3NnQlVFQVJ5QVpRZ0JTSWdweUlRNGdCU0FWSUFocklBcEJBWE5CQVhGcUlncEtCRUFnQlNFS0N5QU9CRUFnQ2lFRkN5QU9SUVJBSUJBaENBc2dCeUVPSUJBaEJ3d0JDeUFBUVNBZ0R5QUZJQVpCZ01BQWN4Qm1JQThnQlVvRVFDQVBJUVVMREFJTElBQkJJQ0FQSUFVZ0J5QUlheUlLU0FSL0lBb0ZJQVVMSWhFZ0NXb2lCMGdFZnlBSEJTQVBDeUlGSUFjZ0JoQm1JQUFnRGlBSkVHTWdBRUV3SUFVZ0J5QUdRWUNBQkhNUVppQUFRVEFnRVNBS1FRQVFaaUFBSUFnZ0NoQmpJQUJCSUNBRklBY2dCa0dBd0FCekVHWU1BUXNMREFFTElBQkZCRUFnQVFSQVFRRWhBQU5BSUFRZ0FFRUNkR29vQWdBaUFRUkFJQU1nQUVFRGRHb2dBU0FDRUxFQklBQkJBV29oQVNBQVFRbElCRUFnQVNFQURBSUZJQUVoQUFzTEN5QUFRUXBJQkVBRFFDQUVJQUJCQW5ScUtBSUFCRUJCZnlFTURBVUxJQUJCQVdvaEFTQUFRUWxJQkVBZ0FTRUFEQUVGUVFFaERBc0xCVUVCSVF3TEJVRUFJUXdMQ3dzZ0N5UUVJQXdMN1FJQkMzOGpCQ0VFSXdSQjRBRnFKQVFnQkVHSUFXb2hCU0FFUWRBQWFpSURRZ0EzQWdBZ0EwSUFOd0lJSUFOQ0FEY0NFQ0FEUWdBM0FoZ2dBMElBTndJZ0lBUkIrQUJxSWdZZ0FpZ0NBRFlDQUVFQUlBRWdCaUFFSUFNUXpRRkJBRWdFUUVGL0lRRUZJQUFvQWt3YVFRQWhBaUFBS0FJQUlRY2dBQ3dBU2tFQlNBUkFJQUFnQjBGZmNUWUNBQXNnQUVFd2FpSUlLQUlBQkVBZ0FDQUJJQVlnQkNBREVNMEJJUUVGSUFCQkxHb2lDU2dDQUNFS0lBa2dCVFlDQUNBQVFSeHFJZ3dnQlRZQ0FDQUFRUlJxSWdzZ0JUWUNBQ0FJUWRBQU5nSUFJQUJCRUdvaURTQUZRZEFBYWpZQ0FDQUFJQUVnQmlBRUlBTVF6UUVoQVNBS0JFQWdBRUVBUVFBZ0FDZ0NKRUVmY1VIS0FHb1JBUUFhSUFzb0FnQkZCRUJCZnlFQkN5QUpJQW8yQWdBZ0NFRUFOZ0lBSUExQkFEWUNBQ0FNUVFBMkFnQWdDMEVBTmdJQUN3c2dBQ0FBS0FJQUlnTWdCMEVnY1hJMkFnQWdBMEVnY1FSQVFYOGhBUXNMSUFRa0JDQUJDeDhCQW44Z0FDQUFFRmtpQVVFQ2RHcEJmR29oQWlBQkJIOGdBZ1VnQUFzTERBQWdBQ0FCRU1JREdpQUFDKzhCQWdKL0FuNGdBQ0FBS0FJQUtBSVVRUWR4UVlZQmFoRUFBQ0VESUFBb0FnQW9BaEFoQVVFQUpBVWdBU0FBUVFCQkFFRUNFRkFqQlNFQlFRQWtCU0FCUVFGeFJRUkFJQUFvQWdBb0FoUWhBVUVBSkFVZ0FTQUFFRTZ0SXdldFFpQ0doQ0VFSXdVaEFVRUFKQVVnQVVFQmNVVUVRQ0FBS0FJQUtBSVFJUUZCQUNRRklBRWdBQ0FEcHlBRFFpQ0lwMEVBRUZBakJTRUJRUUFrQlNBQlFRRnhCRUJCQUJBWUVGb0ZJQVFQQ3dzTEVCY2hBU0FBS0FJQUtBSVFJUUpCQUNRRklBSWdBQ0FEcHlBRFFpQ0lwMEVBRUZBakJTRUFRUUFrQlNBQVFRRnhCRUJCQUJBWUVGb0ZJQUVRSGd0Q0FBdGNBUUYvSUFCQnhCMDJBZ0FnQUVFQU5nSUVJQUJCQURZQ0dDQUFRUUE2QUFnZ0FFR1l3QUJxUVFBMkFnQWdBRUVBT2dBVklBQkJER29pQVVFQU5nSUFJQUZCQURzQkJDQUJRUUE2QUFZZ0FFRUJPZ0FUSUFCQkFUb0FGQXMvQVFKL0lBQkJCR29pQWlnQ0FDSUJSUVJBSUFBc0FCUUVRRUdzOVFJZ0FFRVlhaEMwQWlBQ0tBSUFJUUVGUW44UEN3c2dBUkJSclNNSHJVSWdob1FMNVFJQ0NYOEJmaUFBUVJGcUlnVXNBQUFFZmlBQUlBQW9BZ0FvQWhSQkIzRkJoZ0ZxRVFBQUJVSUFDeUVNSUFCQkRHb2hDRUh3SHlnQ0FDRUpJQUJCQkdvaEJpQUFRUWhxSVFjZ0FFR1l3QUJxSVFvZ0FFRVVhaUVMSUFCQkdHb2hBd0pBQWtBQ1FBTkFJQWdvQWdCQkFVWUVRQ0FHSUFrMkFnQUxJQWNzQUFBRVFDQUhRUUE2QUFBTElBWW9BZ0FnQVNBQ0VFRWlCRUYvUncwRElBcEJBallDQUNBTExBQUFSUVJBUVg4aEJBd0VDeUFGTEFBQURRRWdDQ2dDQUEwQ0RBSUxBQXNnQWtVRVFFRUFEd3RCQUNFRVFRQWhBd05BSUFBZ0RDQURyWHhCQUNBQUtBSUFLQUlRUVFOeFFiZ0NhaEVDQUNBSUtBSUFRUUZHQkVBZ0JpQUpOZ0lBQ3lBSExBQUFCRUFnQjBFQU9nQUFDeUFHS0FJQUlBRWdBaUFEYXlJRlFZQUVTUVIvSUFVRlFZQUVDeEJCSWdWQmYwWUVmMEdBQkFVZ0JRc2dCR29oQkNBRFFZQUVhaUlESUFKSkRRQUxJQVFQQzBHczlRSWdBeEM2QkVGL0R3c2dCQXVNQWdFRGZ5QUJLQUlBSVFJZ0FFSUFOd0lBSUFCQkFEWUNDQ0FDUWUvLy8vOERTd1JBSUFBUWlnRUxJQUZCQkdvaEJBSkFJQUpCQWtrRVFDQUFJQUk2QUFzZ0FnUkFJQUFoQXdVZ0FDQUNRUUowYWtFQU5nSUFEd3NGSUFKQkJHcEJmSEVpQVVILy8vLy9BMDBFUUNBQUlBRkJBblFRWHlJRE5nSUFJQUFnQVVHQWdJQ0FlSEkyQWdnZ0FDQUNOZ0lFREFJTFFRZ1FGQ0VBUVFBa0JVRVhJQUJCek80QUVBMGpCU0VCUVFBa0JTQUJRUUZ4QkVBUUZ5RUJJQUFRR2lBQkVCNEZJQUJCN0NVMkFnQWdBRUg0Q2tFTUVCc0xDd3RCQUNRRlFSMGdBeUFFSUFJUUJ4b2pCU0VBUVFBa0JTQUFRUUZ4QkVCQkFCQVlJZ0FRV2dVZ0F5QUNRUUowYWtFQU5nSUFDd3NQQUNBQklBQW9BZ0JxSUFJMkFnQUxEUUFnQVNBQUtBSUFhaWdDQUF2UUJnRUNmeUFBS0FJQUlnRUVRQ0FCRUZJZ0FFRUFOZ0lBQ3lBQVFRUnFJZ0VvQWdBaUFnUkFJQUlRVWlBQlFRQTJBZ0FMSUFCQkNHb2lBU2dDQUNJQ0JFQWdBaEJTSUFGQkFEWUNBQXNnQUVFTWFpSUJLQUlBSWdJRVFDQUNFRklnQVVFQU5nSUFDeUFBUVJCcUlnRW9BZ0FpQWdSQUlBSVFVaUFCUVFBMkFnQUxJQUJCRkdvaUFTZ0NBQ0lDQkVBZ0FoQlNJQUZCQURZQ0FBc2dBRUVZYWlJQktBSUFJZ0lFUUNBQ0VGSWdBVUVBTmdJQUN5QUFRUnhxSWdFb0FnQWlBZ1JBSUFJUVVpQUJRUUEyQWdBTElBQkJJR29pQVNnQ0FDSUNCRUFnQWhCU0lBRkJBRFlDQUFzZ0FFRWthaUlCS0FJQUlnSUVRQ0FDRUZJZ0FVRUFOZ0lBQ3lBQVFTaHFJZ0VvQWdBaUFnUkFJQUlRVWlBQlFRQTJBZ0FMSUFCQkxHb2lBU2dDQUNJQ0JFQWdBaEJTSUFGQkFEWUNBQXNnQUVFd2FpSUJLQUlBSWdJRVFDQUNFRklnQVVFQU5nSUFDeUFBUVRScUlnRW9BZ0FpQWdSQUlBSVFVaUFCUVFBMkFnQUxJQUJCT0dvaUFTZ0NBQ0lDQkVBZ0FoQlNJQUZCQURZQ0FBc2dBRUU4YWlJQktBSUFJZ0lFUUNBQ0VGSWdBVUVBTmdJQUN5QUFRVUJySWdFb0FnQWlBZ1JBSUFJUVVpQUJRUUEyQWdBTElBQkJ4QUJxSWdFb0FnQWlBZ1JBSUFJUVVpQUJRUUEyQWdBTElBQkJ5QUJxSWdFb0FnQWlBZ1JBSUFJUVVpQUJRUUEyQWdBTElBQkJ6QUJxSWdFb0FnQWlBZ1JBSUFJUVVpQUJRUUEyQWdBTElBQkIwQUJxSWdFb0FnQWlBZ1JBSUFJUVVpQUJRUUEyQWdBTElBQkIxQUJxSWdFb0FnQWlBZ1JBSUFJUVVpQUJRUUEyQWdBTElBQkIyQUJxSWdFb0FnQWlBZ1JBSUFJUVVpQUJRUUEyQWdBTElBQkIzQUJxSWdFb0FnQWlBZ1JBSUFJUVVpQUJRUUEyQWdBTElBQkI0QUJxSWdFb0FnQWlBZ1JBSUFJUVVpQUJRUUEyQWdBTElBQkI1QUJxSWdFb0FnQWlBZ1JBSUFJUVVpQUJRUUEyQWdBTElBQkI2QUJxSWdFb0FnQWlBZ1JBSUFJUVVpQUJRUUEyQWdBTElBQkI3QUJxSWdFb0FnQWlBZ1JBSUFJUVVpQUJRUUEyQWdBTElBQkI4QUJxSWdFb0FnQWlBZ1JBSUFJUVVpQUJRUUEyQWdBTElBQkI5QUJxSWdFb0FnQWlBZ1JBSUFJUVVpQUJRUUEyQWdBTElBQkIrQUJxSWdFb0FnQWlBZ1JBSUFJUVVpQUJRUUEyQWdBTElBQkIvQUJxSWdBb0FnQWlBVVVFUUE4TElBRVFVaUFBUVFBMkFnQUw2QW9CR244akJDRUNJd1JCRUdva0JDQUNRUWhxSVJJZ0FpRUpJQUJCNEFCcUlnb29BZ0FnQUVIa0FHb2lEQ2dDQUNJQ2F5QUFRZEROQTJvaURTZ0NBQ0lEY1NFVElBQkJOR29oQndKQUFrQWdBRUU0YWlJTEtBSUFSUTBBSUFCQkhHb2hEaUFBUVJocUlSUWdBRUVnYWlFWElBQkJGR29oRHlBQVFjek5BMm9oR0NBQVFhaVlBV29oRlNBQVFhU1dBV29oRUNBQVFhaVdBV29oRVNBQVFicVlBV29oR1NBQVFjQ1lBV29oRmlBVElRRUNRQUpBQWtBQ1FBTkFBa0FnQnlnQ0FDSUdJQVZCQkhScUlob3NBQUJCQ0VjRVFDQUdJQVZCQkhScUtBSUVJUVFnQmlBRlFRUjBha0VOYWlJSUxBQUFCRUFnQkNBTUtBSUFheUFEY1NBVFN3MENJQWhCQURvQUFBd0NDeUFHSUFWQkJIUnFLQUlJSVFZZ0F5QUVJQUpyY1NBQlNRUkFJQVFnQWtjRVFDQUFJQUlnQkJDekFTQUVJUUlnQ2lnQ0FDQUVheUFOS0FJQUlnTnhJUUVMSUFZZ0FVc05CQ0FHQkVBZ0RpZ0NBQ0VCSUJRZ0JqWUNBQ0FCSUFaSkJFQWdGeWdDQUNJQ1FRQkhJQVlnQWt0eEJIOGdDU0FDTmdJQVFhejFBa0hZR3lBSkVHQkJyUFVDRUZZZ0RpZ0NBQ0VCSUJRb0FnQUZJQVlMSVFJZ0R5Z0NBQ0FDSUFGQklHb2dBVUVDZG1vaUFVc0VmeUFDQlNBQklnSUxFRmNpQVVVRVFFR3M5UUlRVmdzZ0R5QUJOZ0lBSUE0Z0FqWUNBQXNnRHlnQ0FDRUJBa0FnQXlBR0lBUnFjU0lEUVg5cUlBUkpCRUFnR0NnQ0FDQUVheUVJSUJVc0FBQkZCRUFnQVNBUUtBSUFJQVJxSUFnUVV4b2dBU0FJYWlBUUtBSUFJQU1RVXhvTUFnc2dDQVJBUVFBaEFnTkFJQUVnQW1vZ0VTQUNJQVJxRUhVc0FBQTZBQUFnQWtFQmFpSUNJQWhIRFFBTElBTkZEUUlMSUFFZ0NHb2hCRUVBSVFJRFFDQUVJQUpxSUJFZ0FoQjFMQUFBT2dBQUlBSkJBV29pQWlBRFJ3MEFDd1VnRlN3QUFBUkFRUUFoQWdOQUlBRWdBbW9nRVNBQ0lBUnFFSFVzQUFBNkFBQWdBa0VCYWlJQ0lBWkhEUUFMQlNBQklCQW9BZ0FnQkdvZ0JoQlRHZ3NMQ3lBQUlBRWdCaUFhRVBnRElRSWdCeWdDQUNBRlFRUjBha0VJT2dBQUlBSUVRQ0FBS0FJQUlBSWdCaEJsQ3lBWlFRRTZBQUFnRmlBV0tRTUFJQWF0ZkRjREFDQUtLQUlBSUFNaUFtc2dEU2dDQUNJRGNTRUJDd3NMQ3lBRlFRRnFJZ1VnQ3lnQ0FDSUVTUTBBUVFBaEFTQUVJUU1NQWdzQUN5QU1JQUkyQWdBZ0JTQUxLQUlBSWdOSkJFQWdCeWdDQUNFQkEwQWdBU0FGUVFSMGFpd0FBRUVJUndSQUlBRWdCVUVFZEdwQkFEb0FEUXNnQlVFQmFpSUZJQU5KRFFCQkFTRUdEQU1MQUFWQkFTRUJDd3NnQXdSQUlBRWhCZ3dCQlNBQlJRMERDd3dCQzBFQUlRVkJBQ0VCUVFFaEJBTkFJQVJGQkVBZ0J5Z0NBQ0lESUFFZ0JXdEJCSFJxSWdRZ0F5QUJRUVIwYWlJREtRSUFOd0lBSUFRZ0F5a0NDRGNDQ0NBTEtBSUFJUU1MSUFVZ0J5Z0NBQ0FCUVFSMGFpd0FBRUVJUm1vaUJVVWhCQ0FCUVFGcUlnRWdBMGtOQUFzZ0JFVUVRQ0FBUVR4cUlnUW9BZ0FoQVNBTElBTWdCV3NpQXpZQ0FDQUJJQU5KQkVBZ0FFRkFheWdDQUNJRlFRQkhJQU1nQlV0eEJFQWdFaUFGTmdJQVFhejFBa0hZR3lBU0VHQkJyUFVDRUZZZ0JDZ0NBQ0VCSUFzb0FnQWhBd3NnQnlnQ0FDQURJQUZCSUdvZ0FVRUNkbW9pQVVzRWZ5QURCU0FCSWdNTFFRUjBFRmNpQVVVRVFFR3M5UUlRVmdzZ0J5QUJOZ0lBSUFRZ0F6WUNBQ0FHRFFJTUF3c0xJQVpGRFFFTElBb29BZ0FoQWd3QkN5QUFJQUlnQ2lnQ0FCQ3pBU0FNSUFvb0FnQWlBallDQUFzZ0RTZ0NBQ0VESUFCQm9KWUJhaUlGSUFCQnpNMERhaWdDQUNJQVFZQ0FnQUpKQkg4Z0FBVkJnSUNBQWdzZ0Ftb2dBM0VpQVRZQ0FDQU1LQUlBSVFBZ0FTQUNSd1JBSUFBZ0FrWUVRQ0FKSkFRUEN5QURJQUFnQW10eElBTWdBU0FDYTNGUEJFQWdDU1FFRHdzTElBVWdBRFlDQUNBSkpBUUxRUUVDZnlBQVFSQnFJZ1FvQWdBaUF5QUFLQUlFVHdSQVFRQVBDeUFFSUFOQkFXb2dBQ2dDQUNBRFFRSjBhaUlBRUZscU5nSUFJQUVnQUNBQ0VHOGFRUUVMdlF3QkVIOENRQ01FSVFZakJFR3dBMm9rQkNBR1FaUURhaUVKQWtBZ0FFRUVhaUlGS0FJQUlnUWdBRUhvQUdvaUNDZ0NBQ0lCUVdkcVNnUkFJQUVnQkdzaUFrRUFTQTBDSUFCQkJHb2hBeUFFUVlDQUFVb0VRQ0FDUVFCS0JFQWdBQ2dDRUNJQklBRWdCR29nQWhCZEdnc2dBMEVBTmdJQUlBZ2dBallDQUFVZ0FTRUNDeUFBS0FJQUlBQW9BaEFnQW1wQmdJQUNJQUpyRUY0aEFpQUlLQUlBSWdRZ0Ftb2hBU0FDUVFCS0JFQWdDQ0FCTmdJQUlBQWdBVUZpYWpZQ2JBd0NDeUFBSUFSQlltbzJBbXdnQWtGL1JnMENDd3NnQlVFQUlBQkJDR29pQ3lnQ0FHdEJCM0VRVlNBQVFjak1BMm9oQWlBRkVGZ2lBVUdBZ0FKeEJFQWdBa0VCTmdJQUlBQkJ3TEVDYWlBQUlBQkJzTWtEYWhDTUJDRUFJQVlrQkNBQUR3c2dBa0VBTmdJQUlBQkJ1TEVDYWtFQU5nSUFJQUJCdkxFQ2FrRUFOZ0lBSUFGQmdJQUJjVVVFUUNBQVFiVEpBMnBCQUVHVUF4QlVHZ3NnQlVFQ0VGVkJBQ0VDQTBBZ0JSQllRUXgySVFFZ0JVRUVFRlVDUUFKQUlBRkIvd0Z4UVE5R0JFQWdCUkJZUVF4MlFmOEJjU0VFSUFWQkJCQlZJQVFFUUNBRVFRSnFJUUVnQ1NBQ2FrRUFRUUJCZmlBRWF5SUVJQUpCYkdvaUEwc0VmeUFFQlNBREMyc1FWQm9EUUNBQlFYOXFJUVFnQWtFQmFpSURRUlJKSUFGQkFVcHhCRUFnQkNFQklBTWhBZ3dCQ3dzRlFROGhBUXdDQ3dVZ0FVSC9BWEVoQVF3QkN3d0JDeUFKSUFKcUlBRTZBQUFMSUFKQkFXb2lBa0VVU1EwQUMwRUFJQWtnQUVHMCtBQnFJZzFCRkJCb0lBQkJCR29oRGlBQVFSQnFJUWtnQUVIc0FHb2hEQ0FBUWJqNUFHb2hEeUFHUVg5cUlSQkJBQ0VDUVFBaEJBSkFBa0FEUUFKQUFrQUNRQUpBQTBBZ0JTZ0NBQ0lISUFnb0FnQWlBMEY3YWtvRVFDQURJQWRySWdGQkFFZ05DQ0FIUVlDQUFVb0VRQ0FCUVFCS0JFQWdDU2dDQUNJRElBTWdCMm9nQVJCZEdnc2dEa0VBTmdJQUlBZ2dBVFlDQUFVZ0F5RUJDeUFBS0FJQUlBa29BZ0FnQVdwQmdJQUNJQUZyRUY0aEFTQUlLQUlBSWdjZ0FXb2hBeUFCUVFCS0JFQWdDQ0FETmdJQUlBd2dBMEZpYWpZQ0FBVWdEQ0FIUVdKcU5nSUFJQUZCZjBZTkNRc0xJQWtvQWdBaUFTQUZLQUlBSWdOQkFXcHFMUUFBUVFoMElBRWdBMm90QUFCQkVIUnlJQUVnQTBFQ2Ftb3RBQUJ5UVFnZ0N5Z0NBQ0lLYTNaQi92OERjU0lISUFCQnVQZ0FhaUFQS0FJQUlnRkJBblJxS0FJQVNRUi9JQVVnQ2lBQVFiejVBR29nQjBFUUlBRnJkaUlCYWkwQUFHb2lCMEVEZGlBRGFqWUNBQ0FMSUFkQkIzRTJBZ0FnQUVHOGdRRnFJQUZCQVhScUJRTkFBa0FnQVVFQmFpSUJRUTlQQkVCQkR5RUJEQUVMSUFjZ0FFRzQrQUJxSUFGQkFuUnFLQUlBVHcwQkN3c2dCU0FCSUFwcUlncEJBM1lnQTJvMkFnQWdDeUFLUVFkeE5nSUFJQUJCdkpFQmFpQUhJQUFnQVVFQ2RHcEJ0UGdBYWlnQ0FHdEJFQ0FCYTNZZ0FFSDQrQUJxSUFGQkFuUnFLQUlBYWlJQklBMG9BZ0JQQkg5QkFBVWdBUXRCQVhScUN5SUJMZ0VBSWdGQi8vOERjVUVRU0EwQklBRkIvLzhEY1VFU1RnMERJQVVRV0NFRElBRkJFRVlFZnlBRlFRTVFWU0FEUVExMlFRTnFCU0FGUVFjUVZTQURRUWwyUVF0cUN5RUJJQVJGRFFBTUFnc0FDeUFHSUFKcUlBQkJ0TWtEYWlBQ2FpMEFBQ0FCUWYvL0EzRnFRUTl4T2dBQUlBSkJBV29oQWd3Q0N5QUNRWlFEVGcwRElCQWdBbW9zQUFBaEJ3TkFJQUZCZjJvaEF5QUdJQUpxSUFjNkFBQWdBa0VCYWlFRUlBSkJrd05JSUFGQkFVcHhCRUFnQkNFQ0lBTWhBUXdCQlNBRUlRSUxDd3dCQ3lBRkVGZ2hCQ0FCUVJKR0JIOGdCVUVERUZVZ0JFRU5ka0VEYWdVZ0JVRUhFRlVnQkVFSmRrRUxhZ3NoQVNBQ1FaUURUZzBDSUFZZ0FtcEJBRUVBSUFKQjdIeHFJZ1JCZmlBQmF5QUJRWDl6SWdOQmZrb0VmeUFEQlVGK0Myc2lBMHNFZnlBRUJTQURDMnNRVkJvRFFDQUJRWDlxSVFNZ0FrRUJhaUVFSUFKQmt3TklJQUZCQVVweEJFQWdBeUVCSUFRaEFnd0JCU0FFSVFJTEN3c2dBa0VBU2lFRUlBSkJsQU5JRFFBTEN5QUFRY3pNQTJwQkFUb0FBQ0FGS0FJQUlBZ29BZ0JLRFFGQkFDQUdJQUJCaEFGcVFhc0NFR2hCQUNBR1Fhc0NhaUFBUWZBZWFrRThFR2hCQUNBR1FlY0NhaUFBUWR3OGFrRVJFR2hCQUNBR1FmZ0NhaUFBUWNqYUFHcEJIQkJvSUFCQnRNa0RhaUFHUVpRREVGTWFJQVlrQkVFQkR3dEJBQ0VBSUFZa0JFRUFEd3NnQmlRRVFRQUxwQXNCQjM4Z0FFRUVhaUlERUZnaEJnSi9JQUJCMEs0QmFpSUhLQUlBSWdGQi8rc0JTd1IvUVlEK0F5QUdRZkQvQTNFaUJFc0VmeUFEUVFnUVZVRUlJUUZCQUFWQkNDRUJBMEFnQVVFQmFpRUJJQUpCQVdvaUJVRUNkRUd3R0dvb0FnQWdCRTBFUUNBRklRSU1BUXNMSUFNZ0FSQlZJQUpCQW5SQnNCaHFLQUlBQ3lFQ0lBUWdBbXRCRUNBQmEzWWhBaUFCUVFKMFFjZ1lhZ1VnQVVIL3V3RkxCRUJCZ0JBZ0JrSHcvd054SWdSTEJIOGdBMEVHRUZWQkJpRUJRUUFGUVFZaEFRTkFJQUZCQVdvaEFTQUNRUUZxSWdWQkFuUkIvQmhxS0FJQUlBUk5CRUFnQlNFQ0RBRUxDeUFESUFFUVZTQUNRUUowUWZ3WWFpZ0NBQXNoQWlBRUlBSnJRUkFnQVd0MklRSWdBVUVDZEVHWUdXb01BZ3NnQVVILzZ3QkxCRUJCZ0NBZ0JrSHcvd054SWdSTEJIOGdBMEVGRUZWQkJTRUJRUUFGUVFVaEFRTkFJQUZCQVdvaEFTQUNRUUZxSWdWQkFuUkJzQlpxS0FJQUlBUk5CRUFnQlNFQ0RBRUxDeUFESUFFUVZTQUNRUUowUWJBV2FpZ0NBQXNoQWlBRUlBSnJRUkFnQVd0MklRSWdBVUVDZEVIUUZtb01BZ3NnQmtIdy93TnhJUVFnQVVIL0cwc0VmeUFFUVlEQUFDQUVTd1IvSUFOQkJSQlZRUVVoQVVFQUJVRUZJUUVEUUNBQlFRRnFJUUVnQWtFQmFpSUZRUUowUVlRWGFpZ0NBQ0FFVFFSQUlBVWhBZ3dCQ3dzZ0F5QUJFRlVnQWtFQ2RFR0VGMm9vQWdBTElnSnJRUkFnQVd0MklRSWdBVUVDZEVHa0Yyb0ZJQVJCZ0lBQ0lBUkxCSDhnQTBFRUVGVkJCQ0VCUVFBRlFRUWhBUU5BSUFGQkFXb2hBU0FDUVFGcUlnVkJBblJCMkJkcUtBSUFJQVJOQkVBZ0JTRUNEQUVMQ3lBRElBRVFWU0FDUVFKMFFkZ1hhaWdDQUFzaUFtdEJFQ0FCYTNZaEFpQUJRUUowUWZ3WGFnc0xDeUlCS0FJQUlBSnFRZjhCY1NFQklBQkI3SzRCYWlJRktBSUFCRUFnQmtIL0gwc2dBVVZ4Qkg5QmdBSWlBUVVnQVF0QmYyb2hBaUFCQkVBZ0FpRUJCU0FERUZnaEJDQURRUUVRVlNBRVFZQ0FBbkVFUUNBRlFRQTJBZ0FnQUVIb3JnRnFRUUEyQWdBUEN5QURRUUVRVlVHQUlDQURFRmhCOFA4RGNTSUdTd1IvSUFOQkJSQlZRUVVoQVVFQUJVRUZJUUZCQUNFQ0EwQWdBVUVCYWlFQklBSkJBV29pQlVFQ2RFR3dGbW9vQWdBZ0JrMEVRQ0FGSVFJTUFRc0xJQU1nQVJCVklBSkJBblJCc0JacUtBSUFDeUVDSUFZZ0FtdEJFQ0FCYTNZZ0FVRUNkRUhRRm1vb0FnQnFRUVYwSUFNUVdFRUxkbkloQmlBRFFRVVFWU0FBUWJDWUFXb2lBU0FCS1FNQUlBUkJEblpCQVhGQkEyb2lBYTE5TndNQUlBQkJwSllCYWlFRElBQkI0QUJxSWdVb0FnQWhBaUFBUWRETkEyb2lCQ2dDQUNFQUEwQWdBeWdDQUNJSElBSnFJQWNnQWlBR2F5QUFjV29zQUFBNkFBQWdCU0FGS0FJQVFRRnFJQVFvQWdBaUFIRWlBallDQUNBQlFYOXFJZ0VOQUFzUEN3VWdBRUhvcmdGcUlnTW9BZ0FoQWlBRElBSkJBV28yQWdBZ0FrRVBTZ1JBSUFCQjlLNEJhaWdDQUVVRVFDQUZRUUUyQWdBTEN3c2dCeUFIS0FJQUlBRnFJZ0lnQWtFSWRtczJBZ0FnQUVINHJnRnFJZ0lvQWdCQkVHb2hCU0FDSUFVMkFnQWdCVUgvQVVzRVFDQUNRWkFCTmdJQUlBQkIvSzRCYWlJQ0lBSW9BZ0JCQVhZMkFnQUxJQUJCeXBnQmFpQUJRUUYwYWlJRkx3RUFRUWgySVFJZ0FFR2tsZ0ZxS0FJQUlRTWdBRUhnQUdvaUJDZ0NBQ0VCSUFRZ0FVRUJhallDQUNBRElBRnFJQUk2QUFBZ0FFR3dtQUZxSWdFZ0FTa0RBRUovZkRjREFDQUFRY3FvQVdvZ0JTNEJBQ0lEUWYvL0EzRWlBa0gvQVhGcUlnUXNBQUFoQVNBRUlBRkJBV282QUFBZ0EwRUJha0VRZEVFUWRVSCtBWEZCb1FGS0JFQWdBRUhLbUFGcUlRTWdBRUhLcUFGcUlRUURRRUVBSUFNZ0JCQ2ZBU0FBUWNxb0FXb2dCUzRCQUNJR1FmLy9BM0VpQWtIL0FYRnFJZ2NzQUFBaEFTQUhJQUZCQVdvNkFBQWdCa0VCYWtFUWRFRVFkVUgrQVhGQm9RRktEUUFMQ3lBRklBQkJ5cGdCYWlBQlFmOEJjVUVCZEdvaUFDNEJBRHNCQUNBQUlBSkJBV283QVFBTDd3SUJDSDlCZ0NBZ0FFRUVhaUlFRUZoQjhQOERjU0lEU3dSL0lBUkJCUkJWUVFVaEFVRUFCVUVGSVFFRFFDQUJRUUZxSVFFZ0FrRUJhaUlGUVFKMFFiQVdhaWdDQUNBRFRRUkFJQVVoQWd3QkN3c2dCQ0FCRUZVZ0FrRUNkRUd3Rm1vb0FnQUxJUUlnQXlBQ2EwRVFJQUZyZGlBQlFRSjBRZEFXYWlnQ0FHb2lBVUgvQVVzRVFBOExJQUJCeks0QmFpSUVJQUJCeXFRQmFpQUJRUUYwYWlJRkxnRUFJZ05CLy84RGNTSUNRUWgyTmdJQUlBQkJ5cXdCYWlBQ1FmOEJjV29pQml3QUFDRUJJQVlnQVVFQmFqb0FBQ0FEUVFGcVFSQjBRUkIxUWY4QmNVVUVRQ0FBUWNxa0FXb2hBeUFBUWNxc0FXb2hCZ05BUVFBZ0F5QUdFSjhCSUFRZ0JTNEJBQ0lIUWYvL0EzRWlBa0VJZGpZQ0FDQUFRY3FzQVdvZ0FrSC9BWEZxSWdnc0FBQWhBU0FJSUFGQkFXbzZBQUFnQjBFQmFrRVFkRUVRZFVIL0FYRkZEUUFMQ3lBRklBQkJ5cVFCYWlBQlFmOEJjVUVCZEdvaUFDNEJBRHNCQUNBQUlBSkJBV283QVFBTDZRZ0NFSDhCZmlNRUlRWWpCRUVRYWlRRUlBQXZBUUFoQWlBQlFkUU1haUlOS0FJQUlnTWdBRUVJYWlJS0tBSUFSd1JBSUFNcEFnQWhFZ05BSUFNZ0EwRjRhaUlES1FJQU53SUFJQU1nRWpjQ0FDQURJQW9vQWdCSERRQUxDeUFDUWYvL0EzRWlERUYvYWlFT0lBTkJBV29pQWlBQ0xRQUFRUVJxT2dBQUlBQkJCR29pQnk0QkFDRUNJQWNnQWtILy93TnhRUVJxT3dFQUlBRkI0QXhxS0FJQVFRQkhJZzhnQTBFQmFpSUZMUUFBSWdocVFRRjJJUVFnQlNBRU9nQUFJQWNnQkVIL0FYRTdBUUFnQXlBTVFRTjBhaUVRSUE0aENTQUNRUVJxUVJCMFFSQjFRZi8vQTNFZ0NHc2hCU0FESVFJRFFDQUNRUWhxSVFRZ0JTQUNRUWxxSWdndEFBQWlDMnNoQlNBSUlBc2dEMnBCQVhZaUN6b0FBQ0FISUFzZ0J5OEJBR283QVFBZ0NDd0FBQ0lMUWY4QmNTQUNMUUFCU2dSQUlBUXNBQUFoRVNBR0lBUkJBbW9pQWlnQkFEWUJBQ0FHSUFJdUFRUTdBUVFnQkNFQ0EwQUNRQ0FDSUFKQmVHb2lDQ2tDQURjQ0FDQUlJQW9vQWdCR0RRQWdDMEgvQVhFZ0FrRnhhaTBBQUVvRVFDQUlJUUlNQWdzTEN5QUlJQkU2QUFBZ0FrRjVhaUFMT2dBQUlBaEJBbW9pQWlBR0tBRUFOZ0VBSUFJZ0JpNEJCRHNCQkFzZ0NVRi9haUlKQkVBZ0JDRUNEQUVMQ3lBUVFYbHFMQUFBQkVBZ0FDNEJBQ0VBQlVFQUlRSWdBeUFPUVFOMGFpRURBMEFnQWtFQmFpRUNJQU5CZUdvaEJDQURRWGxxTEFBQVJRUkFJQVFoQXd3QkN3c2dBaUFGYWlFRElBQWdBQzhCQUNBQ2F5SUVRZi8vQTNFaUFqc0JBQ0FFUWYvL0EzRkJBVVlFUUNBS0tBSUFJZ1FzQUFBaEJTQUVMQUFCSVFJZ0JpQUVRUUpxSWdrb0FRQTJBUUFnQmlBSkxnRUVPd0VFQTBBZ0FrSC9BWEVpQWlBQ1FRRjJhMEgvQVhFaEFpQURRUUYxSWdOQkFVb05BQXNnQkNBQlFjaVdBV29nQVNBTVFRRnFRUUYyYWtHNWxRRnFMUUFBUVFKMGFpSUJLQUlBTmdJQUlBRWdCRFlDQUNBTklBYzJBZ0FnQnlBRk9nQUFJQWNnQWpvQUFTQUFRUVpxSWdBZ0JpZ0JBRFlCQUNBQUlBWXVBUVE3QVFRZ0JpUUVEd1VnQXlFRklBSWhBQXNMSUFjZ0JTQUZRUUYyYXlBSEx3RUFhanNCQUNBTVFRRnFRUUYySWdJZ0FFSC8vd054UVFGcVFRRjJJZ05HQkVBZ0NpZ0NBQ0VBQlNBS0tBSUFJUUFnQVNBQ2FrRzVsUUZxTEFBQUlnSkIvd0Z4SVFRZ0FTQURha0c1bFFGcUxBQUFJZ2xCL3dGeElRVWdBaUFKUndSQUlBRkJ5SllCYWlBRlFRSjBhaUlKS0FJQUlnSUVRQ0FKSUFJb0FnQTJBZ0FnQWlBQUlBTkJCSFFRVXhvZ0FDRURJQUloQUFVZ0FVR1VsUUZxSUFScUxRQUFJQUZCbEpVQmFpQUZhaTBBQUNJRGF5RUNJQUFnQTBFRWRHb2hBeUFDSUFGQmxKVUJhaUFCSUFKcVFibVZBV290QUFBaUJHb3RBQUJIQkVBZ0F5QUJRY2lXQVdvZ0JFRi9haUlFUVFKMGFpSUZLQUlBTmdJQUlBVWdBellDQUNBRElBRkJsSlVCYWlBRWFpMEFBQ0lFUVFSMGFpRURJQUlnQkdzaEFnc2dBU0FDYWtHNWxRRnFMUUFBSVFRTElBTWdBVUhJbGdGcUlBUkJBblJxSWdFb0FnQTJBZ0FnQVNBRE5nSUFDeUFLSUFBMkFnQUxJQTBnQURZQ0FDQUdKQVFMdXhJQkNYOGdBRUh3REdwQkFFR0FBaEJVR2lBQVFaQ1ZBV29pQmhDT0JDQUFRZXdNYWlJSUlBQkI1QXhxSWdVb0FnQWlBMEYvY3lJQlFYTktCSDhnQVFWQmN3czJBZ0FnQUVIRWxnRnFJZ2NvQWdBaUFTQUFRY0NXQVdvaUFpZ0NBRVlFUUNBQVFjaVdBV29pQkNnQ0FDSUJCRUFnQkNBQktBSUFOZ0lBQlNBR1FRQVFvQUVoQVNBRktBSUFJUU1MQlNBSElBRkJjR29pQVRZQ0FBc2dBRUhRREdvZ0FUWUNBQ0FBUWNnTWFpSUZJQUUyQWdBZ0FVRUFOZ0lNSUFCQjRBeHFJQU0yQWdBZ0FVR0FBanNCQUNBQlFZRUNPd0VFSUFCQnlKWUJhaUFBUWJtV0FXb3RBQUFpQTBFQ2RHb2lCQ2dDQUNJQkJFQWdCQ0FCS0FJQU5nSUFCU0FDSUFJb0FnQWlBU0FBUVpTVkFXb2dBMm9pQ1MwQUFFRUVkR29pQkRZQ0FDQUVJQWNvQWdCTEJFQWdBaUFFSUFrdEFBQkJCSFJyTmdJQUlBWWdBeENnQVNFQkN3c2dCU2dDQUNBQk5nSUlJQUJCMUF4cUlBRTJBZ0FnQUVIb0RHb2dDQ2dDQURZQ0FDQUFRZkVVYWtFQU9nQUFJQVVvQWdCQkNHb2hBMEVBSVFFRFFDQURLQUlBSUFGQkEzUnFJQUU2QUFBZ0F5Z0NBQ0FCUVFOMGFrRUJPZ0FCSUFNb0FnQWdBVUVEZEdwQkFEWUNCQ0FCUVFGcUlnRkJnQUpIRFFCQkFDRUJDd05BSUFCQjlCUnFJQUZCQjNScVFZQ0FBVUhkK1FBZ0FVRUNhaUlEYm10Qi8vOERjU0lDT3dFQUlBQWdBVUVIZEdwQmhCVnFJQUk3QVFBZ0FDQUJRUWQwYWtHVUZXb2dBanNCQUNBQUlBRkJCM1JxUWFRVmFpQUNPd0VBSUFBZ0FVRUhkR3BCdEJWcUlBSTdBUUFnQUNBQlFRZDBha0hFRldvZ0Fqc0JBQ0FBSUFGQkIzUnFRZFFWYWlBQ093RUFJQUFnQVVFSGRHcEI1QlZxSUFJN0FRQWdBQ0FCUVFkMGFrSDJGR3BCZ0lBQlFiOCtJQU51YTBILy93TnhJZ0k3QVFBZ0FDQUJRUWQwYWtHR0ZXb2dBanNCQUNBQUlBRkJCM1JxUVpZVmFpQUNPd0VBSUFBZ0FVRUhkR3BCcGhWcUlBSTdBUUFnQUNBQlFRZDBha0cyRldvZ0Fqc0JBQ0FBSUFGQkIzUnFRY1lWYWlBQ093RUFJQUFnQVVFSGRHcEIxaFZxSUFJN0FRQWdBQ0FCUVFkMGFrSG1GV29nQWpzQkFDQUFJQUZCQjNScVFmZ1Vha0dBZ0FGQnY3TUJJQU51YTBILy93TnhJZ0k3QVFBZ0FDQUJRUWQwYWtHSUZXb2dBanNCQUNBQUlBRkJCM1JxUVpnVmFpQUNPd0VBSUFBZ0FVRUhkR3BCcUJWcUlBSTdBUUFnQUNBQlFRZDBha0c0RldvZ0Fqc0JBQ0FBSUFGQkIzUnFRY2dWYWlBQ093RUFJQUFnQVVFSGRHcEIyQlZxSUFJN0FRQWdBQ0FCUVFkMGFrSG9GV29nQWpzQkFDQUFJQUZCQjNScVFmb1Vha0dBZ0FGQjg1RUJJQU51YTBILy93TnhJZ0k3QVFBZ0FDQUJRUWQwYWtHS0ZXb2dBanNCQUNBQUlBRkJCM1JxUVpvVmFpQUNPd0VBSUFBZ0FVRUhkR3BCcWhWcUlBSTdBUUFnQUNBQlFRZDBha0c2RldvZ0Fqc0JBQ0FBSUFGQkIzUnFRY29WYWlBQ093RUFJQUFnQVVFSGRHcEIyaFZxSUFJN0FRQWdBQ0FCUVFkMGFrSHFGV29nQWpzQkFDQUFJQUZCQjNScVFmd1Vha0dBZ0FGQm9ja0JJQU51YTBILy93TnhJZ0k3QVFBZ0FDQUJRUWQwYWtHTUZXb2dBanNCQUNBQUlBRkJCM1JxUVp3VmFpQUNPd0VBSUFBZ0FVRUhkR3BCckJWcUlBSTdBUUFnQUNBQlFRZDBha0c4RldvZ0Fqc0JBQ0FBSUFGQkIzUnFRY3dWYWlBQ093RUFJQUFnQVVFSGRHcEIzQlZxSUFJN0FRQWdBQ0FCUVFkMGFrSHNGV29nQWpzQkFDQUFJQUZCQjNScVFmNFVha0dBZ0FGQnZMVUJJQU51YTBILy93TnhJZ0k3QVFBZ0FDQUJRUWQwYWtHT0ZXb2dBanNCQUNBQUlBRkJCM1JxUVo0VmFpQUNPd0VBSUFBZ0FVRUhkR3BCcmhWcUlBSTdBUUFnQUNBQlFRZDBha0crRldvZ0Fqc0JBQ0FBSUFGQkIzUnFRYzRWYWlBQ093RUFJQUFnQVVFSGRHcEIzaFZxSUFJN0FRQWdBQ0FCUVFkMGFrSHVGV29nQWpzQkFDQUFJQUZCQjNScVFZQVZha0dBZ0FGQnNzd0JJQU51YTBILy93TnhJZ0k3QVFBZ0FDQUJRUWQwYWtHUUZXb2dBanNCQUNBQUlBRkJCM1JxUWFBVmFpQUNPd0VBSUFBZ0FVRUhkR3BCc0JWcUlBSTdBUUFnQUNBQlFRZDBha0hBRldvZ0Fqc0JBQ0FBSUFGQkIzUnFRZEFWYWlBQ093RUFJQUFnQVVFSGRHcEI0QlZxSUFJN0FRQWdBQ0FCUVFkMGFrSHdGV29nQWpzQkFDQUFJQUZCQjNScVFZSVZha0dBZ0FGQjBjQUJJQU51YTBILy93TnhJZ003QVFBZ0FDQUJRUWQwYWtHU0ZXb2dBenNCQUNBQUlBRkJCM1JxUWFJVmFpQURPd0VBSUFBZ0FVRUhkR3BCc2hWcUlBTTdBUUFnQUNBQlFRZDBha0hDRldvZ0F6c0JBQ0FBSUFGQkIzUnFRZElWYWlBRE93RUFJQUFnQVVFSGRHcEI0aFZxSUFNN0FRQWdBQ0FCUVFkMGFrSHlGV29nQXpzQkFDQUJRUUZxSWdGQmdBRkhEUUJCQUNFQkN3TkFJQUFnQVVFR2RHcEJBem9BQkNBQVFRSnFJQUZCQm5ScUlBRkJLR3hCMEFCcVFmLy9BM0VpQXpzQkFDQUFJQUZCQm5ScVFRUTZBQVVnQUNBQlFRWjBha0VET2dBSUlBQWdBVUVHZEdvZ0F6c0JCaUFBSUFGQkJuUnFRUVE2QUFrZ0FDQUJRUVowYWtFRE9nQU1JQUFnQVVFR2RHb2dBenNCQ2lBQUlBRkJCblJxUVFRNkFBMGdBQ0FCUVFaMGFrRURPZ0FRSUFBZ0FVRUdkR29nQXpzQkRpQUFJQUZCQm5ScVFRUTZBQkVnQUNBQlFRWjBha0VET2dBVUlBQWdBVUVHZEdvZ0F6c0JFaUFBSUFGQkJuUnFRUVE2QUJVZ0FDQUJRUVowYWtFRE9nQVlJQUFnQVVFR2RHb2dBenNCRmlBQUlBRkJCblJxUVFRNkFCa2dBQ0FCUVFaMGFrRURPZ0FjSUFBZ0FVRUdkR29nQXpzQkdpQUFJQUZCQm5ScVFRUTZBQjBnQUNBQlFRWjBha0VET2dBZ0lBQWdBVUVHZEdvZ0F6c0JIaUFBSUFGQkJuUnFRUVE2QUNFZ0FDQUJRUVowYWtFRE9nQWtJQUFnQVVFR2RHb2dBenNCSWlBQUlBRkJCblJxUVFRNkFDVWdBQ0FCUVFaMGFrRURPZ0FvSUFBZ0FVRUdkR29nQXpzQkppQUFJQUZCQm5ScVFRUTZBQ2tnQUNBQlFRWjBha0VET2dBc0lBQWdBVUVHZEdvZ0F6c0JLaUFBSUFGQkJuUnFRUVE2QUMwZ0FDQUJRUVowYWtFRE9nQXdJQUFnQVVFR2RHb2dBenNCTGlBQUlBRkJCblJxUVFRNkFERWdBQ0FCUVFaMGFrRURPZ0EwSUFBZ0FVRUdkR29nQXpzQk1pQUFJQUZCQm5ScVFRUTZBRFVnQUNBQlFRWjBha0VET2dBNElBQWdBVUVHZEdvZ0F6c0JOaUFBSUFGQkJuUnFRUVE2QURrZ0FDQUJRUVowYWtFRE9nQThJQUFnQVVFR2RHb2dBenNCT2lBQUlBRkJCblJxUVFRNkFEMGdBQ0FCUVFaMGFrRkFhMEVET2dBQUlBQWdBVUVHZEdvZ0F6c0JQaUFBSUFGQkJuUnFRUVE2QUVFZ0FVRUJhaUlCUVJsSERRQUxDK0VFQVFSL0lBQkIrQUZxSVFNZ0FFR0FBbW9pQlNnQ0FDSUNRY0FBU3dSQUlBTW9BZ0FpQWlnQ0FDRUVJQUlnQkVGQWF6WUNBQ0FDUVFScUlnSWdBaWdDQUNBRVFiOS9TMm8yQWdBZ0FDQUFRZkFCYWlJQ0tBSUFFRzBnQlNBRktBSUFRVUJxSWdRMkFnQWdBaWdDQUNJQ0lBSkJRR3NnQkJCVEdpQUZLQUlBSVFJTElBTW9BZ0FpQXlnQ0FDQUNhaUVFSUFNZ0JEWUNBQ0FEUVFScUlnTWdBeWdDQUNBRUlBSkphallDQUNBQUtBTDhBU0VDSUFBc0FJUUNCRUFnQWtGL05nSUVDeUFDUVg4MkFnQWdBRUh3QVdvaUFpZ0NBQ0FGS0FJQUlnVnFRUUJCZ0FFZ0JXc1FWQm9nQUNBQ0tBSUFFRzBnQVNBQVFmUUJhaUlBS0FJQUtBSUFJZ0k2QUFBZ0FTQUNRUWgyT2dBQklBRWdBa0VRZGpvQUFpQUJJQUpCR0hZNkFBTWdBU0FBS0FJQUtBSUVJZ0k2QUFRZ0FTQUNRUWgyT2dBRklBRWdBa0VRZGpvQUJpQUJJQUpCR0hZNkFBY2dBU0FBS0FJQUtBSUlJZ0k2QUFnZ0FTQUNRUWgyT2dBSklBRWdBa0VRZGpvQUNpQUJJQUpCR0hZNkFBc2dBU0FBS0FJQUtBSU1JZ0k2QUF3Z0FTQUNRUWgyT2dBTklBRWdBa0VRZGpvQURpQUJJQUpCR0hZNkFBOGdBU0FBS0FJQUtBSVFJZ0k2QUJBZ0FTQUNRUWgyT2dBUklBRWdBa0VRZGpvQUVpQUJJQUpCR0hZNkFCTWdBU0FBS0FJQUtBSVVJZ0k2QUJRZ0FTQUNRUWgyT2dBVklBRWdBa0VRZGpvQUZpQUJJQUpCR0hZNkFCY2dBU0FBS0FJQUtBSVlJZ0k2QUJnZ0FTQUNRUWgyT2dBWklBRWdBa0VRZGpvQUdpQUJJQUpCR0hZNkFCc2dBU0FBS0FJQUtBSWNJZ0E2QUJ3Z0FTQUFRUWgyT2dBZElBRWdBRUVRZGpvQUhpQUJJQUJCR0hZNkFCOEx5QW9CSlg4akJDRUVJd1JCb0FKcUpBUWdCRUVnYWlFRElBQkZCRUFnQkVFZ0VGc2dBMEdBQWhCYklBUWtCQThMSUFNZ0FFRW9haUlDS0FJQUlnRXRBQUZCRUhRZ0FTMEFBRUVZZEhJZ0FTMEFBa0VJZEhJZ0FTMEFBM0kyQWdBZ0F5QUJMUUFGUVJCMElBRXRBQVJCR0hSeUlBRXRBQVpCQ0hSeUlBRXRBQWR5TmdJRUlBTWdBUzBBQ1VFUWRDQUJMUUFJUVJoMGNpQUJMUUFLUVFoMGNpQUJMUUFMY2pZQ0NDQURJQUV0QUExQkVIUWdBUzBBREVFWWRISWdBUzBBRGtFSWRISWdBUzBBRDNJMkFnd2dBeUFCTFFBUlFSQjBJQUV0QUJCQkdIUnlJQUV0QUJKQkNIUnlJQUV0QUJOeU5nSVFJQU1nQWlnQ0FDSUJMUUFWUVJCMElBRXRBQlJCR0hSeUlBRXRBQlpCQ0hSeUlBRXRBQmR5TmdJVUlBTWdBUzBBR1VFUWRDQUJMUUFZUVJoMGNpQUJMUUFhUVFoMGNpQUJMUUFiY2pZQ0dDQURJQUV0QUIxQkVIUWdBUzBBSEVFWWRISWdBUzBBSGtFSWRISWdBUzBBSDNJMkFod2dBeUFCTFFBaFFSQjBJQUV0QUNCQkdIUnlJQUV0QUNKQkNIUnlJQUV0QUNOeU5nSWdJQU1nQVMwQUpVRVFkQ0FCTFFBa1FSaDBjaUFCTFFBbVFRaDBjaUFCTFFBbmNqWUNKQ0FESUFJb0FnQWlBUzBBS1VFUWRDQUJMUUFvUVJoMGNpQUJMUUFxUVFoMGNpQUJMUUFyY2pZQ0tDQURJQUV0QUMxQkVIUWdBUzBBTEVFWWRISWdBUzBBTGtFSWRISWdBUzBBTDNJMkFpd2dBeUFCTFFBeFFSQjBJQUV0QURCQkdIUnlJQUV0QURKQkNIUnlJQUV0QUROeU5nSXdJQU1nQVMwQU5VRVFkQ0FCTFFBMFFSaDBjaUFCTFFBMlFRaDBjaUFCTFFBM2NqWUNOQ0FESUFFdEFEbEJFSFFnQVMwQU9FRVlkSElnQVMwQU9rRUlkSElnQVMwQU8zSTJBamdnQXlBQ0tBSUFJZ0V0QUQxQkVIUWdBUzBBUEVFWWRISWdBUzBBUGtFSWRISWdBUzBBUDNJMkFqeEJFQ0VCSUFNb0FnQWhBZ05BSUFNZ0FVRUNkR29nQWlBRElBRkJlV3BCQW5ScUtBSUFhaUFESUFGQmZtcEJBblJxS0FJQUlnSkJFM1lnQWtFTmRISWdBa0VLZG5NZ0FrRVJkaUFDUVE5MGNuTnFJQU1nQVVGeGFrRUNkR29vQWdBaUFrRVNkaUFDUVE1MGNpQUNRUU4yY3lBQ1FRZDJJQUpCR1hSeWMybzJBZ0FnQVVFQmFpSUJRY0FBUncwQUN5QUVJQUFvQWdBaURUWUNBQ0FFUVFScUloVWdBRUVFYWlJV0tBSUFJZzQyQWdBZ0JFRUlhaUlYSUFCQkNHb2lHQ2dDQUNJUE5nSUFJQVJCREdvaUdTQUFRUXhxSWhvb0FnQWlFRFlDQUNBRVFSQnFJaHNnQUVFUWFpSWNLQUlBSWhFMkFnQWdCRUVVYWlJZElBQkJGR29pSGlnQ0FDSVNOZ0lBSUFSQkdHb2lIeUFBUVJocUlpQW9BZ0FpRXpZQ0FDQUVRUnhxSWlFZ0FFRWNhaUlpS0FJQUloUTJBZ0FnRXlFSklCRWhBU0FTSVFvZ0R5RUZJQTBoQWlBT0lRWWdGQ0VISUJBaENBTkFJQWdnQzBFQ2RFR3NEMm9vQWdBZ0Iyb2dBVUVHZGlBQlFScDBjaUFCUVF0MklBRkJGWFJ5Y3lBQlFSbDJJQUZCQjNSeWMyb2dDU0FCUVg5emNTQUtJQUZ4YzJvZ0F5QUxRUUowYWlnQ0FHb2lER29oQnlBQ1FRSjJJQUpCSG5SeUlBSkJEWFlnQWtFVGRISnpJQUpCRm5ZZ0FrRUtkSEp6SUF4cUlBVWdCbk1nQW5FZ0JTQUdjWE5xSVFnZ0MwRUJhaUlMUWNBQVJ3UkFJQUloRENBR0lTTWdBU0VrSUFvaEpTQUhJUUVnQ0NFQ0lBVWhDQ0FKSVFjZ0RDRUdJQ01oQlNBa0lRb2dKU0VKREFFTEN5QWhJQWsyQWdBZ0d5QUhOZ0lBSUIwZ0FUWUNBQ0FmSUFvMkFnQWdHU0FGTmdJQUlBUWdDRFlDQUNBVklBSTJBZ0FnRnlBR05nSUFJQUFnRFNBSWFqWUNBQ0FXSUE0Z0FtbzJBZ0FnR0NBUElBWnFOZ0lBSUJvZ0VDQUZhallDQUNBY0lCRWdCMm8yQWdBZ0hpQVNJQUZxTmdJQUlDQWdFeUFLYWpZQ0FDQWlJQlFnQ1dvMkFnQWdCQ1FFQzlNREFnZC9BbjRnQUNnQ0FDSURJQU1vQWdBb0FoUkJCM0ZCaGdGcUVRQUFJUWdnQUNnQ0FDRUJJQUJCaURKcUlnVXBBd0FnQUVINE1Xb3BBd0I4SVFsQkFDUUZRUUlnQVNBSnB5QUpRaUNJcDBFQUVGQWpCU0VCUVFBa0JRSkFJQUZCQVhGRkJFQWdBRUdBTW1vcEF3QWdCU2tEQUgwaUNhY2hBU0FKUVlDQUJDQUFRWkF5YWlJR0tBSUFJZ0pySWdTdFZBUi9JQUVGSUFRaUFRdEJjSEVoQkNBQUtBSUFJZ2RCKys0Q2Fpd0FBQVIvSUFRaUFRVWdBUXNFUUNBQVFSQnFJZ1FvQWdBZ0Ftb2hBa0VBSkFWQkJDQUhJQUlnQVJBSElRRWpCU0VDUVFBa0JTQUNRUUZ4RFFJZ0FVRUJTQVJBUVFBaEFRVWdBQ2dDQUVINzdnSnFMQUFBQkVBZ0JDZ0NBQ0FHS0FJQWFpRUNRUUFrQlVFQklBQkJHR29nQWlBQlFYQnhFQTRqQlNFQVFRQWtCU0FBUVFGeERRUUxJQVVnQlNrREFDQUJySHczQXdBZ0JpQUdLQUlBSUFGcU5nSUFDd1ZCQUNFQkN5QURLQUlBS0FJUUlRQkJBQ1FGSUFBZ0F5QUlweUFJUWlDSXAwRUFFRkFqQlNFQVFRQWtCU0FBUVFGeEJFQkJBQkFZRUZvRklBRVBDd3NMRUJjaEFDQURLQUlBS0FJUUlRRkJBQ1FGSUFFZ0F5QUlweUFJUWlDSXAwRUFFRkFqQlNFQlFRQWtCU0FCUVFGeEJFQkJBQkFZRUZvRklBQVFIZ3RCQUF2dE5BRWRmeUFEQkVBZ0FTQUNLUUFBTndBQUlBRWdBaWtBQ0RjQUNDQUJJQUlwQUJBM0FCQWdBU0FDS1FBWU53QVlJQUVnQWlrQUlEY0FJQ0FCSUFJcEFDZzNBQ2dnQVNBQ0tRQXdOd0F3SUFFZ0Fpa0FPRGNBT0FVZ0FpRUJDeUFBS0FJQUlSTWdBRUVFYWlJZEtBSUFJUU1nQUVFSWFpSWVLQUlBSVJFZ0FFRU1haUlmS0FJQUlSWWdBRUVRYWlJZ0tBSUFJUmdnQVNBQktBSUFFR2NpRFRZQ0FDQUJRUVJxSWdJb0FnQVFaeUViSUFJZ0d6WUNBQ0FXUVpuemlkUUZhaUFEUVI1MElBTkJBblp5SWc0Z0VYTWdFM0VnRVhOcUlCdHFJQk5CQlhRZ0UwRWJkbkpCbWZPSjFBVnFJQmhxSUExcUlCWWdFWE1nQTNFZ0ZuTnFJaGhCQlhRZ0dFRWJkbkpxSVJZZ0FVRUlhaUlES0FJQUVHY2hHeUFESUJzMkFnQWdFVUdaODRuVUJXb2dHMm9nR0NBT0lCTkJIblFnRTBFQ2RuSWlEWE54SUE1emFpQVdRUVYwSUJaQkczWnlhaUViSUFGQkRHb2lFeWdDQUJCbklSRWdFeUFSTmdJQUlBNUJtZk9KMUFWcUlCRnFJQllnR0VFZWRDQVlRUUoyY2lJU0lBMXpjU0FOYzJvZ0cwRUZkQ0FiUVJ0MmNtb2hHQ0FCUVJCcUloRW9BZ0FRWnlFT0lCRWdEallDQUNBTlFabnppZFFGYWlBT2FpQWJJQlpCSG5RZ0ZrRUNkbklpRkNBU2MzRWdFbk5xSUJoQkJYUWdHRUViZG5KcUlRNGdBVUVVYWlJV0tBSUFFR2NoRFNBV0lBMDJBZ0FnRWtHWjg0blVCV29nRFdvZ0dDQWJRUjUwSUJ0QkFuWnlJaFVnRkhOeElCUnphaUFPUVFWMElBNUJHM1p5YWlFTklBRkJHR29pR3lnQ0FCQm5JUklnR3lBU05nSUFJQlJCbWZPSjFBVnFJQkpxSUE0Z0dFRWVkQ0FZUVFKMmNpSVhJQlZ6Y1NBVmMyb2dEVUVGZENBTlFSdDJjbW9oRWlBQlFSeHFJaGdvQWdBUVp5RVVJQmdnRkRZQ0FDQVVRWm56aWRRRmFpQVZhaUFOSUE1QkhuUWdEa0VDZG5JaUdTQVhjM0VnRjNOcUlCSkJCWFFnRWtFYmRuSnFJUlFnQVVFZ2FpSU9LQUlBRUdjaEZTQU9JQlUyQWdBZ0ZVR1o4NG5VQldvZ0Yyb2dFaUFOUVI1MElBMUJBblp5SWhvZ0dYTnhJQmx6YWlBVVFRVjBJQlJCRzNaeWFpRVZJQUZCSkdvaURTZ0NBQkJuSVJjZ0RTQVhOZ0lBSUJkQm1mT0oxQVZxSUJscUlCUWdFa0VlZENBU1FRSjJjaUlFSUJwemNTQWFjMm9nRlVFRmRDQVZRUnQyY21vaEZ5QUJRU2hxSWhJb0FnQVFaeUVaSUJJZ0dUWUNBQ0FaUVpuemlkUUZhaUFhYWlBVklCUkJIblFnRkVFQ2RuSWlCU0FFYzNFZ0JITnFJQmRCQlhRZ0YwRWJkbkpxSVJrZ0FVRXNhaUlVS0FJQUVHY2hHaUFVSUJvMkFnQWdHa0daODRuVUJXb2dCR29nRnlBVlFSNTBJQlZCQW5aeUlnWWdCWE54SUFWemFpQVpRUVYwSUJsQkczWnlhaUVhSUFGQk1Hb2lGU2dDQUJCbklRUWdGU0FFTmdJQUlBUkJtZk9KMUFWcUlBVnFJQmtnRjBFZWRDQVhRUUoyY2lJSElBWnpjU0FHYzJvZ0drRUZkQ0FhUVJ0MmNtb2hCQ0FCUVRScUloY29BZ0FRWnlFSUlCY2dDRFlDQUNBSVFabnppZFFGYWlBR2FpQWFJQmxCSG5RZ0dVRUNkbklpQ1NBSGMzRWdCM05xSUFSQkJYUWdCRUViZG5KcUlRVWdBVUU0YWlJWktBSUFFR2NoQ2lBWklBbzJBZ0FnQ2tHWjg0blVCV29nQjJvZ0JDQWFRUjUwSUJwQkFuWnlJZ2NnQ1hOeElBbHphaUFGUVFWMElBVkJHM1p5YWlFR0lBRkJQR29pR2lnQ0FCQm5JUXNnR2lBTE5nSUFJQXRCbWZPSjFBVnFJQWxxSUFVZ0JFRWVkQ0FFUVFKMmNpSUpJQWR6Y1NBSGMyb2dCa0VGZENBR1FSdDJjbW9oQkNBQklBNG9BZ0FnQ0hNZ0F5Z0NBQ0lQY3lBQktBSUFjeUlJUVFGMElBaEJIM1p5SWd3MkFnQWdERUdaODRuVUJXb2dCMm9nQmlBRlFSNTBJQVZCQW5aeUlnY2dDWE54SUFsemFpQUVRUVYwSUFSQkczWnlhaUVGSUFJZ0RTZ0NBQ0FLY3lBVEtBSUFJaEJ6SUFJb0FnQnpJZ2hCQVhRZ0NFRWZkbklpQ2pZQ0FDQUtRWm56aWRRRmFpQUphaUFFSUFaQkhuUWdCa0VDZG5JaUNDQUhjM0VnQjNOcUlBVkJCWFFnQlVFYmRuSnFJUVlnQXlBU0tBSUFJQXR6SUJFb0FnQWlISE1nRDNNaUNVRUJkQ0FKUVI5MmNpSUpOZ0lBSUFsQm1mT0oxQVZxSUFkcUlBVWdCRUVlZENBRVFRSjJjaUlISUFoemNTQUljMm9nQmtFRmRDQUdRUnQyY21vaEJDQVRJQlFvQWdBZ0RITWdGaWdDQUNJTWN5QVFjeUlMUVFGMElBdEJIM1p5SWdzMkFnQWdDMEdaODRuVUJXb2dDR29nQmlBRlFSNTBJQVZCQW5aeUlnZ2dCM054SUFkemFpQUVRUVYwSUFSQkczWnlhaUVGSUJFZ0ZTZ0NBQ0FLY3lBYktBSUFJZzl6SUJ4eklncEJBWFFnQ2tFZmRuSWlDallDQUNBS1FhSFg1L1lHYWlBSGFpQUdRUjUwSUFaQkFuWnlJZ2NnQ0hNZ0JITnFJQVZCQlhRZ0JVRWJkbkpxSVFZZ0ZpQVhLQUlBSUFseklCZ29BZ0FpRUhNZ0RITWlDVUVCZENBSlFSOTJjaUlKTmdJQUlBbEJvZGZuOWdacUlBaHFJQVJCSG5RZ0JFRUNkbklpQ0NBSGN5QUZjMm9nQmtFRmRDQUdRUnQyY21vaEJDQWJJQmtvQWdBZ0MzTWdEaWdDQUNJTWN5QVBjeUlMUVFGMElBdEJIM1p5SWdzMkFnQWdDMEdoMStmMkJtb2dCMm9nQlVFZWRDQUZRUUoyY2lJSElBaHpJQVp6YWlBRVFRVjBJQVJCRzNaeWFpRUZJQmdnR2lnQ0FDQUtjeUFOS0FJQUlnOXpJQkJ6SWdwQkFYUWdDa0VmZG5JaUNqWUNBQ0FLUWFIWDUvWUdhaUFJYWlBR1FSNTBJQVpCQW5aeUlnZ2dCM01nQkhOcUlBVkJCWFFnQlVFYmRuSnFJUVlnRGlBQktBSUFJQWx6SUJJb0FnQWlFSE1nREhNaUNVRUJkQ0FKUVI5MmNpSUpOZ0lBSUFsQm9kZm45Z1pxSUFkcUlBUkJIblFnQkVFQ2RuSWlCeUFJY3lBRmMyb2dCa0VGZENBR1FSdDJjbW9oQkNBTklBSW9BZ0FnQzNNZ0ZDZ0NBQ0lNY3lBUGN5SUxRUUYwSUF0QkgzWnlJZ3MyQWdBZ0MwR2gxK2YyQm1vZ0NHb2dCVUVlZENBRlFRSjJjaUlJSUFkeklBWnphaUFFUVFWMElBUkJHM1p5YWlFRklCSWdBeWdDQUNBS2N5QVZLQUlBSWc5eklCQnpJZ3BCQVhRZ0NrRWZkbklpQ2pZQ0FDQUtRYUhYNS9ZR2FpQUhhaUFHUVI1MElBWkJBblp5SWdjZ0NITWdCSE5xSUFWQkJYUWdCVUViZG5KcUlRWWdGQ0FUS0FJQUlBbHpJQmNvQWdBaUVITWdESE1pQ1VFQmRDQUpRUjkyY2lJSk5nSUFJQWxCb2RmbjlnWnFJQWhxSUFSQkhuUWdCRUVDZG5JaUNDQUhjeUFGYzJvZ0JrRUZkQ0FHUVJ0MmNtb2hCQ0FWSUJFb0FnQWdDM01nR1NnQ0FDSU1jeUFQY3lJTFFRRjBJQXRCSDNaeUlnczJBZ0FnQzBHaDErZjJCbW9nQjJvZ0JVRWVkQ0FGUVFKMmNpSUhJQWh6SUFaemFpQUVRUVYwSUFSQkczWnlhaUVGSUJjZ0ZpZ0NBQ0FLY3lBYUtBSUFJZzl6SUJCeklncEJBWFFnQ2tFZmRuSWlDallDQUNBS1FhSFg1L1lHYWlBSWFpQUdRUjUwSUFaQkFuWnlJZ2dnQjNNZ0JITnFJQVZCQlhRZ0JVRWJkbkpxSVFZZ0dTQWJLQUlBSUFseklBRW9BZ0FpRUhNZ0RITWlDVUVCZENBSlFSOTJjaUlKTmdJQUlBZEJvZGZuOWdacUlBbHFJQVJCSG5RZ0JFRUNkbklpQnlBSWN5QUZjMm9nQmtFRmRDQUdRUnQyY21vaEJDQWFJQmdvQWdBZ0MzTWdBaWdDQUNJTWN5QVBjeUlMUVFGMElBdEJIM1p5SWdzMkFnQWdDRUdoMStmMkJtb2dDMm9nQlVFZWRDQUZRUUoyY2lJSUlBZHpJQVp6YWlBRVFRVjBJQVJCRzNaeWFpRUZJQUVnRGlnQ0FDQUtjeUFES0FJQUlnOXpJQkJ6SWdwQkFYUWdDa0VmZG5JaUNqWUNBQ0FIUWFIWDUvWUdhaUFLYWlBR1FSNTBJQVpCQW5aeUlnY2dDSE1nQkhOcUlBVkJCWFFnQlVFYmRuSnFJUVlnQWlBTktBSUFJQWx6SUJNb0FnQWlFSE1nREhNaUNVRUJkQ0FKUVI5MmNpSUpOZ0lBSUFoQm9kZm45Z1pxSUFscUlBUkJIblFnQkVFQ2RuSWlDQ0FIY3lBRmMyb2dCa0VGZENBR1FSdDJjbW9oQkNBRElCSW9BZ0FnQzNNZ0VTZ0NBQ0lNY3lBUGN5SUxRUUYwSUF0QkgzWnlJZ3MyQWdBZ0IwR2gxK2YyQm1vZ0Myb2dCVUVlZENBRlFRSjJjaUlISUFoeklBWnphaUFFUVFWMElBUkJHM1p5YWlFRklCTWdGQ2dDQUNBS2N5QVdLQUlBSWc5eklCQnpJZ3BCQVhRZ0NrRWZkbklpQ2pZQ0FDQUlRYUhYNS9ZR2FpQUthaUFHUVI1MElBWkJBblp5SWdnZ0IzTWdCSE5xSUFWQkJYUWdCVUViZG5KcUlRWWdFU0FWS0FJQUlBbHpJQnNvQWdBaUVITWdESE1pQ1VFQmRDQUpRUjkyY2lJSk5nSUFJQWRCb2RmbjlnWnFJQWxxSUFSQkhuUWdCRUVDZG5JaUJDQUljeUFGYzJvZ0JrRUZkQ0FHUVJ0MmNtb2hCeUFXSUJjb0FnQWdDM01nR0NnQ0FDSU1jeUFQY3lJTFFRRjBJQXRCSDNaeUlnczJBZ0FnQ0VHaDErZjJCbW9nQzJvZ0JVRWVkQ0FGUVFKMmNpSUZJQVJ6SUFaemFpQUhRUVYwSUFkQkczWnlhaUVJSUJzZ0dTZ0NBQ0FLY3lBT0tBSUFJZzl6SUJCeklncEJBWFFnQ2tFZmRuSWlDallDQUNBRVFhSFg1L1lHYWlBS2FpQUdRUjUwSUFaQkFuWnlJZ1lnQlhNZ0IzTnFJQWhCQlhRZ0NFRWJkbkpxSVFRZ0dDQWFLQUlBSUFseklBMG9BZ0FpRUhNZ0RITWlDVUVCZENBSlFSOTJjaUlKTmdJQUlBVkJvZGZuOWdacUlBbHFJQWRCSG5RZ0IwRUNkbklpRENBR2N5QUljMm9nQkVFRmRDQUVRUnQyY21vaEJTQU9JQUVvQWdBZ0MzTWdFaWdDQUNJY2N5QVBjeUlIUVFGMElBZEJIM1p5SWdzMkFnQWdCa0hjK2U3NGVHb2dDMm9nQkNBSVFSNTBJQWhCQW5aeUlnZHlJQXh4SUFRZ0IzRnlhaUFGUVFWMElBVkJHM1p5YWlFR0lBMGdBaWdDQUNBS2N5QVVLQUlBSWc5eklCQnpJZ2hCQVhRZ0NFRWZkbklpQ2pZQ0FDQU1RZHo1N3ZoNGFpQUthaUFGSUFSQkhuUWdCRUVDZG5JaUNISWdCM0VnQlNBSWNYSnFJQVpCQlhRZ0JrRWJkbkpxSVFRZ0VpQURLQUlBSUFseklCVW9BZ0FpREhNZ0hITWlDVUVCZENBSlFSOTJjaUlKTmdJQUlBZEIzUG51K0hocUlBbHFJQVlnQlVFZWRDQUZRUUoyY2lJSGNpQUljU0FHSUFkeGNtb2dCRUVGZENBRVFSdDJjbW9oQlNBVUlCTW9BZ0FnQzNNZ0Z5Z0NBQ0lRY3lBUGN5SUxRUUYwSUF0QkgzWnlJZ3MyQWdBZ0NFSGMrZTc0ZUdvZ0JDQUdRUjUwSUFaQkFuWnlJZ2h5SUFkeElBUWdDSEZ5YWlBTGFpQUZRUVYwSUFWQkczWnlhaUVHSUJVZ0VTZ0NBQ0FLY3lBWktBSUFJZzl6SUF4eklncEJBWFFnQ2tFZmRuSWlDallDQUNBSFFkejU3dmg0YWlBRklBUkJIblFnQkVFQ2RuSWlCM0lnQ0hFZ0JTQUhjWEpxSUFwcUlBWkJCWFFnQmtFYmRuSnFJUVFnRnlBV0tBSUFJQWx6SUJvb0FnQWlESE1nRUhNaUNVRUJkQ0FKUVI5MmNpSUpOZ0lBSUFoQjNQbnUrSGhxSUFZZ0JVRWVkQ0FGUVFKMmNpSUljaUFIY1NBR0lBaHhjbW9nQ1dvZ0JFRUZkQ0FFUVJ0MmNtb2hCU0FaSUJzb0FnQWdDM01nQVNnQ0FDSVFjeUFQY3lJTFFRRjBJQXRCSDNaeUlnczJBZ0FnQjBIYytlNzRlR29nQkNBR1FSNTBJQVpCQW5aeUlnZHlJQWh4SUFRZ0IzRnlhaUFMYWlBRlFRVjBJQVZCRzNaeWFpRUdJQm9nR0NnQ0FDQUtjeUFDS0FJQUlnOXpJQXh6SWdwQkFYUWdDa0VmZG5JaUNqWUNBQ0FJUWR6NTd2aDRhaUFGSUFSQkhuUWdCRUVDZG5JaUNISWdCM0VnQlNBSWNYSnFJQXBxSUFaQkJYUWdCa0ViZG5KcUlRUWdBU0FPS0FJQUlBbHpJQU1vQWdBaURITWdFSE1pQ1VFQmRDQUpRUjkyY2lJSk5nSUFJQWRCM1BudStIaHFJQVlnQlVFZWRDQUZRUUoyY2lJSGNpQUljU0FHSUFkeGNtb2dDV29nQkVFRmRDQUVRUnQyY21vaEJTQUNJQTBvQWdBZ0MzTWdFeWdDQUNJUWN5QVBjeUlMUVFGMElBdEJIM1p5SWdzMkFnQWdDRUhjK2U3NGVHb2dCQ0FHUVI1MElBWkJBblp5SWdoeUlBZHhJQVFnQ0hGeWFpQUxhaUFGUVFWMElBVkJHM1p5YWlFR0lBTWdFaWdDQUNBS2N5QVJLQUlBSWc5eklBeHpJZ3BCQVhRZ0NrRWZkbklpQ2pZQ0FDQUhRZHo1N3ZoNGFpQUZJQVJCSG5RZ0JFRUNkbklpQjNJZ0NIRWdCU0FIY1hKcUlBcHFJQVpCQlhRZ0JrRWJkbkpxSVFRZ0V5QVVLQUlBSUFseklCWW9BZ0FpREhNZ0VITWlDVUVCZENBSlFSOTJjaUlKTmdJQUlBaEIzUG51K0hocUlBWWdCVUVlZENBRlFRSjJjaUlJY2lBSGNTQUdJQWh4Y21vZ0NXb2dCRUVGZENBRVFSdDJjbW9oQlNBUklCVW9BZ0FnQzNNZ0d5Z0NBQ0lRY3lBUGN5SUxRUUYwSUF0QkgzWnlJZ3MyQWdBZ0IwSGMrZTc0ZUdvZ0JDQUdRUjUwSUFaQkFuWnlJZ2R5SUFoeElBUWdCM0Z5YWlBTGFpQUZRUVYwSUFWQkczWnlhaUVHSUJZZ0Z5Z0NBQ0FLY3lBWUtBSUFJZzl6SUF4eklncEJBWFFnQ2tFZmRuSWlDallDQUNBSVFkejU3dmg0YWlBRklBUkJIblFnQkVFQ2RuSWlDSElnQjNFZ0JTQUljWEpxSUFwcUlBWkJCWFFnQmtFYmRuSnFJUVFnR3lBWktBSUFJQWx6SUE0b0FnQWlESE1nRUhNaUNVRUJkQ0FKUVI5MmNpSUpOZ0lBSUFkQjNQbnUrSGhxSUFZZ0JVRWVkQ0FGUVFKMmNpSUhjaUFJY1NBR0lBZHhjbW9nQ1dvZ0JFRUZkQ0FFUVJ0MmNtb2hCU0FZSUJvb0FnQWdDM01nRFNnQ0FDSVFjeUFQY3lJTFFRRjBJQXRCSDNaeUlnczJBZ0FnQ0VIYytlNzRlR29nQkNBR1FSNTBJQVpCQW5aeUlnaHlJQWR4SUFRZ0NIRnlhaUFMYWlBRlFRVjBJQVZCRzNaeWFpRUdJQTRnQVNnQ0FDQUtjeUFTS0FJQUlnOXpJQXh6SWdwQkFYUWdDa0VmZG5JaUNqWUNBQ0FIUWR6NTd2aDRhaUFGSUFSQkhuUWdCRUVDZG5JaUIzSWdDSEVnQlNBSGNYSnFJQXBxSUFaQkJYUWdCa0ViZG5KcUlRUWdEU0FDS0FJQUlBbHpJQlFvQWdBaURITWdFSE1pQ1VFQmRDQUpRUjkyY2lJSk5nSUFJQWhCM1BudStIaHFJQVlnQlVFZWRDQUZRUUoyY2lJSWNpQUhjU0FHSUFoeGNtb2dDV29nQkVFRmRDQUVRUnQyY21vaEJTQVNJQU1vQWdBZ0MzTWdGU2dDQUNJUWN5QVBjeUlMUVFGMElBdEJIM1p5SWdzMkFnQWdCMEhjK2U3NGVHb2dCQ0FHUVI1MElBWkJBblp5SWdkeUlBaHhJQVFnQjNGeWFpQUxhaUFGUVFWMElBVkJHM1p5YWlFR0lCUWdFeWdDQUNBS2N5QVhLQUlBSWc5eklBeHpJZ3BCQVhRZ0NrRWZkbklpQ2pZQ0FDQUlRZHo1N3ZoNGFpQUZJQVJCSG5RZ0JFRUNkbklpQ0hJZ0IzRWdCU0FJY1hKcUlBcHFJQVpCQlhRZ0JrRWJkbkpxSVFRZ0ZTQVJLQUlBSUFseklCa29BZ0FpREhNZ0VITWlDVUVCZENBSlFSOTJjaUlKTmdJQUlBZEIxb09MMDN4cUlBVkJIblFnQlVFQ2RuSWlCeUFJY3lBR2Myb2dDV29nQkVFRmRDQUVRUnQyY21vaEJTQVhJQllvQWdBZ0MzTWdHaWdDQUNJUWN5QVBjeUlMUVFGMElBdEJIM1p5SWdzMkFnQWdDRUhXZzR2VGZHb2dCa0VlZENBR1FRSjJjaUlJSUFkeklBUnphaUFMYWlBRlFRVjBJQVZCRzNaeWFpRUdJQmtnR3lnQ0FDQUtjeUFCS0FJQUlnOXpJQXh6SWdwQkFYUWdDa0VmZG5JaUNqWUNBQ0FIUWRhRGk5TjhhaUFFUVI1MElBUkJBblp5SWdjZ0NITWdCWE5xSUFwcUlBWkJCWFFnQmtFYmRuSnFJUVFnR2lBWUtBSUFJQWx6SUFJb0FnQWlESE1nRUhNaUNVRUJkQ0FKUVI5MmNpSUpOZ0lBSUFoQjFvT0wwM3hxSUFWQkhuUWdCVUVDZG5JaUNDQUhjeUFHYzJvZ0NXb2dCRUVGZENBRVFSdDJjbW9oQlNBQklBNG9BZ0FnQzNNZ0F5Z0NBQ0lRY3lBUGN5SUxRUUYwSUF0QkgzWnlJZ3MyQWdBZ0IwSFdnNHZUZkdvZ0JrRWVkQ0FHUVFKMmNpSUhJQWh6SUFSemFpQUxhaUFGUVFWMElBVkJHM1p5YWlFR0lBSWdEU2dDQUNBS2N5QVRLQUlBSWc5eklBeHpJZ3BCQVhRZ0NrRWZkbklpQ2pZQ0FDQUlRZGFEaTlOOGFpQUVRUjUwSUFSQkFuWnlJZ2dnQjNNZ0JYTnFJQXBxSUFaQkJYUWdCa0ViZG5KcUlRUWdBeUFTS0FJQUlBbHpJQkVvQWdBaURITWdFSE1pQ1VFQmRDQUpRUjkyY2lJSk5nSUFJQWRCMW9PTDAzeHFJQVZCSG5RZ0JVRUNkbklpQnlBSWN5QUdjMm9nQ1dvZ0JFRUZkQ0FFUVJ0MmNtb2hCU0FUSUJRb0FnQWdDM01nRmlnQ0FDSVFjeUFQY3lJTFFRRjBJQXRCSDNaeUlnczJBZ0FnQ0VIV2c0dlRmR29nQmtFZWRDQUdRUUoyY2lJSUlBZHpJQVJ6YWlBTGFpQUZRUVYwSUFWQkczWnlhaUVHSUJFZ0ZTZ0NBQ0FLY3lBYktBSUFJZzl6SUF4eklncEJBWFFnQ2tFZmRuSWlDallDQUNBSFFkYURpOU44YWlBRVFSNTBJQVJCQW5aeUlnY2dDSE1nQlhOcUlBcHFJQVpCQlhRZ0JrRWJkbkpxSVFRZ0ZpQVhLQUlBSUFseklCZ29BZ0FpREhNZ0VITWlDVUVCZENBSlFSOTJjaUlKTmdJQUlBaEIxb09MMDN4cUlBVkJIblFnQlVFQ2RuSWlDQ0FIY3lBR2Myb2dDV29nQkVFRmRDQUVRUnQyY21vaEJTQWJJQmtvQWdBZ0MzTWdEaWdDQUNJUWN5QVBjeUlMUVFGMElBdEJIM1p5SWdzMkFnQWdCMEhXZzR2VGZHb2dCa0VlZENBR1FRSjJjaUlISUFoeklBUnphaUFMYWlBRlFRVjBJQVZCRzNaeWFpRUdJQmdnR2lnQ0FDQUtjeUFOS0FJQUlnOXpJQXh6SWdwQkFYUWdDa0VmZG5JaUNqWUNBQ0FJUWRhRGk5TjhhaUFFUVI1MElBUkJBblp5SWdnZ0IzTWdCWE5xSUFwcUlBWkJCWFFnQmtFYmRuSnFJUVFnRGlBQktBSUFJQWx6SUJJb0FnQWlESE1nRUhNaURrRUJkQ0FPUVI5MmNpSUpOZ0lBSUFkQjFvT0wwM3hxSUFWQkhuUWdCVUVDZG5JaUJTQUljeUFHYzJvZ0NXb2dCRUVGZENBRVFSdDJjbW9oRGlBTklBSW9BZ0FnQzNNZ0ZDZ0NBQ0lMY3lBUGN5SU5RUUYwSUExQkgzWnlJZ2MyQWdBZ0NFSFdnNHZUZkdvZ0JrRWVkQ0FHUVFKMmNpSUdJQVZ6SUFSemFpQUhhaUFPUVFWMElBNUJHM1p5YWlFTklCSWdBeWdDQUNBS2N5QVZLQUlBSWdoeklBeHpJZ05CQVhRZ0EwRWZkbklpRWpZQ0FDQUZRZGFEaTlOOGFpQUVRUjUwSUFSQkFuWnlJZ1FnQm5NZ0RuTnFJQkpxSUExQkJYUWdEVUViZG5KcUlRTWdGQ0FUS0FJQUlBbHpJQmNvQWdBaUJYTWdDM01pRTBFQmRDQVRRUjkyY2lJVU5nSUFJQVpCMW9PTDAzeHFJQTVCSG5RZ0RrRUNkbklpRGlBRWN5QU5jMm9nRkdvZ0EwRUZkQ0FEUVJ0MmNtb2hFeUFWSUJFb0FnQWdCM01nR1NnQ0FDSUdjeUFJY3lJUlFRRjBJQkZCSDNaeUloVTJBZ0FnQkVIV2c0dlRmR29nRFVFZWRDQU5RUUoyY2lJTklBNXpJQU56YWlBVmFpQVRRUVYwSUJOQkczWnlhaUVSSUJjZ0ZpZ0NBQ0FTY3lBYUtBSUFJaEp6SUFWekloWkJBWFFnRmtFZmRuSWlGellDQUNBT1FkYURpOU44YWlBRFFSNTBJQU5CQW5aeUloWWdEWE1nRTNOcUlCZHFJQkZCQlhRZ0VVRWJkbkpxSVFNZ0dTQWJLQUlBSUJSeklBRW9BZ0J6SUFaeklnRkJBWFFnQVVFZmRuSWlBVFlDQUNBTlFkYURpOU44YWlBVFFSNTBJQk5CQW5aeUloTWdGbk1nRVhOcUlBRnFJQU5CQlhRZ0EwRWJkbkpxSVFFZ0dpQVlLQUlBSUJWeklBSW9BZ0J6SUJKeklnSkJBWFFnQWtFZmRuSWlBallDQUNBQUlCWkIxb09MMDN4cUlCRkJIblFnRVVFQ2RuSWlFU0FUY3lBRGMyb2dBQ2dDQUdvZ0Ftb2dBVUVGZENBQlFSdDJjbW8yQWdBZ0hTQWRLQUlBSUFGcU5nSUFJQjRnSGlnQ0FDQURRUjUwSUFOQkFuWnlhallDQUNBZklCOG9BZ0FnRVdvMkFnQWdJQ0FnS0FJQUlCTnFOZ0lBQ3lzQUlBQkJBRG9BQ0NBQkJFQkJnNEFDRUY4aUFVRUFRWU9BQWhCVUdnVkJBQ0VCQ3lBQUlBRTJBZ3dMMVFNQkFuOGpCQ0VGSXdSQklHb2tCQUpBQWtBQ1FBSkFBa0FDUUNBRFFZQUJhdzZCQVFBREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNQkF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREFnTUxRUkFoQmtFS0lRTU1Bd3RCR0NFR1FRd2hBd3dDQzBFZ0lRWkJEaUVEREFFTERBRUxJQUFnQXpZQ0JFRUFJUU1EUUNBRklBTkJBblpCQW5ScUlBTkJBM0ZxSUFJZ0Eyb3NBQUE2QUFBZ0EwRUJhaUlESUFaSERRQUxDeUFFQkVBZ0FDQUVMQUFBT2dBSUlBQWdCQ3dBQVRvQUNTQUFJQVFzQUFJNkFBb2dBQ0FFTEFBRE9nQUxJQUFnQkN3QUJEb0FEQ0FBSUFRc0FBVTZBQTBnQUNBRUxBQUdPZ0FPSUFBZ0JDd0FCem9BRHlBQUlBUXNBQWc2QUJBZ0FDQUVMQUFKT2dBUklBQWdCQ3dBQ2pvQUVpQUFJQVFzQUFzNkFCTWdBQ0FFTEFBTU9nQVVJQUFnQkN3QURUb0FGU0FBSUFRc0FBNDZBQllnQUNBRUxBQVBPZ0FYQlNBQVFRaHFJZ0pDQURjQ0FDQUNRZ0EzQWdnTElBQWdCUkN3QkNBQkJFQWdCU1FFRHdzZ0FCQ3ZCQ0FGSkFRTFZnRUJmeU1FSVFJakJFRVFhaVFFUVJRZ0FoQWxJUU1nQWlRRUlBTWhBaUFCUlFSQUR3c2dBa0hMQUdvaEEwRUFJUUlEUUNBQUlBSnFJZ1FnQXlBQ2FpQUVMUUFBY3pvQUFDQUNRUUZxSWdJZ0FVY05BQXNMMWdRQkIzOGdBQ0VFSUFFaEFBSkFBa0FDUUFOQUFrQWdCQ0VCQTBBQ1FDQUFLQUlBSVFNZ0FVRUVhaUVFQWtBQ1FBSkFBa0FDUUNBQktBSUFJZ2dPUUFBREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd0VEQXdNREF3TURBd01EQXdNREF3TURBd01EQXdJREN3d0lDd3dJQ3lBRFJRMEVEQUVMSUFnZ0EwY05BUXNnQkNFQklBQkJCR29oQUF3QkN3c2dDRUV1UncwQUFrQUNRQUpBSUFNT1hRQUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUFBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBQUVMREFFTERBRUxEQUVMUVFBaEFBc01BZ3NnQTBVaEFBd0JDd0pBQWtBQ1FBSkFJQVFvQWdBT0x3QUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUJBZ3RCQVNFQURBTUxJQUZCQ0dvaUF5Z0NBRUVxUmdSQUlBRW9BZ3hGQkVCQkFTRUFEQVFMQ3lBQVFTNFFkQ0lGUlNFQklBTW9BZ0JGQkVBZ0FRUkFRUUVoQUF3RUN5QUZLQUlFUlNFQURBTUxJQUVFUUNBQUlRVkJFeUVHQlNBRVFkZ09FTWNCQkVCQkV5RUdCU0FGUVFScUlnQkJMaEIwQkVCQkV5RUdCU0FDQkg4Z0F5QUFFSE1GSUFNZ0FCQ2RBUXNpQUVVaEFBd0ZDd3NMREFFTElBQWhCeUFESVFrTEEwQWdCa0VUUmdSQUlBVWlCeWdDQUNFSkN5QUpSUVJBUVFBaEFBd0NDeUFIUVFScUlRVWdCQ0FISUFJUTV3RUVRRUVCSVFBRlFSTWhCZ3dCQ3dzTElBQUx5d0VDQlg4QmZpQUFRUmhxSWdNb0FnQWlBVUVEYWlJRUlBQW9BaFFpQlVrRWZpQUFLQUlBSWdJZ0FVRUJhbW90QUFCQkNIUWdBaUFCYWkwQUFISWdBaUFCUVFKcWFpMEFBRUVRZEhJZ0FpQUVhaTBBQUVFWWRISWhBaUFESUFGQkJHb2lBVFlDQUNBQ3JRVkNBQXNoQmlBQlFRTnFJZ0lnQlU4RVFDQUdEd3NnQUNnQ0FDSUFJQUZCQVdwcUxRQUFRUWgwSUFBZ0FXb3RBQUJ5SUFBZ0FVRUNhbW90QUFCQkVIUnlJQUFnQW1vdEFBQkJHSFJ5SVFBZ0F5QUJRUVJxTmdJQUlBQ3RRaUNHSUFhRUMrY0JBUVovSXdRaEF5TUVRUkJxSkFRZ0FrVUVRQ0FESkFRUEN5QURJUVVnQUVFRWFpSUdLQUlBSUFKcUlRTWdCaUFETmdJQUlBTWdBRUVJYWlJSEtBSUFJZ1JMQkVBZ0FDZ0NEQ0lJUVFCSElBTWdDRXR4QkVBZ0JTQUlOZ0lBUWF6MUFrSFlHeUFGRUdCQnJQVUNFRllnQnlnQ0FDRUVJQVlvQWdBaEF3c2dBQ2dDQUNBRElBUkJJR29nQkVFQ2Rtb2lCRXNFZnlBRElnUUZJQVFMRUZjaUEwVUVRRUdzOVFJUVZnc2dBQ0FETmdJQUlBY2dCRFlDQUFVZ0FDZ0NBQ0VEQ3lBRElBQkJGR29pQUNnQ0FHb2dBU0FDRUZNYUlBQWdBQ2dDQUNBQ2FqWUNBQ0FGSkFRTHdnRUJBMzhDUUFKQUFrQUNRQUpBSUFCQnFDVnFLQUlBUVFGckRnVUFBUUlEQXdRTElBSkZCRUFQQ3lBQVFjWXhhaUVGSUFCQnhURnFJUU1nQUVIRU1Xb2hBQU5BSUFNZ0F5MEFBQ0FGTFFBQWFpSUVPZ0FBSUFBZ0JDQUFMUUFBYWlJRU9nQUFJQUVnQVMwQUFDQUVhem9BQUNBQlFRRnFJUUVnQWtGL2FpSUNEUUFMRHdzZ0FDQUJJQUlReGdJUEN5QUNSUVJBRHdzRFFDQUFJQUVnQTJvUXd3SWdBMEVRYWlJRElBSkpEUUFMRHdzZ0FFR3NKV29nQVNBQ0lBRVFyZ1FMQytnREFRaC9JQUJCdERGcUlnWW9BZ0FnQUVHMEoyb2dBUzBBQUVFQ2RHb29BZ0J6SVFJZ0JpQUNOZ0lBSUFCQnVERnFJZ2NvQWdBZ0FFRzBKMm9nQVMwQUFVRUNkR29vQWdCeklRTWdCeUFETmdJQUlBQkJ2REZxSWdnb0FnQWdBRUcwSjJvZ0FTMEFBa0VDZEdvb0FnQnpJUVFnQ0NBRU5nSUFJQUJCd0RGcUlna29BZ0FnQUVHMEoyb2dBUzBBQTBFQ2RHb29BZ0J6SVFVZ0NTQUZOZ0lBSUFZZ0FpQUFRYlFuYWlBQkxRQUVRUUowYWlnQ0FITWlBallDQUNBSElBTWdBRUcwSjJvZ0FTMEFCVUVDZEdvb0FnQnpJZ00yQWdBZ0NDQUVJQUJCdENkcUlBRXRBQVpCQW5ScUtBSUFjeUlFTmdJQUlBa2dCU0FBUWJRbmFpQUJMUUFIUVFKMGFpZ0NBSE1pQlRZQ0FDQUdJQUlnQUVHMEoyb2dBUzBBQ0VFQ2RHb29BZ0J6SWdJMkFnQWdCeUFESUFCQnRDZHFJQUV0QUFsQkFuUnFLQUlBY3lJRE5nSUFJQWdnQkNBQVFiUW5haUFCTFFBS1FRSjBhaWdDQUhNaUJEWUNBQ0FKSUFVZ0FFRzBKMm9nQVMwQUMwRUNkR29vQWdCeklnVTJBZ0FnQmlBQ0lBQkJ0Q2RxSUFFdEFBeEJBblJxS0FJQWN6WUNBQ0FISUFNZ0FFRzBKMm9nQVMwQURVRUNkR29vQWdCek5nSUFJQWdnQkNBQVFiUW5haUFCTFFBT1FRSjBhaWdDQUhNMkFnQWdDU0FGSUFCQnRDZHFJQUV0QUE5QkFuUnFLQUlBY3pZQ0FBdDRBUUovQWtBZ0FDZ0NBQkNUQVNJQ0lBRW9BZ0FRa3dFaUEwWUVRQU5BQWtBZ0FDZ0NBRVVFUUVFQUlRQU1BUXNnQUVFRWFpSUFLQUlBRUpNQklnSWdBVUVFYWlJQktBSUFFSk1CSWdOR0RRRWdBeUVBSUFJaEFRd0RDd3RCQUE4RklBTWhBQ0FDSVFFTEN5QUJJQUJJQkg5QmZ3VkJBUXNMa1FRQkJYOGdBQ2dDQUNJRFJRUkFJQUZCQURvQUFBOExJQUpCZjJvaEJDQUFJUUlnQXlFQUFrQURRQ0FFSVFNZ0FpRUVBa0FDZndKQUFrQUNRQU5BQWtBZ0EwRUFUQTBJSUFOQmYyb2hBaUFFUVFScUlRVWdBRUdBQVVrRVFDQUNJUVFnQlNFQ0lBRWhCU0FBSVFOQkFTRUFEQUVMSUFCQmdCQkpCRUFnQTBGK2FpRUNJQU5CQVVvTkF3c2dBRUdBZUhGQmdMQURSZ1IvSUFVb0FnQWlBMEdBZUhGQmdMZ0RSaUVHSUFCQkNuUkJnTWlBWldvZ0Eyb2hBeUFFUVFocUlRUWdCa1VFUUNBRklRUUxJQVpGQkVBZ0FDRURDeUFFQlNBQUlRTWdCUXNoQUFKQUFrQWdBMEdBZ0FSSkJFQWdBa0YrYWlFRUlBSkJBVW9OQmd3QkJTQURRWUNBZ0FGSkJFQWdBaUVFREFJTEN3d0JDeUFFUVgxcUlRSWdCRUVDU2cwRkN5QUFLQUlBSWdWRkRRZ2dBaUVESUFBaEJDQUZJUUFNQVFzTERBUUxJQUloQkNBRklRSWdBU0VGUVFFaEJ5QUFJZ05CQm5aQndBRnlJUVpCQWd3Q0N5QUJJQU5CREhaQjRBRnlPZ0FBSUFBaEFpQUJRUUZxSVFWQkFpRUhJQU5CQm5aQlAzRkJnQUZ5SVFaQkF3d0JDeUFCSUFOQkVuWkI4QUZ5T2dBQUlBRWdBMEVNZGtFL2NVR0FBWEk2QUFFZ0FpRUVJQUFoQWlBQlFRSnFJUVZCQXlFSElBTkJCblpCUDNGQmdBRnlJUVpCQkFzaEFDQUZJQVk2QUFBZ0FTQUhhaUVGSUFOQlAzRkJnQUZ5SVFNTElBRWdBR29oQVNBRklBTTZBQUFnQWlnQ0FDSUFEUUFMQ3lBQlFRQTZBQUFMdWdFQkFuOUJ1QTRvQWdCQmYwWUVRRUc0RGtFU0VKUUNJZ0UyQWdBZ0FSQ1VBaG9MQW44Q1FBSkFBa0FnQUVHYzZRRnFLQUlBRGdJQUFRSUxJQUJCektjQmFpSUJLQUlBSWdCQkVIRUVRRUc0RGlnQ0FFSC9BM0ZCL3dOekRBTUZRYmdPS0FJQVFYOXpJUUlnQUVFQmNRUi9RYVFDQlVHMkF3c2dBbkVNQXdzQUN3OExRYmdPS0FJQVFYOXpJUUlnQUVITXB3RnFJUUVnQUVHUjZRRnFMQUFBQkg5Qi80TUJCVUcyZ3dJTElBSnhDeUVBSUFFZ0FEWUNBQXZlQVFFRWZ5QUFFSHdpQWtVRVFFRUFEd3NnQUVITTh3QnFJUVFnQVVFRlJnUkFBMEFDUUNBRFFRRnFJZ05CL3dCeFJRUkFFSVVCQ3lBRUtBSUFRUVZHRFFBZ0FDQUFRWkM4QTJvcEF3QkJBQ0FBS0FJQUtBSVFRUU54UWJnQ2FoRUNBQ0FBRUh3aUFnMEJRUUFoQWdzTElBSVBCU0FDSVFNTEEwQUNmMEVBSUFRb0FnQWlBa0VGUmcwQUdpQUZRUUZxSWdWQi93QnhSUVJBRUlVQklBUW9BZ0FoQWdzZ0F5QUNJQUZHRFFBYUlBQWdBRUdRdkFOcUtRTUFRUUFnQUNnQ0FDZ0NFRUVEY1VHNEFtb1JBZ0FnQUJCOElnTU5BVUVBQ3lFQ0N5QUNDejBCQVg4Z0FFR2t2QU5xTEFBQVJRUkFJQUVQQzBFQUlBRnJRUTl4SUFGcUlRSWdBRUdZdkFOcUtBSUFRUU5HQkg4Z0FrRVFhZ1VnQWtFSWFnc0wxaEFDRlg4RWZnSkFJd1FoQlNNRVFkQUFhaVFFSUFCQnBMd0RhaUlRUVFBNkFBQWdBRUdzdkFOcUloRkJBRG9BQUNBQUlBQkJyS1lCYWlJTVFRY2dBQ2dDQUNnQ0RFRWZjVUhLQUdvUkFRQkJCMGNOQUNBQVFhaThBMm9pRFVFQU5nSUFBa0FDUUFKQUlBd3NBQUJCMGdCSERRQUNRQUpBQWtBQ1FDQUFRYTJtQVdvc0FBQkJ4UUJyRGgwQUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FRSUxJQUJCcnFZQmFpd0FBRUgrQUVjTkF5QUFRYSttQVdvc0FBQkIzZ0JIRFFNZ0FFR1l2QU5xSWdKQkFUWUNBQ0FBS0FJQUlnTW9BaEFoQmlBQUlBQWdBeWdDRkVFSGNVR0dBV29SQUFCQ2VYeEJBQ0FHUVFOeFFiZ0NhaEVDQUF3RUN3d0JDd3dCQ3lBQVFhNm1BV29zQUFCQjhnQkhEUUFnQUVHdnBnRnFMQUFBUVNGSERRQWdBRUd3cGdGcUxBQUFRUnBIRFFBZ0FFR3hwZ0ZxTEFBQVFRZEhEUUFDUUFKQUFrQUNRQUpBSUFCQnNxWUJhaXdBQUE0REFBRUNBd3RCQWlFQ0RBTUxRUU1oQWd3Q0MwRUVJUUlNQVFzTUFRc2dBRUdZdkFOcUlBSTJBZ0FnQWlFR0RBSUxRUUJCZ0lDQUFSQlhJZ1JGSWc0RVFFR3M5UUlRVmdzZ0FDZ0NBQ2dDRkNFQ1FRQWtCU0FDSUFBUVRxMGpCNjFDSUlhRUlSY2pCU0VDUVFBa0JRSkFJQUpCQVhGRkJFQWdGNmNoQ1NBQUtBSUFLQUlNSVFKQkFDUUZJQUlnQUNBRVFmRC8vd0FRQnlFSEl3VWhBa0VBSkFVZ0FrRUJjVVVFUUFKQUlBZEJBRW9FUUNBQVFaaThBMm9oQ2lBSlFSeElJUXNnQkVFY0lBbHJhaUlJUVFGcUlSSWdDRUVDYWlFVElBaEJBMm9oRkFKQUlBZEJIMG9FUUVFQUlRSUNRQUpBQWtBRFFBSkFBa0FnQkNBQ2FpSURMQUFBUWRJQVJnUkFJQWNnQW1zaUZVRUVUd1JBSUFNc0FBRWlGa0hGQUVjRVFDQVZRUVpMSUJaQjRRQkdjVVVOQXlBRExBQUNRZklBUncwRElBTXNBQU5CSVVjTkF5QURMQUFFUVJwSERRTWdBeXdBQlVFSFJ3MERBa0FDUUFKQUFrQWdBeXdBQmc0REFBRUNBd3RCQWlFRERBY0xEQWtMREFjTERBTUxJQU1zQUFKQi9nQkdCRUFnQXl3QUEwSGVBRVlFUUNBS1FRRTJBZ0FnQ3lBQ1FRQktjVVVOQ3lBSUxBQUFRZElBUncwRUlCSXNBQUJCMHdCSERRUWdFeXdBQUVIR0FFY05CQ0FVTEFBQVFkZ0FSZzBMQ3dzTEN3c2dCeUFDUVFGcUlnSktEUUVNQ0FzTERBSUxRUVFoQXd3QkMwRURJUU1MQlVFQUlRSUNRQUpBQTBBQ1FBSkFJQVFnQW1vaUF5d0FBRUhTQUVZRVFDQUhJQUpySWdoQkJFOEVRQ0FETEFBQklndEJ4UUJHQkVBZ0F5d0FBa0grQUVjTkF5QURMQUFEUWQ0QVJ3MERRUUVoQXd3SEN5QUlRUVpMSUF0QjRRQkdjUVJBSUFNc0FBSkI4Z0JHQkVBZ0F5d0FBMEVoUmdSQUlBTXNBQVJCR2tjTkJTQURMQUFGUVFkSERRVUNRQUpBQWtBQ1FDQURMQUFHRGdNQUFRSURDMEVDSVFNTURBdEJBeUVEREFnTERBa0xDd3NMQ3dzTElBY2dBa0VCYWlJQ1NnMEJEQWNMQ3d3QkMwRUVJUU1MQ3lBS0lBTTJBZ0FMSUEwZ0FpQUphaUlDTmdJQUlBQW9BZ0FvQWhBaEEwRUFKQVVnQXlBQUlBS3RJaGVuSUJkQ0lJaW5RUUFRVUNNRklRSkJBQ1FGSUFKQkFYRU5CQ0FLS0FJQVFYNXhRUUpHQkVBZ0FDZ0NBQ2dDRENFQ1FRQWtCU0FDSUFBZ0RFRUhFQWNhSXdVaEFrRUFKQVVnQWtFQmNRMEZDd3NMSUEwb0FnQWhBaUFPUlFSQUlBUVFVZ3NnQWtVTkJTQUFRWmk4QTJvaEFnd0RDd3NMRUJjaEFpQU9CRUFnQWhBZUN5QUVFRklnQWhBZURBRUxJQUlvQWdBaEJnc0Nmd0pBQWtBQ1FDQUdRUU5yRGdJQkFBSUxJQVZCQURZQ1JDQUZRVHMyQWtnZ0JVRkFhMEVCTmdJQUlBVWdBRUVZYWpZQ0FBd0RDeUFBSUFCQnM2WUJhaUlDUVFFZ0FDZ0NBQ2dDREVFZmNVSEtBR29SQVFBYUlBSXNBQUFOQWtFSURBRUxRUWNMSVFJZ0FFRzBwZ0ZxSUFJMkFnQWdBRUdzOHdCcUtBSUFRYkRMQkdvb0FnQkZCRUFnQUVIUTh3QnFRUUU2QUFBTElBQkJ6UE1BYWlFQ0FrQWdBQkI4QkVBZ0FFSFE4d0JxSVFNZ0FFR1F2QU5xSVFZRFFDQUNLQUlBSWdSQkFVWU5BaUFFUVFSR0lBTXNBQUJCQUVkeERRSWdBQ0FHS1FNQVFRQWdBQ2dDQUNnQ0VFRURjVUc0QW1vUkFnQWdBQkI4RFFBTEN3c2dBRUd0dkFOcUxBQUFSU0FCY2tVTkFDQUFJQUJCa0x3RGFpSURLUU1BUVFBZ0FDZ0NBQ2dDRUVFRGNVRzRBbW9SQWdBZ0VTd0FBQVJBSUFWQkFEWUNSQ0FGUVJrMkFrZ2dCVUZBYTBFQk5nSUFJQVVnQUVFWWFqWUNBQ0FCUlEwQkN5QUFRWjY4QTJvZ0FFSFVwZ0ZxTEFBQU9nQUFBa0FDUUNBQVFkRHpBR29zQUFCRkRRQWdFQ3dBQUVVTkFDQUFRWjI4QTJvaER3d0JDeUFBSUFBb0FnQW9BaFJCQjNGQmhnRnFFUUFBSVJjZ0FFR0l2QU5xSWdjcEF3QWhHU0FES1FNQUlSb2dBaWdDQUNFS0lBQkJuYndEYWlFQklBQkJvYndEYWlFR0lBQkIrTzRDYWlFSkFrQUNRQUpBQTBBQ1FFRUFKQVZCQmlBQUVBVWhCQ01GSVFoQkFDUUZJQWhCQVhFTkF5QUVSUTBBQWtBQ1FBSkFBa0FnQWlnQ0FFRUNhdzRFQUFJREFRTUxEQVVMREFJTElBWWdBU3dBQUFSL0lBa3NBQUJGQlVFQUMwRUJjVG9BQUFzZ0FDZ0NBQ2dDRUNFRUlBTXBBd0FoR0VFQUpBVWdCQ0FBSUJpbklCaENJSWluUVFBUVVDTUZJUVJCQUNRRklBUkJBWEZGRFFFTUF3c0xEQUlMSUFZZ0FTd0FBQVIvSUFCQnVPZ0JhaXdBQUVFQmN3VkJBQXM2QUFBTUFRc1FGeUVHSUFBb0FnQW9BaEFoQkVFQUpBVWdCQ0FBSUJlbklCZENJSWluUVFBUVVDTUZJUVJCQUNRRklBUkJBWEVFUUVFQUVCZ1FXZ1VnQmhBZUN3c2dCeUFaTndNQUlBTWdHamNEQUNBQ0lBbzJBZ0FnQUNnQ0FDZ0NFQ0VDUVFBa0JTQUNJQUFnRjZjZ0YwSWdpS2RCQUJCUUl3VWhBa0VBSkFVZ0FrRUJjUVJBUVFBUUdCQmFCU0FCSVE4TEN5QVBMQUFBQkVBZ0FFR2h2QU5xTEFBQVJRUkFJQVVrQkVFQkR3c0xJQUJCNUx3RGFpQUFRUmhxRUdvYUlBVWtCRUVCRHdzZ0JTUUVRUUFMQmdCQkZ4QUFDd1lBUVJZUUFBc0dBRUVSRUFBTENBQkJCeEFBUVFBTExRRUJmeUFBUVRzUXJRRWlBZ1JBSUFKQkJHb1F5UUloQUNBQkJFQWdBa0VBTmdJQUN3VkJBQ0VBQ3lBQUM5WUJBUUovSXdRaEF5TUVRWUFRYWlRRUFrQWdBQVJBQWtBQ1FBSkFBa0FnQUNnQ0FBNHdBQUlDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lCQWdzTUJBc2dBVUVBTmdJQURBRUxJQU5CZ0JBUXRnTkZCRUFnQTBFQU9nQUFDeUFESUFFZ0FoQjdHaUFCRUZraUJBUkFJQVJCQVdvZ0Fra2dBU0FFUVg5cVFRSjBhaWdDQUVFdlIzRUVRQ0FCUWZ3TUVJWUNHZ3NMQ3lBQklBQWdBaEI0R2lBREpBUVBDd3NnQWtVRVFDQURKQVFQQ3lBQlFRQTJBZ0FnQXlRRUM3OEJBUUovQWtBZ0FrRi9haUlFQkVCQkFDRUNBMEFDUUFKQUFrQWdBQ0FDUVFKMGFpZ0NBQ0lERGwwQUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnRUNDd3dFQzBFdklRTUxJQUVnQWtFQ2RHb2dBellDQUNBQ1FRRnFJZ0lnQkVrTkFBc0ZRUUFoQWdzTElBRWdBa0VDZEdwQkFEWUNBQXRXQVFOL0lBQW9BZ1FpQlVFSWRTRUVJQVZCQVhFRVFDQUNLQUlBSUFScUtBSUFJUVFMSUFBb0FnQWlBQ2dDQUNnQ0hDRUdJQUFnQVNBQ0lBUnFJQVZCQW5FRWZ5QURCVUVDQ3lBR1FRZHhRWmdDYWhFS0FBc0hBQ0FBSUFGR0N3c0FJQUFRL0FFZ0FCQlNDeElBSUFCQjJDVTJBZ0FnQUVFRWFoQ05Bd3VEQVFFQmZ5TUVJUUVqQkVFUWFpUUVRUUFrQlNBQUVBc2pCU0VBUVFBa0JTQUFRUUZ4UlFSQVFRQWtCVUVaUWJ2eUFDQUJFQTFCQUNRRkMwRUFFQmdpQUJBVkdrRUFKQVZCR1VIajhnQWdBVUVJYWhBTlFRQWtCVUVBRUJnaEFVRUFKQVZCQkJBTEl3VWhBRUVBSkFVZ0FFRUJjUVJBUVFBUUdDSUFFRm9GSUFFUVdnc0xPQUVDZnlNRUlRQWpCRUVRYWlRRVFhaThBMEVERUVrRVFFR2o4UUFnQUJDQ0FRVkJyTHdES0FJQUVFY2hBU0FBSkFRZ0FROExRUUFMdUFFQkJYOGpCQ0VGSXdSQkVHb2tCQ0FBUVF0cUlnWXNBQUFpQTBFQVNDSUVCSDhnQUNnQ0NFSC8vLy8vQjNGQmYyb0ZRUW9MSWdjZ0Fra0VRQ0FBSUFjZ0FpQUhheUFFQkg4Z0FDZ0NCQVVnQTBIL0FYRUxJZ05CQUNBRElBSWdBUkNrQXdVZ0JBUi9JQUFvQWdBRklBQUxJZ01oQkNBQ0JFQWdCQ0FCSUFJUVhSb0xJQVZCQURvQUFDQURJQUpxSUFVc0FBQTZBQUFnQml3QUFFRUFTQVJBSUFBZ0FqWUNCQVVnQmlBQ09nQUFDd3NnQlNRRUlBQUxwd0VCQW44akJDRUZJd1JCa0FOcUpBUWdCU0FBTmdJQUlBVWdBVUYvYWpZQ0JDQUZRUWhxSWdSQkFFSDhBQkJVR2lBRVFYODZBRXNnQkVFZU5nSWtJQVJCZ0FJMkFqQWdCQ0FGUVlnQmFqWUNMQ0FFUVg4MkFrd2dCQ0FGTmdKVUlBRUVRQ0FCUVFCSUJFQkJpTHdEUWNzQU5nSUFRWDhoQUFVZ0JDQUNJQU1RclFNaEFDQUVRUUJCQUJERUFSb2dBQ0FCVHdSQVFYOGhBQXNMQlVGL0lRQUxJQVVrQkNBQUM2a0JBUVYvSXdRaEFpTUVRUkJxSkFRZ0FpQUJRZjhCY1NJR09nQUFBa0FDUUNBQVFSQnFJZ01vQWdBaUJBMEFJQUFRakFJRVFFRi9JUUVGSUFNb0FnQWhCQXdCQ3d3QkN5QUFRUlJxSWdNb0FnQWlCU0FFU1FSQUlBRkIvd0Z4SWdFZ0FDd0FTMGNFUUNBRElBVkJBV28yQWdBZ0JTQUdPZ0FBREFJTEN5QUFJQUpCQVNBQUtBSWtRUjl4UWNvQWFoRUJBRUVCUmdSL0lBSXRBQUFGUVg4TElRRUxJQUlrQkNBQkM5RUJBUU4vSUFKRkJFQVBDeUFDUVg5cUlRUWdBQkJaSVFNQ1FBSkFBMEFDUUNBRFFRQk1CRUFnQUNFQ0RBRUxJQUFnQTBGL2FpSUNRUUowYWlnQ0FFRXZSZzBDSUFJaEF3d0JDd3NNQVFzZ0FDQURRUUowYWlFQ0N5QUVJQUlnQUNJRmEwRUNkVThFUUNBQUVGa2hBd0pBQWtBRFFBSkFJQU5CQUV3RVFDQUFJUUlNQVFzZ0FDQURRWDlxSWdKQkFuUnFLQUlBUVM5R0RRSWdBaUVEREFFTEN3d0JDeUFBSUFOQkFuUnFJUUlMSUFJZ0JXdEJBblVoQkFzZ0FTQUFJQVFRcmdFYUlBRWdCRUVDZEdwQkFEWUNBQXRJQVFKL0lBQW9BZ0FvQWdCQlVHcEJDa2tFUUFOQUlBSkJDbXhCVUdvZ0FDZ0NBQ0lCS0FJQWFpRUNJQUFnQVVFRWFpSUJOZ0lBSUFFb0FnQkJVR3BCQ2trTkFBc0xJQUlMM2hJREZuOEJmZ0Y4SXdRaENDTUVRWUFCYWlRRUlBaEIyQUJxSVJFZ0NFSElBR29oRWlBSVFTaHFJUTRnQ0VFZ2FpRVRJQWhCR0dvaEZDQUlRUkJxSVJVZ0NFRUlhaUVXSUFoQjhBQnFJUmNnQ0VIb0FHb2hHQ0FJUWV3QWFpSUtJQUUyQWdBZ0FFRUFSeUVRUVFBaEFRSkFBa0FEUUFKQUFrQWdDVUYvU2dSQUlBVkIvLy8vL3djZ0NXdE1CRUFnQlNBSmFpRUpEQUlMSUFBb0FnQkJJSEZGQkVCQmlMd0RRY3NBTmdJQUMwRi9JUWtMQ3lBS0tBSUFJZ1lvQWdBaUIwVU5BaUFHSVFVRFFBSkFBa0FDUUNBSERpWUFBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBQUVMREFFTElBb2dCVUVFYWlJRk5nSUFJQVVvQWdBaEJ3d0JDd3NnQlVIZ0pCQ3VBeUVGSUFvZ0NpZ0NBQ0lISUFWQmZuRkJBblJxTmdJQUlBY2dCVUVCZGtFQ2RHb2dCbXRCQW5VaEJTQVFCRUFnQUNBR0lBVVF4UUVMSUFVTkFTQUtJQW9vQWdBaUJTQUtLQUlBS0FJRVFWQnFRUXBQQkg5QmZ5RVBRUUVGSUFVb0FnaEJKRVlFZnlBRktBSUVRVkJxSVE5QkFTRUJRUU1GUVg4aEQwRUJDd3RCQW5ScUlnVTJBZ0FnQlNnQ0FDSUhRV0JxSWdaQkgwdEJBU0FHZEVHSjBRUnhSWElFUUVFQUlRWUZRUUFoQ3lBSElRWURRRUVCSUFaQllHcDBJQXR5SVFZZ0JVRUVhaUlGS0FJQUlnZEJZR29pQzBFZlMwRUJJQXQwUVluUkJIRkZja1VFUUNBR0lRc2dCeUVHREFFTEN5QUtJQVUyQWdBTEFrQWdCMEVxUmdSL0FuOENRQ0FGS0FJRVFWQnFRUXBQRFFBZ0NpZ0NBQ0lGS0FJSVFTUkhEUUFnQkNBRlFRUnFJZ0VvQWdCQlVHcEJBblJxUVFvMkFnQWdBeUFCS0FJQVFWQnFRUU4wYWlrREFLY2hBVUVCSVFjZ0JVRU1hZ3dCQ3lBQkJFQkJmeUVKREFRTElCQUVRQ0FDS0FJQVFRTnFRWHh4SWdVb0FnQWhBU0FDSUFWQkJHbzJBZ0FGUVFBaEFRdEJBQ0VISUFvb0FnQkJCR29MSVFVZ0NpQUZOZ0lBSUFaQmdNQUFjaUVMUVFBZ0FXc2hEU0FCUVFCSUlneEZCRUFnQmlFTEN5QU1SUVJBSUFFaERRc2dCeUVCSUFVRklBb1Fnd0lpRFVFQVNBUkFRWDhoQ1F3REN5QUdJUXNnQ2lnQ0FBc2lCaWdDQUVFdVJnUkFJQVlvQWdSQktrY0VRQ0FLSUFaQkJHbzJBZ0FnQ2hDREFpRUZJQW9vQWdBaEJnd0NDeUFHS0FJSVFWQnFRUXBKQkVBZ0NpZ0NBQ0lHS0FJTVFTUkdCRUFnQkNBR1FRaHFJZ1VvQWdCQlVHcEJBblJxUVFvMkFnQWdBeUFGS0FJQVFWQnFRUU4wYWlrREFLY2hCU0FLSUFaQkVHb2lCallDQUF3REN3c2dBUVJBUVg4aENRd0RDeUFRQkVBZ0FpZ0NBRUVEYWtGOGNTSUdLQUlBSVFVZ0FpQUdRUVJxTmdJQUJVRUFJUVVMSUFvZ0NpZ0NBRUVJYWlJR05nSUFCVUYvSVFVTEMwRUFJUWNEUUNBR0tBSUFRYjkvYWlJTVFUbExCRUJCZnlFSkRBSUxJQW9nQmtFRWFpSUdOZ0lBSUFkQk9teEJydW9BYWlBTWFpd0FBQ0laUWY4QmNTSU1RWDlxUVFoSkJFQWdEQ0VIREFFTEN5QVpSUVJBUVg4aENRd0JDeUFQUVg5S0lSb0NRQUpBSUJsQkUwWUVRQ0FhQkVCQmZ5RUpEQVFGREFJTEFBVWdHZ1JBSUFRZ0QwRUNkR29nRERZQ0FDQUlJQU1nRDBFRGRHb3BBd0EzQXdBTUFnc2dFRVVFUUVFQUlRa01CQXNnQ0NBTUlBSVFzUUVnQ2lnQ0FDRUdDd3dCQ3lBUVJRUkFRUUFoQlF3REN3c2dCa0Y4YWlnQ0FDSU1RVjl4SVFZQ1FBSkFBa0FDUUFKQUFrQUNRQUpBSUFkQkFFY2dERUVQY1VFRFJuRUVmeUFHQlNBTUlnWUxRY01BYXc0eEFnWUdCZ1lHQmdZR0JnWUdCZ1lHQmdNR0JnWUdCZ1lHQmdZR0JnWUdCZ1lCQmdZR0JnWUdCZ1lHQkFBR0JnWUdCUVlMQWtBQ1FBSkFBa0FDUUFKQUFrQUNRQ0FIUWY4QmNVRVlkRUVZZFE0SUFBRUNBd1FIQlFZSEN5QUlLQUlBSUFrMkFnQkJBQ0VGREE4TElBZ29BZ0FnQ1RZQ0FFRUFJUVVNRGdzZ0NDZ0NBQ0FKckRjREFFRUFJUVVNRFFzZ0NDZ0NBQ0FKT3dFQVFRQWhCUXdNQ3lBSUtBSUFJQWs2QUFCQkFDRUZEQXNMSUFnb0FnQWdDVFlDQUVFQUlRVU1DZ3NnQ0NnQ0FDQUpyRGNEQUVFQUlRVU1DUXRCQUNFRkRBZ0xJQWdwQXdDbkVMY0RJQUFRckFFYVFRRWhCUXdIQ3lBSUtRTUFweUFBRUt3QkdrRUJJUVVNQmdzZ0NDZ0NBQ0lIUVFBZ0JSQ3pBeUlHSUFkclFRSjFJUXdnRFNBR0JIOGdEQVVnQlFzaUJrZ0VmeUFHQlNBTkN5RUZJQXRCZ01BQWNRUkFJQUFnQnlBR0VNVUJJQlVnQlNBR2F6WUNBQ0FWUVl5TEJEWUNCQ0FBUWY3dEFDQVZFSkFCR2dVZ0ZpQUZJQVpyTmdJQUlCWkJqSXNFTmdJRUlBQkIvdTBBSUJZUWtBRWFJQUFnQnlBR0VNVUJDd3dGQ3lBSVFZaThBeWdDQUJDU0FpSUhOZ0lBREFJTElBZ29BZ0FoQnd3QkN5QUdRU0J5SWdkQnN1MEFhaXdBQUNFTUlBNGdDMEVEZGtFQmNVRUJjMEdKN2dCcU5nSUFJQTRnQzBFTGRrRUJjVUVCYzBHTDdnQnFOZ0lFSUE0Z0MwRU5ka0VCY1VFQmMwR043Z0JxTmdJSUlBNGdDMEVCY1VFQmMwR1A3Z0JxTmdJTUlBNGdDMEVRZGtFQmNVRUJjMEdSN2dCcU5nSVFJQTRnRERZQ0ZDQU9JQVkyQWhnZ0YwRVFRYXZ1QUNBT0VNRURHZ0pBQWtBQ1FDQUhRZUVBYXc0WUFBSUNBUUFBQUFJQkFnSUNBZ0lCQVFJQ0FnSUJBZ0lCQWdzZ0NDc0RBQ0VjSUJJZ0RUWUNBQ0FTSUFVMkFnUWdFaUFjT1FNSUlBQWdGeUFTRUpBQklRVU1CQXNnQ0NrREFDRWJJQkVnRFRZQ0FDQVJJQVUyQWdRZ0VTQWJOd01JSUFBZ0Z5QVJFSkFCSVFVTUF3dEJBQ0VGREFJTElBZEZCRUFnQ0VHQzdnQTJBZ0JCZ3U0QUlRY0xBa0FnQlVILy8vLy9CMGtFZnlBRkJVSC8vLy8vQndzaURFRUFTZ1JBSUFjaEJVRUFJUVlEUUNBWUlBVkJCQkRNQVNJUFFRQktCRUFnQlNBUGFpRUZJQVpCQVdvaUJpQU1TQTBCSUFZaEJRd0RDd3NnRDBFQVNBUkFRWDhoQ1F3REJTQUdJUVVMQlVFQUlRVUxDeUFOSUFWSUJIOGdCUVVnRFFzaEJpQUxRWURBQUhGQkFFY2lEVVVFUUNBVUlBWWdCV3MyQWdBZ0ZFR01pd1EyQWdRZ0FFSCs3UUFnRkJDUUFSb0xJQVVFUUNBRklRc0RRQ0FISUJnZ0IwRUVFTXdCYWlFSElCZ29BZ0FnQUJDc0FSb2dDMEYvYWlJTERRQUxDeUFOQkVBZ0V5QUdJQVZyTmdJQUlCTkJqSXNFTmdJRUlBQkIvdTBBSUJNUWtBRWFDeUFHSVFVTUFRc0xEQUVMSUFCRkJFQWdBUVJBUVFFaEFBTkFJQVFnQUVFQ2RHb29BZ0FpQVFSQUlBTWdBRUVEZEdvZ0FTQUNFTEVCSUFCQkFXb2hBU0FBUVFsSUJFQWdBU0VBREFJRklBRWhBQXNMQ3lBQVFRcElCRUFEUUNBRUlBQkJBblJxS0FJQUJFQkJmeUVKREFVTElBQkJBV29oQVNBQVFRbElCRUFnQVNFQURBRUZRUUVoQ1FzTEJVRUJJUWtMQlVFQUlRa0xDd3NnQ0NRRUlBa0xjQUVCZnlBQUtBSk1HaUFCQkVBZ0FFSDRBR29pQWlnQ0FFVUVRQ0FDUWF3aktBSUFLQUlBQkg5QmpCNEZRYkM3QXdzMkFnQUxJQUJCeWdCcUlnQXNBQUFpQWdSQUlBSWhBUVVnQUNBQlFRQktCSDlCQVFWQmZ3c2lBVG9BQUFzRklBQXNBRW9oQVFzZ0FVRVlkRUVZZFFzVEFDQUFJQUFRV1VFQ2RHb2dBUkJxR2lBQUN5RUJBbjhnQUJCdVFRRnFJZ0VRYkNJQ0JIOGdBaUFBSUFFUVV3VkJBQXNpQUFzWEFFRUFJQUFnQVNBQ0JIOGdBZ1ZCcEx3REN4Q0tBZ3RDQVFOL0lBSUVRQ0FCSVFNZ0FDRUJBMEFnQTBFRWFpRUVJQUZCQkdvaEJTQUJJQU1vQWdBMkFnQWdBa0YvYWlJQ0JFQWdCQ0VESUFVaEFRd0JDd3NMSUFBTDdBSUJCWDhqQkNFR0l3UkJFR29rQkNBREJIOGdBd1ZCb0x3REN5SUVLQUlBSVFNQ2Z3SkFJQUVFZnlBQUJIOGdBQVVnQmdzaEJTQUNCRUFDUUFKQUlBTUVRQ0FESVFBZ0FpRUREQUVGSUFFc0FBQWlBRUYvU2dSQUlBVWdBRUgvQVhFMkFnQWdBRUVBUnd3SEN5QUJMQUFBSVFCQnJDTW9BZ0FvQWdCRkJFQWdCU0FBUWYrL0EzRTJBZ0JCQVF3SEN5QUFRZjhCY1VHK2Ztb2lBRUV5U3cwRklBRkJBV29oQVNBQVFRSjBRYVFlYWlnQ0FDRUFJQUpCZjJvaUF3MEJDd3dCQ3lBQkxBQUFJZ2RCL3dGeFFRTjJJZ2hCY0dvZ0NDQUFRUnAxYW5KQkIwc05Bd05BQWtBZ0EwRi9haUVESUFkQi93RnhRWUIvYWlBQVFRWjBjaUlBUVFCT0RRQWdBMFVOQWlBQlFRRnFJZ0VzQUFBaUIwSEFBWEZCZ0FGR0RRRU1CUXNMSUFSQkFEWUNBQ0FGSUFBMkFnQWdBaUFEYXd3RUN5QUVJQUEyQWdBTFFYNEZJQU1OQVVFQUN3d0JDeUFFUVFBMkFnQkJpTHdEUWRRQU5nSUFRWDhMSVFBZ0JpUUVJQUFMUUFBZ0FRUkFJQUJCQW5SQjhMc0RhaUFBSUFFUXhRTWlBRFlDQUFVZ0FFRUNkRUh3dXdOcUtBSUFJUUFMSUFCQkNHb2hBU0FBQkg4Z0FRVkJyT29BQ3d0ckFRSi9JQUJCeWdCcUlnSXNBQUFoQVNBQ0lBRkIvd0ZxSUFGeU9nQUFJQUFvQWdBaUFVRUljUVIvSUFBZ0FVRWdjallDQUVGL0JTQUFRUUEyQWdnZ0FFRUFOZ0lFSUFBZ0FDZ0NMQ0lCTmdJY0lBQWdBVFlDRkNBQUlBRWdBQ2dDTUdvMkFoQkJBQXNpQUF2dEFRRUVmd0pBQWtBZ0FrRVFhaUlFS0FJQUlnTU5BQ0FDRUl3Q0JFQkJBQ0VDQlNBRUtBSUFJUU1NQVFzTUFRc2dBeUFDUVJScUlnVW9BZ0FpQkdzZ0FVa0VRQ0FDSUFBZ0FTQUNLQUlrUVI5eFFjb0FhaEVCQUNFQ0RBRUxBa0FnQWl3QVMwRi9TZ1JBSUFFaEF3TkFJQU5GQkVCQkFDRUREQU1MSUFBZ0EwRi9haUlHYWl3QUFFRUtSd1JBSUFZaEF3d0JDd3NnQWlBQUlBTWdBaWdDSkVFZmNVSEtBR29SQVFBaUFpQURTUTBDSUFBZ0Eyb2hBQ0FCSUFOcklRRWdCU2dDQUNFRUJVRUFJUU1MQ3lBRUlBQWdBUkJUR2lBRklBVW9BZ0FnQVdvMkFnQWdBeUFCYWlFQ0N5QUNDNWtCQWdGL0FuNENRQUpBQWtBZ0FMMGlBMEkwaUNJRXAwSC9EM0VpQWdSQUlBSkIvdzlHQkVBTUJBVU1Bd3NBQ3lBQklBQkVBQUFBQUFBQUFBQmlCSDhnQUVRQUFBQUFBQUR3UTZJZ0FSQ09BaUVBSUFFb0FnQkJRR29GUVFBTElnSTJBZ0FNQWdBTEFBQUxJQUVnQktkQi93OXhRWUo0YWpZQ0FDQURRdi8vLy8vLy8vK0hnSCtEUW9DQWdJQ0FnSUR3UDRTL0lRQUxJQUFMU0FFQ2Z5QUFLQUlBTEFBQVFWQnFRUXBKQkVBRFFDQUNRUXBzUVZCcUlBQW9BZ0FpQVN3QUFHb2hBaUFBSUFGQkFXb2lBVFlDQUNBQkxBQUFRVkJxUVFwSkRRQUxDeUFDQzNRQkFuOGdBZ1IvQWtBZ0FDd0FBQ0lEQkVBZ0FDRUVJQU1oQUFOQUlBQkJHSFJCR0hVZ0FTd0FBQ0lEUmlBQ1FYOXFJZ0pCQUVjZ0EwRUFSM0Z4UlEwQ0lBRkJBV29oQVNBRVFRRnFJZ1FzQUFBaUFBMEFRUUFoQUFzRlFRQWhBQXNMSUFCQi93RnhJQUV0QUFCckJVRUFDeUlBQy9zQkFRTi9Ba0FnQVVIL0FYRWlBZ1JBSUFCQkEzRUVRQ0FCUWY4QmNTRURBMEFnQUN3QUFDSUVSU0FFSUFOQkdIUkJHSFZHY2cwRElBQkJBV29pQUVFRGNRMEFDd3NnQWtHQmdvUUliQ0VEQWtBZ0FDZ0NBQ0lDUVlDQmdvUjRjVUdBZ1lLRWVITWdBa0gvL2Z0M2FuRkZCRUFEUUNBQ0lBTnpJZ0pCZ0lHQ2hIaHhRWUNCZ29SNGN5QUNRZi85KzNkcWNRMENJQUJCQkdvaUFDZ0NBQ0lDUVlDQmdvUjRjVUdBZ1lLRWVITWdBa0gvL2Z0M2FuRkZEUUFMQ3dzZ0FVSC9BWEVoQWdOQUlBQkJBV29oQVNBQUxBQUFJZ05GSUFNZ0FrRVlkRUVZZFVaeVJRUkFJQUVoQUF3QkN3c0ZJQUFnQUJCdWFpRUFDd3NnQUFzTkFDQUFRYXdqS0FJQUVNY0RDNlFEQVFaL0lBRkJBWFJCZjJvaEF5QUJRWDlxSVFRQ1FDQUFRWUN3ZldwQmdLNEJTU0FBUVlDa2YycEJ3UEFCU1NBQVFZQjBha0dBRkVrZ0FCRElBMFZ5Y25KRkJFQWdBVUVBUnlJQ0lBQkI0RjVxUVM1SmNRUkFJQUJCeFNGS0JFQUNRQUpBQWtBZ0FFSEhJV3NPQndBQkFRRUJBUUFCQ3d3QkN3d0VDd3NnQUVIZ09Hb2hBQXdDQ3lBQVFZQ21mMnBCSmtrZ0FrRUJjM0VFUUNBQVFhQkhhaUVBREFJRlFRQWhBZ3NDUUFKQUEwQWdBQ0FDUVFKMFFkd3FhaThCQUdzaUJTQUVJQUpCQW5SQjNpcHFMQUFBSWdZaUIzRnJJQUpCQW5SQjN5cHFMUUFBU1EwQklBSkJBV29pQWtFOVJ3MEFDd3dCQ3lBR1FRRkdCRUFnQVNBQWFpQUZRUUZ4YXlFQUJTQURJQWRzSUFCcUlRQUxEQUlMQWtCQkFTQUJheUlFUVFGMFFmUW1haTRCQUNJQ0JFQkJBQ0VEQTBBZ0FrSC8vd054SUFCSEJFQWdBMEVCYWlJRFFRSjBRZlFtYWlBRVFRRjBhaTRCQUNJQ1JRMEREQUVMQ3lBRFFRSjBRZlFtYWlBQlFRRjBhaThCQUNFQURBTUxDeUFBUVZocUlBRkIwQUJzYWlFQ0lBQkIyUGQ3YWlBQlFTaHNha0VvU1FSL0lBSUZJQUFMRHdzTElBQUxPd0VCZnlNRUlRRWpCRUVRYWlRRUlBRWdBRFlDQUVFOElBRVFKeUlBUVlCZ1N3UkFRWWk4QTBFQUlBQnJOZ0lBUVg4aEFBc2dBU1FFSUFBTHl3d0JCbjhDUUNBQUlBRnFJUVVDUUNBQUtBSUVJZ05CQVhGRkJFQWdBQ2dDQUNFQ0lBTkJBM0ZGQkVBUEN5QUNJQUZxSVFGQjFMY0RLQUlBSUFBZ0Ftc2lBRVlFUUNBRlFRUnFJZ0lvQWdBaUEwRURjVUVEUncwQ1FjaTNBeUFCTmdJQUlBSWdBMEYrY1RZQ0FDQUFJQUZCQVhJMkFnUWdCU0FCTmdJQUR3c2dBa0VEZGlFRUlBSkJnQUpKQkVBZ0FDZ0NEQ0lDSUFBb0FnZ2lBMFlFUUVIQXR3TkJ3TGNES0FJQVFRRWdCSFJCZjNOeE5nSUFCU0FESUFJMkFnd2dBaUFETmdJSUN3d0NDeUFBS0FJWUlRY0NRQ0FBS0FJTUlnSWdBRVlFUUNBQVFSQnFJZ05CQkdvaUJDZ0NBQ0lDQkVBZ0JDRURCU0FES0FJQUlnSkZCRUJCQUNFQ0RBTUxDd05BSUFKQkZHb2lCQ2dDQUNJR0JFQWdCaUVDSUFRaEF3d0JDeUFDUVJCcUlnUW9BZ0FpQmdSQUlBWWhBaUFFSVFNTUFRc0xJQU5CQURZQ0FBVWdBQ2dDQ0NJRElBSTJBZ3dnQWlBRE5nSUlDd3NnQndSQUlBQW9BaHdpQTBFQ2RFSHd1UU5xSWdRb0FnQWdBRVlFUUNBRUlBSTJBZ0FnQWtVRVFFSEV0d05CeExjREtBSUFRUUVnQTNSQmYzTnhOZ0lBREFRTEJTQUhRUkJxSUFjb0FoQWdBRWRCQW5ScUlBSTJBZ0FnQWtVTkF3c2dBaUFITmdJWUlBQkJFR29pQkNnQ0FDSURCRUFnQWlBRE5nSVFJQU1nQWpZQ0dBc2dCQ2dDQkNJREJFQWdBaUFETmdJVUlBTWdBallDR0FzTEN3c2dCVUVFYWlJREtBSUFJZ0pCQW5FRVFDQURJQUpCZm5FMkFnQWdBQ0FCUVFGeU5nSUVJQUFnQVdvZ0FUWUNBQ0FCSVFJRlFkaTNBeWdDQUNBRlJnUkFRY3kzQTBITXR3TW9BZ0FnQVdvaUFUWUNBRUhZdHdNZ0FEWUNBQ0FBSUFGQkFYSTJBZ1FnQUVIVXR3TW9BZ0JIQkVBUEMwSFV0d05CQURZQ0FFSEl0d05CQURZQ0FBOExRZFMzQXlnQ0FDQUZSZ1JBUWNpM0EwSEl0d01vQWdBZ0FXb2lBVFlDQUVIVXR3TWdBRFlDQUNBQUlBRkJBWEkyQWdRZ0FDQUJhaUFCTmdJQUR3c2dBa0Y0Y1NBQmFpRUdJQUpCQTNZaEF3SkFJQUpCZ0FKSkJFQWdCU2dDRENJQklBVW9BZ2dpQWtZRVFFSEF0d05Cd0xjREtBSUFRUUVnQTNSQmYzTnhOZ0lBQlNBQ0lBRTJBZ3dnQVNBQ05nSUlDd1VnQlNnQ0dDRUhBa0FnQlNnQ0RDSUJJQVZHQkVBZ0JVRVFhaUlDUVFScUlnTW9BZ0FpQVFSQUlBTWhBZ1VnQWlnQ0FDSUJSUVJBUVFBaEFRd0RDd3NEUUNBQlFSUnFJZ01vQWdBaUJBUkFJQVFoQVNBRElRSU1BUXNnQVVFUWFpSURLQUlBSWdRRVFDQUVJUUVnQXlFQ0RBRUxDeUFDUVFBMkFnQUZJQVVvQWdnaUFpQUJOZ0lNSUFFZ0FqWUNDQXNMSUFjRVFDQUZLQUljSWdKQkFuUkI4TGtEYWlJREtBSUFJQVZHQkVBZ0F5QUJOZ0lBSUFGRkJFQkJ4TGNEUWNTM0F5Z0NBRUVCSUFKMFFYOXpjVFlDQUF3RUN3VWdCMEVRYWlBSEtBSVFJQVZIUVFKMGFpQUJOZ0lBSUFGRkRRTUxJQUVnQnpZQ0dDQUZRUkJxSWdNb0FnQWlBZ1JBSUFFZ0FqWUNFQ0FDSUFFMkFoZ0xJQU1vQWdRaUFnUkFJQUVnQWpZQ0ZDQUNJQUUyQWhnTEN3c0xJQUFnQmtFQmNqWUNCQ0FBSUFacUlBWTJBZ0FnQUVIVXR3TW9BZ0JHQkVCQnlMY0RJQVkyQWdBUEJTQUdJUUlMQ3lBQ1FRTjJJUU1nQWtHQUFra0VRQ0FEUVFOMFFlaTNBMm9oQVVIQXR3TW9BZ0FpQWtFQklBTjBJZ054Qkg4Z0FVRUlhaUlES0FJQUJVSEF0d01nQWlBRGNqWUNBQ0FCUVFocUlRTWdBUXNoQWlBRElBQTJBZ0FnQWlBQU5nSU1JQUFnQWpZQ0NDQUFJQUUyQWd3UEN5QUNRUWgySWdFRWZ5QUNRZi8vL3dkTEJIOUJId1VnQWtFT0lBRWdBVUdBL2o5cVFSQjJRUWh4SWdGMElnTkJnT0FmYWtFUWRrRUVjU0lFSUFGeUlBTWdCSFFpQVVHQWdBOXFRUkIyUVFKeElnTnlheUFCSUFOMFFROTJhaUlCUVFkcWRrRUJjU0FCUVFGMGNnc0ZRUUFMSWdOQkFuUkI4TGtEYWlFQklBQWdBellDSENBQVFRQTJBaFFnQUVFQU5nSVFRY1MzQXlnQ0FDSUVRUUVnQTNRaUJuRkZCRUJCeExjRElBUWdCbkkyQWdBZ0FTQUFOZ0lBREFFTElBRW9BZ0FoQVVFWklBTkJBWFpySVFRZ0FpQURRUjlHQkg5QkFBVWdCQXQwSVFNQ1FBTkFJQUVvQWdSQmVIRWdBa1lOQVNBRFFRRjBJUVFnQVVFUWFpQURRUjkyUVFKMGFpSURLQUlBSWdZRVFDQUVJUU1nQmlFQkRBRUxDeUFESUFBMkFnQU1BUXNnQVVFSWFpSUNLQUlBSWdNZ0FEWUNEQ0FDSUFBMkFnQWdBQ0FETmdJSUlBQWdBVFlDRENBQVFRQTJBaGdQQ3lBQUlBRTJBaGdnQUNBQU5nSU1JQUFnQURZQ0NBc0VBRUVBQzFvQkFYOGpCQ0VDSXdSQmdCQnFKQVFnQVNBQ1FZQVFFR2thSUFCQkJHb2lBeUFCRUQ4MkFnQWdBRUVCT2dBU0lBQkJBRFlDRENBQVFRQTZBQkFnQUVFWWFpQUJRWUFRRUc4YUlBTW9BZ0JCQUVjaEFDQUNKQVFnQUF1SEFRRUNmeU1FSVFJakJFR0FFR29rQkNBQVFaakFBR29pQTBFQU5nSUFJQUVnQWtHQUVCQnBHaUFCRUVBaUJFVUVRRUdJdkFNb0FnQkJBa1lFUUNBRFFRRTJBZ0FMQ3lBQVFRQTZBQklnQUVFQU5nSU1JQUJCQURvQUVDQUVRUUJISWdORkJFQWdBaVFFSUFNUEN5QUFJQVEyQWdRZ0FFRVlhaUFCUVlBUUVHOGFJQUlrQkNBREM0c0JBUUYvSXdRaEF5TUVRUkJxSkFRZ0F5QUNFTlVCSUFFZ0FDZ0NBR29pQUVFTGFpSUJMQUFBUVFCSUJFQWdBQ2dDQUVFQU5nSUFJQUJCQURZQ0JBVWdBRUVBTmdJQUlBRkJBRG9BQUF0QkFDUUZRUllnQUVFQUVBMGpCU0VCUVFBa0JTQUJRUUZ4QkVCQkFCQVlJZ0FRV2dVZ0FDQURLUUlBTndJQUlBQWdBeWdDQ0RZQ0NDQURKQVFMQzJBQkEzOGdBU0FBS0FJQWFpSUJMQUFMSWdKQkFFZ2hBeUFCS0FJRUlRQWdBa0gvQVhFaEFpQURCSDhnQUFVZ0FpSUFDMEVDZEVFRWFoQnNJZ0lnQURZQ0FDQUJLQUlBSVFRZ0FrRUVhaUFEQkg4Z0JBVWdBUXNnQUJDSkFob2dBZ3NrQVFGL0lBRWdBQ2dDQUdvaUF5QUNLQUlBTmdJQUlBTkJCR29nQWtFRWFoQ2xBeG9MVGdBZ0FTQUFLQUlBYWlFQlFSQVFYeUlBSUFFb0FnQTJBZ0JCQUNRRlFSVWdBRUVFYWlBQlFRUnFFQTBqQlNFQlFRQWtCU0FCUVFGeEJFQVFGeUVCSUFBUVVpQUJFQjRGSUFBUEMwRUFDemdCQVg4Z0FFVUVRQThMSUFBc0FCdEJBRWdFUUNBQUtBSVFFRklMSUFCQkJHb2lBU3dBQzBFQVNBUkFJQUVvQWdBUVVnc2dBQkJTQ3lnQkFYOGdBa1VFUUNBQUR3c2dBQ0FCSUFKQmYyb2lBeERHQVJvZ0FDQURha0VBT2dBQUlBQUxEUUFnQUVFSGNVRUNhaEVGQUF2MkF3RUhmeU1FSVFZakJFR1F3QUZxSkFRZ0FrRUFFSzhCSVFjZ0JrR0lnQUZxSWdoQkFEWUNBQ0FBUVFBMkFoQWdBQ0FHUVlqQUFHb2lCVUdBRUJEYUFVVUVRQ0FHSkFSQkFBOExJQVpCQkdvaENpQUdRUWhxSVFzZ0FRUkFBMEFDZnlBRkVNOEJJZ0VvQWdCQkwwWUVRQ0FCUVFBMkFnQUxBa0FDUUNBRFJRMEFJQVVvQWdCQkwwY05BQ0FJS0FJQVJRUkFJQUlnQ0VHQUVCRDNBUXNnQlNBSUlBUVFwUUVFUUVFQklRRkJHd3dEQ3d3QkN5QUZRUUFRcndFaUNTZ0NBRUVxUmdSL0lBa29BZ1JCTDBZRWZ5QUdRUzQyQWdBZ0NrRXZOZ0lBSUFzZ0IwR0FFQkJ2R2lBR0JTQUhDd1VnQndzaEFTQUpJQUVnQkJDbEFRUkFRUUVoQVVFYkRBSUxDeUFBSUFWQmdCQVEyZ0VOQVVFQUlRRkJHd3NoQUFzRkEwQUNmeUFGRU04QktBSUFRUzlHQkVBZ0JVR0lIVUdBRUJCNEdnc0NRQUpBSUFORkRRQWdCU2dDQUVFdlJ3MEFJQWdvQWdCRkJFQWdBaUFJUVlBUUVQY0JDeUFGSUFnZ0JCQ2xBUVJBUVFFaEFVRWJEQU1MREFFTElBVkJBQkN2QVNJSktBSUFRU3BHQkg4Z0NTZ0NCRUV2UmdSL0lBWkJMallDQUNBS1FTODJBZ0FnQ3lBSFFZQVFFRzhhSUFZRklBY0xCU0FIQ3lFQklBa2dBU0FFRUtVQkJFQkJBU0VCUVJzTUFnc0xJQUFnQlVHQUVCRGFBUTBCUVFBaEFVRWJDeUVBQ3dzZ0FFRWJSZ1JBSUFZa0JDQUJEd3RCQUFzNEFRSi9JQUJCRUdvaUFpZ0NBQ0lCSUFBb0FnUlBCRUJCQUE4TElBSWdBVUVCYWlBQUtBSUFJQUZCQW5ScUlnQVFXV28yQWdBZ0FBdU1Cd0VHZnlBQVFRUnFJZ1ZCQVJEa0FTQUFRYWlXQVdvaUJrRUFRWUFDRUZRYUlBQkIwTVlEYWlJRFFRQTJBZ0FnQUVHSXZnSnFRUUEyQWdBZ0FFR1F2Z0pxUVFBMkFnQWdBRUdNdmdKcVFRQTJBZ0FnQUVFVWFpSUNRZ0EzQWdBZ0FrSUFOd0lJSUFKQ0FEY0NFQ0FDUWdBM0FoZ2dBa0lBTndJZ0lBSkNBRGNDS0VFQUpBVkJKQ0FBUWRETUEyb2lCeEFNSXdVaEJFRUFKQVVDUUNBRVFRRnhCRUFRRnlFQkJVRUFKQVZCRVNBQVFZak5BMnBCQVJBTkl3VWhCRUVBSkFVZ0JFRUJjUVJBRUJjaEFTQUhFTElDREFJTElBQkJtTTBEYWlJQ1FnQTNBZ0FnQWtJQU53SUlJQUpDQURjQ0VDQUNRZ0EzQWhnZ0FrSUFOd0lnSUFKQ0FEY0NLQ0FBSUFFMkFnQWdBRUdvbUFGcVFRQTZBQUFnQUVHNG1BRnFRUUE2QUFBZ0FFRzVtQUZxUVFBNkFBQWdBRUc2bUFGcVFRQTZBQUFnQUVITXpRTnFRUUEyQWdBZ0FFSFF6UU5xUVFBMkFnQWdBRUVBTmdJNElBQkJBRFlDQ0NBQVFRQTJBZ1FnQUVIQW1BRnFRZ0EzQXdBZ0FFSEVBR3BCQUVIa2xRRVFWQm9nQUVGL05nSndJQUJCd0s0Q2FrRUFOZ0lBSUFCQnhLNENha0VBTmdJQUlBQkJ1SzRDYWtFQU5nSUFJQUJCdks0Q2FrRUJOZ0lBSUFCQnlLNENha0VBUWZBQ0VGUWFJQUJCaEs4QmFrRUFRYlQvQUJCVUdpQUFRY3pNQTJwQkFEb0FBQ0FBUWJUSkEycEJBRUdVQXhCVUdpQUFRYkRKQTJwQkFqWUNBQ0FBUWNqTUEycEJBRFlDQUNBQVFRQVFnd0VnQUVIVXJnRnFJZ0ZDQURjQ0FDQUJRZ0EzQWdnZ0FVSUFOd0lRSUFCQjBLNEJha0dBNmdBMkFnQWdBRUdBcndGcVFZSEFBRFlDQUNBQVFmeXVBV3BCZ0FFMkFnQWdBRUg0cmdGcVFZQUJOZ0lBSUFCQjlLNEJha0VBTmdJQUlBQkJ6SzRCYWtFQU5nSUFJQUJCN0s0QmFrRUFOZ0lBSUFCQjhLNEJha0VBTmdJQUlBQkJBRFlDYUVFQUlRRURRQ0FBUWNxZ0FXb2dBVUVCZEdvZ0FVRUlkRUgvL3dOeElnSTdBUUFnQUVIS21BRnFJQUZCQVhScUlBSTdBUUFnQUVIS25BRnFJQUZCQVhScUlBRTdBUUFnQUVIS3BBRnFJQUZCQVhScVFRQWdBV3RCQ0hRN0FRQWdBVUVCYWlJQlFZQUNSdzBBQ3lBQVFjcW9BV3BCQUVHQUJoQlVHa0VBSUFCQnlxQUJhaUFBUWNxcUFXb1Fud0VQQ3dzZ0F5Z0NBQVJBSUFOQkFEWUNBQ0FBUWZ6SEEyb29BZ0FRVWdzZ0JoRFlBU0FBS0FJMElnTUVRQ0FERUZJTElBQW9BaVFpQUFSQUlBQVFVZ3NnQWlnQ0FDSUFSUVJBSUFVUW1BRWdBUkFlQ3lBQUVGSWdCUkNZQVNBQkVCNExtdzBCRTM4akJDRUlJd1JCMEFOcUpBUWdBaXdBRVVVRVFDQUlKQVJCQVE4TElBRkJDR29pRUN3QUFFVUVRQ0FCS0FJQUlBQkI2QUJxSWdZb0FnQWlCRUZuYWtvRVFDQUVJQUJCQkdvaUJ5Z0NBQ0lGYXlJQ1FRQklCRUFnQ0NRRVFRQVBDeUFBUWZBQWFpSUtJQUJCK0FCcUlnc29BZ0FnQldzZ0NpZ0NBR28yQWdBZ0JVR0FnQUZLQkVBZ0FrRUFTZ1JBSUFBb0FoQWlCQ0FFSUFWcUlBSVFYUm9MSUFkQkFEWUNBQ0FHSUFJMkFnQUZJQVFoQWdzZ0FrR0FnQUpHQkVCQkFDRUNRWUNBQWlFRUJTQUFLQUlBSUFBb0FoQWdBbXBCZ0lBQ0lBSnJFRjRoQWlBR0tBSUFJZ1VnQW1vaEJDQUNRUUJLQkVBZ0JpQUVOZ0lBQlNBRklRUUxDeUFBUWV3QWFpSUdJQVJCWW1vaUJEWUNBQ0FMSUFjb0FnQWlCVFlDQUNBRlFYOXFJQW9vQWdBaUIyb2hCU0FIUVg5SEJFQWdCaUFFSUFWSUJIOGdCQVVnQlFzMkFnQUxJQUpCZjBZRVFDQUlKQVJCQUE4TEN3c2dDRUd3QTJvaEIwRUFJUUlEUUNBQkVGaEJESFloQkNBQlFRUVFWUUpBQWtBZ0JFSC9BWEZCRDBZRVFDQUJFRmhCREhaQi93RnhJUVVnQVVFRUVGVWdCUVJBSUFWQkFtb2hCQ0FISUFKcVFRQkJBRUYrSUFWcklnVWdBa0ZzYWlJR1N3Ui9JQVVGSUFZTGF4QlVHZ05BSUFSQmYyb2hCU0FFUVFGS0lBSkJBV29pQmtFVVNYRUVRQ0FGSVFRZ0JpRUNEQUVMQ3dWQkR5RUVEQUlMQlNBRVFmOEJjU0VFREFFTERBRUxJQWNnQW1vZ0JEb0FBQXNnQWtFQmFpSUNRUlJKRFFBTFFRQWdCeUFEUWJEM0FHb2lFVUVVRUdnZ0FFSG9BR29oQnlBQVFRUnFJUW9nQUVINEFHb2hEU0FBUWZBQWFpRUxJQUJCRUdvaERpQUFRZXdBYWlFUElBRkJER29oRWlBQlFRUnFJUXdnQTBHMCtBQnFJUk1nQ0VGL2FpRVVRUUFoQWdKQUFrQURRQUpBSUFKQnJnTklJUlVnQWtFQVNpRVdBa0FDUUFKQUEwQWdFQ3dBQUVVaEJDQVZSUTBHSUFRRVFDQUJLQUlBSUFjb0FnQWlCVUY3YWtvRVFDQUZJQW9vQWdBaUJtc2lCRUVBU0EwR0lBc2dEU2dDQUNBR2F5QUxLQUlBYWpZQ0FDQUdRWUNBQVVvRVFDQUVRUUJLQkVBZ0RpZ0NBQ0lGSUFVZ0Jtb2dCQkJkR2dzZ0NrRUFOZ0lBSUFjZ0JEWUNBQVVnQlNFRUN5QUVRWUNBQWtZRVFFRUFJUVJCZ0lBQ0lRVUZJQUFvQWdBZ0RpZ0NBQ0FFYWtHQWdBSWdCR3NRWGlFRUlBY29BZ0FpQmlBRWFpRUZJQVJCQUVvRVFDQUhJQVUyQWdBRklBWWhCUXNMSUE4Z0JVRmlhaUlGTmdJQUlBMGdDaWdDQUNJR05nSUFJQVpCZjJvZ0N5Z0NBQ0lKYWlFR0lBbEJmMGNFUUNBUElBVWdCa2dFZnlBRkJTQUdDellDQUFzZ0JFRi9SZzBHQ3dzZ0VpZ0NBQ0lFSUFFb0FnQWlCVUVCYW1vdEFBQkJDSFFnQkNBRmFpMEFBRUVRZEhJZ0JDQUZRUUpxYWkwQUFISkJDQ0FNS0FJQUlnbHJka0grL3dOeElnWWdBMEcwOXdCcUlCTW9BZ0FpQkVFQ2RHb29BZ0JKQkg4Z0FTQUpJQU5CdVBnQWFpQUdRUkFnQkd0MklnUnFMUUFBYWlJR1FRTjJJQVZxTmdJQUlBd2dCa0VIY1RZQ0FDQURRYmlBQVdvZ0JFRUJkR29GQTBBQ1FDQUVRUUZxSWdSQkQwOEVRRUVQSVFRTUFRc2dCaUFEUWJUM0FHb2dCRUVDZEdvb0FnQlBEUUVMQ3lBQklBUWdDV29pQ1VFRGRpQUZhallDQUNBTUlBbEJCM0UyQWdBZ0EwRzRrQUZxSUFZZ0F5QUVRUUowYWtHdzl3QnFLQUlBYTBFUUlBUnJkaUFEUWZUM0FHb2dCRUVDZEdvb0FnQnFJZ1FnRVNnQ0FFOEVmMEVBQlNBRUMwRUJkR29MSWdRdUFRQWlCRUgvL3dOeFFSQklEUUVnQkVILy93TnhRUkpPRFFNZ0FSQllJUVVnQkVFUVJnUi9JQUZCQXhCVklBVkJEWFpCQTJvRklBRkJCeEJWSUFWQkNYWkJDMm9MSVFVZ0ZrVU5BQXdDQ3dBTElBZ2dBbW9nQkRvQUFDQUNRUUZxSVFJTUF3c2dGQ0FDYWl3QUFDRUpJQUloQkFOQUlBVkJmMm9oQmlBSUlBUnFJQWs2QUFBZ0JFRUJhaUVDSUFSQnJRTklJQVZCQVVweFJRMERJQVloQlNBQ0lRUU1BQXNBQ3lBQkVGZ2hCU0FFUVJKR0JIOGdBVUVERUZVZ0JVRU5ka0VEYWdVZ0FVRUhFRlVnQlVFSmRrRUxhZ3NoQkNBSUlBSnFRUUJCQUNBQ1FYOXFJQUpCclFOS0JIOGdBZ1ZCclFNTGF5SUZRWDRnQkdzZ0JFRi9jeUlHUVg1S0JIOGdCZ1ZCZmd0cklnWkxCSDhnQlFVZ0JndHJFRlFhSUFJaEJRTkFJQVJCZjJvaEJpQUZRUUZxSVFJZ0JVR3RBMGdnQkVFQlNuRkZEUUlnQmlFRUlBSWhCUXdBQ3dBTFFRQWhBQXNNQVFzZ0JBUkFJQUVvQWdBZ0J5Z0NBRW9FUUVFQUlRQU1BZ3NMUVFBZ0NDQURRYklDRUdoQkFDQUlRYklDYWlBRFFld2Rha0hBQUJCb1FRQWdDRUh5QW1vZ0EwSFlPMnBCRUJCb1FRQWdDRUdDQTJvZ0EwSEUyUUJxUVN3UWFFRUJJUUFMSUFna0JDQUFDK2NFQVFsL0lBSkJER29pQ1VFQU5nSUFJQUVzQUFoRkJFQWdBU2dDQUNBQVFlZ0FhaUlHS0FJQUlnUkJlV3BLQkVBZ0JDQUFRUVJxSWdjb0FnQWlCV3NpQTBFQVNBUkFRUUFQQ3lBQVFmQUFhaUlJSUFCQitBQnFJZ29vQWdBZ0JXc2dDQ2dDQUdvMkFnQWdCVUdBZ0FGS0JFQWdBMEVBU2dSQUlBQW9BaEFpQkNBRUlBVnFJQU1RWFJvTElBZEJBRFlDQUNBR0lBTTJBZ0FGSUFRaEF3c2dBMEdBZ0FKR0JFQkJBQ0VEUVlDQUFpRUVCU0FBS0FJQUlBQW9BaEFnQTJwQmdJQUNJQU5yRUY0aEF5QUdLQUlBSWdVZ0Eyb2hCQ0FEUVFCS0JFQWdCaUFFTmdJQUJTQUZJUVFMQ3lBQVFld0FhaUlHSUFSQlltb2lCRFlDQUNBS0lBY29BZ0FpQlRZQ0FDQUZRWDlxSUFnb0FnQWlCMm9oQlNBSFFYOUhCRUFnQmlBRUlBVklCSDhnQkFVZ0JRczJBZ0FMSUFOQmYwWUVRRUVBRHdzTEN5QUJRUUFnQVVFRWFpSUhLQUlBYTBFSGNSQlZJQUVRV0NFR0lBRkJDQkJWSUFaQkMzWkJBM0VpQ0VFRFJnUkFRUUFQQ3lBSklBaEJBMm8yQWdBZ0FpQUdRUWgySWdwQkIzRkJBV28yQWdRZ0FSQllJUXNnQVVFSUVGVkJBQ0VFUVFBaEF3TkFJQUVRV0VFSWRpQUVRUU4wZENBRGFpRURJQUVnQnlnQ0FFRUlhaUlGUVFOMklBRW9BZ0JxSWdrMkFnQWdCeUFGUVFkeE5nSUFJQVJCQVdvaEJTQUVJQWhIQkVBZ0JTRUVEQUVMQ3lBQ0lBTTJBZ0FnQ2tIYUFITWdDMEVJZG5NZ0EzTWdBMEVJZG5NZ0EwRVFkbk5CL3dGeEJFQkJBQThMSUFJZ0NUWUNDQ0FBUWV3QWFpSUJLQUlBSVFBZ0FTQUFJQWxCZjJvZ0Eyb2lBVWdFZnlBQUJTQUJDellDQUNBQ0lBWkJEblpCQVhFNkFCQWdBaUFHUVE5MlFRRnhPZ0FSUVFFTHNCQUJISDhDUUNNRUlRSWpCRUVnYWlRRUlBSkJHR29oRmlBQ1FSQnFJUmNnQWtFSWFpRVlJQUloRVNBQVFlUUFhaUlaS0FJQUlRRWdBRUhRelFOcUlSTWdBRUhnQUdvaUZDZ0NBQ0VEQWtBZ0FFR3N6UU5xSWhJb0FnQWlEd1JBSUFCQnFNMERhaUVNSUFCQnpNMERhaUViSUFCQjBNd0RhaUVOSUFCQnBKWUJhaUVWSUFCQm1NMERhaUVhSUFCQnVwZ0JhaUVjSUFCQndKZ0JhaUVPSUFNZ0FXc2dFeWdDQUNJRWNTRUZRUUFoQWdOQUFrQUNRQ0FNS0FJQUlBSkJBblJxS0FJQUlnY0VRQ0FIUVF4cUlnc3NBQUFFUUNBTFFRQTZBQUFNQWdzZ0J5Z0NCQ0VJSUFRZ0J5Z0NBQ0lMSUFGcmNTQUZTUVJBSUFzZ0FVY0VRQ0FBSUFFZ0N4Q3pBU0FMSVFFZ0ZDZ0NBQ0FMYXlBVEtBSUFJZ1J4SVFVTElBZ2dCVXNOQXlBRUlBZ2dDMnB4SWc5QmYyb2dDMGtFUUNBTlFRQWdGU2dDQUNBTGFpQWJLQUlBSUF0cklnRVF0Z0VnRFNBQklCVW9BZ0FnRHhDMkFRVWdEVUVBSUJVb0FnQWdDMm9nQ0JDMkFRc2dHaWdDQUNBSEtBSVFRUUowYWlnQ0FDSUpRU3hxSVFVZ0NVRXdhaUlJS0FJQUlnRkJ3QUJMQkg4Z0IwRXNhaUVHSUFkQk5Hb2lDaWdDQUNFRUlBZEJNR29pQXlBQk5nSUFJQVFnQVVrRVFDQUhLQUk0SWhCQkFFY2dBU0FRUzNFRVFDQVJJQkEyQWdCQnJQVUNRZGdiSUJFUVlFR3M5UUlRVmlBS0tBSUFJUVFnQXlnQ0FDRUJDeUFHS0FJQUlBRWdCRUVnYWlBRVFRSjJhaUlFU3dSL0lBRUZJQVFpQVFzUVZ5SUVSUVJBUWF6MUFoQldDeUFHSUFRMkFnQWdDaUFCTmdJQUN5QUdLQUlBUVVCcklBVW9BZ0JCUUdzZ0NDZ0NBRUZBYWhCVEdpQURCU0FIUVRCcUN5RUVJQWRCRkdvaEFRSkFBa0FnQkNnQ0FFVU5BQ0FISUE0cEF3Q25JZ00yQW1RZ0IwRXNhaUlHS0FJQVFTUnFJZ29nQXpvQUFDQUtJQU5CQ0hZNkFBRWdDaUFEUVJCMk9nQUNJQW9nQTBFWWRqb0FBeUFHS0FJQVFTaHFJZ01nRGlrREFFSWdpS2NpQmpvQUFDQURJQVpCQ0hZNkFBRWdBeUFHUVJCMk9nQUNJQU1nQmtFWWRqb0FBeUFOSUFFUXNRSWdCQ2dDQUNJQlFjQUFUUTBBSUFnb0FnQWdBVWtFUUNBSlFUUnFJZ1lvQWdBaEF5QUlJQUUyQWdBZ0F5QUJTUVJBSUFrb0FqZ2lDVUVBUnlBQklBbExjUVJBSUJnZ0NUWUNBRUdzOVFKQjJCc2dHQkJnUWF6MUFoQldJQVlvQWdBaEF5QUlLQUlBSVFFTElBVW9BZ0FnQVNBRFFTQnFJQU5CQW5acUlnTkxCSDhnQVFVZ0F5SUJDeEJYSWdORkJFQkJyUFVDRUZZTElBVWdBellDQUNBR0lBRTJBZ0FMQ3lBRktBSUFRVUJySUFjb0FpeEJRR3NnQkNnQ0FFRkFhaEJUR2d3QkN5QUZLQUlBSWdFRVFDQUJFRklnQlVFQU5nSUFDeUFJUVFBMkFnQWdDVUVBTmdJMEN5QUhLQUpvSVFRZ0J5Z0NiQ0VCSUF3b0FnQWlBeUFDUVFKMGFpZ0NBQ0lGQkVBZ0JTZ0NQQ0lEQkVBZ0F4QlNDeUFGS0FJc0lnTUVRQ0FERUZJTElBVW9BaFFpQXdSQUlBTVFVZ3NnQlJCU0lBd29BZ0FoQXdzZ0F5QUNRUUowYWtFQU5nSUFBa0FnQWtFQmFpSURJQklvQWdCSkJFQURRQ0FNS0FJQUlBTkJBblJxS0FJQUlnVkZEUUlnQlNnQ0FDQUxSdzBDSUFVb0FnUWdBVWNOQWlBRkxBQU1EUUlnRFVFQUlBUWdBUkMyQVNBYUtBSUFJQVVvQWhCQkFuUnFLQUlBSWdsQkxHb2hCeUFKUVRCcUlnZ29BZ0FpQWtIQUFFc0VmeUFGUVN4cUlRWWdCVUUwYWlJS0tBSUFJUUVnQlVFd2FpSUVJQUkyQWdBZ0FTQUNTUVJBSUFVb0FqZ2lFRUVBUnlBQ0lCQkxjUVJBSUJjZ0VEWUNBRUdzOVFKQjJCc2dGeEJnUWF6MUFoQldJQW9vQWdBaEFTQUVLQUlBSVFJTElBWW9BZ0FnQWlBQlFTQnFJQUZCQW5acUlnRkxCSDhnQWdVZ0FTSUNDeEJYSWdGRkJFQkJyUFVDRUZZTElBWWdBVFlDQUNBS0lBSTJBZ0FMSUFZb0FnQkJRR3NnQnlnQ0FFRkFheUFJS0FJQVFVQnFFRk1hSUFRRklBVkJNR29MSVFFZ0JVRVVhaUVDQWtBQ1FDQUJLQUlBUlEwQUlBVWdEaWtEQUtjaUJEWUNaQ0FGUVN4cUlnWW9BZ0JCSkdvaUNpQUVPZ0FBSUFvZ0JFRUlkam9BQVNBS0lBUkJFSFk2QUFJZ0NpQUVRUmgyT2dBRElBWW9BZ0JCS0dvaUJDQU9LUU1BUWlDSXB5SUdPZ0FBSUFRZ0JrRUlkam9BQVNBRUlBWkJFSFk2QUFJZ0JDQUdRUmgyT2dBRElBMGdBaEN4QWlBQktBSUFJZ0pCd0FCTkRRQUNRQ0FJS0FJQUlBSkpCRUFnQ1VFMGFpSUdLQUlBSVFRZ0NDQUNOZ0lBSUFRZ0FrOE5BU0FKS0FJNElnbEJBRWNnQWlBSlMzRUVRQ0FXSUFrMkFnQkJyUFVDUWRnYklCWVFZRUdzOVFJUVZpQUdLQUlBSVFRZ0NDZ0NBQ0VDQ3lBSEtBSUFJQUlnQkVFZ2FpQUVRUUoyYWlJRVN3Ui9JQUlGSUFRaUFnc1FWeUlFUlFSQVFhejFBaEJXQ3lBSElBUTJBZ0FnQmlBQ05nSUFDd3NnQnlnQ0FFRkFheUFGS0FJc1FVQnJJQUVvQWdCQlFHb1FVeG9NQVFzZ0J5Z0NBQ0lDQkVBZ0FoQlNJQWRCQURZQ0FBc2dDRUVBTmdJQUlBbEJBRFlDTkFzZ0JTZ0NhQ0VFSUFVb0Ftd2hBU0FNS0FJQUlnSWdBMEVDZEdvb0FnQWlCUVJBSUFVb0Fqd2lBZ1JBSUFJUVVnc2dCU2dDTENJQ0JFQWdBaEJTQ3lBRktBSVVJZ0lFUUNBQ0VGSUxJQVVRVWlBTUtBSUFJUUlMSUFJZ0EwRUNkR3BCQURZQ0FDQURRUUZxSWdVZ0VpZ0NBRWtFUUNBRElRSWdCU0VEREFFRklBTWhBZ3NMQ3dzZ0FDZ0NBQ0FFSUFFUVpTQWNRUUU2QUFBZ0RpQU9LUU1BSUFHdGZEY0RBQ0FVS0FJQUlnTWdEeUlCYXlBVEtBSUFJZ1J4SVFVZ0VpZ0NBQ0VQQ3dzTElBSkJBV29pQWlBUFNRMEJEQU1MQ3lBQ0lCSW9BZ0FpQUU4TkFpQU1LQUlBSVFRRFFDQUVJQUpCQW5ScUtBSUFJZ01FUUNBRFFReHFJZ01zQUFBRVFDQURRUUE2QUFBTEN5QUNRUUZxSWdJZ0FFa05BQXNNQWdzTElBQWdBU0FERUxNQklCa2dGQ2dDQURZQ0FDQVJKQVFQQ3lBWklBRTJBZ0FnRVNRRUM1b0NBUWQvSXdRaEFpTUVRUkJxSkFRZ0FFRUVhaUlFS0FJQUlnVkJBV29nQVFSL0lBRUZRYnkxQXdzaUJoQlphaUVCSUFRZ0FUWUNBQ0FCSUFCQkNHb2lCeWdDQUNJSVRRUkFJQUFvQWdBZ0JVRUNkR29nQmhCcUdpQUFRUlJxSWdBb0FnQkJBV29oQVNBQUlBRTJBZ0FnQWlRRUR3c2dBaUVESUFBb0Fnd2lBa0VBUnlBQklBSkxjUVIvSUFNZ0FqWUNBRUdzOVFKQjJCc2dBeEJnUWF6MUFoQldJQVFvQWdBaEFTQUhLQUlBQlNBSUN5RUNJQUFvQWdBZ0FTQUNRU0JxSUFKQkFuWnFJZ0pMQkg4Z0FRVWdBaUlCQzBFQ2RCQlhJZ0pGQkVCQnJQVUNFRllMSUFBZ0FqWUNBQ0FISUFFMkFnQWdBaUFGUVFKMGFpQUdFR29hSUFCQkZHb2lBQ2dDQUVFQmFpRUJJQUFnQVRZQ0FDQURKQVFMNUFzQkMzOGdBRUhvcmdGcVFRQTJBZ0FnQUVIOHJnRnFJZ0lvQWdCQkVHb2hBU0FDSUFFMkFnQWdBVUgvQVVzRVFDQUNRWkFCTmdJQUlBQkIrSzRCYWlJQklBRW9BZ0JCQVhZMkFnQUxJQUJCM0s0QmFpSUVLQUlBSVFvZ0FFRUVhaUlHRUZnaEJRSkFJQVFvQWdBaUFVSDVBRXNFZjBHQXdBSWdCVUh3L3dOeElnVkxCSDhnQmtFREVGVkJBeUVCUVFBRlFRTWhBUU5BSUFGQkFXb2hBU0FEUVFGcUlnSkJBblJCOUJScUtBSUFJQVZOQkVBZ0FpRUREQUVMQ3lBR0lBRVFWU0FEUVFKMFFmUVVhaWdDQUFzaEFpQUZJQUpyUVJBZ0FXdDJJQUZCQW5SQm5CVnFLQUlBYWdVZ0FVRS9UUVJBSUFWQmdBSkpCRUFnQmtFUUVGVU1Bd1ZCQUNFQkN3TkFJQUZCQVdvaEFrR0FnQUlnQVhZZ0JYRkZCRUFnQWlFQkRBRUxDeUFHSUFJUVZTQUJJUVVNQWd0QmdJQUNJQVZCOFA4RGNTSUZTd1IvSUFaQkFoQlZRUUloQVVFQUJVRUNJUUVEUUNBQlFRRnFJUUVnQTBFQmFpSUNRUUowUWRBVmFpZ0NBQ0FGVFFSQUlBSWhBd3dCQ3dzZ0JpQUJFRlVnQTBFQ2RFSFFGV29vQWdBTElRSWdCU0FDYTBFUUlBRnJkaUFCUVFKMFFmd1ZhaWdDQUdvTElRVUxJQVFnQkNnQ0FDQUZhaUlCSUFGQkJYWnJOZ0lBSUFZUVdDRUNJQUJCMUs0QmFpSUhLQUlBSWdGQi85RUFTd1IvUVlBZ0lBSkI4UDhEY1NJRVN3Ui9JQVpCQlJCVlFRVWhBVUVBQlVFRklRRkJBQ0VEQTBBZ0FVRUJhaUVCSUFOQkFXb2lBa0VDZEVHd0Ztb29BZ0FnQkUwRVFDQUNJUU1NQVFzTElBWWdBUkJWSUFOQkFuUkJzQlpxS0FJQUN5RUNJQVFnQW10QkVDQUJhM1loQWlBQlFRSjBRZEFXYWdVZ0FrSHcvd054SVFRZ0FVSC9EVXNFZnlBRVFZREFBQ0FFU3dSL0lBWkJCUkJWUVFVaEFVRUFCVUVGSVFGQkFDRURBMEFnQVVFQmFpRUJJQU5CQVdvaUFrRUNkRUdFRjJvb0FnQWdCRTBFUUNBQ0lRTU1BUXNMSUFZZ0FSQlZJQU5CQW5SQmhCZHFLQUlBQ3lJQ2EwRVFJQUZyZGlFQ0lBRkJBblJCcEJkcUJTQUVRWUNBQWlBRVN3Ui9JQVpCQkJCVlFRUWhBVUVBQlVFRUlRRkJBQ0VEQTBBZ0FVRUJhaUVCSUFOQkFXb2lBa0VDZEVIWUYyb29BZ0FnQkUwRVFDQUNJUU1NQVFzTElBWWdBUkJWSUFOQkFuUkIyQmRxS0FJQUN5SUNhMEVRSUFGcmRpRUNJQUZCQW5SQi9CZHFDd3NoQVNBSElBY29BZ0FnQVNnQ0FDQUNhaUlKYWlJQklBRkJDSFpyTmdJQUlBQkJ5cW9CYWlBQVFjcWdBV29nQ1VIL0FYRkJBWFJxSWdzdUFRQWlCRUgvL3dOeElnRkIvd0Z4YWlJRExBQUFJUUlnQXlBQ1FRRnFPZ0FBSUFSQkFXcEJFSFJCRUhVaUEwSC9BWEZGQkVBZ0FFSEtvQUZxSVFnZ0FFSEtxZ0ZxSVFjRFFFRUFJQWdnQnhDZkFTQUFRY3FxQVdvZ0N5NEJBQ0lFUWYvL0EzRWlBVUgvQVhGcUlnTXNBQUFoQWlBRElBSkJBV282QUFBZ0JFRUJha0VRZEVFUWRTSURRZjhCY1VVTkFBc0xJQUJCeXFBQmFpQUpRUUYwYWlBQVFjcWdBV29nQWtIL0FYRkJBWFJxSWdJdUFRQTdBUUFnQWlBQlFRRnFPd0VBSUFZUVdFRUlkaUFEUVlEK0EzRnlJZ1JCQVhZaENDQUdRUWNRVlNBQVFlQ3VBV29pQVNnQ0FDRUhBa0FDUUFKQUFrQUNRQ0FGRGdVQkFBSUNBQUlMREFNTElBZ2dBRUdBcndGcUtBSUFTdzBCSUFFZ0IwRUJhaUlCSUFGQkNIWnJOZ0lBREFJTEN5QUhCRUFnQVNBSFFYOXFOZ0lBQ3dzZ0NDQUFRWUN2QVdvaUF5Z0NBRWtFZjBFREJVRUVDeUFGYWlJQ1FRaHFJUUVnQkVHQ0JFOEVRQ0FDSVFFTElBTUNmd0pBSUFkQnNBRkxEUUFnQ2tIQUFFa2dBRUhRcmdGcUtBSUFRZi9UQUV0eERRQkJnY0FBREFFTFFZRCtBUXNpQWpZQ0FDQUFRZFFBYWlJREtBSUFJUUlnQXlBQ1FRRnFOZ0lBSUFCQnhBQnFJQUpCQW5ScUlBZzJBZ0FnQXlBREtBSUFRUU54TmdJQUlBQWdBVFlDV0NBQUlBZzJBbHdnQUVHd21BRnFJZ0lnQWlrREFDQUJyWDAzQXdBZ0FVVUVRQThMSUFCQnBKWUJhaUVFSUFCQjRBQnFJZ2NvQWdBaEF5QUFRZEROQTJvaUJTZ0NBQ0VDQTBBZ0JDZ0NBQ0lBSUFOcUlBQWdBeUFJYXlBQ2NXb3NBQUE2QUFBZ0J5QUhLQUlBUVFGcUlBVW9BZ0FpQW5FaUFEWUNBQ0FCUVg5cUlnRUVRQ0FBSVFNTUFRc0xDOFFGQVF4L0l3UWhDeU1FUVlBQ2FpUUVJQXNoQ2lBQVFjZ01haWdDQUNFR0lBQkIxQXhxSWd3b0FnQWlEU2dDQkNFT0FrQUNRQ0FCQkVBZ0NpRUJEQUVGSUFwQkJHb2hBU0FLSUEwMkFnQWdCaWdDREEwQklBWWhBd3NNQVFzZ0JpZ0NEQ0VHSUFJRVFDQUdJUU1nQWlFSUlBRWhCRUVJSVFrRklBRWhCeUFHSVFVTEEwQUNRQ0FKUVFoR0JFQWdDQ2dDQkNJQklBNUhCRUFnQVNFRElBUWhBUXdDQ3lBRVFRUnFJUUVnQkNBSU5nSUFJQU1vQWd3aUJVVU5BU0FCSVFjTElBVXVBUUJCQVVZRVFDQUZJUU1nQlVFRWFpRUlJQWNoQkVFSUlRa01BZ3NnQlNnQ0NDSUlMQUFBSUF3b0FnQXNBQUFpQVVZRVFDQUZJUU1nQnlFRVFRZ2hDUXdDQ3dOQUlBaEJDR29pQ0N3QUFDQUJSZ1JBSUFVaEF5QUhJUVJCQ0NFSkRBTUZEQUVMQUFzQUN3c2dBU0FLUmdSQUlBc2tCQ0FERHdzTElBNHNBQUFoQ1NBRExnRUFJZ1ZCQVVZRWZ5QURMQUFGQlNBQVFlQ1hBV29vQWdBZ0EwOEVRQ0FMSkFSQkFBOExJQU1vQWdnaUFpd0FBQ0FKUndSQUEwQWdBa0VJYWlJQ0xBQUFJQWxIRFFBTEN5QUNMUUFCSWdSQmYyb2lCMEVCZENJQ0lBTXZBUVFnQlVILy93TnhhMEVCSUFScmFpSUVTd1IvSUFKQmYyb2dCRUVEYkdvZ0JFRUJkRzRGSUFkQkJXd2dCRXNMSWdKQkFXcEIvd0Z4Q3lFQ0lBNUJBV29oQmlBQVFaQ1ZBV29oQ0NBQVFjU1dBV29oRENBQVFjQ1dBV29oQlNBQVFjaVdBV29oRFNBQ1FmOEJjVUVJZENBSlFmOEJjWEloQkFKQUEwQWdBVUY4YWlJQ0tBSUFJUWNDUUFKQUlBd29BZ0FpQUNBRktBSUFSZ1JBSUEwb0FnQWlBQVJBSUEwZ0FDZ0NBRFlDQUFVZ0NFRUFFS0FCSVFBTElBQU5BUVVnRENBQVFYQnFJZ0EyQWdBTUFRc01BUXNnQUNFQklBQkJBVHNCQUNBQUlBUTJBZ1FnQUNBR05nSUlJQUFnQXpZQ0RDQUhJQUEyQWdRTElBQkZCRUJCQUNFQURBSUxJQUlnQ2tjRVFDQUFJUU1nQWlFQkRBRUxDd3NnQ3lRRUlBQUwrZ0lCQW44Z0F5QUFRUWhxSWdVb0FnQkJtSUFCYWlBRUVHOGFJQVVvQWdCQm1JQUJhaUlBS0FJQUJFQWdBQkRQQVNnQ0FFRXZSd1JBSUFNZ0JCRElBUXNMSUFVb0FnQWlBRUdReXdOcUxBQUFCRUFnQXlBQlFlUzhBMm9RbXdFZ0JCQjRHaUFEUVFBZ0JCQzZBeUFESUFRUXlBRWdCU2dDQUNFQUN3SkFJQUJCcUlBQ2FoQlpJZ1lFUUNBQ0lBWWdBaEJaSWdGSkJIOGdCZ1VnQVF0QkFuUnFJUUlEUUFKQUFrQUNRQUpBQWtBZ0FpZ0NBQTR3QUFJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQkFnc01Bd3NNQVFzTUJBc2dBa0VFYWlFQ0RBRUxDeUFEUVFBMkFnQVBDd3NDUUFKQUlBQkJ5TXNFYWlnQ0FDSUJRZGdBUmlBQVFlQ0VBMm9vQWdCQkJFWnhCRUJCQUNFQkJTQUJRY1VBUmdSQVFRQWhBUXdDQlVFQUlRRUxDeUFGS0FJQVFlQ0VBMm9vQWdCQkFVWU5BQ0FESUFJZ0JCQjRHZ3dCQ3lBRElBSVFtd0VnQkJCNEdnc2dBeWdDQUJDVEFTRUFEd3Y0QVFFRGZ5TUVJUU1qQkVId0Ztb2tCQ0FEUVNScUlRUWdBeUFBS0FJQUlnVTJBZ0FDUUFKQUFrQUNRQ0FGUVFGckRnTUFBUUlEQ3lBRElBQW9BZ1EyQWdRTUFnc2dBeUFBS0FJRVFYOXpOZ0lFREFFTElBUWdBQ2dDQ0JDbUJDQUVJQU5CQkdvUXFRUUxJQUlFUUNBRElBSVF2d0lMSUFNb0FnQWlBa1VFUUNBREpBUkJBUThMSUFFb0FnQWlBRVVFUUNBREpBUkJBUThMSUFKQkFVWWdBRUVCUm5GRkJFQWdBa0VDUmlBQVFRSkdjVVVFUUNBQ1FRTkdJQUJCQTBaeFJRUkFJQU1rQkVFQUR3c2dBMEVFYWlBQlFRUnFRU0FRYTBVaEFDQURKQVFnQUE4TEN5QURLQUlFSUFFb0FnUkdJUUFnQXlRRUlBQUxjZ0VCZnlBQUtBSUFJZ05CQVVZRVFDQUFRUVJxSWdNZ0F5Z0NBRUgvL3dOeElBRWdBaERRQkVILy93TnhOZ0lBSUFBb0FnQWhBd3NnQTBFQ1JnUkFJQUJCQkdvaUF5QURLQUlBSUFFZ0FoQ1pBVFlDQUNBQUtBSUFJUU1MSUFOQkEwY0VRQThMSUFBb0FnZ2dBU0FDRUtzRUM3NEZBUUovSUFCQkNHb2lCQ2dDQUNJQ1JRUkFRUUJCekJZUVh5SUNJZ05yUVQ5eElBTnFJUU1nQWlBRE5nTHdBU0FDSUFOQmdBRnFOZ0wwQVNBQ0lBTkJvQUZxTmdMNEFTQUNJQU5CcUFGcU5nTDhBU0FDUVFBZ0FrR0lBbW9pQTJ0QlAzRWdBMm9pQXpZQytBTWdBaUFEUVlBQmFqWUMvQU1nQWlBRFFhQUJhallDZ0FRZ0FpQURRYWdCYWpZQ2hBUWdBa0VBSUFKQmtBUnFJZ05yUVQ5eElBTnFJZ00yQW9BR0lBSWdBMEdBQVdvMkFvUUdJQUlnQTBHZ0FXbzJBb2dHSUFJZ0EwR29BV28yQW93R0lBSkJpQWhxUVFBZ0FrR1lCbW9pQTJ0QlAzRWdBMm9pQXpZQ0FDQUNRWXdJYWlBRFFZQUJhallDQUNBQ1FaQUlhaUFEUWFBQmFqWUNBQ0FDUVpRSWFpQURRYWdCYWpZQ0FDQUNRWkFLYWtFQUlBSkJvQWhxSWdOclFUOXhJQU5xSWdNMkFnQWdBa0dVQ21vZ0EwR0FBV28yQWdBZ0FrR1lDbW9nQTBHZ0FXbzJBZ0FnQWtHY0Ntb2dBMEdvQVdvMkFnQWdBa0dZREdwQkFDQUNRYWdLYWlJRGEwRS9jU0FEYWlJRE5nSUFJQUpCbkF4cUlBTkJnQUZxTmdJQUlBSkJvQXhxSUFOQm9BRnFOZ0lBSUFKQnBBeHFJQU5CcUFGcU5nSUFJQUpCb0E1cVFRQWdBa0d3REdvaUEydEJQM0VnQTJvaUF6WUNBQ0FDUWFRT2FpQURRWUFCYWpZQ0FDQUNRYWdPYWlBRFFhQUJhallDQUNBQ1Fhd09haUFEUWFnQmFqWUNBQ0FDUWFnUWFrRUFJQUpCdUE1cUlnTnJRVDl4SUFOcUlnTTJBZ0FnQWtHc0VHb2dBMEdBQVdvMkFnQWdBa0d3RUdvZ0EwR2dBV28yQWdBZ0FrRzBFR29nQTBHb0FXbzJBZ0FnQWtHd0VtcEJBQ0FDUWNBUWFpSURhMEUvY1NBRGFpSUROZ0lBSUFKQnRCSnFJQU5CZ0FGcU5nSUFJQUpCdUJKcUlBTkJvQUZxTmdJQUlBSkJ2QkpxSUFOQnFBRnFOZ0lBSUFRZ0FqWUNBQXNnQUNBQk5nSUFBa0FDUUFKQUFrQWdBVUVCYXc0REFBRUNBd3NnQUVFQU5nSUVEd3NnQUVGL05nSUVEd3NnQWhDc0JBc0wvZ0lCQlg4akJDRUdJd1JCSUdva0JDQUdRUkJxSWdNZ0FDZ0NHQ0lFUVJoMk9nQUFJQU1nQkVFUWRqb0FBU0FESUFSQkNIWTZBQUlnQXlBRU9nQURJQU1nQUVFVWFpSUVLQUlBSWdWQkdIWTZBQVFnQXlBRlFSQjJPZ0FGSUFNZ0JVRUlkam9BQmlBRElBVTZBQWNnQmtFRWFpSUhRUWcyQWdBZ0JrRUlhaUlGUVlCL09nQUFJQUFnQlVFQklBSVFvd0VnQkNnQ0FFSDRBM0ZCd0FOSEJFQURRQ0FGUVFBNkFBQWdBQ0FGUVFFZ0FoQ2pBU0FFS0FJQVFmZ0RjVUhBQTBjTkFBc0xJQUFnQTBFSUlBSVFvd0VnQVNBQUtBSUFOZ0lBSUFFZ0FDZ0NCRFlDQkNBQklBQW9BZ2cyQWdnZ0FTQUFLQUlNTmdJTUlBRWdBQ2dDRURZQ0VDQUhRUVUyQWdBZ0IwRUVFRnNnQmtFRUVGc2dBRUVjYWtIQUFCQmJJQUJCRkJCYklBUkJDQkJiSUFOQkNCQmJJQUpGQkVBZ0JpUUVEd3NnQUVIY0FHb2lBRUlBTndJQUlBQkNBRGNDQ0NBQVFnQTNBaEFnQUVJQU53SVlJQUJDQURjQ0lDQUFRZ0EzQWlnZ0FFSUFOd0l3SUFCQ0FEY0NPQ0FHSkFRTGlBRUJBbjhnQVNnQ0FFVUVRQ0FBUVFCQmdRUVFWQm9QQ3lBQVFRRTZBSUFFSUFBZ0FTQUJFRmxCQVdvaUFVR0FBVWtFZnlBQkJVR0FBUXRCQW5RUVV4b2pCQ0VCSXdSQkVHb2tCRUVVSUFFUUpTRUNJQUVrQkNBQ1Fjc0FhaUVDUVFBaEFRTkFJQUFnQVdvaUF5QUNJQUZxSUFNdEFBQnpPZ0FBSUFGQkFXb2lBVUdBQkVjTkFBc0xEQUFnQUVFQVFZSUVFRlFhQzlFRkFnUi9BWDRDUUNBQVFlZ3hhaUlGTEFBQVJRUkFJQUJCc0RKcUlBQW9BZ0FpQXlBREtBSUFLQUlVUVFkeFFZWUJhaEVBQURjREFDQUFRYmd5YWtFQU9nQUFJQUFvQWdBaUF5QURLQUlBS0FJVVFRZHhRWVlCYWhFQUFDRUdJQUFvQWdBaUFpZ0NBQ2dDRUNFRVFRQWtCU0FFSUFJZ0FhY2dBVUlnaUtkQkFCQlFJd1VoQWtFQUpBVUNRQ0FDUVFGeFJRUkFJQUFvQWdBaEFrRUFKQVZCQmlBQ0VBVWhBaU1GSVFSQkFDUUZJQVJCQVhGRkJFQWdBZ1JBSUFBb0FnQWlBa0hNOHdCcUtBSUFRUU5HQkVCQkFDUUZRUVlnQWtHUXJnSnFRZGdNRUFZaEFpTUZJUVJCQUNRRklBUkJBWEVOQkNBQ1JRUkFJQUJCOERGcUlBQW9BZ0FpQWtHSXZBTnFLUU1BTndNQUlBSW9BZ0FvQWhRaEJFRUFKQVVnQkNBQ0VFNnRJd2V0UWlDR2hDRUJJd1VoQWtFQUpBVWdBa0VCY1EwRklBQkIrREZxSUFFM0F3QWdBRUdBTW1vZ0FDZ0NBRUhBN2dKcUtRTUFOd01BSUFWQkFUb0FBQ0FES0FJQUtBSVFJUUpCQUNRRklBSWdBeUFHcHlBR1FpQ0lwMEVBRUZBakJTRUNRUUFrQlNBQ1FRRnhSUTBIUVFBUUdCQmFDd3NMSUFNb0FnQW9BaEFoQWtFQUpBVWdBaUFESUFhbklBWkNJSWluUVFBUVVDTUZJUUpCQUNRRklBSkJBWEVFUUVFQUVCZ1FXZ1VQQ3dzTEN4QVhJUUlnQXlnQ0FDZ0NFQ0VGUVFBa0JTQUZJQU1nQnFjZ0JrSWdpS2RCQUJCUUl3VWhBMEVBSkFVZ0EwRUJjUVJBUVFBUUdCQmFCU0FDRUI0TEN3c2dBQ2dDQUNJRFFmdnVBbW9zQUFBRVFDQURRYXp6QUdvb0FnQWlBa0dveEFKcUxBQUFCRUFnQUVFWWFrRUFRUVVnQWtHb3dBSnFJQU5CZ2U4Q2FpQURRWkh2QW1vZ0EwSE03d0pxS0FJQUlBTkJxKzhDYWlBRFFhTHZBbW9RdVFFYUJROExDeUFBUVlneWFpSURRZ0EzQXdBZ0EwSUFOd01JSUFCQm1ESnFJZ01vQWdBaUFnUkFJQUlRVWlBRFFRQTJBZ0FMSUFCQm5ESnFRUUEyQWdBZ0FFR2dNbXBCQURZQ0FDQUFRYWd5YWtJQU53TUFJQUFRNGdFYUM1Y0dBUWQvSXdRaEJ5TUVRUkJxSkFRZ0FFRVVhaUlDSUFGQk9Hb2lBeWtDQURjQ0FDQUNJQU1wQWdnM0FnZ2dBaUFES1FJUU53SVFJQUlnQXlnQ0dEWUNHQ0FCUVJocUlRWUNRQUpBSUFGQkhHb2lCQ2dDQUNJQ1FZREFBRWtFUUNBQ0JFQU1BZ1ZCQUNFQ0N3VkJnTUFBSVFJTUFRc01BUXNnQUNnQ0VFR0FnQTlxSUFZb0FnQWdBaEJUR2dzZ0FTZ0NMQ0lEUVlEQUFDQUNheUlGU1FSL0lBTUZJQVVpQXdzRVFDQUFLQUlRUVlDQUQyb2dBbW9nQVNnQ0tDQURFRk1hQ3lBQVFZQ0FFRFlDTUNBQVFRQTJBalFnQVNnQ0VDSUNSUVJBSUFFb0FnQWhBZ3NnQUVFUWFpRURBa0FnQVNnQ0ZFRUFTZ1JBQTBBQ1FBSkFBa0FDUUNBQ0tBSUFRUlpyRGhNQUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQkFnc01CUXNNQVFzZ0FrRW9haUVDREFFTEN5QUFJQUlvQWd3UXRRUUxDeUFES0FJQUlnQkJvWUFQYWkwQUFFRUlkQ0FBUWFDQUQyb3RBQUJ5SUFCQm9vQVBhaTBBQUVFUWRFR0FnQXh4Y2lFRklBQkJuWUFQYWkwQUFFRUlkQ0FBUVp5QUQyb3RBQUJ5SUFCQm5vQVBhaTBBQUVFUWRFR0FnQXh4Y2lJQ0lBVnFRZi8vRDBzaUNBUkFRUUFoQWdzZ0FTQUFJQWdFZjBFQUJTQUZDMm8yQWxRZ0FTQUNOZ0pZSUFZb0FnQWlBZ1JBSUFJUVVpQUdRUUEyQWdBZ0F5Z0NBQ0VBQ3lBRVFRQTJBZ0FnQVVFZ2FpSUZRUUEyQWdBQ1FBSkFJQUJCc1lBUGFpMEFBRUVJZENBQVFiQ0FEMm90QUFCeUlBQkJzb0FQYWkwQUFFRVFkSElnQUVHemdBOXFMUUFBUVJoMGNpSUNRY0EvU1FSQUlBSUVRQ0FFSUFKQlFHc2lBallDQUNBQ0JFQWdBaUVBREFNRklBQWhBVUVBSVFKQkFDRUFDd1VnQnlRRUR3c0ZJQVJCZ01BQU5nSUFRWURBQUNFQURBRUxEQUVMSUFFb0FpUWlBVUVBUnlBQUlBRkxjUVIvSUFjZ0FUWUNBRUdzOVFKQjJCc2dCeEJnUWF6MUFoQldJQVFvQWdBaEFTQUdLQUlBSVFRZ0JTZ0NBQVVnQUNFQlFRQWhCRUVBQ3lFQ0lBUWdBU0FDUVNCcUlBSkJBblpxSWdKTEJIOGdBUVVnQWlJQkN4QlhJZ0pGQkVCQnJQVUNFRllMSUFZZ0FqWUNBQ0FGSUFFMkFnQWdBeWdDQUNFQkN5QUNJQUZCZ0lBUGFpQUFFRk1hSUFja0JBc1hBUUYvSUFBb0FoQWlBUVJBSUFFUVVnc2dBQkNZQVF0VEFRRi9Jd1FoQXlNRVFkQUFhaVFFSUFOQkFEWUNSQ0FEUVFrMkFrZ2dBeUFCTmdJQUlBTkJRR3RCQWpZQ0FDQURJQUkyQWdRZ0FFRUpOZ0lBSUFCQkJHb2lBQ0FBS0FJQVFRRnFOZ0lBSUFNa0JBdHdBUUYvSXdRaEFpTUVRZEFBYWlRRUlBQXNBQXRGQkVBZ0FrRUFOZ0pFSUFKQkN6WUNTQ0FDUVVCclFRRTJBZ0FnQWlBQk5nSUFDeUFBS0FJQVFRSkpCRUFnQUVFQ05nSUFDeUFBUVFScUlnQWdBQ2dDQUVFQmFqWUNBRUVFRUJRaUFFRUNOZ0lBSUFCQmdBaEJBQkFiQzJjQkEzOGdBQ2dDQ0NJQkJFQURRQ0FCS0FJUUlRSWdBU2dDQUNJREJFQWdBeEJTQ3lBQkVGSWdBZ1JBSUFJaEFRd0JDd3NMSUFBb0FoQWlBUVJBSUFFUVVnc2dBRUdZTW1vb0FnQWlBVVVFUUNBQVFSaHFFSTRCRHdzZ0FSQlNJQUJCR0dvUWpnRUxud0VBSUFCQnFNQUNhaEN2QWlBQVFRQkJ3TXNFRUZRYUlBQkJnSUNBRURZQ0RDQUFRYmlFQTJwQkFEWUNBQ0FBUWJ5RUEycEJBellDQUNBQVFiQ0VBMnBCQURZQ0FDQUFRWXlGQTJwQkFEWUNBQ0FBUVpUTEEycEJCRFlDQUNBQVFiaUpBMnBDLy8vLy8vZi8vLy8vQURjREFDQUFRY0NKQTJwQy8vLy8vL2YvLy8vL0FEY0RBQ0FBUWNDRUEycEJBallDQUNBQVFaQ0FBV3BCQVRZQ0FBdlpBd0VGZnlBQVFaQUJhaUlESWdGQkFEWUNDQ0FCUVFBMkFnQkJBQ1FGUVNFZ0FFR2NBV29pQkJBTUl3VWhBVUVBSkFVZ0FVRUJjUVJBRUJjaEFTQURFSTBCSUFFUUhndEJBQ1FGUVNFZ0FFR29BV29pQlJBTUl3VWhBVUVBSkFVZ0FVRUJjUVJBRUJjaEFBVkJBQ1FGUVFSQjBERVFCU0VDSXdVaEFVRUFKQVVDUUFKQUlBRkJBWEVOQUVFQUpBVkJHQ0FDRUF3akJTRUJRUUFrQlNBQlFRRnhCRUFRRnlFQUlBSVFVZ3dDQ3lBQVFVQnJJQUkyQWdCQkFDUUZRUVJCMERFUUJTRUNJd1VoQVVFQUpBVWdBVUVCY1EwQVFRQWtCVUVZSUFJUURDTUZJUUZCQUNRRklBRkJBWEVFUUJBWElRQWdBaEJTQlNBQUlBSTJBa1FnQUVFQU9nQUFJQUJCQURvQURDQUFRZ0EzQXlBZ0FFRUJPZ0FvSUFCQkFEb0FLU0FBUVFBNkFDb2dBRUVBT2dCUUlBQkJBRG9BVVNBQVFRQTZBRklnQUVFQU5nSXNJQUJCQURZQ01DQUFRUUEyQWhnZ0FFRUFOZ0kwSUFCQkFEb0F0QUVnQUVFQU9nQzFBU0FBUWVBQWFpSUJRZ0EzQXdBZ0FVSUFOd01JSUFGQ0FEY0RFQ0FCUWdBM0F4Z2dBRUYvTmdKSUlBQkJBRFlDT0NBQVFRQTJBandnQUVFQU5nSk1JQUJCZ0FGcUlnQkNBRGNEQUNBQVFnQTNBd2dQQ3d3QkN4QVhJUUFMSUFVUWpRRUxJQVFRalFFZ0F4Q05BU0FBRUI0TEtRRUJmeUFBS0FJVUlnRkJCVWtFUUVGL0R3dEJmeUFBS0FJQVFRUnFJQUZCZkdvUW1RRkJmM01MMWdnQ0JIOEJmaU1FSVFZakJFR0FFR29rQkNBQVFhakxCR29pQ1VFQU5nSUFBa0FDUUFKQUFrQUNRQUpBSUFCQnFNNEthaWdDQUE0REFBRUFBUXNNQVFzZ0FVVUVRQ0FBUWZTTENXb3NBQUJGRFFFTElBQkJwTXNFYWlBQk5nSUFJQUJCbUlBQmFpSUhRUUEyQWdBZ0FFR2tpd1JxSWdoQkFEWUNBQUpBSUFJRVFFRUFKQVZCRFNBR0lBSkIvZzhRQnhvakJTRUNRUUFrQlNBQ1FRRnhSUVJBUVFBa0JVRVJJQVlnQjBHQUVCQUhHaU1GSVFKQkFDUUZJQUpCQVhGRkJFQkJBQ1FGUVFZZ0IwR0FFQkFOSXdVaEFrRUFKQVVnQWtFQmNVVU5Bd3NMREFVTEN3SkFJQU1FUUVFQUpBVkJEU0FHSUFOQi9nOFFCeG9qQlNFQ1FRQWtCU0FDUVFGeFJRUkFRUUFrQlVFUklBWWdDRUdBRUJBSEdpTUZJUUpCQUNRRklBSkJBWEZGRFFJTERBVUxDeUFFQkVCQkFDUUZRUThnQnlBRVFZQVFFQWNhSXdVaEFrRUFKQVVnQWtFQmNRMEVRUUFrQlVFR0lBZEJnQkFRRFNNRklRSkJBQ1FGSUFKQkFYRU5CQXNnQlFSQVFRQWtCVUVRSUFnZ0JVR0FFQkFIR2lNRklRSkJBQ1FGSUFKQkFYRU5CQXRCQUNRRlFRVWdBRUhJeXdScUlBRkJBa1lFZjBISURBVkIwQXdMRUFZYUl3VWhBa0VBSkFVZ0FrRUJjUTBESUFCQnlZa0RhaUFCUVFKSE9nQUFJQVpCQURvQUFDQUFRYXpPQ21vaUFpZ0NBQ0VEUVFBa0JVRURJQUJCd013SmFpSUVJQUJCMk04RmFpSUJJQU1nQmhBSUdpTUZJUU5CQUNRRkFrQWdBMEVCY1VVRVFDQUFRZHpQQldvaEF5QUFRYVREQm1vaEJRTkFBa0FnQXlnQ0FFVU5BRUVBSkFWQkJpQUJFQVVoQnlNRklRaEJBQ1FGSUFoQkFYRU5BeUFIUlEwQUlBVW9BZ0JCQTBjTkFDQUNLQUlBSVFkQkFDUUZRUU1nQkNBQklBY2dCaEFJR2lNRklRZEJBQ1FGSUFkQkFYRU5BMEVBSkFWQkZTQUJFQXdqQlNFSFFRQWtCU0FIUVFGeFJRMEJEQU1MQ3lBQVFlQ0xDV29wQXdBaENrRUFKQVZCQVNBQklBcW5JQXBDSUlpblFRQVFVQ01GSVFCQkFDUUZJQUJCQVhGRkRRUUxDd3dEQ3lBQVFkalBCV29oQVNBQVFmV0xDV29zQUFBRVFDQUFRYVREQm1vb0FnQkJBa1lFUUNBQVFaRzRCMm9zQUFBRVFFRUFKQVZCQWlBQlFRQkJBRUhNQUJBSUlRSWpCU0VEUVFBa0JTQURRUUZ4RFFVZ0FrVUVRQ0FHSkFSQkR3OExJQUJCNElzSmFpa0RBQ0VLUVFBa0JVRUJJQUVnQ3FjZ0NrSWdpS2RCQUJCUUl3VWhBRUVBSkFVZ0FFRUJjUTBGSUFZa0JFRUFEd3NMQzBFQUpBVkJGU0FCRUF3akJTRUFRUUFrQlNBQVFRRnhEUUlNQVFBTEFBQUxJQWtvQWdBaEFDQUdKQVFnQUE4TFFkZ0tRWUFJRUJraEFDTUhJUUVnQVVIWUNoQkVSZ1JBSUFBUUZSb1FGaUFHSkFSQkN3OExJQUZCZ0FnUVJFY0VRQ0FBRUI0TElBQVFGU0VCQWtBZ0NTZ0NBQ0lBUlFSQUFrQUNRQUpBQWtBQ1FBSkFBa0FDUUFKQUlBRW9BZ0FPREFjSUFBRUlBZ01JQlFRSUJnZ0xRUkloQUF3SkMwRU1JUUFNQ0F0QkV5RUFEQWNMUVE4aEFBd0dDMEVRSVFBTUJRdEJDeUVBREFRTFFSZ2hBQXdEQzBFQUlRQU1BZ3RCRlNFQUN3c1FGaUFHSkFRZ0FBdGFBUUovSUFBb0FoUWlBaUFCVFFSQVFRQVBDeUFBS0FJQUlRTWdBU0VBQWtBQ1FBTkFJQU1nQUdvc0FBQkJmMHdFUUNBQVFRRnFJZ0FnQWtrRVFBd0NCVUVBSVFBTUF3c0FDd3NNQVF0QkFBOExRUUVnQVdzZ0FHb0xNUUVDZnlBQVFSaHFJZ0lvQWdBaUFTQUFLQUlVVHdSQVFRQVBDeUFDSUFGQkFXbzJBZ0FnQUNnQ0FDQUJhaXdBQUF1UUFnRUVmeUFBS0FJRUJFQVBDd05BSUFSQkFYWWlBVUdnaHVMdGZuTWhBaUFFUVFGeEJIOGdBZ1VnQVNJQ0MwRUJkaUlEUWFDRzR1MStjeUVCSUFKQkFYRUVmeUFCQlNBRElnRUxRUUYySWdOQm9JYmk3WDV6SVFJZ0FVRUJjUVIvSUFJRklBTWlBZ3RCQVhZaUEwR2dodUx0Zm5NaEFTQUNRUUZ4Qkg4Z0FRVWdBeUlCQzBFQmRpSURRYUNHNHUxK2N5RUNJQUZCQVhFRWZ5QUNCU0FESWdJTFFRRjJJZ05Cb0liaTdYNXpJUUVnQWtFQmNRUi9JQUVGSUFNaUFRdEJBWFlpQTBHZ2h1THRmbk1oQWlBQlFRRnhCSDhnQWdVZ0F5SUNDMEVCZGlJRFFhQ0c0dTErY3lFQklBQWdCRUVDZEdvZ0FrRUJjUVIvSUFFRklBTUxOZ0lBSUFSQkFXb2lCRUdBQWtjTkFBc0wzUU1CQlg5QkFDUUZRUjhnQUJBTUl3VWhBVUVBSkFVZ0FVRUJjUVJBRUJjaUFSQWVDMEVBSkFWQkh5QUFRYkFFYWlJQkVBd2pCU0VDUVFBa0JTQUNRUUZ4QkVBZ0FTRURCVUVBSkFWQkh5QUFRZUFJYWlJQkVBd2pCU0VDUVFBa0JTQUNRUUZ4QkVBZ0FTRURCVUVBSkFWQkh5QUFRWkFOYWlJQkVBd2pCU0VDUVFBa0JTQUNRUUZ4QkVBZ0FTRURCVUVBSkFWQkh5QUFRY1FSYWlJRUVBd2pCU0VCUVFBa0JRSkFJQUZCQVhFRVFCQVhJUUVGUVFBa0JVRWZJQUJCdkJacUlnRVFEQ01GSVFKQkFDUUZJQUpCQVhGRkJFQkJBQ1FGUVI4Z0FFRzBHMm9pQVJBTUl3VWhBa0VBSkFVZ0FrRUJjVVVFUUVFQUpBVkJIeUFBUWF3Z2FpSUJFQXdqQlNFQ1FRQWtCU0FDUVFGeFJRUkFRUUFrQlVFZ0lBQkJyQ1ZxRUF3akJTRUJRUUFrQlNBQlFRRnhCRUFRRnlFQkl3Y2hBaUFBUWF3Z2FoQmNJQUJCdEJ0cUVGd2dBRUc4Rm1vUVhDQUFRY1FSYWhCY0RBVUZJQUJCdENkcVFRQkJnQWdRVkJvZ0FFRUFRYXdsRUZRYUR3c0FDd3NMRUJjaEFpTUhJUVVEUUNBQlFZaDdhaUlCRUZ3Z0FTQUVSdzBBSUFJaEFRc0xDeUFBUVpBTmFoQmNJQUJCNEFocUVGd2dBRUd3QkdvUVhDQUFFRndnQVJBZUN3c0xFQmNoQVFOQUlBTkIwSHRxSWdNUVhDQURJQUJIRFFBTElBRVFIZ3ZmQ2dJRGZ3RitRUUFrQlVFRElBQkIyTThGYWlJQ1FRSVFCaUVESXdVaEJFRUFKQVVDUUNBRVFRRnhSUVJBSUFCQnJNNEthaUFETmdJQUlBTkJBVWdFUUNBQVFmV0xDV29zQUFBRVFDQUFRYVREQm1vb0FnQkJCVVlFUUNBQVFhVDlCMm9zQUFBRVFFRUFKQVZCQWlBQ1FRQkJBRUhNQUJBSUlRTWpCU0VFUVFBa0JTQUVRUUZ4RFFVZ0EwVUVRRUVQRHdzZ0FFSGdpd2xxS1FNQUlRVkJBQ1FGUVFFZ0FpQUZweUFGUWlDSXAwRUFFRkFqQlNFQ1FRQWtCU0FDUVFGeERRVkJBQ1FGUVFRZ0FDQUJFQVloQVNNRklRSkJBQ1FGSUFKQkFYRU5CU0FCRHdzTEN5QUFRWVNNQ1dvc0FBQUVRRUVNRHdzZ0FFR0ZqQWxxTEFBQUJIOUJHQVZCQ2dzUEN5QUFRYWpPQ21vb0FnQkZCRUFnQUVHUXVBZHFMQUFBQkVCQkFDUUZRUUVnQUVFQVFRQkJBRUVBUVFBUUNTRUNJd1VoQTBFQUpBVWdBMEVCY1EwRElBSUVRQ0FDRHd0QkFDUUZRUVFnQUNBQkVBWWhBU01GSVFKQkFDUUZJQUpCQVhFTkF5QUJEd3NMUVFBa0JVRVBJQUZCZ0FocUlnSWdBRUh3endWcVFZQUlFQWNhSXdVaEEwRUFKQVVnQTBFQmNVVUVRRUVBSkFWQkRpQUNJQUZCZ0FnUUJ4b2pCU0VDUVFBa0JTQUNRUUZ4UlFSQVFRQWtCVUVQSUFGQmdEQnFJZ0lnQUVHbzl3WnFRWUFJRUFjYUl3VWhBMEVBSkFVZ0EwRUJjVVVFUUVFQUpBVkJEaUFDSUFGQmdDaHFRWUFJRUFjYUl3VWhBa0VBSkFVZ0FrRUJjVVVFUUNBQlFZRFFBR29pQTBFQU5nQUFJQU1nQUVHUXVBZHFMUUFBSWdJMkFBQWdBRUdSdUFkcUxBQUFCRUFnQXlBQ1FRSnlJZ0kyQUFBTElBQkJrN2dIYWl3QUFBUkFJQU1nQWtFRWNpSUNOZ0FBQ3lBQVFlaTRCMm9zQUFBRVFDQURJQUpCRUhJaUFqWUFBQXNnQUVIcHVBZHFMQUFBQkVBZ0F5QUNRU0J5TmdBQUN5QUJRWVRRQUdvZ0FFSFF0d2RxS1FNQUlnVStBQUFnQVVHSTBBQnFJQVZDSUlnK0FBQWdBVUdNMEFCcUlBQkIyTGNIYWlrREFDSUZQZ0FBSUFGQmtOQUFhaUFGUWlDSVBnQUFJQUZCbE5BQWFpQUFRZlM0QjJvb0FnQUVmMEVEQlVFQ0N6WUFBQ0FBUWZDTENXb29BZ0JCQTBZaEFpQUFRYUgzQm1vc0FBQWlBMEgvQVhFaEJDQURCSDlCeUFFRlFUSUxJUU1nQVVHZzBBQnFJQUlFZnlBREJTQUVDellBQUNBQlFaalFBR29nQUVIc3R3ZHFJZ0lvQWdBMkFBQkJBQ1FGUVFVZ0FFRzR0d2RxRUFVaEF5TUZJUVJCQUNRRklBUkJBWEZGQkVBZ0FVR2MwQUJxSUFNMkFBQWdBVUdrMEFCcUlBQkJvdmNHYWkwQUFFRXdhallBQUNBQlFhalFBR29nQUVHazl3WnFLQUlBTmdBQUlBRkJ0TkFBYWtFQU5nQUFJQUZCdU5BQWFrRUFOZ0FBSUFGQnZOQUFhaUFBUWV5NEIyb29BZ0JCQ25ZMkFBQUNRQUpBQWtBQ1FDQUFRZWkzQjJvb0FnQkJBV3NPQXdBQUFRSUxJQUZCd05BQWFrRUJOZ0FBREFJTElBRkJ3TkFBYWtFQ05nQUFJQUZCeE5BQWFpSURJQUlwQUFBM0FBQWdBeUFDS1FBSU53QUlJQU1nQWlrQUVEY0FFQ0FESUFJcEFCZzNBQmdNQVFzZ0FVSEEwQUJxUVFBMkFBQUxJQUZCNU5BQWFpQUFRZmk0QjJvb0FnQWlBallBQUNBQ0JFQWdBVUhvMEFCcUtBQUFJZ0lFUUNBQlFlelFBR29vQUFBaUEwRi9ha0dmalFaSkJFQkJBQ1FGUVJBZ0FpQUFRZnk0QjJvZ0F4QUhHaU1GSVFKQkFDUUZJQUpCQVhFTkNRc0xDeUFCUWZEUUFHb2dBRUg4K0FkcUxRQUFOZ0FBUVFBUEN3c0xDd3NMQzBHQUNCQVlJUUVqQjBHQUNCQkVSd1JBSUFFUUhnc2dBUkFWSVFFQ1FDQUFRYWpMQkdvb0FnQWlBRVVFUUFKQUFrQUNRQUpBQWtBQ1FBSkFBa0FDUUNBQktBSUFEZ3dIQ0FBQkNBSURDQVVFQ0FZSUMwRVNJUUFNQ1F0QkRDRUFEQWdMUVJNaEFBd0hDMEVQSVFBTUJndEJFQ0VBREFVTFFRc2hBQXdFQzBFWUlRQU1Bd3RCQUNFQURBSUxRUlVoQUFzTEVCWWdBQXZFQXdFRWZ5TUVJUUlqQkVGQWF5UUVJQUpCSUdvaEF5QUFLQUlBSWdSQkFrWUVRQ0FESUFCQkJHb2lCU2dDQUNJRU9nQUFJQU1nQkVFSWRqb0FBU0FESUFSQkVIWTZBQUlnQXlBRVFSaDJPZ0FESUFGQklDQURRUVFnQWhDbkFTQUZRUUEyQWdBZ0JTQUNMUUFmUVJoMElBSXRBQjVCRUhRZ0FpMEFIVUVJZENBQ0xRQWJRUmgwSUFJdEFCcEJFSFFnQWkwQUdVRUlkQ0FDTFFBWFFSaDBJQUl0QUJaQkVIUWdBaTBBRlVFSWRDQUNMUUFUUVJoMElBSXRBQkpCRUhRZ0FpMEFFVUVJZENBQ0xRQVBRUmgwSUFJdEFBNUJFSFFnQWkwQURVRUlkQ0FDTFFBTFFSaDBJQUl0QUFwQkVIUWdBaTBBQ1VFSWRDQUNMUUFIUVJoMElBSXRBQVpCRUhRZ0FpMEFCVUVJZENBQ0xRQURRUmgwSUFJdEFBSkJFSFFnQWkwQUFVRUlkQ0FDTFFBQWNuSnlJQUl0QUFSemMzTnpJQUl0QUFoemMzTnpJQUl0QUF4emMzTnpJQUl0QUJCemMzTnpJQUl0QUJSemMzTnpJQUl0QUJoemMzTnpJQUl0QUJ4emMzTnpOZ0lBSUFBb0FnQWhCQXNnQkVFRFJ3UkFJQUlrQkE4TElBRkJJQ0FBUVFScUlnQkJJQ0FERUtjQklBQWdBeWtBQURjQUFDQUFJQU1wQUFnM0FBZ2dBQ0FES1FBUU53QVFJQUFnQXlrQUdEY0FHQ0FDSkFRTHhnZ0JCWDhqQkNFTUl3UkI0QVJxSkFRZ0JrRVlTd1JBSUF3a0JBOExJQXhCd0FScUlRc2dERUdnQkdvaENTQU1RWUFFYWlFS0FrQUNRQ0FBUWZnVmFpZ0NBQ0FHUmdSQUlBQkJ4QkZxSUFJUWR3UkFJQUJCeUJWcUlBUkJFQkJyUlFSQVFRQWhBZ3dEQ3dzTElBQkI4QnBxS0FJQUlBWkdCRUFnQUVHOEZtb2dBaEIzQkVBZ0FFSEFHbW9nQkVFUUVHdEZCRUJCQVNFQ0RBTUxDd3NnQUVIb0gyb29BZ0FnQmtZRVFDQUFRYlFiYWlBQ0VIY0VRQ0FBUWJnZmFpQUVRUkFRYTBVRVFFRUNJUUlNQXdzTEN5QUFRZUFrYWlnQ0FDQUdSZ1JBSUFCQnJDQnFJQUlRZHdSQUlBQkJzQ1JxSUFSQkVCQnJSUVJBUVFNaEFnd0RDd3NMSUFNZ0RFR0FCQkR0QVNBTUlBd1FiaUFFUVJBZ0N5QUtJQWxCQVNBR2RCREJBaUFNUVlBRUVGc2dBRUdrSldvaURTZ0NBQ0VESUEwZ0EwRUJhallDQUNBQUlBTkJBM0VpQTBINEJHeHFRZmdWYWlBR05nSUFJQUJCeEJGcUlBTkIrQVJzYWlBQ1FZSUVFRk1hSUFBZ0EwSDRCR3hxUWNnVmFpSUNJQVFwQUFBM0FBQWdBaUFFS1FBSU53QUlJQUFnQTBINEJHeHFRZGdWYWlJQ0lBc3BBQUEzQUFBZ0FpQUxLUUFJTndBSUlBSWdDeWtBRURjQUVDQUNJQXNwQUJnM0FCZ2dBQ0FEUWZnRWJHcEIvQlZxSWdRZ0NTa0FBRGNBQUNBRUlBa3BBQWczQUFnZ0JDQUpLUUFRTndBUUlBUWdDU2tBR0RjQUdDQUFJQU5CK0FSc2FrR2NGbW9pQXlBS0tRQUFOd0FBSUFNZ0Npa0FDRGNBQ0NBRElBb3BBQkEzQUJBZ0F5QUtLUUFZTndBWUlBSkJJRUVCUVFBUTVnRU1BUXNnQUNBQ1FmZ0ViR3BCMkJWcUlnTkJJRUVBUVFBUTVnRWdDeUFES1FBQU53QUFJQXNnQXlrQUNEY0FDQ0FMSUFNcEFCQTNBQkFnQ3lBREtRQVlOd0FZSUFOQklFRUJRUUFRNWdFZ0NTQUFJQUpCK0FSc2FrSDhGV29pQXlrQUFEY0FBQ0FKSUFNcEFBZzNBQWdnQ1NBREtRQVFOd0FRSUFrZ0F5a0FHRGNBR0NBS0lBQWdBa0g0Qkd4cVFad1dhaUlDS1FBQU53QUFJQW9nQWlrQUNEY0FDQ0FLSUFJcEFCQTNBQkFnQ2lBQ0tRQVlOd0FZQ3lBSEJFQWdCeUFLS1FBQU53QUFJQWNnQ2lrQUNEY0FDQ0FISUFvcEFCQTNBQkFnQnlBS0tRQVlOd0FZQ3lBSUJFQWdDU3dBQVNBSkxBQUpjeUFKTEFBUmN5RUNJQWtzQUFJZ0NTd0FDbk1nQ1N3QUVuTWhBeUFKTEFBRElBa3NBQXR6SUFrc0FCTnpJUVFnQ1N3QUJDQUpMQUFNY3lBSkxBQVVjeUVHSUFrc0FBVWdDU3dBRFhNZ0NTd0FGWE1oQnlBSkxBQUdJQWtzQUE1eklBa3NBQlp6SVFvZ0NTd0FCeUFKTEFBUGN5QUpMQUFYY3lFTklBZ2dDU3dBQUNBSkxBQUljeUFKTEFBUWN5QUpMQUFZY3pvQUFDQUlJQUlnQ1N3QUdYTTZBQUVnQ0NBRElBa3NBQnB6T2dBQ0lBZ2dCQ0FKTEFBYmN6b0FBeUFJSUFZZ0NTd0FISE02QUFRZ0NDQUhJQWtzQUIxek9nQUZJQWdnQ2lBSkxBQWVjem9BQmlBSUlBMGdDU3dBSDNNNkFBY2dDVUVnRUZzTElBVUVRQ0FBUWF3bGFpQUJJQXRCZ0FJZ0JSRGxBUXNnQzBFZ0VGc2dEQ1FFQytBS0FVRi9Jd1FoQ2lNRVFjQUJhaVFFSUFwQjJBQnFJUWdnQ2tFNGFpRUpJQXBCREdvaERTQUtRUmhxSVFzZ0NrSDRBR29pRENBQ0lBTkJ3QUJKQkg4Z0F3VkJ3QUFMRUZNYUlBd2dBMnBCQURvQUFDQU1JQU5CQVdwcVFRQTZBQUFnRENBRFFRSnFha0VBT2dBQUlBd2dBMEVEYW1wQkFUb0FBQ0FBSUFFZ0RDQURRUVJxSUFnUXB3RWdDU0FJS1FBQU53QUFJQWtnQ0NrQUNEY0FDQ0FKSUFncEFCQTNBQkFnQ1NBSUtRQVlOd0FZSUEwZ0IwRi9haUlETmdJQUlBMUJFRFlDQkNBTlFSQTJBZ2dnQ2lBRU5nSUFJQW9nQlRZQ0JDQUtJQVkyQWdnZ0NFRUJhaUVwSUFsQkFXb2hCQ0FJUVFKcUlTb2dDVUVDYWlFRklBaEJBMm9oS3lBSlFRTnFJUVlnQ0VFRWFpRXNJQWxCQkdvaEJ5QUlRUVZxSVMwZ0NVRUZhaUVPSUFoQkJtb2hMaUFKUVFacUlROGdDRUVIYWlFdklBbEJCMm9oRUNBSVFRaHFJVEFnQ1VFSWFpRVJJQWhCQ1dvaE1TQUpRUWxxSVJJZ0NFRUthaUV5SUFsQkNtb2hFeUFJUVF0cUlUTWdDVUVMYWlFVUlBaEJER29oTkNBSlFReHFJUlVnQ0VFTmFpRTFJQWxCRFdvaEZpQUlRUTVxSVRZZ0NVRU9haUVYSUFoQkQyb2hOeUFKUVE5cUlSZ2dDRUVRYWlFNElBbEJFR29oR1NBSVFSRnFJVGtnQ1VFUmFpRWFJQWhCRW1vaE9pQUpRUkpxSVJzZ0NFRVRhaUU3SUFsQkUyb2hIQ0FJUVJScUlUd2dDVUVVYWlFZElBaEJGV29oUFNBSlFSVnFJUjRnQ0VFV2FpRStJQWxCRm1vaEh5QUlRUmRxSVQ4Z0NVRVhhaUVnSUFoQkdHb2hRQ0FKUVJocUlTRWdDRUVaYWlGQklBbEJHV29oSWlBSVFScHFJVUlnQ1VFYWFpRWpJQWhCRzJvaFF5QUpRUnRxSVNRZ0NFRWNhaUZFSUFsQkhHb2hKU0FJUVIxcUlVVWdDVUVkYWlFbUlBaEJIbW9oUmlBSlFSNXFJU2NnQ0VFZmFpRkhJQWxCSDJvaEtFRUFJUUlEUUNBTklBSkJBblJxSVVnZ0F3UkFRUUFoQXdOQUlBQWdBU0FJUVNBZ0N4Q25BU0FJSUFzcEFBQTNBQUFnQ0NBTEtRQUlOd0FJSUFnZ0N5a0FFRGNBRUNBSUlBc3BBQmczQUJnZ0NTQUpMQUFBSUFnc0FBQnpPZ0FBSUFRZ0JDd0FBQ0FwTEFBQWN6b0FBQ0FGSUFVc0FBQWdLaXdBQUhNNkFBQWdCaUFHTEFBQUlDc3NBQUJ6T2dBQUlBY2dCeXdBQUNBc0xBQUFjem9BQUNBT0lBNHNBQUFnTFN3QUFITTZBQUFnRHlBUExBQUFJQzRzQUFCek9nQUFJQkFnRUN3QUFDQXZMQUFBY3pvQUFDQVJJQkVzQUFBZ01Dd0FBSE02QUFBZ0VpQVNMQUFBSURFc0FBQnpPZ0FBSUJNZ0V5d0FBQ0F5TEFBQWN6b0FBQ0FVSUJRc0FBQWdNeXdBQUhNNkFBQWdGU0FWTEFBQUlEUXNBQUJ6T2dBQUlCWWdGaXdBQUNBMUxBQUFjem9BQUNBWElCY3NBQUFnTml3QUFITTZBQUFnR0NBWUxBQUFJRGNzQUFCek9nQUFJQmtnR1N3QUFDQTRMQUFBY3pvQUFDQWFJQm9zQUFBZ09Td0FBSE02QUFBZ0d5QWJMQUFBSURvc0FBQnpPZ0FBSUJ3Z0hDd0FBQ0E3TEFBQWN6b0FBQ0FkSUIwc0FBQWdQQ3dBQUhNNkFBQWdIaUFlTEFBQUlEMHNBQUJ6T2dBQUlCOGdIeXdBQUNBK0xBQUFjem9BQUNBZ0lDQXNBQUFnUHl3QUFITTZBQUFnSVNBaExBQUFJRUFzQUFCek9nQUFJQ0lnSWl3QUFDQkJMQUFBY3pvQUFDQWpJQ01zQUFBZ1Fpd0FBSE02QUFBZ0pDQWtMQUFBSUVNc0FBQnpPZ0FBSUNVZ0pTd0FBQ0JFTEFBQWN6b0FBQ0FtSUNZc0FBQWdSU3dBQUhNNkFBQWdKeUFuTEFBQUlFWXNBQUJ6T2dBQUlDZ2dLQ3dBQUNCSExBQUFjem9BQUNBRFFRRnFJZ01nU0NnQ0FFa05BQXNMSUFvZ0FrRUNkR29vQWdBaUF5QUpLUUFBTndBQUlBTWdDU2tBQ0RjQUNDQURJQWtwQUJBM0FCQWdBeUFKS1FBWU53QVlJQUpCQVdvaUFrRURSd1JBSUEwZ0FrRUNkR29vQWdBaEF3d0JDd3NnREVIRUFCQmJJQWxCSUJCYklBaEJJQkJiSUF0QklCQmJJQW9rQkF1VUNBRU1meU1FSVFZakJFR1FCV29rQkNBR1FmZ0VhaUVGSUFaQjZBUnFJUWNnQmtIZ0Ftb2hDeUFHUWNRQmFpRUtJQVpCc0FGcUlRZ2dCa0VVYWlFTUlBQWdBaEIzSVFrQ1FBSkFJQVFFUUNBSkJFQWdBQ3dBckFRRVFDQUFRWVFFYWlBRVFRZ1FhMFVFUUVFQUlRTU1CQXNMQ3lBQVFiQUVhaUFDRUhjRVFDQUFRZHdJYWl3QUFBUkFJQUJCdEFocUlBUkJDQkJyUlFSQVFRRWhBd3dFQ3dzTElBQkI0QWhxSUFJUWR3UkFJQUJCakExcUxBQUFCRUFnQUVIa0RHb2dCRUVJRUd0RkJFQkJBaUVEREFRTEN3c2dBRUdRRFdvZ0FoQjNCRUFnQUVHOEVXb3NBQUFFUUNBQVFaUVJhaUFFUVFnUWEwVUVRRUVESVFNTUJBc0xDd1VnQ1FSQUlBQXNBS3dFUlFSQVFRQWhBd3dEQ3dzZ0FFR3dCR29nQWhCM0JFQWdBRUhjQ0dvc0FBQkZCRUJCQVNFRERBTUxDeUFBUWVBSWFpQUNFSGNFUUNBQVFZd05haXdBQUVVRVFFRUNJUU1NQXdzTElBQkJrQTFxSUFJUWR3UkFJQUJCdkJGcUxBQUFSUVJBUVFNaEF3d0RDd3NMREFFTElBVWdBQ0FEUWJBRWJHcEJqQVJxSWdJcEFBQTNBQUFnQlNBQ0tRQUlOd0FJSUFjZ0FDQURRYkFFYkdwQm5BUnFJZ0lwQUFBM0FBQWdCeUFDS1FBSU53QUlJQUJCckNWcUlBRWdCVUdBQVNBSEVPVUJJQVZCRUJCYklBZEJFQkJiSUFZa0JBOExJQU1nQzBHSUFoRE5BaG9nQXhCWlFRRjBJUWtnQkVFQVJ5SU5CRUFnQ3lBSmFpQUVLUUFBTndBQUlBbEJDR29oQ1FzZ0NoQ3RCQ0FJUVFGcUlRNGdDRUVDYWlFUElBWkJFR29oRUVFQUlRTURRQ0FLSUFzZ0NVRUFFS01CSUFnZ0F6b0FBQ0FPSUFOQkNIWTZBQUFnRHlBRFFSQjJPZ0FBSUFvZ0NFRURRUUFRb3dFZ0EwSC8vd0J4UlFSQUlBd2dDa0djQVJCVEdpQU1JQVpCQUJDdEFpQUhJQU5CRG5acUlCQW9BZ0E2QUFBTElBTkJBV29pQTBHQWdCQkhEUUFMSUFvZ0NFRUFFSzBDSUFVZ0NDZ0NBQ0lET2dBQUlBVWdBMEVJZGpvQUFTQUZJQU5CRUhZNkFBSWdCU0FEUVJoMk9nQURJQVVnQ0NnQ0JDSURPZ0FFSUFVZ0EwRUlkam9BQlNBRklBTkJFSFk2QUFZZ0JTQURRUmgyT2dBSElBVWdDQ2dDQ0NJRE9nQUlJQVVnQTBFSWRqb0FDU0FGSUFOQkVIWTZBQW9nQlNBRFFSaDJPZ0FMSUFVZ0NDZ0NEQ0lET2dBTUlBVWdBMEVJZGpvQURTQUZJQU5CRUhZNkFBNGdCU0FEUVJoMk9nQVBJQUFnQUVIQUVXb2lBeWdDQUVHd0JHeHFJQUpCZ2dRUVV4b2dBQ0FES0FJQUlnSkJzQVJzYWlBTk9nQ3NCQ0FOQkVBZ0FDQUNRYkFFYkdvZ0JDa0FBRGNBaEFRTElBQWdBa0d3Qkd4cVFZd0VhaUlDSUFVcEFBQTNBQUFnQWlBRktRQUlOd0FJSUFBZ0F5Z0NBRUd3Qkd4cVFad0VhaUlDSUFjcEFBQTNBQUFnQWlBSEtRQUlOd0FJSUFNZ0F5Z0NBRUVCYWtFRGNUWUNBQ0FMUVlnQ0VGc2dBRUdzSldvZ0FTQUZRWUFCSUFjUTVRRWdCVUVRRUZzZ0IwRVFFRnNnQmlRRUMrNEZBUngvSXdRaEJpTUVRUkJxSkFRZ0FVRUJhaUlMTFFBQVFRaDBJQUV0QUFCeUlBRkJBbW9pREMwQUFFRVFkSElnQVVFRGFpSU5MUUFBUVJoMGNpQUFRYlF4YWlnQ0FDSU9jeUVDSUFGQkJXb2lEeTBBQUVFSWRDQUJRUVJxSWhBdEFBQnlJQUZCQm1vaUVTMEFBRUVRZEhJZ0FVRUhhaUlTTFFBQVFSaDBjaUFBUWJneGFpSVRLQUlBY3lFSklBRkJDV29pRkMwQUFFRUlkQ0FCUVFocUloVXRBQUJ5SUFGQkNtb2lGaTBBQUVFUWRISWdBVUVMYWlJWExRQUFRUmgwY2lBQVFid3hhaUlZS0FJQWN5RURJQUZCRFdvaUdTMEFBRUVJZENBQlFReHFJaG90QUFCeUlBRkJEbW9pR3kwQUFFRVFkSElnQVVFUGFpSWNMUUFBUVJoMGNpQUFRY0F4YWlJZEtBSUFjeUVFSUFZZ0FTa0FBRGNBQUNBR0lBRXBBQWczQUFoQkh5RUhBMEFnQUVHMEwyb2dBRUcwTVdvZ0IwRURjVUVDZEdvb0FnQWlDQ0FFUVF0MElBUkJGWFp5SUFOcWN5SUZRUWgyUWY4QmNXb3RBQUJCQ0hRZ0FFRzBMMm9nQlVIL0FYRnFMUUFBY2lBQVFiUXZhaUFGUVJCMlFmOEJjV290QUFCQkVIUnlJQUJCdEM5cUlBVkJHSFpxTFFBQVFSaDBjaUFDY3lFS0lBQkJ0QzlxSUFnZ0EwRVJkQ0FEUVE5MmNpQUVjMm9pQWtFSWRrSC9BWEZxTFFBQVFRaDBJQUJCdEM5cUlBSkIvd0Z4YWkwQUFISWdBRUcwTDJvZ0FrRVFka0gvQVhGcUxRQUFRUkIwY2lBQVFiUXZhaUFDUVJoMmFpMEFBRUVZZEhJZ0NYTWhCU0FIUVg5cUlRZ2dCMEVBU2dSQUlBUWhDU0FESVFJZ0NDRUhJQW9oQXlBRklRUU1BUXNMSUFFZ0RpQUtjeUlCT2dBQUlBc2dBVUVJZGpvQUFDQU1JQUZCRUhZNkFBQWdEU0FCUVJoMk9nQUFJQkFnRXlnQ0FDQUZjeUlCT2dBQUlBOGdBVUVJZGpvQUFDQVJJQUZCRUhZNkFBQWdFaUFCUVJoMk9nQUFJQlVnR0NnQ0FDQURjeUlCT2dBQUlCUWdBVUVJZGpvQUFDQVdJQUZCRUhZNkFBQWdGeUFCUVJoMk9nQUFJQm9nSFNnQ0FDQUVjeUlCT2dBQUlCa2dBVUVJZGpvQUFDQWJJQUZCRUhZNkFBQWdIQ0FCUVJoMk9nQUFJQUFnQmhEckFTQUdKQVFMd1FVQkduOGdBVUVCYWlJSkxRQUFRUWgwSUFFdEFBQnlJQUZCQW1vaUNpMEFBRUVRZEhJZ0FVRURhaUlMTFFBQVFSaDBjaUFBUWJReGFpZ0NBQ0lNY3lFQ0lBRkJCV29pRFMwQUFFRUlkQ0FCUVFScUlnNHRBQUJ5SUFGQkJtb2lEeTBBQUVFUWRISWdBVUVIYWlJUUxRQUFRUmgwY2lBQVFiZ3hhaUlSS0FJQWN5RUlJQUZCQ1dvaUVpMEFBRUVJZENBQlFRaHFJaE10QUFCeUlBRkJDbW9pRkMwQUFFRVFkSElnQVVFTGFpSVZMUUFBUVJoMGNpQUFRYnd4YWlJV0tBSUFjeUVESUFGQkRXb2lGeTBBQUVFSWRDQUJRUXhxSWhndEFBQnlJQUZCRG1vaUdTMEFBRUVRZEhJZ0FVRVBhaUlhTFFBQVFSaDBjaUFBUWNBeGFpSWJLQUlBY3lFRUEwQWdBRUcwTDJvZ0FFRzBNV29nQjBFRGNVRUNkR29vQWdBaUJpQUVRUXQwSUFSQkZYWnlJQU5xY3lJRlFRaDJRZjhCY1dvdEFBQkJDSFFnQUVHMEwyb2dCVUgvQVhGcUxRQUFjaUFBUWJRdmFpQUZRUkIyUWY4QmNXb3RBQUJCRUhSeUlBQkJ0QzlxSUFWQkdIWnFMUUFBUVJoMGNpQUNjeUVGSUFCQnRDOXFJQVlnQTBFUmRDQURRUTkyY2lBRWMyb2lBa0VJZGtIL0FYRnFMUUFBUVFoMElBQkJ0QzlxSUFKQi93RnhhaTBBQUhJZ0FFRzBMMm9nQWtFUWRrSC9BWEZxTFFBQVFSQjBjaUFBUWJRdmFpQUNRUmgyYWkwQUFFRVlkSElnQ0hNaEJpQUhRUUZxSWdkQklFY0VRQ0FFSVFnZ0F5RUNJQVVoQXlBR0lRUU1BUXNMSUFFZ0RDQUZjeUlDT2dBQUlBa2dBa0VJZGpvQUFDQUtJQUpCRUhZNkFBQWdDeUFDUVJoMk9nQUFJQTRnRVNnQ0FDQUdjeUlDT2dBQUlBMGdBa0VJZGpvQUFDQVBJQUpCRUhZNkFBQWdFQ0FDUVJoMk9nQUFJQk1nRmlnQ0FDQURjeUlDT2dBQUlCSWdBa0VJZGpvQUFDQVVJQUpCRUhZNkFBQWdGU0FDUVJoMk9nQUFJQmdnR3lnQ0FDQUVjeUlDT2dBQUlCY2dBa0VJZGpvQUFDQVpJQUpCRUhZNkFBQWdHaUFDUVJoMk9nQUFJQUFnQVJEckFRdWdBd0VMZnlNRUlRSWpCRUdBQVdva0JDQUFRYlFuYWhDOEFpQUNJZ01nQVVHQUFSQ2VBaG9nQXhCdUlRUWdBRUcwTVdwQitmQ09uWDAyQWdBZ0FFRzRNV3BCOTZXMCt3TTJBZ0FnQUVHOE1XcEJ0Y1RXcUFjMkFnQWdBRUhBTVdwQm8rS2ZwM28yQWdBZ0FFRzBMMnBCNXl4QmdBSVFVeG9nQkVVaUNRUkFJQU1rQkE4TEEwQkJBQ0VGQTBBZ0FFRzBKMm9nQVNBRmFpMEFBQ0FHYTBIL0FYRkJBblJxS0FJQUlnZEIvd0Z4SWdJZ0FFRzBKMm9nQmlBQklBVkJBWEpxTFFBQWFrSC9BWEZCQW5ScUtBSUFRZjhCY1NJS1J3UkFRUUVoQ0FOQUlBQkJ0QzlxSUFKcUlnc3NBQUFoRENBTElBQkJ0QzlxSUFjZ0JXb2dDR3BCL3dGeGFpSUhMQUFBT2dBQUlBY2dERG9BQUNBSVFRRnFJUWdnQWtFQmFpSUhRZjhCY1NJQ0lBcEhEUUFMQ3lBRlFRSnFJZ1VnQkVrTkFBc2dCa0VCYWlJR1FZQUNSdzBBQ3lBRVFROXhCRUFnQkVFUGNpRUNJQVFoQVFOQUlBTWdBV3BCQURvQUFDQUJRUUZxSWdFZ0FrME5BQXNMSUFrRVFDQURKQVFQQlVFQUlRRUxBMEFnQUNBRElBRnFFTVFDSUFGQkVHb2lBU0FFU1EwQUN5QURKQVFMa0FJQkNIOGdBa1VFUUE4TElBQkJ5REZxSVFVZ0FFSEtNV29oQmlBQVFjd3hhaUVISUFCQnpqRnFJUWdEUUNBRklBVXVBUUFpQTBILy93TnhRYlFrYWpzQkFDQUdJQUJCdENkcUlBTkJOR3BCRUhSQkVIVkIvZ054UVFGMlFRSjBhaWdDQUNBR0x3RUFjeUlFT3dFQUlBY2dCeThCQUNBQVFiUW5haUFEUVRScVFSQjBRUkIxUWY0RGNVRUJka0VDZEdvb0FnQkJFSFpySWdrN0FRQWdDQ0FJTHdFQUlncEJEM1JCZ0lBQ2NTQUtRUUYyY2lBRVFmLy9BM0Z6SWdSQkFYWWdCRUVQZEhJaUJEc0JBQ0FGSUFRZ0NVSC8vd054SUFOQnRDUnFRUkIwUVJCMVFmLy9BM0Z6Y3lJRE93RUFJQUVnQTBFSWRpQUJMUUFBY3pvQUFDQUJRUUZxSVFFZ0FrRi9haUlDRFFBTEM1b0JBUUovSUFCRkJFQkJFUThMSUFCQjJNOEZhaUlCRUxJQklRSWdBRUhBekFscUVLRUJJQUVRZmlBQVFmak9CV29vQWdBaUFRUkFJQUVRVWdzZ0FFR2N6Z1ZxS0FJQUlnRUVRQ0FCRUZJTElBQkJ3TTBGYWlnQ0FDSUJCRUFnQVJCU0N5QUFRZVRNQldvb0FnQWlBUVJBSUFFUVVnc2dBRUdJekFWcUtBSUFJZ0VFUUNBQkVGSUxJQUFRZVNBQUVGSWdBZ1IvUVFBRlFSRUxDeThBSUFCQnFDVnFRUUUyQWdBZ0FFSEVNV3BCQURvQUFDQUFRY1V4YWtFSE9nQUFJQUJCeGpGcVFjMEFPZ0FBQzJrQ0FuOENmaUFBUVFScUlRRWdBQ2dDQUVFdFJpSUNSUVJBSUFBaEFRc2dBZ1IrUW44RlFnRUxJUVFnQVNnQ0FDSUFRVkJxUVFwUEJFQkJBQThMQTBBZ0EwSUtmaUFBUVZCcXJId2hBeUFCUVFScUlnRW9BZ0FpQUVGUWFrRUtTUTBBQ3lBRElBUitwd3N6QVFKL0lBQW9BZ0FpQWdSQUlBQWhBUVVnQUE4TEEwQWdBU0FDRUpNQk5nSUFJQUZCQkdvaUFTZ0NBQ0lDRFFBTElBQUxOUUVDZnlBQUtBSUFJZ0lFUUNBQUlRRUZJQUFQQ3dOQUlBRWdBa0VCRUpNQ05nSUFJQUZCQkdvaUFTZ0NBQ0lDRFFBTElBQUxUUUVDZnlBQ1JRUkFJQUVQQ3dOQUlBRWdBMEVDZEdvZ0FDQURRUUYwSWdSQkFYSnFMUUFBUVFoMElBQWdCR290QUFCeUlnUTJBZ0FnQkVFQVJ5QURRUUZxSWdNZ0FrbHhEUUFMSUFFTFZRRUNmeUFDUlFSQUlBRVBDd0pBQTBBZ0FTQURRUUYwSWdScUlBQW9BZ0E2QUFBZ0FTQUVRUUZ5YWlBQUtBSUFRUWgyT2dBQUlBQW9BZ0JGRFFFZ0FFRUVhaUVBSUFOQkFXb2lBeUFDU1EwQUN3c2dBUXVhRVFFTGZ5TUVJUVlqQkVHUTBBQnFKQVFnQmtHUXdBQnFJUUlnQmtFUWFpRURJQUJCREdvaUNFRUFOZ0FBUVFBa0JVRUVRYkRPQ2hBRklRRWpCU0VGUVFBa0JRSkFBa0FnQlVFQmNRUkFRUUFoQVVFQUlRTU1BUVZCQUNRRlFSTWdBUkFNSXdVaEJVRUFKQVVnQlVFQmNRUkFRWUFJUWRnS0VCa2hBQ01ISVFJRlFRQWtCVUVCSUFGQjJNOEZhaUlGSUFFUURTTUZJUVJCQUNRRkFrQWdCRUVCY1FSQVFZQUlRZGdLRUJraEFDTUhJUUlGUVFBa0JVRUNJQUZCd013SmFpSUxJQUVRRFNNRklRUkJBQ1FGSUFSQkFYRUVRRUdBQ0VIWUNoQVpJUUFqQnlFQ0lBVVFmZ3dDQ3lBQlFhakxCR29pQ2tFQU5nSUFJQUZCcU00S2FpQUFLQUFJTmdJQVFRQWtCVUVESUFGQmlNd0ZhaUlFUVlnZEVBMGpCU0VIUVFBa0JTQUhRUUZ4QkVBZ0FTRUREQVVMSUFKQkFEb0FBQUpBQWtBZ0FDZ0FBQ0lIUlEwQVFRQWtCVUVOSUFJZ0IwR0FFQkFIR2lNRklRZEJBQ1FGSUFkQkFYRkZEUUJCZ0FoQjJBb1FHU0VBSXdjaEFnd0JDeUFBS0FBRUlRZEJBQ1FGUVFFZ0FpQUhJQU5CZ0JBUUNCb2pCU0VDUVFBa0JRSkFBa0FnQWtFQmNRMEFRUUFrQlVFRUlBRWdBeEFOSXdVaEFrRUFKQVVnQWtFQmNRMEFJQUZCdUlRRGFrRUJOZ0lBSUFGQmpNc0Rha0VCTmdJQUlBRkJzTXNFYWlBQUtBQWtOZ0lBSUFGQnJNc0VhaUFBS0FBb05nSUFJQUZCbllVRGFrRUJPZ0FBUVFBa0JVRUJJQVVnQTBFRUVBY2hBaU1GSVFOQkFDUUZJQU5CQVhFTkFBSkFJQUlFUUVFQUpBVkJBU0FGUVFFUUJpRUNJd1VoQTBFQUpBVWdBMEVCY1EwQ0lBSkZCRUFDUUNBS0tBSUFJZ0JGQkVCQnJQVUNLQUlBSWdCQkFVMEVRRUVOSVFBTUFnc0NRQUpBQWtBQ1FBSkFBa0FDUUFKQUlBQkJBbXNPQ2dBQkJ3SURCd1VFQndZSEMwRVNJUUFNQ0F0QkRDRUFEQWNMUVJNaEFBd0dDMEVQSVFBTUJRdEJFQ0VBREFRTFFRc2hBQXdEQzBFWUlRQU1BZ3RCRlNFQUN3c2dDQ0FBTmdBQUlBc1FvUUVnQlJCK0lBRkIrTTRGYWlnQ0FDSUFCRUFnQUJCU0N5QUJRWnpPQldvb0FnQWlBQVJBSUFBUVVnc2dBVUhBelFWcUtBSUFJZ0FFUUNBQUVGSUxJQUZCNU13RmFpZ0NBQ0lBQkVBZ0FCQlNDeUFFS0FJQUlnQUVRQ0FBRUZJTElBRVFlU0FCRUZKQkFDRUJEQUlMSUFCQklHb2lBeUFCUWZXTENXb3RBQUFpQWpZQUFDQUJRZmVMQ1dvc0FBQUVRQ0FESUFKQkJISWlBallBQUFzZ0FVSDBpd2xxTEFBQUJFQWdBeUFDUVFoeUlnSTJBQUFMSUFGQitvc0phaXdBQUFSQUlBTWdBa0VRY2lJQ05nQUFDeUFCUWZpTENXb3NBQUFFUUNBRElBSkJJSElpQWpZQUFBc2dBVUg3aXdscUxBQUFCRUFnQXlBQ1FjQUFjaUlDTmdBQUN5QUJRZnlMQ1dvc0FBQUVRQ0FESUFKQmdBRnlJZ0kyQUFBTElBRkIrWXNKYWl3QUFBUkFJQU1nQWtHQUFuSTJBQUFMSUFaQ0FEY0NBQ0FHUWdBM0FnZ0NRQUpBQWtBQ1FDQUFRUlJxSWdvb0FBQkZEUUJCQUNRRlFRSWdCU0FHRUFZaEFpTUZJUVJCQUNRRklBUkJBWEVOQWlBQ1JRMEFBa0JCQUNBR0tBSUVRUUowUVFGeUlnSkJJRXNFZnlBQ0JVRWdDeEJYSWdSRklnY0VRRUVBSkFWQkZFR3M5UUlRRENNRklRbEJBQ1FGSUFsQkFYRkZEUUZCZ0FoQjJBb1FHU0VBSXdjaEFnd0ZDd3NnQkVFQUlBSVFWQm9nQmlnQ0FDRUpRUUFrQlVFT0lBa2dCQ0FDUVg5cUVBY2FJd1VoQWtFQUpBVWdBa0VCY1FSQVFZQUlRZGdLRUJraEFDTUhJUUlnQncwRUlBUVFVZ3dFQ3lBRUVHNUJBV29oQWlBRElBTW9BQUJCQW5JMkFBQWdBQ0FDSUFvb0FBQWlBMHNFZjBFVUJVRUJDellBSENBQVFSaHFJZ2tnQWlBRFNRUi9JQUlpQXdVZ0F3czJBQUFnQUVFUWFpSUFLQUFBSUFRZ0EwRi9haEJUR2lBQ0lBb29BQUJOQkVBZ0FDZ0FBQ0FKS0FBQVFYOXFha0VBT2dBQUN5QUhEUUVnQkJCU0RBRUxJQUJCQURZQUdDQUFRUUEyQUJ3TFFRQWtCVUVGSUFzZ0JSQU5Jd1VoQUVFQUpBVWdBRUVCY1EwQUlBWW9BZ0FpQUFSQUlBQVFVZ3NNQXd0QmdBaEIyQW9RR1NFQUl3Y2hBZ3NnQmlnQ0FDSURCRUFnQXhCU0N3d0RCU0FJUVE4MkFBQWdDeENoQVNBRkVINGdBVUg0emdWcUtBSUFJZ0FFUUNBQUVGSUxJQUZCbk00RmFpZ0NBQ0lBQkVBZ0FCQlNDeUFCUWNETkJXb29BZ0FpQUFSQUlBQVFVZ3NnQVVIa3pBVnFLQUlBSWdBRVFDQUFFRklMSUFRb0FnQWlBQVJBSUFBUVVnc2dBUkI1SUFFUVVrRUFJUUVMQ3lBR0pBUWdBUThMUVlBSVFkZ0tFQmtoQUNNSElRSUxDeUFCSVFNTUJRc0xJQUZCK000RmFpZ0NBQ0lEQkVBZ0F4QlNDeUFCUVp6T0JXb29BZ0FpQXdSQUlBTVFVZ3NnQVVIQXpRVnFLQUlBSWdNRVFDQURFRklMSUFGQjVNd0ZhaWdDQUNJREJFQWdBeEJTQ3lBQlFZak1CV29vQWdBaUF3UkFJQU1RVWdzZ0FSQjVDeUFCRUZKQkFDRUJRUUFoQXdzTUFRdEJnQWhCMkFvUUdTRUFJd2NoQWdzZ0FrR0FDQkJFUndSQUlBSkIyQW9RUkVjRVFDQUFFQjRMSUFBUUZSb2dDRUVMTmdBQUlBRUVRQ0FCUWNETUNXb1FvUUVnQVVIWXp3VnFFSDRnQVVINHpnVnFLQUlBSWdBRVFDQUFFRklMSUFGQm5NNEZhaWdDQUNJQUJFQWdBQkJTQ3lBQlFjRE5CV29vQWdBaUFBUkFJQUFRVWdzZ0FVSGt6QVZxS0FJQUlnQUVRQ0FBRUZJTElBRkJpTXdGYWlnQ0FDSUFCRUFnQUJCU0N5QUJFSGtnQXhCU0N4QVdJQVlrQkVFQUR3c2dBQkFWS0FJQUlRQUNRQUpBSUFGQkFFY2lBZ1JBSUFGQnFNc0VhaWdDQUNJRkJFQWdDQ0FGTmdBQURBSUxDeUFJQW44Q1FBSkFBa0FDUUFKQUFrQUNRQUpBQWtBZ0FBNE1Cd2dBQVFnQ0F3Z0ZCQWdHQ0F0QkVnd0lDMEVNREFjTFFSTU1CZ3RCRHd3RkMwRVFEQVFMUVFzTUF3dEJHQXdDQzBFQURBRUxRUlVMTmdBQUlBSU5BQXdCQ3lBQlFjRE1DV29Rb1FFZ0FVSFl6d1ZxRUg0Z0FVSDR6Z1ZxS0FJQUlnQUVRQ0FBRUZJTElBRkJuTTRGYWlnQ0FDSUFCRUFnQUJCU0N5QUJRY0ROQldvb0FnQWlBQVJBSUFBUVVnc2dBVUhrekFWcUtBSUFJZ0FFUUNBQUVGSUxJQUZCaU13RmFpZ0NBQ0lBQkVBZ0FCQlNDeUFCRUhrZ0F4QlNDeEFXSUFZa0JFRUFDN1FLQWc1L0FYNGpCQ0VESXdSQmdNOERhaVFFSUFOQnFNNERhaUVGSUFCQnJMd0RhaXdBQUFSQUlBVkJBRFlDUkNBRlFSczJBa2dnQlVGQWEwRUJOZ0lBSUFVZ0FFRVlhallDQUVHczlRSkJBeEJrSUFNa0JFRUFEd3NnQTBIWXpRTnFJUWtnQTBIY3pRTnFJUVFnQXlFR0lBQkI4SzBDYWlFTElBQkJpcTRDYWlJTUxRQUFRUVZNQkVBZ0FFR0pyZ0pxSWcwdEFBQWhBeUFBUVppOEEyb29BZ0JCQTBZRWYwRXlCVUVkQ3lBRFR3UkFJQUJCdU80Q2FpSU9LUU1BUWdCUkJFQWdBRUg1N2dKcUxBQUFSUVJBSUFZa0JFRUJEd3NMSUFCQjhQRUFhaUlJRU1JRUlBWWdDQkNpQWlBQVFkVHZBbW9vQWdBaEEwRUFKQVZCQlNBR0lBTkJBQkFPSXdVaEEwRUFKQVVDUUNBRFFRRnhSUVJBQW44Q1FDQUNEUUFnQUVIQTdnSnFJZzhwQXdBaUVVS0FnSUFJVlFSQUlBUkJBRFlDUkNBRVFSdzJBa2dnQkVGQWEwRUJOZ0lBSUFRZ0FFRVlhallDQUVFQUpBVWpCU0VCUVFBa0JTQUJRUUZ4RFFSQkFBd0NDeUFCUlFSQUlBQkJtZklBYWtFQk9nQUFEQUVMSUFGQkNHb2lDaWdDQUNFRUlBRkJCR29pRUNBUnB5SUROZ0lBSUJHbklRY2dCQ0FEU1FSL0lBRW9BZ3dpQjBFQVJ5QUhJQU5KY1FSQVFRQWtCU0FKSUFjMkFnQkJBa0dzOVFKQjJCc2dDUkFPSXdVaEEwRUFKQVVnQTBFQmNRMEZRUUFrQlVFVVFhejFBaEFNSXdVaEEwRUFKQVVnQTBFQmNRMEZJQW9vQWdBaEJDQVFLQUlBSVFNTElBRW9BZ0FnQXlBRVFTQnFJQVJCQW5acUlnUkxCSDhnQXdVZ0JDSURDeEJYSWdSRkJFQkJBQ1FGUVJSQnJQVUNFQXdqQlNFSFFRQWtCU0FIUVFGeERRVUxJQUVnQkRZQ0FDQUtJQU0yQWdBZ0R5a0RBS2NGSUFjTElRTWdBU2dDQUNFRVFRQWtCVUVMSUFnZ0JDQURFQTRqQlNFRFFRQWtCU0FEUVFGeERRTUxJQUJCKys0Q2Fpd0FBQVJBUVFBZ0FFR3M4d0JxS0FJQUlnTkJxTVFDYWl3QUFFVU5BUm9nQTBHb3dBSnFJUVFnQUVIODdnSnFLQUlBSVFjZ0FFR0I3d0pxSVFNZ0FFR0E3d0pxTEFBQVJRUkFRUUFoQXdzZ0FFSE03d0pxS0FJQUlRbEJBQ1FGUVFFZ0NFRUFJQWNnQkNBRElBQkJrZThDYWlBSklBQkJxKzhDYWlBQVFhTHZBbW9RRWlNRklRTkJBQ1FGSUFOQkFYRU5Bd3NnQUVIUTdnSnFJZ01vQWdBaEJFRUFKQVZCQkNBQVFaanpBR29pQnlBRVFRRVFEaU1GSVFSQkFDUUZJQVJCQVhFTkFpQUFRWkR5QUdvZ0Rpa0RBRGNEQUNBQVFaanlBR3BCQURvQUFFRUFKQVZCQXlBSUlBQWdBaEFPSXdVaEFrRUFKQVVnQWtFQmNRMENJQUJCd2ZJQWFpQUFRZm51QW1vc0FBQTZBQUFnQUVHbzhnQnFJQXMyQWdBZ0FFR3M4Z0JxUVFBMkFnQWdCa0d3bUFGcUlBQkJ3TzRDYWlrREFDSVJOd01BSUFaQnlKZ0Jha0VBT2dBQUlBd3NBQUFFUUNBTkxRQUFJUUpCQUNRRlFRWWdCaUFDUVFBUURnVkJBQ1FGUVFJZ0NDQVJweUFSUWlDSXB4QlBDeU1GSVFKQkFDUUZJQUpCQVhFTkFpQUFRYXZ2QW1vaEFpQUFRYXJ2QW1vc0FBQkZCRUJCQUNFQ0MwRUFKQVZCRnlBSElBTWdBaEFISVFJakJTRURRUUFrQlNBRFFRRnhEUUlnQWdSL1FRRUZJQVZCQURZQ1JDQUZRUjAyQWtnZ0JTQUFRUmhxTmdJQUlBVkJRR3RCQWpZQ0FDQUZJQUJCa0s0Q2FqWUNCRUVBSkFVakJTRUNRUUFrQlNBQ1FRRnhEUU5CQUNRRlFRcEJyUFVDUVFNUURTTUZJUUpCQUNRRklBSkJBWEVOQXlBQkJFQWdBU2dDQUNJQUJFQWdBQkJTSUFGQkFEWUNBQXNnQVVFQU5nSUVJQUZCQURZQ0NBdEJBQXNMSVFBZ0JoQ1ZBU0FHSkFRZ0FBOExDeEFYSVFFZ0JoQ1ZBU0FCRUI0TEN5QUZRUUEyQWtRZ0JVRWNOZ0pJSUFWQlFHdEJBVFlDQUNBRklBQkJHR28yQWdBZ0JpUUVRUUFMWHdJQmZ3RitJQUJCdEtZQmFpZ0NBQ0FBUWFpOEEyb29BZ0JxclNFQ0lBQkJtTHdEYWlnQ0FFRUNSZ1IrSUFCQnhLWUJhaWdDQUswZ0Fud0ZJQUJCaEtjQmFpZ0NBQ0VCSUFBZ0FFSEVwZ0ZxS0FJQUVQQUJJQUZxclNBQ2ZBc0xEd0FnQUVHUjZRRnFMQUFBUVFCSEM1UUJBUVYvSUFBUWZDSUNSUVJBUVFBUEN5QUFRY3p6QUdvaEF5QUFRWkN1QW1vaEJRSkFBMEFnQXlnQ0FDSUVRUVZHQkVCQkFDRUNEQUlMSUFaQkFXb2lCa0gvQUhGRkJFQVFoUUVnQXlnQ0FDRUVDeUFFUVFOR0JFQWdCU0FCRUhORkRRSUxJQUFnQUVHUXZBTnFLUU1BUVFBZ0FDZ0NBQ2dDRUVFRGNVRzRBbW9SQWdBZ0FCQjhJZ0lOQUVFQUlRSUxDeUFDQzdBTkFqUi9BMzRqQkNFRkl3UkJvTUVBYWlRRUlBRkJGR29pQ1NnQ0FDQUNheUlFSUFGQkdHb2lCeWdDQUVrRVFDQUZKQVFQQ3lBSElBUTJBZ0FnQWtFQlRRUkFJQVVrQkE4TElBVkIrQUJxSVJFZ0JVSHdBR29oRWlBRlFZREJBR29oRXlBRFFRUnFJUW9nQTBFZWFpRWNJQUJCaUx3RGFpRVVJQU5CTUdvaEhTQURRU0JxSVFzZ0EwR3h3UUJxSVFnZ0EwRzZ3UUJxSVI0Z0EwSGN3UUJxSVI4Z0FFRVlhaUVWSUFWQmdBRnFJZ1JCUUdzaElDQUVRY1FBYWlFaElBUkJ5QUJxSVNJZ0JFRUVhaUVqSUFOQmtjRUFhaUVrSUFOQm9jRUFhaUVsSUFOQmtNRUFhaUVtSUFOQmpNRUFhaUVuSUFOQmk4RUFhaUVvSUFOQnNzRUFhaUVNSUFSQlFHc2hLU0FFUWNRQWFpRXFJQVJCeUFCcUlTc2dCRUVFYWlFc0lBTkI0TUFBYWlJdFFRUnFJUzRnQTBIQXdBQnFJUllnQTBHNHdBQnFJUmNnQTBHd3dBQnFJUmdnQTBIandRQnFJUzhnQUVIUXB3RnFJVEFnQTBId3dRQnFJVEVnQTBIMGdRRnFJVElnQTBIMHdRQnFJVE1nQTBIMmdRRnFJUmtnQTBIM2dRRnFJUm9nQTBINGd3RnFJUTBnQTBINGdRRnFJUTRnQTBIMWdRRnFJVFFnQTBIOGhRRnFJVFVnQTBINGhRRnFJVFlnQTBHZ3dBQnFJZ1pCQ0dvaER5QUdRUVJxSVJzZ0JrRU1haUUzQWtBRFFDQUJFR0VpT0VJQVVRMEJJQWtvQWdBZ0J5Z0NBQ0lBYXlJQ1JTQTRJQUt0VlhJTkFTQUJFR0VoT2lBSEtBSUFJUU1nT2tJQlVTQUtLQUlBSWdKQkFVWnhCRUFnSEVFQk9nQUFJQUVRWWFjaUFrRUJjUVJBSUFFUVlTSTVRZ0JTQkVBZ0N5QVVLUU1BSURsOE53TUFDd3NnQWtFQ2NRUkFJQUVRWVNJNVFnQlNCRUFnSFNBVUtRTUFJRGw4TndNQUN3c2dDaWdDQUNFQ0N5QTRJQUN0ZktjaUVDQURheUVBQWtBZ0FrRitjVUVDUmdSQUFrQUNRQUpBQWtBQ1FBSkFBa0FDUUNBNlFnRjlJamhDSUlpbkRRY2dPS2NPQndBQkFnTUVCUVlIQ3lBQkVHR25CRUFnS2tFQU5nSUFJQ3RCSURZQ0FDQUVJQlUyQWdBZ0tVRUNOZ0lBSUN3Z0N6WUNBRUdzOVFKQkFSQmtEQWtMSUFnZ0FSQmhweUlBUVFGeE9nQUFJQjRnQUVFQmRrRUJjVG9BQUNBZklBRVF1d0lpQUVIL0FYRTJBZ0FnQUVIL0FYRkJHRW9FUUNBaFFRQTJBZ0FnSWtFZ05nSUFJQVFnRlRZQ0FDQWdRUUkyQWdBZ0l5QUxOZ0lBUWF6MUFrRUJFR1FMSUFFZ0pFRVFFSG9hSUFFZ0pVRVFFSG9hSUFnc0FBQUVRQ0FCSUF4QkNCQjZHaUFCSUFSQkJCQjZHaUFGRUtJQklBVWdERUVJRUgwZ0JTQVRFSmNCSUFnZ0JDQVRRUVFRYTBVNkFBQWdDaWdDQUVFRFJnUkFJQXhCdEx3RFFRZ1FhMFVFUUNBSVFRQTZBQUFMQ3dzZ0prRUJPZ0FBSUNkQkJUWUNBQ0FvUVFFNkFBQU1DQXNnQVJCaHB3MEhJQzFCQXpZQ0FDQUJJQzVCSUJCNkdnd0hDeUFBUVFoTkRRWWdBUkJocHlJQVFRRnhRUUJISVFJZ0FFRUNjUVJBSUFJRVFDQVlJQUVRcGdHc1FvQ3Q0Z1IrUW9DQStxbnR1K3pPQVh3M0F3QUZJQmdnQVJEb0FUY0RBQXNMSUFCQkJIRUVRQ0FDQkVBZ0Z5QUJFS1lCckVLQXJlSUVma0tBZ1BxcDdidnN6Z0Y4TndNQUJTQVhJQUVRNkFFM0F3QUxDeUFBUVFoeFJRMEdJQUlFUUNBV0lBRVFwZ0dzUW9DdDRnUitRb0NBK3FudHUrek9BWHczQXdBRklCWWdBUkRvQVRjREFBc01CZ3NnQUVVTkJTQUJFR0VhSUFFUVlhY2lBRVVOQlNBdlFRRTZBQUFnRWlBQU5nSUFJQVJCRkVHY0RpQVNFS29ER2lBd0lBUkJnQkFRZUJvTUJRc2dNU0FCRUdFK0FnQWdNaUFCRUdHblFRRnhPZ0FBSUFFUVlhY2hBQ0FFUVFBNkFBQWdBRUgvUDBrRVFDQUJJQVFnQUJCNkdpQUVJQUJxUVFBNkFBQUxJQVFnTTBHQUVCQzZBUm9NQkFzZ0dTQUJFR0duSWdKQkFuWkJBWEU2QUFBZ0dpQUNRUU4yUVFGeE9nQUFJQTFCQURvQUFDQU9RUUE2QUFBZ0FrRUJjUVJBSUFFZ0RpQUJFR0duSWdCQi93RkpCSDhnQUFWQi93RWlBQXNRZWhvZ0RpQUFha0VBT2dBQUN5QUNRUUp4QkVBZ0FTQU5JQUVRWWFjaUFFSC9BVWtFZnlBQUJVSC9BU0lBQ3hCNkdpQU5JQUJxUVFBNkFBQUxJQmtzQUFBRVFDQTJJQUVRWVQ0Q0FBc2dHaXdBQUFSQUlEVWdBUkJoUGdJQUN5QTBRUUU2QUFBTUF3c2dBa0VEUmdSQUlBQWdDU2dDQUNBUWEwRUJSbW9oQUFzZ0R5Z0NBQ0VESUJzZ0FEWUNBQ0FESUFCSkJFQWdOeWdDQUNJQ1FRQkhJQUFnQWt0eEJIOGdFU0FDTmdJQVFhejFBa0hZR3lBUkVHQkJyUFVDRUZZZ0R5Z0NBQ0VESUJzb0FnQUZJQUFMSVFJZ0JpZ0NBQ0FDSUFOQklHb2dBMEVDZG1vaUEwc0VmeUFDQlNBRElnSUxFRmNpQTBVRVFFR3M5UUlRVmdzZ0JpQUROZ0lBSUE4Z0FqWUNBQXNnQVNBR0tBSUFJQUFRZWhvTEN3c2dCeUFRTmdJQUlBa29BZ0FnRUd0QkFVc05BQXNMSUFVa0JBdkJBZ0VGZnlNRUlRRWpCRUdBQldva0JDQUFRYXp6QUdvaUF5Z0NBQ0lFUWFqRUFtb3NBQUFFUUNBQkpBUVBDeUFCUVlBRWFpRUNBbjhDUUNBRVFiRExCR29vQWdBaUJVVU5BQ0FCUVFBMkFnQUNRQUpBUVFRZ0JFR3N5d1JxS0FJQUlBRkJnQUVnQlVFUGNVSHFBR29SQXdCQmYwWUVRQ0FCUVFBMkFnQU1BUVVnQVNnQ0FFVU5BUXNNQVFzZ0FrRUFPZ0FBUVFJZ0F5Z0NBQ0lFUWF6TEJHb29BZ0FnQWtHQUFTQUVRYkRMQkdvb0FnQkJEM0ZCNmdCcUVRTUFRWDlHQkVBZ0FrRUFPZ0FBQ3lBQ1FRQWdBVUdBQVJEREFSb2dBa0dBQVJCYkN5QURLQUlBUWFqQUFtb2dBUkN1QWlBQlFZQUVFRnNnQXlnQ0FDSUNRYWpFQW1vc0FBQkZEUUFnQWd3QkN5QUFFTElCR2lBREtBSUFRYWpMQkdwQkZqWUNBRUdzOVFKQi93RVFwQUVnQXlnQ0FBc2lBRUd0eEFKcVFRRTZBQUFnQVNRRUM4OHBBaE4vQTM0akJDRUJJd1JCNE1jQWFpUUVJQUZCMkFkcUlRMGdBU0lIUVlnSGFpRURJQWRCdkFacUlRUWdCMEh3QldvaERpQUhRYVFGYWlFUUlBZEIyQVJxSVFvZ0IwR01CR29oQVNBSFFjQURhaUVMSUFkQjlBSnFJUXdnQjBHb0Ftb2hBaUFIUWR3QmFpRUlJQWRCa0FGcUlRWWdCMEh3QUdvaUJTQUFFTGdCQWtBQ1FBSkFJQUJCcEx3RGFpSVNMQUFBQkVBZ0FFR0l2QU5xSWc4cEF3QWdBRUdvdkFOcUtBSUFyVUlJZkZVRVFFRUFKQVZCSENBQUVBd2pCU0VKUVFBa0JTQUpRUUZ4QkVBUUZ5RUFEQVVMSUFBb0FnQW9BZ3doQ1VFQUpBVWdDU0FBSUExQkVCQUhJUWtqQlNFUlFRQWtCUUovQWtBZ0VVRUJjUTBBSUFsQkVFY0VRRUVBSkFWQkJTQUFFRTZ0SXdldFFpQ0doQ0VVSXdVaEFVRUFKQVVnQVVFQmNRMEJBa0FDUUNBUEtRTUFJQlJTRFFBZ0FFR1F2QU5xS1FNQUlCUlNEUUFNQVFzZ0JrRUFOZ0pFSUFaQk56WUNTQ0FHUVVCclFRRTJBZ0FnQmlBQVFSaHFOZ0lBUVFBa0JTTUZJUUJCQUNRRklBQkJBWEVOQWtFQUpBVkJDa0dzOVFKQkFSQU5Jd1VoQUVFQUpBVWdBRUVCY1EwQ0MwRUFJUUFNQmdzZ0FFR3M4d0JxS0FJQVFhakFBbW9oQmlBQVFaQ25BV29vQWdBaEQwRUFKQVZCQVNBQVFaekFBR29pQ1VFQVFRVWdCaUFBUVpTbkFXb2dEU0FQUVFBZ0J4QUtHaU1GSVFaQkFDUUZBa0FnQmtFQmNVVUVRQ0FBUVl5bkFXb3NBQUFFUUNBSElBQkJwS2NCYWtFSUVHc0VRQ0FJUVFBMkFrUWdDRUVHTmdKSUlBaEJRR3RCQVRZQ0FDQUlJQUJCR0dvMkFnQkJBQ1FGSXdVaEFVRUFKQVVnQVVFQmNRMERJQUJCcmJ3RGFrRUJPZ0FBUVFBa0JVRUtRYXoxQWtFTEVBMGpCU0VBUVFBa0JTQUFRUUZ4RFFOQkFDRUFEQWtMQ3lBRklBazJBaHhCQVNFSURBWUxDeEFYREFFTEVCY0xJUUFNQkFWQkFDRUlDd1ZCQUNFSUN3dEJBQ1FGUVFvZ0JVRUhFQVloQmlNRklROUJBQ1FGQWtBZ0QwRUJjVVVFUUNBR1FRZEpCRUJCQUNRRlFRVWdBQkJPclNNSHJVSWdob1FoRkNNRklRRkJBQ1FGSUFGQkFYRU5BaUFBUVlpOEEyb3BBd0FnRkZFRVFDQUFRWkM4QTJvcEF3QWdGRkVFUUVFQUlRQU1CUXNMSUFKQkFEWUNSQ0FDUVRjMkFrZ2dBa0ZBYTBFQk5nSUFJQUlnQUVFWWFqWUNBRUVBSkFVakJTRUFRUUFrQlNBQVFRRnhEUUpCQUNRRlFRcEJyUFVDUVFFUURTTUZJUUJCQUNRRklBQkJBWEVOQWtFQUlRQU1Bd3NnQUVHWXBnRnFJUUlnQUVHb3BnRnFJZzlCQURvQUFFRUFKQVZCRENBRkVBVWhCaU1GSVFsQkFDUUZJQWxCQVhGRkJFQWdBaUFHTmdJQVFRQWtCVUVOSUFWQkJCQUdJUVlqQlNFSlFRQWtCU0FKUVFGeEJFQVFGeUVBREFVTFFRQWtCVUVESUFVUVRxMGpCNjFDSUlhRUlSUWpCU0VKUVFBa0JRSkFJQWxCQVhGRkJFQWdCa1VnRkVJQVVYSUVRQ0FNUVFBMkFrUWdERUVZTmdKSUlBeEJRR3RCQVRZQ0FDQU1JQUJCR0dvMkFnQkJBQ1FGSXdVaEFVRUFKQVVnQVVFQmNRMENJQUJCckx3RGFrRUJPZ0FBUVFBa0JVRUtRYXoxQWtFREVBMGpCU0VBUVFBa0JTQUFRUUZ4RFFKQkFDRUFEQVlMQWtBZ0JrRjlhaUFVcHlJTWFpSUpRUUJJSUFaQkJHb2dER29pQmtFSFNYSUVRQ0FMUVFBMkFrUWdDMEVZTmdKSUlBdEJRR3RCQVRZQ0FDQUxJQUJCR0dvMkFnQkJBQ1FGSXdVaEFVRUFKQVVnQVVFQmNVVUVRQ0FBUWF5OEEycEJBVG9BQUVFQUpBVkJDa0dzOVFKQkF4QU5Jd1VoQUVFQUpBVWdBRUVCY1VVRVFFRUFJUUFNQ1FzTEJVRUFKQVZCQ2lBRklBa1FCaG9qQlNFTFFRQWtCU0FMUVFGeFJRUkFJQVZCRkdvaUNTZ0NBQ0FHU1FSQVFRQWtCVUVGSUFBUVRxMGpCNjFDSUlhRUlSUWpCU0VDUVFBa0JTQUNRUUZ4RFFNZ0FFR0l2QU5xS1FNQUlCUlJCRUFnQUVHUXZBTnFLUU1BSUJSUkJFQkJBQ0VBREFzTEN5QUJRUUEyQWtRZ0FVRTNOZ0pJSUFGQlFHdEJBVFlDQUNBQklBQkJHR28yQWdCQkFDUUZJd1VoQUVFQUpBVWdBRUVCY1EwRFFRQWtCVUVLUWF6MUFrRUJFQTBqQlNFQVFRQWtCU0FBUVFGeERRTkJBQ0VBREFrTFFRQWtCVUVQSUFVUUJTRVJJd1VoQVVFQUpBVWdBVUVCY1VVRVFFRUFKQVZCQXlBRkVFNnRJd2V0UWlDR2hDRVVJd1VoQVVFQUpBVWdBVUVCY1VVRVFDQUFRWnltQVdvaUN5QVVQZ0lBUVFBa0JVRURJQVVRVHEwakI2MUNJSWFFSVJRakJTRUJRUUFrQlNBQlFRRnhSUVJBSUFCQm9LWUJhaUlNSUJTbklnRTJBZ0FnRHlBQlFRSjJRUUZ4T2dBQUlBQkJwS1lCYWlJUElBWTJBZ0FnQUVITTh3QnFJZ1lnQ3lnQ0FEWUNBQUpBSUFJb0FnQWdFVWNpRVFSQUlBcEJBRFlDUkNBS1FSZzJBa2dnQ2tGQWEwRUJOZ0lBSUFvZ0FFRVlhaUlCTmdJQVFRQWtCU01GSVFwQkFDUUZBa0FnQ2tFQmNVVUVRQ0FBUWF5OEEyb2lDa0VCT2dBQVFRQWtCVUVLUWF6MUFrRURFQTBqQlNFVFFRQWtCU0FUUVFGeERRRWdDa0VCT2dBQVFRQWtCVUVLUWF6MUFrRURFQTBqQlNFS1FRQWtCU0FLUVFGeERRRWdDRVVFUUNBTUtBSUFJUUVNQkFzZ0VFRUFOZ0pFSUJCQkJEWUNTQ0FRSUFFMkFnQWdFRUZBYTBFQ05nSUFJQkFnQVRZQ0JFRUFKQVVqQlNFQlFRQWtCU0FCUVFGeERRRWdBRUd0dkFOcVFRRTZBQUJCQUNFQURBOExDeEFYSVFBTURnc0xBa0FnQVVFQmNRUkFRUUFrQlVFRElBVVFUcTBqQjYxQ0lJYUVJUlFqQlNFQlFRQWtCUUpBSUFGQkFYRkZCRUFnRkNBUEtBSUFyVlFFUUNBTUtBSUFJUUVNQkFzZ0RrRUFOZ0pFSUE1QkdEWUNTQ0FPUVVCclFRRTJBZ0FnRGlBQVFSaHFOZ0lBUVFBa0JTTUZJUUZCQUNRRklBRkJBWEVOQVNBQVFheThBMnBCQVRvQUFFRUFKQVZCQ2tHczlRSkJBeEFOSXdVaEFFRUFKQVVnQUVFQmNVVUVRRUVBSVFBTUVBc0xDeEFYSVFBTURnVkNBQ0VVQ3dzQ1FBSkFJQUZCQW5GRkRRQkJBQ1FGUVFNZ0JSQk9yU01IclVJZ2hvUWhGU01GSVFGQkFDUUZJQUZCQVhGRkRRQU1BUXNnQUVHSXZBTnFJaEFwQXdBaEZpQVBLQUlBSVFGQkFDUUZRUXNnQUNBQkVBWWhBU01GSVE1QkFDUUZJQTVCQVhFTkFDQUFRWkM4QTJvaURpQVdJQlY4SUFHdGZEY0RBQUpBQWtBQ1FBSkFBa0FnQ3lnQ0FDSUtRUUZyRGdVQkFnSUFBd1FMSUFCQitLWUJhaUlCSUFJcEFnQTNBZ0FnQVNBQ0tRSUlOd0lJSUFFZ0FpZ0NFRFlDRUVFQUpBVkJBeUFGRUU2dEl3ZXRRaUNHaENFVUl3VWhBVUVBSkFVQ1FDQUJRUUZ4UlFSQUlCU25CRUFnQkVFQU5nSkVJQVJCSURZQ1NDQUVJQUJCR0dvaUFEWUNBQ0FFUVVCclFRSTJBZ0FnQkNBQU5nSUVRUUFrQlNNRklRQkJBQ1FGSUFCQkFYRU5Ba0VBSkFWQkNrR3M5UUpCQVJBTkl3VWhBRUVBSkFVZ0FFRUJjUTBDUVFBaEFBd1RDMEVBSkFWQkF5QUZFRTZ0SXdldFFpQ0doQ0VVSXdVaEFVRUFKQVVDUUNBQlFRRnhSUVJBSUFCQmpLY0JhaUlCSUJTblFRRnhPZ0FBUVFBa0JVRUxJQVVRQlNFQ0l3VWhCRUVBSkFVZ0JFRUJjUTBCSUFCQmtLY0JhaUFDUWY4QmNUWUNBQ0FDUWY4QmNVRVlTZ1JBSUFOQkFEWUNSQ0FEUVNBMkFrZ2dBeUFBUVJocUlnQTJBZ0FnQTBGQWEwRUNOZ0lBSUFNZ0FEWUNCRUVBSkFVakJTRUFRUUFrQlNBQVFRRnhEUUpCQUNRRlFRcEJyUFVDUVFFUURTTUZJUUJCQUNRRklBQkJBWEVOQWtFQUlRQU1GUXRCQUNRRlFSSWdCU0FBUVpTbkFXcEJFQkFIR2lNRklRSkJBQ1FGSUFKQkFYRU5BUUpBSUFFc0FBQUVRRUVBSkFWQkVpQUZJQUJCcEtjQmFpSUNRUWdRQnhvakJTRUVRUUFrQlNBRVFRRnhEUU5CQUNRRlFSSWdCU0FOUVFRUUJ4b2pCU0VFUVFBa0JTQUVRUUZ4QkVBUUZ5RUFCVUVBSkFWQkhpQUhFQXdqQlNFRVFRQWtCUUpBQWtBZ0JFRUJjUTBBUVFBa0JVRUpJQWNnQWtFSUVBNGpCU0VDUVFBa0JTQUNRUUZ4RFFCQkFDUUZRUTBnQnlBREVBMGpCU0VDUVFBa0JTQUNRUUZ4QkVBUUZ5RUFCU0FCSUEwZ0EwRUVFR3RGT2dBQURBVUxEQUVMRUJjaEFBc0xEQmNMQ3lBU1FRRTZBQUFNQndzTEVCY2hBQXdUQ3dzUUZ5RUFEQkVMUVFBa0JVRWJJQUJCdUtZQmFpSURFQXdqQlNFQlFRQWtCU0FCUVFGeERRTWdBeUFDS1FJQU53SUFJQU1nQWlrQ0NEY0NDQ0FESUFJb0FoQTJBaEJCQUNRRlFRTWdCUkJPclNNSHJVSWdob1FoRlNNRklRRkJBQ1FGQWtBZ0FVRUJjVVVFUUNBQVFaMjhBMm9pQkNBVnB5SUNRUUZ4SWdFNkFBQWdBRUdjdkFOcUlBSkJBblpCQVhFNkFBQWdBRUdmdkFOcUlBSkJCSFpCQVhFNkFBQWdBRUdqdkFOcUlBSkJBM1pCQVhFNkFBQWdBRUdndkFOcVFRQTZBQUFnQUVHaXZBTnFRUUU2QUFBZ0FrRUNjUVIvUVFBa0JVRURJQVVRVHEwakI2MUNJSWFFSVJVakJTRUJRUUFrQlNBQlFRRnhEUUlnQkN3QUFDRUJJQlduQlVFQUN5RUNJQUJCd0x3RGFpQUNOZ0lBSUFCQm9id0RhaUFDUlNBQlFmOEJjVUVBUjNFNkFBQWdGRUlBVWdSQVFRQWtCVUVGSUFBZ0JTQVVweUFERUE4akJTRUJRUUFrQlNBQlFRRnhEUUlMSUFCQjFxWUJhaXdBQUVVTkJDQUFRZGltQVdvaUFTa0RBRUlBVVEwRUlBQkJyUE1BYWlnQ0FFR1FnQUZxS0FJQVJRMEVJQkFwQXdBaEZDQU9LUU1BSVJVZ0JpZ0NBQ0VDUVFBa0JVRUtJQUJCMlBNQWFpSURJQUJCQUJBT0l3VWhCRUVBSkFVZ0JFRUJjUTBCSUFFcEF3QWhGa0VBSkFWQkFTQURJQmFuSUJaQ0lJaW5FRThqQlNFQlFRQWtCU0FCUVFGeERRRWdFQ0FVTndNQUlBNGdGVGNEQUNBR0lBSTJBZ0FNQkFzTEVCY2hBQXdRQ3lBQVFiQ25BV29oQVNBQVFmQ3RBbW9oQTBFQUpBVkJDQ0FLUVFKR0JIOGdBUVVnQXlJQkMwRUFFQTBqQlNFRFFRQWtCU0FEUVFGeEJFQVFGeUVBREJBTElBRWdBaWtDQURjQ0FDQUJJQUlwQWdnM0FnZ2dBU0FDS0FJUU5nSVFJQXNvQWdCQkFrWWhDaUFCUWVuQkFHcEJBVG9BQUNBQlFjakFBR29pQWlBVk53TUFRUUFrQlVFRElBVVFUcTBqQjYxQ0lJYUVJUlVqQlNFRFFRQWtCUUpBSUFOQkFYRkZCRUFnQVVHRXdRQnFJZ01nRlQ0Q0FFRUFKQVZCQXlBRkVFNnRJd2V0UWlDR2hDRVZJd1VoQkVFQUpBVWdCRUVCY1EwQklBRkIwTUFBYWlJRUlCVTNBd0FnQVVHS3dRQnFJQU1vQWdCQkNIRWlDMEVEZGpvQUFDQUxCRUFnQkVMLy8vLy85Ly8vLy84QU53TUFRdi8vLy8vMy8vLy8vd0FoRlFzZ0FVSFl3QUJxSUFJcEF3QWlGaUFWVlFSK0lCWUZJQlVMTndNQVFRQWtCVUVESUFVUVRxMGpCNjFDSUlhRUlSVWpCU0VDUVFBa0JTQUNRUUZ4RFFFZ0FVRWNhaUlMSUJVK0FnQWdBeWdDQUNJQ1FRSnhCRUJCQUNRRlFRd2dCUkFGSVFJakJTRUVRUUFrQlNBRVFRRnhEUUpCQUNRRlFRNGdBVUd3d0FCcUlBSVFCaG9qQlNFQ1FRQWtCU0FDUVFGeERRSWdBeWdDQUNFQ0N5QUJRZURBQUdvaUJFRUFOZ0lBSUFKQkJIRUVRQ0FFUVFJMkFnQkJBQ1FGUVF3Z0JSQUZJUUlqQlNFRVFRQWtCU0FFUVFGeERRSWdBVUhrd0FCcUlBSTJBZ0FMSUFGQjhNRUFha0VBTmdJQVFRQWtCVUVESUFVUVRxMGpCNjFDSUlhRUlSVWpCU0VDUVFBa0JRSkFJQUpCQVhGRkJFQWdBU0FWcHlJRVFRZDJRUWR4T2dBYUlBRkJHV29pQmlBRVFUOXhRVEpxT2dBQVFRQWtCVUVESUFVUVRxMGpCNjFDSUlhRUlSVWpCU0VDUVFBa0JTQUNRUUZ4RFFFZ0FVRVlhaUlJSUJVOEFBQkJBQ1FGUVFNZ0JSQk9yU01IclVJZ2hvUWhGU01GSVFKQkFDUUZJQUpCQVhFRVFCQVhJUUFNRkFzZ0ZhY2hBaUFCUWVqQkFHb2dEQ2dDQUVFR2RrRUJjVG9BQUNBQlFlekJBR29pREVFQ05nSUFBa0FDUUFKQUFrQUNRQ0FJTEFBQURnSUJBQUlMUVFFaENBd0NDMEVBSVFnTUFRc01BUXNnRENBSU5nSUFDeUFCUVlqQkFHb2dBU2dDQ0NJSVFRTjJRUUZ4T2dBQUlBRkJpY0VBYWlBSVFRUjJRUUZ4T2dBQUlBRkI2c0VBYWlBSVFRVjJRUUZ4T2dBQUlBRkI0TUVBYWlBS0lBUkJ3QUJ4UVFCSGNUb0FBQ0FCUWVIQkFHb2lDQ0FES0FJQVFRRnhJZ002QUFCQmdJQUlJQVJCQ25aQkQzRjBJUVFnQVVIa3dRQnFJQU1FZjBFQUJTQUVDellDQUNBQlFZekJBR29nQVVHTHdRQnFMQUFBQkg5QkJRVkJBQXMyQWdCQkFDUUZRUklnQlNBTklBSkIvejlKQkg4Z0FnVkIvejhpQWdzUUJ4b2pCU0VEUVFBa0JRSkFJQU5CQVhGRkJFQWdEU0FDYWtFQU9nQUFRUUFrQlVFVklBMGdBVUVnYWlJQ1FZQVFFQWNhSXdVaEEwRUFKQVVnQTBFQmNRMEJJQlJDQUZJRVFFRUFKQVZCQlNBQUlBVWdGS2NnQVJBUEl3VWhBVUVBSkFVZ0FVRUJjUTBDQ3dKQUlBb0VRQ0FBUWF6ekFHb2lBeWdDQUVHTWhRTnFLQUlBSWdGQkFVWUVRRUVBSkFWQkRTQUNFQVVhSXdVaEFVRUFKQVVnQVVFQmNRMEVJQU1vQWdCQmpJVURhaWdDQUNFQkN5QUJRUUpHQkVCQkFDUUZRUTRnQWhBRkdpTUZJUUZCQUNRRklBRkJBWEVOQkFzQ1FDQUFRWmk4QTJvaUJDZ0NBRUVDUmdSQUlBWXRBQUJCRkU0TkFTQUxLQUlBUVJCeFJRMEJJQWhCQVRvQUFBc0xJQXdvQWdBaUFVRUNSZ1JBSUFzZ0NDd0FBQVIvUVJBRlFTQUxOZ0lBUVFJaEFRc2dBaUVEQTBBQ1FBSkFBa0FDUUFKQUFrQWdBeWdDQUE1ZEFBTURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TUNBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TUJBd3NNQndzZ0JDZ0NBRUVEUncwQ0lBRU5BeUFEUWQ4QU5nSUFRUUFoQVF3REN3d0JDd3dCQ3lBRFFTODJBZ0FMSUFOQkJHb2hBd3dBQ3dBRlFRQWtCVUVHSUFKQmpBNFFCaUVCSXdVaEEwRUFKQVVnQTBFQmNRMERJQUVOQVNBQVFaNjhBMnBCQVRvQUFBc0xJQkVFUUNBSFFRQTJBa1FnQjBFYU5nSklJQWNnQUVFWWFqWUNBQ0FIUVVCclFRSTJBZ0FnQnlBQ05nSUVRUUFrQlNNRklRRkJBQ1FGSUFGQkFYRU5BZ3NNQndzTEVCY2hBQXdUQ3dzUUZ5RUFEQkVMQ3hBWElRQU1Ed3NnQUVHd3JRSnFJZ0VnQWlrQ0FEY0NBQ0FCSUFJcEFnZzNBZ2dnQVNBQ0tBSVFOZ0lRUVFBa0JVRURJQVVRVHEwakI2MUNJSWFFSVJRakJTRUJRUUFrQlNBQlFRRnhCRUFRRnlFQURBOEZJQUJCekswQ2FpQVVwMEVCY1RvQUFDQUFRYyt0QW1wQkFEb0FBQ0FBUWMydEFtcEJBRG9BQUNBQVFjNnRBbXBCQURvQUFBc0xJQTRwQXdBZ0VDa0RBRlVFUUNBSktBSUFJUUFNRFFzZ0RVRUFOZ0pFSUExQkdEWUNTQ0FOUVVCclFRRTJBZ0FnRFNBQVFSaHFOZ0lBUVFBa0JTTUZJUUZCQUNRRklBRkJBWEVOQUNBQVFheThBMnBCQVRvQUFFRUFKQVZCQ2tHczlRSkJBeEFOSXdVaEFFRUFKQVVnQUVFQmNVVUVRRUVBSVFBTURRc0xFQmNoQUF3TUN3c0xFQmNoQUF3SkN3c0xFQmNoQUF3R0N3c1FGeUVBREFRTEN3c1FGeUVBREFFTElBVW9BZ0FpQVVVRVFDQUhKQVFnQUE4TElBRVFVaUFISkFRZ0FBOExJQVVvQWdBaUFVVUVRQ0FBRUI0TElBRVFVaUFBRUI1QkFBdmRRd0liZndKK0l3UWhBU01FUWJEREFHb2tCQ0FCSWhCQnFBTnFJUTBnRUVIWUFtb2hDeUFRUVl3Q2FpRU9JQkJCd0FGcUlRSWdFRUgwQUdvaEFTQVFRU2hxSVFNZ0VFRUlhaUlFSUFBUXVBRUNRQUpBQWtBQ1FDQUFRYVM4QTJvaUNDd0FBRVVOQUNBQVFZaThBMm9pQlNrREFDQUFRYWk4QTJvb0FnQ3RRZ2Q4VncwQVFRQWtCVUVjSUFBUURDTUZJUVpCQUNRRklBWkJBWEVOQVNBQUtBSUFLQUlNSVFaQkFDUUZJQVlnQUNBTlFRZ1FCeUVHSXdVaEIwRUFKQVVDUUNBSFFRRnhSUVJBSUFaQkNFWUVRQ0FBUWF6ekFHb29BZ0JCcU1BQ2FpRURRUUFrQlVFQklBQkJuTUFBYWlJRlFRQkJCQ0FESUExQkFFRUFRUUJCQUJBS0dpTUZJUU5CQUNRRklBTkJBWEVOQWlBRUlBVTJBaHhCQVNFV0RBTUxRUUFrQlVFRklBQVFUcTBqQjYxQ0lJYUVJUndqQlNFQlFRQWtCU0FCUVFGeFJRUkFBa0FDUUNBRktRTUFJQnhTRFFBZ0FFR1F2QU5xS1FNQUlCeFNEUUFNQVFzZ0EwRUFOZ0pFSUFOQk56WUNTQ0FEUVVCclFRRTJBZ0FnQXlBQVFSaHFOZ0lBUVFBa0JTTUZJUUJCQUNRRklBQkJBWEVOQTBFQUpBVkJDa0dzOVFKQkFSQU5Jd1VoQUVFQUpBVWdBRUVCY1EwREMwRUFJUUFNQlFzTEN4QVhJUUFNQXd0QkFDUUZRUW9nQkVFSEVBWWFJd1VoQTBFQUpBVWdBMEVCY1EwQUlBUkJGR29pRnlnQ0FFVUVRRUVBSkFWQkJTQUFFRTZ0SXdldFFpQ0doQ0VjSXdVaEFrRUFKQVVnQWtFQmNRMEJJQUJCaUx3RGFpa0RBQ0FjVVFSQUlBQkJrTHdEYWlrREFDQWNVUVJBUVFBaEFBd0VDd3NnQVVFQU5nSkVJQUZCTnpZQ1NDQUJRVUJyUVFFMkFnQWdBU0FBUVJocU5nSUFRUUFrQlNNRklRQkJBQ1FGSUFCQkFYRU5BVUVBSkFWQkNrR3M5UUpCQVJBTkl3VWhBRUVBSkFVZ0FFRUJjUTBCUVFBaEFBd0NDMEVBSkFWQkNpQUVFQVVoQVNNRklRTkJBQ1FGSUFOQkFYRU5BQ0FBUVppbUFXb2lCeUFCUWYvL0EzRTJBZ0FnQUVHb3BnRnFJZ1pCQURvQUFFRUFKQVZCQ3lBRUVBVWhBeU1GSVFGQkFDUUZBa0FnQVVFQmNVVUVRQ0FEUWY4QmNTRUJRUUFrQlVFS0lBUVFCU0VLSXdVaEJVRUFKQVVnQlVFQmNVVUVRQ0FBUWFDbUFXb2lCU0FLUWYvL0EzRWlDallDQUNBR0lBcEJEblpCQVhFNkFBQkJBQ1FGUVFvZ0JCQUZJUVlqQlNFS1FRQWtCU0FLUVFGeFJRUkFJQUJCcEtZQmFpSUtJQVpCLy84RGNTSUpOZ0lBSUFCQm5LWUJhaUlVSUFFMkFnQWdCa0gvL3dOeFFRZElCRUFnQWtFQU5nSkVJQUpCR0RZQ1NDQUNRVUJyUVFFMkFnQWdBaUFBUVJocU5nSUFRUUFrQlNNRklRRkJBQ1FGSUFGQkFYRU5CQ0FBUWF5OEEycEJBVG9BQUVFQUpBVkJDa0dzOVFKQkF4QU5Jd1VoQUVFQUpBVWdBRUVCY1EwRVFRQWhBQXdHQ3dKQUFrQUNRQUpBQWtBQ1FBSkFJQU5CR0hSQkdIVkI4d0JyRGdrQUFRUUVCQVFFQWdNRUMwRUJJUUVNQkF0QkFpRUJEQU1MUVFNaEFRd0NDMEVGSVFFTUFRc01BUXNnRkNBQk5nSUFDeUFBUWN6ekFHb2dBVFlDQUFKQUFrQUNRQUpBSUFGQkFXc09kUUVDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBQUlMUVFBa0JVRUtJQVJCQmhBR0dnd0NDeUFGS0FJQVFRSnhSUTBBUVFBa0JVRUtJQVJCQmhBR0dnd0JDMEVBSkFWQkNpQUVJQWxCZVdvUUJob0xJd1VoQVVFQUpBVWdBVUVCY1EwRElBQkJpTHdEYWlJWUtRTUFJUndnQ2lnQ0FDRUJRUUFrQlVFTElBQWdBUkFHSVFFakJTRUNRUUFrQlNBQ1FRRnhSUVJBSUFCQmtMd0RhaUlLSUJ3Z0FhMThOd01BQWtBQ1FBSkFBa0FDUUFKQUFrQUNRQUpBQWtBZ0ZDZ0NBQ0lCUVFGckRua0FBUUVJQWdnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBTUZCd1lFQ0F0QkFDUUZRUnNnQUVHNHBnRnFJZ0VRRENNRklRSkJBQ1FGSUFKQkFYRU5EU0FCSUFjcEFnQTNBZ0FnQVNBSEtRSUlOd0lJSUFFZ0J5Z0NFRFlDRUVFQUpBVkJDaUFFRUFVaEFTTUZJUUpCQUNRRklBSkJBWEVORFNBQVFjeW1BV29pQXlBQk93RUFRUUFrQlVFTUlBUVFCU0VDSXdVaEFVRUFKQVVnQVVFQmNRME5JQUJCMEtZQmFpQUNOZ0lBSUFCQm5id0RhaUFBUWNDbUFXb29BZ0FpQVVFQmNUb0FBQ0FBUVp5OEEyb2dBVUVEZGtFQmNUb0FBQ0FBUVorOEEyb2dBVUVDZGtFQmNUb0FBQ0FBUWFPOEEyb2dBVUVHZGtFQmNUb0FBQ0FJSUFGQkIzWkJBWEU2QUFBZ0FFR2d2QU5xSUFJRWYwRUJCU0FETGdFQVFRQkhDMEVCY1RvQUFDQUFRZFNtQVdvZ0FVRUJka0VCY1RvQUFDQUFRYUc4QTJvZ0FVRUlka0VCY1RvQUFDQUFRYUs4QTJvZ0FVRUVka0VCY1RvQUFBd0lDeUFBUWJDbkFXb2hBeUFBUWZDdEFtb2hBa0VBSkFWQkNDQUJRUUpHSWc4RWZ5QURCU0FDSWdNTFFRQVFEU01GSVFGQkFDUUZJQUZCQVhGRkJFQWdBeUFIS1FJQU53SUFJQU1nQnlrQ0NEY0NDQ0FESUFjb0FoQTJBaEFnQTBHSXdRQnFJQU5CQ0dvaUNTZ0NBQ0lCUVFGeE9nQUFJQU5CaWNFQWFpQUJRUUYyUVFGeE9nQUFJQU5CaThFQWFpSUdJQUZCQW5aQkFYRTZBQUFnQTBHUXdRQnFJQUZCQ25aQkFYRTZBQUFnQTBIZ3dRQnFJQThFZjBFQUlRVWdBVUVFZGtFQmNRVWdBVUVRY1VFQVJ5RUZRUUFMT2dBQUlBTkI2c0VBYWlBRlFRRnhPZ0FBSUFOQjRjRUFhaUlNSUFGQjRBRnhRZUFCUmlJQ09nQUFJQU5CNU1FQWFpQUNCSDlCQUFWQmdJQUVJQUZCQlhaQkIzRjBDellDQUNBRFFlTEJBR29pR1NBQlFRTjJRUUZ4T2dBQUlBTkI0OEVBYWlBQlFRdDJRUUZ4T2dBQVFRQWtCVUVNSUFRUUJTRUJJd1VoQWtFQUpBVWdBa0VCY1VVRVFDQURRUlJxSWhvZ0FUWUNBRUVBSkFWQkRDQUVFQVVoQWlNRklRRkJBQ1FGQWtBZ0FVRUJjVVVFUUVFQUpBVkJDeUFFRUFVaEFTTUZJUVZCQUNRRklBVkJBWEZGQkVBZ0EwRVlhaUlJSUFFNkFBQWdBMEhnd0FCcVFRSTJBZ0JCQUNRRlFRd2dCQkFGSVFFakJTRUZRUUFrQlNBRlFRRnhEUUlnQTBIa3dBQnFJQUUyQWdCQkFDUUZRUXdnQkJBRklSc2pCU0VCUVFBa0JRSkFJQUZCQVhGRkJFQkJBQ1FGUVFzZ0JCQUZJUUVqQlNFRlFRQWtCU0FGUVFGeERRRWdBMEVaYWlJUklBRTZBQUJCQUNRRlFRc2dCQkFGSVFFakJTRUZRUUFrQlNBRlFRRnhEUUVnQXlBQlFmOEJjVUhRQVdvNkFCcEJBQ1FGUVFvZ0JCQUZJUklqQlNFQlFRQWtCUUpBSUFGQkFYRkZCRUJCQUNRRlFRd2dCQkFGSVFVakJTRUJRUUFrQlNBQlFRRnhEUUVnQTBFY2FpSVRJQVUyQWdBZ0EwR013UUJxSWhWQkFEWUNBQ0FHTEFBQUJFQWdGUUovQWtBQ1FBSkFBa0FnRVN3QUFFRU5hdzRPQUFNQkF3TURBd0lEQXdNREF3SURDMEVCREFNTFFRSU1BZ3RCQXd3QkMwRUVDellDQUFzZ0VrSC8vd054SVFFZ0EwSHN3UUJxSWhKQkFqWUNBQUpBQWtBQ1FBSkFJQWdzQUFBaUJrRURhdzREQUFFQUFRdEJBU0VJREFFTElBWkIvd0Z4UVFaSUJFQkJBQ0VJREFFTElBTkI4TUVBYWtFQU5nSUFEQUVMSUJJZ0NEWUNBQ0FEUWZEQkFHb2lDRUVBTmdJQUlBWkJBMFlnQlVHQTRBTnhRWURBQWtaeFJRMEFJQWhCQVRZQ0FDQURRZlRCQUdwQkFEWUNBQXNnQTBIb3dRQnFJQVZCQUVnZ0QwRUJjM0U2QUFBZ0EwSHB3UUJxSUFrb0FnQkJnQUp4SWdWQkNIWTZBQUFDUUNBRkJFQkJBQ1FGUVF3Z0JCQUZJUVVqQlNFR1FRQWtCUUpBSUFaQkFYRkZCRUJCQUNRRlFRd2dCQkFGSVFZakJTRUlRUUFrQlNBSVFRRnhEUUVnQmlBQ2NTRUlEQU1MQ3hBWElRQU1HZ1ZCQUNFRlFRQWhCaUFDSVFnTEN5QURRWXJCQUdvZ0NFRi9SaUlJT2dBQUlBTkJ5TUFBYWlJVklBV3RRaUNHSUJvb0FnQ3RoRGNEQUNBR3JVSWdoaUFDcllRaEhDQURRZERBQUdvZ0NBUitRdi8vLy8vMy8vLy8vd0FGSUJ3TE53TUFRUUFrQlVFU0lBUWdEU0FCUWY4L1NRUi9JQUVGUWY4L0N5SUNFQWNhSXdVaEJVRUFKQVVDZndKQUlBVkJBWEVOQUNBTklBSnFRUUE2QUFBQ1FDQVBCRUFDUUFKQUlBa29BZ0JCZ0FSeEJFQkJBQ1FGUVIwZ0N4QU1Jd1VoQWtFQUpBVUNRQ0FDUVFGeFJRUkFJQTBRYmtFQmFpRUNRUUFrQlVFRUlBc2dEU0FOSUFKcUlBRWdBbXNnQTBFZ2FpSUJRWUFRRUJFakJTRUNRUUFrQlNBQ1FRRnhEUUVnQVNnQ0FFVU5Bd3dFQ3dzUUZ3d0dCU0FEUVNCcUlnRkJBRFlDQUFzTFFRQWtCVUVFSUEwZ0FVR0FFRUVCRUE4akJTRUNRUUFrQlNBQ1FRRnhEUU1MSUFCQnJQTUFhaUlGS0FJQVFZeUZBMm9vQWdBaUFrRUJSZ1JBUVFBa0JVRU5JQUVRQlJvakJTRUNRUUFrQlNBQ1FRRnhEUU1nQlNnQ0FFR01oUU5xS0FJQUlRSUxJQUpCQWtZRVFFRUFKQVZCRGlBQkVBVWFJd1VoQWtFQUpBVWdBa0VCY1EwREN3SkFJQUJCbUx3RGFpSUdLQUlBUVFKR0JFQWdFUzBBQUVFVVRnMEJJQk1vQWdCQkVIRkZEUUVnREVFQk9nQUFDd3NnRWlnQ0FDSUZRUUpHQkg4Z0V5QU1MQUFBQkg5QkVBVkJJQXMyQWdBZ0FTRUNRUUlGSUFFaEFpQUZDeUVCQTBBQ1FBSkFBa0FDUUFKQUFrQWdBaWdDQUE1ZEFBTURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TUNBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TURBd01EQXdNREF3TUJBd3NNQndzZ0JpZ0NBRUVEUncwQ0lBRU5BeUFDUWQ4QU5nSUFRUUFoQVF3REN3d0JDd3dCQ3lBQ1FTODJBZ0FMSUFKQkJHb2hBZ3dBQ3dBRlFRQWtCVUVSSUEwZ0EwRWdhaUlJUVlBUUVBY2FJd1VoQWtFQUpBVWdBa0VCY1EwQ0FrQUNRQ0FES0FJTUlBRnJRVmhxSUFrb0FnQkJCM1pCQ0hGQkNITnFJZ0pCQUV3TkFDQURRYURBQUdvaEJpQURRYWpBQUdvaUR5Z0NBQ0VGSUFOQnBNQUFhaUlNSUFJMkFnQWdCU0FDU1FSQUlBTkJyTUFBYWlnQ0FDSUJRUUJISUFJZ0FVdHhCSDlCQUNRRklCQWdBVFlDQUVFQ1FhejFBa0hZR3lBUUVBNGpCU0VCUVFBa0JTQUJRUUZ4RFFOQkFDUUZRUlJCclBVQ0VBd2pCU0VCUVFBa0JTQUJRUUZ4RFFNZ0R5Z0NBQ0VGSUF3b0FnQUZJQUlMSVFFZ0JpZ0NBQ0FCSUFWQklHb2dCVUVDZG1vaUJVc0VmeUFCQlNBRklnRUxFRmNpQlVVRVFFRUFKQVZCRkVHczlRSVFEQ01GSVF4QkFDUUZJQXhCQVhFTkF3c2dCaUFGTmdJQUlBOGdBVFlDQUFzZ0JpZ0NBQ0VCUVFBa0JVRVNJQVFnQVNBQ0VBY2FJd1VoQVVFQUpBVWdBVUVCY1EwQlFRQWtCVUVHSUFoQnJBNFFCaUVCSXdVaEFrRUFKQVVnQWtFQmNRMEJJQUVOQUNBQVFiRHpBR29pQWlBR0tBSUFJZ0V0QUFsQkNIUWdBUzBBQ0hJZ0FTMEFDa0VRZEhJZ0FTMEFDMEVZZEhLdFFnbUdOd01BSUFBb0FnQW9BaFFoQVVFQUpBVWdBU0FBRUU2dEl3ZXRRaUNHaENFY0l3VWhBVUVBSkFVZ0FVRUJjUTBCSUFJcEF3QWhIVUVBSkFWQkFTQWRweUFkUWlDSXB5QWNweUFjUWlDSXB4Qk5JUVVqQlNFQlFRQWtCU0FCUVFGeERRRWdBRUc0OHdCcUlnRWdCVFlDQUNBQ0tRTUFJQnhDeUFGL2ZDRWRRUUFrQlVFQklCMm5JQjFDSUlpbklCeW5JQnhDSUlpbkVFMGhBaU1GSVFWQkFDUUZJQVZCQVhFTkFTQUNJQUVvQWdBaUFrd05BQ0FCSUFKQkFXbzJBZ0FMUVFBa0JVRUdJQWhCakE0UUJpRUJJd1VoQWtFQUpBVWdBa0VCY1EwQUlBRU5BaUFBUVo2OEEycEJBVG9BQUF3Q0N4QVhEQU1MQUFzZ0NTZ0NBRUdBQ0hFRVFFRUFKQVZCRWlBRUlBTkJrY0VBYWtFSUVBY2FJd1VoQVVFQUpBVWdBVUVCY1EwQkMwRUFKQVZCQ1NBRFFiREFBR29nR3hBTkl3VWhBVUVBSkFVZ0FVRUJjUTBBQWtBZ0NTZ0NBRUdBSUhFRVFFRUFKQVZCQ2lBRUVBVWhBU01GSVFKQkFDUUZJQUpCQVhFRVFCQVhEQVFMSUFCQjRPY0JhaUVKSUFCQjZPY0JhaUVHSUFCQjhPY0JhaUVJSUF0QkdHb2hBaUFMUVJScUlRVUNRQ0FCUWYvL0EzRWlEMEVNZGlJQlFRaHhCRUJCQUNRRlFRc2dDU0FMRUEwakJTRU1RUUFrQlNBTVFRRnhEUUVnQVVFRWNRUkFJQVVnQlNnQ0FFRUJhallDQUFzZ0FrRUFOZ0lBSUFGQkEzRWlEQVJBSUF4QkEzTWhFVUVBSVFFRFFFRUFKQVZCQ3lBRUVBVWhFeU1GSVJKQkFDUUZJQkpCQVhFTkF5QUNJQUlvQWdBZ0UwSC9BWEVnRVNBQmFrRURkSFJ5TmdJQUlBRkJBV29pQVNBTVNBMEFDd3RCQUNRRlFRd2dDU0FMRUEwakJTRUJRUUFrQlNBQlFRRnhEUUVMQWtBZ0QwRUlkaUlCUVFoeEJFQkJBQ1FGUVF3Z0JCQUZJUWtqQlNFTVFRQWtCU0FNUVFGeERRRkJBQ1FGUVFrZ0JpQUpFQTBqQlNFSlFRQWtCU0FKUVFGeERRRkJBQ1FGUVFzZ0JpQUxFQTBqQlNFSlFRQWtCU0FKUVFGeERRSWdBVUVFY1FSQUlBVWdCU2dDQUVFQmFqWUNBQXNnQWtFQU5nSUFJQUZCQTNFaUNRUkFJQWxCQTNNaERFRUFJUUVEUUVFQUpBVkJDeUFFRUFVaEVTTUZJUk5CQUNRRklCTkJBWEVOQkNBQ0lBSW9BZ0FnRVVIL0FYRWdEQ0FCYWtFRGRIUnlOZ0lBSUFGQkFXb2lBU0FKU0EwQUN3dEJBQ1FGUVF3Z0JpQUxFQTBqQlNFQlFRQWtCU0FCUVFGeERRSUxJQTlCQkhZaUFVRUljVVVOQTBFQUpBVkJEQ0FFRUFVaEJpTUZJUWxCQUNRRklBbEJBWEVOQUVFQUpBVkJDU0FJSUFZUURTTUZJUVpCQUNRRklBWkJBWEVOQUVFQUpBVkJDeUFJSUFzUURTTUZJUVpCQUNRRklBWkJBWEVOQVNBQlFRUnhCRUFnQlNBRktBSUFRUUZxTmdJQUN5QUNRUUEyQWdBZ0FVRURjU0lGQkVBZ0JVRURjeUVHUVFBaEFRTkFRUUFrQlVFTElBUVFCU0VKSXdVaEQwRUFKQVVnRDBFQmNRMERJQUlnQWlnQ0FDQUpRZjhCY1NBR0lBRnFRUU4wZEhJMkFnQWdBVUVCYWlJQklBVklEUUFMQzBFQUpBVkJEQ0FJSUFzUURTTUZJUUZCQUNRRklBRkJBWEVOQVF3REN4QVhEQVFMRUJjTUF3c0xJQW9nQ2lrREFDQVZLUU1BZkRjREFDQVpMQUFBUVFCSElRRkJBQ1FGUVF3Z0JDQUJFQVloQVNNRklRSkJBQ1FGQWtBZ0FrRUJjVVVFUUNBREtBSUFJQUZCLy84RGNVY0VRQ0FBUWF5OEEycEJBVG9BQUVFQUpBVkJDa0dzOVFKQkFSQU5Jd1VoQVVFQUpBVWdBVUVCY1EwQ0lCWU5GU0FPUVFBMkFrUWdEa0VhTmdKSUlBNGdBRUVZYWpZQ0FDQU9RVUJyUVFJMkFnQWdEaUFEUVNCcU5nSUVRUUFrQlNNRklRRkJBQ1FGSUFGQkFYRU5BZ3NNRkFzTEVCY01BUXNRRndzaEFBd1lDd3NRRnlFQURCWUxDeEFYSVFBTUZBc0xDeEFYSVFBTUVRc0xFQmNoQUF3UEN5QUFRYkN0QW1vaUFTQUhLUUlBTndJQUlBRWdCeWtDQ0RjQ0NDQUJJQWNvQWhBMkFoQWdBRUhNclFKcUlBQkJ1SzBDYWlnQ0FDSUJRUUZ4T2dBQUlBQkJ6YTBDYWlBQlFRRjJRUUZ4SWdJNkFBQWdBRUhPclFKcUlBRkJBblpCQVhFNkFBQWdBRUhQclFKcUlnTWdBVUVEZGtFQmNTSUJPZ0FBSUFKQi93RnhCRUJCQUNRRlFRd2dCQkFGSVFFakJTRUNRUUFrQlNBQ1FRRnhEUXdnQUVIRXJRSnFJQUUyQWdBZ0F5d0FBQ0VCQ3lBQlFmOEJjUVJBUVFBa0JVRUtJQVFRQlNFQkl3VWhBa0VBSkFVZ0FrRUJjUTBNSUFCQnlLMENhaUFCUWYvL0EzRWlBVFlDQUNBQVFjQzhBMm9nQVRZQ0FBc01CZ3NnQUVId3N3TnFJZ0VnQnlrQ0FEY0NBQ0FCSUFjcEFnZzNBZ2dnQVNBSEtBSVFOZ0lRUVFBa0JVRUtJQVFRQlNFQkl3VWhBa0VBSkFVZ0FrRUJjUTBLSUFCQmhMUURhaUFCT3dFQVFRQWtCVUVMSUFRUUJTRUJJd1VoQWtFQUpBVWdBa0VCY1EwS0lBQkJoclFEYWlBQk9nQUFRUUFrQlVFTElBUVFCU0VCSXdVaEFrRUFKQVVnQWtFQmNRMEtJQUJCaDdRRGFpQUJPZ0FBUVFBa0JVRUtJQVFRQlNFQkl3VWhBa0VBSkFVZ0FrRUJjUTBLSUFCQmlMUURhaUFCT3dFQURBVUxJQUJCMExRRGFpSUJJQWNwQWdBM0FnQWdBU0FIS1FJSU53SUlJQUVnQnlnQ0VEWUNFRUVBSkFWQkRDQUVFQVVoQVNNRklRSkJBQ1FGSUFKQkFYRU5DU0FBUWVTMEEyb2dBVFlDQUVFQUpBVkJDaUFFRUFVaEFTTUZJUUpCQUNRRklBSkJBWEVOQ1NBQVFlaTBBMm9nQVRzQkFFRUFKQVZCQ2lBRUVBVWhBU01GSVFKQkFDUUZJQUpCQVhFTkNTQUFRZXEwQTJvZ0FUc0JBQXdFQ3lBQVFiUzBBMm9pQVNBSEtRSUFOd0lBSUFFZ0J5a0NDRGNDQ0NBQklBY29BaEEyQWhCQkFDUUZRUXNnQkJBRklRRWpCU0VDUVFBa0JTQUNRUUZ4RFFnZ0FFSEl0QU5xSUFFNkFBQkJBQ1FGUVFzZ0JCQUZJUUVqQlNFQ1FRQWtCU0FDUVFGeERRZ2dBRUhKdEFOcUlBRTZBQUJCQUNRRlFRc2dCQkFGSVFFakJTRUNRUUFrQlNBQ1FRRnhEUWdnQUVIS3RBTnFJQUU2QUFCQkFDUUZRUXdnQkJBRklRRWpCU0VDUVFBa0JTQUNRUUZ4RFFnZ0FFSE10QU5xSUFFMkFnQU1Bd3NnQUVHTXRBTnFJZ0VnQnlrQ0FEY0NBQ0FCSUFjcEFnZzNBZ2dnQVNBSEtBSVFOZ0lRUVFBa0JVRU1JQVFRQlNFQkl3VWhBa0VBSkFVZ0FrRUJjUTBISUFCQm9MUURhaUlDSUFFMkFnQkJBQ1FGUVFzZ0JCQUZJUUVqQlNFRFFRQWtCU0FEUVFGeERRY2dBRUdrdEFOcUlBRTZBQUJCQUNRRlFRb2dCQkFGSVFFakJTRURRUUFrQlNBRFFRRnhEUWNnQUVHbXRBTnFJZ01nQVRzQkFFRUFKQVZCRENBRUVBVWhBU01GSVFWQkFDUUZJQVZCQVhFTkJ5QUFRYWkwQTJvZ0FUWUNBRUVBSkFWQkVpQUVJQUJCckxRRGFrRUlFQWNhSXdVaEFVRUFKQVVnQVVFQmNRMEhJQW9nQ2lrREFDQUNLQUlBclh3M0F3QWdBRUd3OHdCcUlBTXZBUUJCQ1hTdE53TUFEQUlMSUFCQjBLMENhaUlCSUFjcEFnQTNBZ0FnQVNBSEtRSUlOd0lJSUFFZ0J5Z0NFRFlDRUVFQUpBVkJEQ0FFRUFVaEFpTUZJUU5CQUNRRklBTkJBWEVOQmlBQVFlU3RBbW9nQWpZQ0FDQUtJQW9wQXdBZ0FxMThOd01BUVFBa0JVRUtJQVFRQlNFQ0l3VWhBMEVBSkFVZ0EwRUJjUTBHSUFCQjZLMENhaUlESUFJN0FRQkJBQ1FGUVFzZ0JCQUZJUUlqQlNFRlFRQWtCU0FGUVFGeERRWWdBRUhxclFKcUlBSTZBQUFDUUFKQUFrQUNRQUpBSUFNdUFRQkJnQUpyRGdZQ0FBRUNBZ01FQ3lBQVFleTBBMm9pQWlBQktRSUFOd0lBSUFJZ0FTa0NDRGNDQ0NBQ0lBRXBBaEEzQWhBZ0FpQUJMZ0VZT3dFWUlBSWdBU3dBR2pvQUdrRUFKQVZCQ2lBRUVBVWhBU01GSVFKQkFDUUZJQUpCQVhFTkNpQUFRWWkxQTJvaUFpQUJPd0VBUVFBa0JVRUtJQVFRQlNFRkl3VWhBVUVBSkFVZ0FVRUJjUTBLSUFCQmlyVURhaUlESUFVN0FRQWdBaTRCQUNJQlFmLy9BM0ZCL3dGS0JFQWdBa0gvQVRzQkFFSC9BU0VCQ3lBRlFmLy9BM0ZCL3dGS0JFQWdBMEgvQVRzQkFBdEJBQ1FGUVJJZ0JDQUFRWXkxQTJvZ0FVSC8vd054RUFjYUl3VWhBVUVBSkFVZ0FVRUJjUTBLSUFNdkFRQWhBVUVBSkFWQkVpQUVJQUJCakxjRGFpQUJFQWNhSXdVaEFVRUFKQVVnQVVFQmNRMEtJQUJCakxVRGFpQUNMd0VBYWtFQU9nQUFJQUJCakxjRGFpQURMd0VBYWtFQU9nQUFEQVVMSUFCQmpMa0RhaUlDSUFFcEFnQTNBZ0FnQWlBQktRSUlOd0lJSUFJZ0FTa0NFRGNDRUNBQ0lBRXVBUmc3QVJnZ0FpQUJMQUFhT2dBYVFRQWtCVUVNSUFRUUJTRUJJd1VoQWtFQUpBVWdBa0VCY1EwSklBQkJxTGtEYWlBQk5nSUFRUUFrQlVFTUlBUVFCU0VCSXdVaEFrRUFKQVVnQWtFQmNRMEpJQUJCckxrRGFpQUJOZ0lBREFRTElBQkJzTGtEYWlJQ0lBRXBBZ0EzQWdBZ0FpQUJLUUlJTndJSUlBSWdBU2tDRURjQ0VDQUNJQUV1QVJnN0FSZ2dBaUFCTEFBYU9nQWFRUUFrQlVFTUlBUVFCU0VCSXdVaEFrRUFKQVVnQWtFQmNRMElJQUJCekxrRGFpQUJOZ0lBUVFBa0JVRUxJQVFRQlNFQkl3VWhBa0VBSkFVZ0FrRUJjUTBJSUFCQjBMa0RhaUFCT2dBQVFRQWtCVUVMSUFRUUJTRUJJd1VoQWtFQUpBVWdBa0VCY1EwSUlBQkIwYmtEYWlBQk9nQUFRUUFrQlVFTUlBUVFCU0VCSXdVaEFrRUFKQVVnQWtFQmNRMElJQUJCMUxrRGFpQUJOZ0lBREFNTElBQkIyTGtEYWlJQ0lBRXBBZ0EzQWdBZ0FpQUJLUUlJTndJSUlBSWdBU2tDRURjQ0VDQUNJQUV1QVJnN0FSZ2dBaUFCTEFBYU9nQWFRUUFrQlVFTUlBUVFCU0VCSXdVaEFrRUFKQVVnQWtFQmNRMEhJQUJCOUxrRGFpQUJOZ0lBUVFBa0JVRUxJQVFRQlNFQkl3VWhBa0VBSkFVZ0FrRUJjUTBISUFCQitMa0RhaUFCT2dBQVFRQWtCVUVMSUFRUUJTRUJJd1VoQWtFQUpBVWdBa0VCY1EwSElBQkIrYmtEYWlBQk9nQUFRUUFrQlVFTUlBUVFCU0VCSXdVaEFrRUFKQVVnQWtFQmNRMEhJQUJCL0xrRGFpQUJOZ0lBUVFBa0JVRUtJQVFRQlNFQkl3VWhBa0VBSkFVZ0FrRUJjUTBISUFCQmdMb0RhaUlDSUFGQi8vOERjVUdEQWtnRWZ5QUJCVUdEQWlJQkN6c0JBRUVBSkFWQkVpQUVJQUJCZ3JvRGFpQUJRZi8vQTNFUUJ4b2pCU0VCUVFBa0JTQUJRUUZ4RFFjZ0FFR0N1Z05xSUFJdkFRQnFRUUE2QUFBTUFnc01BUXNnQlNnQ0FFR0FnQUp4QkVCQkFDUUZRUXdnQkJBRklRRWpCU0VDUVFBa0JTQUNRUUZ4RFFZZ0NpQUtLUU1BSUFHdGZEY0RBQXNMUVFBa0JVRU1JQVJCQUJBR0lRRWpCU0VDUVFBa0JTQUNRUUZ4UlFSQUFrQWdCeWdDQUNBQlFmLy9BM0ZIQkVBQ1FBSkFBa0FnRkNnQ0FFRUZhdzUxQVFJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUFBZ0lBQWdzTUF3c2dBRUhPclFKcUxBQUFCRUFnQUNnQ0FDZ0NGQ0VCUVFBa0JTQUJJQUFRVHEwakI2MUNJSWFFSVJ3akJTRUJRUUFrQlNBQlFRRnhCRUFRRnlFQURBMExJQUFvQWdBb0FoUWhBVUVBSkFVZ0FTQUFFRTZ0SXdldFFpQ0doQ0VkSXdVaEFVRUFKQVVDUUNBQlFRRnhSUVJBSUFBb0FnQW9BaEFoQVVFQUpBVWdBU0FBSUIxQ2VYd2lIYWNnSFVJZ2lLZEJBQkJRSXdVaEFVRUFKQVVnQVVFQmNRMEJRUUFrQlVFSUlBQVFCU0VCSXdVaEFrRUFKQVVnQWtFQmNRMEJRUUFrQlVFSUlBQVFCU0VDSXdVaEEwRUFKQVVnQTBFQmNRMEJRUUFrQlVFSUlBQVFCU0VESXdVaEJVRUFKQVVnQlVFQmNRMEJRUUFrQlVFSUlBQVFCU0VGSXdVaEJrRUFKQVVnQmtFQmNRMEJRUUFrQlVFSUlBQVFCU0VHSXdVaENFRUFKQVVnQ0VFQmNRMEJRUUFrQlVFSUlBQVFCU0VJSXdVaEIwRUFKQVVnQjBFQmNRMEJRUUFrQlVFSUlBQVFCU0VISXdVaERrRUFKQVVnRGtFQmNRMEJJQUFvQWdBb0FoQWhEa0VBSkFVZ0RpQUFJQnluSUJ4Q0lJaW5RUUFRVUNNRklRNUJBQ1FGSUE1QkFYRUVRRUVBRUJnUVdnVWdCeUFJSUFZZ0JTQURJQUlnQVhKeWNuSnlja0gvQVhGRkRRWU1CQXNMQ3hBWElRRWdBQ2dDQUNnQ0VDRUNRUUFrQlNBQ0lBQWdIS2NnSEVJZ2lLZEJBQkJRSXdVaEFrRUFKQVVnQWtFQmNVVUVRQ0FCSVFBTURRdEJBQkFZRUZvTEN5QUFRYXk4QTJwQkFUb0FBRUVBSkFWQkNrR3M5UUpCQXhBTkl3VWhBVUVBSkFVZ0FVRUJjVVVFUUNBV1JRMENJQXRCQURZQ1JDQUxRUVEyQWtnZ0N5QUFRUmhxSWdFMkFnQWdDMEZBYTBFQ05nSUFJQXNnQVRZQ0JFRUFKQVVqQlNFQlFRQWtCU0FCUVFGeFJRUkFJQUJCcmJ3RGFrRUJPZ0FBUVFBaEFBd0xDd3NRRnlFQURBb0xDeUFLS1FNQUlCZ3BBd0JWQkVBZ0Z5Z0NBQ0VBREFnTElBMUJBRFlDUkNBTlFSZzJBa2dnRFVGQWEwRUJOZ0lBSUEwZ0FFRVlhallDQUVFQUpBVWpCU0VCUVFBa0JTQUJRUUZ4UlFSQUlBQkJyTHdEYWtFQk9nQUFRUUFrQlVFS1FhejFBa0VERUEwakJTRUFRUUFrQlNBQVFRRnhSUVJBUVFBaEFBd0pDd3NMRUJjaEFBd0hDd3NMQ3dzUUZ5RUFEQUlMRUJjaEFBd0JDeUFFS0FJQUlnRkZCRUFnRUNRRUlBQVBDeUFCRUZJZ0VDUUVJQUFQQ3lBRUtBSUFJZ0ZGQkVBZ0FCQWVDeUFCRUZJZ0FCQWVRUUFMbEFzQ0NuOENmaU1FSVFNakJFR2dFR29rQkNBRFFTQnFJUUlnQXlBQUVMZ0JBa0FDUUFKQUlBQkJpTHdEYWlJSEtRTUFJQUJCcUx3RGFpZ0NBSzFWQkg5QkFDUUZRUW9nQTBFVkVBWWFJd1VoQVVFQUpBVWdBVUVCY1EwQlFRQWtCVUVJSUFCQnNLY0Jha0VBRUEwakJTRUJRUUFrQlNBQlFRRnhEUUVnQUVHMHB3RnFRUUkyQWdCQkFDUUZRUXdnQXhBRklRRWpCU0VFUVFBa0JTQUVRUUZ4RFFFZ0FFSEVwd0ZxSWdVZ0FUWUNBRUVBSkFWQkRDQURFQVVoQVNNRklRUkJBQ1FGSUFSQkFYRU5BU0FBUVlEb0FXb2dBYTAzQXdBZ0FFR1E2QUZxUVFFMkFnQkJBQ1FGUVFvZ0F4QUZJUUVqQlNFRVFRQWtCU0FFUVFGeERRRWdBRUdVNkFGcUlBRkIvLzhEY1RZQ0FFRUFKQVZCQ2lBREVBVWhBU01GSVFSQkFDUUZJQVJCQVhFTkFTQUFRYnluQVdvaUNDQUJRZi8vQTNFMkFnQkJBQ1FGUVF3Z0F4QUZJUWtqQlNFQlFRQWtCU0FCUVFGeFJRUkFRUUFrQlVFTElBTVFCU0VCSXdVaEJFRUFKQVVnQkVFQmNVVUVRQ0FBUWN5bkFXb2dBVUgvQVhFMkFnQkJBQ1FGUVFzZ0F4QUZJUUVqQlNFRVFRQWtCU0FFUVFGeFJRUkFJQUJCdUtjQmFpSUVJQUZCL3dGeFFZQ0FBbkkyQWdCQkFDUUZRUXNnQXhBRklRRWpCU0VHUVFBa0JTQUdRUUZ4UlFSQUlBQkJ5YWNCYWlBQlFmOEJjVUVDUmdSL1FRMEZRUW9MT2dBQVFRQWtCVUVMSUFNUUJTRUJJd1VoQmtFQUpBVWdCa0VCY1VVRVFDQUJRZjhCY1NFQlFRQWtCVUVMSUFNUUJTRUdJd1VoQ2tFQUpBVWdDa0VCY1VVRVFDQUFRY3FuQVdvZ0Jqb0FBQ0FBUWJqb0FXb2dCQ2dDQUNJRVFRRnhPZ0FBSUFCQnVlZ0JhaUFFUVFGMlFRRnhPZ0FBSUFCQnUrZ0JhaUFFUVFKMlFRRnhJZ1E2QUFBZ0FFRzg2QUZxSUFRMkFnQWdBRUg0NXdGcUlnUWdCU2dDQUswM0F3QWdBRUdVNlFGcVFZQ0FCRFlDQUVFQUpBVkJDU0FBUWVEbkFXb2dDUkFOSXdVaEJVRUFKQVVnQlVFQmNVVUVRRUVBSkFWQkNpQURJQUVRQmhvakJTRUZRUUFrQlNBRlFRRnhSUVJBUVFBa0JVRVNJQU1nQWlBQkVBY2FJd1VoQlVFQUpBVUNRQ0FGUVFGeFJRUkFJQUlnQVdwQkFEb0FBRUVBSkFWQkNDQUNJQUpCZ0JBUURpTUZJUUZCQUNRRklBRkJBWEVOQVVFQUpBVkJFU0FDSUFCQjBLY0JhaUlCUVlBUUVBY2FJd1VoQWtFQUpBVWdBa0VCY1EwQklBQkJyUE1BYWlJRktBSUFRWXlGQTJvb0FnQWlBa0VCUmdSQVFRQWtCVUVOSUFFUUJSb2pCU0VDUVFBa0JTQUNRUUZ4RFFJZ0JTZ0NBRUdNaFFOcUtBSUFJUUlMSUFKQkFrWUVRRUVBSkFWQkRpQUJFQVVhSXdVaEFrRUFKQVVnQWtFQmNRMENDeUFES0FJVUlnSUVRQ0FBUVpDOEEyb2dCeWtEQUNJTUlBZ29BZ0N0ZkNBRUtRTUFmQ0lMTndNQUJTQUFRWkM4QTJvcEF3QWhDeUFIS1FNQUlRd0xJQUJCelBNQWFrRUNOZ0lBSUFJaEFBd01Dd3NRRnlFQURBc0xDd3NMRUJjaEFBd0hDd3NMQ3hBWEJVRUFKQVZCQ2lBRFFRY1FCaG9qQlNFQlFRQWtCU0FCUVFGeERRRkJBQ1FGUVJzZ0FFRzRwZ0ZxRUF3akJTRUJRUUFrQlNBQlFRRnhEUUZCQUNRRlFSSWdBeUFDUVFRUUJ4b2pCU0VDUVFBa0JTQUNRUUZ4UlFSQVFRQWtCVUVLSUFNUUJTRUNJd1VoQVVFQUpBVWdBVUVCY1VVRVFFRUFKQVZCQ3lBREVBVWhBU01GSVFSQkFDUUZJQVJCQVhGRkJFQWdBRUdRdkFOcUlBY3BBd0FpRENBQ1FmLy9BM0d0ZkNJTE53TUFJQUJCelBNQWFrRUJOZ0lBSUFCQm5id0RhaUFCUWY4QmNTSUNRUUZ4T2dBQUlBQkJuTHdEYWlBQ1FRTjJRUUZ4T2dBQUlBQkJuN3dEYWlBQ1FRSjJRUUZ4T2dBQUlBQkIxS1lCYWlBQ1FRRjJRUUZ4T2dBQUlBQkIxYVlCYWlBQ1FRUjJRUUZ4T2dBQUlBTW9BaFFoQUF3RkN3c0xFQmNMSVFBTUFnc1FGeUVBREFFTElBc2dERmNFUUVFQUlRQUxJQU1vQWdBaUFrVUVRQ0FESkFRZ0FBOExJQUlRVWlBREpBUWdBQThMSUFNb0FnQWlBMFVFUUNBQUVCNExJQU1RVWlBQUVCNUJBQXNpQUNBQUlBQkJrTHdEYWlrREFFRUFJQUFvQWdBb0FoQkJBM0ZCdUFKcUVRSUFDMXdCQVg4akJDRUNJd1JCMEFCcUpBUWdBQ0FCRVBFQkJFQWdBaVFFRHdzZ0FFR3R2QU5xTEFBQVJRUkFJQUpCQURZQ1JDQUNRVGcyQWtnZ0FrRkFhMEVCTmdJQUlBSWdBRUVZYWpZQ0FBdEJyUFVDUVFJUXBBRWdBaVFFQzZRR0FRZC9JQUFRMGdFZ0FFSDBEVFlDQUVFQUpBVkJHQ0FBUVp6QUFHb2lCQkFNSXdVaEFrRUFKQVVnQWtFQmNRUkFFQmNoQWlBQUVIQWdBaEFlQzBFQUpBVkJGaUFBUWZEeEFHb2lCUkFNSXdVaEFrRUFKQVVnQWtFQmNRUkFFQmNoQWdVZ0FFSEE4d0JxSWdaQ0FEY0RBRUVBSkFWQkdTQUFRZGp6QUdvaUJ4QU1Jd1VoQWtFQUpBVUNRQ0FDUVFGeEJFQVFGeUVDQlNBQVFkRG5BV29pQWtJQU53SUFJQUpDQURjQ0NDQUNRZ0EzQWhBZ0FrSUFOd0lZSUFKQ0FEY0NJQ0FBUVpEdUFtb2lBa0lBTndJQUlBSkNBRGNDQ0NBQ1FnQTNBaEFnQWtJQU53SVlJQUpDQURjQ0lDQUFRYXp6QUdvaUNFRUFOZ0lBSUFCQnFQTUFhaUFCUlNJQ09nQUFBa0FnQWdSQVFRQWtCVUVFUWNETEJCQUZJUU1qQlNFQlFRQWtCU0FCUVFGeEJFQVFGeUVDQlVFQUpBVkJHaUFERUF3akJTRUJRUUFrQlNBQlFRRnhSUVJBSUFNaEFRd0RDeEFYSVFJZ0F4QlNJQUJCa080Q2FpZ0NBQ0lEQkVBZ0F4QlNDd3NnQUVIUTV3RnFLQUlBSWdNRVFDQURFRklMSUFjUXRRSU1Bd3NMSUFnZ0FUWUNBQ0FBSUFGQm5ZVURhaXdBQURvQUZTQUFRWmk4QTJwQkFqWUNBQ0FBUWFpOEEycEJBRFlDQUNBR1FnQTNBd0FnQUVHdHZBTnFRUUE2QUFBZ0FFR3N2QU5xUVFBNkFBQWdBRUhJOHdCcVFRQTJBZ0FnQUVHSXZBTnFJZ0ZDQURjREFDQUJRZ0EzQXdnZ0FFR2N2QU5xSWdGQ0FEY0NBQ0FCUVFBNkFBZ2dBRUd3OHdCcVFuODNBd0FnQUVHNDh3QnFRWDgyQWdBZ0FFR3dyUUpxSWdGQ0FEY0RBQ0FCUWdBM0F3Z2dBVUlBTndNUUlBRkNBRGNER0NBQVFjQzhBMnBCQURZQ0FDQUFRZVM4QTJwQkFEWUNBQ0FBUWI2OEEycEJBRG9BQUNBQVFkRHpBR3BCQURvQUFDQUFRYmltQVdvaUFVSUFOd01BSUFGQ0FEY0RDQ0FCUWdBM0F4QWdBVUlBTndNWUlBRkNBRGNESUNBQlFnQTNBeWdnQVVJQU53TXdJQUZDQURjRE9DQUJRVUJyUWdBM0F3QWdBVUlBTndOSUlBRkNBRGNEVUNBQlFnQTNBMWdnQVVJQU53TmdJQUZDQURjRGFDQUJRUUEyQW5BZ0FFSEl2QU5xSWdCQ0FEY0RBQ0FBUWdBM0F3Z2dBRUlBTndNUUlBQkJBRG9BR0E4TEN5QUZFSVFCQ3lBRUVJNEJJQUFRY0NBQ0VCNExqd2dCQzM4akJDRUNJd1JCTUdva0JDQUNRUkJxSVFvZ0FrRUlhaUVISUFJaUNVRVlhaUlGUWdBM0FnQWdCVUlBTndJSVFRQWtCVUVVSUFBZ0JVRUFFQWNoQWlNRklRTkJBQ1FGQWtBZ0EwRUJjVVVFUUNBQ0JIOGdCVUVFYWlJR0tBSUFJZ3RCQVdvaEFpQUdJQUkyQWdBZ0FpQUZRUWhxSWdnb0FnQWlCRXNFZnlBRktBSU1JZ05CQUVjZ0FpQURTM0VFZjBFQUpBVWdDU0FETmdJQVFRSkJyUFVDUWRnYklBa1FEaU1GSVFOQkFDUUZJQU5CQVhFTkJFRUFKQVZCRkVHczlRSVFEQ01GSVFOQkFDUUZJQU5CQVhFTkJDQUlLQUlBSVFRZ0JpZ0NBQVVnQWdzaEF5QUZLQUlBSUFNZ0JFRWdhaUFFUVFKMmFpSUVTd1IvSUFNaUJBVWdCQXNRVnlJRFJRUkFRUUFrQlVFVVFhejFBaEFNSXdVaERFRUFKQVVnREVFQmNRMEVDeUFGSUFNMkFnQWdDQ0FFTmdJQUlBWW9BZ0FGSUFVb0FnQWhBeUFDQ3lFRUlBTWdCRUYvYW1wQkFEb0FBQ0FCUVFocUlnUW9BZ0FoQXlBQlFRUnFJZ1lnQWpZQ0FDQURJQUpKQkVBZ0FTZ0NEQ0lJUVFCSElBSWdDRXR4QkVCQkFDUUZJQWNnQ0RZQ0FFRUNRYXoxQWtIWUd5QUhFQTRqQlNFQ1FRQWtCU0FDUVFGeERRUkJBQ1FGUVJSQnJQVUNFQXdqQlNFQ1FRQWtCU0FDUVFGeERRUWdCQ2dDQUNFRElBWW9BZ0FoQWdzZ0FTZ0NBQ0FDSUFOQklHb2dBMEVDZG1vaUEwc0VmeUFDQlNBRElnSUxRUUowRUZjaUEwVUVRRUVBSkFWQkZFR3M5UUlRRENNRklRZEJBQ1FGSUFkQkFYRU5CQXNnQVNBRE5nSUFJQVFnQWpZQ0FBc0NmeUFBUVppOEEyb29BZ0JCQTBZRVFDQUZLQUlBSVFBZ0FTZ0NBQ0VDSUFZb0FnQWhBMEVBSkFWQkZTQUFJQUlnQXhBSEdpTUZJUUJCQUNRRklBQkJBWEVOQkFVZ0JTZ0NBQ0VDSUFFb0FnQWhBeUFBUVl5dUFtb29BZ0JCQVhGRkJFQWdCaWdDQUNFQVFRQWtCVUVSSUFJZ0F5QUFFQWNhSXdVaEFFRUFKQVVnQUVFQmNRMEZJQUVNQWd0QkFDUUZRUllnQWlBRElBdEJBWFlpQUJBSEdpTUZJUUpCQUNRRklBSkJBWEVOQkNBQktBSUFJQUJCQW5ScVFRQTJBZ0FMSUFFTElnQW9BZ0FpQXhCWklRQWdCQ2dDQUNFQ0lBWWdBRFlDQUNBQ0lBQkpCRUFnQVNnQ0RDSUhRUUJISUFBZ0IwdHhCRUJCQUNRRklBb2dCellDQUVFQ1FhejFBa0hZR3lBS0VBNGpCU0VBUVFBa0JTQUFRUUZ4RFFSQkFDUUZRUlJCclBVQ0VBd2pCU0VBUVFBa0JTQUFRUUZ4RFFRZ0FTZ0NBQ0VESUFRb0FnQWhBaUFHS0FJQUlRQUxJQU1nQUNBQ1FTQnFJQUpCQW5acUlnSkxCSDhnQUFVZ0FpSUFDMEVDZEJCWElnSkZCRUJCQUNRRlFSUkJyUFVDRUF3akJTRURRUUFrQlNBRFFRRnhEUVFMSUFFZ0FqWUNBQ0FFSUFBMkFnQUxRUUVGUVFBTElRQWdCU2dDQUNJQlJRUkFJQWtrQkNBQUR3c2dBUkJTSUFra0JDQUFEd3NMRUJjaEFDQUZLQUlBSWdGRkJFQWdBQkFlQ3lBQkVGSWdBQkFlUVFBTEJnQWdBQ1FIQzY4WEFneC9BbjRqQkNFSUl3UkJnTkFEYWlRRUlBQkJucndEYWl3QUFFVUVRQ0FJSkFSQkFBOExJQWhCcU04RGFpRUtJQWhCb004RGFpRU1JQWhCbU04RGFpRUxJQWhCa004RGFpRU5JQWhCMk0wRGFpRUhJQWhCc004RGFpRUVJQWhCck04RGFpRUpJQUFnQUNnQ0FDZ0NGRUVIY1VHR0FXb1JBQUFoRHdKQUFrQUNRQUpBQWtBZ0FFR1l2QU5xSWdZb0FnQkJBVVlFUUNBQUtBSUFLQUlRSVFJZ0FFR292QU5xS0FJQVFRZHFyU0VPUVFBa0JTQUNJQUFnRHFjZ0RrSWdpS2RCQUJCUUl3VWhBa0VBSkFVZ0FrRUJjVVVFUUVFQUpBVkJDQ0FBRUFVaEFpTUZJUU5CQUNRRklBTkJBWEZGQkVCQkFDUUZRUWdnQUJBRklRTWpCU0VGUVFBa0JTQUZRUUZ4UlFSQUlBTkIvd0Z4UVFoMElBSkIvd0Z4Y2lFQ0RBVUxDd3NGSUFBb0FnQW9BaEFoQWlBQVFkU21BV29zQUFCRkJFQkJBQ1FGUVFRZ0FCQk9yU01IclVJZ2hvUWhEaU1GSVFOQkFDUUZJQU5CQVhFTkFrRUFKQVVnQWlBQUlBNm5JQTVDSUlpblFRQVFVQ01GSVFKQkFDUUZJQUpCQVhFTkFrRUFKQVZCQ0NBQVFZd09FQVloQWlNRklRTkJBQ1FGSUFOQkFYRU5BaUFDUlFSQVFRQWhBUXdGQzBFQUpBVkJDU0FBSUFFUUJpRUJJd1VoQWtFQUpBVWdBa0VCY1EwQ0RBUUxJQUJCcUx3RGFpZ0NBRUVVYXEwaERrRUFKQVVnQWlBQUlBNm5JQTVDSUlpblFRQVFVQ01GSVFKQkFDUUZJQUpCQVhGRkJFQkJBQ1FGUVFZZ0FCQUZHaU1GSVFKQkFDUUZJQUpCQVhGRkJFQWdBRUdzdkFOcUxBQUFSUVJBSUFCQi9MTURhaWdDQUVIei93TnFJUUlNQlFzZ0NFRUFOZ0pFSUFoQk9UWUNTQ0FJUVVCclFRRTJBZ0FnQ0NBQVFSaHFOZ0lBUVFBa0JTTUZJUUZCQUNRRklBRkJBWEZGQkVCQkFDRUJEQVlMQ3dzTEN4QVhJUUVNQWdzQ1FBSkFJQVlvQWdCQkFVWUVRQ0FBUWRXbUFXb3NBQUJGRFFFRklBQkJoN1FEYWl3QUFFRXdSZzBCSUFCQmhyUURhaXdBQUVGeGFrRVlkRUVZZFVIL0FYRkJEa29FUUVFQUlRRU1CQXNnQUVHSHRBTnFMUUFBUVRWS0JFQkJBQ0VCREFRTEMwRUFKQVZCRmlBSEVBd2pCU0VEUVFBa0JTQURRUUZ4QkVBUUZ5RUJCU0FIUVFFNkFDa0NRQUpBSUFZb0FnQkJBVVlFZjBFQUpBVkJDQ0FBRUFVaEF5TUZJUVZCQUNRRklBVkJBWEVOQVVFQUpBVkJDQ0FBRUFVaEJTTUZJUXBCQUNRRklBcEJBWEVOQVVFQUpBVkJGeUFIRUF3akJTRUtRUUFrQlNBS1FRRnhEUUVnQUVHR3RBTnFRUTg2QUFBZ0FrSCsvd05xSVFJZ0JVSC9BWEZCQ0hRZ0EwSC9BWEZ5QlNBQVFZUzBBMm92QVFBTElRTkJBQ1FGUVFNZ0J5QUFRUUFRRGlNRklRVkJBQ1FGSUFWQkFYRU5BQ0FIUVFBNkFDZ2dCeUFDUWYvL0EzR3ROd01nUVFBa0JVRUVJQWRCcUFGcUlnSkJBa0VCRUE0akJTRUZRUUFrQlNBRlFRRnhEUUJCQUNRRlFRY2dDQ0FIRUEwakJTRUZRUUFrQlNBRlFRRnhCRUFRRnlFQkJVRUFKQVZCQlNBSVFZQ0FCRUVBRUE0akJTRUZRUUFrQlFKQUFrQWdCVUVCY1EwQUlBaEJzSmdCYWlBRHJUY0RBQ0FJUWNpWUFXcEJBRG9BQUNBQVFZYTBBMm90QUFBaEEwRUFKQVZCQmlBSUlBTkJBQkFPSXdVaEEwRUFKQVVnQTBFQmNRMEFJQVlvQWdCQkFVY0VRRUVBSkFWQkNTQUNFQVVoQWlNRklRTkJBQ1FGSUFOQkFYRU5BU0FBUVlpMEEyb3ZBUUFnQWtILy93TnhSd1JBSUFSQkFEWUNSQ0FFUVRrMkFrZ2dCRUZBYTBFQk5nSUFJQVFnQUVFWWFqWUNBRUVBSkFVakJTRUJRUUFrQlNBQlFRRnhEUUlnQ0JDVkFTQUhFSVFCUVFBaEFRd0tDd3RCQUNRRlFRY2dCeUFFSUFrUURpTUZJUUpCQUNRRkFrQWdBa0VCY1VVRVFDQUJRUWhxSWdVb0FnQWhCaUFCUVFScUlnTWdDU2dDQUVFQmFpSUNOZ0lBSUFZZ0Fra0VRQ0FCS0FJTUlncEJBRWNnQWlBS1MzRUVRRUVBSkFVZ0RTQUtOZ0lBUVFKQnJQVUNRZGdiSUEwUURpTUZJUUpCQUNRRklBSkJBWEVOQTBFQUpBVkJGRUdzOVFJUURDTUZJUUpCQUNRRklBSkJBWEVOQXlBRktBSUFJUVlnQXlnQ0FDRUNDeUFCS0FJQUlBSWdCa0VnYWlBR1FRSjJhaUlHU3dSL0lBSUZJQVlpQWd0QkFuUVFWeUlHUlFSQVFRQWtCVUVVUWF6MUFoQU1Jd1VoQ2tFQUpBVWdDa0VCY1EwREN5QUJJQVkyQWdBZ0JTQUNOZ0lBSUFNb0FnQWhBZ3NnQVNnQ0FFRUFJQUpCQW5RUVZCb2dCQ2dDQUNFQ0lBRW9BZ0FoQmlBSktBSUFJUVJCQUNRRlFSRWdBaUFHSUFRUUJ4b2pCU0VDUVFBa0JTQUNRUUZ4RFFFZ0FTZ0NBQ0lFRUZraEFpQUZLQUlBSVFZZ0F5QUNOZ0lBSUFZZ0Fra0VRQ0FCS0FJTUlnbEJBRWNnQWlBSlMzRUVRRUVBSkFVZ0N5QUpOZ0lBUVFKQnJQVUNRZGdiSUFzUURpTUZJUUpCQUNRRklBSkJBWEVOQTBFQUpBVkJGRUdzOVFJUURDTUZJUUpCQUNRRklBSkJBWEVOQXlBRktBSUFJUVlnQXlnQ0FDRUNJQUVvQWdBaEJBc2dCQ0FDSUFaQklHb2dCa0VDZG1vaUJrc0VmeUFDQlNBR0lnSUxRUUowRUZjaUJrVUVRRUVBSkFWQkZFR3M5UUlRRENNRklRUkJBQ1FGSUFSQkFYRU5Bd3NnQVNBR05nSUFJQVVnQWpZQ0FBc2dDQkNWQVNBSEVJUUJJQU1oQVF3SkN3c1FGeUVCREFFTEVCY2hBUXNnQ0JDVkFRc01BUXNRRnlFQkN5QUhFSVFCQ3d3REN5QUNRZi8vQTNFaUJRUkFRUUFnQlVFZ1N3Ui9JQVVGUVNBTElnTVFWeUlDUlFSQVFRQWtCVUVVUWF6MUFoQU1Jd1VoQWtFQUpBVWdBa0VCY1FSQUVCY2hBUXdGQlVFQUlRSUxDd1ZCQUNFQ1FRQWhBd3NnQUNnQ0FDZ0NEQ0VFUVFBa0JTQUVJQUFnQWlBRkVBY2FJd1VoQkVFQUpBVUNRQ0FFUVFGeEJFQWdBaUVCQlNBR0tBSUFRUUZIQkVBZ0FFR0l0QU5xTHdFQUlRWkJBQ1FGUVJOQmZ5QUNJQVVRQnlFRUl3VWhDVUVBSkFVZ0NVRUJjUVJBSUFJaEFRd0RDeUFFUWYvL0EzRkIvLzhEY3lBR1FmLy9BM0ZIQkVBZ0IwRUFOZ0pFSUFkQk9UWUNTQ0FIUVVCclFRRTJBZ0FnQnlBQVFSaHFOZ0lBUVFBa0JTTUZJUUZCQUNRRklBRkJBWEVFUUNBQ0lRRU1CQXNnQWtVRVFFRUFJUUVNQmdzZ0FoQlNRUUFoQVF3RkN3c2dBVUVJYWlJTEtBSUFJUWtnQVVFRWFpSUdJQVZCQVdvaUJ6WUNBQ0FKSUFWTkJFQWdBU2dDRENJRVFRQkhJQVVnQkU5eEJIOUJBQ1FGSUF3Z0JEWUNBRUVDUWF6MUFrSFlHeUFNRUE0akJTRUVRUUFrQlNBRVFRRnhCRUFnQWlFQkRBUUxRUUFrQlVFVVFhejFBaEFNSXdVaEJFRUFKQVVnQkVFQmNRUkFJQUloQVF3RUN5QUxLQUlBSVFrZ0JpZ0NBQVVnQndzaEJDQUJLQUlBSUFRZ0NVRWdhaUFKUVFKMmFpSUpTd1IvSUFRRklBa2lCQXRCQW5RUVZ5SUpSUVJBUVFBa0JVRVVRYXoxQWhBTUl3VWhERUVBSkFVZ0RFRUJjUVJBSUFJaEFRd0VDd3NnQVNBSk5nSUFJQXNnQkRZQ0FBc2dCU0FEVHdSQUlBSWdCeUFEUVNCcUlBTkJBblpxSWdOTEJIOGdCd1VnQXdzUVZ5SURCRUFnQXlFQ0JVRUFKQVZCRkVHczlRSVFEQ01GSVFOQkFDUUZJQU5CQVhFRVFDQUNJUUVNQkFWQkFDRUNDd3NMSUFJZ0JXcEJBRG9BQUNBQktBSUFJUU5CQUNRRlFSRWdBaUFESUFVUUJ4b2pCU0VEUVFBa0JTQURRUUZ4QkVBZ0FpRUJCU0FCS0FJQUlnY1FXU0VFSUFzb0FnQWhCU0FHSUFRMkFnQWdCU0FFU1FSQUlBRW9BZ3dpQTBFQVJ5QUVJQU5MY1FSL1FRQWtCU0FLSUFNMkFnQkJBa0dzOVFKQjJCc2dDaEFPSXdVaEEwRUFKQVVnQTBFQmNRUkFJQUloQVF3RkMwRUFKQVZCRkVHczlRSVFEQ01GSVFOQkFDUUZJQU5CQVhFRVFDQUNJUUVNQlFzZ0FTRURJQXNvQWdBaEJTQUdLQUlBSVFFZ0F5Z0NBQVVnQVNFRElBUWhBU0FIQ3lBQklBVkJJR29nQlVFQ2Rtb2lCRXNFZnlBQkJTQUVJZ0VMUVFKMEVGY2lCRVVFUUVFQUpBVkJGRUdzOVFJUURDTUZJUVZCQUNRRklBVkJBWEVFUUNBQ0lRRU1CUXNMSUFNZ0JEWUNBQ0FMSUFFMkFnQUxJQUpGQkVBZ0JpRUJEQVFMSUFJUVVpQUdJUUVNQXdzTEN4QVhJUUlnQVVVRVFDQUNJUUVNQXdzZ0FSQlNJQUloQVF3Q0N5QUJLQUlBUVFCSElRRUxJQUFvQWdBb0FoQWhBa0VBSkFVZ0FpQUFJQStuSUE5Q0lJaW5RUUFRVUNNRklRQkJBQ1FGSUFCQkFYRUVRRUVBRUJnUVdnVWdDQ1FFSUFFUEN3d0JDeUFBS0FJQUtBSVFJUUpCQUNRRklBSWdBQ0FQcHlBUFFpQ0lwMEVBRUZBakJTRUFRUUFrQlNBQVFRRnhCRUJCQUJBWUVGb0ZJQUVRSGdzTFFRQUxVQUlDZndGK0l3UWhBU01FUVJCcUpBUUNmMEVBSUFCQjJQTUFhaUlDUWVneGFpd0FBRVVOQUJvZ0FTQUNRYkF5YWlrREFEY0RBRUVCQ3dSK0lBRXBBd0FGSUFBUTB3RUxJUU1nQVNRRUlBTUxIUUFnQUVIWTh3QnFJQUVnQWhDUUJBUkFEd3NnQUNBQklBSVFuQUVMT3dFQmZ5TUVJUU1qQkVFUWFpUUVJQUJCMlBNQWFpQUJJQUlnQXhDcUJBUkFJQU1vQWdBaEFBVWdBQ0FCSUFJUTFBRWhBQXNnQXlRRUlBQUxGd0FnQUVIQXBRRnFRUUE2QUFBZ0FDQUJJQUlRbUFJTENnQWdBQkIrSUFBUVVnc2NBQ0FCSUFLdElBT3RRaUNHaENBRUlBQkJBM0ZCdUFKcUVRSUFDeG9BSUFFZ0FxMGdBNjFDSUlhRUlBQkJBM0ZCdEFKcUVSY0FDeDBCQVg0Z0FTQUFRUWR4UVlZQmFoRUFBQ0lDUWlDSXB5UUhJQUtuQ3lJQUlBR3RJQUt0UWlDR2hDQURyU0FFclVJZ2hvUWdBRUVCY1VHRUFXb1JFZ0FMSmdBZ0FTQUNJQU1nQkNBRklBYXRJQWV0UWlDR2hDQUlJQWtnQUVFQmNVR0NBV29SRVFBTEJnQkJGUkFBQ3dZQVFSUVFBQXNtQUVHczlRSkJBRFlDQUVHdzlRSkJBRFlDQUVHMDlRSkJBVG9BQUVHMTlRSkJBRFlBQUFzR0FFRVBFQUFMQ0FCQkNoQUFRUUFMQ0FCQkNSQUFRUUFMSXdBZ0FTQUFVd1IvUWVRQUJTQUJRZ0JSQkg5QkFBVWdBRUxrQUg0Z0FYK25Dd3NMRUFBakJVVUVRQ0FBSkFVZ0FTUUdDd3NJQUVFSUVBQkJBQXNJQUVFR0VBQkJBQXNJQUVFRUVBQkJBQXNQQUVFQUVBQkVBQUFBQUFBQUFBQUxJZ0FnQVNBQ0lBTWdCQ0FGSUFZZ0J5QUlJQWtnQ2lBQVFRRnhRYklDYWhFV0FBc2dBQ0FCSUFJZ0F5QUVJQVVnQmlBSElBZ2dDU0FBUVFGeFFiQUNhaEVWQUFzYUFDQUJJQUlnQXlBRUlBVWdCaUFBUVFkeFFhZ0NhaEVMQUFzWUFDQUJJQUlnQXlBRUlBVWdBRUVIY1VHZ0Ftb1JEQUFMRmdBZ0FTQUNJQU1nQkNBQVFRZHhRWmdDYWhFS0FBc1VBQ0FCSUFJZ0F5QUFRUjl4UWZnQmFoRUhBQXNVQUNBQklBSWdBeUFBUVFGeFFmWUJhaEVVQUFzU0FDQUJJQUlnQUVFZmNVSFdBV29SQmdBTEVBQWdBU0FBUVQ5eFFaWUJhaEVUQUFzT0FDQUFRUWR4UVk0QmFoRUlBQXNnQUNBQklBSWdBeUFFSUFVZ0JpQUhJQWdnQ1NBQVFRRnhRWUFCYWhFUUFBc2FBQ0FCSUFJZ0F5QUVJQVVnQmlBQVFRTnhRZndBYWhFUEFBc1lBQ0FCSUFJZ0F5QUVJQVVnQUVFQmNVSDZBR29SRGdBTEZnQWdBU0FDSUFNZ0JDQUFRUTl4UWVvQWFoRURBQXNVQUNBQklBSWdBeUFBUVI5eFFjb0FhaEVCQUFzUkFDQUJJQUlnQUVFZmNVRXFhaEVFQUFzUEFDQUJJQUJCSDNGQkNtb1JDUUFMRGdBZ0FTQUNJQUJCQVhFUkRRQUxHZ0FnQUFSL0lBQkJzQXBCbUF0QkFCQ2FBVUVBUndWQkFBc0xTUUVCZnlNRUlRTWpCRUVRYWlRRUlBTWdBaWdDQURZQ0FDQUFJQUVnQXlBQUtBSUFLQUlRUVI5eFFjb0FhaEVCQUNJQUJFQWdBaUFES0FJQU5nSUFDeUFESkFRZ0FFRUJjUXQxQVFKL0FrQWdBQ0FCS0FJSVJnUkFRUUFnQVNBQ0lBTVF3UUVGSUFCQkVHb2dBQ2dDRENJRVFRTjBhaUVGSUFCQkVHb2dBU0FDSUFNUStRRWdCRUVCU2dSQUlBRkJObW9oQkNBQVFSaHFJUUFEUUNBQUlBRWdBaUFERVBrQklBUXNBQUFOQXlBQVFRaHFJZ0FnQlVrTkFBc0xDd3NMckFVQkNYOENRQ0FBSUFFb0FnaEdCRUFnQVNnQ0JDQUNSZ1JBSUFGQkhHb2lBQ2dDQUVFQlJ3UkFJQUFnQXpZQ0FBc0xCU0FBSUFFb0FnQkhCRUFnQUNnQ0RDRUZJQUJCRUdvZ0FTQUNJQU1nQkJDckFTQUZRUUZNRFFJZ0FFRVFhaUFGUVFOMGFpRUhJQUJCR0dvaEJTQUFLQUlJSWdaQkFuRkZCRUFnQVVFa2FpSUFLQUlBUVFGSEJFQWdCa0VCY1VVRVFDQUJRVFpxSVFZRFFDQUdMQUFBRFFZZ0FDZ0NBRUVCUmcwR0lBVWdBU0FDSUFNZ0JCQ3JBU0FGUVFocUlnVWdCMGtOQUF3R0N3QUxJQUZCR0dvaEJpQUJRVFpxSVFnRFFDQUlMQUFBRFFVZ0FDZ0NBRUVCUmdSQUlBWW9BZ0JCQVVZTkJnc2dCU0FCSUFJZ0F5QUVFS3NCSUFWQkNHb2lCU0FIU1EwQURBVUxBQXNMSUFGQk5tb2hBQU5BSUFBc0FBQU5BeUFGSUFFZ0FpQURJQVFRcXdFZ0JVRUlhaUlGSUFkSkRRQU1Bd3NBQ3lBQktBSVFJQUpIQkVBZ0FVRVVhaUlMS0FJQUlBSkhCRUFnQVNBRE5nSWdJQUZCTEdvaURDZ0NBRUVFUmcwRElBQkJFR29nQUNnQ0RFRURkR29oRFNBQlFUUnFJUWNnQVVFMWFpRUdJQUZCTm1vaENDQUFRUWhxSVFrZ0FVRVlhaUVLUVFBaEF5QUFRUkJxSVFWQkFDRUFBbjhDUUFKQUEwQWdCU0FOVHcwQklBZEJBRG9BQUNBR1FRQTZBQUFnQlNBQklBSWdBa0VCSUFRUXZ3RWdDQ3dBQUEwQkFrQWdCaXdBQUFSQUlBY3NBQUJGQkVBZ0NTZ0NBRUVCY1FSQVFRRWhBd3dEQlVFQklRTU1CUXNBQ3lBS0tBSUFRUUZHRFFRZ0NTZ0NBRUVDY1VVTkJFRUJJUU5CQVNFQUN3c2dCVUVJYWlFRkRBQUxBQXNnQUVVRVFDQUxJQUkyQWdBZ0FVRW9haUlBSUFBb0FnQkJBV28yQWdBZ0FTZ0NKRUVCUmdSQUlBb29BZ0JCQWtZRVFDQUlRUUU2QUFBZ0F3MERRUVFNQkFzTEN5QUREUUJCQkF3QkMwRURDeUVBSUF3Z0FEWUNBQXdEQ3dzZ0EwRUJSZ1JBSUFGQkFUWUNJQXNMQ3d1QUFnRUlmeUFBSUFFb0FnaEdCRUJCQUNBQklBSWdBeUFFRU1BQkJTQUJRVFJxSWdZc0FBQWhDU0FCUVRWcUlnY3NBQUFoQ2lBQVFSQnFJQUFvQWd3aUNFRURkR29oQ3lBR1FRQTZBQUFnQjBFQU9nQUFJQUJCRUdvZ0FTQUNJQU1nQkNBRkVMOEJBa0FnQ0VFQlNnUkFJQUZCR0dvaERDQUFRUWhxSVFnZ0FVRTJhaUVOSUFCQkdHb2hBQU5BSUEwc0FBQU5BaUFHTEFBQUJFQWdEQ2dDQUVFQlJnMERJQWdvQWdCQkFuRkZEUU1GSUFjc0FBQUVRQ0FJS0FJQVFRRnhSUTBFQ3dzZ0JrRUFPZ0FBSUFkQkFEb0FBQ0FBSUFFZ0FpQURJQVFnQlJDL0FTQUFRUWhxSWdBZ0Mwa05BQXNMQ3lBR0lBazZBQUFnQnlBS09nQUFDd3UyQVFFQ2Z3SkFJQUpCZjJvaUJBUkFRUUFoQWdOQUFrQUNRQUpBSUFBZ0Ftb3NBQUFpQXc1ZEFBSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUJBZ3NNQkF0Qkx5RURDeUFCSUFKcUlBTTZBQUFnQWtFQmFpSUNJQVJKRFFBTEJVRUFJUUlMQ3lBQklBSnFRUUE2QUFBTDR3SUJBbjhqQkNFREl3UkJRR3NrQkNBQ0lBSW9BZ0FvQWdBMkFnQWdBQ0FCUmdSL1FRRUZJQUZCd0F0R0N3Ui9RUUVGSUFFRWZ5QUJRYkFLUVpnTFFRQVFtZ0VpQVFSL0lBRW9BZ2dnQUNnQ0NFRi9jM0VFZjBFQUJTQUFRUXhxSWdBb0FnQWdBVUVNYWlJQktBSUFSZ1IvUVFFRklBQW9BZ0JCdUF0R0JIOUJBUVVnQUNnQ0FDSUFCSDhnQUVHd0NrR2dDa0VBRUpvQklnUUVmeUFCS0FJQUlnQUVmeUFBUWJBS1FhQUtRUUFRbWdFaUFRUi9JQU5CQkdvaUFFSUFOd0lBSUFCQ0FEY0NDQ0FBUWdBM0FoQWdBRUlBTndJWUlBQkNBRGNDSUNBQVFnQTNBaWdnQUVFQU5nSXdJQU1nQVRZQ0FDQURJQVEyQWdnZ0EwRi9OZ0lNSUFOQkFUWUNNQ0FCSUFNZ0FpZ0NBRUVCSUFFb0FnQW9BaHhCQjNGQm1BSnFFUW9BSUFNb0FoaEJBVVlFZnlBQ0lBTW9BaEEyQWdCQkFRVkJBQXNGUVFBTEJVRUFDd1ZCQUFzRlFRQUxDd3NMQlVFQUN3VkJBQXNMSVFBZ0F5UUVJQUFMTVFFQ2Z5QUFLQUlBUVhScUlnRkJDR29pQWlnQ0FDRUFJQUlnQUVGL2FqWUNBQ0FBUVg5cVFRQklCRUFnQVJCU0N3c0tBQ0FBUVFScUtBSUFDd1lBUVpYekFBdHBBUUovUVFBa0JVRUZFQVFoQUNNRklRRkJBQ1FGSUFGQkFYRUVRRUVBRUJnUVdnc2dBQVJBSUFBb0FnQWlBQVJBSUFBcEF6QkNnSDZEUW9EV3JKbjB5Sk9td3dCUkJFQWdBQ2dDREJEOUFRc0xDd0ovUWVna1FlZ2tLQUlBSWdBMkFnQWdBQXNRL1FFTEx3RUJmeU1FSVFFakJFRVFhaVFFSUFBUVVrR3N2QU1vQWdCQkFCQktCRUJCaHZJQUlBRVFnZ0VGSUFFa0JBc0xnZ0VCQW44Z0FDZ0NBQ0lDUlFSQUR3c2dBUVIvUWNRTkJVSGdEUXNoQXlBQkJFQWdBaUVCQlNBQ0lRRURRQ0FESUFFUWRBUkFJQUJCM3dBMkFnQUxJQUJCQkdvaUFDZ0NBQ0lCRFFBTER3c0RRQUpBQWtBZ0F5QUJFSFFOQUNBQUtBSUFRU0JKRFFBTUFRc2dBRUhmQURZQ0FBc2dBRUVFYWlJQUtBSUFJZ0VOQUFzTEtBRUJmeU1FSVFBakJFRVFhaVFFUWF5OEEwRXRFRWdFUUVIVThRQWdBQkNDQVFVZ0FDUUVDd3M2QVFGL0lBQWdBU2dDQ0VZRVFFRUFJQUVnQWlBREVNRUJCU0FBS0FJSUlnUWdBU0FDSUFNZ0JDZ0NBQ2dDSEVFSGNVR1lBbW9SQ2dBTEM4Y0NBUU4vQWtBZ0FDQUJLQUlJUmdSQUlBRW9BZ1FnQWtZRVFDQUJRUnhxSWdBb0FnQkJBVWNFUUNBQUlBTTJBZ0FMQ3dVZ0FDQUJLQUlBUndSQUlBQW9BZ2dpQUNBQklBSWdBeUFFSUFBb0FnQW9BaGhCQjNGQm9BSnFFUXdBREFJTElBRW9BaEFnQWtjRVFDQUJRUlJxSWdVb0FnQWdBa2NFUUNBQklBTTJBaUFnQVVFc2FpSURLQUlBUVFSR0RRTWdBVUUwYWlJR1FRQTZBQUFnQVVFMWFpSUhRUUE2QUFBZ0FDZ0NDQ0lBSUFFZ0FpQUNRUUVnQkNBQUtBSUFLQUlVUVFkeFFhZ0NhaEVMQUFKQUFrQWdCeXdBQUFSQUlBWXNBQUFFUUVFRElRQUZRUU1oQUF3Q0N3VkJCQ0VBREFFTERBRUxJQVVnQWpZQ0FDQUJRU2hxSWdJZ0FpZ0NBRUVCYWpZQ0FDQUJLQUlrUVFGR0JFQWdBU2dDR0VFQ1JnUkFJQUZCQVRvQU5nc0xDeUFESUFBMkFnQU1Bd3NMSUFOQkFVWUVRQ0FCUVFFMkFpQUxDd3NMUUFFQmZ5QUFJQUVvQWdoR0JFQkJBQ0FCSUFJZ0F5QUVFTUFCQlNBQUtBSUlJZ1lnQVNBQ0lBTWdCQ0FGSUFZb0FnQW9BaFJCQjNGQnFBSnFFUXNBQ3dzWUFDQUFJQUVvQWdoR0JFQkJBQ0FCSUFJZ0F4REJBUXNMcmdFQUFrQWdBQ0FCS0FJSVJnUkFJQUVvQWdRZ0FrWUVRQ0FCUVJ4cUlnQW9BZ0JCQVVjRVFDQUFJQU0yQWdBTEN3VWdBQ0FCS0FJQVJnUkFJQUVvQWhBZ0FrY0VRQ0FCUVJScUlnQW9BZ0FnQWtjRVFDQUJJQU0yQWlBZ0FDQUNOZ0lBSUFGQktHb2lBQ0FBS0FJQVFRRnFOZ0lBSUFFb0FpUkJBVVlFUUNBQktBSVlRUUpHQkVBZ0FVRUJPZ0EyQ3dzZ0FVRUVOZ0lzREFRTEN5QURRUUZHQkVBZ0FVRUJOZ0lnQ3dzTEN3c2FBQ0FBSUFFb0FnaEdCRUJCQUNBQklBSWdBeUFFRU1BQkN3dklBUUVDZnlNRUlRTWpCRUZBYXlRRUlBQWdBVVlFZjBFQkJTQUJCSDhnQVVHd0NrR2dDa0VBRUpvQklnRUVmeUFEUVFScUlnUkNBRGNDQUNBRVFnQTNBZ2dnQkVJQU53SVFJQVJDQURjQ0dDQUVRZ0EzQWlBZ0JFSUFOd0lvSUFSQkFEWUNNQ0FESUFFMkFnQWdBeUFBTmdJSUlBTkJmellDRENBRFFRRTJBakFnQVNBRElBSW9BZ0JCQVNBQktBSUFLQUljUVFkeFFaZ0NhaEVLQUNBREtBSVlRUUZHQkg4Z0FpQURLQUlRTmdJQVFRRUZRUUFMQlVFQUN3VkJBQXNMSVFBZ0F5UUVJQUFMbEFJQ0JYOEJmaU1FSVFFakJFRXdhaVFFSUFGQkdHb2hBaUFCUVJCcUlRTWdBVUVrYWlFRUVQNEJJZ0FFUUNBQUtBSUFJZ0FFUUNBQUtRTXdJZ1ZDZ0g2RFFvRFdySm4weUpPbXd3QlNCRUFnQWtHWThBQTJBZ0JCNXU4QUlBSVFnZ0VMSUFCQjBBQnFJUUlnQlVLQjFxeVo5TWlUcHNNQVVRUkFJQUFvQWl3aEFnc2dCQ0FDTmdJQUlBQW9BZ0FpQUNnQ0JDRUNRWmdLSUFBZ0JFR1lDaWdDQUNnQ0VFRWZjVUhLQUdvUkFRQUVRQ0FFS0FJQUlnQWdBQ2dDQUNnQ0NFRWZjVUVLYWhFSkFDRUFJQUZCbVBBQU5nSUFJQUVnQWpZQ0JDQUJJQUEyQWdoQmtPOEFJQUVRZ2dFRklBTkJtUEFBTmdJQUlBTWdBallDQkVHOTd3QWdBeENDQVFzTEMwR004QUFnQVVFZ2FoQ0NBUXNOQUNBQUlBRWdBUkJaRUtBREM3QUVBUWwvSUFGQjcvLy8vd05MQkVBZ0FCQ0tBUXNnQUVFSWFpSUlRUU5xSWdvc0FBQWlCVUVBU0NJSkJIOGdDQ2dDQUVILy8vLy9CM0ZCZjJvaEFpQUFLQUlFQlVFQklRSWdCVUgvQVhFTElnY2dBVXNFZnlBSElnRUZJQUVMUVFKSklRTWdBVUVFYWtGOGNVRi9haUVCQWtBZ0F3Ui9RUUVpQVFVZ0FRc2dBa2NFUUFKQUFuOGdBd1JBSUFBb0FnQWhCQ0FKQkVBZ0JDRURRUUFoQlNBQUlRUUZJQUFnQkNBRlFmOEJjVUVCYWhDUEFSb2dCQkJTREFNTEJTQUJRUUZxSWdOQi8vLy8vd05MSVFZQ1FDQUJJQUpMQkVBZ0JrVUVRQ0FEUVFKMEVGOGhCQXdDQzBFSUVCUWhBa0VBSkFWQkZ5QUNRY3p1QUJBTkl3VWhCa0VBSkFVZ0JrRUJjUVJBRUJjaEJpQUNFQm9nQmhBZUJTQUNRZXdsTmdJQUlBSkIrQXBCREJBYkN3VUNRQUpBSUFZRVFFRUlFQlFoQVVFQUpBVkJGeUFCUWN6dUFCQU5Jd1VoQUVFQUpBVWdBRUVCY1FSQVFRQVFHQ0VBSUFFUUdnVWdBVUhzSlRZQ0FFRUFKQVZCR0NBQlFmZ0tRUXdRRGtFQUpBVU1BZ3NGUVFBa0JVRUVJQU5CQW5RUUJTRUVJd1VoQWtFQUpBVWdBa0VCY1EwQkRBUUxEQUVMUVFBUUdDRUFDeUFBRUJVYUVCWU1CZ3NMSUFrRVFDQUFLQUlBSVFOQkFTRUZCU0FFSUFBZ0JVSC9BWEZCQVdvUWp3RWFJQUJCQkdvTUFnc0xJQVFnQXlBQVFRUnFJZ0lvQWdCQkFXb1Fqd0VhSUFNUVVpQUZSUTBCSUFGQkFXb2hBeUFDQ3lFQklBZ2dBMEdBZ0lDQWVISTJBZ0FnQVNBSE5nSUFJQUFnQkRZQ0FBd0NDeUFLSUFjNkFBQUxDd3Y1QWdFRmZ5TUVJUWtqQkVFUWFpUUVRZTcvLy84RElBRnJJQUpKQkVBZ0FCQ0tBUXNnQUVFSWFpSU1MQUFEUVFCSUJIOGdBQ2dDQUFVZ0FBc2hDaUFCUWVmLy8vOEJTUVJBSUFJZ0FXb2lDQ0FCUVFGMElnSkpCSDhnQWdVZ0NDSUNDMEVFYWtGOGNTRUlJQUpCQWtrRWYwRUNCU0FJQ3lJQ1FmLy8vLzhEU3dSQVFRZ1FGQ0VDUVFBa0JVRVhJQUpCek80QUVBMGpCU0VJUVFBa0JTQUlRUUZ4QkVBUUZ5RUlJQUlRR2lBSUVCNEZJQUpCN0NVMkFnQWdBa0g0Q2tFTUVCc0xCU0FDSVFzTEJVSHYvLy8vQXlFTEN5QUxRUUowRUY4aEFpQUVCRUFnQWlBS0lBUVFqd0VhQ3lBR0JFQWdBaUFFUVFKMGFpQUhJQVlRandFYUN5QURJQVZySWdNZ0JHc2lCd1JBSUFJZ0JFRUNkR29nQmtFQ2RHb2dDaUFFUVFKMGFpQUZRUUowYWlBSEVJOEJHZ3NnQVVFQlJ3UkFJQW9RVWdzZ0FDQUNOZ0lBSUF3Z0MwR0FnSUNBZUhJMkFnQWdBQ0FESUFacUlnQTJBZ1FnQ1VFQU5nSUFJQUlnQUVFQ2RHb2dDU2dDQURZQ0FDQUpKQVFMUEFFQmZ5QUNCRUJCQUNRRlFSOGdBQ0FCSUFJUUJ4b2pCU0VCUVFBa0JTQUJRUUZ4QkVCQkFCQVlJZ0FRV2dVZ0FDRURDd1VnQUNFREN5QURDN2dCQVFWL0l3UWhCU01FUVJCcUpBUWdBRUVJYWlJRVFRTnFJZ1lzQUFBaUEwRUFTQ0lIQkg4Z0JDZ0NBRUgvLy8vL0IzRkJmMm9GUVFFTElnUWdBa2tFUUNBQUlBUWdBaUFFYXlBSEJIOGdBQ2dDQkFVZ0EwSC9BWEVMSWdOQkFDQURJQUlnQVJDZUF3VWdCd1IvSUFBb0FnQUZJQUFMSWdNZ0FTQUNFSjhER2lBRlFRQTJBZ0FnQXlBQ1FRSjBhaUFGS0FJQU5nSUFJQVlzQUFCQkFFZ0VRQ0FBSUFJMkFnUUZJQVlnQWpvQUFBc0xJQVVrQkNBQUMrMEJBUVIvSUFBZ0FCQlpRUUowYWlFQ0EwQWdBa0Y4YWlJQ0lBQkxJQUlvQWdCQlVHcEJDa2xCQVhOeEJFQU1BUVVnQWlFQkN3c0RRQ0FCUVh4cUlRUWdBU0FBU3lJRElBRW9BZ0JCVUdwQkNrbHhCRUFnQkNFQkRBRUxDeUFEUlFSQUlBSVBDd0pBQWtBRFFDQUJLQUlBSWdSQkxrWU5BaUFFUVZCcVFRcEpEUUVnQVVGOGFpSUJJQUJMRFFBTUFnc0FDeUFBRUZraEF3SkFBa0FEUUNBRFFRQktCRUFnQUNBRFFYOXFJZ1JCQW5ScUtBSUFRUzlHRFFJZ0JDRUREQUVMQ3d3QkN5QUFJQU5CQW5ScUlRQUxJQUJCTGhCMElnQkJBRWNnQUNBQlNYRUVmeUFCQlNBQ0N3OExJQUlMRFFBZ0FDQUJJQUVRYmhEL0FRdm1BZ0VJZnlBQlFXOUxCRUFnQUJDS0FRc2dBRUVMYWlJSkxBQUFJZ1ZCQUVnaUJBUi9JQUFvQWdoQi8vLy8vd2R4UVg5cUlRWWdBQ2dDQkFWQkNpRUdJQVZCL3dGeEN5SUhJQUZMQkg4Z0J5SUJCU0FCQzBFTFNTRURJQUZCRUdwQmNIRkJmMm9oQVFKQUlBTUVmMEVLQlNBQkN5SUlJQVpIQkVBQ1FBSkFJQU1FUUNBQUtBSUFJUUlnQkFSQVFRQWhCQ0FBSVFFRklBQWdBaUFGUWY4QmNVRUJhaENKQVJvZ0FoQlNEQU1MQlNBSVFRRnFJUUlnQ0NBR1N3UkFJQUlRWHlFQkJVRUFKQVZCQkNBQ0VBVWhBU01GSVFOQkFDUUZJQU5CQVhFRVFFRUFFQmdRRlJvUUZnd0dDd3NnQkFSQUlBQW9BZ0FoQWtFQklRUUZJQUVnQUNBRlFmOEJjVUVCYWhDSkFSb2dBRUVFYWlFRERBSUxDeUFCSUFJZ0FFRUVhaUlES0FJQVFRRnFFSWtCR2lBQ0VGSWdCRVVOQVNBSVFRRnFJUUlMSUFBZ0FrR0FnSUNBZUhJMkFnZ2dBeUFITmdJQUlBQWdBVFlDQUF3Q0N5QUpJQWM2QUFBTEN3dUNBZ0VEZnlNRUlRa2pCRUVRYWlRRVFXNGdBV3NnQWtrRVFDQUFFSW9CQ3lBQUxBQUxRUUJJQkg4Z0FDZ0NBQVVnQUFzaENpQUJRZWYvLy84SFNRUi9JQUlnQVdvaUNDQUJRUUYwSWdKSkJIOGdBZ1VnQ0NJQ0MwRVFha0Z3Y1NFSUlBSkJDMGtFZjBFTEJTQUlDd1ZCYndzaUFoQmZJUWdnQkFSQUlBZ2dDaUFFRUlrQkdnc2dCZ1JBSUFnZ0JHb2dCeUFHRUlrQkdnc2dBeUFGYXlJRElBUnJJZ2NFUUNBSUlBUnFJQVpxSUFvZ0JHb2dCV29nQnhDSkFSb0xJQUZCQ2tjRVFDQUtFRklMSUFBZ0NEWUNBQ0FBSUFKQmdJQ0FnSGh5TmdJSUlBQWdBeUFHYWlJQU5nSUVJQWxCQURvQUFDQUlJQUJxSUFrc0FBQTZBQUFnQ1NRRUMwb0JCSDhnQUNBQlJ3UkFJQUVzQUFzaUFrRUFTQ0VESUFFb0FnQWhCQ0FCS0FJRUlRVWdBa0gvQVhFaEFpQUFJQU1FZnlBRUJTQUJDeUFEQkg4Z0JRVWdBZ3NRL3dFYUN5QUFDN1FCQVFSL0l3UWhBeU1FUVJCcUpBUWdBRUlBTndJQUlBQkJBRFlDQ0NBQkxBQUxRUUJJQkVBZ0FTZ0NBQ0VFSUFFb0FnUWlBa0Z2U3dSQUlBQVFpZ0VMSUFKQkMwa0VRQ0FBSUFJNkFBc0ZJQUFnQWtFUWFrRndjU0lGRUY4aUFUWUNBQ0FBSUFWQmdJQ0FnSGh5TmdJSUlBQWdBallDQkNBQklRQUxJQUFnQkNBQ0VJa0JHaUFEUVFBNkFBQWdBQ0FDYWlBRExBQUFPZ0FBQlNBQUlBRXBBZ0EzQWdBZ0FDQUJLQUlJTmdJSUN5QURKQVFMTHdBZ0FFSFlKVFlDQUVFQUpBVkJHQ0FBUVFScUlBRVFEU01GSVFCQkFDUUZJQUJCQVhFRVFCQVhJZ0FRSGdzTFBBRUNmeUFCRUc0aUEwRU5haEJmSWdJZ0F6WUNBQ0FDSUFNMkFnUWdBa0VBTmdJSUlBSkJER29pQWlBQklBTkJBV29RVXhvZ0FDQUNOZ0lBQ3dZQUlBQVFYd3NwQVFGL0l3UWhCQ01FUVJCcUpBUWdCQ0FETmdJQUlBQWdBU0FDSUFRUWdBSWhBQ0FFSkFRZ0FBdGlBUVIvQW44Q1FDQUJLQUpNUVFCSURRQU1BQXNnQUVIL0FYRWhBeUFBUWY4QmNTSUVJQUVzQUV0SEJFQWdBVUVVYWlJRktBSUFJZ0lnQVNnQ0VFa0VRQ0FGSUFKQkFXbzJBZ0FnQWlBRE9nQUFJQVFNQWdzTElBRWdBQkNCQWdzaUFBdUxBZ0VHZnlNRUlRUWpCRUVRYWlRRVFhd2pLQUlBSVFVZ0FTd0FTa0VCU0FSQUlBRkJBUkNGQWhvTFFhd2pJQUVvQW5nMkFnQUNRQUpBSUFCQmdBRkpCRUFnQUVIL0FYRWhCaUFBUWY4QmNTSUNJQUVzQUV0SEJFQWdBVUVVYWlJSEtBSUFJZ01nQVNnQ0VFa0VRQ0FISUFOQkFXbzJBZ0FnQXlBR09nQUFJQUloQUF3RUN3c2dBU0FBRUlFQ0lRQUZJQUZCRkdvaUFpZ0NBQ0lEUVFScUlBRW9BaEJKQkVBZ0F5QUFFTEFCSWdOQkFFZ05BaUFDSUFJb0FnQWdBMm8yQWdBRklBUWdBQkN3QVNJQ1FRQklEUUlnQkNBQ0lBRVFqUUlnQWtrTkFnc0xJQUJCZjBZTkFBd0JDeUFCSUFFb0FnQkJJSEkyQWdCQmZ5RUFDMEdzSXlBRk5nSUFJQVFrQkNBQUM3a0JBUVIvSXdRaEJDTUVRWUFCYWlRRUlBUkJ5QUJxSWdOQ0FEY0NBQ0FEUWdBM0FnZ2dBMElBTndJUUlBTkNBRGNDR0NBRFFRQTJBaUFnQkVId0FHb2lCU0FDS0FJQU5nSUFRUUFnQVNBRklBUWdBeENFQWtFQVNBUi9RWDhGQW44Z0FDZ0NUQnBCQUFzaEFpQUFRUUVRaFFJYUlBQWdBQ2dDQUNJR1FWOXhOZ0lBSUFBZ0FTQUZJQVFnQXhDRUFpRUJJQUFnQUNnQ0FDSURJQVpCSUhGeU5nSUFJQU5CSUhFRWYwRi9CU0FCQ3dzaEFDQUVKQVFnQUFzOEFRSi9Ba0FnQUNnQ0FDSURCRUFnQUNFQ0EwQWdBU0FERUhSRkRRSWdBa0VFYWlJQ0tBSUFJZ01OQUFzRklBQWhBZ3NMSUFJZ0FHdEJBblVMYndFRGZ5QUFJQUZyUVFKMUlBSkpCRUFEUUNBQUlBSkJmMm9pQWtFQ2RHb2dBU0FDUVFKMGFpZ0NBRFlDQUNBQ0RRQUxCU0FDQkVBZ0FDRURBMEFnQVVFRWFpRUVJQU5CQkdvaEJTQURJQUVvQWdBMkFnQWdBa0YvYWlJQ0JFQWdCQ0VCSUFVaEF3d0JDd3NMQ3lBQUN6QUJBbjhnQWdSQUlBQWhBd05BSUFOQkJHb2hCQ0FESUFFMkFnQWdBa0YvYWlJQ0JFQWdCQ0VEREFFTEN3c2dBQXVUQWdFQmZ3SkFBa0FnQVNBQWMwRURjUTBBSUFKQkFFY2lBeUFCUVFOeFFRQkhjUVJBQTBBZ0FDQUJMQUFBSWdNNkFBQWdBMFVOQXlBQVFRRnFJUUFnQWtGL2FpSUNRUUJISWdNZ0FVRUJhaUlCUVFOeFFRQkhjUTBBQ3dzZ0F3UkFJQUVzQUFBRVFDQUNRUU5MQkVBRFFDQUJLQUlBSWdOQmdJR0NoSGh4UVlDQmdvUjRjeUFEUWYvOSszZHFjUTBFSUFBZ0F6WUNBQ0FCUVFScUlRRWdBRUVFYWlFQUlBSkJmR29pQWtFRFN3MEFDd3NNQWdzRlFRQWhBZ3NNQVFzZ0FnUkFJQUVoQXlBQ0lRRURRQ0FBSUFNc0FBQWlBam9BQUNBQ1JRUkFJQUVoQWd3REN5QURRUUZxSVFNZ0FFRUJhaUVBSUFGQmYyb2lBUTBBUVFBaEFnc0ZRUUFoQWdzTElBQkJBQ0FDRUZRYUlBQUxhUUVEZnlBQUlBQVFXVUVDZEdvaEF3SkFJQUlFUUNBQ0lRUWdBU0VDSUFNaEFRTkFJQUlvQWdBaUJVVU5BaUFDUVFScUlRSWdBVUVFYWlFRElBRWdCVFlDQUNBRVFYOXFJZ1FFUUNBRElRRU1BUVVnQXlFQkN3c0ZJQU1oQVFzTElBRkJBRFlDQUNBQUN6SUFBa0FnQWdSQUEwQWdBQ2dDQUNBQlJnMENJQUJCQkdvaEFDQUNRWDlxSWdJTkFFRUFJUUFMQlVFQUlRQUxDeUFBQzNVQkFuOENmeUFCS0FJQUlnSUVmeUFCS0FJRVJRUkFJQUFnQWhCMElnRUVRQ0FCSUFCclFRSjFEQU1GSUFBUVdRd0RDd0FMQWtBZ0FDZ0NBQ0lEQkVBZ0FDRUNBMEFnQVNBREVIUU5BaUFDUVFScUlnSW9BZ0FpQXcwQUN3VWdBQ0VDQ3dzZ0FpQUFhMEVDZFFVZ0FCQlpDd3NpQUF0REFRRi9Jd1FoQWlNRVFSQnFKQVFnQWlBQU5nSUFJQUlnQVRZQ0JFSFRBQ0FDRUNnaUFFR0FZRXNFUUVHSXZBTkJBQ0FBYXpZQ0FFRi9JUUFMSUFJa0JDQUFDNVFCQVFKL0l3UWhBaU1FUVpBZ2FpUUVJQUpCQ0dvaEF3SkFBa0FnQUFSQUlBRUVRQXdDQlVHSXZBTkJGallDQUVFQUlRQUxCVUdBSUNFQklBTWhBQXdCQ3d3QkN5QUNJQUEyQWdBZ0FpQUJOZ0lFUWJjQklBSVFJeUlCUVlCZ1N3Ui9RWWk4QTBFQUlBRnJOZ0lBUVg4RklBRUxRUUJJQkVCQkFDRUFCU0FBSUFOR0JFQWdBeENIQWlFQUN3c0xJQUlrQkNBQUN6MEJBWDhnQUVIL0FYRWlBVUdBQVVrRWZ5QUJCU0FBUVJoMFFSaDFRZisvQTNFaEFTQUFRWDlIUWF3aktBSUFLQUlBUlhFRWZ5QUJCVUYvQ3dzTHpnTUJBMzhqQkNFR0l3UkJFR29rQkFKQUlBQUVRQUpBSUFKQkEwc0VRQ0FDSVFRZ0FTZ0NBQ0VEQTBBQ1FDQURLQUlBSWdWQmYycEIvZ0JMQkg4Z0JVVU5BU0FBSUFWQkFCQ1JBU0lGUVg5R0JFQkJmeUVDREFjTElBUWdCV3NoQkNBQUlBVnFCU0FBSUFVNkFBQWdCRUYvYWlFRUlBRW9BZ0FoQXlBQVFRRnFDeUVBSUFFZ0EwRUVhaUlETmdJQUlBUkJBMHNOQVNBRUlRTU1Bd3NMSUFCQkFEb0FBQ0FCUVFBMkFnQWdBaUFFYXlFQ0RBTUZJQUloQXdzTElBTUVRQ0FBSVFRZ0FTZ0NBQ0VBQWtBQ1FBTkFJQUFvQWdBaUJVRi9ha0grQUVzRWZ5QUZSUTBDSUFZZ0JVRUFFSkVCSWdWQmYwWUVRRUYvSVFJTUJ3c2dBeUFGU1EwRElBUWdBQ2dDQUVFQUVKRUJHaUFFSUFWcUlRUWdBeUFGYXdVZ0JDQUZPZ0FBSUFSQkFXb2hCQ0FCS0FJQUlRQWdBMEYvYWdzaEF5QUJJQUJCQkdvaUFEWUNBQ0FERFFBTUJRc0FDeUFFUVFBNkFBQWdBVUVBTmdJQUlBSWdBMnNoQWd3REN5QUNJQU5ySVFJTEJTQUJLQUlBSWdBb0FnQWlBUVJBUVFBaEFnTkFJQUZCL3dCTEJFQWdCaUFCUVFBUWtRRWlBVUYvUmdSQVFYOGhBZ3dGQ3dWQkFTRUJDeUFCSUFKcUlRSWdBRUVFYWlJQUtBSUFJZ0VOQUFzRlFRQWhBZ3NMQ3lBR0pBUWdBZ3ZsQ2dFVGZ5QUJLQUlBSVFRQ2Z3SkFJQU5GRFFBZ0F5Z0NBQ0lGUlEwQUlBQUVmeUFEUVFBMkFnQWdCU0VQSUFBaEN5QUNJUklnQkNFSFFTc0ZJQVVoQ1NBRUlRZ2dBaUVOUVJrTERBRUxJQUJCQUVjaEEwR3NJeWdDQUNnQ0FBUkFJQU1FUUNBQUlSUWdBaUVUSUFRaERrRVBEQUlGSUFRaEZTQUNJUlpCRGd3Q0N3QUxJQU5GQkVBZ0JCQnVJUXhCT3d3QkN3SkFJQUlFUUNBRUlRTWdBQ0VGSUFJaEJBTkFJQU1zQUFBaUNnUkFJQU5CQVdvaEF5QUZRUVJxSVFZZ0JTQUtRZisvQTNFMkFnQWdCRUYvYWlJRVJRMERJQVloQlF3QkN3c2dCVUVBTmdJQUlBRkJBRFlDQUNBQ0lBUnJJUXhCT3d3Q0JTQUVJUU1MQ3lBQklBTTJBZ0FnQWlFTVFUc0xJUU1EUUFKQUFrQUNRQ0FEUVE1R0JFQWdGU0VFSUJZaEF3TkFJQVFzQUFBaUJVSC9BWEZCZjJwQi93QkpCRUFnQkVFRGNVVUVRQ0FFS0FJQUlnWkIvd0Z4SVFVZ0JrSC8vZnQzYWlBR2NrR0FnWUtFZUhGRkJFQURRQ0FEUVh4cUlRTWdCRUVFYWlJRUtBSUFJZ1ZCLy8zN2Qyb2dCWEpCZ0lHQ2hIaHhSUTBBQ3lBRlFmOEJjU0VGQ3dzTElBVkIvd0Z4SWdWQmYycEIvd0JKQkVBZ0JFRUJhaUVFSUFOQmYyb2hBd3dCQ3dzZ0JVRytmbW9pQlVFeVN3UkFJQVFoQlNBQUlRWU1Bd1VnQlVFQ2RFR2tIbW9vQWdBaENTQUVRUUZxSVFnZ0F5RU5RUmtoQXd3RkN3QUZJQU5CRDBZRVFBSkFJQk1FUUNBVUlRUWdFeUVESUE0aEJRTkFBa0FDUUNBRkxBQUFJZ1pCL3dGeFFYOXFRZjhBU1FSQUlBTkJCRXNnQlVFRGNVVnhCRUFDUUFOQUlBVW9BZ0FpQmtILy9mdDNhaUFHY2tHQWdZS0VlSEVOQVNBRUlBWkIvd0Z4TmdJQUlBUWdCUzBBQVRZQ0JDQUVJQVV0QUFJMkFnZ2dCVUVFYWlFS0lBUkJFR29oQmlBRUlBVXRBQU0yQWd3Z0EwRjhhaUlEUVFSTEJFQWdCaUVFSUFvaEJRd0JDd3NnQmlFRUlBb2lCU3dBQUNFR0RBTUxJQVpCL3dGeElRWUxDd3NnQmtIL0FYRWlDa0YvYWtIL0FFOE5BQ0FGUVFGcUlRVWdCRUVFYWlFR0lBUWdDallDQUNBRFFYOXFJZ05GRFFNZ0JpRUVEQUVMQ3lBS1FiNSthaUlHUVRKTEJFQWdCQ0VHREFZTElBWkJBblJCcEI1cUtBSUFJUThnQkNFTElBTWhFaUFGUVFGcUlRZEJLeUVEREFjRklBNGhCUXNMSUFFZ0JUWUNBQ0FDSVF4Qk95RUREQVVGSUFOQkdVWUVRQ0FJTFFBQVFRTjJJZ05CY0dvZ0F5QUpRUnAxYW5KQkIwc0VRQ0FBSVFNZ0NTRUdJQWdoQlNBTklRUU1CQVVnQ0VFQmFpRURJQWxCZ0lDQUVIRUVmeUFETEFBQVFjQUJjVUdBQVVjRVFDQUFJUU1nQ1NFR0lBZ2hCU0FOSVFRTUJnc2dDRUVDYWlFRElBbEJnSUFnY1FSL0lBTXNBQUJCd0FGeFFZQUJSd1JBSUFBaEF5QUpJUVlnQ0NFRklBMGhCQXdIQ3lBSVFRTnFCU0FEQ3dVZ0F3c2hGU0FOUVg5cUlSWkJEaUVEREFjTEFBVWdBMEVyUmdSQUlBY3RBQUFpQlVFRGRpSURRWEJxSUFNZ0QwRWFkV3B5UVFkTEJFQWdDeUVESUE4aEJpQUhJUVVnRWlFRURBVUZJQWRCQVdvaEJDQUZRWUIvYWlBUFFRWjBjaUlEUVFCSUJFQWdCQzBBQUVHQWYyb2lCVUUvU3dSQUlBZEJmMm9oRUNBTElSRU1DUXNnQjBFQ2FpRUVJQVVnQTBFR2RISWlBMEVBU0FSQUlBUXRBQUJCZ0g5cUlnUkJQMHNFUUNBSFFYOXFJUkFnQ3lFUkRBb0ZJQWRCQTJvaERpQUVJQU5CQm5SeUlRTUxCU0FFSVE0TEJTQUVJUTRMSUFzZ0F6WUNBQ0FMUVFScUlSUWdFa0YvYWlFVFFROGhBd3dJQ3dBRklBTkJPMFlFUUNBTUR3c0xDd3NMREFJTElBVkJmMm9oQlNBR0JFQWdCU0VRSUFNaEVRVWdBeUVHSUFRaEF3d0JDd3dCQ3lBRkxBQUFCRUFnQlNFUUlBWWhFUVVnQmdSQUlBWkJBRFlDQUNBQlFRQTJBZ0FMSUFJZ0Eyc2hERUU3SVFNTUFnc0xRWWk4QTBIVUFEWUNBQ0FSQkVBZ0FTQVFOZ0lBQzBGL0lReEJPeUVEREFBTEFBdUpBUUVDZnlBQVJRUkFEd3NnQUNnQ0FFVUVRQThMSUFBUVdTRUVBa0FDUUFOQUFrQWdCRUVBVEFSQUlBQWhBd3dCQ3lBQUlBUkJmMm9pQTBFQ2RHb29BZ0JCTDBZTkFpQURJUVFNQVFzTERBRUxJQUFnQkVFQ2RHb2hBd3NnQTBFdUVLMEJJZ01FUUNBRFFRQTJBZ0FMSUFGRkJFQVBDeUFBUWVRTUlBSVFlQm9nQUNBQklBSVFlQm9McFFJQkEzOGpCQ0VFSXdSQkVHb2tCQUpBSUFCQkJrc0VmMEVBQlVHWXZBTVFIQ0FBUVFaSEJFQWdBQ0FCRUlzQ0lRQkJtTHdERUNvTUFnc2dBUVJBSUFSQm5Pb0FLUUFBTndBQUlBUkJwT29BS1FBQU53QUlRUUFoQUFOQUlBRkJPeENSQWlJRElBRnJJZ0pCRUVnRVFDQUVJQUVnQWhCVEdpQUVJQUpxUVFBNkFBQWdBMEVCYWlFQ0lBTXNBQUFFUUNBQ0lRRUxDeUFBSUFRUWl3SWFJQUJCQVdvaUFFRUdSdzBBQ3d0QkFDRUJRYXlLQkNFQUEwQWdBVUVDZEVId3V3TnFLQUlBSWdKQkNHb2hBeUFDQkg4Z0F3VkJyT29BSWdNTEVHNGhBaUFBSUFNZ0FoQlRHaUFBSUFKcUlnTkJPem9BQUNBQUlBSkJBV3BxSVFBZ0FVRUJhaUlCUVFaSERRQUxJQU5CQURvQUFFR1l2QU1RS2tHc2lnUUxJUUFMSUFRa0JDQUFDem9CQW44Z0FDZ0NFQ0FBUVJScUlnTW9BZ0FpQkdzaUFDQUNTd1JBSUFJaEFBc2dCQ0FCSUFBUVV4b2dBeUFES0FJQUlBQnFOZ0lBSUFJTC9CY0RFMzhDZmdKOEl3UWhEU01FUWJBRWFpUUVJQTFCQURZQ0FDQUJ2VUlBVXdSQUlBR2FJUUZCQVNFUlFlZnBBQ0VPQlNBRVFZQVFjVVVoQmlBRVFRRnhCSDlCN2VrQUJVSG82UUFMSVE0Z0JFR0JFSEZCQUVjaEVTQUdSUVJBUWVycEFDRU9Dd3NnRFVFSWFpRUpJQTFCakFScUlnOGhFaUFOUVlBRWFpSUlRUXhxSVJNQ2Z5QUJ2VUtBZ0lDQWdJQ0ErUDhBZzBLQWdJQ0FnSUNBK1A4QVVRUi9JQVZCSUhGQkFFY2lBd1IvUWZycEFBVkIvdWtBQ3lFRklBRWdBV0loQmlBREJIOUJndW9BQlVHRzZnQUxJUWtnQUVFZ0lBSWdFVUVEYWlJRElBUkIvLzk3Y1JCbUlBQWdEaUFSRUdNZ0FDQUdCSDhnQ1FVZ0JRdEJBeEJqSUFCQklDQUNJQU1nQkVHQXdBQnpFR1lnQXdVZ0FTQU5FSTRDUkFBQUFBQUFBQUJBb2lJQlJBQUFBQUFBQUFBQVlpSUdCRUFnRFNBTktBSUFRWDlxTmdJQUN5QUZRU0J5SWd0QjRRQkdCRUFnRGtFSmFpRUdJQVZCSUhFaUJ3UkFJQVloRGdzZ0EwRUxTMEVNSUFOcklnWkZja1VFUUVRQUFBQUFBQUFnUUNFYkEwQWdHMFFBQUFBQUFBQXdRS0loR3lBR1FYOXFJZ1lOQUFzZ0Rpd0FBRUV0UmdSOElCc2dBWm9nRzZHZ21nVWdBU0Fib0NBYm9Rc2hBUXRCQUNBTktBSUFJZ2xySVFZZ0NVRUFTQVIvSUFZRklBa0xyQ0FURUpJQklnWWdFMFlFUUNBSVFRdHFJZ1pCTURvQUFBc2dFVUVDY2lFSUlBWkJmMm9nQ1VFZmRVRUNjVUVyYWpvQUFDQUdRWDVxSWdrZ0JVRVBham9BQUNBRFFRRklJUW9nQkVFSWNVVWhEQ0FQSVFVRFFDQUZJQWNnQWFvaUJrR0s2Z0JxTFFBQWNqb0FBQ0FCSUFhM29VUUFBQUFBQUFBd1FLSWhBU0FGUVFGcUlnWWdFbXRCQVVZRWZ5QU1JQW9nQVVRQUFBQUFBQUFBQUdGeGNRUi9JQVlGSUFaQkxqb0FBQ0FGUVFKcUN3VWdCZ3NoQlNBQlJBQUFBQUFBQUFBQVlnMEFDd0ovQWtBZ0EwVU5BRUYrSUJKcklBVnFJQU5PRFFBZ0EwRUNhaUVESUFVZ0Vtc01BUXNnQlNBU2F5SURDeUVHSUFCQklDQUNJQk1nQ1dzaUJ5QUlhaUFEYWlJRklBUVFaaUFBSUE0Z0NCQmpJQUJCTUNBQ0lBVWdCRUdBZ0FSekVHWWdBQ0FQSUFZUVl5QUFRVEFnQXlBR2EwRUFRUUFRWmlBQUlBa2dCeEJqSUFCQklDQUNJQVVnQkVHQXdBQnpFR1lnQlF3Q0N5QUdCRUFnRFNBTktBSUFRV1JxSWdjMkFnQWdBVVFBQUFBQUFBQ3dRYUloQVFVZ0RTZ0NBQ0VIQ3lBSlFhQUNhaUVHSUFkQkFFZ0VmeUFKQlNBR0lna0xJUWdEUUNBSUlBR3JJZ1kyQWdBZ0NFRUVhaUVJSUFFZ0JyaWhSQUFBQUFCbHpjMUJvaUlCUkFBQUFBQUFBQUFBWWcwQUN5QUhRUUJLQkVBZ0NTRUdBMEFnQjBFZFNBUi9JQWNGUVIwTElRd2dDRUY4YWlJSElBWlBCRUFnREswaEdVRUFJUW9EUUNBSElBY29BZ0N0SUJtR0lBcXRmQ0lhUW9DVTY5d0RnajRDQUNBYVFvQ1U2OXdEZ0tjaENpQUhRWHhxSWdjZ0JrOE5BQXNnQ2dSQUlBWkJmR29pQmlBS05nSUFDd3NEUUNBSUlBWkxCRUFnQ0VGOGFpSUhLQUlBUlFSQUlBY2hDQXdDQ3dzTElBMGdEU2dDQUNBTWF5SUhOZ0lBSUFkQkFFb05BQXNGSUFraEJnc2dBMEVBU0FSL1FRWUZJQU1MSVFvZ0IwRUFTQVJBSUFwQkdXcEJDVzFCQVdvaEVDQUxRZVlBUmlFVklBWWhBeUFJSVFZRFFFRUFJQWRySWd4QkNVNEVRRUVKSVF3TElBTWdCa2tFUUVFQklBeDBRWDlxSVJaQmdKVHIzQU1nREhZaEZFRUFJUWNnQXlFSUEwQWdDQ0FJS0FJQUloY2dESFlnQjJvMkFnQWdGeUFXY1NBVWJDRUhJQWhCQkdvaUNDQUdTUTBBQ3lBRFFRUnFJUWdnQXlnQ0FFVUVRQ0FJSVFNTElBY0VRQ0FHSUFjMkFnQWdCa0VFYWlFR0N3VWdBMEVFYWlFSUlBTW9BZ0JGQkVBZ0NDRURDd3NnRlFSL0lBa0ZJQU1MSWdnZ0VFRUNkR29oQnlBR0lBaHJRUUoxSUJCS0JFQWdCeUVHQ3lBTklBMG9BZ0FnREdvaUJ6WUNBQ0FIUVFCSURRQWdCaUVIQ3dVZ0JpRURJQWdoQndzZ0NTRU1JQU1nQjBrRVFDQU1JQU5yUVFKMVFRbHNJUVlnQXlnQ0FDSUlRUXBQQkVCQkNpRUpBMEFnQmtFQmFpRUdJQWdnQ1VFS2JDSUpUdzBBQ3dzRlFRQWhCZ3NnQzBIbkFFWWhGU0FLUVFCSElSWWdDaUFMUWVZQVJ3Ui9JQVlGUVFBTGF5QVdJQlZ4UVI5MFFSOTFhaUlKSUFjZ0RHdEJBblZCQ1d4QmQycElCSDhnQ1VHQXlBQnFJZ2xCQ1cwaEVDQUpRUWx2SWdsQkNFZ0VRRUVLSVFnRFFDQUpRUUZxSVFzZ0NFRUtiQ0VJSUFsQkIwZ0VRQ0FMSVFrTUFRc0xCVUVLSVFnTElBd2dFRUVDZEdwQmhHQnFJZ2tvQWdBaUVDQUljQ0VMSUFsQkJHb2dCMFlpRkNBTFJYRkZCRUFnRUNBSWJrRUJjUVI4UkFFQUFBQUFBRUJEQlVRQUFBQUFBQUJBUXdzaEhDQUxJQWhCQW0waUYwa2hHQ0FVSUFzZ0YwWnhCSHhFQUFBQUFBQUE4RDhGUkFBQUFBQUFBUGcvQ3lFQklCZ0VRRVFBQUFBQUFBRGdQeUVCQ3lBUkJFQWdISm9oR3lBT0xBQUFRUzFHSWhRRVFDQWJJUndMSUFHYUlSc2dGRVVFUUNBQklSc0xCU0FCSVJzTElBa2dFQ0FMYXlJTE5nSUFJQndpQVNBYm9DQUJZZ1JBSUFrZ0N5QUlhaUlHTmdJQUlBWkIvNVByM0FOTEJFQURRQ0FKUVFBMkFnQWdDVUY4YWlJSklBTkpCRUFnQTBGOGFpSURRUUEyQWdBTElBa2dDU2dDQUVFQmFpSUdOZ0lBSUFaQi81UHIzQU5MRFFBTEN5QU1JQU5yUVFKMVFRbHNJUVlnQXlnQ0FDSUxRUXBQQkVCQkNpRUlBMEFnQmtFQmFpRUdJQXNnQ0VFS2JDSUlUdzBBQ3dzTEN5QUdJUWdnQnlBSlFRUnFJZ1pOQkVBZ0J5RUdDeUFEQlNBR0lRZ2dCeUVHSUFNTElRa0RRQUpBSUFZZ0NVMEVRRUVBSVJBTUFRc2dCa0Y4YWlJREtBSUFCRUJCQVNFUUJTQURJUVlNQWdzTEMwRUFJQWhySVJRZ0ZRUkFJQW9nRmtFQmMwRUJjV29pQXlBSVNpQUlRWHRLY1FSL0lBVkJmMm9oQlNBRFFYOXFJQWhyQlNBRlFYNXFJUVVnQTBGL2Fnc2hBeUFFUVFoeElncEZCRUFnRUFSQUlBWkJmR29vQWdBaUN3UkFJQXRCQ25BRVFFRUFJUWNGUVFBaEIwRUtJUW9EUUNBSFFRRnFJUWNnQ3lBS1FRcHNJZ3B3UlEwQUN3c0ZRUWtoQndzRlFRa2hCd3NnQmlBTWEwRUNkVUVKYkVGM2FpRUtJQVZCSUhKQjVnQkdCRUFnQXlBS0lBZHJJZ2RCQUVvRWZ5QUhCVUVBSWdjTFRnUkFJQWNoQXdzRklBTWdDaUFJYWlBSGF5SUhRUUJLQkg4Z0J3VkJBQ0lIQzA0RVFDQUhJUU1MQzBFQUlRb0xCU0FLSVFNZ0JFRUljU0VLQ3lBRlFTQnlRZVlBUmlJVkJFQkJBQ0VISUFoQkFFd0VRRUVBSVFnTEJTQVRJQWhCQUVnRWZ5QVVCU0FJQzZ3Z0V4Q1NBU0lIYTBFQ1NBUkFBMEFnQjBGL2FpSUhRVEE2QUFBZ0V5QUhhMEVDU0EwQUN3c2dCMEYvYWlBSVFSOTFRUUp4UVN0cU9nQUFJQWRCZm1vaUJ5QUZPZ0FBSUJNZ0Iyc2hDQXNnQUVFZ0lBSWdFVUVCYWlBRGFpQURJQXB5SWhaQkFFZHFJQWhxSWdzZ0JCQm1JQUFnRGlBUkVHTWdBRUV3SUFJZ0N5QUVRWUNBQkhNUVppQVZCRUFnRDBFSmFpSU9JUW9nRDBFSWFpRUlJQWtnREVzRWZ5QU1CU0FKQ3lJSElRa0RRQ0FKS0FJQXJTQU9FSklCSVFVZ0NTQUhSZ1JBSUFVZ0RrWUVRQ0FJUVRBNkFBQWdDQ0VGQ3dVZ0JTQVBTd1JBSUE5Qk1DQUZJQkpyRUZRYUEwQWdCVUYvYWlJRklBOUxEUUFMQ3dzZ0FDQUZJQW9nQldzUVl5QUpRUVJxSWdVZ0RFMEVRQ0FGSVFrTUFRc0xJQllFUUNBQVFacnFBRUVCRUdNTElBVWdCa2tnQTBFQVNuRUVRQU5BSUFVb0FnQ3RJQTRRa2dFaUNTQVBTd1JBSUE5Qk1DQUpJQkpyRUZRYUEwQWdDVUYvYWlJSklBOUxEUUFMQ3lBQUlBa2dBMEVKU0FSL0lBTUZRUWtMRUdNZ0EwRjNhaUVKSUFWQkJHb2lCU0FHU1NBRFFRbEtjUVJBSUFraEF3d0JCU0FKSVFNTEN3c2dBRUV3SUFOQkNXcEJDVUVBRUdZRklBbEJCR29oQlNBUUJIOGdCZ1VnQlFzaERDQURRWDlLQkVBZ0NrVWhFU0FQUVFscUlnb2hFRUVBSUJKcklSSWdEMEVJYWlFT0lBTWhCU0FKSVFZRFFDQUdLQUlBclNBS0VKSUJJZ01nQ2tZRVFDQU9RVEE2QUFBZ0RpRURDd0pBSUFZZ0NVWUVRQ0FEUVFGcUlRZ2dBQ0FEUVFFUVl5QVJJQVZCQVVoeEJFQWdDQ0VEREFJTElBQkJtdW9BUVFFUVl5QUlJUU1GSUFNZ0QwME5BU0FQUVRBZ0F5QVNhaEJVR2dOQUlBTkJmMm9pQXlBUFN3MEFDd3NMSUFBZ0F5QUZJQkFnQTJzaUEwb0VmeUFEQlNBRkN4QmpJQVpCQkdvaUJpQU1TU0FGSUFOcklnVkJmMHB4RFFBZ0JTRURDd3NnQUVFd0lBTkJFbXBCRWtFQUVHWWdBQ0FISUJNZ0Iyc1FZd3NnQUVFZ0lBSWdDeUFFUVlEQUFITVFaaUFMQ3dzaEFDQU5KQVFnQUNBQ1NBUi9JQUlGSUFBTEN5NEFJQUJDQUZJRVFBTkFJQUZCZjJvaUFTQUFwMEVIY1VFd2Nqb0FBQ0FBUWdPSUlnQkNBRklOQUFzTElBRUxOZ0FnQUVJQVVnUkFBMEFnQVVGL2FpSUJJQUNuUVE5eFFZcnFBR290QUFBZ0FuSTZBQUFnQUVJRWlDSUFRZ0JTRFFBTEN5QUJDL1FDQVFOL0l3UWhCQ01FUVlBQmFpUUVJQVJCL0FCcUlRVWdCRUhrSXlrQ0FEY0NBQ0FFUWV3aktRSUFOd0lJSUFSQjlDTXBBZ0EzQWhBZ0JFSDhJeWtDQURjQ0dDQUVRWVFrS1FJQU53SWdJQVJCakNRcEFnQTNBaWdnQkVHVUpDa0NBRGNDTUNBRVFad2tLUUlBTndJNElBUkJRR3RCcENRcEFnQTNBZ0FnQkVHc0pDa0NBRGNDU0NBRVFiUWtLUUlBTndKUUlBUkJ2Q1FwQWdBM0FsZ2dCRUhFSkNrQ0FEY0NZQ0FFUWN3a0tRSUFOd0pvSUFSQjFDUXBBZ0EzQW5BZ0JFSGNKQ2dDQURZQ2VBSkFBa0FnQVVGL2FrSCsvLy8vQjAwTkFDQUJCRUJCaUx3RFFjc0FOZ0lBUVg4aEFBVWdCU0VBUVFFaEFRd0JDd3dCQ3lBRUlBRkJmaUFBYXlJRlN3Ui9JQVVpQVFVZ0FRczJBakFnQkVFVWFpSUZJQUEyQWdBZ0JDQUFOZ0lzSUFSQkVHb2lCaUFBSUFGcUlnQTJBZ0FnQkNBQU5nSWNJQVFnQWlBREVNNEJJUUFnQVFSQUlBVW9BZ0FpQVNBQklBWW9BZ0JHUVI5MFFSOTFha0VBT2dBQUN3c2dCQ1FFSUFBTEtRRUJmeU1FSVFRakJFRVFhaVFFSUFRZ0F6WUNBQ0FBSUFFZ0FpQUVFTUFESVFBZ0JDUUVJQUFMMWdFQkFuOENRQ0FCSUFCelFRTnhSUVJBSUFGQkEzRUVRQU5BSUFBZ0FTd0FBQ0lDT2dBQUlBSkZEUU1nQUVFQmFpRUFJQUZCQVdvaUFVRURjUTBBQ3dzZ0FTZ0NBQ0lDUVlDQmdvUjRjVUdBZ1lLRWVITWdBa0gvL2Z0M2FuRkZCRUFEUUNBQVFRUnFJUU1nQUNBQ05nSUFJQUZCQkdvaUFTZ0NBQ0lDUVlDQmdvUjRjVUdBZ1lLRWVITWdBa0gvL2Z0M2FuRUVRQ0FESVFBRklBTWhBQXdCQ3dzTEN5QUFJQUVzQUFBaUFqb0FBQ0FDQkVBRFFDQUFRUUZxSWdBZ0FVRUJhaUlCTEFBQUlnSTZBQUFnQWcwQUN3c0xJQUFMandJQkEzOGdBVUgvQVhFaEJBSkFBa0FnQWtFQVJ5SURJQUJCQTNGQkFFZHhCRUFnQVVIL0FYRWhCUU5BSUFBdEFBQWdCVVlOQWlBQ1FYOXFJZ0pCQUVjaUF5QUFRUUZxSWdCQkEzRkJBRWR4RFFBTEN5QUREUUJCQUNFQkRBRUxJQUF0QUFBZ0FVSC9BWEVpQTBZRVFDQUNJUUVGSUFSQmdZS0VDR3doQkFKQUFrQWdBa0VEU3dSQUlBSWhBUU5BSUFBb0FnQWdCSE1pQWtHQWdZS0VlSEZCZ0lHQ2hIaHpJQUpCLy8zN2QycHhSUVJBSUFCQkJHb2hBQ0FCUVh4cUlnRkJBMHNOQVF3REN3c0ZJQUloQVF3QkN3d0JDeUFCUlFSQVFRQWhBUXdEQ3dzRFFDQUFMUUFBSUFOR0RRSWdBRUVCYWlFQUlBRkJmMm9pQVEwQVFRQWhBUXNMQ3lBQkJIOGdBQVZCQUFzTFF3RUJmeU1FSVFJakJFRVFhaVFFSUFJZ0FEWUNBQ0FDSUFFMkFnUkIyd0FnQWhBcElnQkJnR0JMQkVCQmlMd0RRUUFnQUdzMkFnQkJmeUVBQ3lBQ0pBUWdBQXVXQmdFSmZ5TUVJUUlqQkVHUUFtb2tCQ0FDUVFocUlRVWdBaUVHQWtBZ0FTd0FBRVVFUUVHZTVRQVFPeUlCQkVBZ0FTd0FBQTBDQ3lBQVFReHNRYVhsQUdvUU95SUJCRUFnQVN3QUFBMENDMEh0NVFBUU95SUJCRUFnQVN3QUFBMENDMEh5NVFBaEFRc0xRUUFoQWdOQUFrQUNRQUpBSUFFZ0Ftb3NBQUFPTUFBQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFBRUxJQUloQkF3QkN5QUNRUUZxSWdKQkQwa05BU0FDSVFRTEN3SkFBa0FDUUNBQkxBQUFJZ0pCTGtZRVFFSHk1UUFoQVFVZ0FTQUVhaXdBQUFSQVFmTGxBQ0VCQlNBQ1FjTUFSdzBDQ3dzZ0FTd0FBVVVOQVFzZ0FVSHk1UUFRaXdGRkRRQWdBVUg2NVFBUWl3RkZEUUJCakx3REtBSUFJZ0lFUUFOQUlBRWdBa0VJYWhDTEFVVU5BeUFDS0FJWUlnSU5BQXNMUVpDOEF4QWNBa0JCakx3REtBSUFJZ0lFUUFOQUlBRWdBa0VJYWhDTEFRUkFJQUlvQWhnaUFrVU5Bd3dCQ3d0QmtMd0RFQ29NQXdzTEFrQUNRRUhRdXdNb0FnQU5BRUdBNWdBUU95SUNSUTBBSUFJc0FBQkZEUUJCL2dFZ0JHc2hDU0FFUVFGcUlRb0RRQUpBSUFKQk9oQ1JBaUlITEFBQUlRTWdCeUFDYXlBRFFRQkhRUjkwUVI5MWFpSUlJQWxKQkVBZ0JTQUNJQWdRVXhvZ0JTQUlhaUlDUVM4NkFBQWdBa0VCYWlBQklBUVFVeG9nQlNBS0lBaHFha0VBT2dBQUlBVWdCaEFkSWdNTkFTQUhMQUFBSVFNTElBY2dBMEgvQVhGQkFFZHFJZ0lzQUFBTkFRd0NDd3RCSEJCc0lnSUVRQ0FDSUFNMkFnQWdBaUFHS0FJQU5nSUVJQUpCQ0dvaUF5QUJJQVFRVXhvZ0F5QUVha0VBT2dBQUlBSkJqTHdES0FJQU5nSVlRWXk4QXlBQ05nSUFJQUloQVFVZ0F5QUdLQUlBRU1RREdnd0JDd3dCQzBFY0VHd2lBZ1JBSUFKQjNCMG9BZ0EyQWdBZ0FrSGdIU2dDQURZQ0JDQUNRUWhxSWdNZ0FTQUVFRk1hSUFNZ0JHcEJBRG9BQUNBQ1FZeThBeWdDQURZQ0dFR012QU1nQWpZQ0FBc2dBaUVCQzBHUXZBTVFLaUFBSUFGeUJIOGdBUVZCM0IwTElRSU1BUXNnQUVVRVFDQUJMQUFCUVM1R0JFQkIzQjBoQWd3Q0N3dEJBQ0VDQ3lBR0pBUWdBZ3VLQXdFS2Z5QUFLQUlJSUFBb0FnQkJvdHJ2MXdacUlnWVFqQUVoQkNBQUtBSU1JQVlRakFFaEF5QUFLQUlRSUFZUWpBRWhCd0pBSUFRZ0FVRUNka2tFUUNBRElBRWdCRUVDZEdzaUJVa2dCeUFGU1hFRVFDQUhJQU55UVFOeEJFQkJBQ0VCQlNBRFFRSjJJUW9nQjBFQ2RpRUxRUUFoQlFOQUFrQWdBQ0FGSUFSQkFYWWlCMm9pREVFQmRDSUlJQXBxSWdOQkFuUnFLQUlBSUFZUWpBRWhDU0FBSUFOQkFXcEJBblJxS0FJQUlBWVFqQUVpQXlBQlNTQUpJQUVnQTJ0SmNVVUVRRUVBSVFFTUJnc2dBQ0FESUFscWFpd0FBQVJBUVFBaEFRd0dDeUFDSUFBZ0Eyb1Fpd0VpQTBVTkFDQUVRUUZHSVFnZ0JDQUhheUVFSUFOQkFFZ2lBd1JBSUFjaEJBc2dBMFVFUUNBTUlRVUxJQWhGRFFGQkFDRUJEQVVMQ3lBQUlBZ2dDMm9pQWtFQ2RHb29BZ0FnQmhDTUFTRUZJQUFnQWtFQmFrRUNkR29vQWdBZ0JoQ01BU0lDSUFGSklBVWdBU0FDYTBseEJFQWdBQ0FDYWlFQklBQWdBaUFGYW1vc0FBQUVRRUVBSVFFTEJVRUFJUUVMQ3dWQkFDRUJDd1ZCQUNFQkN3c2dBUXVlQVFFQ2Z3SkFBa0FDUUFOQUlBSkJ1dFlBYWkwQUFDQUFSZzBCSUFKQkFXb2lBa0hYQUVjTkFFR1Mxd0FoQUVIWEFDRUNEQUlMQUFzZ0FnUkFRWkxYQUNFQURBRUZRWkxYQUNFQUN3d0JDd05BSUFBaEF3TkFJQU5CQVdvaEFDQURMQUFBQkVBZ0FDRUREQUVMQ3lBQ1FYOXFJZ0lOQUFzTElBRW9BaFFpQVFSL0lBRW9BZ0FnQVNnQ0JDQUFFTVlEQlVFQUN5SUJCSDhnQVFVZ0FBc0xQQUFnQUVHQWdBaEpCSDhnQUVFSWRrR2FQMm90QUFCQkJYUWdBRUVEZGtFZmNYSkJtajlxTFFBQUlBQkJCM0YyUVFGeEJTQUFRZjcvQzBrTEM3SURBUXQvSXdRaEJpTUVRVEJxSkFRZ0JrRVFhaUVISUFaQklHb2lBeUFBUVJ4cUlna29BZ0FpQkRZQ0FDQURJQUJCRkdvaUNpZ0NBQ0FFYXlJRU5nSUVJQU1nQVRZQ0NDQURJQUkyQWd3Z0JpSUlJQUJCUEdvaURDZ0NBRFlDQUNBSUlBTTJBZ1FnQ0VFQ05nSUlBa0FDUUNBRUlBSnFJZ1pCa2dFZ0NCQWlJZ1ZCZ0dCTEJIOUJpTHdEUVFBZ0JXczJBZ0JCZnlJRkJTQUZDMFlOQUVFQ0lRUWdBeUVCSUFVaEF3TkFJQU5CQUU0RVFDQUdJQU5ySVFZZ0FVRUlhaUVGSUFNZ0FTZ0NCQ0lOU3lJTEJFQWdCU0VCQ3lBRUlBdEJIM1JCSDNWcUlRUWdBU0FCS0FJQUlBTWdDd1IvSUEwRlFRQUxheUlEYWpZQ0FDQUJRUVJxSWdVZ0JTZ0NBQ0FEYXpZQ0FDQUhJQXdvQWdBMkFnQWdCeUFCTmdJRUlBY2dCRFlDQ0NBR1FaSUJJQWNRSWlJRFFZQmdTd1IvUVlpOEEwRUFJQU5yTmdJQVFYOGlBd1VnQXd0R0RRSU1BUXNMSUFCQkFEWUNFQ0FKUVFBMkFnQWdDa0VBTmdJQUlBQWdBQ2dDQUVFZ2NqWUNBQ0FFUVFKR0JIOUJBQVVnQWlBQktBSUVhd3NoQWd3QkN5QUFJQUFvQWl3aUFTQUFLQUl3YWpZQ0VDQUpJQUUyQWdBZ0NpQUJOZ0lBQ3lBSUpBUWdBZ3NHQUVHSXZBTUxlQUVCZnlNRUlRTWpCRUVnYWlRRUlBTWdBQ2dDUERZQ0FDQURRUUEyQWdRZ0F5QUJOZ0lJSUFNZ0EwRVVhaUlBTmdJTUlBTWdBallDRUVHTUFTQURFQ0FpQVVHQVlFc0VmMEdJdkFOQkFDQUJhellDQUVGL0JTQUJDMEVBU0FSL0lBQkJmellDQUVGL0JTQUFLQUlBQ3lFQUlBTWtCQ0FBQy80QkFRWi9Jd1FoQkNNRVFTQnFKQVFnQkVFUWFpSUZJQUUyQWdBZ0JVRUVhaUlISUFJZ0FFRXdhaUlJS0FJQUlnTkJBRWRyTmdJQUlBVWdBRUVzYWlJR0tBSUFOZ0lJSUFVZ0F6WUNEQ0FFSUFBb0FqdzJBZ0FnQkNBRk5nSUVJQVJCQWpZQ0NFR1JBU0FFRUNFaUEwR0FZRXNFZjBHSXZBTkJBQ0FEYXpZQ0FFRi9JZ01GSUFNTFFRRklCRUFnQUNBQUtBSUFJQU5CTUhGQkVITnlOZ0lBSUFNaEFnVWdBeUFIS0FJQUlnVkxCRUFnQUVFRWFpSUhJQVlvQWdBaUJqWUNBQ0FBSUFZZ0F5QUZhMm8yQWdnZ0NDZ0NBQVJBSUFjZ0JrRUJhallDQUNBQklBSkJmMnBxSUFZc0FBQTZBQUFMQlNBRElRSUxDeUFFSkFRZ0FncytBUUYvSXdRaEFTTUVRUkJxSkFRZ0FTQUFLQUk4TmdJQVFRWWdBUkFtSWdCQmdHQkxCRUJCaUx3RFFRQWdBR3MyQWdCQmZ5RUFDeUFCSkFRZ0FBdXlCd0VLZndKQUlBQkJCR29pQnlnQ0FDSUdRWGh4SVFJZ0JrRURjVVVFUUNBQlFZQUNTUTBCSUFJZ0FVRUVhazhFUUNBQ0lBRnJRYUM3QXlnQ0FFRUJkRTBFUUNBQUR3c0xEQUVMSUFBZ0Ftb2hCQ0FDSUFGUEJFQWdBaUFCYXlJQ1FROU5CRUFnQUE4TElBY2dCa0VCY1NBQmNrRUNjallDQUNBQUlBRnFJZ0VnQWtFRGNqWUNCQ0FFUVFScUlnTWdBeWdDQUVFQmNqWUNBQ0FCSUFJUWxRSWdBQThMUWRpM0F5Z0NBQ0FFUmdSQVFjeTNBeWdDQUNBQ2FpSUNJQUZORFFFZ0J5QUdRUUZ4SUFGeVFRSnlOZ0lBSUFBZ0FXb2lBeUFDSUFGcklnRkJBWEkyQWdSQjJMY0RJQU0yQWdCQnpMY0RJQUUyQWdBZ0FBOExRZFMzQXlnQ0FDQUVSZ1JBUWNpM0F5Z0NBQ0FDYWlJRElBRkpEUUVnQXlBQmF5SUNRUTlMQkVBZ0J5QUdRUUZ4SUFGeVFRSnlOZ0lBSUFBZ0FXb2lBU0FDUVFGeU5nSUVJQUFnQTJvaUF5QUNOZ0lBSUFOQkJHb2lBeUFES0FJQVFYNXhOZ0lBQlNBSElBWkJBWEVnQTNKQkFuSTJBZ0FnQUNBRGFrRUVhaUlCSUFFb0FnQkJBWEkyQWdCQkFDRUJRUUFoQWd0QnlMY0RJQUkyQWdCQjFMY0RJQUUyQWdBZ0FBOExJQVFvQWdRaUEwRUNjUTBBSUFOQmVIRWdBbW9pQ0NBQlNRMEFJQWdnQVdzaENpQURRUU4ySVFVQ1FDQURRWUFDU1FSQUlBUW9BZ3dpQWlBRUtBSUlJZ05HQkVCQndMY0RRY0MzQXlnQ0FFRUJJQVYwUVg5emNUWUNBQVVnQXlBQ05nSU1JQUlnQXpZQ0NBc0ZJQVFvQWhnaENRSkFJQVFvQWd3aUFpQUVSZ1JBSUFSQkVHb2lBMEVFYWlJRktBSUFJZ0lFUUNBRklRTUZJQU1vQWdBaUFrVUVRRUVBSVFJTUF3c0xBMEFnQWtFVWFpSUZLQUlBSWdzRVFDQUxJUUlnQlNFRERBRUxJQUpCRUdvaUJTZ0NBQ0lMQkVBZ0N5RUNJQVVoQXd3QkN3c2dBMEVBTmdJQUJTQUVLQUlJSWdNZ0FqWUNEQ0FDSUFNMkFnZ0xDeUFKQkVBZ0JDZ0NIQ0lEUVFKMFFmQzVBMm9pQlNnQ0FDQUVSZ1JBSUFVZ0FqWUNBQ0FDUlFSQVFjUzNBMEhFdHdNb0FnQkJBU0FEZEVGL2MzRTJBZ0FNQkFzRklBbEJFR29nQ1NnQ0VDQUVSMEVDZEdvZ0FqWUNBQ0FDUlEwREN5QUNJQWsyQWhnZ0JFRVFhaUlGS0FJQUlnTUVRQ0FDSUFNMkFoQWdBeUFDTmdJWUN5QUZLQUlFSWdNRVFDQUNJQU0yQWhRZ0F5QUNOZ0lZQ3dzTEN5QUtRUkJKQkVBZ0J5QUlJQVpCQVhGeVFRSnlOZ0lBSUFBZ0NHcEJCR29pQVNBQktBSUFRUUZ5TmdJQUJTQUhJQVpCQVhFZ0FYSkJBbkkyQWdBZ0FDQUJhaUlCSUFwQkEzSTJBZ1FnQUNBSWFrRUVhaUlDSUFJb0FnQkJBWEkyQWdBZ0FTQUtFSlVDQ3lBQUR3dEJBQXNLQUNBQUtBSUVFSWNDQzVzREFFRzRDMEczTlJBNFFjZ0xRYncxUVFGQkFVRUFFQ3hCMEF0QndUVkJBVUdBZjBIL0FCQXlRZUFMUWNZMVFRRkJnSDlCL3dBUU1rSFlDMEhTTlVFQlFRQkIvd0VRTWtIb0MwSGdOVUVDUVlDQWZrSC8vd0VRTWtId0MwSG1OVUVDUVFCQi8vOERFREpCK0F0QjlUVkJCRUdBZ0lDQWVFSC8vLy8vQnhBeVFZQU1RZmsxUVFSQkFFRi9FREpCaUF4QmhqWkJCRUdBZ0lDQWVFSC8vLy8vQnhBeVFaQU1RWXMyUVFSQkFFRi9FREpCbUF4Qm1UWkJCQkF4UWFBTVFaODJRUWdRTVVISUNFR21OaEEwUVpnSlFiSTJFRFJCNkFoQkJFSFROaEExUWJBSlFlQTJFREJCdUFsQkFFSHdOaEF6UWNBSlFRQkJqamNRTTBISUNVRUJRYk0zRUROQjBBbEJBa0hhTnhBelFkZ0pRUU5CK1RjUU0wSGdDVUVFUWFFNEVETkI2QWxCQlVHK09CQXpRZkFKUVFSQjVEZ1FNMEg0Q1VFRlFZSTVFRE5Cd0FsQkFFR3BPUkF6UWNnSlFRRkJ5VGtRTTBIUUNVRUNRZW81RUROQjJBbEJBMEdMT2hBelFlQUpRUVJCclRvUU0wSG9DVUVGUWM0NkVETkJnQXBCQmtId09oQXpRWWdLUVFkQmp6c1FNMEdRQ2tFSFFhODdFRE1MQndCQkFCRFFBd3NFQUVFQkN6d0JBWDhqQkNFQkl3UkJFR29rQkNBQlFRQTZBQUFnQUNBQlFRRWdBQ2dDQUNnQ0RFRWZjVUhLQUdvUkFRQWFJQUVzQUFBaEFDQUJKQVFnQUFzV0FDQUNSUVJBUVFFUEN5QUFLQUlFSUFFZ0FoQkRDeXNBSUFBZ0FVRUFJQUFvQWdBb0FnaEJIM0ZCeWdCcUVRRUFCRUJCQVE4TFFhejFBaUFCRUxnRVFRQUw1Z0lDQTM4RGZpQUFRUVJxSWdVb0FnQWlCRVVFUUVFQkR3c2dBYWNoQXlBQlFnQlRJQUpCQUVkeEJFQWdBQ0FBS0FJQUtBSVVRUWR4UVlZQmFoRUFBQ0VHQWtBZ0FrRUJSZ1JBSUFZaEJ3VWdBQ2dDQUNnQ0VDRUNRUUFrQlNBQ0lBQkJBRUVBUVFJUVVDTUZJUUpCQUNRRklBSkJBWEZGQkVBZ0FDZ0NBQ2dDRkNFQ1FRQWtCU0FDSUFBUVRxMGpCNjFDSUlhRUlRZ2pCU0VDUVFBa0JTQUNRUUZ4UlFSQUlBQW9BZ0FvQWhBaEFrRUFKQVVnQWlBQUlBYW5JQVpDSUlpblFRQVFVQ01GSVFKQkFDUUZJQUpCQVhGRkJFQWdDQ0VIREFRTFFRQVFHQkJhQ3dzUUZ5RUNJQUFvQWdBb0FoQWhBMEVBSkFVZ0F5QUFJQWFuSUFaQ0lJaW5RUUFRVUNNRklRTkJBQ1FGSUFOQkFYRUVRRUVBRUJnUVdnVWdBaEFlQ3dzTFFRQWhBaUFISUFGOHB5RURJQVVvQWdBaEJBc2dBRUVBT2dBSUlBSkJBVVloQUNBQ0JIOUJxVFVGUWFVMUN5RUNJQVFnQXlBQUJIOUJyVFVGSUFJTEVFSUxYQUVCZnlBQVFjUWROZ0lBSUFBb0FnUWlBVVVFUUNBQUVGSVBDeUFBTEFBUUJFQWdBQkJTRHdzZ0FDd0FFZ1JBUVFBa0JRVkJBQ1FGUVN3Z0FSQU1DeU1GSVFGQkFDUUZJQUZCQVhGRkJFQWdBQkJTRHd0QkFCQVlFRm9MR1FBZ0FFRUNSd1JBUVFFUEN5QUNRWnlCQkJEUUFScEJBUXNQQUNBQklBQW9BZ0JxSUFJNUF3QUxEUUFnQVNBQUtBSUFhaXNEQUF0TkFRRi9RY2dBRUY4aUFFSUFOd01BSUFCQ0FEY0RDQ0FBUWdBM0F4QWdBRUlBTndNWUlBQkNBRGNESUNBQVFnQTNBeWdnQUVJQU53TXdJQUJDQURjRE9DQUFRVUJyUWdBM0F3QWdBQXMwQUNBRFFRSkdCSDhnQUNBQklBSVF1Z0VGSUFBZ0FTQUNFSHNMR2lBQ1JRUkFEd3NnQVNBQ1FYOXFRUUowYWtFQU5nSUFDeVlCQVg5QklCQmZJZ0JDQURjREFDQUFRZ0EzQXdnZ0FFSUFOd01RSUFCQ0FEY0RHQ0FBQzVRQ0FRVi9Jd1FoQlNNRVFSQnFKQVFnQWlnQ0FDRUVJQVVpQTBJQU53SUFJQU5CQURZQ0NDQUVRVzlMQkVBZ0F4Q0tBUXNnQWtFRWFpRUdBa0FDUUNBRVFRdEpCRUFnQXlBRU9nQUxJQVFFUUNBRElRSU1BZ1VnQXlFQ0N3VWdBeUFFUVJCcVFYQnhJZ2NRWHlJQ05nSUFJQU1nQjBHQWdJQ0FlSEkyQWdnZ0F5QUVOZ0lFREFFTERBRUxJQUlnQmlBRUVGTWFDeUFDSUFScVFRQTZBQUFnQVNBQUtBSUFhaUlBUVF0cUlnRXNBQUJCQUVnRVFDQUFLQUlBUVFBNkFBQWdBRUVBTmdJRUJTQUFRUUE2QUFBZ0FVRUFPZ0FBQzBFQUpBVkJGQ0FBUVFBUURTTUZJUUZCQUNRRklBRkJBWEVFUUVFQUVCZ2lBQkJhQlNBQUlBTXBBZ0EzQWdBZ0FDQURLQUlJTmdJSUlBVWtCQXNMZWdFRWZ5QUJJQUFvQWdCcUlnSXNBQXNpQVVFQVNDSUVCSDhnQWlnQ0JDSUFRUVJxRUd3aEF5QUJRZjhCY1NFQklBQUZJQUZCL3dGeElnRkJCR29RYkNFRElBRWhBQ0FDS0FJRUN5RUZJQU1nQURZQ0FDQUNLQUlBSVFBZ0EwRUVhaUFFQkg4Z0FBVWdBZ3NnQkFSL0lBVUZJQUVMRUZNYUlBTUxKZ0VCZnlBQVJRUkFEd3NnQUVFRWFpSUJMQUFMUVFCSUJFQWdBU2dDQUJCU0N5QUFFRklMR0FFQmYwRVFFRjhpQUVJQU53TUFJQUJDQURjRENDQUFDNzhCQVFKL0l3UWhBeU1FUVJCcUpBUWdBQ2dDQUNFRUlBRWdBQ2dDQkNJQVFRRjFhaUVCSUFCQkFYRUVRQ0FCS0FJQUlBUnFLQUlBSVFRTElBTWlBQ0FCSUFJZ0JFRWZjVUg0QVdvUkJ3QkJBQ1FGUVFSQkVCQUZJUUVqQlNFQ1FRQWtCU0FDUVFGeFJRUkFJQUVnQUNnQ0FEWUNBQ0FCUVFScUlnSWdBRUVFYWlJREtRSUFOd0lBSUFJZ0F5Z0NDRFlDQ0NBQUpBUWdBUThMRUJjaEFTQUFRUVJxSWdBc0FBdEJBRTRFUUNBQkVCNExJQUFvQWdBUVVpQUJFQjVCQUF1T0FRRUJmeUFBUVFScUlnTkNBRGNDQUNBRFFRQTJBZ2dnQVNnQ0FDRUJRUUFrQlVFSUlBRWdBZ1IvUVFBRlFRSUxRUUJCQUJBSUlRRWpCU0VDUVFBa0JTQUNRUUZ4UlFSQUlBQWdBVFlDQUVFQUpBVkJHeUFEUWQwMEVBWWFJd1VoQUVFQUpBVWdBRUVCY1VVRVFBOExDeEFYSVFBZ0F5d0FDMEVBVGdSQUlBQVFIZ3NnQXlnQ0FCQlNJQUFRSGd2UkFnRUNmeU1FSVFJakJFSFFBR29rQkNBQUtBSUFJUU1nQVNBQUtBSUVJZ0JCQVhWcUlRRWdBRUVCY1FSQUlBRW9BZ0FnQTJvb0FnQWhBd3NnQWlJQUlBRWdBMEVmY1VIV0FXb1JCZ0JCQUNRRlFRUkJ5QUFRQlNFQkl3VWhBa0VBSkFVZ0FrRUJjVVVFUUNBQklBQW9BZ0EyQWdBZ0FVRUVhaUlESUFCQkJHb2lBaWtDQURjQ0FDQURJQUlvQWdnMkFnZ2dBa0lBTndJQUlBSkJBRFlDQ0NBQlFSQnFJZ01nQUVFUWFpSUNLUUlBTndJQUlBTWdBaWdDQ0RZQ0NDQUNRZ0EzQXdBZ0FrRUFOZ0lJSUFGQkhHb2lBaUFBUVJ4cUlnTXBBZ0EzQWdBZ0FpQURLUUlJTndJSUlBSWdBeWtDRURjQ0VDQUNJQU1wQWhnM0FoZ2dBaUFES1FJZ053SWdJQUlnQXlnQ0tEWUNLQ0FBSkFRZ0FROExFQmNoQVNBQUxBQWJRUUJJQkVBZ0FDZ0NFQkJTQ3lBQVFRUnFJZ0FzQUF0QkFFNEVRQ0FCRUI0TElBQW9BZ0FRVWlBQkVCNUJBQXVFQXdFRGZ5TUVJUUlqQkVHQThBQnFKQVFnQWtFQVFmenZBQkJVR2lBQktBSUFJQUlRdmdJaEJDQUFRUVJxSWdOQ0FEY0NBQ0FEUWdBM0FnZ2dBMElBTndJUUlBQWdCRFlDQUVFQUpBVkJHeUFEUWVrMEVBWWFJd1VoQVVFQUpBVWdBVUVCY1VVRVFDQUVCRUFnQWlRRUR3dEJBQ1FGUVJ3Z0FFRVFhaUFDUVlBd2FoQUdHaU1GSVFGQkFDUUZJQUZCQVhGRkJFQWdBQ0FDUVlEUUFHb29BQUEyQWh3Z0FDQUNRWWpRQUdvb0FBQzRSQUFBQUFBQUFQQkJvaUFDUVlUUUFHb29BQUM0b0RrRElDQUFJQUpCa05BQWFpZ0FBTGhFQUFBQUFBQUE4RUdpSUFKQmpOQUFhaWdBQUxpZ09RTW9JQUFnQWtHVTBBQnFLQUFBTmdJd0lBQWdBa0dZMEFCcUtBQUFOZ0kwSUFBZ0FrR2MwQUJxS0FBQU5nSTRJQUFnQWtHZzBBQnFLQUFBTmdJOElBQkJRR3NnQWtHazBBQnFLQUFBTmdJQUlBQWdBa0dvMEFCcUtBQUFOZ0pFSUFJa0JBOExDeEFYSVFFZ0FDd0FHMEVBU0FSQUlBQW9BaEFRVWdzZ0F5d0FDMEVBVGdSQUlBRVFIZ3NnQXlnQ0FCQlNJQUVRSGd1dUF3RUVmeU1FSVFVakJFRkFheVFFSUFBb0FnQWhDQ0FCSUFBb0FnUWlBVUVCZFdvaEFDQUJRUUZ4QkVBZ0FDZ0NBQ0FJYWlnQ0FDRUlDeUFGUVJocUlRWWdCVUVNYWlJSElBSVExUUZCQUNRRlFSTWdCU0FERUEwakJTRUJRUUFrQlNBQlFRRnhCRUFRRnlFQUJVRUFKQVVnQ0NBR0lBQWdCeUFGSUFRUUVDTUZJUUJCQUNRRkFrQWdBRUVCY1FSQUVCY2hBQVZCQUNRRlFRUkJJQkFGSVFBakJTRUJRUUFrQlNBQlFRRnhCRUFRRnlFQUlBWXNBQnRCQUVnRVFDQUdLQUlRRUZJTElBWkJCR29pQWl3QUMwRUFUZzBDSUFJb0FnQVFVZ3dDQ3lBQUlBWW9BZ0EyQWdBZ0FFRUVhaUlDSUFaQkJHb2lBU2tDQURjQ0FDQUNJQUVvQWdnMkFnZ2dBVUlBTndJQUlBRkJBRFlDQ0NBQVFSQnFJZ0lnQmtFUWFpSUJLUUlBTndJQUlBSWdBU2dDQ0RZQ0NDQUJRZ0EzQWdBZ0FVRUFOZ0lJSUFBZ0JpZ0NIRFlDSENBRkxBQUxRUUJJQkVBZ0JTZ0NBQkJTQ3lBSExBQUxRUUJPQkVBZ0JTUUVJQUFQQ3lBSEtBSUFFRklnQlNRRUlBQVBDd3NnQlN3QUMwRUFTQVJBSUFVb0FnQVFVZ3NMSUFjc0FBdEJBRTRFUUNBQUVCNExJQWNvQWdBUVVpQUFFQjVCQUF2a0F3RURmd0pBSXdRaEJTTUVRYUNCQVdva0JDQUZRYUFCYWlFSElBVkJBRUdjQVJCVUdpQUNLQUlBSVFZZ0JTQUNMQUFMUVFCSUJIOGdCZ1VnQWdzMkFBUWdCU0FITmdBUUlBVkJnSUFCTmdBVUlBVWdCRUVCYzBFQmNUWUFDQ0FGUVFjMkFDUWdCVUVBTmdBb0lBTW9BZ0FoQWlBRExBQUxRUUJJQkg4Z0FnVWdBd3RCbklFRVFZQUJFTzBCSUFFZ0JSRE9BallDQUNBQVFRUnFJZ1pDQURjQ0FDQUdRZ0EzQWdnZ0JrSUFOd0lRUVFBa0JVRWJJQVpCOGpRUUJob2pCU0VCUVFBa0JRSkFJQUZCQVhFRVFCQVhJUUVGSUFVb0FBd2lBUVJBSUFBZ0FUWUNBQXdEQ3lBQVFRQTJBZ0FnQUNBRktBQWdOZ0ljSUFVb0FCeEJBVWNOQWlBRktBQVlJZ1FFZjBFQUlBUkJJRXNFZnlBRUJVRWdDMEVDZEJCWElnSkZCRUJCQUNRRlFSUkJyUFVDRUF3akJTRUJRUUFrQlNBQlFRRnhCRUFRRnlFQkRBUUxDeUFDQlVFQUlRSkJBQXNoQTBFQUpBVkJFU0FISUFJZ0JFRUNkQkFIR2lNRklRRkJBQ1FGSUFGQkFYRkZCRUJCQUNRRlFSd2dBRUVRYWlBQ0VBWWFJd1VoQVVFQUpBVWdBVUVCY1VVRVFDQUNSUTBFSUFNUVVnd0VDd3NRRnlFQklBSUVRQ0FERUZJTEN3c2dBQ3dBRzBFQVNBUkFJQUFvQWhBUVVnc2dCaXdBQzBFQVRnUkFJQUVRSGdzZ0JpZ0NBQkJTSUFFUUhnOExJQVVrQkF0QUFRSi9RUVFRWHlJQlFRQTJBZ0JCQUNRRlFScEJCa0h5NVFBUUJob2pCU0VBUVFBa0JTQUFRUUZ4QkVBUUZ5RUFJQUVRVWlBQUVCNEZJQUVQQzBFQUN6b0JBWDhnQUVVRVFBOExJQUFvQWdBaUFRUkFRUUFrQlVFWUlBRVFCUm9qQlNFQlFRQWtCU0FCUVFGeEJFQkJBQkFZRUZvTEN5QUFFRklMQlFCQm1BZ0x6UklCQW45Qm1BaEJvQWhCc0FoQkFFSEpNVUVXUWN3eFFRQkJ6REZCQUVIT01VSFpNVUVuRUMxQm1BaEJBVUdRSFVISk1VRVhRUUVRTGtFSUVGOGlBRUVGTmdJQUlBQkJBRFlDQkVHWUNFSGNNVUVGUVpRZFFlRXhRUUVnQUVFQUVDOUJDQkJmSWdCQkVqWUNBQ0FBUVFBMkFnUkJtQWhCNkRGQkFrR29IVUgyTVVFUklBQkJBQkF2UVFnUVh5SUFRUTgyQWdBZ0FFRUFOZ0lFUVpnSVFmb3hRUU5Cc0IxQmd6SkJIQ0FBUVFBUUwwSEFDRUdJTWtHT01rRUNRZGt4UVNnUU5rRUFKQVZCQkVFRUVBVWhBQ01GSVFGQkFDUUZJQUZCQVhGRkJFQWdBRUVBTmdJQVFRQWtCVUVFUVFRUUJTRUJJd1VoQWtFQUpBVWdBa0VCY1VVRVFDQUJRUUEyQWdCQkFDUUZRUUZCd0FoQmtESkJnQXhCOWpGQkVpQUFRWUFNUVpneVFSQWdBUkFUSXdVaEFFRUFKQVVnQUVFQmNVVUVRRUVBSkFWQkJFRUVFQVVoQUNNRklRRkJBQ1FGSUFGQkFYRkZCRUFnQUVFRU5nSUFRUUFrQlVFRVFRUVFCU0VCSXdVaEFrRUFKQVVnQWtFQmNVVUVRQ0FCUVFRMkFnQkJBQ1FGUVFGQndBaEJuVEpCeUFoQjlqRkJFeUFBUWNnSVFaZ3lRUkVnQVJBVEl3VWhBRUVBSkFVZ0FFRUJjVVVFUUVFQUpBVkJLVUhBQ0JBTUl3VWhBRUVBSkFVZ0FFRUJjUVJBUVFBUUdDSUFFRm9MUWVBSVFhVXlRWTR5UVFOQjJURkJLaEEyUVFBa0JVRUVRUVFRQlNFQUl3VWhBVUVBSkFVZ0FVRUJjVVVFUUNBQVFRQTJBZ0JCQUNRRlFRUkJCQkFGSVFFakJTRUNRUUFrQlNBQ1FRRnhSUVJBSUFGQkFEWUNBRUVBSkFWQkFVSGdDRUd2TWtIQUNFSDJNVUVVSUFCQndBaEJtREpCRWlBQkVCTWpCU0VBUVFBa0JTQUFRUUZ4UlFSQVFRQWtCVUVFUVFRUUJTRUFJd1VoQVVFQUpBVWdBVUVCY1VVRVFDQUFRUkEyQWdCQkFDUUZRUVJCQkJBRklRRWpCU0VDUVFBa0JTQUNRUUZ4UlFSQUlBRkJFRFlDQUVFQUpBVkJBVUhnQ0VHMU1rSG9DRUgyTVVFVklBQkI2QWhCbURKQkV5QUJFQk1qQlNFQVFRQWtCU0FBUVFGeFJRUkFRUUFrQlVFRVFRUVFCU0VBSXdVaEFVRUFKQVVnQVVFQmNVVUVRQ0FBUVJ3MkFnQkJBQ1FGUVFSQkJCQUZJUUVqQlNFQ1FRQWtCU0FDUVFGeFJRUkFJQUZCSERZQ0FFRUFKQVZCQVVIZ0NFRzlNa0dBREVIMk1VRVdJQUJCZ0F4Qm1ESkJGQ0FCRUJNakJTRUFRUUFrQlNBQVFRRnhSUVJBUVFBa0JVRXBRZUFJRUF3akJTRUFRUUFrQlNBQVFRRnhCRUJCQUJBWUlnQVFXZ3RCZ0FsQnd6SkJqakpCQkVIWk1VRXJFRFpCQUNRRlFRUkJCQkFGSVFBakJTRUJRUUFrQlFKQUlBRkJBWEZGQkVBZ0FFRUFOZ0lBUVFBa0JVRUVRUVFRQlNFQkl3VWhBa0VBSkFVZ0FrRUJjUTBCSUFGQkFEWUNBRUVBSkFWQkFVR0FDVUd2TWtIQUNFSDJNVUVYSUFCQndBaEJtREpCRlNBQkVCTWpCU0VBUVFBa0JTQUFRUUZ4RFFGQkFDUUZRUVJCQkJBRklRQWpCU0VCUVFBa0JTQUJRUUZ4RFFFZ0FFRVFOZ0lBUVFBa0JVRUVRUVFRQlNFQkl3VWhBa0VBSkFVZ0FrRUJjUTBCSUFGQkVEWUNBRUVBSkFWQkFVR0FDVUhSTWtIb0NFSDJNVUVZSUFCQjZBaEJtREpCRmlBQkVCTWpCU0VBUVFBa0JTQUFRUUZ4RFFGQkFDUUZRUVJCQkJBRklRQWpCU0VCUVFBa0JTQUJRUUZ4RFFFZ0FFRWNOZ0lBUVFBa0JVRUVRUVFRQlNFQkl3VWhBa0VBSkFVZ0FrRUJjUTBCSUFGQkhEWUNBRUVBSkFWQkFVR0FDVUc5TWtHQURFSDJNVUVaSUFCQmdBeEJtREpCRnlBQkVCTWpCU0VBUVFBa0JTQUFRUUZ4RFFGQkFDUUZRUVJCQkJBRklRQWpCU0VCUVFBa0JTQUJRUUZ4RFFFZ0FFRWdOZ0lBUVFBa0JVRUVRUVFRQlNFQkl3VWhBa0VBSkFVZ0FrRUJjUTBCSUFGQklEWUNBRUVBSkFWQkFVR0FDVUhXTWtHZ0RFSGZNa0VCSUFCQm9BeEI0ekpCQVNBQkVCTWpCU0VBUVFBa0JTQUFRUUZ4RFFGQkFDUUZRUVJCQkJBRklRQWpCU0VCUVFBa0JTQUJRUUZ4RFFFZ0FFRW9OZ0lBUVFBa0JVRUVRUVFRQlNFQkl3VWhBa0VBSkFVZ0FrRUJjUTBCSUFGQktEWUNBRUVBSkFWQkFVR0FDVUhvTWtHZ0RFSGZNa0VCSUFCQm9BeEI0ekpCQVNBQkVCTWpCU0VBUVFBa0JTQUFRUUZ4RFFGQkFDUUZRUVJCQkJBRklRQWpCU0VCUVFBa0JTQUJRUUZ4RFFFZ0FFRXdOZ0lBUVFBa0JVRUVRUVFRQlNFQkl3VWhBa0VBSkFVZ0FrRUJjUTBCSUFGQk1EWUNBRUVBSkFWQkFVR0FDVUh3TWtHQURFSDJNVUVaSUFCQmdBeEJtREpCRnlBQkVCTWpCU0VBUVFBa0JTQUFRUUZ4RFFGQkFDUUZRUVJCQkJBRklRQWpCU0VCUVFBa0JTQUJRUUZ4RFFFZ0FFRTBOZ0lBUVFBa0JVRUVRUVFRQlNFQkl3VWhBa0VBSkFVZ0FrRUJjUTBCSUFGQk5EWUNBRUVBSkFWQkFVR0FDVUgzTWtHQURFSDJNVUVaSUFCQmdBeEJtREpCRnlBQkVCTWpCU0VBUVFBa0JTQUFRUUZ4RFFGQkFDUUZRUVJCQkJBRklRQWpCU0VCUVFBa0JTQUJRUUZ4RFFFZ0FFRTROZ0lBUVFBa0JVRUVRUVFRQlNFQkl3VWhBa0VBSkFVZ0FrRUJjUTBCSUFGQk9EWUNBRUVBSkFWQkFVR0FDVUg3TWtHQURFSDJNVUVaSUFCQmdBeEJtREpCRnlBQkVCTWpCU0VBUVFBa0JTQUFRUUZ4RFFGQkFDUUZRUVJCQkJBRklRQWpCU0VCUVFBa0JTQUJRUUZ4RFFFZ0FFRThOZ0lBUVFBa0JVRUVRUVFRQlNFQkl3VWhBa0VBSkFVZ0FrRUJjUTBCSUFGQlBEWUNBRUVBSkFWQkFVR0FDVUdBTTBHQURFSDJNVUVaSUFCQmdBeEJtREpCRnlBQkVCTWpCU0VBUVFBa0JTQUFRUUZ4RFFGQkFDUUZRUVJCQkJBRklRQWpCU0VCUVFBa0JTQUJRUUZ4RFFFZ0FFSEFBRFlDQUVFQUpBVkJCRUVFRUFVaEFTTUZJUUpCQUNRRklBSkJBWEVOQVNBQlFjQUFOZ0lBUVFBa0JVRUJRWUFKUVljelFZQU1RZll4UVJrZ0FFR0FERUdZTWtFWElBRVFFeU1GSVFCQkFDUUZJQUJCQVhFTkFVRUFKQVZCQkVFRUVBVWhBQ01GSVFGQkFDUUZJQUZCQVhFTkFTQUFRY1FBTmdJQVFRQWtCVUVFUVFRUUJTRUJJd1VoQWtFQUpBVWdBa0VCY1EwQklBRkJ4QUEyQWdCQkFDUUZRUUZCZ0FsQmpqTkJnQXhCOWpGQkdTQUFRWUFNUVpneVFSY2dBUkFUSXdVaEFFRUFKQVVnQUVFQmNRMEJRUUFrQlVFcFFZQUpFQXdqQlNFQVFRQWtCU0FBUVFGeEJFQkJBQkFZSWdBUVdnVVBDd3NMRUJjaEFFRUFKQVZCS1VHQUNSQU1Jd1VoQVVFQUpBVWdBVUVCY1FSQVFRQVFHQ0lBRUZvRklBQVFIZ3NMQ3dzTEN3c0xDd3NRRnlFQVFRQWtCVUVwUWVBSUVBd2pCU0VCUVFBa0JTQUJRUUZ4QkVCQkFCQVlJZ0FRV2dVZ0FCQWVDd3NMQ3dzTEN4QVhJUUJCQUNRRlFTbEJ3QWdRRENNRklRRkJBQ1FGSUFGQkFYRUVRRUVBRUJnaUFCQmFCU0FBRUI0TEN5MEJBWDhnQVNBQVJnUkFEd3NnQWtVRVFBOExJQUVnQUNBQ1FYOXFJZ01ReGdFYUlBRWdBMnBCQURvQUFBc0hBRUVBRU9zREN3UUFRUUVMRGdBZ0FFR2N6Z1ZxSUFFUXBnSUxtQU1DQkg4Q2ZnSkFJQVJCQUVjaUNTQUZRUUJIY1FSQUlBUkJBRFlDQUFzZ0FVRWdhaUlIRUZsQi93OUxEUUFnQUVIa3pBVnFJQUZCNGNFQWFpd0FBRUVBUnlJR0lBZEJBRUVGRUtBQ0RRQWdBRUhVelFWcUtBSUFCRUFnQUVIQXpRVnFJQVlnQjBFQVFRVVFvQUpGRFFFTElBRkJzTUFBYWlFSUlBQkJxSWtEYWlrREFDSUtRZ0JTQkVBZ0NDa0RBQ0FLV2cwQkN5QUFRYkNKQTJvcEF3QWlDa0lBVWdSQUlBZ3BBd0FnQ2xnTkFRc2dBQ2dDQUNBQktBSWNJZ2h4RFFBZ0FDd0FDQVJBSUFBb0FnUWdDSEZGRFFFTElBWkZCRUFnQUVHNGlRTnFLUU1BSWdwQy8vLy8vL2YvLy8vL0FGRWdDaUFCUWREQUFHb3BBd0FpQ2xWeVJRMEJJQUJCd0lrRGFpa0RBQ0lMSUFwWklBdEMvLy8vLy9mLy8vLy9BRkp4RFFFTElBQkJpTXdGYWlJR1FRQTJBaEFnQmhDaEFpSUJSUTBBUVFFaEFBSkFBa0FEUUNBQklBY2dBeENsQVVVRVFDQUFRUUZxSVFBZ0JoQ2hBaUlCRFFFTUFnc0xEQUVMUVFBUEN5QUNCRUFnQWlBQklBY1FuUUZGT2dBQUN5QUpSUVJBSUFBUEN5QUVJQUVnQlJCdkdpQUFEd3RCQUF2RkFRRUNmeUFBRUxzRUlBQkJ5TXNFYWtFQU5nSUFJQUJCaUl3RmFrRUFOZ0lBSUFCQnZNc0Vha0VBT2dBQUlBQkJ3TXNFYWtFQU5nSUFJQUJCeE1zRWFrRUFPZ0FBSUFCQmlNd0ZhaENlQVNBQVFlVE1CV29RbmdFZ0FFSEF6UVZxRUo0QklBQkIrTTRGYWhDZUFTQUFRWnpPQldvUW5nRWdBRUh3aEFOcUlnRW9BZ0FpQWtVRVFDQUFRZlNFQTJwQkFEWUNBQ0FBUWZpRUEycEJBRFlDQUE4TElBSVFVaUFCUVFBMkFnQWdBRUgwaEFOcVFRQTJBZ0FnQUVINGhBTnFRUUEyQWdBTDFRSUJCMzhnQUJDMkFrRUFKQVZCSlNBQVFZak1CV29pQnhBTUl3VWhBVUVBSkFVZ0FVRUJjUVJBRUJjaEFTQUFFSGtnQVJBZUMwRUFKQVZCSlNBQVFlVE1CV29pQXhBTUl3VWhBVUVBSkFVZ0FVRUJjUVJBRUJjaEFRVkJBQ1FGUVNVZ0FFSEF6UVZxSWdRUURDTUZJUUZCQUNRRklBRkJBWEVFUUJBWElRRWpCeUVDQlVFQUpBVkJKU0FBUVp6T0JXb2lCUkFNSXdVaEFVRUFKQVVnQVVFQmNRUkFFQmNoQVNNSElRSUZRUUFrQlVFbElBQkIrTTRGYWlJR0VBd2pCU0VCUVFBa0JTQUJRUUZ4QkVBUUZ5RUJJd2NoQWdWQkFDUUZRU1lnQUJBTUl3VWhBVUVBSkFVZ0FVRUJjVVVFUUE4TEVCY2hBU01ISVFJZ0JpZ0NBQ0lHQkVBZ0JoQlNDd3NnQlNnQ0FDSUZCRUFnQlJCU0N3c2dCQ2dDQUNJRUJFQWdCQkJTQ3dzZ0F5Z0NBQ0lEQkVBZ0F4QlNDd3NnQnlnQ0FDSUNSUVJBSUFBUWVTQUJFQjRMSUFJUVVpQUFFSGtnQVJBZUMwWUJBWDhnQUVFQU93RVVJQUJCR0dvaUFVRUFOZ0lBSUFGQkFEc0JCQ0FCUVFBNkFBWWdBRUVnYWlJQVFnQTNBd0FnQUVJQU53TUlJQUJDQURjREVDQUFRZ0EzQXhnTDFRSUJCWDhqQkNFREl3UkJFR29rQkNBQVFhakFBR29pQlNnQ0FDRUNJQUJCcE1BQWFpSUVJQUUyQWdBZ0FpQUJTUVJBSUFCQnJNQUFhaWdDQUNJR1FRQkhJQVlnQVVseEJFQWdBeUFHTmdJQVFhejFBa0hZR3lBREVHQkJyUFVDRUZZZ0JTZ0NBQ0VDSUFRb0FnQWhBUXNnQUVHZ3dBQnFJZ1FvQWdBZ0FTQUNRU0JxSUFKQkFuWnFJZ0pMQkg4Z0FRVWdBaUlCQ3hCWElnSkZCRUJCclBVQ0VGWUxJQVFnQWpZQ0FDQUZJQUUyQWdBTElBQkJBRG9BRUNBQVFlREFBR3BCQUJDb0JDQUFRUUEyQWh3Z0FFR3h3UUJxUVFBNkFBQWdBRUc2d1FCcVFRQTZBQUFnQUVId3dRQnFRUUEyQWdBZ0FFSDFnUUZxUVFBNkFBQWdBRUd3d0FCcUlnRkNBRGNEQUNBQlFnQTNBd2dnQVVJQU53TVFJQUJCaU1FQWFpSUJRZ0EzQXdBZ0FVRUFPZ0FJSUFCQjNNRUFhaUlBUWdBM0FnQWdBRUVBTmdJSUlBQkJBRHNCRENBQVFRQTZBQTRnQXlRRUM0WUJBQUpBQWtBQ1FBSkFBa0FnQVVFUGF3NGtBQVFFQkFRQkJBUUVCQVFCQkFRQ0JBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUURCQXNnQUVHb21BRnFMQUFBQkVBUEN5QUFJQUlRaGdRUEN5QUFRYWlZQVdvc0FBQUVRQThMSUFBZ0FoQ0VCQThMSUFCQnFKZ0JhaXdBQUFSQUR3c2dBQ0FDRUlFRUR3c2dBQ0FDRVBzREN3dUxBd0VJZnlBQlJRUkFRYXoxQWhCV0N5QUJRWUNBRUVzRWZ5QUJCVUdBZ0JBTElnTWdBRUhNelFOcUlnWW9BZ0FpQkUwRVFBOExBa0FDUUFKQUlBSUVRQ0FBUWFTV0FXb29BZ0JCQUVjaEFpQUFRYWlZQVdvaUFTd0FBRVVOQVVFRUVCUWlBVUhFSlRZQ0FDQUJRZGdLUVFvUUd3VWdBRUdvbUFGcUlnRXNBQUFFUUVFQUlRSU1Bd1ZCQUNFQ0RBSUxBQXNNQWdzZ0F4QnNJZ1ZGRFFBZ0JVRUFJQU1RVkJvZ0JFVWdBa0VCYzNKRkJFQWdBMEYvYWlFQ0lBQkJwSllCYWlnQ0FDRUhJQUFvQW1BaENDQUVRWDlxSVFsQkFTRUJBMEFnQlNBSUlBRnJJZ29nQW5GcUlBY2dDaUFKY1dvc0FBQTZBQUFnQVVFQmFpSUJJQVJORFFBTEN5QUFRYVNXQVdvaUFTZ0NBQ0lDQkVBZ0FoQlNDeUFCSUFVMkFnQU1BUXNnQTBHQWdJQUlTU0FDY2dSQVFRUVFGQ0lDUWNRbE5nSUFJQUpCMkFwQkNoQWJDeUFBUWFTV0FXb2lBaWdDQUNJRUJFQWdCQkJTSUFKQkFEWUNBQXNnQUVHb2xnRnFJQU1ROXdNZ0FVRUJPZ0FBQ3lBR0lBTTJBZ0FnQUVIUXpRTnFJQU5CZjJvMkFnQUwxQUVCQlg4Z0FCRFlBU0FCUlFSQUR3c0NRQUpBQWtBRFFDQUJJQVJySWdKQklDQURhMjRpQlVHQWdJQUNUUVJBUVlDQWdBSWhCUXNnQWlBRlNRMEJBMEFnQWhCc0lnWkZCRUFnQWlBQ1FRVjJheUlDSUFWSkRRTU1BUXNMSUFaQkFDQUNFRlFhSUFBZ0EwRUNkR29nQmpZQ0FDQUFRWUFCYWlBRFFRSjBhaUFDSUFScUlnUTJBZ0FnQkNBQlNTSUNJQU5CQVdvaUEwRWdTWEVOQUF3Q0N3QUxRUVFRRkNJQVFjUWxOZ0lBSUFCQjJBcEJDaEFiREFFTElBSUVRRUVFRUJRaUFFSEVKVFlDQUNBQVFkZ0tRUW9RR3dzTEM2UUdBZ2wvQVg0Q1FDTUVJUVFqQkVFUWFpUUVJQVFoQndKQUFrQUNRQUpBSUFNc0FBQWlCQTRFQWdBQUFRTUxJQUJCd0pnQmFpa0RBQ0VOSUFKQkJFd05BeUFOcHlFS0lBSkJmR29oQ3lBRVFRSkdCSDlCNlFFRlFlZ0JDeUVNSUFFaEFFRUFJUUlEUUNBQVFRRnFJUU1nQWtFQmFpRUVJQUFzQUFBaUJVRm9SaUFNSUFWQi93RnhSbklFZnlBRUlBcHFRZi8vL3dkeElRVWdBRUVDYWlJR0xRQUFRUWgwSUFNdEFBQnlJQUJCQTJvaUNDMEFBRUVRZEhJZ0FFRUVhaUlKTFFBQVFSaDBjaUlFUVFCSUJFQWdCQ0FGYWtGL1NnUkFJQU1nQkVHQWdJQUlhaUlET2dBQUlBWWdBMEVJZGpvQUFDQUlJQU5CRUhZNkFBQWdDU0FEUVJoMk9nQUFDd1VnQkVHQWdJQjRha0VBU0FSQUlBTWdCQ0FGYXlJRE9nQUFJQVlnQTBFSWRqb0FBQ0FJSUFOQkVIWTZBQUFnQ1NBRFFSaDJPZ0FBQ3dzZ0FrRUZhaUVDSUFCQkJXb0ZJQVFoQWlBREN5RUFJQUlnQzBnTkFBc01Bd3NnQUVIQW1BRnFLUU1BSVEwZ0FrRURUQTBDUVFBaEFDQU5weUVESUFKQmZXb2hCQU5BSUFFZ0FHb2lBaXdBQTBGclJnUkFJQUlnQWtFQmFpSUZMUUFBUVFoMElBSXRBQUJ5SUFKQkFtb2lCaTBBQUVFUWRISWdBQ0FEYWtFQ2Rtc2lBam9BQUNBRklBSkJDSFk2QUFBZ0JpQUNRUkIyT2dBQUN5QUFRUVJxSWdBZ0JFZ05BQXNNQWdzZ0F5d0FEQ0VGSUFCQkpHb2hCQ0FBUVN4cUlnWW9BZ0FoQXlBQVFTaHFJZ2dnQWpZQ0FDQURJQUpKQkVBZ0FDZ0NNQ0lBUVFCSElBQWdBa2x4Qkg4Z0J5QUFOZ0lBUWF6MUFrSFlHeUFIRUdCQnJQVUNFRllnQmlnQ0FDRURJQWdvQWdBRklBSUxJUUFnQkNnQ0FDQUFJQU5CSUdvZ0EwRUNkbW9pQTBzRWZ5QUFCU0FESWdBTEVGY2lBMFVFUUVHczlRSVFWZ3NnQkNBRE5nSUFJQVlnQURZQ0FBc2dCQ2dDQUNFR0lBVUVRRUVBSVFOQkFDRUFCU0FISkFRZ0JnOExJQVZCL3dGeElRa0RRQ0FESUFKSkJFQWdBeUVFUVFBaENBTkFJQUJCQVdvaEJTQUdJQVJxSUFoQi93RnhJQUVnQUdvdEFBQnJJZ2c2QUFBZ0JDQUphaUlFSUFKSkJFQWdCU0VBREFFRklBVWhBQXNMQ3lBRFFRRnFJZ01nQ1VjTkFDQUdJUUVMREFFTElBY2tCRUVBRHdzZ0J5UUVJQUVMdEFNQkNYOGpCQ0VDSXdSQklHb2tCQ0FBUVRocUlnVW9BZ0FpQTBIL1Awc0VRQ0FBRU5rQklBVW9BZ0FpQTBIL1Awc0VRQ0FGUVFBMkFnQkJBQ0VEQ3dzZ0FDZ0NaQ0lHSUFBb0FtQWlDRVlFZnlBQlFRUnFJZ1FoQnlBRUtBSUFJUVFnQUVIUXpRTnFLQUlBSVFsQkFBVWdBRUhRelFOcUtBSUFJZ2tnQmlBSWEzRWdBVUVFYWlJSEtBSUFJZ1JOQ3lFS0lBQkJOR29oQmlBQklBbzZBQTBnQnlBSUlBUnFJQWx4TmdJQUlBSWdBU2tDQURjQ0FDQUNJQUVwQWdnM0FnZ2dCU0FEUVFGcUlnRTJBZ0FnQVNBQVFUeHFJZ2NvQWdBaUEwMEVRQ0FHS0FJQUlBRkJmMnBCQkhScUlnQWdBaWtDQURjQ0FDQUFJQUlwQWdnM0FnZ2dBaVFFUVFFUEN5QUNRUkJxSVFRZ0FFRkFheWdDQUNJQVFRQkhJQUVnQUV0eEJIOGdCQ0FBTmdJQVFhejFBa0hZR3lBRUVHQkJyUFVDRUZZZ0J5Z0NBQ0VESUFVb0FnQUZJQUVMSVFBZ0JpZ0NBQ0FBSUFOQklHb2dBMEVDZG1vaUFVc0VmeUFBQlNBQklnQUxRUVIwRUZjaUFVVUVRRUdzOVFJUVZnc2dCaUFCTmdJQUlBY2dBRFlDQUNBQklBVW9BZ0JCZjJwQkJIUnFJZ0FnQWlrQ0FEY0NBQ0FBSUFJcEFnZzNBZ2dnQWlRRVFRRUwrUVFCQjM4Z0FTd0FDRVVFUUNBQktBSUFJQUJCNkFCcUlnWW9BZ0FpQTBGd2Frb0VRQ0FESUFCQkJHb2lCeWdDQUNJRmF5SUVRUUJJQkVCQkFBOExJQUJCOEFCcUlnZ2dBRUg0QUdvaUNTZ0NBQ0FGYXlBSUtBSUFhallDQUNBRlFZQ0FBVW9FUUNBRVFRQktCRUFnQUNnQ0VDSURJQU1nQldvZ0JCQmRHZ3NnQjBFQU5nSUFJQVlnQkRZQ0FBVWdBeUVFQ3lBRVFZQ0FBa1lFUUVFQUlRUkJnSUFDSVFNRklBQW9BZ0FnQUNnQ0VDQUVha0dBZ0FJZ0JHc1FYaUVFSUFZb0FnQWlCU0FFYWlFRElBUkJBRW9FUUNBR0lBTTJBZ0FGSUFVaEF3c0xJQUJCN0FCcUlnVWdBMEZpYWlJQU5nSUFJQWtnQnlnQ0FDSUROZ0lBSUFOQmYyb2dDQ2dDQUNJR2FpRURJQVpCZjBjRVFDQUZJQUFnQTBnRWZ5QUFCU0FEQ3pZQ0FBc2dCRUYvUmdSQVFRQVBDd3NMSUFFUVdFRU9kaUVHSUFFZ0FVRUVhaUlGS0FJQVFRSnFJZ0JCQTNZZ0FTZ0NBR28yQWdBZ0JTQUFRUWR4TmdJQVFRQWhCRUVBSVFBRFFDQUJFRmhCQ0hZZ0FFRURkSFFnQkdvaEJDQUJJQVVvQWdCQkNHb2lBMEVEZGlBQktBSUFhallDQUNBRklBTkJCM0UyQWdBZ0FFRUJhaUVESUFBZ0JrY0VRQ0FESVFBTUFRc0xJQUlnQkRZQ0JDQUJFRmhCRG5ZaEJpQUJJQVVvQWdCQkFtb2lBRUVEZGlBQktBSUFhallDQUNBRklBQkJCM0UyQWdCQkFDRUVRUUFoQUFOQUlBRVFXRUVJZGlBQVFRTjBkQ0FFYWlFRUlBRWdCU2dDQUVFSWFpSURRUU4ySUFFb0FnQnFOZ0lBSUFVZ0EwRUhjVFlDQUNBQVFRRnFJUU1nQUNBR1J3UkFJQU1oQUF3QkN3c2dBaUFFTmdJSUlBSWdBUkJZUVExMk9nQUFJQUZCQXhCVklBSXNBQUFFUUVFQkR3c2dBaUFCRUZoQkMzWkJBV282QUF3Z0FVRUZFRlZCQVF1WUh3RXRmd0pBSXdRaEJDTUVRUkJxSkFRZ0FFSEltQUZxSWg1QkFUb0FBQ0FBUWJpWUFXb2lIeXdBQUFSQUlBQkI3QUJxSVE0Z0FFRUlhaUVISUFCQndKZ0JhaUVhSUFCQjhBQnFJUk1nQUVINEFHb2hFaUFBUVlRQmFpRWJJQUJCNkFCcUlRZ2dBRUVFYWlFWElBQkI4QUJxSVJnZ0FFRUVhaUVNQlNBQlJRUkFJQUJCaEFGcVFRQkJuSlVCRUZRYUlBQkJ4QUJxSWdKQ0FEY0NBQ0FDUWdBM0FnZ2dBa0lBTndJUUlBSkNBRGNDR0NBQ1FRQTJBaUFnQUVHZ2xnRnFJQUJCek0wRGFpZ0NBQ0lDUVlDQWdBSkpCSDhnQWdWQmdJQ0FBZ3NnQUVIUXpRTnFLQUlBY1RZQ0FBc2dBRUVBTmdJNElBQkJDR29pQjBFQU5nSUFJQUJCQkdvaUJVRUFOZ0lBSUFCQndKZ0JhaUlhUWdBM0F3QWdBRUhvQUdvaUEwSUFOd01BSUFOQ0FEY0RDQ0FEUWdBM0F4QWdBMEVBTmdJWUlBQkI4QUJxSWdaQmZ6WUNBQ0FCUlFSQUlBQkJ3SzRDYWtFQU5nSUFJQUJCeEs0Q2FrRUFOZ0lBSUFCQnVLNENha0VBTmdJQUlBQkJ2SzRDYWtFQk5nSUFJQUJCeUs0Q2FrRUFRZkFDRUZRYUlBQkJoSzhCYWtFQVFiVC9BQkJVR2lBQVFjek1BMnBCQURvQUFDQUFRYlRKQTJwQkFFR1VBeEJVR2lBQVFiREpBMnBCQWpZQ0FDQUFRY2pNQTJwQkFEWUNBQXNnQUNBQkVJTUJJQU1vQWdBaUFpQUZLQUlBSWdocklnRkJBRWdOQVNBR0lBQkIrQUJxSWhJb0FnQWdDR3NnQmlnQ0FHbzJBZ0FnQ0VHQWdBRktCRUFnQVVFQVNnUkFJQUFvQWhBaUFpQUNJQWhxSUFFUVhSb0xJQVZCQURZQ0FDQURJQUUyQWdBRklBSWhBUXNnQVVHQWdBSkdCRUJCQUNFQlFZQ0FBaUVDQlNBQUtBSUFJQUFvQWhBZ0FXcEJnSUFDSUFGckVGNGhBU0FES0FJQUlnZ2dBV29oQWlBQlFRQktCRUFnQXlBQ05nSUFCU0FJSVFJTEN5QUFRZXdBYWlJT0lBSkJZbW9pQWpZQ0FDQVNJQVVvQWdBaUNEWUNBQ0FJUVg5cUlBWW9BZ0FpREdvaENDQU1RWDlIQkVBZ0RpQUNJQWhJQkg4Z0FnVWdDQXMyQWdBTElBRkJmMFlOQVNBQUlBQkJCR29pRENBQVFmQUFhaUlURUtRQ1JRMEJJQUFnRENBVElBQkJoQUZxSWhzUW93SkZEUUVDUUNBRElRZ2dCU0VYSUFZaEdBc0xJQVFoRHlBQVFkRE5BMm9oRUNBQVFlQUFhaUVKSUFCQkJHb2hDaUFBUWFDV0FXb2hJQ0FBUVJCcUlSUWdBRUdJQW1vaElTQUFRYWlZQVdvaEZTQUFRYVNXQVdvaElpQUFRYWlXQVdvaERTQUFRZlFmYWlFaklBQkJ6QUJxSVJ3Z0FFSFFBR29oSkNBQVFjZ0FhaUVkSUFCQnhBQnFJUllnQUVIWUFHb2hHU0FBUWVBOWFpRWxJQUJCM0R4cUlTWWdBRUh3SG1vaEp5QUFRY3piQUdvaEtDQUFRY2phQUdvaEtTQUFRWVFCYWlFcUlBQkJzSmdCYWlFcklBQkI4QUJxSVN3Z0FFSDBBR29oTFNBQVFZQUJhaUV1QWtBQ1FBSkFBMEFDUUNBSklBa29BZ0FnRUNnQ0FDSUVjU0lDTmdJQUlBb29BZ0FpQVNBT0tBSUFUZ1JBQTBBQ1FDQUJJQ3dvQWdBaUF5QVNLQUlBSWdWcUlnSklCRUFnQVNBQ1FYOXFSdzBCSUFjb0FnQWdMU2dDQUVnTkFRc2dMaXdBQUEwRElBQWdEQ0FURUtRQ1JRMEdJQUFnRENBVElCc1Fvd0pGRFFZZ0NpZ0NBQ0VCREFFTEN5QUlLQUlBSWdRZ0FXc2lBa0VBU0EwQklCZ2dCU0FCYXlBRGFqWUNBQ0FCUVlDQUFVb0VmeUFDUVFCS0JFQWdGQ2dDQUNJRUlBUWdBV29nQWhCZEdnc2dGMEVBTmdJQUlBZ2dBallDQUNBQ0JTQUVDeUlCUVlDQUFrWUVRRUVBSVFGQmdJQUNJUUlGSUFBb0FnQWdGQ2dDQUNBQmFrR0FnQUlnQVdzUVhpRUJJQWdvQWdBaUJDQUJhaUVDSUFGQkFFb0VRQ0FJSUFJMkFnQUZJQVFoQWdzTElBNGdBa0ZpYWlJQ05nSUFJQklnRnlnQ0FDSUROZ0lBSUFOQmYyb2dHQ2dDQUNJRmFpRUVJQVZCZjBjRVFDQU9JQUlnQkVnRWZ5QUNCU0FFQ3pZQ0FBc2dBVUYvUmcwQklBa29BZ0FoQWlBUUtBSUFJUVFnQXlFQkN5QWdLQUlBSWdNZ0FrWWdBeUFDYXlBRWNVR0RJRXR5Qkg4Z0FRVWdBQkRaQVNBYUtRTUFJQ3NwQXdCVkRRUWdIeXdBQUEwRElBb29BZ0FMSVFJZ0ZDZ0NBQ0lHSUFKQkFXcHFMUUFBUVFoMElBWWdBbW90QUFCQkVIUnlJQVlnQWtFQ2Ftb3RBQUJ5UVFnZ0J5Z0NBQ0lFYTNaQi92OERjU0lESUFCQmlBRnFJQ0VvQWdBaUFVRUNkR29vQWdCSkJFQWdDaUFFSUFCQmpBSnFJQU5CRUNBQmEzWWlCR290QUFCcUlnTkJBM1lnQW1vaUFUWUNBQ0FISUFOQkIzRWlBallDQUNBQVFZd0thaUFFUVFGMGFpRURCUU5BQWtBZ0FVRUJhaUlCUVE5UEJFQkJEeUVCREFFTElBTWdBRUdJQVdvZ0FVRUNkR29vQWdCUERRRUxDeUFLSUFFZ0JHb2lCRUVEZGlBQ2FpSUNOZ0lBSUFjZ0JFRUhjU0lFTmdJQUlBQkJqQnBxSUFNZ0FDQUJRUUowYWlnQ2hBRnJRUkFnQVd0MklBQkJ5QUZxSUFGQkFuUnFLQUlBYWlJQklDb29BZ0JQQkg5QkFBVWdBUXRCQVhScUlRTWdBaUVCSUFRaEFnc2dBeTRCQUNJRVFmLy9BM0ZCZ0FKSUJFQWdGU3dBQUFSL0lBa2dDU2dDQUNJQlFRRnFOZ0lBSUEwZ0FSQjFCU0FpS0FJQUlRRWdDU0FKS0FJQUlnSkJBV28yQWdBZ0FTQUNhZ3NpQVNBRU9nQUFEQUlMSUFSQi8vOERjU0VESUFSQi8vOERjVUdGQWt3RVFBSkFBa0FDUUNBRVFZQUNhdzRDQUFFQ0N5QUFJQXdnRHhENkEwVU5CeUFBSUE4UStRTWFEQVFMSUJrb0FnQWlBVVVOQXlBV0tBSUFJUVFnRlN3QUFFVUVRQ0FBSUFFZ0JCQjJEQVFMSUJBb0FnQWhBeUFKS0FJQUlnSWdCR3NoQkFOQUlBMGdCQ0FEY1JCMUxBQUFJUVVnRFNBQ0VIVWdCVG9BQUNBSklBa29BZ0JCQVdvZ0EzRWlBallDQUNBQlFYOXFJZ0ZGRFFRZ0JFRUJhaUVFREFBTEFBc2dBRUhFQUdvZ0EwSCtmV29pQkVFQ2RHb29BZ0FoQXlBRUJIOGdCQ0VCQTBBZ0FFSEVBR29nQVVFQ2RHb2dBRUhFQUdvZ0FVRi9haUlCUVFKMGFpZ0NBRFlDQUNBQkRRQUxJQlFvQWdBaEJpQUhLQUlBSVFJZ0NpZ0NBQVVnQVFzaEJDQVdJQU0yQWdBZ0JpQUVRUUZxYWkwQUFFRUlkQ0FHSUFScUxRQUFRUkIwY2lBR0lBUkJBbXBxTFFBQWNrRUlJQUpyZGtIKy93TnhJZ1VnQUVITTJnQnFJQ2dvQWdBaUFVRUNkR29vQWdCSkJFQWdDaUFDSUFCQjBOc0FhaUFGUVJBZ0FXdDJJZ1ZxTFFBQWFpSUNRUU4ySUFScUlnRTJBZ0FnQnlBQ1FRZHhJZ0kyQWdBZ0FFSFE0d0JxSUFWQkFYUnFJUVVGQTBBQ1FDQUJRUUZxSWdGQkQwOEVRRUVQSVFFTUFRc2dCU0FBUWN6YUFHb2dBVUVDZEdvb0FnQlBEUUVMQ3lBS0lBRWdBbW9pQzBFRGRpQUVhaUlDTmdJQUlBY2dDMEVIY1NJRU5nSUFJQUJCMFBNQWFpQUZJQUFnQVVFQ2RHcEJ5Tm9BYWlnQ0FHdEJFQ0FCYTNZZ0FFR00yd0JxSUFGQkFuUnFLQUlBYWlJQklDa29BZ0JQQkg5QkFBVWdBUXRCQVhScUlRVWdBaUVCSUFRaEFnc2dCUzhCQUNJTElnUkJBbllpRVVGL2FpRUZJQmtnQzBILy93TnhRUWhJQkg4Z0JFRUNhZ1VnQkVFRGNVRUVjaUFGZEVFQ2FpRUVJQVVFUUNBR0lBRkJBV3BxTFFBQVFRaDBJQVlnQVdvdEFBQkJFSFJ5SUFZZ0FVRUNhbW90QUFCeVFRZ2dBbXQyUWYvL0EzRkJFU0FSYTNZZ0JHb2hCQ0FLSUFJZ0JXb2lBa0VEZGlBQmFqWUNBQ0FISUFKQkIzRTJBZ0FMSUFRTElnRTJBZ0FnRlN3QUFFVUVRQ0FBSUFFZ0F4QjJEQU1MSUJBb0FnQWhCU0FKS0FJQUlRSWdBVVVOQWlBQ0lBTnJJUVFEUUNBTklBUWdCWEVRZFN3QUFDRURJQTBnQWhCMUlBTTZBQUFnQ1NBSktBSUFRUUZxSUFWeElnSTJBZ0FnQVVGL2FpSUJSUTBESUFSQkFXb2hCQXdBQ3dBTElBTkIrbjFxSWd0QkFuWWlFVUYvYWlFRklBdEJDRWtFUUNBRFFmeDlhaUVFQlNBRVFRSnFRUkIwUVJCMVFRTnhRUVJ5SUFWMFFRSnFJUVFnQlFSQUlBWWdBVUVCYW1vdEFBQkJDSFFnQmlBQmFpMEFBRUVRZEhJZ0JpQUJRUUpxYWkwQUFISkJDQ0FDYTNaQi8vOERjVUVSSUJGcmRpQUVhaUVFSUFvZ0FpQUZhaUlDUVFOMklBRnFJZ0UyQWdBZ0J5QUNRUWR4SWdJMkFnQUxDeUFHSUFGQkFXcHFMUUFBUVFoMElBWWdBV290QUFCQkVIUnlJQVlnQVVFQ2Ftb3RBQUJ5UVFnZ0FtdDJRZjcvQTNFaUJTQUFRZlFlYWlBaktBSUFJZ05CQW5ScUtBSUFTUVIvSUFvZ0FpQUFRZmdmYWlBRlFSQWdBMnQySWdOcUxRQUFhaUlDUVFOMklBRnFJZ0UyQWdBZ0J5QUNRUWR4SWdJMkFnQWdBRUg0SjJvZ0EwRUJkR29GQTBBQ1FDQURRUUZxSWdOQkQwOEVRRUVQSVFNTUFRc2dCU0FBUWZRZWFpQURRUUowYWlnQ0FFOE5BUXNMSUFvZ0F5QUNhaUlDUVFOMklBRnFJZ0UyQWdBZ0J5QUNRUWR4SWdJMkFnQWdBRUg0TjJvZ0JTQUFJQU5CQW5ScVFmQWVhaWdDQUd0QkVDQURhM1lnQUVHMEgyb2dBMEVDZEdvb0FnQnFJZ01nSnlnQ0FFOEVmMEVBQlNBREMwRUJkR29MSWdNdkFRQWlFU0lEUVFGMklndEJmMm9oQlNBUlFmLy9BM0ZCQkVnRVFDQURRUUZxSVFFRklBTkJBWEZCQW5JZ0JYUkJBV29oQXdKL0lBVUVmeUFGUVFOTkJFQWdCaUFCUVFGcWFpMEFBRUVRZENBR0lBRnFMUUFBUVJoMGNpQUdJQUZCQW1wcUxRQUFRUWgwY2lBR0lBRkJBMnBxTFFBQWNpQUNkQ0FHSUFGQkJHcHFMUUFBUVFnZ0FtdDJja0VoSUF0cmRpQURhaUVESUFvZ0FpQUZhaUlDUVFOMklBRnFOZ0lBSUFjZ0FrRUhjVFlDQUNBRERBSUxJQVZCQkVZRVFDQURJUVVnQVNFREJTQUdJQUZCQVdwcUxRQUFRUkIwSUFZZ0FXb3RBQUJCR0hSeUlBWWdBVUVDYW1vdEFBQkJDSFJ5SUFZZ0FVRURhbW90QUFCeUlBSjBJQVlnQVVFRWFtb3RBQUJCQ0NBQ2EzWnlRU1VnQzJ0MlFRUjBJQU5xSVFVZ0NpQUxRWHRxSUFKcUlnSkJBM1lnQVdvaUF6WUNBQ0FISUFKQkIzRWlBallDQUFzZ0JTQUdJQU5CQVdwcUxRQUFRUWgwSUFZZ0Eyb3RBQUJCRUhSeUlBWWdBMEVDYW1vdEFBQnlRUWdnQW10MlFmNy9BM0VpQmlBQVFlQThhaUFsS0FJQUlnRkJBblJxS0FJQVNRUi9JQW9nQWlBQVFlUTlhaUFHUVJBZ0FXdDJJZ0ZxTFFBQWFpSUNRUU4ySUFOcU5nSUFJQWNnQWtFSGNUWUNBQ0FBUWVURkFHb2dBVUVCZEdvRkEwQUNRQ0FCUVFGcUlnRkJEMDhFUUVFUElRRU1BUXNnQmlBQVFlQThhaUFCUVFKMGFpZ0NBRThOQVFzTElBb2dBU0FDYWlJQ1FRTjJJQU5xTmdJQUlBY2dBa0VIY1RZQ0FDQUFRZVRWQUdvZ0JpQUFJQUZCQW5ScVFkdzhhaWdDQUd0QkVDQUJhM1lnQUVHZ1BXb2dBVUVDZEdvb0FnQnFJZ0VnSmlnQ0FFOEVmMEVBQlNBQkMwRUJkR29MSWdFdkFRQnFCU0FEQ3dzaUFVR0FBa3NFUUNBQlFZREFBRXNoQWlBQlFZQ0FFRXNFZjBFREJVRUNDeUVESUFJRWZ5QURCVUVCQ3lBRWFpRUVDd3NnSkNBY0tBSUFOZ0lBSUJ3Z0hTZ0NBRFlDQUNBZElCWW9BZ0EyQWdBZ0ZpQUJOZ0lBSUJrZ0JEWUNBQ0FWTEFBQVJRUkFJQUFnQkNBQkVIWU1BZ3NnRUNnQ0FDRUZJQWtvQWdBaEFpQUVSUTBCSUFJZ0FXc2hBeUFDSVFFRFFDQU5JQU1nQlhFUWRTd0FBQ0VDSUEwZ0FSQjFJQUk2QUFBZ0NTQUpLQUlBUVFGcUlBVnhJZ0UyQWdBZ0JFRi9haUlFUlEwQ0lBTkJBV29oQXd3QUN3QUxDd3dDQ3lBZVFRQTZBQUFnRHlRRUR3c2dEeVFFRHdzZ0FCRFpBU0FQSkFRUEN5QUVKQVFMaGdVQkFYOENRQ0FBS0FLQUFTSURJQUZMQkVBZ0F5RUFCU0FBS0FLRUFTSURJQUZMQkVBZ0F5RUFCU0FBS0FLSUFTSURJQUZMQkVBZ0F5RUFCU0FBS0FLTUFTSURJQUZMQkVBZ0F5RUFCU0FBS0FLUUFTSURJQUZMQkVBZ0F5RUFCU0FBS0FLVUFTSURJQUZMQkVBZ0F5RUFCU0FBS0FLWUFTSURJQUZMQkVBZ0F5RUFCU0FBS0FLY0FTSURJQUZMQkVBZ0F5RUFCU0FBS0FLZ0FTSURJQUZMQkVBZ0F5RUFCU0FBS0FLa0FTSURJQUZMQkVBZ0F5RUFCU0FBS0FLb0FTSURJQUZMQkVBZ0F5RUFCU0FBS0FLc0FTSURJQUZMQkVBZ0F5RUFCU0FBS0FLd0FTSURJQUZMQkVBZ0F5RUFCU0FBS0FLMEFTSURJQUZMQkVBZ0F5RUFCU0FBS0FLNEFTSURJQUZMQkVBZ0F5RUFCU0FBS0FLOEFTSURJQUZMQkVBZ0F5RUFCU0FBS0FMQUFTSURJQUZMQkVBZ0F5RUFCU0FBS0FMRUFTSURJQUZMQkVBZ0F5RUFCU0FBS0FMSUFTSURJQUZMQkVBZ0F5RUFCU0FBS0FMTUFTSURJQUZMQkVBZ0F5RUFEQlFMSUFBb0F0QUJJZ01nQVVzRVFDQURJUUFNRkFzZ0FDZ0MxQUVpQXlBQlN3UkFJQU1oQUF3VUN5QUFLQUxZQVNJRElBRkxCRUFnQXlFQURCUUxJQUFvQXR3QklnTWdBVXNFUUNBRElRQU1GQXNnQUNnQzRBRWlBeUFCU3dSQUlBTWhBQXdVQ3lBQUtBTGtBU0lESUFGTEJFQWdBeUVBREJRTElBQW9BdWdCSWdNZ0FVc0VRQ0FESVFBTUZBc2dBQ2dDN0FFaUF5QUJTd1JBSUFNaEFBd1VDeUFBS0FMd0FTSURJQUZMQkVBZ0F5RUFEQlFMSUFBb0F2UUJJZ01nQVVzRVFDQURJUUFNRkFzZ0FDZ0MrQUVpQXlBQlN3UkFJQU1oQUF3VUN5QUFLQUw4QVNJQUlBRkxEUk5CQUNFQVFRQVBDd3NMQ3dzTEN3c0xDd3NMQ3dzTEN3c0xDd3NnQUNBQmF5SUFJQUpKQkg4Z0FBVWdBZ3NMNUFFQkJuOGpCQ0VDSXdSQkVHb2tCQ0FBUVFScUlnUW9BZ0JCQVdvaEF5QUVJQU0yQWdBZ0F5QUFRUWhxSWdZb0FnQWlCMDBFUUNBQUtBSUFJQU5CZjJwQkFuUnFJQUUyQWdBZ0FpUUVEd3NnQWlFRklBQW9BZ3dpQWtFQVJ5QURJQUpMY1FSL0lBVWdBallDQUVHczlRSkIyQnNnQlJCZ1FhejFBaEJXSUFRb0FnQWhBeUFHS0FJQUJTQUhDeUVDSUFBb0FnQWdBeUFDUVNCcUlBSkJBblpxSWdKTEJIOGdBd1VnQWlJREMwRUNkQkJYSWdKRkJFQkJyUFVDRUZZTElBQWdBallDQUNBR0lBTTJBZ0FnQWlBRUtBSUFRWDlxUVFKMGFpQUJOZ0lBSUFVa0JBdUFGd0VUZndKQUFrQWpCQ0VGSXdSQk1Hb2tCQ0FGUVNCcUlSRWdCVUVZYWlFU0lBVkJFR29oRXlBRlFRaHFJUlFnQlNFTUlBQkJqTTBEYWtFQU5nSUFJQUJCaU0wRGFpSUlRUUEyQWdBZ0FFR1V6UU5xS0FJQUlBSWdBMEdBZ0FKSUJIOGdBd1ZCZ0lBQ0N4QlRHaUFBUWRETUEyb2lGVUVRYWlJQ0tBSUFSUVJBSUFKQmhJQVFFRjgyQWdBTEFrQUNRQ0FCUVlBQmNRUkFJQWdRY2lJQ0JFQWdBa0YvYWlFSERBSUZJQUJCQUJDREFTQUFRYnpOQTJvaEN5QUFRWnpOQTJvaUFpZ0NBQ0VEQ3dVZ0FFSEl6UU5xS0FJQUlRY01BUXNNQVFzZ0J5QUFRWnpOQTJvaUFpZ0NBQ0lEU3cwQ0lBY2dBRUc4elFOcUlnc29BZ0JMRFFJTElBQkJtTTBEYWlFRUlBQkJ1TTBEYWlFT0lBQkJ5TTBEYWlBSE5nSUFRZkFBRUY4aUJrRVVhaUVKSUFaQkFEWUNiQ0FKUWdBM0FnQWdDVUlBTndJSUlBbENBRGNDRUNBSlFnQTNBaGdnQ1VJQU53SWdJQWxDQURjQ0tDQUpRZ0EzQWpBZ0J5QURSaUlXQkVBZ0IwR0F3QUJMRFFFZ0FpQUhRUUZxSWdNMkFnQWdBeUFBUWFETkEyb2lDaWdDQUNJRlN3Ui9JQUJCcE0wRGFpZ0NBQ0lOUVFCSElBTWdEVXR4QkVBZ0RDQU5OZ0lBUWF6MUFrSFlHeUFNRUdCQnJQVUNFRllnQ2lnQ0FDRUZJQUlvQWdBaEF3c2dCQ2dDQUNBRElBVkJJR29nQlVFQ2Rtb2lCVXNFZnlBRElnVUZJQVVMUVFKMEVGY2lBMFVFUUVHczlRSVFWZ3NnQkNBRE5nSUFJQW9nQlRZQ0FDQURJUVVnQWlnQ0FBVWdCQ2dDQUNFRklBTUxJUUpCOEFBUVh5SURRUlJxSVFRZ0EwRUFOZ0pzSUFSQ0FEY0NBQ0FFUWdBM0FnZ2dCRUlBTndJUUlBUkNBRGNDR0NBRVFnQTNBaUFnQkVJQU53SW9JQVJDQURjQ01DQUZJQUpCZjJvaUFrRUNkR29nQXpZQ0FDQUdJQUkyQWhBZ0RrRUFFUDBESUFOQkFEWUNDQVVnQkNnQ0FDQUhRUUowYWlnQ0FDRURJQVlnQnpZQ0VDQURRUWhxSWdJZ0FpZ0NBRUVCYWpZQ0FBc2dBRUdvelFOcUlRb0NRQUpBSUFCQnJNMERhaUlOS0FJQUlnVUVRRUVBSVFKQkFDRUVBMEFnQ2lnQ0FDSVFJQVFnQW10QkFuUnFJQkFnQkVFQ2RHb29BZ0EyQWdBZ0FpQUtLQUlBSUFSQkFuUnFJaEFvQWdCRmFpSUNRUUJLQkVBZ0VFRUFOZ0lBQ3lBRVFRRnFJZ1FnQlVrTkFBc2dBZ1JBSUFJaEJDQUZJUUlGSUFWQmdNQUFTd1JBSUFZb0Fqd2lBQVJBSUFBUVVnc2dCaWdDTENJQUJFQWdBQkJTQ3lBSktBSUFJZ0FFUUNBQUVGSUxEQVVGREFNTEFBc0ZRUUFoQlF3QkN3d0JDeUFOSUFWQkFXb2lBallDQUNBQ0lBQkJzTTBEYWlJRUtBSUFJZ1ZMQkVBZ0FFRzB6UU5xS0FJQUlnbEJBRWNnQWlBSlMzRUVRQ0FVSUFrMkFnQkJyUFVDUWRnYklCUVFZRUdzOVFJUVZpQUVLQUlBSVFVZ0RTZ0NBQ0VDQ3lBS0tBSUFJQUlnQlVFZ2FpQUZRUUoyYWlJRlN3Ui9JQUlGSUFVaUFndEJBblFRVnlJRlJRUkFRYXoxQWhCV0N5QUtJQVUyQWdBZ0JDQUNOZ0lBSUEwb0FnQWhBZ3RCQVNFRUN5QUtLQUlBSUFJZ0JHdEJBblJxSUFZMkFnQWdCa0VJYWlJSklBTW9BZ2cyQWdBZ0NCQnlJZ0pCZ2dKcUlRVWdCaUFCUWNBQWNRUi9JQVVGSUFJaUJRc2dBRUhnQUdvaUJDZ0NBQ0lDYWlBQVFkRE5BMm9pQ2lnQ0FIRTJBZ0FnQVVFZ2NRUkFJQVlnQ0JCeUlnSTJBZ1FnRGlnQ0FDQUhRUUowYWlBQ05nSUFJQVFvQWdBaEFnVWdCaUFISUFzb0FnQkpCSDhnRGlnQ0FDQUhRUUowYWlnQ0FBVkJBQXMyQWdRTElBWWdBQ2dDWkNJQUlBSkdCSDlCQUFVZ0NpZ0NBQ0FBSUFKcmNTQUZUUXRCQVhFNkFBd2dCa0hNQUdvaUJFSUFOd0lBSUFSQ0FEY0NDQ0FFUWdBM0FoQWdCRUVBTmdJWUlBWkJnSUFQTmdKWUlBWWdCa0VFYWlJT0tBSUFOZ0pjSUFZZ0NTZ0NBRFlDWUNBQlFSQnhCRUFnQ0JCWVFRbDJJUUFnQ0VFSEVGVWdBRUVCY1FSQUlBUWdDQkJ5TmdJQUN5QUFRUUp4QkVBZ0JpQUlFSEkyQWxBTElBQkJCSEVFUUNBR0lBZ1FjallDVkFzZ0FFRUljUVJBSUFZZ0NCQnlOZ0pZQ3lBQVFSQnhCRUFnQmlBSUVISTJBbHdMSUFCQklIRUVRQ0FHSUFnUWNqWUNZQXNnQUVIQUFIRUVRQ0FHSUFnUWNqWUNaQXNMQWtBZ0ZnUkFJQWdRY2lJRlFYOXFRZjcvQTBzTkEwRUFJQVZCSUVzRWZ5QUZCVUVnQ3hCWElnSkZCRUJCclBVQ0VGWkJBQ0VDQzBFQUlRQUNRQUpBQWtBQ1FBTkFJQWdvQWdCQkEycEIvLzhCU3cwQlFRQWtCVUVWSUFnUUJTRUhJd1VoQzBFQUpBVWdDMEVCY1EwQ0lBSWdBR29nQjBFSWRqb0FBRUVBSkFWQkVDQUlRUWdRRFNNRklRZEJBQ1FGSUFkQkFYRU5BeUFBUVFGcUlnQWdCVWtOQUF0QkFDUUZRUVlnRlNBQ0lBVWdBMEVVYWhBUEl3VWhBRUVBSkFVZ0FFRUJjUTBDSUFJUVVnd0ZDeUFDUlEwR0lBSVFVZ3dHQ3hBWElRQWdBZ1JBSUFBaER3VWdBQkFlQ3d3QkN4QVhJUThMSUFJUVVpQVBFQjRMQ3lBR0lBTW9BaFEyQWlRZ0JpQURLQUlvTmdJb0lBTkJRR3NvQWdBaUIwRi9ha0gvUDBrRVFDQUdRVHhxSVFVZ0JrRkFheUlMS0FJQUlBZHFJUUFnQ3lBQU5nSUFJQUFnQmtIRUFHb2lEeWdDQUNJQ1N3UkFJQVlvQWtnaUNrRUFSeUFBSUFwTGNRUkFJQk1nQ2pZQ0FFR3M5UUpCMkJzZ0V4QmdRYXoxQWhCV0lBOG9BZ0FoQWlBTEtBSUFJUUFMSUFVb0FnQWdBQ0FDUVNCcUlBSkJBblpxSWdKTEJIOGdBQ0lDQlNBQ0N4QlhJZ0JGQkVCQnJQVUNFRllMSUFVZ0FEWUNBQ0FQSUFJMkFnQUZJQVVvQWdBaEFBc2dBQ0FES0FJOElBY1FVeG9MSUFaQkxHb2lBeWdDQUNFQUlBWkJNR29pQlNnQ0FFSEFBRWtFUUNBQUJFQWdBQkJTSUFOQkFEWUNBQXNnQmtFMGFpSUhRUUEyQWdBZ0JVSEFBRFlDQUNBR0tBSTRJZ0JCZjJwQlAwa0VmeUFTSUFBMkFnQkJyUFVDUWRnYklCSVFZRUdzOVFJUVZpQUhLQUlBSVFJZ0F5Z0NBQ0VMSUFVb0FnQUZRUUFoQWtFQUlRdEJ3QUFMSVFBZ0N5QUFJQUpCSUdvZ0FrRUNkbW9pQWtzRWZ5QUFJZ0lGSUFJTEVGY2lBRVVFUUVHczlRSVFWZ3NnQXlBQU5nSUFJQWNnQWpZQ0FBc2dBQ0FFS0FJQUlnSTZBQUFnQUNBQ1FRaDJPZ0FCSUFBZ0FrRVFkam9BQWlBQUlBSkJHSFk2QUFNZ0FFRUVhaUlDSUFZb0FsQWlCRG9BQUNBQ0lBUkJDSFk2QUFFZ0FpQUVRUkIyT2dBQ0lBSWdCRUVZZGpvQUF5QUFRUWhxSWdJZ0JpZ0NWQ0lFT2dBQUlBSWdCRUVJZGpvQUFTQUNJQVJCRUhZNkFBSWdBaUFFUVJoMk9nQURJQUJCREdvaUFpQUdLQUpZSWdRNkFBQWdBaUFFUVFoMk9nQUJJQUlnQkVFUWRqb0FBaUFDSUFSQkdIWTZBQU1nQUVFUWFpSUNJQVlvQWx3aUJEb0FBQ0FDSUFSQkNIWTZBQUVnQWlBRVFSQjJPZ0FDSUFJZ0JFRVlkam9BQXlBQVFSUnFJZ0lnQmlnQ1lDSUVPZ0FBSUFJZ0JFRUlkam9BQVNBQ0lBUkJFSFk2QUFJZ0FpQUVRUmgyT2dBRElBQkJHR29pQWlBR0tBSmtJZ1E2QUFBZ0FpQUVRUWgyT2dBQklBSWdCRUVRZGpvQUFpQUNJQVJCR0hZNkFBTWdBRUVjYWlJQ0lBNG9BZ0FpQkRvQUFDQUNJQVJCQ0hZNkFBRWdBaUFFUVJCMk9nQUNJQUlnQkVFWWRqb0FBeUFBUVNCcUlnSkJBRG9BQUNBQ1FRQTZBQUVnQWtFQU9nQUNJQUpCQURvQUF5QUFRU3hxSWdJZ0NTZ0NBQ0lFT2dBQUlBSWdCRUVJZGpvQUFTQUNJQVJCRUhZNkFBSWdBaUFFUVJoMk9nQURJQUJCTUdvaUFFSUFOd0FBSUFCQ0FEY0FDQ0FCUVFoeFJRUkFJQXdrQkVFQkR3c2dDQ2dDQUVFRGFrSC8vd0ZMRFFFZ0NCQnlJZ0pCd0Q5TERRRWdBa0ZBYXlJQUlBVW9BZ0JMQkVBZ0JTQUFOZ0lBSUFBZ0JrRTBhaUlFS0FJQUlnRkxCRUFnQmlnQ09DSUhRUUJISUFBZ0IwdHhCRUFnRVNBSE5nSUFRYXoxQWtIWUd5QVJFR0JCclBVQ0VGWWdCQ2dDQUNFQklBVW9BZ0FoQUFzZ0F5Z0NBQ0FBSUFGQklHb2dBVUVDZG1vaUFVc0VmeUFBQlNBQklnQUxFRmNpQVVVRVFFR3M5UUlRVmdzZ0F5QUJOZ0lBSUFRZ0FEWUNBQXNMSUFNb0FnQWhBU0FDQkVCQkFDRUFCU0FNSkFSQkFROExJQUZCUUdzaEFRSkFBMEFnQ0NnQ0FFRURha0gvL3dGTEJFQkJBQ0VBREFJTElBRWdBR29nQ0JCWVFRaDJPZ0FBSUFoQkNCQlZJQUJCQVdvaUFDQUNTUTBBUVFFaEFBc0xJQXdrQkNBQUR3c2dCaEJTQ3lBTUpBUkJBQXVTQmdFTmZ5QUFRUkJxSWdrb0FnQWlBU0FBUVFScUlnY29BZ0FpQlVFQmFtb3RBQUJCQ0hRZ0FTQUZhaTBBQUVFUWRISWdBU0FGUVFKcWFpMEFBSEpCQ0NBQVFRaHFJZ2dvQWdBaUEydDJRUWgySWdaQi93RnhJUXNnQnlBRFFRaHFJZ0pCQTNZZ0JXb2lBellDQUNBSUlBSkJCM0VpQWpZQ0FDQUdRUWR4UVFGcUlRVUNRQUpBQWtBQ1FBSkFBa0FDUUNBR1FRZHhRUVpyRGdJQUFRSUxJQUVnQTBFQmFpSUdhaTBBQUVFSWRDQUJJQU5xTFFBQVFSQjBjaUFCSUFOQkFtcHFMUUFBY2tFSUlBSnJka0VJZGtIL0FYRkJCMm9oQlNBSElBWTJBZ0FnQ0NBQ05nSUFEQUlMSUFFZ0EwRUJhbW90QUFCQkNIUWdBU0FEYWkwQUFFRVFkSElnQVNBRFFRSnFJZ0ZxTFFBQWNrRUlJQUpyZGtILy93TnhJUVVnQnlBQk5nSUFJQWdnQWpZQ0FDQUZSUVJBUVFBaEJVRUFJUU1NQXdzTEMwRUFJQVZCSUVzRWZ5QUZCVUVnQ3hCWElnTkZCRUJCclBVQ0VGWkJBQ0VEQ3lBRlFYOXFJUXdnQUVIc0FHb2hEVUVBSVFZZ0FFSG9BR29pQ2lnQ0FDRUJJQWNvQWdBaEFnTkFJQUlnQVVGL2FrNEVRQ0FCSUFKcklnUkJBRWdFZjBFQUJTQUNRWUNBQVVvRVFDQUVRUUJLQkVBZ0NTZ0NBQ0lCSUFFZ0Ftb2dCQkJkR2dzZ0IwRUFOZ0lBSUFvZ0JEWUNBQ0FFSVFFTElBQW9BZ0FoQWlBSktBSUFJQUZxSVFSQkFDUUZRUnNnQWlBRVFZQ0FBaUFCYXhBSElRUWpCU0VCUVFBa0JTQUJRUUZ4RFFVZ0NpZ0NBQ0lDSUFScUlRRWdCRUVBU2dSQUlBb2dBVFlDQUFVZ0FpRUJDeUFOSUFGQlltbzJBZ0FnQkVGL1J3c2hBaUFHSUF4SUlBSkJBWE54QkVCQkFDRUFEQVFMSUFjb0FnQWhBZ3NnQXlBR2FpQUpLQUlBSWdRZ0FrRUJhbW90QUFCQkNIUWdCQ0FDYWkwQUFFRVFkSElnQkNBQ1FRSnFhaTBBQUhKQkNDQUlLQUlBSWdScmRrRUlkam9BQUNBSElBUkJDR29pQkVFRGRpQUNhaUlDTmdJQUlBZ2dCRUVIY1RZQ0FDQUdRUUZxSWdZZ0JVZ05BQXNMUVFBa0JVRUdJQUFnQ3lBRElBVVFDQ0VBSXdVaEFVRUFKQVVnQVVFQmNRMEJDeUFEUlFSQUlBQVBDeUFERUZJZ0FBOExFQmNoQUNBRFJRUkFJQUFRSGdzZ0F4QlNJQUFRSGtFQUM0Y0RBUWQvQWtBZ0FFSEFzUUpxSWdNUWNTSUVRWDlHRFFBZ0JFRUhjVUVCYWlFQkFrQUNRQUpBQWtBQ1FBSkFBa0FDUUNBRVFRZHhRUVpyRGdJQUFRSUxJQU1RY1NJQ1FYOUhCRUFnQWtFSGFpRUJEQU1MREFjTElBTVFjU0lDUVg5R0RRWWdBeEJ4SWdGQmYwY0VRQ0FCSUFKQkNIUnFJUUVNQWdzTUJnc01BUXNnQVVVRVFFRUFJUUZCQUNFQ0RBSUxDMEVBSUFGQklFc0VmeUFCQlVFZ0N4QlhJZ0pGQkVCQnJQVUNFRlpCQUNFQ0N5QUJRUUJLQkVBRFFBSkFRUUFrQlVFVUlBTVFCU0VHSXdVaEIwRUFKQVVnQjBFQmNRMEZJQVpCZjBZTkFDQUNJQVZxSUFZNkFBQWdCVUVCYWlJRklBRklEUUVNQXdzTFFRQWtCVUVqSUFNUURDTUZJUUZCQUNRRklBRkJBWEVOQXlBQVFjak1BMnBCQURZQ0FFRUFJUUFNQWdzTFFRQWtCVUVHSUFBZ0JDQUNJQUVRQ0NFQUl3VWhBVUVBSkFVZ0FVRUJjUTBCQ3lBQ1JRUkFJQUFQQ3lBQ0VGSWdBQThMRUJjaEFDQUNSUVJBSUFBUUhnc2dBaEJTSUFBUUhrRUFEd3NnQXhDV0FTQUFRY2pNQTJwQkFEWUNBRUVBQzZFaEFTcC9RY1MxQXlnQ0FFVUVRQU5BSUFOQkVVWUVmMEVTQlNBREN5SUlRZjhCY1NFRFFRRWdDSFFoRGlBQ1FkeUFCR29nQXlBSVFRSjBRWXdiYWlnQ0FDSUpRUUZLQkg4Z0NRVkJBUXNRVkJwQkFDRUhJQW9oQXdOQUlBSkJBblJCd0xVRGFpQUROZ0lBSUFKQkFXb2hBaUFESUE1cUlRTWdCMEVCYWlJSElBbElEUUFMSUFoQkFXb2lCMEVUUndSQUlBTWhDaUFISVFNTUFRc0xDeUFBUWNpWUFXb2lIVUVCT2dBQUFrQWdBRUc0bUFGcUloNHNBQUFFUUNBQVFlZ0FhaUVKSUFCQkVHb2hEaUFBSVFvZ0FFRUlhaUVJSUFCQndKZ0JhaUVhSUFCQkJHb2hCd1VnQVVVRVFDQUFRWVFCYWtFQVFaeVZBUkJVR2lBQVFjUUFhaUlDUWdBM0FnQWdBa0lBTndJSUlBSkNBRGNDRUNBQ1FnQTNBaGdnQWtFQU5nSWdJQUJCb0pZQmFpQUFRY3pOQTJvb0FnQWlBa0dBZ0lBQ1NRUi9JQUlGUVlDQWdBSUxJQUJCME0wRGFpZ0NBSEUyQWdBTElBQkJBRFlDT0NBQVFRaHFJZ2hCQURZQ0FDQUFRUVJxSWdkQkFEWUNBQ0FBUWNDWUFXb2lHa0lBTndNQUlBQkI2QUJxSWdKQ0FEY0RBQ0FDUWdBM0F3Z2dBa0lBTndNUUlBSkJBRFlDR0NBQVFYODJBbkFnQVVVRVFDQUFRY0N1QW1wQkFEWUNBQ0FBUWNTdUFtcEJBRFlDQUNBQVFiaXVBbXBCQURZQ0FDQUFRYnl1QW1wQkFUWUNBQ0FBUWNpdUFtcEJBRUh3QWhCVUdpQUFRWVN2QVdwQkFFRzAvd0FRVkJvZ0FFSE16QU5xUVFBNkFBQWdBRUcweVFOcVFRQkJsQU1RVkJvZ0FFR3d5UU5xUVFJMkFnQWdBRUhJekFOcVFRQTJBZ0FMSUFBZ0FSQ0RBU0FDS0FJQUlnb2dCeWdDQUNJSmF5SURRUUJJQkVBUEN5QUpRWUNBQVVvRVFDQURRUUJLQkVBZ0FDZ0NFQ0lLSUFvZ0NXb2dBeEJkR2dzZ0IwRUFOZ0lBSUFJZ0F6WUNBQVVnQ2lFREN5QUFLQUlBSUFCQkVHb2lEaWdDQUNBRGFrR0FnQUlnQTJzUVhpRURJQUlvQWdBaUNTQURhaUVLSUFOQkFFb0VRQ0FDSUFvMkFnQWdBQ0FLUVdKcU5nSnNCU0FBSUFsQlltbzJBbXdnQTBGL1JnUkFEd3NMSUFFRVFDQUFRY3pNQTJvc0FBQUVRQ0FDSVFrZ0FDRUtEQU1MQ3lBQUVOc0JCRUFnQWlFSklBQWhDZ1VQQ3dzTElBQkIwTTBEYWlFUklBQkI0QUJxSVFzZ0FFSHNBR29oRnlBQVFlUUFhaUVmSUFCQnlNd0RhaUVTSUFCQndMRUNhaUVNSUFCQnNNa0RhaUVnSUFCQnBKWUJhaUVUSUFCQmlBSnFJU0VnQUVIMEgyb2hJaUFBUWN3QWFpRVVJQUJCMEFCcUlSc2dBRUhJQUdvaEZTQUFRY1FBYWlFUElBQkIyQUJxSVJZZ0FFRzhzUUpxSVJnZ0FFRzRzUUpxSVJrZ0FFSGdQV29oSXlBQVFkdzhhaUVrSUFCQjhCNXFJU1VnQUVITTJ3QnFJU1lnQUVISTJnQnFJU2NnQUVITXpRTnFJU2dnQUVITXpBTnFJUndnQUVHRUFXb2hLU0FBUWJDWUFXb2hLa0VBSVFFQ1FBSkFBa0FDUUFKQUFrQUNRQUpBQTBBQ1FDQUxJQXNvQWdBZ0VTZ0NBSEUyQWdBZ0J5Z0NBQ0lFSUJjb0FnQktCRUFnQ1NnQ0FDSURJQVJySWdKQkFFZ05BU0FFUVlDQUFVb0VRQ0FDUVFCS0JFQWdEaWdDQUNJRElBTWdCR29nQWhCZEdnc2dCMEVBTmdJQUlBa2dBallDQUFVZ0F5RUNDeUFLS0FJQUlBNG9BZ0FnQW1wQmdJQUNJQUpyRUY0aEFpQUpLQUlBSWdRZ0Ftb2hBeUFDUVFCS0JFQWdDU0FETmdJQUlCY2dBMEZpYWpZQ0FBVWdGeUFFUVdKcU5nSUFJQUpCZjBZTkFnc0xJQjhvQWdBaUFpQUxLQUlBSWdOR0lBSWdBMnNnRVNnQ0FIRkJnd0pMY2tVRVFDQUFFS1VDSUJvcEF3QWdLaWtEQUZVTkNTQWVMQUFBRFFNTElCSW9BZ0JCQVVZRVFDQU1FSEVpQWtGL1JnMEVJQUlnSUNnQ0FFWUVRQUpBQWtBQ1FBSkFBa0FDUUFKQUlBd1FjVUYvYXc0SEFRSUdBQVFGQXdZTERBZ0xEQXNMSUFBUTJ3RkZEUVlNQndzZ0RCQnhJZ0pCZjBZTkN5QUFJQUpCQkdwQkFSQjJEQVlMSUFBUWdBUkZEUVFNQlFzZ0RCQnhJZ0pCZjBZTkNDQU1FSEVpQTBGL1JnMElJQXdRY1NJRVFYOUdEUWdnREJCeElnRkJmMFlOQ0NBQUlBRkIvd0Z4SWdGQklHb2dCRUgvQVhFZ0EwSC9BWEVnQWtIL0FYRkJDSFJ5UVFoMGNrRUNhaEIyREFRTEN5QVRLQUlBSVFNZ0N5QUxLQUlBSWdSQkFXbzJBZ0FnQXlBRWFpQUNPZ0FBREFJTElBNG9BZ0FpQmlBSEtBSUFJZ05CQVdwcUxRQUFRUWgwSUFZZ0Eyb3RBQUJCRUhSeUlBWWdBMEVDYW1vdEFBQnlRUWdnQ0NnQ0FDSUVhM1pCL3Y4RGNTSUZJQUJCaUFGcUlDRW9BZ0FpQWtFQ2RHb29BZ0JKQkVBZ0J5QUVJQUJCakFKcUlBVkJFQ0FDYTNZaUJHb3RBQUJxSWdWQkEzWWdBMm9pQWpZQ0FDQUlJQVZCQjNFaUF6WUNBQ0FBUVl3S2FpQUVRUUYwYWlFRkJRTkFBa0FnQWtFQmFpSUNRUTlQQkVCQkR5RUNEQUVMSUFVZ0FFR0lBV29nQWtFQ2RHb29BZ0JQRFFFTEN5QUhJQUlnQkdvaUJFRURkaUFEYWlJRE5nSUFJQWdnQkVFSGNTSUVOZ0lBSUFCQmpCcHFJQVVnQUNBQ1FRSjBhaWdDaEFGclFSQWdBbXQySUFCQnlBRnFJQUpCQW5ScUtBSUFhaUlDSUNrb0FnQlBCSDlCQUFVZ0FndEJBWFJxSVFVZ0F5RUNJQVFoQXdzZ0JTNEJBQ0lGUWYvL0EzRkJnQUpJQkVBZ0V5Z0NBQ0VDSUFzZ0N5Z0NBQ0lEUVFGcU5nSUFJQUlnQTJvZ0JUb0FBQXdDQ3lBRlFmLy9BM0VoQkNBRlFmLy9BM0ZCamdKTUJFQUNRQUpBQWtBQ1FDQUZRWUFDYXc0REFBRUNBd3NnQmlBQ1FRRnFhaTBBQUVFSWRDQUdJQUpxTFFBQVFSQjBjaUFHSUFKQkFtcHFMUUFBY2tFSUlBTnJkaUlFUVlDQUFuRkZEUXNnQnlBRFFRRnFJZ05CQTNZZ0FtbzJBZ0FnQ0NBRFFRZHhOZ0lBSUJ4QkFEb0FBQ0FBRU5zQlJRMEVEQVVMSUFBUS93TkZEUU1NQkFzZ0ZpZ0NBQ0lDUlEwRElBQWdBaUFQS0FJQUVIWU1Bd3NnQlVILy93TnhRWWNDVGdSQUlBUkIrWDFxSWdWQndURnFMUUFBSVFRZ0JVRzVNV290QUFCQkFXb2dCaUFDUVFGcWFpMEFBRUVJZENBR0lBSnFMUUFBUVJCMGNpQUdJQUpCQW1wcUxRQUFja0VJSUFOcmRrSC8vd054UVJBZ0JHdDJhaUVGSUFjZ0F5QUVhaUlEUVFOMklBSnFOZ0lBSUFnZ0EwRUhjVFlDQUNBYklCUW9BZ0EyQWdBZ0ZDQVZLQUlBTmdJQUlCVWdEeWdDQURZQ0FDQVBJQVUyQWdBZ0ZrRUNOZ0lBSUFzb0FnQWlBaUFGYXlJRElDZ29BZ0JCLzE5cUlnUkpJQUlnQkVseEJFQWdFeWdDQUNJRUlBTnFJUU1nQ3lBQ1FRSnFOZ0lBSUFRZ0Ftb2lBaUFETEFBQU9nQUFJQUlnQXl3QUFUb0FBUVVnRXlnQ0FDSUVJQUpxSUFRZ0F5QVJLQUlBY1dvc0FBQTZBQUFnQ3lBTEtBSUFRUUZxSUJFb0FnQWlBbkVpQkRZQ0FDQVRLQUlBSWdVZ0JHb2dCU0FEUVFGcUlBSnhhaXdBQURvQUFDQUxJQXNvQWdCQkFXb2dFU2dDQUhFMkFnQUxEQU1MSUFCQnhBQnFJQVJCL1gxcUlnUkJBblJxS0FJQUlSQWdCVUgvL3dOeFFZTUNTZ1IvSUFRaEFnTkFJQUJCeEFCcUlBSkJBblJxSUFCQnhBQnFJQUpCZjJvaUEwRUNkR29vQWdBMkFnQWdBa0VCU2dSQUlBTWhBZ3dCQ3dzZ0RpZ0NBQ0VHSUFnb0FnQWhBeUFIS0FJQUJTQUNDeUVFSUE4Z0VEWUNBQ0FHSUFSQkFXcHFMUUFBUVFoMElBWWdCR290QUFCQkVIUnlJQVlnQkVFQ2Ftb3RBQUJ5UVFnZ0EydDJRZjcvQTNFaUJTQUFRY3phQUdvZ0ppZ0NBQ0lDUVFKMGFpZ0NBRWtFUUNBSElBTWdBRUhRMndCcUlBVkJFQ0FDYTNZaUJXb3RBQUJxSWdOQkEzWWdCR29pQWpZQ0FDQUlJQU5CQjNFaUF6WUNBQ0FBUWREakFHb2dCVUVCZEdvaEJRVURRQUpBSUFKQkFXb2lBa0VQVHdSQVFROGhBZ3dCQ3lBRklBQkJ6Tm9BYWlBQ1FRSjBhaWdDQUU4TkFRc0xJQWNnQWlBRGFpSU5RUU4ySUFScUlnTTJBZ0FnQ0NBTlFRZHhJZ1EyQWdBZ0FFSFE4d0JxSUFVZ0FDQUNRUUowYWtISTJnQnFLQUlBYTBFUUlBSnJkaUFBUVl6YkFHb2dBa0VDZEdvb0FnQnFJZ0lnSnlnQ0FFOEVmMEVBQlNBQ0MwRUJkR29oQlNBRElRSWdCQ0VEQ3lBRkx3RUFJZ1ZCMFRCcUxRQUFRUUpxSVFRZ0JVSHRNR290QUFBaERTQUZRWGhxUVJSSkJFQWdCaUFDUVFGcWFpMEFBRUVJZENBR0lBSnFMUUFBUVJCMGNpQUdJQUpCQW1wcUxRQUFja0VJSUFOcmRrSC8vd054UVJBZ0RXdDJJQVJxSVFRZ0J5QURJQTFxSWdOQkEzWWdBbW8yQWdBZ0NDQURRUWR4TmdJQUN5QVdJQVFpQWpZQ0FDQUFJQUlnRUJCMkRBSUxJQVJCOFgxcUlnVkIwVEJxTFFBQVFRTnFJUkFnQlVIdE1Hb3RBQUFoQlNBRVFlbDlha0VVU1FSQUlBWWdBa0VCYW1vdEFBQkJDSFFnQmlBQ2FpMEFBRUVRZEhJZ0JpQUNRUUpxYWkwQUFISkJDQ0FEYTNaQi8vOERjVUVRSUFWcmRpQVFhaUVRSUFjZ0F5QUZhaUlEUVFOMklBSnFJZ1EyQWdBZ0NDQURRUWR4SWdNMkFnQUZJQUloQkFzZ0JpQUVRUUZxYWkwQUFFRUlkQ0FHSUFScUxRQUFRUkIwY2lBR0lBUkJBbXBxTFFBQWNrRUlJQU5yZGtIKy93TnhJZ1VnQUVIMEhtb2dJaWdDQUNJQ1FRSjBhaWdDQUVrRVFDQUhJQU1nQUVINEgyb2dCVUVRSUFKcmRpSUZhaTBBQUdvaUEwRURkaUFFYWlJQ05nSUFJQWdnQTBFSGNTSUROZ0lBSUFCQitDZHFJQVZCQVhScUlRVUZBMEFDUUNBQ1FRRnFJZ0pCRDA4RVFFRVBJUUlNQVFzZ0JTQUFRZlFlYWlBQ1FRSjBhaWdDQUU4TkFRc0xJQWNnQWlBRGFpSU5RUU4ySUFScUlnTTJBZ0FnQ0NBTlFRZHhJZ1EyQWdBZ0FFSDROMm9nQlNBQUlBSkJBblJxUWZBZWFpZ0NBR3RCRUNBQ2EzWWdBRUcwSDJvZ0FrRUNkR29vQWdCcUlnSWdKU2dDQUU4RWYwRUFCU0FDQzBFQmRHb2hCU0FESVFJZ0JDRURDeUFGTHdFQUlpc2lCVUVDZEVIQXRRTnFLQUlBUVFGcUlRUWdCVUhjZ0FScUxBQUFJZ1ZCL3dGeElRMENmeUFGQkg4Z0swRUpUQVJBSUFZZ0FrRUJhbW90QUFCQkNIUWdCaUFDYWkwQUFFRVFkSElnQmlBQ1FRSnFhaTBBQUhKQkNDQURhM1pCLy84RGNVRVFJQTFyZGlBRWFpRUVJQWNnQXlBTmFpSURRUU4ySUFKcU5nSUFJQWdnQTBFSGNUWUNBQ0FFREFJTElBVkIvd0Z4UVFSS0JFQWdCaUFDUVFGcWFpMEFBRUVJZENBR0lBSnFMUUFBUVJCMGNpQUdJQUpCQW1wcUxRQUFja0VJSUFOcmRrSC8vd054UVJRZ0RXdDJRUVIwSUFScUlRVWdCeUFOUVh4cUlBTnFJZ05CQTNZZ0Ftb2lCRFlDQUNBSUlBTkJCM0VpQXpZQ0FBVWdCQ0VGSUFJaEJBc2dHQ2dDQUNJQ1FRQktCRUFnR0NBQ1FYOXFOZ0lBSUJrb0FnQWdCV29NQWdzZ0JpQUVRUUZxYWkwQUFFRUlkQ0FHSUFScUxRQUFRUkIwY2lBR0lBUkJBbXBxTFFBQWNrRUlJQU5yZGtIKy93TnhJZ1lnQUVIZ1BHb2dJeWdDQUNJQ1FRSjBhaWdDQUVrRWZ5QUhJQU1nQUVIa1BXb2dCa0VRSUFKcmRpSUNhaTBBQUdvaUEwRURkaUFFYWpZQ0FDQUlJQU5CQjNFMkFnQWdBRUhreFFCcUlBSkJBWFJxQlFOQUFrQWdBa0VCYWlJQ1FROVBCRUJCRHlFQ0RBRUxJQVlnQUVIZ1BHb2dBa0VDZEdvb0FnQlBEUUVMQ3lBSElBSWdBMm9pQTBFRGRpQUVhallDQUNBSUlBTkJCM0UyQWdBZ0FFSGsxUUJxSUFZZ0FDQUNRUUowYWtIY1BHb29BZ0JyUVJBZ0FtdDJJQUJCb0QxcUlBSkJBblJxS0FJQWFpSUNJQ1FvQWdCUEJIOUJBQVVnQWd0QkFYUnFDeUlDTGdFQUlnTkIvLzhEY1NFQ0lBTkJFRVlFUUNBWVFRODJBZ0FnR1NnQ0FDRUNCU0FaSUFJMkFnQUxJQUlnQldvRklBUUxDeUlDUWY4L1N5RURJQUpCLy84UFN3Ui9RUUlGUVFFTElRUWdHeUFVS0FJQU5nSUFJQlFnRlNnQ0FEWUNBQ0FWSUE4b0FnQTJBZ0FnRHlBQ05nSUFJQllnQXdSL0lBUUZRUUFMSUJCcUlnTTJBZ0FnQUNBRElBSVFkZ3dCQ3dzTUJ3c2dIVUVBT2dBQUR3c2dEQkNXQVNBU1FRQTJBZ0FNQlFzZ0RCQ1dBU0FTUVFBMkFnQU1CQXNnREJDV0FTQVNRUUEyQWdBTUF3c2dEQkNXQVNBU1FRQTJBZ0FNQWdzZ0J5QURRUUpxSWdGQkEzWWdBbW8yQWdBZ0NDQUJRUWR4TmdJQUlCd2dCRUVPZGtFQmNVRUJjem9BQUF3QkN3OExJQUFRcFFJTDVnVUJCMzhnQUNnQ2FDQUFRUVJxSWdNb0FnQWlCRUVGYWtnRVFBOExJQUJCdUs0Q2FpZ0NBQVJBSUFBZ0FFSEFyZ0pxS0FJQUlnSkI3QjFzYWtHSXNBRnFLQUlBSVFFZ0FDZ0NFQ0lGSUFSQkFXcHFMUUFBUVFoMElBVWdCR290QUFCQkVIUnlJQVVnQkVFQ2Ftb3RBQUJ5UVFnZ0FFRUlhaUlHS0FJQUlnZHJka0grL3dOeElnVWdBQ0FDUWV3ZGJHcEJpSzhCYWlBQlFRSjBhaWdDQUVrRWZ5QURJQWNnQUNBQ1Fld2RiR3BCakxBQmFpQUZRUkFnQVd0MklnRnFMUUFBYWlJRFFRTjJJQVJxTmdJQUlBWWdBMEVIY1RZQ0FDQUFJQUpCN0Ixc2FrR011QUZxSUFGQkFYUnFCUU5BQWtBZ0FVRUJhaUlCUVE5UEJFQkJEeUVCREFFTElBVWdBQ0FDUWV3ZGJHcEJpSzhCYWlBQlFRSjBhaWdDQUU4TkFRc0xJQU1nQVNBSGFpSURRUU4ySUFScU5nSUFJQVlnQTBFSGNUWUNBQ0FBSUFKQjdCMXNha0dNeUFGcUlBVWdBQ0FDUWV3ZGJHb2dBVUVDZEdwQmhLOEJhaWdDQUd0QkVDQUJhM1lnQUNBQ1Fld2RiR3BCeUs4QmFpQUJRUUowYWlnQ0FHb2lBU0FBUVlTdkFXb2dBa0hzSFd4cUtBSUFUd1IvUVFBRklBRUxRUUYwYWdzaUFTNEJBRUdBQWtjRVFBOExCU0FBS0FJUUlnRWdCRUVCYW1vdEFBQkJDSFFnQVNBRWFpMEFBRUVRZEhJZ0FTQUVRUUpxYWkwQUFISkJDQ0FBUVFocUlnVW9BZ0FpQm10MlFmNy9BM0VpQWlBQVFZZ0JhaUFBS0FLSUFpSUJRUUowYWlnQ0FFa0VmeUFESUFZZ0FFR01BbW9nQWtFUUlBRnJkaUlCYWkwQUFHb2lBa0VEZGlBRWFqWUNBQ0FGSUFKQkIzRTJBZ0FnQUVHTUNtb2dBVUVCZEdvRkEwQUNRQ0FCUVFGcUlnRkJEMDhFUUVFUElRRU1BUXNnQWlBQVFZZ0JhaUFCUVFKMGFpZ0NBRThOQVFzTElBTWdBU0FHYWlJRFFRTjJJQVJxTmdJQUlBVWdBMEVIY1RZQ0FDQUFRWXdhYWlBQ0lBQWdBVUVDZEdvb0FvUUJhMEVRSUFGcmRpQUFRY2dCYWlBQlFRSjBhaWdDQUdvaUFTQUFLQUtFQVU4RWYwRUFCU0FCQzBFQmRHb0xJZ0V1QVFCQmpRSkhCRUFQQ3dzZ0FCQzBBUm9Mc0F3QkYzOENRQ0FBSUFCQndLNENhaWdDQUNJQ1Fkd0FiR3BCbks4Q2FpSVdJQllvQWdCQkFXbzJBZ0FnQUNBQ1Fkd0FiR3BCNks0Q2FpSUpJQUFnQWtIY0FHeHFRZVN1QW1vaUF5Z0NBQ0lNTmdJQUlBTWdBQ0FDUWR3QWJHcEI0SzRDYWlJREtBSUFJZ28yQWdBZ0F5QUFJQUpCM0FCc2FrSHNyZ0pxSWhnb0FnQWlCQ0FBSUFKQjNBQnNha0hjcmdKcUlnTW9BZ0JySWdzMkFnQWdBeUFFTmdJQUlBQkJ5SzRDYWlBQ1Fkd0FiR29pRHlnQ0FDQUViQ0FBSUFKQjNBQnNha0dncndKcUloY29BZ0JCQTNScUlBc2dBQ0FDUWR3QWJHcEJ6SzRDYWlJUUtBSUFiR29nQ2lBQUlBSkIzQUJzYWtIUXJnSnFJaEVvQWdCc2FpQU1JQUFnQWtIY0FHeHFRZFN1QW1vaUVpZ0NBR3hxSUFCQnhLNENhaUlOS0FJQUlBQWdBa0hjQUd4cVFkaXVBbW9pRXlnQ0FHeHFRUU4yUWY4QmNTQUJheUVEUVFBZ0FVRVlkQ0lPUVJWMUlnRnJJUWdnQUNBQ1Fkd0FiR3BCOEs0Q2FpSVVJQlFvQWdBZ0RrR0FnSUIvU2dSL0lBRUZJQWdMYWpZQ0FFRUFJQUVnQkdzaUNHc2hCeUFBSUFKQjNBQnNha0gwcmdKcUlnNGdDRUYvU2dSL0lBZ0ZJQWNMSUE0b0FnQnFOZ0lBUVFBZ0JDQUJhaUlJYXlFSElBQWdBa0hjQUd4cVFmaXVBbW9pQkNBSVFYOUtCSDhnQ0FVZ0J3c2dCQ2dDQUdvMkFnQkJBQ0FCSUF0cklnZHJJUVVnQUNBQ1Fkd0FiR3BCL0s0Q2FpSUlJQWRCZjBvRWZ5QUhCU0FGQ3lBSUtBSUFhallDQUVFQUlBc2dBV29pQjJzaEJTQUFJQUpCM0FCc2FrR0Fyd0pxSWdzZ0IwRi9TZ1IvSUFjRklBVUxJQXNvQWdCcU5nSUFRUUFnQVNBS2F5SUZheUVHSUFBZ0FrSGNBR3hxUVlTdkFtb2lCeUFGUVg5S0JIOGdCUVVnQmdzZ0J5Z0NBR28yQWdCQkFDQUtJQUZxSWdWcklRWWdBQ0FDUWR3QWJHcEJpSzhDYWlJS0lBVkJmMG9FZnlBRkJTQUdDeUFLS0FJQWFqWUNBRUVBSUFFZ0RHc2lCV3NoQmlBQUlBSkIzQUJzYWtHTXJ3SnFJZ3dnQlVGL1NnUi9JQVVGSUFZTElBd29BZ0JxTmdJQVFRQWdDU2dDQUNBQmFpSUpheUVHSUFBZ0FrSGNBR3hxUVpDdkFtb2lCU0FKUVg5S0JIOGdDUVVnQmdzZ0JTZ0NBR28yQWdCQkFDQUJJQTBvQWdCcklnWnJJUlVnQUNBQ1Fkd0FiR3BCbEs4Q2FpSUpJQVpCZjBvRWZ5QUdCU0FWQ3lBSktBSUFhallDQUVFQUlBMG9BZ0FnQVdvaUFXc2hGU0FBSUFKQjNBQnNha0dZcndKcUlnWWdBVUYvU2dSL0lBRUZJQlVMSUFZb0FnQnFOZ0lBSUJnZ0F5QVhLQUlBYTBFWWRFRVlkU0lBTmdJQUlBMGdBRFlDQUNBWElBTTJBZ0FnRmlnQ0FFRWZjUTBBSUJRb0FnQWhBaUFVUVFBMkFnQWdEaWdDQUNJQklBSkpJZ0JGQkVBZ0FpRUJDeUFPUVFBMkFnQWdCQ2dDQUNJQ0lBRkpJZzBFUUNBQ0lRRUxJQTBFUUVFQ0lRQUxJQVJCQURZQ0FDQUlLQUlBSWdJZ0FVa2lCQVJBSUFJaEFRc2dCQVJBUVFNaEFBc2dDRUVBTmdJQUlBc29BZ0FpQWlBQlNTSUVCRUFnQWlFQkN5QUVCRUJCQkNFQUN5QUxRUUEyQWdBZ0J5Z0NBQ0lDSUFGSklnUUVRQ0FDSVFFTElBUUVRRUVGSVFBTElBZEJBRFlDQUNBS0tBSUFJZ0lnQVVraUJBUkFJQUloQVFzZ0JBUkFRUVloQUFzZ0NrRUFOZ0lBSUF3b0FnQWlBaUFCU1NJRUJFQWdBaUVCQ3lBRUJFQkJCeUVBQ3lBTVFRQTJBZ0FnQlNnQ0FDSUNJQUZKSWdRRVFDQUNJUUVMSUFRRVFFRUlJUUFMSUFWQkFEWUNBQ0FKS0FJQUlnSWdBVWtpQkVVRVFDQUJJUUlMSUFRRVFFRUpJUUFMSUFsQkFEWUNBQ0FHS0FJQUlBSkpCRUJCQ2lFQUN5QUdRUUEyQWdBQ1FBSkFBa0FDUUFKQUFrQUNRQUpBQWtBQ1FBSkFJQUJCQVdzT0NnQUJBZ01FQlFZSENBa0tDeUFQS0FJQUlnQkJiMHdOQ2lBUElBQkJmMm8yQWdBTUNnc2dEeWdDQUNJQVFSQk9EUWtnRHlBQVFRRnFOZ0lBREFrTElCQW9BZ0FpQUVGdlRBMElJQkFnQUVGL2FqWUNBQXdJQ3lBUUtBSUFJZ0JCRUU0TkJ5QVFJQUJCQVdvMkFnQU1Cd3NnRVNnQ0FDSUFRVzlNRFFZZ0VTQUFRWDlxTmdJQURBWUxJQkVvQWdBaUFFRVFUZzBGSUJFZ0FFRUJhallDQUF3RkN5QVNLQUlBSWdCQmIwd05CQ0FTSUFCQmYybzJBZ0FNQkFzZ0VpZ0NBQ0lBUVJCT0RRTWdFaUFBUVFGcU5nSUFEQU1MSUJNb0FnQWlBRUZ2VEEwQ0lCTWdBRUYvYWpZQ0FBd0NDeUFUS0FJQUlnQkJFRTROQVNBVElBQkJBV28yQWdBTUFRc2dBMEgvQVhFUEN5QURRZjhCY1F1dElBSWpmd0YrSUFCQnVKZ0JhaUlaTEFBQUJFQWdBQ0FBS0FKa05nSmdJQUJCc0pnQmFpSUJJUWtnQVNrREFDRWxCU0FCUlFSQUlBQkJoQUZxUVFCQm5KVUJFRlFhSUFCQnhBQnFJZ2RDQURjQ0FDQUhRZ0EzQWdnZ0IwSUFOd0lRSUFkQ0FEY0NHQ0FIUVFBMkFpQWdBRUdnbGdGcUlBQkJ6TTBEYWlnQ0FDSUhRWUNBZ0FKSkJIOGdCd1ZCZ0lDQUFnc2dBRUhRelFOcUtBSUFjVFlDQUFzZ0FFRUFOZ0k0SUFCQkFEWUNDQ0FBUVFScUlnbEJBRFlDQUNBQVFjQ1lBV3BDQURjREFDQUFRZWdBYWlJRVFnQTNBd0FnQkVJQU53TUlJQVJDQURjREVDQUVRUUEyQWhnZ0FFSHdBR29pQmtGL05nSUFJQUZGQkVBZ0FFSEFyZ0pxUVFBMkFnQWdBRUhFcmdKcVFRQTJBZ0FnQUVHNHJnSnFRUUEyQWdBZ0FFRzhyZ0pxUVFFMkFnQWdBRUhJcmdKcVFRQkI4QUlRVkJvZ0FFR0Vyd0ZxUVFCQnRQOEFFRlFhSUFCQnpNd0Rha0VBT2dBQUlBQkJ0TWtEYWtFQVFaUURFRlFhSUFCQnNNa0Rha0VDTmdJQUlBQkJ5TXdEYWtFQU5nSUFDeUFBSUFFUWd3RWdCQ2dDQUNJSElBa29BZ0FpQTJzaUFrRUFTQVJBRHdzZ0JpQUFRZmdBYWlJRktBSUFJQU5ySUFZb0FnQnFOZ0lBSUFOQmdJQUJTZ1JBSUFKQkFFb0VRQ0FBS0FJUUlnY2dCeUFEYWlBQ0VGMGFDeUFKUVFBMkFnQWdCQ0FDTmdJQUlBSWhCd3NnQjBHQWdBSkdCRUJCQUNFQ1FZQ0FBaUVIQlNBQUtBSUFJQUFvQWhBZ0IycEJnSUFDSUFkckVGNGhBaUFFS0FJQUlnY2dBbW9oQXlBQ1FRQktCRUFnQkNBRE5nSUFJQU1oQndzTElBQkI3QUJxSWdNZ0IwRmlhaUlFTmdJQUlBVWdDU2dDQUNJSE5nSUFJQWRCZjJvZ0JpZ0NBQ0lIYWlFRklBZEJmMGNFUUNBRElBUWdCVWdFZnlBRUJTQUZDellDQUFzZ0FrRi9SZ1JBRHdzZ0FVVUVRQ0FBRUxRQlJRUkFEd3NMSUFCQnNKZ0JhaUlCS1FNQVFuOThJU1VnQVNBbE53TUFJQUVoQ1FzQ1FDQWxRbjlWQkVBZ0FFSFF6UU5xSVJBZ0FFSGdBR29oQnlBQVFRUnFJUW9nQUVIb0FHb2hFeUFBUWZnQWFpRVhJQUJCOEFCcUlSVWdBRUVRYWlFVUlBQkI3QUJxSVJnZ0FFSGtBR29oQVNBQVFiaXVBbW9oR2lBQVFRaHFJUXNnQUVHSUFtb2hHeUFBUWFTV0FXb2hEaUFBUWZRZmFpRWNJQUJCMUFCcUlRMGdBRUhjQUdvaEVTQUFRZGdBYWlFU0lBQkI4QjVxSVIwZ0FFSE0yd0JxSVI0Z0FFSEkyZ0JxSVI4Z0FFSE16UU5xSVNBZ0FFR0VBV29oSVNBQVFjQ3VBbW9oRmlBQVFieXVBbW9oSWlBQVFibVlBV29oSXlBQVFicVlBV29oSkFOQUFrQWdCeUFIS0FJQUlCQW9BZ0FpQW5FaUJUWUNBQ0FLS0FJQUlnUWdFeWdDQUNJRFFXSnFTZ1JBSUFNZ0JHc2lBa0VBU0EwRUlCVWdGeWdDQUNBRWF5QVZLQUlBYWpZQ0FDQUVRWUNBQVVvRVFDQUNRUUJLQkVBZ0ZDZ0NBQ0lESUFNZ0JHb2dBaEJkR2dzZ0NrRUFOZ0lBSUJNZ0FqWUNBQVVnQXlFQ0N5QUNRWUNBQWtZRVFFRUFJUU5CZ0lBQ0lRSUZJQUFvQWdBZ0ZDZ0NBQ0FDYWtHQWdBSWdBbXNRWGlFRElCTW9BZ0FpQWlBRGFpRUZJQU5CQUVvRVFDQVRJQVUyQWdBZ0JTRUNDd3NnR0NBQ1FXSnFJZ1EyQWdBZ0Z5QUtLQUlBSWdJMkFnQWdBa0YvYWlBVktBSUFJZ0pxSVFVZ0FrRi9Sd1JBSUJnZ0JDQUZTQVIvSUFRRklBVUxOZ0lBQ3lBRFFYOUdEUVFnQnlnQ0FDRUZJQkFvQWdBaEFnc2dBU2dDQUNJR0lBVkdJQVlnQldzZ0FuRkJqUUpMY2tVRVFDQWtRUUU2QUFBZ0FDZ0NBQ0VFSUE0b0FnQWdCbW9oQXlBRklBWkpCRUFnQkNBRElBSkJBQ0FHYTNFUVpTQUFLQUlBSUE0b0FnQWdCeWdDQUJCbElDTkJBVG9BQUFVZ0JDQURJQVVnQm1zUVpRc2dBU0FIS0FJQUlnVTJBZ0FnR1N3QUFBMEJDd0pBQWtBZ0dpZ0NBQVJBSUFBZ0ZpZ0NBQ0lHUWV3ZGJHcEJpTEFCYWlnQ0FDRUNJQlFvQWdBaUF5QUtLQUlBSWdSQkFXcHFMUUFBUVFoMElBTWdCR290QUFCQkVIUnlJQU1nQkVFQ2Ftb3RBQUJ5UVFnZ0N5Z0NBQ0lEYTNaQi92OERjU0lGSUFBZ0JrSHNIV3hxUVlpdkFXb2dBa0VDZEdvb0FnQkpCSDhnQ2lBRElBQWdCa0hzSFd4cVFZeXdBV29nQlVFUUlBSnJkaUlEYWkwQUFHb2lBa0VEZGlBRWFqWUNBQ0FMSUFKQkIzRTJBZ0FnQUNBR1Fld2RiR3BCakxnQmFpQURRUUYwYWdVRFFBSkFJQUpCQVdvaUFrRVBUd1JBUVE4aEFnd0JDeUFGSUFBZ0JrSHNIV3hxUVlpdkFXb2dBa0VDZEdvb0FnQlBEUUVMQ3lBS0lBSWdBMm9pQTBFRGRpQUVhallDQUNBTElBTkJCM0UyQWdBZ0FDQUdRZXdkYkdwQmpNZ0JhaUFGSUFBZ0JrSHNIV3hxSUFKQkFuUnFRWVN2QVdvb0FnQnJRUkFnQW10MklBQWdCa0hzSFd4cVFjaXZBV29nQWtFQ2RHb29BZ0JxSWdJZ0FFR0Vyd0ZxSUFaQjdCMXNhaWdDQUU4RWYwRUFCU0FDQzBFQmRHb0xJZ0l1QVFBaUFrR0FBa1lFUUNBQUVMUUJEUUlNQndVZ0FDQUNRZi8vQTNFUWd3UWhCU0FPS0FJQUlRTWdCeUFIS0FJQUlnSkJBV28yQWdBZ0F5QUNhaUFGT2dBQUlCWWdGaWdDQUVFQmFpSUNJQ0lvQWdCR0JIOUJBQVVnQWdzMkFnQWdDU0FKS1FNQVFuOThJaVUzQXdBTEJTQVVLQUlBSWdnZ0NpZ0NBQ0lNUVFGcWFpMEFBRUVJZENBSUlBeHFMUUFBUVJCMGNpQUlJQXhCQW1wcUxRQUFja0VJSUFzb0FnQWlBMnQyUWY3L0EzRWlCaUFBUVlnQmFpQWJLQUlBSWdKQkFuUnFLQUlBU1FSL0lBb2dBeUFBUVl3Q2FpQUdRUkFnQW10MklnUnFMUUFBYWlJQ1FRTjJJQXhxSWdNMkFnQWdDeUFDUVFkeElnSTJBZ0FnQUVHTUNtb2dCRUVCZEdvRkEwQUNRQ0FDUVFGcUlnSkJEMDhFUUVFUElRUU1BUXNnQmlBQVFZZ0JhaUFDUVFKMGFpZ0NBRThOQVNBQ0lRUUxDeUFLSUFRZ0Eyb2lBa0VEZGlBTWFpSUROZ0lBSUFzZ0FrRUhjU0lDTmdJQUlBQkJqQnBxSUFZZ0FDQUVRUUowYWlnQ2hBRnJRUkFnQkd0MklBQkJ5QUZxSUFSQkFuUnFLQUlBYWlJRUlDRW9BZ0JQQkg5QkFBVWdCQXRCQVhScUN5SUVMZ0VBSWdSQi8vOERjVUdBQWtnRVFDQU9LQUlBSVFJZ0J5QUZRUUZxTmdJQUlBSWdCV29nQkRvQUFDQUpJQWtwQXdCQ2Yzd2lKVGNEQUF3REN5QUVRZi8vQTNFaEJpQUVRZi8vQTNGQmpRSktCRUFnQmtIeWZXb2lCRUhSTUdvdEFBQkJBMm9oQlNBRVFlMHdhaTBBQUNFRUlBWkI2bjFxUVJSSkJFQWdDQ0FEUVFGcWFpMEFBRUVJZENBSUlBTnFMUUFBUVJCMGNpQUlJQU5CQW1wcUxRQUFja0VJSUFKcmRrSC8vd054UVJBZ0JHdDJJQVZxSVFVZ0NpQUNJQVJxSWdKQkEzWWdBMm9pQkRZQ0FDQUxJQUpCQjNFaUF6WUNBQVVnQXlFRUlBSWhBd3NnQ0NBRVFRRnFhaTBBQUVFSWRDQUlJQVJxTFFBQVFSQjBjaUFJSUFSQkFtcHFMUUFBY2tFSUlBTnJka0grL3dOeElnd2dBRUgwSG1vZ0hDZ0NBQ0lDUVFKMGFpZ0NBRWtFZnlBS0lBTWdBRUg0SDJvZ0RFRVFJQUpyZGlJR2FpMEFBR29pQWtFRGRpQUVhaUlETmdJQUlBc2dBa0VIY1NJQ05nSUFJQUJCK0NkcUlBWkJBWFJxQlFOQUFrQWdBa0VCYWlJQ1FROVBCRUJCRHlFR0RBRUxJQXdnQUVIMEhtb2dBa0VDZEdvb0FnQlBEUUVnQWlFR0N3c2dDaUFHSUFOcUlnSkJBM1lnQkdvaUF6WUNBQ0FMSUFKQkIzRWlBallDQUNBQVFmZzNhaUFNSUFBZ0JrRUNkR3BCOEI1cUtBSUFhMEVRSUFacmRpQUFRYlFmYWlBR1FRSjBhaWdDQUdvaUJDQWRLQUlBVHdSL1FRQUZJQVFMUVFGMGFnc2lCQzhCQUNJTVFRSjBRY3daYWlnQ0FFRUJhaUVFSUF4QmlURnFMUUFBSVFZZ0RFRjhha0VzU1FSQUlBZ2dBMEVCYW1vdEFBQkJDSFFnQ0NBRGFpMEFBRUVRZEhJZ0NDQURRUUpxYWkwQUFISkJDQ0FDYTNaQi8vOERjVUVRSUFacmRpQUVhaUVFSUFvZ0FpQUdhaUlDUVFOMklBTnFOZ0lBSUFzZ0FrRUhjVFlDQUFzZ0JDSUNRZjgvU3lFR0lBSkIvLzhQU3dSL1FRSUZRUUVMSVFRZ0RTQU5LQUlBSWdOQkFXbzJBZ0FnQUVIRUFHb2dBMEVEY1VFQ2RHb2dBallDQUNBUklBSTJBZ0FnRWlBR0JIOGdCQVZCQUFzZ0JXb2lBellDQUNBSklBa3BBd0FnQTYxOU53TUFJQUFnQXlBQ0VIWU1BZ3NDUUFKQUFrQWdCRUdBQW1zT0RnRUNBZ0lDQWdJQ0FnSUNBZ0lBQWdzZ0FCQzBBUTBEREFnTElCSW9BZ0FoQlNBUktBSUFJUU1nRFNBTktBSUFJZ0pCQVdvMkFnQWdBRUhFQUdvZ0FrRURjVUVDZEdvZ0F6WUNBQ0FSSUFNMkFnQWdFaUFGTmdJQUlBa2dDU2tEQUNBRnJYMDNBd0FnQUNBRklBTVFkZ3dDQ3lBRVFmLy9BM0ZCaFFKT0JFQWdCa0g3ZldvaUJVSEJNV290QUFBaEJDQUZRYmt4YWkwQUFFRUJhaUFJSUFOQkFXcHFMUUFBUVFoMElBZ2dBMm90QUFCQkVIUnlJQWdnQTBFQ2Ftb3RBQUJ5UVFnZ0FtdDJRZi8vQTNGQkVDQUVhM1pxSVFVZ0NpQUNJQVJxSWdKQkEzWWdBMm8yQWdBZ0N5QUNRUWR4TmdJQUlBMGdEU2dDQUNJQ1FRRnFOZ0lBSUFCQnhBQnFJQUpCQTNGQkFuUnFJQVUyQWdBZ0VTQUZOZ0lBSUJKQkFqWUNBQ0FKSUFrcEF3QkNmbnczQXdBZ0J5Z0NBQ0lHSUFWcklnUWdJQ2dDQUVIL1gyb2lBa2tnQmlBQ1NYRUVRQ0FPS0FJQUlnSWdCR29oQXlBSElBWkJBbW8yQWdBZ0FpQUdhaUlDSUFNc0FBQTZBQUFnQWlBRExBQUJPZ0FCQlNBT0tBSUFJZ0lnQm1vZ0FpQUVJQkFvQWdCeGFpd0FBRG9BQUNBSElBY29BZ0JCQVdvZ0VDZ0NBQ0lGY1NJRE5nSUFJQTRvQWdBaUFpQURhaUFDSUFSQkFXb2dCWEZxTEFBQU9nQUFJQWNnQnlnQ0FFRUJhaUFRS0FJQWNUWUNBQXNNQWdzZ0FFSEVBR29nRFNnQ0FDSU1JQVpyUVFOeFFRSjBhaWdDQUNFUElBZ2dBMEVCYW1vdEFBQkJDSFFnQ0NBRGFpMEFBRUVRZEhJZ0NDQURRUUpxYWkwQUFISkJDQ0FDYTNaQi92OERjU0lFSUFCQnpOb0FhaUFlS0FJQUlnVkJBblJxS0FJQVNRUi9JQW9nQWlBQVFkRGJBR29nQkVFUUlBVnJkaUlGYWkwQUFHb2lBa0VEZGlBRGFpSUROZ0lBSUFzZ0FrRUhjU0lDTmdJQUlBQkIwT01BYWlBRlFRRjBhZ1VEUUFKQUlBVkJBV29pQlVFUFR3UkFRUThoQlF3QkN5QUVJQUJCek5vQWFpQUZRUUowYWlnQ0FFOE5BUXNMSUFvZ0JTQUNhaUlDUVFOMklBTnFJZ00yQWdBZ0N5QUNRUWR4SWdJMkFnQWdBRUhROHdCcUlBUWdBQ0FGUVFKMGFrSEkyZ0JxS0FJQWEwRVFJQVZyZGlBQVFZemJBR29nQlVFQ2RHb29BZ0JxSWdVZ0h5Z0NBRThFZjBFQUJTQUZDMEVCZEdvTElnVXZBUUFpQmtIUk1Hb3RBQUJCQW1vaEJTQUdRZTB3YWkwQUFDRUVJQVpCZUdwQkZFa0VRQ0FJSUFOQkFXcHFMUUFBUVFoMElBZ2dBMm90QUFCQkVIUnlJQWdnQTBFQ2Ftb3RBQUJ5UVFnZ0FtdDJRZi8vQTNGQkVDQUVhM1lnQldvaEJTQUtJQUlnQkdvaUFrRURkaUFEYWpZQ0FDQUxJQUpCQjNFMkFnQUxJQVVoQWlBUFFZQUNTd1JBSUE5Qi96OUxJUVVnRDBILy93OUxCSDlCQXdWQkFnc2hBeUFDSUFVRWZ5QURCVUVCQzJvaEFnc2dEU0FNUVFGcU5nSUFJQUJCeEFCcUlBeEJBM0ZCQW5ScUlBODJBZ0FnRVNBUE5nSUFJQklnQWpZQ0FDQUpJQWtwQXdBZ0FxMTlOd01BSUFBZ0FpQVBFSFlNQVFzTUFRc2dDU2tEQUNFbEN5QWxRbjlWRFFFTUF3c0xEd1VnQUVIZ0FHb2hCeUFBUWVRQWFpRUJDd3NnQUJDQ0JDQUhLQUlBSWdRZ0FTZ0NBQ0lHUndSQUlBQkJ1cGdCYWtFQk9nQUFDeUFBS0FJQUlRVWdBRUdrbGdGcUlnSW9BZ0FnQm1vaEF5QUVJQVpKQkVBZ0JTQURJQUJCME0wRGFpZ0NBRUVBSUFacmNSQmxJQUFvQWdBZ0FpZ0NBQ0FIS0FJQUVHVWdBRUc1bUFGcVFRRTZBQUFGSUFVZ0F5QUVJQVpyRUdVTElBRWdCeWdDQURZQ0FBdjVDd0VLZndKQUFrQWdBRUhvcmdGcVFRQTJBZ0FnQUVFRWFpSUZFRmdoQVFKQUlBQkI4SzRCYWlJREtBSUFRUUpHQkVBZ0JVRUJFRlVnQVVILy93Rk5CRUFnQTBFQU5nSUFJQUZCQVhRaEFRd0NDd3dEQ3dzZ0FVRUlkaUVFSUFCQjVLNEJhaUVHSUFCQjJLNEJhaUlIS0FJQVFTVkpCSDlCQUNFQkEwQWdBVUVDZEVIOEVtb29BZ0FoQ0NBQlFRRnFJUUpCZ0g0Z0FVRUJSaUlLQkg4Z0JpZ0NBRUVEYWdVZ0FVRUNkRUc0RTJvb0FnQUxJZ2wxSUFnZ0JITnhCRUFnQWlFQkRBRUxDeUFGSUFvRWZ5QUdLQUlBUVFOcUJTQUJRUUowUWJnVGFpZ0NBQXNpQWhCVklBRUZRUUFoQVFOQUlBRkJBblJCK0JOcUtBSUFJUWdnQVVFQmFpRUNRWUIrSUFGQkEwWWlDZ1IvSUFZb0FnQkJBMm9GSUFGQkFuUkJ0QlJxS0FJQUN5SUpkU0FJSUFSemNRUkFJQUloQVF3QkN3c2dCU0FLQkg4Z0JpZ0NBRUVEYWdVZ0FVRUNkRUcwRkdvb0FnQUxJZ0lRVlNBQkN5SUNRUWhOQkVBZ0EwRUFOZ0lBSUFjZ0J5Z0NBQ0FDYWlJQklBRkJCSFpyTmdJQVFZQWdJQVVRV0VIdy93TnhJZ1pMQkg4Z0JVRUZFRlZCQlNFQlFRQUZRUVVoQVVFQUlRTURRQ0FCUVFGcUlRRWdBMEVCYWlJRVFRSjBRYkFXYWlnQ0FDQUdUUVJBSUFRaEF3d0JDd3NnQlNBQkVGVWdBMEVDZEVHd0Ztb29BZ0FMSVFNZ0FFSEtuQUZxSUFZZ0EydEJFQ0FCYTNZZ0FVRUNkRUhRRm1vb0FnQnFRZjhCY1NJQlFRRjBhaUlGTGdFQUlRTWdBQ0FCUVFGMGFrSEluQUZxSVFRZ0FRUkFJQVVnQkM0QkFEc0JBQ0FFSUFNN0FRQUxJQUJCMUFCcUlnRW9BZ0FoQkNBQklBUkJBV28yQWdBZ0FFSEVBR29nQkVFQ2RHb2dBMEgvL3dOeFFRRnFJZ00yQWdBZ0FTQUJLQUlBUVFOeE5nSUFJQUFnQWtFQ2FpSUJOZ0pZREFFTElBSkJDVVlFUUNBRElBTW9BZ0JCQVdvMkFnQU1BZ3NnQTBFQU5nSUFJQUpCRGtZRVFFR0F3QUlnQlJCWVFmRC9BM0VpQkVzRWZ5QUZRUU1RVlVFRElRRkJBQVZCQXlFQlFRQWhBZ05BSUFGQkFXb2hBU0FDUVFGcUlnTkJBblJCOUJScUtBSUFJQVJOQkVBZ0F5RUNEQUVMQ3lBRklBRVFWU0FDUVFKMFFmUVVhaWdDQUFzaEFpQUJRUUowUVp3VmFpZ0NBRUVGYWlBRUlBSnJRUkFnQVd0MmFpRUJJQVVRV0VFQmRrR0FnQUp5SVFNZ0JVRVBFRlVnQUNBQk5nSllEQUVMSUFCQnhBQnFRUUVnQW1zZ0FFSFVBR29pQ1NnQ0FHcEJBM0ZCQW5ScUtBSUFJUWRCZ0lBQ0lBVVFXRUh3L3dOeElnaExCSDhnQlVFQ0VGVkJBaUVCUVFBRlFRSWhBVUVBSVFNRFFDQUJRUUZxSVFFZ0EwRUJhaUlFUVFKMFFkQVZhaWdDQUNBSVRRUkFJQVFoQXd3QkN3c2dCU0FCRUZVZ0EwRUNkRUhRRldvb0FnQUxJUU1nQWtFS1JpQUlJQU5yUVJBZ0FXdDJJQUZCQW5SQi9CVnFLQUlBYWlJQlFRSnFJZ0pCZ1FKR2NRUkFJQVlnQmlnQ0FFRUJjellDQUE4TElBRkJBMm9oQVNBSFFZQUNTd1IvSUFFRklBSUxJQWNnQUVHQXJ3RnFLQUlBVDJvaEFTQUpJQWtvQWdBaUFrRUJhallDQUNBQVFjUUFhaUFDUVFKMGFpQUhOZ0lBSUFrZ0NTZ0NBRUVEY1RZQ0FDQUFJQUUyQWxnZ0FDQUhOZ0pjSUFCQnNKZ0JhaUlDSUFJcEF3QWdBYTE5TndNQUlBRkZCRUFQQ3lBQVFhU1dBV29oQkNBQVFlQUFhaUlES0FJQUlRSWdBRUhRelFOcUlnVW9BZ0FoQUFOQUlBUW9BZ0FpQmlBQ2FpQUdJQUlnQjJzZ0FIRnFMQUFBT2dBQUlBTWdBeWdDQUVFQmFpQUZLQUlBSWdCeElnSTJBZ0FnQVVGL2FpSUJEUUFMRHdzZ0FDQUROZ0pjSUFCQnNKZ0JhaUlDSUFJcEF3QWdBYTE5TndNQUlBRkZCRUFQQ3lBQVFhU1dBV29oQlNBQVFlQUFhaUlFS0FJQUlRSWdBRUhRelFOcUlnWW9BZ0FoQUFOQUlBVW9BZ0FpQnlBQ2FpQUhJQUlnQTJzZ0FIRnFMQUFBT2dBQUlBUWdCQ2dDQUVFQmFpQUdLQUlBSWdCeElnSTJBZ0FnQVVGL2FpSUJEUUFMRHdzZ0FDZ0NYQ0VFSUFCQnNKZ0JhaUlCSUFFcEF3QWdBQ2dDV0NJQnJYMDNBd0FnQVVVRVFBOExJQUJCcEpZQmFpRUZJQUJCNEFCcUlnTW9BZ0FoQWlBQVFkRE5BMm9pQmlnQ0FDRUFBMEFnQlNnQ0FDSUhJQUpxSUFjZ0FpQUVheUFBY1dvc0FBQTZBQUFnQXlBREtBSUFRUUZxSUFZb0FnQWlBSEVpQWpZQ0FDQUJRWDlxSWdFTkFBc0x4ZzBDRG44RGZpQUJSUVJBSUFCQmhBRnFRUUJCbkpVQkVGUWFJQUJCeEFCcUlnSkNBRGNDQUNBQ1FnQTNBZ2dnQWtJQU53SVFJQUpDQURjQ0dDQUNRUUEyQWlBZ0FFR2dsZ0ZxSUFCQnpNMERhaWdDQUNJQ1FZQ0FnQUpKQkg4Z0FnVkJnSUNBQWdzZ0FFSFF6UU5xS0FJQWNUWUNBQXNnQUVFQU5nSTRJQUJCQURZQ0NDQUFRUVJxSWd4QkFEWUNBQ0FBUWNDWUFXcENBRGNEQUNBQVFlZ0FhaUlIUWdBM0F3QWdCMElBTndNSUlBZENBRGNERUNBSFFRQTJBaGdnQUVId0FHb2lDVUYvTmdJQUlBRUVRQ0FBUVFFUWd3RUZJQUJCd0s0Q2FrRUFOZ0lBSUFCQnhLNENha0VBTmdJQUlBQkJ1SzRDYWtFQU5nSUFJQUJCdks0Q2FrRUJOZ0lBSUFCQnlLNENha0VBUWZBQ0VGUWFJQUJCaEs4QmFrRUFRYlQvQUJCVUdpQUFRY3pNQTJwQkFEb0FBQ0FBUWJUSkEycEJBRUdVQXhCVUdpQUFRYkRKQTJwQkFqWUNBQ0FBUWNqTUEycEJBRFlDQUNBQVFRQVFnd0VnQUVIVXJnRnFJZ0pDQURjQ0FDQUNRZ0EzQWdnZ0FrSUFOd0lRSUFCQjBLNEJha0dBNmdBMkFnQWdBRUdBcndGcVFZSEFBRFlDQUNBQVFmeXVBV3BCZ0FFMkFnQWdBRUg0cmdGcVFZQUJOZ0lBQ3lBQVFmU3VBV29pQ2tFQU5nSUFJQUJCeks0QmFpSU9RUUEyQWdBZ0FFSHNyZ0ZxSWd0QkFEWUNBQ0FBUWZDdUFXcEJBRFlDQUNBSFFRQTJBZ0FnRENnQ0FDSUNRUUJNQkVBZ0NTQUFRZmdBYWlJRktBSUFJQUpySUFrb0FnQnFOZ0lBSUFBb0FnQWdBQ2dDRUVHQWdBSVFYaUVHSUFjb0FnQWlBaUFHYWlFRElBWkJBRW9FUUNBSElBTTJBZ0FnQXlFQ0N5QUFRZXdBYWlJRElBSkJZbW9pQmpZQ0FDQUZJQXdvQWdBaUFqWUNBQ0FDUVg5cUlBa29BZ0FpQW1vaEJTQUNRWDlIQkVBZ0F5QUdJQVZJQkg4Z0JnVWdCUXMyQWdBTEN5QUFRZUFBYWlJSUlBRUVmeUFBS0FKa0JVRUFJUUVEUUNBQVFjcWdBV29nQVVFQmRHb2dBVUVJZEVILy93TnhJZ0k3QVFBZ0FFSEttQUZxSUFGQkFYUnFJQUk3QVFBZ0FFSEtuQUZxSUFGQkFYUnFJQUU3QVFBZ0FFSEtwQUZxSUFGQkFYUnFRUUFnQVd0QkNIUTdBUUFnQVVFQmFpSUJRWUFDUncwQUN5QUFRY3FvQVdwQkFFR0FCaEJVR2tFQUlBQkJ5cUFCYWlBQVFjcXFBV29RbndGQkFBc2lBVFlDQUNBQVFiQ1lBV29pRHlrREFDSVNRbjk4SVJBZ0R5QVFOd01BSUJKQ0FGVUVRQ0FBRU4wQklBcEJDRFlDQUVFUklRUUZJQkFoRVFzRFFBSkFJQVJCRVVZRVFDQVBLUU1BSVJFTElCRkNmMWNOQUNBSUlBZ29BZ0FnQUVIUXpRTnFJZ1lvQWdBaUFuRWlBVFlDQUNBTUtBSUFJZ1FnQnlnQ0FDSURRV0pxU2dSQUlBTWdCR3NpQVVFQVNBMEJJQWtnQUVINEFHb2lCU2dDQUNBRWF5QUpLQUlBYWpZQ0FDQUVRWUNBQVVvRVFDQUJRUUJLQkVBZ0FDZ0NFQ0lDSUFJZ0JHb2dBUkJkR2dzZ0RFRUFOZ0lBSUFjZ0FUWUNBQVVnQXlFQkN5QUJRWUNBQWtZRVFFRUFJUUpCZ0lBQ0lRRUZJQUFvQWdBZ0FDZ0NFQ0FCYWtHQWdBSWdBV3NRWGlFQ0lBY29BZ0FpQVNBQ2FpRURJQUpCQUVvRVFDQUhJQU0yQWdBZ0F5RUJDd3NnQUVIc0FHb2lBeUFCUVdKcUlnUTJBZ0FnQlNBTUtBSUFJZ0UyQWdBZ0FVRi9haUFKS0FJQUlnRnFJUVVnQVVGL1J3UkFJQU1nQkNBRlNBUi9JQVFGSUFVTE5nSUFDeUFDUVg5R0RRRWdDQ2dDQUNFQklBWW9BZ0FoQWdzZ0FFSGtBR29pQlNnQ0FDSU5JQUZHSUEwZ0FXc2dBbkZCalFKTGNrVUVRQ0FBUWJxWUFXcEJBVG9BQUNBQUtBSUFJUVFnQUVHa2xnRnFJZ01vQWdBZ0RXb2hCaUFCSUExSkJFQWdCQ0FHSUFKQkFDQU5hM0VRWlNBQUtBSUFJQU1vQWdBZ0NDZ0NBQkJsSUFCQnVaZ0Jha0VCT2dBQUJTQUVJQVlnQVNBTmF4QmxDeUFGSUFnb0FnQTJBZ0FMSUFzb0FnQUVRQ0FBRU53QlFSRWhCQXdDQ3lBS0lBb29BZ0FpQWtGL2FpSUJOZ0lBSUFKQkFVZ0VmeUFBRU4wQklBcEJCellDQUVFSEJTQUJDeUVDSUE0Z0RpZ0NBQ0lEUVFGMElnRTJBZ0FnQTBHQUFYRUVRQ0FBUWZ5dUFXb29BZ0FnQUVINHJnRnFLQUlBU3dSQUlBQVFwd0lGSUFBUTNBRUxRUkVoQkF3Q0N5QUtJQUpCZjJvMkFnQWdBa0VCU0FSQUlBQVEzUUVnQ2tFSE5nSUFJQTRvQWdBaEFRc2dEaUFCUVFGME5nSUFJQUZCZ0FGeFJRUkFJQUFRaFFSQkVTRUVEQUlMSUFCQi9LNEJhaWdDQUNBQVFmaXVBV29vQWdCTEJFQWdBQkRjQVFVZ0FCQ25BZ3RCRVNFRURBRUxDeUFJS0FJQUlnWWdBRUhrQUdvaUJTZ0NBQ0lMUndSQUlBQkJ1cGdCYWtFQk9nQUFDeUFBS0FJQUlRTWdBRUdrbGdGcUlnRW9BZ0FnQzJvaEFpQUdJQXRKQkVBZ0F5QUNJQUJCME0wRGFpZ0NBRUVBSUF0cmNSQmxJQUFvQWdBZ0FTZ0NBQ0FJS0FJQUVHVWdBRUc1bUFGcVFRRTZBQUFGSUFNZ0FpQUdJQXRyRUdVTElBVWdDQ2dDQURZQ0FBdnVDZ0lZZndGK0lBQkIxQXhxSWdrb0FnQWlBaXdBQUNFTElBSW9BZ1FoQVNBQ0xRQUJJZ0loQmdKQUlBSkIvd0Z4UVI5SUJFQWdBRUhJREdvb0FnQW9BZ3dpQWdSQUlBSkJCR29oQXlBQ0xnRUFRUUZHQkVBZ0EwRUJhaUlITFFBQUlRSWdCeUFDUWY4QmNVRWdTQ0FDUWY4QmNXbzZBQUFnQXlFQ0RBTUxJQUlvQWdnaUFpd0FBQ0FMUndSQUEwQWdBa0VJYWlJSExBQUFJQXRIQkVBZ0J5RUNEQUVMQ3lBQ0xRQUpJQUl0QUFGSUJFQWdCeUVDQlNBSEtRSUFJUmtnQnlBQ0tRSUFOd0lBSUFJZ0dUY0NBQXNMSUFKQkFXb2lCeTBBQUNJRVFmTUFTQVJBSUFjZ0JFSC9BWEZCQW1vNkFBQWdBeUFETHdFQVFRSnFPd0VBQ3dWQkFDRUNDd1ZCQUNFQ0N3c0NRQ0FBUWVBTWFpSUVLQUlBQkVBZ0FFR1FsUUZxSVE0Z0FFSGdsd0ZxSWdNb0FnQWhCeUFESUFkQkFXbzJBZ0FnQnlBTE9nQUFJQU1vQWdBaUJ5QUFRZXlYQVdvb0FnQkpCRUFnQVFSQUlBY2dBVWtFUUNBQklRSUZJQUJCQUNBQ0VLZ0NJZ0pGRFFRTElBUWdCQ2dDQUVGL2FpSUJOZ0lBSUFFRVFDQUFRY2dNYWlJRElRa2dBeWdDQUNFREJTQURJQU1vQWdBZ0FFSFFER29vQWdBZ0FFSElER29pQ1NnQ0FDSURSMEVmZEVFZmRXbzJBZ0FnQWlJSElRSUxCU0FKS0FJQUlBYzJBZ1FnQUVISURHb2lDU2dDQUNJQ0lRTUxJQU12QVFBaUJDRU5Ba0FnQUVIUURHb2lFU2dDQUNJQklBTkhCRUFnQUVHNmxRRnFJUklnQUVIQWxnRnFJUW9nQUVIRWxnRnFJUThnQUVIY0RHb2hFeUFFUWYvL0EzRkJBMG9oRkNBR1FRRjBJUlZCQVNBR2F5QURMd0VFYWlBTmF5RVdJQUVoQXdOQUFrQWdBeTRCQUNJQlFmLy9BM0VoQ0NBQlFRRkdCRUFnQUVISWxnRnFJQkl0QUFBaUJrRUNkR29pQkNnQ0FDSUJCRUFnQkNBQktBSUFOZ0lBQlNBS0lBb29BZ0FpQVNBQVFaU1ZBV29nQm1vaUJTMEFBRUVFZEdvaUJEWUNBQ0FFSUE4b0FnQkxCRUFnQ2lBRUlBVXRBQUJCQkhSck5nSUFJQTRnQmhDZ0FTRUJDd3NnQVVVTkJ5QUJJQU5CQkdvaUJpa0NBRGNDQUNBRElBRTJBZ2dnQVVFQmFpSUVMUUFBSWdWQkFYUkIvd0Z4SVFFZ0JDQUZRZjhCY1VFZVNBUi9JQUVGUWZnQUlnRUxPZ0FBSUFZZ0V5Z0NBQ0FVYWlBQlFmOEJjV29pQVRzQkFDQURRUVJxSVFZRkFrQWdDRUVCY1VVRVFDQURRUWhxSWdRb0FnQWhCaUFBSUFoQkFYWWlCV3BCdVpVQmFpd0FBQ0lYSUFCQnVwVUJhaUFGYWl3QUFDSUJSZ1JBSUFaRkRRb01BZ3NnQUVISWxnRnFJQUZCL3dGeEloQkJBblJxSWd3b0FnQWlBUVJBSUF3Z0FTZ0NBRFlDQUFVZ0NpQUtLQUlBSWdFZ0FFR1VsUUZxSUJCcUloZ3RBQUJCQkhScUlndzJBZ0FnRENBUEtBSUFTd1JBSUFvZ0RDQVlMUUFBUVFSMGF6WUNBQ0FPSUJBUW9BRWhBUXNMSUFGRkRRTWdBU0FHSUFWQkJIUVFVeG9nQmlBQVFjaVdBV29nRjBIL0FYRkJBblJxSWdVb0FnQTJBZ0FnQlNBR05nSUFJQVFnQVRZQ0FBc0xJQWhCQW5RZ0RVMGdDRUVEZENBRFFRUnFJZ1l2QVFBaUFVOXhRUUYwSUFoQkFYUWdEVWx5SUFGcUlRRWdCaUFCT3dFQUN5QUJRZi8vQTNFaUJVRUdhaUFWYkNJRUlCWWdCV29pQlVFR2JFa0VRQ0FFSUFWTEJIOUJBZ1ZCQVFzZ0JDQUZRUUowVDJvaEJVRURJUVFGSUFRZ0JVRUpiRThFZjBFRkJVRUVDeUFFSUFWQkRHeFBhaUFFSUFWQkQyeFBhaUlFSVFVTElBWWdCQ0FCYWpzQkFDQURLQUlJSWdFZ0NFRURkR29nQnpZQ0JDQUJJQWhCQTNScUlBczZBQUFnQVNBSVFRTjBhaUFGT2dBQklBTWdDRUVCYWpzQkFDQURLQUlNSWdNZ0NTZ0NBRWNOQVF3REN3c2dCRUVBTmdJQURBUUxDeUFKSUFJMkFnQWdFU0FDTmdJQUR3c0ZJQUJCQVNBQ0VLZ0NJUUlnQ1NnQ0FDQUNOZ0lFSUFCQjBBeHFJQUkyQWdBZ0FFSElER29nQWpZQ0FDQUNCRUFQQ3dzTElBQVEzd0VnQUVId0ZHcEJBRG9BQUF1WUJnRVBmeU1FSVFzakJFR0FDR29rQkNBQUxnRUFJZ05CLy84RGNTSU1JQUZCMkF4cUlnOG9BZ0FpQW1zaEJDQURRWUFDUmdSL1FRRWhDQ0FCUWNJTWFnVWdBVUVDYWlBQklBUnFRZThPYWkwQUFFRUdkR29nQUNnQ0RDOEJBQ0FNYXlBRVNrRUNkR29nREVFTGJDQUFMd0VFUzBFRGRHb2dBaUFFU2tFRWRHb2dBVUh5RkdvdEFBQkJBblJxSWdJdkFRQWlBeUFDTFFBQ2RpRUZJQUlnQXlBRmF6c0JBQ0FGSUFWRmFpRUlJQUlMSVFrZ0FVR0lsUUZxSWhBZ0NEWUNBQ0FCUWZBVWFpSU5MQUFBSVFvZ0FDZ0NDRUY0YWlFQ0lBc2lBeUVHQTBBZ0FpRUZBMEFnQVVId0RHb2dCVUVJYWlJQ0xRQUFhaXdBQUNBS1JnUkFJQUloQlF3QkN3c2dCeUFGTFFBSmFpRUhJQVpCQkdvaEJTQUdJQUkyQWdBZ0JFRi9haUlFQkVBZ0JTRUdEQUVMQ3lBUUlBZ2dCMm9pRGpZQ0FDQUJRZmlVQVdvb0FnQWdBVUgwbEFGcUtBSUFheUVFSUFGQi9KUUJhaUlDS0FJQUlBNXVJUVVnQWlBRk5nSUFJQVFnQlc0aUNDQU9UZ1JBSUFza0JFRUFEd3NnQVVHQWxRRnFJUVlnQ0NBSFNBUkFRUUFoQkFVZ0JpQUhOZ0lBSUFGQmhKVUJhaUFPTmdJQUlBd2dEeWdDQUdzaEFpQUJRZkFNYWlBREtBSUFMUUFBYWlBS09nQUFJQUpCZjJvaUFnUkFBMEFnQVVId0RHb2dBMEVFYWlJREtBSUFMUUFBYWlBTkxBQUFPZ0FBSUFKQmYyb2lBZzBBQ3dzZ0NTQVFLQUlBSUFrdkFRQnFPd0VBSUE4Z0FDOEJBRFlDQUNBTEpBUkJBUThMQTBBZ0EwRUVhaUVDSUFRZ0F5Z0NBQ0lIUVFGcUlnb3RBQUFpQldvaUF5QUlUQVJBSUFNaEJDQUNJUU1NQVFzTElBRkJoSlVCYWlBRE5nSUFJQVlnQkRZQ0FDQUpRUUpxSWdJc0FBQWlCa0gvQVhGQkIwZ0VRQ0FKUVFOcUlnUXNBQUJCZjJwQkdIUkJHSFVoQXlBRUlBTTZBQUFnQTBVRVFDQUpJQWt2QVFCQkFYUTdBUUFnQWlBR1FRRnFPZ0FBSUFSQkF5QUdRZjhCY1hRNkFBQUxDeUFCUWRRTWFpQUhOZ0lBSUFvZ0JVRUVham9BQUNBQVFRUnFJZ0lnQWk4QkFFRUVhanNCQUNBS0xRQUFRZndBU2dSQUlBQWdBUkRlQVFzZ0RTQU5MQUFBUVFGcU9nQUFJQUZCNkF4cUlBRkI3QXhxS0FJQU5nSUFJQXNrQkVFQkM2a0RBUXgvSUFGQjhoUnFJQUZCOEJKcUlBRkIxQXhxSWdRb0FnQXRBQUJxTEFBQUlnSTZBQUFnQVNBQVFRUnFJZ05CQVdvaUJpMEFBQ0lISWdoQkIzUnFRZlFUYWlBQlFmRVVhaUlGTFFBQUlBSkIvd0Z4YWlBQklBQW9BZ3d2QVFCcVFlOFFhaTBBQUdvZ0FVSHdFbW9nQXkwQUFDSUphaTBBQUVFQmRHb2dBVUhvREdvaUNpZ0NBQ0lMUVJwMlFTQnhha0VCZEdvaEFDQUJRZmlVQVdvb0FnQWdBVUgwbEFGcUtBSUFheUVNSUFGQi9KUUJhaUlOS0FJQVFRNTJJUUlnRFNBQ05nSUFJQXdnQW00Z0FDOEJBQ0lDU1FSQUlBUWdBellDQUNBR0lBZEJCM1pCQVhNZ0NHbzZBQUFnQVVHQWxRRnFRUUEyQWdBZ0FVR0VsUUZxSUFBdkFRQTJBZ0FnQUNBQUx3RUFJZ0JCZ0FGcUlBQkJJR3BCQjNack93RUFJQVZCQVRvQUFDQUtJQXRCQVdvMkFnQUZJQUZCZ0pVQmFpQUNOZ0lBSUFBZ0FDOEJBQ0lESUFOQklHcEJCM1pyT3dFQUlBRkJoSlVCYWtHQWdBRTJBZ0FnQVVIY0RHb2dBQzhCQUVFS2RrSEJNR290QUFBMkFnQWdBVUhZREdwQkFUWUNBQ0FCUWZBTWFpQUphaUFCUWZBVWFpd0FBRG9BQUNBRlFRQTZBQUFnQkVFQU5nSUFDd3ZqQkFJTmZ3RitJQUZCaUpVQmFpSU1JQUJCQkdvaUJ5OEJBQ0lDTmdJQUlBQW9BZ2doQXlBQlFmaVVBV29vQWdBZ0FVSDBsQUZxS0FJQWF5RUZJQUZCL0pRQmFpSUdLQUlBSUFKdUlRUWdCaUFFTmdJQUlBVWdCRzRpQ2lBQ1RnUkFRUUFQQ3lBQlFZQ1ZBV29oQ0NBS0lBTkJBV29pQlMwQUFDSUVTQVJBSUFGQmhKVUJhaUFFTmdJQUlBRkI4UlJxSUFSQkFYUWdBa3NpQWpvQUFDQUJRZWdNYWlJR0lBWW9BZ0FnQW1vMkFnQWdBVUhVREdvZ0F6WUNBQ0FGSUFSQkJHb2lBem9BQUNBSElBY3ZBUUJCQkdvN0FRQWdBMEg4QUVzRVFDQUFJQUVRM2dFTElBaEJBRFlDQUVFQkR3c2dBVUhVREdvaUNTZ0NBQ0lOUlFSQVFRQVBDeUFCUWZFVWFrRUFPZ0FBSUFBdkFRQkJmMm9oQmdKQUFrQURRQUpBSUFOQkNHb2hBaUFFSUFOQkNXb2lDeTBBQUNJT2FpSUZJQXBLRFFBZ0JrRi9haUlHUlEwQ0lBVWhCQ0FDSVFNTUFRc0xEQUVMSUFGQjhoUnFJQUZCOEJKcUlBMHRBQUJxTEFBQU9nQUFJQWdnQlRZQ0FDQUJRZkFNYWlBQ0xRQUFhaUFCUWZBVWFpSURMQUFBT2dBQUlBRkIyQXhxSUFBdkFRQWlBRFlDQUNBSlFRQTJBZ0FnQUVGL2FpRUFBMEFnQVVId0RHb2dBa0Y0YWlJQ0xRQUFhaUFETEFBQU9nQUFJQUJCZjJvaUFBMEFDeUFCUVlTVkFXb2dEQ2dDQURZQ0FFRUJEd3NnQVVHRWxRRnFJQVUyQWdBZ0NDQUVOZ0lBSUFrZ0FqWUNBQ0FMSUE1QkJHbzZBQUFnQnlBSEx3RUFRUVJxT3dFQUlBc3RBQUFnQXkwQUFVd0VRRUVCRHdzZ0Fpa0NBQ0VQSUFJZ0F5a0NBRGNDQUNBRElBODNBZ0FnQ1NBRE5nSUFJQTlDQ0lpblFmOEJjVUg4QUV3RVFFRUJEd3NnQUNBQkVONEJRUUVMTXdBZ0FFSUFOd0lBSUFCQ0FEY0NDQ0FBUVFBMkFoQWdBRUVBTmdJRUlBQkJBRFlDQ0NBQVFRQTJBaFFnQUVFQU5nSllDK2dMQVF0L0lBRkJCR29pQ0NnQ0FDSURRZUwvQVVvRVFDQUJRZWdBYWlJTEtBSUFJQU5ySWdsQkFFNEVRQ0FCUWZBQWFpSUdJQUZCK0FCcUlnY29BZ0FnQTJzZ0JpZ0NBR28yQWdBQ1FBSkFJQWtFUUNBQlFSQnFJZ1FvQWdBaUJTQUZJQU5xSUFrUVhSb2dDRUVBTmdJQUlBc2dDVFlDQUNBSlFZQ0FBa2NOQVVHQWdBSWhBd1VnQ0VFQU5nSUFJQXRCQURZQ0FDQUJRUkJxSVFRTUFRc01BUXNnQVNnQ0FDQUVLQUlBSUFscVFZQ0FBaUFKYXhCZUlRVWdDeWdDQUNJRElBVnFJUVFnQlVFQVNnUkFJQXNnQkRZQ0FDQUVJUU1MQ3lBQlFld0FhaUlGSUFOQlltb2lDellDQUNBSElBZ29BZ0FpQXpZQ0FDQURRWDlxSUFZb0FnQWlCR29oQnlBRVFYOUhCRUFnQlNBTElBZElCSDhnQ3dVZ0J3czJBZ0FMQ3dzZ0FVRVFhaUlNS0FJQUlRUWdDQ0FEUVFGcUlnVTJBZ0FnQkNBRGFpMEFBQ0lOUVNCeFFRQkhJZ3NFUUNBRFFlSC9BVW9FUUNBQlFlZ0FhaUlHS0FJQUlBVnJJZ3BCQUVnRVFDQUZJUU1GSUFGQjhBQnFJZ2tnQVVINEFHb2lCeWdDQUNBRFFYOXphaUFKS0FJQWFqWUNBQUpBQWtBZ0NnUkFJQVFnQkNBRmFpQUtFRjBhSUFoQkFEWUNBQ0FHSUFvMkFnQWdDa0dBZ0FKR0JFQkJnSUFDSVFNRklBd29BZ0FoQkF3Q0N3VWdDRUVBTmdJQUlBWkJBRFlDQUF3QkN3d0JDeUFCS0FJQUlBUWdDbXBCZ0lBQ0lBcHJFRjRoQlNBR0tBSUFJZ01nQldvaEJDQUZRUUJLQkVBZ0JpQUVOZ0lBSUFRaEF3c0xJQUZCN0FCcUlnVWdBMEZpYWlJR05nSUFJQWNnQ0NnQ0FDSUROZ0lBSUFOQmYyb2dDU2dDQUNJRWFpRUhJQVJCZjBjRVFDQUZJQVlnQjBnRWZ5QUdCU0FIQ3pZQ0FBc0xCU0FGSVFNTElBd29BZ0FoQkNBSUlBTkJBV29pQlRZQ0FDQUVJQU5xTFFBQVFSUjBRWUNBUUdzaENpQUZJUU1GSUFCQmtKVUJhaWdDQUFSQUlBVWhBd1ZCQUE4TEN5QU5RY0FBY1FSQUlBTkI0djhCU2dSQUlBRkI2QUJxSWdZb0FnQWdBMnNpQlVFQVRnUkFJQUZCOEFCcUlna2dBVUg0QUdvaUJ5Z0NBQ0FEYXlBSktBSUFhallDQUFKQUFrQWdCUVJBSUFRZ0JDQURhaUFGRUYwYUlBaEJBRFlDQUNBR0lBVTJBZ0FnQlVHQWdBSkdCRUJCZ0lBQ0lRTUZJQXdvQWdBaEJBd0NDd1VnQ0VFQU5nSUFJQVpCQURZQ0FBd0JDd3dCQ3lBQktBSUFJQVFnQldwQmdJQUNJQVZyRUY0aEJTQUdLQUlBSWdNZ0JXb2hCQ0FGUVFCS0JFQWdCaUFFTmdJQUlBUWhBd3NMSUFGQjdBQnFJZ1VnQTBGaWFpSUdOZ0lBSUFjZ0NDZ0NBQ0lETmdJQUlBTkJmMm9nQ1NnQ0FDSUVhaUVISUFSQmYwY0VRQ0FGSUFZZ0IwZ0VmeUFHQlNBSEN6WUNBQXNMQ3lBTUtBSUFJUVFnQ0NBRFFRRnFOZ0lBSUFJZ0JDQURhaTBBQURZQ0FBc2dBRUgwbEFGcUlBRVFqd1FnQ3dSQUlBMUJIM0VpQTBFQmFpRUJJQU5CQTJ4Qlkyb2hBaUFBUVpDVkFXb2lCU2dDQUNFRUlBTkJEMHNFZnlBQ0JTQUJJZ0lMUVFGR0JFQWdCRVVFUUVFQUR3c2dCVUVBTmdJQUlBQkJ2SllCYWlnQ0FCQlNRUUFQQ3lBRUlBcEhCRUFnQkFSQUlBVkJBRFlDQUNBQVFieVdBV29pQVNnQ0FCQlNCU0FBUWJ5V0FXb2hBUXNnQVNBS1FReHVRUVIwUVNCcUlnRVFiQ0lETmdJQUlBTUVRQ0FBUWVpWEFXb2dBeUFCYWtGd2FqWUNBQ0FGSUFvMkFnQUZRYXoxQWhCV0N3c2dBRUh3RkdwQkFUb0FBQ0FBUWVRTWFpQUNOZ0lBSUFBUTN3RWdBRUh3RUdwQkFEb0FBQ0FBUWZFUWFrRUNPZ0FBSUFCQjhoQnFJZ0ZDaElpUW9NQ0FnWUlFTndBQUlBRkJCRG9BQ0NBQVFmc1Fha0VHUWZVQkVGUWFJQUJCOEE1cVFRQTZBQUFnQUVIeERtcEJBVG9BQUNBQVFmSU9ha0VDT2dBQVFRTWhCRUVCSVFKQkFTRUZRUU1oQXdOQUlBQkI4QTVxSUFOcUlBUTZBQUFnQlVFQmFpRUJJQUpCZjJvaUFrVWlCd1JBSUFFaEFnc2dCQ0FIYWlFRUlBZEZCRUFnQlNFQkN5QURRUUZxSWdOQmdBSkhCRUFnQVNFRkRBRUxDeUFBUWZBU2FpSUJRZ0EzQWdBZ0FVSUFOd0lJSUFGQ0FEY0NFQ0FCUWdBM0FoZ2dBVUlBTndJZ0lBRkNBRGNDS0NBQlFnQTNBakFnQVVJQU53STRJQUJCc0JOcVFRaEJ3QUVRVkJvZ0FFSEVER3BCQnpvQUFBc2dBRUhJREdvb0FnQkJBRWNMMGdVQkRIOGpCQ0VKSXdSQkVHb2tCQ0FBS0FLd0FTSUJJQUFvQXJRQlJ3UkFJQUZCQURvQUFBc2dDU0lGSUFVMkFnZ2dCVUVFYWlJS0lBVTJBZ0FnQlNJQklnTWhBZ05BSUFCQnVBRnFJQVJCQW5ScUlnY29BZ0FpQmdSQUlBQkJCR29nQkdvaENDQUdJUUVEUUNBSElBRW9BZ0FpQXpZQ0FDQUJJQVUyQWdnZ0FTQUNOZ0lFSUFJZ0FUWUNDQ0FLSUFFMkFnQWdBVUYvT3dFQUlBRWdDQzBBQURzQkFpQURCRUFnQVNFQ0lBTWhBUXdCQlNBQklnSWhBd3NMQ3lBRVFRRnFJZ1JCSmtjTkFBc2dBeUFGUndSQUlBTWhCQU5BQWtBZ0JDQUVRUUpxSWdjdUFRQWlBVUgvL3dOeElnSkJCSFJxSWdNdUFRQkJmMFlFUUFOQUlBSWdBeThCQWlJSWFrR0FnQVJQRFFJZ0F5Z0NDQ0lHSUFOQkJHb2lBaWdDQURZQ0JDQUNLQUlBSUFZMkFnZ2dCeUFCUWYvL0EzRWdDR29pQWtILy93TnhJZ0U3QVFBZ0JDQUNRZi8vQTNFaUFrRUVkR29pQXk0QkFFRi9SZzBBQ3dzTElBUW9BZ1FpQkNBRlJ3MEFDeUFLS0FJQUlRRUxJQUVnQlVZRVFDQUpKQVFQQ3lBQVFjd0NhaUVMQTBBZ0FTZ0NDQ0lESUFGQkJHb2lBaWdDQURZQ0JDQUNLQUlBSUFNMkFnZ2dBUzhCQWlJQ0lRUWdBa0gvL3dOeFFZQUJTZ1IvSUFSQmYzTWlBa0gvZlVzRWZ5QUNCVUgvZlF0QmdBRnFJQVJxSWdKQmdIOXhJUXdnQVVHQUVHb2dBa0VIZGtFTGRHb2hCeUFFSVFNZ0N5Z0NBQ0VDQTBBZ0FTQUNOZ0lBSUFzZ0FUWUNBQ0FEUVlCL2FpRUlJQUZCZ0JCcUlRWWdBU0VDSUFOQmdBSktCRUFnQ0NFRElBWWhBUXdCQ3dzZ0JFR0FmMm9nREdzaEJDQUhCU0FCQ3lFQ0lBUWdBRUVFYWlBQVFTcHFJQVJCZjJvaUJtb3RBQUFpQVdvdEFBQkhCRUFnQWlBQVFRUnFJQUZCZjJvaUFXb3RBQUFpQTBFRWRHb2lCQ0FBUWJnQmFpQUdJQU5yUVFKMGFpSURLQUlBTmdJQUlBTWdCRFlDQUFzZ0FpQUFRYmdCYWlBQlFRSjBhaUlCS0FJQU5nSUFJQUVnQWpZQ0FDQUtLQUlBSWdFZ0JVY05BQXNnQ1NRRUM5MENBUVIvSUFCQnVBRnFRUUJCbUFFUVZCb2dBQ0FBS0FLc0FTSUNOZ0xRQWlBQUtBSUFJZ05CQ0cxQkRHNUIxQUJzSWdGQkRHNUJCSFFoQkNBQUlBSWdBeUFCYXlJQlFReHVRUVIwUVJCcWFpSUROZ0xVQWlBQUlBTTJBckFCSUFBZ0FpQUJhallDM0FJZ0FDQURJQVJxTmdLMEFTQUFRUUU2QUFRZ0FFRUNPZ0FGSUFCQkF6b0FCaUFBUVFRNkFBY2dBRUVHT2dBSUlBQkJDRG9BQ1NBQVFRbzZBQW9nQUVFTU9nQUxRUThoQTBFSUlRUURRQ0FBUVFScUlBUnFJQU02QUFBZ0JFRUJhaUVCSUFOQkEyb2hBaUFFUVF0SUJFQWdBaUVESUFFaEJBd0JDd3NnQTBFRWFpRUNJQUZCSmtnRVFBTkFJQUJCQkdvZ0FXb2dBam9BQUNBQlFRRnFJUVFnQWtFRWFpRUNJQUZCSlVnRVFDQUVJUUVNQVFzTEN5QUFRUUE2QUtvQlFRQWhBa0VBSVFFRFFDQUFRU3BxSUFKcUlBRWdBaUFBUVFScUlBRnFMUUFBVG1vaUFUb0FBQ0FDUVFGcUlnSkJnQUZIRFFBTEMra0tBUXAvQWtBZ0FFRVlhaUlLSUFFMkFnQWdBRUVFYWlJTFFRQTJBZ0FnQUVFQU5nSUFJQUJCZnpZQ0NDQUJRUVJxSWdVb0FnQWlBRUhpL3dGS0JFQWdBVUhvQUdvaUJDZ0NBQ0FBYXlJQ1FRQk9CRUFnQVVId0FHb2lDU0FCUWZnQWFpSUlLQUlBSUFCcklBa29BZ0JxTmdJQUFrQUNRQ0FDQkVBZ0FVRVFhaUlES0FJQUlnWWdCaUFBYWlBQ0VGMGFJQVZCQURZQ0FDQUVJQUkyQWdBZ0FrR0FnQUpIRFFGQmdJQUNJUUFGSUFWQkFEWUNBQ0FFUVFBMkFnQWdBVUVRYWlFRERBRUxEQUVMSUFFb0FnQWdBeWdDQUNBQ2FrR0FnQUlnQW1zUVhpRUdJQVFvQWdBaUFDQUdhaUVESUFaQkFFb0VRQ0FFSUFNMkFnQWdBeUVBQ3dzZ0FVSHNBR29pQmlBQVFXSnFJZ1EyQWdBZ0NDQUZLQUlBSWdBMkFnQWdBRUYvYWlBSktBSUFJZ05xSVFnZ0EwRi9Sd1JBSUFZZ0JDQUlTQVIvSUFRRklBZ0xOZ0lBQ3dzTElBRW9BaEFoQVNBRklBQkJBV28yQWdBZ0N5QUJJQUJxTFFBQUlnZzJBZ0FnQ2lnQ0FDSUhRUVJxSWdVb0FnQWlBRUhpL3dGS0JFQWdCMEhvQUdvaUJDZ0NBQ0FBYXlJQ1FRQk9CRUFnQjBId0FHb2lDU0FIUWZnQWFpSUdLQUlBSUFCcklBa29BZ0JxTmdJQUFrQUNRQ0FDQkVBZ0IwRVFhaUlCS0FJQUlnTWdBeUFBYWlBQ0VGMGFJQVZCQURZQ0FDQUVJQUkyQWdBZ0FrR0FnQUpIRFFGQmdJQUNJUUFGSUFWQkFEWUNBQ0FFUVFBMkFnQWdCMEVRYWlFQkRBRUxEQUVMSUFjb0FnQWdBU2dDQUNBQ2FrR0FnQUlnQW1zUVhpRURJQVFvQWdBaUFDQURhaUVCSUFOQkFFb0VRQ0FFSUFFMkFnQWdBU0VBQ3dzZ0IwSHNBR29pQXlBQVFXSnFJZ1EyQWdBZ0JpQUZLQUlBSWdBMkFnQWdBRUYvYWlBSktBSUFJZ0ZxSVFZZ0FVRi9Sd1JBSUFNZ0JDQUdTQVIvSUFRRklBWUxOZ0lBQ3dzTElBY29BaEFoQVNBRklBQkJBV28yQWdBZ0N5QUlRUWgwSUFFZ0FHb3RBQUJ5SWdnMkFnQWdDaWdDQUNJSFFRUnFJZ1VvQWdBaUFFSGkvd0ZLQkVBZ0IwSG9BR29pQkNnQ0FDQUFheUlDUVFCT0JFQWdCMEh3QUdvaUNTQUhRZmdBYWlJR0tBSUFJQUJySUFrb0FnQnFOZ0lBQWtBQ1FDQUNCRUFnQjBFUWFpSUJLQUlBSWdNZ0F5QUFhaUFDRUYwYUlBVkJBRFlDQUNBRUlBSTJBZ0FnQWtHQWdBSkhEUUZCZ0lBQ0lRQUZJQVZCQURZQ0FDQUVRUUEyQWdBZ0IwRVFhaUVCREFFTERBRUxJQWNvQWdBZ0FTZ0NBQ0FDYWtHQWdBSWdBbXNRWGlFRElBUW9BZ0FpQUNBRGFpRUJJQU5CQUVvRVFDQUVJQUUyQWdBZ0FTRUFDd3NnQjBIc0FHb2lBeUFBUVdKcUlnUTJBZ0FnQmlBRktBSUFJZ0EyQWdBZ0FFRi9haUFKS0FJQUlnRnFJUVlnQVVGL1J3UkFJQU1nQkNBR1NBUi9JQVFGSUFZTE5nSUFDd3NMSUFjb0FoQWhBU0FGSUFCQkFXbzJBZ0FnQ3lBSVFRaDBJQUVnQUdvdEFBQnlJZ0EyQWdBZ0FFRUlkQ0VKSUFvb0FnQWlBa0VFYWlJRktBSUFJZ0JCNHY4QlRBMEFJQUpCNkFCcUlnZ29BZ0FnQUdzaUNrRUFTQTBBSUFKQjhBQnFJZ1FnQWtINEFHb2lCaWdDQUNBQWF5QUVLQUlBYWpZQ0FBSkFBa0FnQ2dSQUlBSkJFR29pQVNnQ0FDSURJQU1nQUdvZ0NoQmRHaUFGUVFBMkFnQWdDQ0FLTmdJQUlBcEJnSUFDUncwQlFZQ0FBaUVBQlNBRlFRQTJBZ0FnQ0VFQU5nSUFJQUpCRUdvaEFRd0JDd3dCQ3lBQ0tBSUFJQUVvQWdBZ0NtcEJnSUFDSUFwckVGNGhBeUFJS0FJQUlnQWdBMm9oQVNBRFFRQktCRUFnQ0NBQk5nSUFJQUVoQUFzTElBSkI3QUJxSWdNZ0FFRmlhaUlJTmdJQUlBWWdCU2dDQUNJQU5nSUFJQVFvQWdBaUFVRi9SZzBBSUFNZ0NDQUFRWDlxSUFGcUlnRklCSDhnQ0FVZ0FRczJBZ0FnQWlnQ0VDRUJJQVVnQUVFQmFqWUNBQ0FMSUFrZ0FTQUFhaTBBQUhJMkFnQVBDeUFDS0FJUUlRRWdCU0FBUVFGcU5nSUFJQXNnQ1NBQklBQnFMUUFBY2pZQ0FBdS9BUUVCZnlBQVFlZ3hhaXdBQUVVRVFFRUFEd3NDUUFKQUFrQUNRQ0FDRGdJQUFRSUxJQUJCc0RKcUlnSXBBd0FnQVZZRVFDQUFRYWd5YWlrREFDQUJWZ1JBSUFBZ0FFSHdNV29wQXdBUXNBSUxDeUFDSUFFM0F3QU1BZ3NnQUVHd01tb2lBaUFDS1FNQUlBRjhOd01BREFFTElBQkJ1REpxSWdOQkFUb0FBQ0FDUVFKSEJFQkJBUThMSUFBb0FnQWdBVUVDRUp3QklBQkJzREpxSUFBb0FnQVEwd0UzQXdBZ0EwRUFPZ0FBUVFFUEN5QUFRYmd5YWtFQk9nQUFRUUVMYXdBZ0FDQUJFTkVCTndOb0lBQkJBRFlDMEFFZ0FFRUFOZ0xVQVNBQVFRRTZBTmdCSUFCQjNNRUFhaUFBS0FJSVFhakVBbW9zQUFBNkFBQWdBRUVBT2dCaElBQkIzY0VBYWtFQU9nQUFJQUJCQVRvQTJRRWdBRUVBT2dEYUFTQUFRUUE2QU5zQklBQVF3d1FMdmdFQ0JIOEJma0VBUVlDQUVCQlhJZ1JGSWdVRVFFR3M5UUlRVmdzQ1FBSkFBa0FEUUVFQUpBVkJHeUFBSUFSQmdJQVFFQWNoQWlNRklRTkJBQ1FGSUFOQkFYRU5BU0FDUVFGcVFRSkpEUUlnQWFjaEEwRUFKQVZCRGlBQUlBUWdBU0FDclZVRWZ5QUNCU0FESWdJTEVBNGpCU0VEUVFBa0JTQURRUUZ4RFFFZ0FxMGhCaUFCSUFGQ2YxVUVmaUFHQlVJQUMzMGhBUXdBQ3dBTEVCY2hBQ0FGQkVBZ0FCQWVDeUFFRUZJZ0FCQWVEQUVMSUFVRVFBOExJQVFRVWdzTHlnTUJCSDhDUUNNRUlRWWpCRUhBd1FCcUpBUWdCa0hvd0FCcUlRZ2dCa0djd0FCcUlRY2dCQ0FFSUFVUStBRWdCaERTQVVFQUpBVkJFQ0FHSUFRUUJpRUpJd1VoQlVFQUpBVUNRQ0FGUVFGeFJRUkFJQWxGQkVBZ0IwRUFOZ0pFSUFkQkVUWUNTQ0FISUFJMkFnQWdCeUFFTmdJRUlBZEJRR3RCQXpZQ0FDQUhJQU0yQWdoQkFDUUZJd1VoQVVFQUpBVWdBVUVCY1EwQ0lBaEJBRFlDUkNBSVFSSTJBa2dnQ0VGQWEwRUJOZ0lBSUFnZ0FqWUNBRUVBSkFVakJTRUJRUUFrQlNBQlFRRnhEUUlnQUNnQ0NFR295d1JxUVJjMkFnQWdCaEJ3SUFZa0JFRUFEd3RCQUVHQWdNQUFFRmNpQkVVaUF3UkFRUUFrQlVFVVFhejFBaEFNSXdVaEFFRUFKQVVnQUVFQmNRUkFFQmNoQUNBR0VIQWdBQkFlQ3dzQ1FBSkFBMEJCQUNRRlFRSVFDeU1GSVFCQkFDUUZJQUJCQVhFTkFrRUFKQVZCQkNBR0lBUkJnSURBQUJBSElRSWpCU0VBUVFBa0JTQUFRUUZ4RFFJZ0FrVU5BVUVBSkFWQkdpQUJJQVFnQWhBSEdpTUZJUUJCQUNRRklBQkJBWEZGRFFBTUFnc0FDeUFERFFNZ0JCQlNEQU1MRUJjaEFDQURCRUFnQmhCd0lBQVFIZ3NnQkJCU0lBWVFjQ0FBRUI0TEN4QVhJUUFnQmhCd0lBQVFIa0VBRHdzZ0JoQndJQVlrQkVFQkM0OERBUVovSXdRaEJDTUVRZERBQUdva0JDQUVRWUJBYXlFRElBUkJ6TUFBYWlFR0FrQUNRQUpBSUFCQkNHb2lCeWdDQUNJRlFjakxCR29vQWdCQnhRQnJEaFFCQWdJQ0FnSUNBZ0lDQWdBQ0FnSUNBZ0lDQVFJTElBSkJBVFlDRENBRUpBUkJBUThMSUFWQnlZa0RhaXdBQUFSQUlBUWtCRUVCRHdzZ0JTQUNJQUJCNE1FQWFpSUFRWUFRSUFZZ0FVR0E2QUZxSWdVcEF3QWdBVUhnNXdGcUlnaEJBUkM3QVFSL1FRRUZJQVlzQUFBRWYwRUFCVUdzOVFJZ0FVRVlhaUlCSUFBUXN3SWdCeWdDQUVHb3l3UnFRUkEyQWdBQ2YwRUFJQUFvQWdCRkRRQWFJQUJCeEEwUXh3RkZDd1IvUVFBRklBTkJBRFlDUkNBRFFlb0FOZ0pJSUFOQlFHdEJBVFlDQUNBRElBRTJBZ0FnQkNBQVFZQVFFRzhhSUFCQkFSQ1NBeUFIS0FJQUlBSWdBRUdBRUNBR0lBVXBBd0FnQ0VFQkVMc0JCSDhnQTBFQU5nSkVJQU5CSVRZQ1NDQURJQUUyQWdBZ0F5QUVOZ0lFSUFOQlFHdEJBellDQUNBRElBQTJBZ2hCQVFWQnJQVUNJQUVnQUJDekFrRUFDd3NMQ3lFQUlBUWtCQ0FBRHdzZ0JDUUVRUUVMcmdFQkIzOGpCQ0VESXdSQjhNQUFhaVFFSUFOQkNHb2hCQ0FBUVFocUlnWW9BZ0FpQlVISmlRTnFMQUFBQkVBZ0F5QUNOZ0lBSUFSQnZMVUROZ0lBSUFNa0JBOExJQU5CR0dvaENDQURRUkJxSVFrZ0EwR2d3QUJxSVFJZ0EwRWdhaUVIQWtBQ1FBSkFJQUJCNE1FQWFpRUVJQVZCcElrRGFpd0FBQm9nQVVITXB3RnFJZ1VvQWdBYURBQUxJQWtnQkRZQ0FDQUlRYnkxQXpZQ0FBc2dBRUhkd1FCcVFRRTZBQUFMSUFNa0JBdWZBZ0VFZnlNRUlRRWpCRUdBQldva0JDQUJRWUFFYWlFQ0lBQkJDR29pQXlnQ0FDSUVRYWpFQW1vc0FBQkZCRUFnQkVHd3l3UnFLQUlBSWdCRkJFQWdBU1FFUVFBUEN5QUJRUUEyQWdBQ1FBSkFRUVFnQkVHc3l3UnFLQUlBSUFGQmdBRWdBRUVQY1VIcUFHb1JBd0JCZjBZRVFDQUJRUUEyQWdBTUFRVWdBU2dDQUVVTkFRc01BUXNnQWtFQU9nQUFRUUlnQXlnQ0FDSUFRYXpMQkdvb0FnQWdBa0dBQVNBQVFiRExCR29vQWdCQkQzRkI2Z0JxRVFNQVFYOUdCRUFnQWtFQU9nQUFDeUFDUVFBZ0FVR0FBUkREQVJvZ0FrR0FBUkJiQ3lBREtBSUFRYWpBQW1vZ0FSQ3VBaUFCUVlBRUVGc2dBeWdDQUNJQVFhM0VBbXBCQVRvQUFDQUFRYWpFQW1vc0FBQkZCRUFnQVNRRVFRQVBDd3NnQVNRRVFRRUw4aWdDSm44QmZnSkFJd1FoQXlNRVFkQ0hBbW9rQkNBQlFmam5BV29pQ1NrREFFSUFVd1JBSUFsQ0FEY0RBQXNnQVVHQTZBRnFJaEVwQXdCQ0FGTUVRQ0FSUWdBM0F3QUxJQUJCQ0dvaUJ5Z0NBRUhJeXdScUtBSUFJUTBnQWtVRVFDQUFMQUJoUlFSQUlBTWtCRUVBRHdzZ0FTQUFRUkJxUVFBZ0RSQzFBVVVFUUVHczlRSkJBUkJrSUFNa0JFRUFEd3NMSUFOQjJNQUFhaUVlSUFOQnlNQUFhaUVRSUFOQndNQUFhaUVaSUFOQnVNQUFhaUVhSUFOQnNNQUFhaUVrSUFNaUJrSG9oZ0pxSVFzZ0JrSE14Z0ZxSVFvZ0JrR0F4Z0ZxSVJNZ0JrRzB4UUZxSVJRZ0JrSG94QUZxSVJVZ0JrSEFod0pxSVFNZ0JrSG9oQUZxSVFJZ0JrSG94QUJxSVF3Z0JrSGt3QUJxSVJZZ0JrRzRod0pxSVE0Z0FVR3dwd0ZxSVFVQ1FBSkFBa0FDUUFKQUlBRkJ6UE1BYWlnQ0FFRUNhdzUyQUFJRUF3UUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQVFRTElBQkIzY0VBYWlJYlFRQTZBQUFnQnlnQ0FDSUVRZVNFQTJvb0FnQkZCRUFnQUNnQzFBRWdCRUdjekFWcUtBSUFUd1JBSUFBc0FOa0JEUVlMQ3lBRFFRQTZBQUFnQkNBRklBTkJCU0FDUVlBUUVQQURJUVFnQnlnQ0FDSUZRZUNFQTJvb0FnQkJBa1lFUUNBRlFhaUFBbW9nQWtHQUVCQnZHaUFIS0FJQVFhaUFBbW9RbXdGQkFEWUNBQ0FIS0FJQVFhaUFBbW9ReWdFRVFDQUhLQUlBUWFpQUFtcEJBRFlDQUFzTElBUkJBRWNpQWlBRExBQUFSWEVFUUNBQVFRQTZBTmtCQ3lBQkVPNEJJQUZCMEtjQmFpQU1FSzhCR2lBQlFaUHBBV29zQUFBRVFDQUhLQUlBUVl6TEEyb29BZ0FpQkVFQlJ5QURMQUFBUlhFRVFDQU1RUUFROWdFaEF5QUhLQUlBUVl6TEEyb29BZ0JCZjJvZ0EwWUVmeUFNUVFFUTlnRWFJQUlnQkVFQVIzRUZRUUFMSVFJTEJTQUJRWkhwQVdvc0FBQkZCRUFnQWlBSEtBSUFRWXpMQTJvb0FnQkJBa2x4SVFJTEN5QUFRUkJxSVJJZ0FDQUJRYm5vQVdvaUpTd0FBRG9BWVNBQVFlSUFhaUltUVFBNkFBQWdBU0FCUVpDOEEyb3BBd0FnQ1NrREFIMUJBQ0FCS0FJQUtBSVFRUU54UWJnQ2FoRUNBQUpBQWtBQ1FDQUFRZGdCYWlJRExBQUFCRUFnQWdSQUlBRkJ1T2dCYWl3QUFBUkFJQVpCQURZQ1JDQUdRY1VBTmdKSUlBWWdBVUVZYWpZQ0FDQUdRVUJyUVFJMkFnQWdCaUFNTmdJRUlBY29BZ0JCcU1zRWFrRU1OZ0lBUWF6MUFrRUdFR1FGSUFOQkFEb0FBRUVBSVFOQkFTRWZEQU1MQ3lBRFFRQTZBQUFGSUFOQkFEb0FBQ0FDQkVCQkFDRURRUUVoSHd3Q0N3c2dBVUdjdkFOcUxBQUFCRUJCQVNFREJVRUJJUUJCQUNFQ0RBSUxDd0ovSUFjb0FnQkJ5WWtEYWl3QUFCb2dEVUhKQUVjaEp5QURRUUJISVFKQkFRc0VRQ0FBSUFFZ0RDQUFRZURCQUdvaUJVR0FFQkNwQWlBQ0JIOUJBQVVnQlNnQ0FBUi9JQUZCdU9nQmFpd0FBRVVGUVFBTEN5SUVRUUZ4SVFJQ1FBSkFJQWNvQWdBaUNFSGJoQU5xTEFBQURRQWdDRUhjaEFOcUxBQUFEUUFNQVFzQ1FBSkFBa0FnRFVIRkFHc09GQUFCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVBQVFzTUFRc01BUXNnQmtHUXdBQnFJZ2hDQURjREFDQUlRZ0EzQXdnZ0NFSUFOd01RSUFRZ0J5Z0NBRUhiaEFOcUxBQUFSWEVoQWdzZ0FVRzc2QUZxSWlBc0FBQUVRQ0FBRUpZRUlRZ2dCeWdDQUNFRUlBaEZCRUFnQkVHb3l3UnFRUlkyQWdBTUJBc2dCRUdveEFKcUxBQUFSUVJBUWF6MUFrRUJFR1FnQnlnQ0FDSUVRYWpMQkdwQkZqWUNBRUVBSVFJTEJTQUhLQUlBSVFRTElBUkJwSXNFYWlJRUtBSUFCRUFnQlNBRVFZQVFFRzhhQ3lBQlFjbW5BV29pS0N3QUFDSUVRZjhCY1VFeVNpRUlJQVJCYzJwQkdIUkJHSFZCL3dGeFFSQktJUVFnQVVIS3B3RnFJaUVzQUFCQkFFY2dBVUdZdkFOcUlod29BZ0JCQTBZRWZ5QUlCU0FFQzNFRVFFR3M5UUlnQVVFWWFpSUFJQXdRdHdRZ0JrRUFOZ0pFSUFaQklqWUNTQ0FHUVVCclFRRTJBZ0FnQmlBQU5nSUFRYXoxQWtFQ0VHUWdCeWdDQUVHb3l3UnFRUTQyQWdBZ0FTQUJRWkM4QTJvcEF3QkJBQ0FCS0FJQUtBSVFRUU54UWJnQ2FoRUNBQ0FCUVp5OEEyb3NBQUJGSVE4TUF3c2dGaUFIS0FJQVFhakFBbXBCaEFRUVV4b2dBVUc4NkFGcUtBSUFJUWdnQVVIQjZBRnFJUVFnQVVIQTZBRnFMQUFBUlFSQVFRQWhCQXNnQVVHTTZRRnFLQUlBSVJkQkFDUUZRUUVnRWtFQUlBZ2dGaUFFSUFGQjBlZ0JhaUFYSUFGQjYrZ0JhaUlJSUE0UUVpTUZJUVJCQUNRRkFrQWdCRUVCY1VVRVFBSkFJQ0FzQUFBRVFDQUJRZUhvQVdvc0FBQkZEUUVnQVVIaTZBRnFJQTVCQ0JCclJRMEJJQUZCckx3RGFpd0FBQTBCSUFwQkFEWUNSQ0FLUVFZMkFrZ2dDa0ZBYTBFQk5nSUFJQW9nQVVFWWFqWUNBRUVBSkFVakJTRUNRUUFrQlNBQ1FRRnhEUU5CQUNRRlFRcEJyUFVDUVFzUURTTUZJUUpCQUNRRklBSkJBWEVOQXlBSEtBSUFRYWpMQkdvaUFpZ0NBRUVQUmdSQVFRQWhBZ3dDQ3lBQ1FSZzJBZ0JCQUNFQ0N3dEJBQ1FGUVNJZ0NoQU1Jd1VoQkVFQUpBVWdCRUVCY1FSQUVCY2hBQVVnQVVHZzZRRnFJaUlvQWdBaUJFRUFSeUVYQWtBQ1FBSkFBa0FnQkVFRlJpQVhRUUZ6Y2dSQVFRQWtCVUVSSUFFUUJTRU9Jd1VoQkVFQUpBVWdCRUVCY1EwQ0lBSkJBWEZCQUVjaEJDQU9SUVJBSUFSRkRRSkJBQ1FGUVJnZ0FDQUJJQW9RQnlFQ0l3VWhCRUVBSkFVZ0JFRUJjUTBESUFKQkFYRWhBZ3dDQ3lBRVJRUkFRUUVoQkF3RUN3SkFBa0FnRFVIRkFHc09EQUFCQVFFQUFRRUJBUUVCQUFFTFFRRWhCQXdFQ3lBSEtBSUFRZUNFQTJvb0FnQkJBVVlFUUVFQklRUU1CQXNnQUVITUFXb2lCQ0FFS0FJQVFRRnFOZ0lBUVFBa0JVRU1JQUFnQVNBTUVBNGpCU0VFUVFBa0JTQUVRUUZ4RFFKQkFTRUVEQU1GSUExQjBBQkhJQUpCQVhGQkFFZHhSUTBCSUFjb0FnQkJ5WWtEYWl3QUFBMEJJQVpCQURvQUFFRUFKQVZCRUNBRkVBVWhCQ01GSVE1QkFDUUZBa0FnRGtFQmNVVUVRQ0FFSUFZc0FBQWlCRVZ4QkVBZ0J5Z0NBQ0VFSUJFcEF3QWhLa0VBSkFWQkFTQUVRUUFnQlVHQUVDQUdJQ3FuSUNwQ0lJaW5JQUZCNE9jQmFrRUFFRXdhSXdVaEJFRUFKQVVnQkVFQmNRMENJQVlzQUFBaEJBc2dCRUgvQVhFRVFFRUFJUUlMREFNTEN4QVhJUUFMREFNTElBSkJBWEZGQkVBZ0FVR2N2QU5xTEFBQVJRUkFRUUFoQkVFQklROE1Bd3RCQUNRRlFRUWdERUVBUVFCQkFSQUlJUUlqQlNFRFFRQWtCU0FEUVFGeERRRWdBZ1JBUVFFaEEwRUJJUUlGUVFBaEJFRUJJUU5CQVNFQ0RBTUxDeUFIS0FJQVFjbUpBMm9zQUFBaUJBUkFJQnRCQVRvQUFBc2dBMEVCY1NJalFRQkhJUTRnQkNBamNpSXBRZjhCY1VFQVJ5RWRBa0FnRGtVRVFBSkFJQTFCMEFCSElCMUJBWE54QkVCQkFDUUZRUklnQ2hBRklRUWpCU0VZUVFBa0JTQVlRUUZ4RFFNZ0JFVU5BU0FMUVFBMkFrUWdDMEU2TmdKSUlBc2dBVUVZYWlJRU5nSUFJQXRCUUd0QkFqWUNBQ0FMSUFVMkFnUkJBQ1FGSXdVaEMwRUFKQVVnQzBFQmNRMERRUUFrQlVFTlFhejFBaUFFSUFVUURpTUZJUVJCQUNRRklBUkJBWEVOQXdzTElBQkJ6QUZxSWdRZ0JDZ0NBRUVCYWpZQ0FBc2dBRUhRQVdvaUdDQVlLQUlBUVFGcU5nSUFBa0FnSndSQUlBNEVRQ0FrSUF3MkFnQU1BZ3NDUUFKQUFrQUNRQ0FIS0FJQVFjbUpBMm9zQUFBRWYwSFVBQVVnRFF0QnhRQnJEaFFDQXdNREF3TURBd01EQXdFREF3TUFBd01EQWdNTElCb2dERFlDQUF3RUN5QVpJQXcyQWdBTUF3c2dFQ0FGTmdJQUN3c0xJQWNvQWdBaUJFSE1oQU5xTEFBQVJRUkFJQWNvQWdBaEJBc2dBRUdBQVdvaUMwSUFOd01BSUF0Q0FEY0RDQ0FCUVpEb0FXb2lDeWdDQUNFUUlBUkJvSXNFYWlnQ0FDRUVRUUFrQlVFRUlBQkJ1QUZxSWhrZ0VDQUVFQTRqQlNFRVFRQWtCU0FFUVFGeERRQWdDeWdDQUNFRUlBY29BZ0JCb0lzRWFpZ0NBQ0VRUVFBa0JVRUVJQUJCb0FGcUlBUWdFQkFPSXdVaEJFRUFKQVVnQkVFQmNRMEFJQUFnQ1NrREFEY0RNRUVBSkFWQkF5QVNJQUVnQ2hBT0l3VWhCRUVBSkFVZ0JFRUJjUTBBSUFBZ0tUb0FPU0FBSUNNNkFEb2dIUVIvSUFvZ0J5Z0NBQ0lFUVp5RkEyb3NBQUJCQVhNNkFCTkJBQVVDUUNBQlFheThBMm9zQUFCRkJFQWdDU2tEQUVJTGhpQVJLUU1BSWlwWERRRWdLa0tBd3RjdldRUkFRUUFrQlVFRklBRVFUcTBqQjYxQ0lJYUVJU29qQlNFRVFRQWtCU0FFUVFGeERRUWdLaUFKS1FNQVZ3MENDMEVBSkFVakJTRUVRUUFrQlNBRVFRRnhEUU1MQ3lBS0lBY29BZ0FpQkVHY2hRTnFMQUFBUVFGek9nQVRJQTFCMEFCSElBNUJBWE54Q3lFSkFrQUNRQ0FYQkVBZ0lpZ0NBQ0lRUVFSR0lSb0NRQUpBQWtBZ0VFRUJja0VGUmdSQVFRQWtCVUVFSUFBZ0FTQUJRYVRwQVdvZ0JrR0FFQkFRSXdVaEJFRUFKQVVDUUNBRVFRRnhSUVJBSUFZb0FnQkZJQWxCQVhOeURRTWdHZ1IvUVFBa0JVRVpJQVVnQmtHQUVCQUhCVUVBSkFWQkFpQUFJQW9nQVVFWWFpQUZJQVpCZ0JBUUNRc2hCQ01GSVFWQkFDUUZJQVZCQVhFTkFTQUVEUU5CQUNFRURBUUxDd1VDUUNBUVFYOXFRUU5KQkVBZ0NVVU5BMEVBSkFWQkJTQUVJQklnQVNBRkVBZ2hCQ01GSVFWQkFDUUZJQVZCQVhFTkFTQUVCRUJCQVNFRlFRRWhCQXdHQlVFQUlRUU1CUXNBQlNBR1FRQTJBa1FnQmtIR0FEWUNTQ0FHSUFGQkdHbzJBZ0FnQmtGQWEwRUNOZ0lBSUFZZ0JUWUNCRUVBSkFVakJTRUVRUUFrQlNBRVFRRnhEUUZCQUNFRURBUUxBQXNMRUJjaEFBd0pDeUFKSUJ3b0FnQkJBa2R5QkVCQkFTRUZRUUVoQkFWQkFTRUVEQUVMREFFTFFRQWhCUXNnR3lBSklBUnhRUUZ4T2dBQURBRUZJQUZCdU9nQmFpd0FBQVJBUVFFaEJVRUJJUVFNQWdzZ0lTd0FBRVVFUUNBUktRTUFJU3BCQUNRRlFRSWdFaUFxcHlBcVFpQ0lweEJQSXdVaEJFRUFKQVVnQkVFQmNRMERRUUVoQlVFQklRUU1BZ3NnQUVISUFXb2lCQ2dDQUNFRklBRkJsT2tCYWlnQ0FDRUpJQUZCa09rQmFpSVNMQUFBUVFCSElSQkJBQ1FGUVFVZ0JTQUpJQkFRRGlNRklRVkJBQ1FGSUFWQkFYRU5BaUFFS0FJQUlnUkJzSmdCYWlBUktRTUFOd01BSUFSQnlKZ0Jha0VBT2dBQUlCd29BZ0JCQTBjZ0tDMEFBQ0lGUVJCSWNVVUVRQ0FTTEFBQVFRQkhJUWxCQUNRRlFRWWdCQ0FGUWY4QmNTQUpFQTRqQlNFRVFRQWtCU0FFUVFGeERRTkJBU0VGUVFFaEJBd0NDeUFZS0FJQVFRRkxCSDhnQVVHY3ZBTnFMQUFBUVFCSEJVRUFDeUVGUVFBa0JVRUdJQVJCRHlBRkVBNGpCU0VFUVFBa0JTQUVRUUZ4UlFSQVFRRWhCVUVCSVFRTUFnc0xEQUVMUVFBa0JVRVZJQUVRRENNRklRbEJBQ1FGSUFsQkFYRU5BQUpBQWtBZ0pTd0FBQVJBUVFBaENBd0JCU0FCUWVyb0FXb3NBQUJGQkVCQkFDRUlDMEVBSkFWQkZ5QVpJQXNnQ0JBSElRZ2pCU0VKUVFBa0JTQUpRUUZ4UlEwQkN3d0JDd0pBSUFGQmtPa0JhaXdBQUFSQUlDRXNBQUJGRFFFZ0VTa0RBRUlCVXlBSVFRRnpjZzBCSUFCQkFUb0Eyd0VGSUFCQkFEb0Eyd0VMQ3dKL0lBNGdCVUVCYzNJRWYwRUFCU0FJQkVBQ1FBSkFJQTFCeVFCckRnZ0FBUUVCQVFFQkFBRUxRUUFNQXdzZ0J5Z0NBRUhNaEFOcUxBQUFCSDlCM0JFRlFlUVJDeUVGSUFzb0FnQUVmMEc4dFFNRlFZQVNDeUVJSUI0Z0JUWUNBQ0FlSUFnMkFnUkJBQXdDQ3dKQUFrQWdJQ3dBQUVVTkFDQUJRZUhvQVdvc0FBQUVRQ0FCUWF5OEEyb3NBQUJGRFFFTElBQXNBTnNCRFFBZ0UwRUFOZ0pFSUJOQkJEWUNTQ0FUSUFGQkdHbzJBZ0FnRTBGQWEwRUNOZ0lBSUJNZ0REWUNCQXdCQ3lBVVFRQTJBa1FnRkVFRE5nSklJQlFnQVVFWWFqWUNBQ0FVUVVCclFRSTJBZ0FnRkNBTU5nSUVDMEVBSkFVakJTRUZRUUFrQlNBRlFRRnhEUUpCQUNRRlFRcEJyUFVDUVFNUURTTUZJUVZCQUNRRklBVkJBWEVOQWdKQUFrQWdCeWdDQUVHb3l3UnFJZ1VvQWdCQkQyc09DZ0FCQVFFQkFRRUJBUUFCQzBFQkRBSUxJQVZCRERZQ0FFRUJDd3NoQlNBZEJFQkJBQ0VFUVFFaER3d0ZDd0pBQWtBQ1FDQU5RY1VBYXc0VUFBRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRQUJDd3dCQzBFQUlRUkJBU0VQREFVTElCY0VRQ0FpS0FJQVFRVkhJQVJCQVhOeUJFQkJBQ0VFUVFFaER3d0dDd3NnQlFSQUlBY29BZ0JCbklVRGFpd0FBRVVFUUVFQUlRUkJBU0VQREFZTFFRQWtCU01GSVFSQkFDUUZJQVJCQVhFTkFRdEJBQ1FGSXdVaEJFRUFKQVVnQkVFQmNRMEFRUUFrQlVFVElBb1FCUm9qQlNFRVFRQWtCU0FFUVFGeERRQUNRQ0FIS0FJQVFaQ0ZBMm9zQUFBRVFDQWNLQUlBUVFOSERRRWdBVUdscVFKcUxBQUFSUTBCUVFBa0JVRVBJQUVnQ2tFWWFoQU5Jd1VoQkVFQUpBVWdCRUVCY1EwQ0N3dEJBQ1FGSXdVaEJFRUFKQVVnQkVFQmNRMEFBa0FnQnlnQ0FFR2tpUU5xTEFBQVJRUkFJQUZCektjQmFpZ0NBQ0VFUVFBa0JVRVBJQXBCR0dvaUJTQUVFQVloQkNNRklRaEJBQ1FGSUFoQkFYRU5BaUFFRFFFZ0ZVRUFOZ0pFSUJWQkVEWUNTQ0FWSUFGQkdHbzJBZ0FnRlVGQWEwRUNOZ0lBSUJVZ0JUWUNCRUVBSkFVakJTRUVRUUFrQlNBRVFRRnhEUUlMQ3lBYlFRRTZBQUJCQUNFRVFRRWhEd3dFQ3hBWElRQU1CQXNRRnlFQURBTUxFQmNoQUF3Q0N4QVhJUUFNQVFzZ0NoQndJQllRWENBUFJRUkFJQVFoRHd3SEN5QUNRUUZ4UVFCSElRSWdBMEVCY1VVaEF5QWZSUVJBSUFNaEFBd0dDeUFBUWRRQmFpSUFJQUFvQWdCQkFXbzJBZ0FnQXlFQURBVUxJQW9RY0FzZ0ZoQmNJQUFRSGdzTEVCY2hBQ0FXRUZ3Z0FCQWVDd3dCQ3lBbUxBQUFCSDlCQUFVZ0FrVUVRQ0FCUVp5OEEyb3NBQUFFUUNBQUJFQkJBQ0VQREFRTEJTQUJJQUZCa0x3RGFpa0RBRUVBSUFFb0FnQW9BaEJCQTNGQnVBSnFFUUlBQ3d0QkFRc2hEd3NnQmlRRUlBOFBDeUFBUWQzQkFHb3NBQUFFUUNBSEtBSUFJQUVnQUVIZ3dRQnFFSndFQ3d3Q0N5QUFRZDNCQUdvc0FBQUVRQ0FIS0FJQUlBRWdBRUhnd1FCcUVKc0VDd3dCQ3lBQlFjeXRBbW9zQUFCRkRRRWdBU0FBUVJCcVFRQWdEUkMxQVFSQUlBRWdBVUdJdkFOcUtRTUFRUUFnQVNnQ0FDZ0NFRUVEY1VHNEFtb1JBZ0FnQmlRRVFRRVBCVUdzOVFKQkFSQmtEQUlMQUFzZ0FTQUJRWkM4QTJvcEF3QkJBQ0FCS0FJQUtBSVFRUU54UWJnQ2FoRUNBQ0FHSkFSQkFROExJQVlrQkVFQUM1b0JBUUovSUFCQ0FEY0RBQ0FBUVJCcUlnTVF0d0lnQUNBQk5nSUlJQUJCQURZQzNBRWdBRUhnd1FCcVFRQTJBZ0FnQUVFQU5nTE1BVUVBSkFWQkJFSFl6UU1RQlNFQkl3VWhBa0VBSkFVZ0FrRUJjUVJBRUJjaEFpQURFSVFCSUFJUUhndEJBQ1FGUVFjZ0FTQURFQTBqQlNFQ1FRQWtCU0FDUVFGeFJRUkFJQUFnQVRZQ3lBRVBDeEFYSVFBZ0FSQlNJQU1RaEFFZ0FCQWVDNElEQWdkL0FYNGdBRUdRTW1vaEJrR0FnQVFnQUVHVU1tb2lBeWdDQUNJQ2EwR0FBa2tFUUNBQUtBSVFJZ1VnQlNBQ2FpQUdLQUlBSUFKcklnSVFVeG9nQTBFQU5nSUFJQVlnQWpZQ0FDQUFFT0lCR2lBREtBSUFJUUlMSUFKQkIyb2dCaWdDQUVzRVFFRUFEd3NnQVNBQVFSQnFJZ2NvQWdBZ0FtcEJCeERwQVNBRElBTW9BZ0JCQjJvMkFnQWdBUkNtQVNFSUlBRkJCQkM2QWlJQ1FYMXFJQUVRWVNJSnAyb2hCQ0FKUWdCUklBSkZJQVJCQUVoeWNnUkFJQUJCNkRGcVFRQTZBQUJCQUE4TElBWW9BZ0FnQXlnQ0FDSUNheUVGQWtBZ0JFRUFTZ1JBSUFFZ0J5Z0NBQ0FDYWlBRklBUkpCSDhnQlFVZ0JBc2lBaERwQVNBRElBTW9BZ0FnQW1vMkFnQWdCQ0FDYXlJQ1FRQktCRUFEUUFKQUlBTkJBRFlDQUNBR1FRQTJBZ0FnQUJEaUFVVUVRRUVBSVFBTUFRc2dBU0FIS0FJQUlBTW9BZ0JxSUFVZ0Fra0VmeUFGQlNBQ0N5SUVFT2tCSUFNZ0F5Z0NBQ0FFYWpZQ0FDQUNJQVJySWdKQkFFb05BUXdFQ3d0QkFBOExDd3NnQ0NBQkVMZ0NSZ3RPQVFGL0FrQUNRQUpBSUFKQm1Md0RhaWdDQUVFQ2F3NENBQUVDQ3lNRUlRUWpCRUdBRUdva0JDQUNRY3luQVdvb0FnQWFJQVFrQkVFQUR3c2dBQ0FESUFKQnNLY0JhaENkQkE4TFFRQUxSd0FnQUVISmlRTnFMQUFBQkVBUEN5QUFRWkNGQTJvc0FBQkZCRUFQQ3lBQlFaaThBMm9vQWdCQkFrY0VRQThMSUFGQmtLNENha0hNRVJCekJFQVBDeUFCSUFJUW9RUUxPQUFnQUVISmlRTnFMQUFBQkVBUEN5QUJRZWl0QW1vdUFRQkJnUUpIQkVBUEN5QUFRWkNGQTJvc0FBQkZCRUFQQ3lBQklBSVFvZ1FMclFFQkFuOGpCQ0VESXdSQmdCQnFKQVFnQWtIMHdRQnFJZ1FnQTBHQUVCQnBHZ0pBQWtBZ0FrSHd3UUJxS0FJQVFYNXhRUUpIRFFBZ0EwRzNNRUVFRUpBQ0JFQWdBMEc4TUVFRUVKQUNCRUFnQXlBRFFZQVFFSXNEREFJRlFRQWhBQXNGUVFBaEFBc01BUXNnQUVHVGhRTnFMQUFBUlFSQUlBTXNBQUJCTDBZRVFFRUFJUUFNQWdzZ0FrRWdhaUFFRUo4RVJRUkFRUUFoQUF3Q0N3c2dBeUFCRUo0RUlRQUxJQU1rQkNBQUM1WUJBUUovSXdRaEFpTUVRZEFRYWlRRUlBRWdBa0hRQUdvaUEwR0FFQkJwR2lBQUlBTVF0UU5CZjBjRVFDQUNKQVJCQVE4TFFZaThBeWdDQUVFUlJnUkFJQUpCQURZQ1JDQUNRZHNBTmdKSUlBSkJRR3RCQVRZQ0FDQUNJQUUyQWdBRklBSkJBRFlDUkNBQ1FSUTJBa2dnQWtFQU5nSUFJQUpCUUd0QkFqWUNBQ0FDSUFFMkFnUkJyUFVDUVFFUVpBc2dBaVFFUVFBTHB3TUJCSDhnQUNnQ0FFRXZSZ1JBUVFBUEN3SkFJQUFvQWdBaUF3UkFJQUFoQWtFQUlRQURRQ0FDUVFScUlRUUNRQ0FEUVM5R0JFQWdCQ2dDQUNJRFJRMEVJQU5CTDBjRVFBSkFJQVFvQWdCQkxrWUVRQ0FDUVFocUlnVW9BZ0JCTDBZRWYwRUJCU0FGS0FJQVJRc2hBeUFFS0FJQVFTNUdCRUFnQlNnQ0FFRXVSZ1JBSUFKQkRHb2lBaWdDQUVFdlJ3UkFJQUlvQWdBRVFDQUFRUUZxSVFJZ0F3MElJQUloQUF3RkN3c2dBdzBHREFNTEN5QUFRUUZxSVFJZ0EwVUVRQ0FDSVFBTEJTQUFRUUZxSVFBTEN3c0xDeUFFS0FJQUlnTUVRQ0FFSVFJTUFRc0xCVUVBSVFBTEN5QUJLQUlBUVM5R0JFQkJBQThGUVFBaEF5QUJJUUlMQTBBQ1FBSkFBa0FDUUFKQUlBSW9BZ0FPTHdBQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQkFnc01Bd3NnQWtFRWFpSUJLQUlBUVM1R0JFQWdBa0VJYWlJRUtBSUFRUzlIQkVBZ0JDZ0NBQTBEQ3lBREJFQWdBa0Y4YWlnQ0FFRXZSdzBEQ3lBQVFYOXFJUUFMREFFTElBSkJCR29oQVFzZ0EwRUJhaUVESUFFaEFnd0JDd3NnQUVGL1NndkhBZ0VFZndKQUl3UWhBaU1FUWRBUWFpUUVJQUVnQWtIUUFHb2lCVUdBRUJCcEdnSkFJQUJCcUtrQ2FpSURMQUFBQkVBZ0F4QTlJZ1FFUUNBQVFhaXRBbW9nQkNnQ0NEWUNBQXdDQ3lBQVFhYXBBbW9zQUFCRkJFQWdBeENVQVNFQklBSkJBRFlDUkNBQ1FkY0FOZ0pJREFNTEN3c0NRQ0FBUWFpckFtb2lBeXdBQUFSQUlBTVFQQ0lFQkVBZ0FFR3NyUUpxSUFRb0FnZzJBZ0FNQWdzZ0FFR25xUUpxTEFBQVJRUkFJQU1RbEFFaEFTQUNRUUEyQWtRZ0FrSFlBRFlDU0F3REN3c0xJQVVnQUVHb3JRSnFLQUlBSUFCQnJLMENhaWdDQUJETEFVVUVRQ0FDSkFRUEN5QUNRUUEyQWtRZ0FrSFpBRFlDU0NBQ0lBQkJHR28yQWdBZ0FrRkFhMEVDTmdJQUlBSWdBVFlDQkVHczlRSkJDUkJrSUFJa0JBOExJQUlnQUVFWWFqWUNBQ0FDUVVCclFRSTJBZ0FnQWlBQk5nSUVRYXoxQWtFQkVHUWdBaVFFQzVnQ0FRVi9Ba0FqQkNFQ0l3UkIwQ0JxSkFRZ0FTQUNRZEFRYWlJR1FZQVFFR2thSUFCQmtPNENhaWdDQUNJRUVHNUJBV29oQXlBQ1FkQUFhaUlGSUFRZ0Eyb2dBRUdVN2dKcUtBSUFJQU5ySWdNUXhnRWFJQVVnQTJwQkFEb0FBQ0FFRUQwaUEwVUVRQ0FFRUpRQklRRWdBa0VBTmdKRUlBSkIxd0EyQWtnTUFRc2dBeWdDQ0NFRUlBVVFQQ0lEUlFSQUlBVVFsQUVoQVNBQ1FRQTJBa1FnQWtIWUFEWUNTQXdCQ3lBR0lBUWdBeWdDQ0JETEFRUkFJQUpCQURZQ1JDQUNRZGtBTmdKSUlBSWdBRUVZYWpZQ0FDQUNRVUJyUVFJMkFnQWdBaUFCTmdJRVFhejFBa0VKRUdRTElBSWtCQThMSUFJZ0FFRVlhallDQUNBQ1FVQnJRUUkyQWdBZ0FpQUJOZ0lFUWF6MUFrRUJFR1FnQWlRRUM3OENBUVYvQWtBakJDRUNJd1JCMEJCcUpBUWdBU0FDUWRBQWFpSUZRWUFRRUdrYUlBQkJyTHdEYWl3QUFBUkFJQUpCQURZQ1JDQUNRZFlBTmdKSURBRUxRWWk4QTBFQU5nSUFJQUJCakxVRGFpSURFRDBpQkVVRVFDQURFSlFCSVFFZ0FrRUFOZ0pFSUFKQjF3QTJBa2dnQWlBQVFSaHFOZ0lBSUFKQlFHdEJBallDQUNBQ0lBRTJBZ1JCclBVQ1FRRVFaQ0FDSkFRUEN5QUVLQUlJSVFaQmlMd0RRUUEyQWdBZ0FFR010d05xSWdNUVBDSUVSUVJBSUFNUWxBRWhBU0FDUVFBMkFrUWdBa0hZQURZQ1NBd0JDeUFGSUFZZ0JDZ0NDQkRMQVFSQUlBSkJBRFlDUkNBQ1Fka0FOZ0pJSUFJZ0FFRVlhallDQUNBQ1FVQnJRUUkyQWdBZ0FpQUJOZ0lFUWF6MUFrRUpFR1FMSUFJa0JBOExJQUlnQUVFWWFqWUNBQ0FDUVVCclFRSTJBZ0FnQWlBQk5nSUVRYXoxQWtFREVHUWdBaVFFQ3lVQkFYOGpCQ0VESXdSQjBDQnFKQVFnQVNBQklBSVErQUVDUUNBREpBUkJBQThBQ3dBTGlnUUNDSDhDZmlNRUlRUWpCRUV3YWlRRUlBUkJDR29pQTBFQUVMZ0JRUUFrQlVFSElBQWdBeEFHSVFJakJTRUJRUUFrQlFKQUlBRkJBWEZGQkVBZ0FnUi9RUUFrQlVFRElBTVFUaG9qQlNFQlFRQWtCU0FCUVFGeERRSkJBQ1FGUVFNZ0F4Qk9yU01IclVJZ2hvUWhDU01GSVFGQkFDUUZJQUZCQVhFTkFrRUFKQVZCQXlBREVFNnRJd2V0UWlDR2hDRUtJd1VoQVVFQUpBVWdBVUVCY1EwQ0lBQkJtREpxSVFZZ0FFR2dNbW9pQ0NnQ0FDRUJJQUJCbkRKcUlnY2dDcWNpQlRZQ0FDQUJJQVZKQkVBZ0FFR2tNbW9vQWdBaUFrRUFSeUFDSUFWSmNRUi9RUUFrQlNBRUlBSTJBZ0JCQWtHczlRSkIyQnNnQkJBT0l3VWhBVUVBSkFVZ0FVRUJjUTBFUVFBa0JVRVVRYXoxQWhBTUl3VWhBVUVBSkFVZ0FVRUJjUTBFSUFnb0FnQWhBaUFIS0FJQUJTQUJJUUlnQlFzaEFTQUdLQUlBSUFFZ0FrRWdhaUFDUVFKMmFpSUNTd1IvSUFFRklBSWlBUXNRVnlJSFJRUkFRUUFrQlVFVVFhejFBaEFNSXdVaEFrRUFKQVVnQWtFQmNRMEVDeUFHSUFjMkFnQWdDQ0FCTmdJQUN5QUdLQUlBSVFGQkFDUUZRUklnQXlBQklBVVFCeG9qQlNFQlFRQWtCU0FCUVFGeERRSWdBRUdvTW1vZ0FFSHdNV29wQXdBZ0NYMDNBd0JCQVFWQkFBc2hBU0FES0FJQUlnQkZCRUFnQkNRRUlBRVBDeUFBRUZJZ0JDUUVJQUVQQ3dzUUZ5RUJJQU1vQWdBaUFFVUVRQ0FCRUI0TElBQVFVaUFCRUI1QkFBc1lBQ0FBS0FJQVFRSkhCRUJCQUE4TElBQW9BZ1JCZjNNTHR3d0JBbjhnQUVFQUlBQnJRVDl4SUFCcUlnSTJBdkFCSUFBZ0FrR0FBV28yQXZRQklBQWdBa0dnQVdvMkF2Z0JJQUFnQWtHb0FXbzJBdndCSUFBZ0FVWWlBd1JBSUFCQkFDQUFRWWdDYWlJQ2EwRS9jU0FDYWlJQ05nTDRBeUFBSUFKQmdBRnFOZ0w4QXlBQUlBSkJvQUZxTmdLQUJDQUFJQUpCcUFGcU5nS0VCQ0FBUVFBZ0FFR1FCR29pQW10QlAzRWdBbW9pQWpZQ2dBWWdBQ0FDUVlBQmFqWUNoQVlnQUNBQ1FhQUJhallDaUFZZ0FDQUNRYWdCYWpZQ2pBWWdBRUdJQ0dwQkFDQUFRWmdHYWlJQ2EwRS9jU0FDYWlJQ05nSUFJQUJCakFocUlBSkJnQUZxTmdJQUlBQkJrQWhxSUFKQm9BRnFOZ0lBSUFCQmxBaHFJQUpCcUFGcU5nSUFJQUJCa0FwcVFRQWdBRUdnQ0dvaUFtdEJQM0VnQW1vaUFqWUNBQ0FBUVpRS2FpQUNRWUFCYWpZQ0FDQUFRWmdLYWlBQ1FhQUJhallDQUNBQVFad0thaUFDUWFnQmFqWUNBQ0FBUVpnTWFrRUFJQUJCcUFwcUlnSnJRVDl4SUFKcUlnSTJBZ0FnQUVHY0RHb2dBa0dBQVdvMkFnQWdBRUdnREdvZ0FrR2dBV28yQWdBZ0FFR2tER29nQWtHb0FXbzJBZ0FnQUVHZ0RtcEJBQ0FBUWJBTWFpSUNhMEUvY1NBQ2FpSUNOZ0lBSUFCQnBBNXFJQUpCZ0FGcU5nSUFJQUJCcUE1cUlBSkJvQUZxTmdJQUlBQkJyQTVxSUFKQnFBRnFOZ0lBSUFCQnFCQnFRUUFnQUVHNERtb2lBbXRCUDNFZ0Ftb2lBallDQUNBQVFhd1FhaUFDUVlBQmFqWUNBQ0FBUWJBUWFpQUNRYUFCYWpZQ0FDQUFRYlFRYWlBQ1FhZ0JhallDQUFVZ0FpQUJLQUx3QVVHd0FSQlRHaUFBSUFFb0FvQUNOZ0tBQWlBQUlBRXNBSVFDT2dDRUFpQUFRUUFnQUVHSUFtb2lBbXRCUDNFZ0Ftb2lBallDK0FNZ0FDQUNRWUFCYWpZQy9BTWdBQ0FDUWFBQmFqWUNnQVFnQUNBQ1FhZ0JhallDaEFRZ0FpQUJLQUw0QTBHd0FSQlRHaUFBSUFFb0FvZ0VOZ0tJQkNBQUlBRXNBSXdFT2dDTUJDQUFRUUFnQUVHUUJHb2lBbXRCUDNFZ0Ftb2lBallDZ0FZZ0FDQUNRWUFCYWpZQ2hBWWdBQ0FDUWFBQmFqWUNpQVlnQUNBQ1FhZ0JhallDakFZZ0FpQUJLQUtBQmtHd0FSQlRHaUFBSUFFb0FwQUdOZ0tRQmlBQUlBRXNBSlFHT2dDVUJpQUFRWWdJYWtFQUlBQkJtQVpxSWdKclFUOXhJQUpxSWdJMkFnQWdBRUdNQ0dvZ0FrR0FBV28yQWdBZ0FFR1FDR29nQWtHZ0FXbzJBZ0FnQUVHVUNHb2dBa0dvQVdvMkFnQWdBaUFCUVlnSWFpZ0NBRUd3QVJCVEdpQUFRWmdJYWlBQlFaZ0lhaWdDQURZQ0FDQUFRWndJYWlBQlFad0lhaXdBQURvQUFDQUFRWkFLYWtFQUlBQkJvQWhxSWdKclFUOXhJQUpxSWdJMkFnQWdBRUdVQ21vZ0FrR0FBV28yQWdBZ0FFR1lDbW9nQWtHZ0FXbzJBZ0FnQUVHY0Ntb2dBa0dvQVdvMkFnQWdBaUFCUVpBS2FpZ0NBRUd3QVJCVEdpQUFRYUFLYWlBQlFhQUthaWdDQURZQ0FDQUFRYVFLYWlBQlFhUUthaXdBQURvQUFDQUFRWmdNYWtFQUlBQkJxQXBxSWdKclFUOXhJQUpxSWdJMkFnQWdBRUdjREdvZ0FrR0FBV28yQWdBZ0FFR2dER29nQWtHZ0FXbzJBZ0FnQUVHa0RHb2dBa0dvQVdvMkFnQWdBaUFCUVpnTWFpZ0NBRUd3QVJCVEdpQUFRYWdNYWlBQlFhZ01haWdDQURZQ0FDQUFRYXdNYWlBQlFhd01haXdBQURvQUFDQUFRYUFPYWtFQUlBQkJzQXhxSWdKclFUOXhJQUpxSWdJMkFnQWdBRUdrRG1vZ0FrR0FBV28yQWdBZ0FFR29EbW9nQWtHZ0FXbzJBZ0FnQUVHc0Rtb2dBa0dvQVdvMkFnQWdBaUFCUWFBT2FpZ0NBRUd3QVJCVEdpQUFRYkFPYWlBQlFiQU9haWdDQURZQ0FDQUFRYlFPYWlBQlFiUU9haXdBQURvQUFDQUFRYWdRYWtFQUlBQkJ1QTVxSWdKclFUOXhJQUpxSWdJMkFnQWdBRUdzRUdvZ0FrR0FBV28yQWdBZ0FFR3dFR29nQWtHZ0FXbzJBZ0FnQUVHMEVHb2dBa0dvQVdvMkFnQWdBaUFCUWFnUWFpZ0NBRUd3QVJCVEdpQUFRYmdRYWlBQlFiZ1FhaWdDQURZQ0FDQUFRYndRYWlBQlFid1FhaXdBQURvQUFBc2dBRUd3RW1wQkFDQUFRY0FRYWlJQ2EwRS9jU0FDYWlJQ05nSUFJQUJCdEJKcUlBSkJnQUZxTmdJQUlBQkJ1QkpxSUFKQm9BRnFOZ0lBSUFCQnZCSnFJQUpCcUFGcU5nSUFJQU1FUUNBQVFjZ1NhaUFCUWNnU2FrR0VCQkJUR2c4TElBSWdBVUd3RW1vb0FnQkJzQUVRVXhvZ0FFSEFFbW9nQVVIQUVtb29BZ0EyQWdBZ0FFSEVFbW9nQVVIRUVtb3NBQUE2QUFBZ0FFSElFbW9nQVVISUVtcEJoQVFRVXhvTEVBQWdBRUVBTmdJSUlBQkJBRFlDQUF0WUFRRi9JQUFnQVRZQ0FDQUJRWDlxUVFKSkJFQWdBRUVBTmdJRUR3c2dBVUVEUndSQUR3c2dBRUVFYWlJQ1FaY3dLUUFBTndBQUlBSkJuekFwQUFBM0FBZ2dBa0duTUNrQUFEY0FFQ0FDUWE4d0tRQUFOd0FZQzg4VUFRMS9Jd1FoQ3lNRVFZQUNhaVFFSUFzaENpQUFRY2dXYWlFTkEwQUNRQ0FOS0FJQUlnTWdCRUVHZENJSFN3UkFJQUFnQkVHSUFteHFJUVVnQXlBSGF5SURRY0FBU1FSL0lBTUZRY0FBSWdNTEJFQWdBQ0FFUVlnQ2JHcEI4QUZxSVF3Z0FDQUVRWWdDYkdwQitBRnFJUTRnQUVISUVtb2dCMm9oQnlBQUlBUkJpQUpzYWtHQUFtb2lBaWdDQUNFSUEwQUNRQ0FNS0FJQUlBaHFJUWtnQTBHQUFTQUlheUlHVFEwQUlBa2dCeUFHRUZNYUlBSWdBaWdDQUNBR2FqWUNBQ0FPS0FJQUlnZ29BZ0FoQ1NBSUlBbEJRR3MyQWdBZ0NFRUVhaUlJSUFnb0FnQWdDVUcvZjB0cU5nSUFJQVVnRENnQ0FCQnRJQXdvQWdBaUNFRkFheUVKSUFnZ0NTa0FBRGNBQUNBSUlBa3BBQWczQUFnZ0NDQUpLUUFRTndBUUlBZ2dDU2tBR0RjQUdDQUlJQWtwQUNBM0FDQWdDQ0FKS1FBb053QW9JQWdnQ1NrQU1EY0FNQ0FJSUFrcEFEZzNBRGdnQWlBQ0tBSUFRVUJxSWdnMkFnQWdCeUFHYWlFSElBTWdCbXNpQXcwQkRBUUxDeUFKSUFjZ0F4QlRHaUFDSUFJb0FnQWdBMm8yQWdBTEJTQUFJQVJCaUFKc2FpRUZDd3NnQlNBS0lBUkJCWFJxRU9BQklBUkJBV29pQkVFSVJ3MEFDeUFBUWNBUWFpRUlJQUJCc0JKcUlRY2dBRUc0RW1vaENVRWdJUU1nQ2lFRklBQkJ3QkpxSWdRb0FnQWhBQUpBQWtBRFFDQUhLQUlBSUFCcUlRSWdBMEdBQVNBQWF5SUdUUTBCSUFJZ0JTQUdFRk1hSUFRZ0JDZ0NBQ0FHYWpZQ0FDQUpLQUlBSWdBb0FnQWhBaUFBSUFKQlFHczJBZ0FnQUVFRWFpSUFJQUFvQWdBZ0FrRy9mMHRxTmdJQUlBZ2dCeWdDQUJCdElBY29BZ0FpQUVGQWF5RUNJQUFnQWlrQUFEY0FBQ0FBSUFJcEFBZzNBQWdnQUNBQ0tRQVFOd0FRSUFBZ0Fpa0FHRGNBR0NBQUlBSXBBQ0EzQUNBZ0FDQUNLUUFvTndBb0lBQWdBaWtBTURjQU1DQUFJQUlwQURnM0FEZ2dCQ0FFS0FJQVFVQnFJZ0EyQWdBZ0JTQUdhaUVGSUFNZ0Jtc2lBdzBBQ3d3QkN5QUNJQVVnQXhCVEdpQUVJQVFvQWdBZ0Eyb2lBRFlDQUF0QklDRUZJQXBCSUdvaEF3SkFBa0FEUUNBSEtBSUFJQUJxSVFJZ0JVR0FBU0FBYXlJR1RRMEJJQUlnQXlBR0VGTWFJQVFnQkNnQ0FDQUdhallDQUNBSktBSUFJZ0FvQWdBaEFpQUFJQUpCUUdzMkFnQWdBRUVFYWlJQUlBQW9BZ0FnQWtHL2YwdHFOZ0lBSUFnZ0J5Z0NBQkJ0SUFjb0FnQWlBRUZBYXlFQ0lBQWdBaWtBQURjQUFDQUFJQUlwQUFnM0FBZ2dBQ0FDS1FBUU53QVFJQUFnQWlrQUdEY0FHQ0FBSUFJcEFDQTNBQ0FnQUNBQ0tRQW9Od0FvSUFBZ0Fpa0FNRGNBTUNBQUlBSXBBRGczQURnZ0JDQUVLQUlBUVVCcUlnQTJBZ0FnQXlBR2FpRURJQVVnQm1zaUJRMEFDd3dCQ3lBQ0lBTWdCUkJUR2lBRUlBUW9BZ0FnQldvaUFEWUNBQXRCSUNFRklBcEJRR3NoQXdKQUFrQURRQ0FIS0FJQUlBQnFJUUlnQlVHQUFTQUFheUlHVFEwQklBSWdBeUFHRUZNYUlBUWdCQ2dDQUNBR2FqWUNBQ0FKS0FJQUlnQW9BZ0FoQWlBQUlBSkJRR3MyQWdBZ0FFRUVhaUlBSUFBb0FnQWdBa0cvZjB0cU5nSUFJQWdnQnlnQ0FCQnRJQWNvQWdBaUFFRkFheUVDSUFBZ0Fpa0FBRGNBQUNBQUlBSXBBQWczQUFnZ0FDQUNLUUFRTndBUUlBQWdBaWtBR0RjQUdDQUFJQUlwQUNBM0FDQWdBQ0FDS1FBb053QW9JQUFnQWlrQU1EY0FNQ0FBSUFJcEFEZzNBRGdnQkNBRUtBSUFRVUJxSWdBMkFnQWdBeUFHYWlFRElBVWdCbXNpQlEwQUN3d0JDeUFDSUFNZ0JSQlRHaUFFSUFRb0FnQWdCV29pQURZQ0FBdEJJQ0VGSUFwQjRBQnFJUU1DUUFKQUEwQWdCeWdDQUNBQWFpRUNJQVZCZ0FFZ0FHc2lCazBOQVNBQ0lBTWdCaEJUR2lBRUlBUW9BZ0FnQm1vMkFnQWdDU2dDQUNJQUtBSUFJUUlnQUNBQ1FVQnJOZ0lBSUFCQkJHb2lBQ0FBS0FJQUlBSkJ2MzlMYWpZQ0FDQUlJQWNvQWdBUWJTQUhLQUlBSWdCQlFHc2hBaUFBSUFJcEFBQTNBQUFnQUNBQ0tRQUlOd0FJSUFBZ0Fpa0FFRGNBRUNBQUlBSXBBQmczQUJnZ0FDQUNLUUFnTndBZ0lBQWdBaWtBS0RjQUtDQUFJQUlwQURBM0FEQWdBQ0FDS1FBNE53QTRJQVFnQkNnQ0FFRkFhaUlBTmdJQUlBTWdCbW9oQXlBRklBWnJJZ1VOQUFzTUFRc2dBaUFESUFVUVV4b2dCQ0FFS0FJQUlBVnFJZ0EyQWdBTFFTQWhCU0FLUVlBQmFpRURBa0FDUUFOQUlBY29BZ0FnQUdvaEFpQUZRWUFCSUFCcklnWk5EUUVnQWlBRElBWVFVeG9nQkNBRUtBSUFJQVpxTmdJQUlBa29BZ0FpQUNnQ0FDRUNJQUFnQWtGQWF6WUNBQ0FBUVFScUlnQWdBQ2dDQUNBQ1FiOS9TMm8yQWdBZ0NDQUhLQUlBRUcwZ0J5Z0NBQ0lBUVVCcklRSWdBQ0FDS1FBQU53QUFJQUFnQWlrQUNEY0FDQ0FBSUFJcEFCQTNBQkFnQUNBQ0tRQVlOd0FZSUFBZ0Fpa0FJRGNBSUNBQUlBSXBBQ2czQUNnZ0FDQUNLUUF3TndBd0lBQWdBaWtBT0RjQU9DQUVJQVFvQWdCQlFHb2lBRFlDQUNBRElBWnFJUU1nQlNBR2F5SUZEUUFMREFFTElBSWdBeUFGRUZNYUlBUWdCQ2dDQUNBRmFpSUFOZ0lBQzBFZ0lRVWdDa0dnQVdvaEF3SkFBa0FEUUNBSEtBSUFJQUJxSVFJZ0JVR0FBU0FBYXlJR1RRMEJJQUlnQXlBR0VGTWFJQVFnQkNnQ0FDQUdhallDQUNBSktBSUFJZ0FvQWdBaEFpQUFJQUpCUUdzMkFnQWdBRUVFYWlJQUlBQW9BZ0FnQWtHL2YwdHFOZ0lBSUFnZ0J5Z0NBQkJ0SUFjb0FnQWlBRUZBYXlFQ0lBQWdBaWtBQURjQUFDQUFJQUlwQUFnM0FBZ2dBQ0FDS1FBUU53QVFJQUFnQWlrQUdEY0FHQ0FBSUFJcEFDQTNBQ0FnQUNBQ0tRQW9Od0FvSUFBZ0Fpa0FNRGNBTUNBQUlBSXBBRGczQURnZ0JDQUVLQUlBUVVCcUlnQTJBZ0FnQXlBR2FpRURJQVVnQm1zaUJRMEFDd3dCQ3lBQ0lBTWdCUkJUR2lBRUlBUW9BZ0FnQldvaUFEWUNBQXRCSUNFRklBcEJ3QUZxSVFNQ1FBSkFBMEFnQnlnQ0FDQUFhaUVDSUFWQmdBRWdBR3NpQmswTkFTQUNJQU1nQmhCVEdpQUVJQVFvQWdBZ0JtbzJBZ0FnQ1NnQ0FDSUFLQUlBSVFJZ0FDQUNRVUJyTmdJQUlBQkJCR29pQUNBQUtBSUFJQUpCdjM5TGFqWUNBQ0FJSUFjb0FnQVFiU0FIS0FJQUlnQkJRR3NoQWlBQUlBSXBBQUEzQUFBZ0FDQUNLUUFJTndBSUlBQWdBaWtBRURjQUVDQUFJQUlwQUJnM0FCZ2dBQ0FDS1FBZ053QWdJQUFnQWlrQUtEY0FLQ0FBSUFJcEFEQTNBREFnQUNBQ0tRQTROd0E0SUFRZ0JDZ0NBRUZBYWlJQU5nSUFJQU1nQm1vaEF5QUZJQVpySWdVTkFBc01BUXNnQWlBRElBVVFVeG9nQkNBRUtBSUFJQVZxSWdBMkFnQUxRU0FoQlNBS1FlQUJhaUVLQWtBQ1FBTkFBa0FnQnlnQ0FDQUFhaUVESUFWQmdBRWdBR3NpQWswTkFDQURJQW9nQWhCVEdpQUVJQVFvQWdBZ0FtbzJBZ0FnQ1NnQ0FDSUFLQUlBSVFNZ0FDQURRVUJyTmdJQUlBQkJCR29pQUNBQUtBSUFJQU5CdjM5TGFqWUNBQ0FJSUFjb0FnQVFiU0FIS0FJQUlnQkJRR3NoQXlBQUlBTXBBQUEzQUFBZ0FDQURLUUFJTndBSUlBQWdBeWtBRURjQUVDQUFJQU1wQUJnM0FCZ2dBQ0FES1FBZ053QWdJQUFnQXlrQUtEY0FLQ0FBSUFNcEFEQTNBREFnQUNBREtRQTROd0E0SUFRZ0JDZ0NBRUZBYWlJQU5nSUFJQVVnQW1zaUJVVU5BaUFLSUFKcUlRb01BUXNMREFFTElBZ2dBUkRnQVNBTEpBUVBDeUFESUFvZ0JSQlRHaUFFSUFRb0FnQWdCV28yQWdBZ0NDQUJFT0FCSUFza0JBdXdBZ0lFZndOK0lBQkI2REZxSWdZc0FBQkZCRUJCQUE4TElBQkJxREpxSVFVZ0FFR2NNbW9oQnlBQVFiQXlhaUVFQTBBZ0JTa0RBQ0FIS0FJQXJYd2dCQ2tEQUZnRVFDQUFFS1FFRFFFTEN5QUdMQUFBUlFSQUlBQkJ1REpxTEFBQVJRUkFRUUFQQ3lBQUtBSUFJQVFwQXdCQkFCQ2NBVUVBRHdzZ0JDa0RBQ0lJSUFVcEF3QWlDVm9FUUNBSUlBS3RJZ3A4SUFrZ0J5Z0NBSzE4V0FSQUlBRWdBRUdZTW1vb0FnQWdDQ0FKZmFkcUlBSVFVeG9nQXlBQ05nSUFJQVFnQkNrREFDQUtmRGNEQUNBQVFiZ3lha0VCT2dBQVFRRVBDd3NnQUVHNE1tb2lCU3dBQUFSQUlBQW9BZ0FnQ0VFQUVKd0JJQVZCQURvQUFBc2dBQ2dDQUNBQklBSVExQUVpQUVFQVNBUi9JQVpCQURvQUFFRUFCU0FESUFBMkFnQWdCQ0FFS1FNQUlBQ3NmRGNEQUVFQkN3djJCZ0VQZjBHQUJDQUFRY2dXYWlJT0tBSUFJZ2RySVFZZ0IwVWdCaUFDUzNJRWZ5QUJJUWtnQWdVZ0FFSElFbW9nQjJvZ0FTQUdFRk1hQTBBZ0FDQURRWWdDYkdvaERDQUFJQU5CaUFKc2FrSHdBV29oQ0NBQUlBTkJpQUpzYWtINEFXb2hEVUhBQUNFS0lBQkJ5QkpxSUFOQkJuUnFJUXNnQUNBRFFZZ0NiR3BCZ0FKcUlnY29BZ0FoQkFKQUFrQURRQ0FJS0FJQUlBUnFJUVVnQ2tHQUFTQUVheUlKVFEwQklBVWdDeUFKRUZNYUlBY2dCeWdDQUNBSmFqWUNBQ0FOS0FJQUlnUW9BZ0FoQlNBRUlBVkJRR3MyQWdBZ0JFRUVhaUlFSUFRb0FnQWdCVUcvZjB0cU5nSUFJQXdnQ0NnQ0FCQnRJQWdvQWdBaUJFRkFheUVGSUFRZ0JTa0FBRGNBQUNBRUlBVXBBQWczQUFnZ0JDQUZLUUFRTndBUUlBUWdCU2tBR0RjQUdDQUVJQVVwQUNBM0FDQWdCQ0FGS1FBb053QW9JQVFnQlNrQU1EY0FNQ0FFSUFVcEFEZzNBRGdnQnlBSEtBSUFRVUJxSWdRMkFnQWdDeUFKYWlFTElBb2dDV3NpQ2cwQUN3d0JDeUFGSUFzZ0NoQlRHaUFISUFjb0FnQWdDbW8yQWdBTElBTkJBV29pQTBFSVJ3MEFDeUFCSUFacUlRbEJBQ0VISUFJZ0Jtc0xJZ3RCL3dOTElROUJBQ0VFQTBBZ0FDQUVRWWdDYkdvaEVDQVBCRUFnQUNBRVFZZ0NiR3BCOEFGcUlRMGdBQ0FFUVlnQ2JHcEIrQUZxSVJFZ0NTQUVRUVowYWlFQ0lBc2hDaUFBSUFSQmlBSnNha0dBQW1vaUNDZ0NBQ0VEQTBCQndBQWhCU0FDSVFFQ1FBSkFBMEFnRFNnQ0FDQURhaUVHSUFWQmdBRWdBMnNpREUwTkFTQUdJQUVnREJCVEdpQUlJQWdvQWdBZ0RHbzJBZ0FnRVNnQ0FDSURLQUlBSVFZZ0F5QUdRVUJyTmdJQUlBTkJCR29pQXlBREtBSUFJQVpCdjM5TGFqWUNBQ0FRSUEwb0FnQVFiU0FOS0FJQUlnTkJRR3NoQmlBRElBWXBBQUEzQUFBZ0F5QUdLUUFJTndBSUlBTWdCaWtBRURjQUVDQURJQVlwQUJnM0FCZ2dBeUFHS1FBZ053QWdJQU1nQmlrQUtEY0FLQ0FESUFZcEFEQTNBREFnQXlBR0tRQTROd0E0SUFnZ0NDZ0NBRUZBYWlJRE5nSUFJQUVnREdvaEFTQUZJQXhySWdVTkFDQURJUUVMREFFTElBWWdBU0FGRUZNYUlBZ2dDQ2dDQUNBRmFpSUJOZ0lBQ3lBQ1FZQUVhaUVDSUFwQmdIeHFJZ3BCL3dOTEJFQWdBU0VEREFFTEN3c2dCRUVCYWlJRVFRaEpEUUFMSUF0Qi93TnhJZ0ZGQkVBZ0RpQUJJQWRxTmdJQUR3c2dBRUhJRW1vZ0Iyb2dDU0FMSUFGcmFpQUJFRk1hSUE0Z0FTQUhhallDQUF1NUNnRURmeUFBUWNBUWFrRUFRZkFCRUZRYUlBQkJ3QkpxUVFBMkFnQWdBRUhFRW1vaUEwRUFPZ0FBSUFCQnlCSnFRUUJCaEFRUVZCb2dBRUcwRW1vaUFpZ0NBQ0lCUWF3UktRSUFOd0lBSUFGQnRCRXBBZ0EzQWdnZ0FVRzhFU2tDQURjQ0VDQUJRY1FSS1FJQU53SVlJQUlvQWdBaUFTQUJLQUlBUWFDQW9CQnpOZ0lBSUFGQkRHb2lBU0FCS0FJQVFZQ0FoSUFDY3pZQ0FDQUFRUUJCOEFFUVZCb2dBRUVBTmdLQUFpQUFRUUE2QUlRQ0lBQkI5QUZxSWdJb0FnQWlBVUdzRVNrQ0FEY0NBQ0FCUWJRUktRSUFOd0lJSUFGQnZCRXBBZ0EzQWhBZ0FVSEVFU2tDQURjQ0dDQUNLQUlBSWdFZ0FTZ0NBRUdnZ0tBUWN6WUNBQ0FCUVF4cUlnRWdBU2dDQUVHQWdJQ0FBbk0yQWdBZ0FFR0lBbXBCQUVId0FSQlVHaUFBUVFBMkFvZ0VJQUJCQURvQWpBUWdBRUg4QTJvaUFpZ0NBQ0lCUWF3UktRSUFOd0lBSUFGQnRCRXBBZ0EzQWdnZ0FVRzhFU2tDQURjQ0VDQUJRY1FSS1FJQU53SVlJQUlvQWdBaUFTQUJLQUlBUWFDQW9CQnpOZ0lBSUFGQkNHb2lBaUFDS0FJQVFRRnpOZ0lBSUFGQkRHb2lBU0FCS0FJQVFZQ0FnSUFDY3pZQ0FDQUFRWkFFYWtFQVFmQUJFRlFhSUFCQkFEWUNrQVlnQUVFQU9nQ1VCaUFBUVlRR2FpSUNLQUlBSWdGQnJCRXBBZ0EzQWdBZ0FVRzBFU2tDQURjQ0NDQUJRYndSS1FJQU53SVFJQUZCeEJFcEFnQTNBaGdnQWlnQ0FDSUJJQUVvQWdCQm9JQ2dFSE0yQWdBZ0FVRUlhaUlDSUFJb0FnQkJBbk0yQWdBZ0FVRU1haUlCSUFFb0FnQkJnSUNBZ0FKek5nSUFJQUJCbUFacVFRQkI4QUVRVkJvZ0FFR1lDR3BCQURZQ0FDQUFRWndJYWtFQU9nQUFJQUJCakFocUlnSW9BZ0FpQVVHc0VTa0NBRGNDQUNBQlFiUVJLUUlBTndJSUlBRkJ2QkVwQWdBM0FoQWdBVUhFRVNrQ0FEY0NHQ0FDS0FJQUlnRWdBU2dDQUVHZ2dLQVFjellDQUNBQlFRaHFJZ0lnQWlnQ0FFRURjellDQUNBQlFReHFJZ0VnQVNnQ0FFR0FnSUNBQW5NMkFnQWdBRUdnQ0dwQkFFSHdBUkJVR2lBQVFhQUtha0VBTmdJQUlBQkJwQXBxUVFBNkFBQWdBRUdVQ21vaUFpZ0NBQ0lCUWF3UktRSUFOd0lBSUFGQnRCRXBBZ0EzQWdnZ0FVRzhFU2tDQURjQ0VDQUJRY1FSS1FJQU53SVlJQUlvQWdBaUFTQUJLQUlBUWFDQW9CQnpOZ0lBSUFGQkNHb2lBaUFDS0FJQVFRUnpOZ0lBSUFGQkRHb2lBU0FCS0FJQVFZQ0FnSUFDY3pZQ0FDQUFRYWdLYWtFQVFmQUJFRlFhSUFCQnFBeHFRUUEyQWdBZ0FFR3NER3BCQURvQUFDQUFRWndNYWlJQ0tBSUFJZ0ZCckJFcEFnQTNBZ0FnQVVHMEVTa0NBRGNDQ0NBQlFid1JLUUlBTndJUUlBRkJ4QkVwQWdBM0FoZ2dBaWdDQUNJQklBRW9BZ0JCb0lDZ0VITTJBZ0FnQVVFSWFpSUNJQUlvQWdCQkJYTTJBZ0FnQVVFTWFpSUJJQUVvQWdCQmdJQ0FnQUp6TmdJQUlBQkJzQXhxUVFCQjhBRVFWQm9nQUVHd0RtcEJBRFlDQUNBQVFiUU9ha0VBT2dBQUlBQkJwQTVxSWdJb0FnQWlBVUdzRVNrQ0FEY0NBQ0FCUWJRUktRSUFOd0lJSUFGQnZCRXBBZ0EzQWhBZ0FVSEVFU2tDQURjQ0dDQUNLQUlBSWdFZ0FTZ0NBRUdnZ0tBUWN6WUNBQ0FCUVFocUlnSWdBaWdDQUVFR2N6WUNBQ0FCUVF4cUlnRWdBU2dDQUVHQWdJQ0FBbk0yQWdBZ0FFRzREbXBCQUVId0FSQlVHaUFBUWJnUWFrRUFOZ0lBSUFCQnJCQnFJZ0lvQWdBaUFVR3NFU2tDQURjQ0FDQUJRYlFSS1FJQU53SUlJQUZCdkJFcEFnQTNBaEFnQVVIRUVTa0NBRGNDR0NBQ0tBSUFJZ0VnQVNnQ0FFR2dnS0FRY3pZQ0FDQUJRUWhxSWdJZ0FpZ0NBRUVIY3pZQ0FDQUJRUXhxSWdFZ0FTZ0NBRUdBZ0lDQUFuTTJBZ0FnQTBFQk9nQUFJQUJCdkJCcVFRRTZBQUFMUndBZ0FFR0J4cFM2QmpZQ0FDQUFRWW5YdHY1K05nSUVJQUJCL3JucnhYazJBZ2dnQUVIMnFNbUJBVFlDRENBQVFmRER5NTU4TmdJUUlBQkJBRFlDR0NBQVFRQTJBaFFMM0JjQmFuOGdBa1VFUUE4TElBQkJDR29pTGl3QUFDRVZJQUJCQ1dvaUx5d0FBQ0VXSUFCQkNtb2lNQ3dBQUNFWElBQkJDMm9pTVN3QUFDRVlJQUJCREdvaU1pd0FBQ0VaSUFCQkRXb2lNeXdBQUNFYUlBQkJEbW9pTkN3QUFDRWJJQUJCRDJvaU5Td0FBQ0VjSUFCQkVHb2lOaXdBQUNFZElBQkJFV29pTnl3QUFDRWVJQUJCRW1vaU9Dd0FBQ0VmSUFCQkUyb2lPU3dBQUNFZ0lBQkJGR29pT2l3QUFDRWhJQUJCRldvaU95d0FBQ0VpSUFCQkZtb2lQQ3dBQUNFaklBQkJGMm9pUFN3QUFDRWtJQUpCQkhZaUpRUkFJQUJCQkdvaFBpQUFRU2hxSVQ4Z0FFRXBhaUZBSUFCQkttb2hRU0FBUVN0cUlVSWdBRUVzYWlGRElBQkJMV29oUkNBQVFTNXFJVVVnQUVFdmFpRkdJQUJCTUdvaFJ5QUFRVEZxSVVnZ0FFRXlhaUZKSUFCQk0yb2hTaUFBUVRScUlVc2dBRUUxYWlGTUlBQkJObW9oVFNBQVFUZHFJVTRnQUVFWWFpRlBJQUJCR1dvaFVDQUFRUnBxSVZFZ0FFRWJhaUZTSUFCQkhHb2hVeUFBUVIxcUlWUWdBRUVlYWlGVklBQkJIMm9oVmlBQVFTQnFJVmNnQUVFaGFpRllJQUJCSW1vaFdTQUFRU05xSVZvZ0FFRWthaUZiSUFCQkpXb2hYQ0FBUVNacUlWMGdBRUVuYWlGZUEwQWdBQ0ErS0FJQUlnSkJCSFJxTEFBYklBRkJBMm9pWHl3QUFITWhEU0FBSUFKQkJIUnFMQUFlSUFGQkJtb2lZQ3dBQUhNaERpQUFJQUpCQkhScUxBQWhJQUZCQ1dvaVlTd0FBSE1oRHlBQUlBSkJCSFJxTEFBa0lBRkJER29pWWl3QUFITWhFQ0FBSUFKQkJIUnFMQUFhSUFGQkFtb2lZeXdBQUhNaEVTQUFJQUpCQkhScUxBQWRJQUZCQldvaVpDd0FBSE1oRWlBQUlBSkJCSFJxTEFBZ0lBRkJDR29pWlN3QUFITWhDU0FBSUFKQkJIUnFMQUFqSUFGQkMyb2laaXdBQUhNaENpQUFJQUpCQkhScUxBQW1JQUZCRG1vaVp5d0FBSE1oQ3lBQUlBSkJCSFJxTEFBWklBRkJBV29pYUN3QUFITWhEQ0FBSUFKQkJIUnFMQUFjSUFGQkJHb2lhU3dBQUhNaEV5QUFJQUpCQkhScUxBQWZJQUZCQjJvaWFpd0FBSE1oQnlBQUlBSkJCSFJxTEFBaUlBRkJDbW9pYXl3QUFITWhCU0FBSUFKQkJIUnFMQUFsSUFGQkRXb2liQ3dBQUhNaEJpQUFRUmhxSUFKQkJIUnFMQUFBSUFFc0FBQnpJUlFnQVVFUGFpSnRMQUFBSVFnRFFDQUdRZjhCY1NJRVFRSjBRZHpRQTJvc0FBQWdGRUgvQVhFaUJrRUNkRUhjMkFOcUxBQUFjeUFGUWY4QmNTSUZRUUowUWR6SUEyb3NBQUJ6SUFkQi93RnhJZ2RCQW5SQjNNQURhaXdBQUhNaEZDQUVRUUowUWQzUUEyb3NBQUFnQmtFQ2RFSGQyQU5xTEFBQWN5QUZRUUowUWQzSUEyb3NBQUJ6SUFkQkFuUkIzY0FEYWl3QUFITWhKaUFFUVFKMFFkN1FBMm9zQUFBZ0JrRUNkRUhlMkFOcUxBQUFjeUFGUVFKMFFkN0lBMm9zQUFCeklBZEJBblJCM3NBRGFpd0FBSE1oSnlBRVFRSjBRZC9RQTJvc0FBQWdCa0VDZEVIZjJBTnFMQUFBY3lBRlFRSjBRZC9JQTJvc0FBQnpJQWRCQW5SQjM4QURhaXdBQUhNaEtDQU1RZjhCY1NJRVFRSjBRZHpRQTJvc0FBQWdFMEgvQVhFaUJrRUNkRUhjMkFOcUxBQUFjeUFMUWY4QmNTSUZRUUowUWR6SUEyb3NBQUJ6SUFwQi93RnhJZ2RCQW5SQjNNQURhaXdBQUhNaEV5QUVRUUowUWQzUUEyb3NBQUFnQmtFQ2RFSGQyQU5xTEFBQWN5QUZRUUowUWQzSUEyb3NBQUJ6SUFkQkFuUkIzY0FEYWl3QUFITWhDaUFFUVFKMFFkN1FBMm9zQUFBZ0JrRUNkRUhlMkFOcUxBQUFjeUFGUVFKMFFkN0lBMm9zQUFCeklBZEJBblJCM3NBRGFpd0FBSE1oQ3lBRVFRSjBRZC9RQTJvc0FBQWdCa0VDZEVIZjJBTnFMQUFBY3lBRlFRSjBRZC9JQTJvc0FBQnpJQWRCQW5SQjM4QURhaXdBQUhNaEJ5QVNRZjhCY1NJRVFRSjBRZHpRQTJvc0FBQWdDVUgvQVhFaUJrRUNkRUhjMkFOcUxBQUFjeUFSUWY4QmNTSUZRUUowUWR6SUEyb3NBQUJ6SUFBZ0FrRUVkR29zQUNjZ0NITkIvd0Z4SWdoQkFuUkIzTUFEYWl3QUFITWhDU0FFUVFKMFFkM1FBMm9zQUFBZ0JrRUNkRUhkMkFOcUxBQUFjeUFGUVFKMFFkM0lBMm9zQUFCeklBaEJBblJCM2NBRGFpd0FBSE1oRENBRVFRSjBRZDdRQTJvc0FBQWdCa0VDZEVIZTJBTnFMQUFBY3lBRlFRSjBRZDdJQTJvc0FBQnpJQWhCQW5SQjNzQURhaXdBQUhNaEtTQUVRUUowUWQvUUEyb3NBQUFnQmtFQ2RFSGYyQU5xTEFBQWN5QUZRUUowUWQvSUEyb3NBQUJ6SUFoQkFuUkIzOEFEYWl3QUFITWhLaUFQUWY4QmNTSUVRUUowUWR6UUEyb3NBQUFnRUVIL0FYRWlDRUVDZEVIYzJBTnFMQUFBY3lBT1FmOEJjU0lHUVFKMFFkeklBMm9zQUFCeklBMUIvd0Z4SWdWQkFuUkIzTUFEYWl3QUFITWhLeUFFUVFKMFFkM1FBMm9zQUFBZ0NFRUNkRUhkMkFOcUxBQUFjeUFHUVFKMFFkM0lBMm9zQUFCeklBVkJBblJCM2NBRGFpd0FBSE1oTENBRVFRSjBRZDdRQTJvc0FBQWdDRUVDZEVIZTJBTnFMQUFBY3lBR1FRSjBRZDdJQTJvc0FBQnpJQVZCQW5SQjNzQURhaXdBQUhNaExTQUVRUUowUWQvUUEyb3NBQUFnQ0VFQ2RFSGYyQU5xTEFBQWN5QUdRUUowUWQvSUEyb3NBQUJ6SUFWQkFuUkIzOEFEYWl3QUFITWhDQ0FDUVg5cUlRUWdBa0VDU2dSQUlBQWdCRUVFZEdvc0FCc2dLSE1oRFNBQUlBUkJCSFJxTEFBZUlBdHpJUTRnQUNBRVFRUjBhaXdBSVNBTWN5RVBJQUFnQkVFRWRHb3NBQ1FnSzNNaEVDQUFJQVJCQkhScUxBQWFJQ2R6SVJFZ0FDQUVRUVIwYWl3QUhTQUtjeUVTSUFBZ0JFRUVkR29zQUNBZ0NYTWhDU0FBSUFSQkJIUnFMQUFqSUNweklRb2dBQ0FFUVFSMGFpd0FKaUF0Y3lFTElBQWdCRUVFZEdvc0FCa2dKbk1oRENBQUlBUkJCSFJxTEFBY0lCTnpJUk1nQUNBRVFRUjBhaXdBSHlBSGN5RUhJQUFnQkVFRWRHb3NBQ0lnS1hNaEJTQUFJQVJCQkhScUxBQWxJQ3h6SVFZZ0FFRVlhaUFFUVFSMGFpd0FBQ0FVY3lFVUlBUWhBZ3dCQ3dzZ1R5d0FBQ0EvTEFBQUlCUnpRZjhCY1VIY3ZnTnFMQUFBY3lFQ0lGQXNBQUFnVEN3QUFDQXNjMEgvQVhGQjNMNERhaXdBQUhNaEJDQlJMQUFBSUVrc0FBQWdLWE5CL3dGeFFkeStBMm9zQUFCeklRWWdVaXdBQUNCR0xBQUFJQWR6UWY4QmNVSGN2Z05xTEFBQWN5RUZJRk1zQUFBZ1F5d0FBQ0FUYzBIL0FYRkIzTDREYWl3QUFITWhCeUJVTEFBQUlFQXNBQUFnSm5OQi93RnhRZHkrQTJvc0FBQnpJUTBnVlN3QUFDQk5MQUFBSUMxelFmOEJjVUhjdmdOcUxBQUFjeUVPSUZZc0FBQWdTaXdBQUNBcWMwSC9BWEZCM0w0RGFpd0FBSE1oRHlCWExBQUFJRWNzQUFBZ0NYTkIvd0Z4UWR5K0Eyb3NBQUJ6SVJBZ1dDd0FBQ0JFTEFBQUlBcHpRZjhCY1VIY3ZnTnFMQUFBY3lFUklGa3NBQUFnUVN3QUFDQW5jMEgvQVhGQjNMNERhaXdBQUhNaEVpQmFMQUFBSUU0c0FBQWdDSE5CL3dGeFFkeStBMm9zQUFCeklRZ2dXeXdBQUNCTExBQUFJQ3R6UWY4QmNVSGN2Z05xTEFBQWN5RUpJRndzQUFBZ1NDd0FBQ0FNYzBIL0FYRkIzTDREYWl3QUFITWhDaUJkTEFBQUlFVXNBQUFnQzNOQi93RnhRZHkrQTJvc0FBQnpJUXNnWGl3QUFDQkNMQUFBSUNoelFmOEJjVUhjdmdOcUxBQUFjeUVNSUFBc0FBQUVRQ0FDSUJWeklRSWdFaUFmY3lFU0lBZ2dJSE1oQ0NBSklDRnpJUWtnQkNBV2N5RUVJQW9nSW5NaENpQUxJQ056SVFzZ0RDQWtjeUVNSUFZZ0YzTWhCaUFGSUJoeklRVWdCeUFaY3lFSElBMGdHbk1oRFNBT0lCdHpJUTRnRHlBY2N5RVBJQkFnSFhNaEVDQVJJQjV6SVJFTElBRXNBQUFoRlNCb0xBQUFJUllnWXl3QUFDRVhJRjhzQUFBaEdDQnBMQUFBSVJrZ1pDd0FBQ0VhSUdBc0FBQWhHeUJxTEFBQUlSd2daU3dBQUNFZElHRXNBQUFoSGlCckxBQUFJUjhnWml3QUFDRWdJR0lzQUFBaElTQnNMQUFBSVNJZ1p5d0FBQ0VqSUcwc0FBQWhKQ0FESUFJNkFBQWdBeUFFT2dBQklBTWdCam9BQWlBRElBVTZBQU1nQXlBSE9nQUVJQU1nRFRvQUJTQURJQTQ2QUFZZ0F5QVBPZ0FISUFNZ0VEb0FDQ0FESUJFNkFBa2dBeUFTT2dBS0lBTWdDRG9BQ3lBRElBazZBQXdnQXlBS09nQU5JQU1nQ3pvQURpQURJQXc2QUE4Z0FVRVFhaUVCSUFOQkVHb2hBeUFsUVg5cUlpVU5BQXNMSUM0Z0ZUb0FBQ0F2SUJZNkFBQWdNQ0FYT2dBQUlERWdHRG9BQUNBeUlCazZBQUFnTXlBYU9nQUFJRFFnR3pvQUFDQTFJQnc2QUFBZ05pQWRPZ0FBSURjZ0hqb0FBQ0E0SUI4NkFBQWdPU0FnT2dBQUlEb2dJVG9BQUNBN0lDSTZBQUFnUENBak9nQUFJRDBnSkRvQUFBdktDZ0VqZnlNRUlRRWpCRUVRYWlRRUlBQkJCR29pRkNnQ0FFRUJUQVJBSUFFa0JBOExJQUVpQWtFRWFpRVZJQUpCQ0dvaEZpQUNRUXhxSVJjZ0FrRUJhaUVZSUFKQkJXb2hHU0FDUVFscUlSb2dBa0VOYWlFYklBSkJBbW9oSENBQ1FRWnFJUjBnQWtFS2FpRWVJQUpCRG1vaEh5QUNRUU5xSVNBZ0FrRUhhaUVoSUFKQkMyb2hJaUFDUVE5cUlTTkJBU0VCQTBBZ0FDQUJRUVIwYWkwQUhDRURJQUFnQVVFRWRHb3RBQjBoQkNBQUlBRkJCSFJxTFFBZUlRVWdBQ0FCUVFSMGFpMEFIeUVHSUFBZ0FVRUVkR290QUNBaEJ5QUFJQUZCQkhScUxRQWhJUWdnQUNBQlFRUjBhaTBBSWlFSklBQWdBVUVFZEdvdEFDTWhDaUFBSUFGQkJIUnFMUUFrSVFzZ0FDQUJRUVIwYWkwQUpTRU1JQUFnQVVFRWRHb3RBQ1loRFNBQUlBRkJCSFJxTFFBbklRNGdBaUFBSUFGQkJIUnFMUUFaSWc5QkFuUkIzUEFEYWl3QUFDQUFRUmhxSUFGQkJIUnFJaE10QUFBaUVFRUNkRUhjK0FOcUxBQUFjeUFBSUFGQkJIUnFMUUFhSWhGQkFuUkIzT2dEYWl3QUFITWdBQ0FCUVFSMGFpMEFHeUlTUVFKMFFkemdBMm9zQUFCek9nQUFJQlVnQkVFQ2RFSGM4QU5xTEFBQUlBTkJBblJCM1BnRGFpd0FBSE1nQlVFQ2RFSGM2QU5xTEFBQWN5QUdRUUowUWR6Z0Eyb3NBQUJ6T2dBQUlCWWdDRUVDZEVIYzhBTnFMQUFBSUFkQkFuUkIzUGdEYWl3QUFITWdDVUVDZEVIYzZBTnFMQUFBY3lBS1FRSjBRZHpnQTJvc0FBQnpPZ0FBSUJjZ0RFRUNkRUhjOEFOcUxBQUFJQXRCQW5SQjNQZ0RhaXdBQUhNZ0RVRUNkRUhjNkFOcUxBQUFjeUFPUVFKMFFkemdBMm9zQUFCek9nQUFJQmdnRDBFQ2RFSGQ4QU5xTEFBQUlCQkJBblJCM2ZnRGFpd0FBSE1nRVVFQ2RFSGQ2QU5xTEFBQWN5QVNRUUowUWQzZ0Eyb3NBQUJ6T2dBQUlCa2dCRUVDZEVIZDhBTnFMQUFBSUFOQkFuUkIzZmdEYWl3QUFITWdCVUVDZEVIZDZBTnFMQUFBY3lBR1FRSjBRZDNnQTJvc0FBQnpPZ0FBSUJvZ0NFRUNkRUhkOEFOcUxBQUFJQWRCQW5SQjNmZ0RhaXdBQUhNZ0NVRUNkRUhkNkFOcUxBQUFjeUFLUVFKMFFkM2dBMm9zQUFCek9nQUFJQnNnREVFQ2RFSGQ4QU5xTEFBQUlBdEJBblJCM2ZnRGFpd0FBSE1nRFVFQ2RFSGQ2QU5xTEFBQWN5QU9RUUowUWQzZ0Eyb3NBQUJ6T2dBQUlCd2dEMEVDZEVIZThBTnFMQUFBSUJCQkFuUkIzdmdEYWl3QUFITWdFVUVDZEVIZTZBTnFMQUFBY3lBU1FRSjBRZDdnQTJvc0FBQnpPZ0FBSUIwZ0JFRUNkRUhlOEFOcUxBQUFJQU5CQW5SQjN2Z0RhaXdBQUhNZ0JVRUNkRUhlNkFOcUxBQUFjeUFHUVFKMFFkN2dBMm9zQUFCek9nQUFJQjRnQ0VFQ2RFSGU4QU5xTEFBQUlBZEJBblJCM3ZnRGFpd0FBSE1nQ1VFQ2RFSGU2QU5xTEFBQWN5QUtRUUowUWQ3Z0Eyb3NBQUJ6T2dBQUlCOGdERUVDZEVIZThBTnFMQUFBSUF0QkFuUkIzdmdEYWl3QUFITWdEVUVDZEVIZTZBTnFMQUFBY3lBT1FRSjBRZDdnQTJvc0FBQnpPZ0FBSUNBZ0QwRUNkRUhmOEFOcUxBQUFJQkJCQW5SQjMvZ0RhaXdBQUhNZ0VVRUNkRUhmNkFOcUxBQUFjeUFTUVFKMFFkL2dBMm9zQUFCek9nQUFJQ0VnQkVFQ2RFSGY4QU5xTEFBQUlBTkJBblJCMy9nRGFpd0FBSE1nQlVFQ2RFSGY2QU5xTEFBQWN5QUdRUUowUWQvZ0Eyb3NBQUJ6T2dBQUlDSWdDRUVDZEVIZjhBTnFMQUFBSUFkQkFuUkIzL2dEYWl3QUFITWdDVUVDZEVIZjZBTnFMQUFBY3lBS1FRSjBRZC9nQTJvc0FBQnpPZ0FBSUNNZ0RFRUNkRUhmOEFOcUxBQUFJQXRCQW5SQjMvZ0RhaXdBQUhNZ0RVRUNkRUhmNkFOcUxBQUFjeUFPUVFKMFFkL2dBMm9zQUFCek9nQUFJQk1nQWlrQUFEY0FBQ0FUSUFJcEFBZzNBQWdnQVVFQmFpSUJJQlFvQWdCSURRQUxJQUlrQkF2ZUNnRWhmeU1FSVFJakJFRWdhaVFFSUFCQkJHb2lEaWdDQUNJRVFYcHFJUXNnQWlBQktRQUFOd0FBSUFJZ0FTa0FDRGNBQ0NBQ0lBRXBBQkEzQUJBZ0FpQUJLUUFZTndBWUlBUkJCa29pQlFSQVFRQWhBUU5BSUFvZ0MwZ2dBVUVFU0hFRVFDQUtJUU1nQVNFR1FRQWhDUU5BSUFCQkdHb2dCMEVFZEdvZ0FTQUpha0VDZEdvZ0FpQUtJQWxxUVFKMGFpZ0FBRFlBQUNBR1FRRnFJUWdnQ1VFQmFpRUpJQU5CQVdvaUF5QUxTQ0FHUVFOSWNRUkFJQWdoQmd3QkJTQUlJUUVnQXlFS0N3c0xJQWNnQVVFRVJpSURhaUVHSUFNRVFFRUFJUUVMSUFvZ0MwNGdCaUFPS0FJQUlnTktjZ1JBSUFFaENpQUdJUUVnQXlFR0JTQUdJUWNNQVFzTEJVRUFJUUVnQkNFR0N5QUJJQVpLQkVBZ0FpUUVEd3NnQWlBRVFYbHFJZ05CQW5ScVFRRnFJUllnQWlBRFFRSjBha0VDYWlFWElBSkJBV29oRHlBQ0lBTkJBblJxUVFOcUlSZ2dBa0VDYWlFUUlBSWdBMEVDZEdvaEdTQUNRUU5xSVJFZ0MwRUlSaUVhSUFSQkIwb2hHeUFDSUF0QkFtMGlERUYvYWlJRFFRSjBhaUVjSUFJZ0RFRUNkR29oRWlBQ0lBTkJBblJxUVFGcUlSMGdBaUFNUVFKMGFrRUJhaUVUSUFJZ0EwRUNkR3BCQW1vaEhpQUNJQXhCQW5ScVFRSnFJUlFnQWlBRFFRSjBha0VEYWlFZklBSWdERUVDZEdwQkEyb2hGU0FFUVJSSUlTQWdERUVCYWlFaElBVkJBWE1oSWdOQUlBSWdBaXdBQUNBV0xRQUFRYjY4QTJvc0FBQnpJZ002QUFBZ0R5QVBMQUFBSUJjdEFBQkJ2cndEYWl3QUFITWlDRG9BQUNBUUlCQXNBQUFnR0MwQUFFRyt2QU5xTEFBQWN5SUpPZ0FBSUJFZ0VTd0FBQ0FaTFFBQVFiNjhBMm9zQUFCeklnYzZBQUFnQWlBRElBMUJ2cjREYWl3QUFITWlCRG9BQUNBYUJFQkJBU0VGSUFnaEF5QUpJUWdnQnlFSklBUWhCd05BSUFJZ0JVRUNkR29pQkN3QUFDQUhjeUVISUFRZ0J6b0FBQ0FDSUFWQkFuUnFRUUZxSWdRc0FBQWdBM01oQXlBRUlBTTZBQUFnQWlBRlFRSjBha0VDYWlJRUxBQUFJQWh6SVFnZ0JDQUlPZ0FBSUFJZ0JVRUNkR3BCQTJvaUJDd0FBQ0FKY3lFSklBUWdDVG9BQUNBRlFRRnFJZ1VnREVnTkFBc2dFaUFTTEFBQUlCd3RBQUJCdnJ3RGFpd0FBSE1pQ0RvQUFDQVRJQk1zQUFBZ0hTMEFBRUcrdkFOcUxBQUFjeUlKT2dBQUlCUWdGQ3dBQUNBZUxRQUFRYjY4QTJvc0FBQnpJZ2M2QUFBZ0ZTQVZMQUFBSUI4dEFBQkJ2cndEYWl3QUFITWlCRG9BQUNBZ0JFQWdJU0VEQTBBZ0FpQURRUUowYWlJRkxBQUFJQWh6SVFnZ0JTQUlPZ0FBSUFJZ0EwRUNkR3BCQVdvaUJTd0FBQ0FKY3lFSklBVWdDVG9BQUNBQ0lBTkJBblJxUVFKcUlnVXNBQUFnQjNNaEJ5QUZJQWM2QUFBZ0FpQURRUUowYWtFRGFpSUZMQUFBSUFSeklRUWdCU0FFT2dBQUlBTkJBV29pQTBFSVJ3MEFDd3NGSUJzRVFFRUJJUVVnQkNFREEwQWdBaUFGUVFKMGFpSUVMQUFBSUFOeklRTWdCQ0FET2dBQUlBSWdCVUVDZEdwQkFXb2lCQ3dBQUNBSWN5RUlJQVFnQ0RvQUFDQUNJQVZCQW5ScVFRSnFJZ1FzQUFBZ0NYTWhDU0FFSUFrNkFBQWdBaUFGUVFKMGFrRURhaUlFTEFBQUlBZHpJUWNnQkNBSE9nQUFJQVZCQVdvaUJTQUxSdzBBQ3dzTElBRWdCa29nSW5KRkJFQWdBU0VESUFvaEFVRUFJUW9EUUNBS0lBdElJQUZCQkVoeEJFQWdBU0VHSUFvaENFRUFJUWNEUUNBQVFSaHFJQU5CQkhScUlBRWdCMnBCQW5ScUlBSWdDaUFIYWtFQ2RHb29BQUEyQUFBZ0JrRUJhaUVKSUFkQkFXb2hCeUFJUVFGcUlnZ2dDMGdnQmtFRFNIRUVRQ0FKSVFZTUFRVWdDU0VCSUFnaENnc0xDeUFESUFGQkJFWWlCbW9oQXlBR0JIOUJBQVVnQVFzaEJpQUtJQXRPSUFNZ0RpZ0NBQ0lJU25JRVFDQURJUUVnQmlFS0lBZ2hCZ1VnQmlFQkRBRUxDd3NnRFVFQmFpRU5JQUVnQmt3TkFBc2dBaVFFQzdVSkFRVi9Jd1FoQXlNRVFZQUdhaVFFSUFOQmdBSnFJUVJCQVNFQUEwQWdCQ0FDYWlBQVFmOEJjU0lCT2dBQUlBUWdBa0gvQVdwcUlBRTZBQUFnQWtFQmFpRUJJQU1nQUdvZ0Fqb0FBQ0FBUVFGMElBQnpJQUJCZ0FGeEJIOUJtd0lGUVFBTGN5SUFRUUZIQkVBZ0FTRUNEQUVMQzBHK3ZnTkJBVG9BQUVHL3ZnTkJBam9BQUVIQXZnTkJCRG9BQUVIQnZnTkJDRG9BQUVIQ3ZnTkJFRG9BQUVIRHZnTkJJRG9BQUVIRXZnTkJ3QUE2QUFCQnhiNERRWUIvT2dBQVFjYStBMEViT2dBQVFjZStBMEUyT2dBQVFjaStBMEhzQURvQUFFSEp2Z05CV0RvQUFFSEt2Z05CcTM4NkFBQkJ5NzREUWMwQU9nQUFRY3krQTBHYWZ6b0FBRUhOdmdOQkx6b0FBRUhPdmdOQjNnQTZBQUJCejc0RFFieC9PZ0FBUWRDK0EwSGpBRG9BQUVIUnZnTkJSam9BQUVIU3ZnTkJsMzg2QUFCQjA3NERRVFU2QUFCQjFMNERRZW9BT2dBQVFkVytBMEZVT2dBQVFkYStBMEd6ZnpvQUFFSFh2Z05CL1FBNkFBQkIyTDREUVhvNkFBQkIyYjREUVc4NkFBQkIycjREUVVVNkFBQkIyNzREUVpGL09nQUFRUUFoQUFOQUlBQkJ2cndEYWlBQVFmOEJjUVIvSUFRZ0F5QUFhaXdBQUVGL2MwSC9BWEZxTFFBQUJVRUFDeUlDUWVNQWN5QUNRUUYwSUFKQkFuUnpJQUpCQTNSeklBSkJCSFJ6SWdKeklBSkJDSFp6T2dBQUlBQkIzTDREYWlBQVFRRjBJQUJCQTNSeklBQkJCblJ6SWdKQkJYTWdBa0VJZG5NaUFrSC9BWEVFZnlBRUlBTWdBa0gvQVhGcUxBQUFRWDl6UWY4QmNXb3RBQUFGUVFBTElnSkIvd0Z4SWdFNkFBQWdBRUVDZEVIZXdBTnFJQUZCL3dGeFFRQkhJZ1VFZnlBRUlBTWdBbW90QUFCQjZBQnFhaTBBQUFWQkFBc2lBVUgvQVhFaUFUb0FBQ0FBUVFKMFFkM0lBMm9nQVRvQUFDQUFRUUowUWR6UUEyb2dBVG9BQUNBQVFRSjBRZC9ZQTJvZ0FUb0FBQ0FDUVFKMFFkN2dBMm9nQVRvQUFDQUNRUUowUWQzb0Eyb2dBVG9BQUNBQ1FRSjBRZHp3QTJvZ0FUb0FBQ0FDUVFKMFFkLzRBMm9nQVRvQUFDQUFRUUowUWR6QUEyb2dCUVIvSUFRZ0F5QUNhaTBBQUVISEFXcHFMUUFBQlVFQUN5SUJRZjhCY1NJQk9nQUFJQUJCQW5SQjM4Z0RhaUFCT2dBQUlBQkJBblJCM3RBRGFpQUJPZ0FBSUFCQkFuUkIzZGdEYWlBQk9nQUFJQUpCQW5SQjNPQURhaUFCT2dBQUlBSkJBblJCMytnRGFpQUJPZ0FBSUFKQkFuUkIzdkFEYWlBQk9nQUFJQUpCQW5SQjNmZ0RhaUFCT2dBQUlBQkJBblJCM2NBRGFpQUZCSDhnQkNBRElBSnFMUUFBUWU0QmFtb3RBQUFGUVFBTElnRkIvd0Z4SWdFNkFBQWdBRUVDZEVIY3lBTnFJQUU2QUFBZ0FFRUNkRUhmMEFOcUlBRTZBQUFnQUVFQ2RFSGUyQU5xSUFFNkFBQWdBa0VDZEVIZDRBTnFJQUU2QUFBZ0FrRUNkRUhjNkFOcUlBRTZBQUFnQWtFQ2RFSGY4QU5xSUFFNkFBQWdBa0VDZEVIZStBTnFJQUU2QUFBZ0FFRUNkRUhmd0FOcUlBVUVmeUFFSUFNZ0Ftb3RBQUJCM3dGcWFpMEFBQVZCQUFzaUFVSC9BWEVpQVRvQUFDQUFRUUowUWQ3SUEyb2dBVG9BQUNBQVFRSjBRZDNRQTJvZ0FUb0FBQ0FBUVFKMFFkellBMm9nQVRvQUFDQUNRUUowUWQvZ0Eyb2dBVG9BQUNBQ1FRSjBRZDdvQTJvZ0FUb0FBQ0FDUVFKMFFkM3dBMm9nQVRvQUFDQUNRUUowUWR6NEEyb2dBVG9BQUNBQVFRRnFJZ0JCZ0FKSERRQUxJQU1rQkFzWkFFRyt2QU1zQUFCRkJFQkJBQkN4QkFzZ0FFRUJPZ0FBQzVRQkFRTi9JQUFzQUlBRVJRUkFJQUZCQURZQ0FBOExJQUVnQUNBQ1FZQUJTUVIvSUFJRlFZQUJDMEVDZEJCVEdpTUVJUUFqQkVFUWFpUUVRUlFnQUJBbElRTWdBQ1FFSUFNaEFDQUNRUUowSWdNRVFDQUFRY3NBYWlFRVFRQWhBQU5BSUFFZ0FHb2lCU0FFSUFCcUlBVXRBQUJ6T2dBQUlBQkJBV29pQUNBRFJ3MEFDd3NnQVNBQ1FYOXFRUUowYWtFQU5nSUFDL2tIQVFWL0l3UWhCaU1FUVJCcUpBUWdBRUVBTmdJRUlBQkJBRFlDQUNBQUtBSU1JQUVnQWtHQWdBSkpCSDhnQWdWQmdJQUNDeEJUR2lBQ1FRRkxCRUJCQVNFRkEwQWdBU0FGYWl3QUFDQUVjeUVFSUFWQkFXb2lCU0FDUncwQUN3c2dCa0VJYWlFSElBQkJDQkJWSUFOQkZHb2lCVUVBTmdJQUFrQWdCRUgvQVhFZ0FTMEFBRVlFUUFKL1FYOGdBU0FDRUprQklnQkJndkhuajM5SUJIOGdBRUhBN2RuRWZFZ0VRQ0FBUVlHMW9KbDhhdzBFSUFKQk9VY05CRUVCREFJTElBQkJ0OFRPbm41SUJIOGdBRUhBN2RuRWZHc05CQ0FDUWZnQVJ3MEVRUUlGSUFCQnQ4VE9ubjVyRFFRZ0FrR1ZBVWNOQkVFRUN3VWdBRUgrc2VpYkJFZ0VRQ0FBUVlMeDU0OS9hdzBFSUFKQkhVY05CRUVEREFJTElBQkIrSzZpbFFWSUJIOGdBRUgrc2VpYkJHc05CQ0FDUWRnQlJ3MEVRUVVGSUFCQitLNmlsUVZyRFFRZ0FrRTFSdzBFUVFBTEN3c2lBRUVNYkVIc0Rtb29BZ0FoQ0NBRFFRUnFJZ0lvQWdCQkFXb2hBQ0FDSUFBMkFnQWdBQ0FEUVFocUlnUW9BZ0FpQVVzRVFDQURLQUlNSWdkQkFFY2dBQ0FIUzNFRVFDQUdJQWMyQWdCQnJQVUNRZGdiSUFZUVlFR3M5UUlRVmlBRUtBSUFJUUVnQWlnQ0FDRUFDeUFES0FJQUlBQWdBVUVnYWlBQlFRSjJhaUlCU3dSL0lBQWlBUVVnQVF0QktHd1FWeUlBUlFSQVFhejFBaEJXQ3lBRElBQTJBZ0FnQkNBQk5nSUFCU0FES0FJQUlRQUxJQVVnQlNnQ0FDSUJRUUZxTmdJQUlBQWdBVUVvYkdwQktEWUNBQ0FBSUFGQktHeHFRUXhxSWdJZ0NEWUNBQ0FBSUFGQktHeHFJQUkyQWhRZ0FDQUJRU2hzYWlBQUlBRkJLR3hxUVJ4cU5nSWtJQUFnQVVFb2JHcEJBellDR0NBQUlBRkJLR3hxUVFNMkFnZ2dCaVFFRHdzTElBTkJCR29pQWlnQ0FFRUJhaUVBSUFJZ0FEWUNBQ0FBSUFOQkNHb2lCQ2dDQUNJQlN3UkFJQU1vQWd3aUNFRUFSeUFBSUFoTGNRUkFJQWNnQ0RZQ0FFR3M5UUpCMkJzZ0J4QmdRYXoxQWhCV0lBUW9BZ0FoQVNBQ0tBSUFJUUFMSUFNb0FnQWdBQ0FCUVNCcUlBRkJBblpxSWdGTEJIOGdBQVVnQVNJQUMwRW9iQkJYSWdKRkJFQkJyUFVDRUZZTElBTWdBallDQUNBRUlBQTJBZ0FGSUFNb0FnQWhBZ3NnQlNBRktBSUFJZ05CQVdvMkFnQWdBaUFEUVNoc2FrRVdOZ0lBSUFJZ0EwRW9iR29nQWlBRFFTaHNha0VNYWpZQ0ZDQUNJQU5CS0d4cUlBSWdBMEVvYkdwQkhHbzJBaVFnQWlBRFFTaHNha0VETmdJWUlBSWdBMEVvYkdwQkF6WUNDQ0FEUVg5S0JFQkJBQ0VBQlNBR0pBUVBDd05BSUFJZ0FFRW9iR3BCRkdvaUFTZ0NBRVVFUUNBQklBSWdBRUVvYkdwQkRHbzJBZ0FMSUFJZ0FFRW9iR3BCSkdvaUFTZ0NBRVVFUUNBQklBSWdBRUVvYkdwQkhHbzJBZ0FMSUFCQkFXb2hBU0FBSUFOSUJFQWdBU0VBREFFTEN5QUdKQVFML1JZQkYzOENRQUpBQWtBQ1FBSkFBa0FnQVVFQmF3NEdBQUFCQXdRQ0JRc2dBQ2dDTENFR0lBQW9BaVFpQkVILy93NUxJQVJCQkVoeUJFQVBDeUFFUVFSTUJFQVBDeUFFUVh4cUlRVWdBRUVRYWlJSEtBSUFJUUFnQVVFQ1JnUi9RZWtCQlVIb0FRc2hDRUVBSVFFRFFDQUFRUUZxSVFRZ0FVRUJhaUVDSUFBc0FBQWlDVUZvUmlBSUlBbEIvd0Z4Um5JRWZ5QUNJQVpxSVFJZ0J5Z0NBQ0lKSUFSTklBbEJnSUFRYWlBRVMzRWlBd1IvSUFBdEFBSkJDSFFnQkMwQUFISWdBQzBBQTBFUWRISWdBQzBBQkVFWWRISUZJQVFvQWdBTElnbEJBRWdFUUNBSklBSnFRWDlLQkVBZ0NVR0FnSUFJYWlFQ0lBTUVRQ0FFSUFJNkFBQWdBQ0FDUVFoMk9nQUNJQUFnQWtFUWRqb0FBeUFBSUFKQkdIWTZBQVFGSUFRZ0FqWUNBQXNMQlNBSlFZQ0FnQWhJQkVBZ0NTQUNheUVDSUFNRVFDQUVJQUk2QUFBZ0FDQUNRUWgyT2dBQ0lBQWdBa0VRZGpvQUF5QUFJQUpCR0hZNkFBUUZJQVFnQWpZQ0FBc0xDeUFCUVFWcUlRRWdBRUVGYWdVZ0FpRUJJQVFMSVFBZ0FTQUZTQTBBQ3c4TElBQW9BaVFpQVVILy93NUxJQUZCRlVoeUJFQVBDeUFCUVJWTUJFQVBDeUFCUVd0cUlRTWdBQ2dDRUNFQklBQW9BaXhCQkhZaEFBTkFJQUVzQUFCQkgzRWlBa0VQU2dSQUlBSkJjR29pQ1VIbkxtb3RBQUFoQWtIUDV3QWdDWFpCQVhFRVFDQUNRUUZ4QkVBZ0FTd0FCVUU4Y1VFVVJnUkFJQUZCQTJvaUJpMEFBRUVJZENBQlFRSnFJZ1V0QUFBaUIzSWdBVUVFYWlJSUxRQUFJZ3BCRUhSeUlBQkJBblJySWd0Qi9QLy9BWEVoQ1NBRklBa2dCMEVEY1hJNkFBQWdCaUFMUVFoMk9nQUFJQWdnQ1VFUWRpQUtRY0FCY1hJNkFBQUxDeUFDUVFKeEJFQWdBU3dBQ2tINEFIRkJLRVlFUUNBQlFRaHFJZ1l0QUFCQkNIUWdBVUVIYWlJRkxRQUFJZ2R5SUFGQkNXb2lDQzBBQUNJS1FSQjBjaUFBUVFOMGF5SUxRZmovL3dOeElRa2dCU0FKSUFkQkIzRnlPZ0FBSUFZZ0MwRUlkam9BQUNBSUlBbEJFSFlnQ2tHQUFYRnlPZ0FBQ3dzZ0FrRUVjUVJBSUFFc0FBOUI4QUZ4UWRBQVJnUkFJQUZCRFdvaUNTMEFBRUVJZENBQlFReHFJZ1l0QUFBaUJYSWdBVUVPYWlJSExRQUFRUkIwY2lBQVFRUjBheUVDSUFZZ0FrSHdBWEVnQlVFUGNYSTZBQUFnQ1NBQ1FRaDJPZ0FBSUFjZ0FrRVFkam9BQUFzTEN3c2dBVUVRYWlFQklBQkJBV29oQUNBRVFSQnFJZ1FnQTBnTkFBc1BDeUFBS0FJVUlRWWdBRUVRYWlJSEtBSUFJZ0ZCb0lBUGFpQUFLQUlrSWdNNkFBQWdBVUdoZ0E5cUlBTkJDSFk2QUFBZ0FVR2lnQTlxSUFOQkVIWTZBQUFnQVVHamdBOXFJQU5CR0hZNkFBQWdBMEdBd0FkSklBWkJBRXB4QkVCQkFDRUFCUThMSUFOQkFYUWhCUU5BSUFJZ0Eyb2lBU0FGU0FSQVFRQWhDUU5BSUFCQkFXb2hCQ0FKUWY4QmNTQUhLQUlBSWdnZ0FHb3RBQUJySVFrZ0NDQUJhaUFKT2dBQUlBRWdCbW9pQVNBRlNBUkFJQVFoQUF3QkJTQUVJUUFMQ3dzZ0FrRUJhaUlDSUFaSERRQUxEd3NnQUNnQ0ZFRjlhaUVLSUFBb0FoZ2hDU0FBS0FJUUlnRkJvSUFQYWlBQUtBSWtJZ2M2QUFBZ0FVR2hnQTlxSUFkQkNIWTZBQUFnQVVHaWdBOXFJQWRCRUhZNkFBQWdBVUdqZ0E5cUlBZEJHSFk2QUFBZ0IwSC92d2RMSUFvZ0NYSkJBRWh5QkVBUEN5QUJJQWRxSVFnZ0IwRUFTZ1JBUVFBaEFBTkFJQUlnQ21zaUJFRUNTZ1JBUVFBZ0FDQUlJQVJxSWdRdEFBQWlDMm9nQkVGOWFpMEFBQ0lFYXlJRklBQnJJZ05ySVE1QkFDQUZJQXRySWdacklROUJBQ0FGSUFScklnVnJJUXdnQTBGL1NnUi9JQU1GSUE0aUF3c2dCa0YvU2dSL0lBWUZJQThpQmd0S0lBTWdCVUYvU2dSL0lBVUZJQXdpQlF0S2NpRURJQVlnQlV3RVFDQUxJUVFMSUFNRVFDQUVJUUFMQ3lBQlFRRnFJUVFnQUNBQkxRQUFheUlCUWY4QmNTRUFJQWdnQW1vZ0FUb0FBQ0FDUVFOcUlnSWdCMGdFUUNBRUlRRU1BUXNMSUFkQkFVb0VRRUVBSVFCQkFTRUNJQVFoQVFOQUlBSWdDbXNpQkVFQ1NnUkFRUUFnQUNBSUlBUnFJZ1F0QUFBaUMyb2dCRUY5YWkwQUFDSUVheUlGSUFCcklnTnJJUTVCQUNBRklBdHJJZ1pySVE5QkFDQUZJQVJySWdWcklRd2dBMEYvU2dSL0lBTUZJQTRpQXdzZ0JrRi9TZ1IvSUFZRklBOGlCZ3RLSUFNZ0JVRi9TZ1IvSUFVRklBd2lCUXRLY2lFRElBWWdCVXdFUUNBTElRUUxJQU1FUUNBRUlRQUxDeUFCUVFGcUlRUWdBQ0FCTFFBQWF5SUJRZjhCY1NFQUlBZ2dBbW9nQVRvQUFDQUNRUU5xSWdJZ0IwZ0VRQ0FFSVFFTUFRc0xJQWRCQWtvRVFFRUFJUUJCQWlFQ0lBUWhBUU5BSUFJZ0Ntc2lCRUVDU2dSQVFRQWdBQ0FJSUFScUlnUXRBQUFpQzJvZ0JFRjlhaTBBQUNJRWF5SUZJQUJySWdOcklRNUJBQ0FGSUF0cklnWnJJUTlCQUNBRklBUnJJZ1ZySVF3Z0EwRi9TZ1IvSUFNRklBNGlBd3NnQmtGL1NnUi9JQVlGSUE4aUJndEtJQU1nQlVGL1NnUi9JQVVGSUF3aUJRdEtjaUVESUFZZ0JVd0VRQ0FMSVFRTElBTUVRQ0FFSVFBTEN5QUJRUUZxSVFRZ0FDQUJMUUFBYXlJQlFmOEJjU0VBSUFnZ0Ftb2dBVG9BQUNBQ1FRTnFJZ0lnQjBnRVFDQUVJUUVNQVFzTEN3c0xJQWtnQjBGK2FpSUJTQVJBSUFraEFBVVBDd05BSUFnZ0FHb2lCQ0FFTFFBQUlBZ2dBRUVCYW1vdEFBQWlCR282QUFBZ0NDQUFRUUpxYWlJQ0lBSXRBQUFnQkdvNkFBQWdBRUVEYWlJQUlBRklEUUFMRHdzZ0FDZ0NGQ0VUSUFBb0FoQWlBa0dnZ0E5cUlBQW9BaVFpRURvQUFDQUNRYUdBRDJvZ0VFRUlkam9BQUNBQ1FhS0FEMm9nRUVFUWRqb0FBQ0FDUWFPQUQyb2dFRUVZZGpvQUFDQVFRWURBQjBrZ0UwRUFTbkZGQkVBUEN5QUNJQkJxSVJnRFFDQU9JQkJJQkVCQkFDRVVJQTRoRDBFQUlRQkJBQ0VCUVFBaEJFRUFJUkpCQUNFRFFRQWhDVUVBSVJFZ0FpRU1RUUFoQzBFQUlRcEJBQ0VJUVFBaEIwRUFJUVZCQUNFR1FRQWhGZ05BSUF4QkFXb2hGeUFZSUE5cUlBUWdDV3dnRVVFRGRHb2dBU0FKSUFOckloVnNhaUFBSUJKc2FrRURka0gvQVhFZ0RDd0FBQ0lEUWY4QmNXc2lERG9BQUNBTUlCRnJRUmgwUVJoMUlSRkJBQ0FEUVFOMElnSnJJUTBnQTBGL1NnUi9JQUlGSUEwTElBdHFJUXRCQUNBQ0lBbHJJZ05ySVEwZ0EwRi9TZ1IvSUFNRklBMExJQXBxSVFwQkFDQUNJQWxxSWdOcklRMGdDQ0FEUVg5S0JIOGdBd1VnRFF0cUlRaEJBQ0FDSUJWcklnTnJJUTBnQnlBRFFYOUtCSDhnQXdVZ0RRdHFJUWRCQUNBQ0lCVnFJZ05ySVEwZ0JTQURRWDlLQkg4Z0F3VWdEUXRxSVFWQkFDQUNJQkpySWdOcklRMGdCaUFEUVg5S0JIOGdBd1VnRFF0cUlRWkJBQ0FDSUJKcUlnSnJJUU1nRmlBQ1FYOUtCSDhnQWdVZ0F3dHFJUU1DUUNBVVFSOXhSUVJBSUFNZ0JpQUZJQWNnQ0NBS0lBdEpJZ0lFZnlBS0JTQUxJZ29MU1NJREJIOGdDQVVnQ2lJSUMwa2lDZ1IvSUFjRklBZ2lCd3RKSWdnRWZ5QUZCU0FISWdVTFNTSUhCSDhnQmdVZ0JRdEpJUVlnQXdSQVFRSWhBZ3NnQ2dSQVFRTWhBZ3NnQ0FSQVFRUWhBZ3NnQndSQVFRVWhBZ3NDUUFKQUFrQUNRQUpBQWtBQ1FDQUdCSDlCQmdVZ0FndEJCM0ZCQVdzT0JnQUJBZ01FQlFZTElBUWdCRUZ2U2tFZmRFRWZkV29oQkVFQUlRTkJBQ0VHUVFBaEJVRUFJUWRCQUNFSVFRQWhDa0VBSVFzTUJ3c2dCQ0FFUVJCSWFpRUVRUUFoQTBFQUlRWkJBQ0VGUVFBaEIwRUFJUWhCQUNFS1FRQWhDd3dHQ3lBQklBRkJiMHBCSDNSQkgzVnFJUUZCQUNFRFFRQWhCa0VBSVFWQkFDRUhRUUFoQ0VFQUlRcEJBQ0VMREFVTElBRWdBVUVRU0dvaEFVRUFJUU5CQUNFR1FRQWhCVUVBSVFkQkFDRUlRUUFoQ2tFQUlRc01CQXNnQUNBQVFXOUtRUjkwUVI5MWFpRUFRUUFoQTBFQUlRWkJBQ0VGUVFBaEIwRUFJUWhCQUNFS1FRQWhDd3dEQ3lBQUlBQkJFRWhxSVFCQkFDRURRUUFoQmtFQUlRVkJBQ0VIUVFBaENFRUFJUXBCQUNFTERBSUxRUUFoQTBFQUlRWkJBQ0VGUVFBaEIwRUFJUWhCQUNFS1FRQWhDd3NMSUJSQkFXb2hGQ0FQSUJOcUlnOGdFRWdFUUNBSklRSWdGU0VTSUJFaENTQU1JUkVnRnlFTUlBTWhGaUFDSVFNTUFRVWdGeUVDQ3dzTElBNUJBV29pRGlBVFJ3MEFDd3NMRUFBZ0FFRUJFT1FCSUFCQkFEWUNFQXRmQUNNRUlRQWpCRUhRQUdva0JDQUFRUUEyQWtRZ0FFRWZOZ0pJSUFBZ0FUWUNBQ0FBUVVCclFRSTJBZ0FnQUNBQ05nSUVRYXoxQWlnQ0FFRUNTUVJBUWF6MUFrRUNOZ0lBQzBHdzlRSkJzUFVDS0FJQVFRRnFOZ0lBSUFBa0JBdFRBUUYvSXdRaEFpTUVRZEFBYWlRRUlBSkJBRFlDUkNBQ1FRZzJBa2dnQWtFQU5nSUFJQUpCUUd0QkFqWUNBQ0FDSUFFMkFnUWdBRUVHTmdJQUlBQkJCR29pQUNBQUtBSUFRUUZxTmdJQUlBSWtCQXN2QUNBQVFRVTJBZ0FnQUVFRWFpSUFJQUFvQWdCQkFXbzJBZ0JCQkJBVUlnQkJCVFlDQUNBQVFZQUlRUUFRR3dzNkFDQUFLQUlBUVFKSkJFQWdBRUVDTmdJQUN5QUFRUVJxSWdBZ0FDZ0NBRUVCYWpZQ0FFRUVFQlFpQUVFQ05nSUFJQUJCZ0FoQkFCQWJDNVVCQUNBQVFRQkJ3TXNFRUZRYUlBQkJnSUNBRURZQ0RDQUFRYmlFQTJwQkFEWUNBQ0FBUWJ5RUEycEJBellDQUNBQVFiQ0VBMnBCQURZQ0FDQUFRWXlGQTJwQkFEWUNBQ0FBUVpUTEEycEJCRFlDQUNBQVFiaUpBMnBDLy8vLy8vZi8vLy8vQURjREFDQUFRY0NKQTJwQy8vLy8vL2YvLy8vL0FEY0RBQ0FBUWNDRUEycEJBallDQUNBQVFaQ0FBV3BCQVRZQ0FBc1hBQ0FBUVFFNkFBd2dBQ0FCTmdJVUlBQWdBallDRUF1ZEFRRUVmeUFBUVFocUlRUWdBUVJBSUFRb0FnQWlBd1JBQTBBZ0F5Z0NFQ0VGSUFNb0FnQWlCZ1JBSUFZUVVnc2dBeEJTSUFVRVFDQUZJUU1NQVFzTEN3c2dBQ0FCTmdJQUlBQWdBa0VCY1RvQUJDQUVRUUEyQWdBZ0FFRUFOZ0lNSUFCQkVHb2lBU2dDQUFSQUlBQkJBRFlDRkNBQVFlZ3hha0VBT2dBQUR3c2dBVUdBZ0FRUVh6WUNBQ0FBUVFBMkFoUWdBRUhvTVdwQkFEb0FBQXNTQUNBQVFRRTZBTFVCSUFBb0FrUVF5QUlMVFFBZ0FRUkFJQUFnQUVGQWF5Z0NBRUVCSUFJZ0F5QUVJQVVnQmlBSElBZ1F1UUZCQVhFNkFMUUJCU0FBSUFBb0FrUkJBQ0FDSUFNZ0JDQUZJQVlnQnlBSUVMa0JRUUZ4T2dDMUFRc0xGZ0FnQVNBQUtBSWNOZ0lBSUFJZ0FDZ0NHRFlDQUFzaEFDQUJCRUFnQUNBQk5nSXNDeUFDQkVBZ0FDQUNOZ0l3Q3lBQVFYODJBa2dMd1FFQkFYOGdBRUVBT2dBQUlBQkJBRG9BRENBQVFnQTNBeUFnQUVFQk9nQW9JQUJCQURvQUtTQUFRUUE2QUNvZ0FFRUFPZ0JRSUFCQkFEb0FVU0FBUVFBNkFGSWdBRUVBTmdJc0lBQkJBRFlDTUNBQVFRQTJBaGdnQUVFQU5nSTBJQUJCQURvQXRBRWdBRUVBT2dDMUFTQUFRZUFBYWlJQlFnQTNBd0FnQVVJQU53TUlJQUZDQURjREVDQUJRZ0EzQXhnZ0FFRi9OZ0pJSUFCQkFEWUNPQ0FBUVFBMkFqd2dBRUVBTmdKTUlBQkJnQUZxSWdCQ0FEY0RBQ0FBUWdBM0F3Z0xOQUVCZnlNRUlRRWpCRUVRYWlRRUlBRVFTeG9nQUNBQktBSUFyRUtBcmVJRWZrS0FnUHFwN2J2c3pnRjhOd01BSUFFa0JBdVBBUUVFZnlBQVFSaHFJZ0lRdlFJZ0FFR1lNbW9pQVVJQU53SUFJQUZDQURjQ0NDQUFRUkJxSWdGQkFEWUNBQ0FBUVFBMkFnQWdBRUVBT2dBRUlBQkJBRFlDQ0NBQVFRQTJBZ3hCQUNRRlFRZEJnSUFFRUFVaEF5TUZJUVJCQUNRRklBUkJBWEVFUUJBWElRQWdBaENPQVNBQUVCNEZJQUVnQXpZQ0FDQUFRUUEyQWhRZ0FFSG9NV3BCQURvQUFBc0xod0VCQVg4akJDRUNJd1JCTUdva0JDQUNJQUZCQVhSQlBuRTJBZ0FnQWlBQlFRVjJRVDl4TmdJRUlBSWdBVUVMZGtFZmNUWUNDQ0FDSUFGQkVIWkJIM0UyQWd3Z0FpQUJRUlYyUVE5eFFYOXFOZ0lRSUFJZ0FVRVpka0hRQUdvMkFoUWdBa0YvTmdJZ0lBQWdBaEJHckVLQXJlSUVma0tBZ1BxcDdidnN6Z0Y4TndNQUlBSWtCQXQ0QVFGL0l3UWhBU01FUVJCcUpBUWdBU0FBS1FNQVFvQ0FodGFTeEpPeGZueENnSzNpQklBK0FnQWdBUkJGSWdBb0FneEJFSFFnQUNnQ0ZFRVpkRUdBZ0lDQUJtcHlJQUFvQWhCQkZYUkJnSUNBQVdweUlBQW9BZ2hCQzNSeUlBQW9BZ1JCQlhSeUlBQW9BZ0JCQVhaeUlRQWdBU1FFSUFBTGZ3RUJmeU1FSVFJakJFRXdhaVFFSUFJZ0FTZ0NGRFlDQUNBQ0lBRW9BaEEyQWdRZ0FpQUJLQUlNTmdJSUlBSWdBU2dDQ0RZQ0RDQUNJQUVvQWdSQmYybzJBaEFnQWlBQktBSUFRWlJ4YWpZQ0ZDQUNRWDgyQWlBZ0FDQUNFRWFzUW9DdDRnUitRb0NBK3FudHUrek9BWHdnQVNnQ0dLMThOd01BSUFJa0JBdVpBUUVDZnlNRUlRTWpCRUVRYWlRRUlBTWdBQ2tEQUVLQWdJYldrc1NUc1g1OFFvQ3Q0Z1NBUGdJQUlBRWdBeEJGSWdJb0FoUkI3QTVxTmdJQUlBRWdBaWdDRUVFQmFqWUNCQ0FCSUFJb0FndzJBZ2dnQVNBQ0tBSUlOZ0lNSUFFZ0FpZ0NCRFlDRUNBQklBSW9BZ0EyQWhRZ0FTQUFLUU1BUW9DdDRnU0NQZ0lZSUFFZ0FpZ0NHRFlDSENBQklBSW9BaHcyQWlBZ0F5UUVDeDBBSUFBZ0FheENnSzNpQkg1Q2dJRDZxZTI3N000QmZEY0RBQ0FBQytvRUFRbC9JQVZCQUVjaUJpQURRUUZMY1VVRVFFRUFJUUVnQlVGL2FpRUNJQVFnQmdSL1FRQUZJQUlMUVFKMGFrRUFOZ0lBRHdzZ0FFRUVhaUVLSUFJdEFBQkJDSFFoREVFQklRWWdBRUVJYWlJTktBSUFJUUFDUUFOQUlBQUVmeUFLTEFBQUlRc2dBQVVnQ2lBQ0lBWnFMQUFBSWdBNkFBQWdEVUVJTmdJQUlBWkJBV29oQmlBQUlRdEJDQXNoRGdKQUFrQUNRQUpBQWtBQ1FDQUxRZjhCY1VFR2RnNEVBQUVDQXdRTElBUWdCMEVDZEdvZ0FpQUdhaTBBQURZQ0FDQUdRUUZxSVFZZ0IwRUJhaUVBREFRTElBUWdCMEVDZEdvZ0RDQUNJQVpxTFFBQWNqWUNBQ0FHUVFGcUlRWWdCMEVCYWlFQURBTUxJQVFnQjBFQ2RHb2dBaUFHUVFGcWFpMEFBRUVJZENBQ0lBWnFMUUFBY2pZQ0FDQUdRUUpxSVFZZ0IwRUJhaUVBREFJTElBWkJBV29oQ0NBQ0lBWnFMUUFBSWdCQmdBRnhCRUFnQmtFQ2FpRUdJQWNnQlU4RVFDQUhJUUFNQXdzZ0FpQUlhaTBBQUNFSklBQkIvd0J4UVFKcUlRZ2dCeUVBQTBBZ0JDQUFRUUowYWlBQklBQnFMUUFBSUFscVFmOEJjU0FNY2pZQ0FDQUlRWDlxSVFjZ0FFRUJhaUlBSUFWSklBaEJBVXB4QkVBZ0J5RUlEQUVMQ3dVZ0J5QUZUd1JBSUFnaEJpQUhJUUFNQXdzZ0FFRUNhaUVKSUFjaEFBTkFJQVFnQUVFQ2RHb2dBU0FBYWl3QUFEWUNBQ0FKUVg5cUlRWWdBRUVCYWlJQUlBVkpJQWxCQVVweEJFQWdCaUVKREFFRklBZ2hCZ3NMQ3d3QkN3d0NDeUFLSUF0Qi93RnhRUUowT2dBQUlBMGdEa0YrYWlJSU5nSUFJQUFnQlVraUJ5QUdJQU5KY1FSQUlBQWhCeUFJSVFBTUFRVWdBQ0VCSUFjaEFBc0xJQVZCZjJvaEFpQUVJQUFFZnlBQkJTQUNDMEVDZEdwQkFEWUNBQXNMSGdBZ0FFRUFPZ0FFSUFCQkFEWUNDQ0FBUVFBMkFnd2dBRUVBTmdJUUMwVUJBbjhnQUVFVWFpSUNLQUlBUVFOSkJFQkJBQThMSUFCQkdHb2hBMEYvSUFBb0FnQkJBbW9nQVFSL0lBTUZJQUlMS0FJQVFYNXFFSmtCUWYvL0EzRkIvLzhEY3d0SUFRTi9JQUJCR0dvaUFpZ0NBQ0lCUVFGcUlnTWdBQ2dDRkU4RVFFRUFEd3NnQUNnQ0FDSUFJQU5xTFFBQVFRaDBJQUFnQVdvdEFBQnlJUUFnQWlBQlFRSnFOZ0lBSUFBTHdRUUJDbjhqQkNFREl3UkJFR29rQkNBRFFRaHFJUVVnQUVFY2FpSUxLQUlBUlFSQUlBRkZCRUFnQXlRRVFRQVBDeUFBUVFScUlnWW9BZ0FnQVdvaEFpQUdJQUkyQWdBZ0FpQUFRUWhxSWdjb0FnQWlCRXNFUUNBQUtBSU1JZ2hCQUVjZ0FpQUlTM0VFUUNBRklBZzJBZ0JCclBVQ1FkZ2JJQVVRWUVHczlRSVFWaUFIS0FJQUlRUWdCaWdDQUNFQ0N5QUFLQUlBSUFJZ0JFRWdhaUFFUVFKMmFpSUVTd1IvSUFJaUJBVWdCQXNRVnlJQ1JRUkFRYXoxQWhCV0N5QUFJQUkyQWdBZ0J5QUVOZ0lBQlNBQUtBSUFJUUlMSUFBb0FoQWlCQ0FDSUFCQkZHb2lBQ2dDQUdvZ0FTQUVLQUlBS0FJTVFSOXhRY29BYWhFQkFDRUJJQUFnQUNnQ0FDQUJhallDQUNBREpBUWdBUThMSUFNaEJDQUFRUVJxSWdZb0FnQWlCU0FBUVJScUlnY29BZ0FpQW1zaUF5QUJTUVIvSUFaQkFDQUJJQU5ySWdKclFROXhJQUpxSWdnZ0JXb2lBallDQUNBQ0lBQkJDR29pQ1NnQ0FDSURTd1JBSUFBb0Fnd2lDa0VBUnlBQ0lBcExjUVJBSUFRZ0NqWUNBRUdzOVFKQjJCc2dCQkJnUWF6MUFoQldJQWtvQWdBaEF5QUdLQUlBSVFJTElBQW9BZ0FnQWlBRFFTQnFJQU5CQW5acUlnTkxCSDhnQWdVZ0F5SUNDeEJYSWdORkJFQkJyUFVDRUZZTElBQWdBellDQUNBSklBSTJBZ0FGSUFBb0FnQWhBd3NnQUNFQ0lBQW9BaEFpQUNBRElBVnFJQWdnQUNnQ0FDZ0NERUVmY1VIS0FHb1JBUUFoQUNBTEtBSUFJQUlvQWdBZ0JXb2dDQkRxQVNBSEtBSUFJQUFFZnlBQkJVRUFDMm9GSUFJZ0FTSUFhZ3NoQVNBSElBRTJBZ0FnQkNRRUlBQUxFUUFnQUNBQklBSWdBMEVBUVFBUXVRSUxRd0VCZnlBQ1JRUkFJQUFQQ3dOQUlBRWdBMm90QUFBZ0FFSC8vd054YWlJQVFROTJRUUZ4SUFCQkFYUnlRZi8vQTNFaEFDQURRUUZxSWdNZ0FrY05BQXNnQUF2RkJBRURmMEhBOVFJb0FnQUVRRUVBSVFBRlFRQWhBQU5BSUFCQkFYWWlBa0dnaHVMdGZuTWhBU0FBUVFGeEJIOGdBUVVnQWlJQkMwRUJkaUlEUWFDRzR1MStjeUVDSUFGQkFYRUVmeUFDQlNBRElnSUxRUUYySWdOQm9JYmk3WDV6SVFFZ0FrRUJjUVIvSUFFRklBTWlBUXRCQVhZaUEwR2dodUx0Zm5NaEFpQUJRUUZ4Qkg4Z0FnVWdBeUlDQzBFQmRpSURRYUNHNHUxK2N5RUJJQUpCQVhFRWZ5QUJCU0FESWdFTFFRRjJJZ05Cb0liaTdYNXpJUUlnQVVFQmNRUi9JQUlGSUFNaUFndEJBWFlpQTBHZ2h1THRmbk1oQVNBQ1FRRnhCSDhnQVFVZ0F5SUJDMEVCZGlJQ1FhQ0c0dTErY3lFRElBQkJBblJCdlBVQ2FpQUJRUUZ4Qkg4Z0F3VWdBZ3MyQWdBZ0FFRUJhaUlBUVlBQ1J3MEFRUUFoQUFzTEEwQWdBRUVDZEVHOC9RSnFJQUJCQW5SQnZQVUNhaWdDQUNJQlFmOEJjVUVDZEVHODlRSnFLQUlBSUFGQkNIWnpJZ0UyQWdBZ0FFRUNkRUc4aFFOcUlBRkIvd0Z4UVFKMFFiejFBbW9vQWdBZ0FVRUlkbk1pQVRZQ0FDQUFRUUowUWJ5TkEyb2dBVUgvQVhGQkFuUkJ2UFVDYWlnQ0FDQUJRUWgyY3lJQk5nSUFJQUJCQW5SQnZKVURhaUFCUWY4QmNVRUNkRUc4OVFKcUtBSUFJQUZCQ0haeklnRTJBZ0FnQUVFQ2RFRzhuUU5xSUFGQi93RnhRUUowUWJ6MUFtb29BZ0FnQVVFSWRuTWlBVFlDQUNBQVFRSjBRYnlsQTJvZ0FVSC9BWEZCQW5SQnZQVUNhaWdDQUNBQlFRaDJjeUlCTmdJQUlBQkJBblJCdkswRGFpQUJRZjhCY1VFQ2RFRzg5UUpxS0FJQUlBRkJDSFp6TmdJQUlBQkJBV29pQUVHQUFrY05BQXNMQ1FCQnZid0RFTkVFQ3hzQkFYOGpCQ0VCSXdRZ0FHb2tCQ01FUVE5cVFYQnhKQVFnQVFzTG1tTmVBRUdBQ0F2bEJUZ1RBQUJVRmdBQW5CSUFBRjRXQUFDUUJBQUFBQUFBQUhRU0FBQ1lHZ0FBSEJNQUFJb2FBQUFBQUFBQUdBUUFBQndUQUFCN0dnQUFBUUFBQUJnRUFBQjBFZ0FBVmhvQUFGUVRBQUFYR2dBQUFBQUFBQUVBQUFDSUJBQUFBQUFBQUhRU0FBQU1HZ0FBVkJNQUFLY1pBQUFBQUFBQUFRQUFBSWdFQUFBQUFBQUFkQklBQUpjWkFBQjBFZ0FBNWhrQUFIUVNBQUN4R2dBQVZCTUFBRnNmQUFBQUFBQUFBUUFBQUlnRUFBQUFBQUFBZEJJQUFFZ2ZBQUIwRWdBQUtSOEFBSFFTQUFBS0h3QUFkQklBQU9zZUFBQjBFZ0FBekI0QUFIUVNBQUN0SGdBQWRCSUFBSTRlQUFCMEVnQUFieDRBQUhRU0FBQlFIZ0FBZEJJQUFERWVBQUIwRWdBQUVoNEFBSFFTQUFEekhRQUFkQklBQU5RZEFBQjBFZ0FBSVRnQUFKd1NBQUNCT0FBQU1BVUFBQUFBQUFDY0VnQUFMamdBQUVBRkFBQUFBQUFBZEJJQUFFODRBQUNjRWdBQVhEZ0FBQ0FGQUFBQUFBQUFuQklBQUtRNUFBQVlCUUFBQUFBQUFKd1NBQUN4T1FBQUdBVUFBQUFBQUFDY0VnQUF3VGtBQUdnRkFBQUFBQUFBbkJJQUFQWTVBQUF3QlFBQUFBQUFBSndTQUFEU09RQUFpQVVBQUFBQUFBQ2NFZ0FBR0RvQUFEQUZBQUFBQUFBQUFCTUFBRUE2QUFBQUV3QUFRam9BQUFBVEFBQkZPZ0FBQUJNQUFFYzZBQUFBRXdBQVNUb0FBQUFUQUFCTE9nQUFBQk1BQUUwNkFBQUFFd0FBVHpvQUFBQVRBQUJST2dBQUFCTUFBRk02QUFBQUV3QUFWVG9BQUFBVEFBQlhPZ0FBQUJNQUFGazZBQUFBRXdBQVd6b0FBSndTQUFCZE9nQUFNQVVBQUFBQUFBQ2NFZ0FBZmpvQUFDQUZBQUFBQUFBQVdBQUFBQUFBQUFCVUFBQUFBQUFBQUZFQUFBQlBBQUFBQUFBQUFDNEFBQUFBQUFBQWN3QUFBR1lBQUFCNEFBQUFBQUFBQUM4QUFBQUFBQUFBTGdBQUFISUFBQUJoQUFBQWNnQUFBQUFBQUFCbEFBQUFlQUFBQUdVQUFBQUFBQUFBY2dBQUFHRUFBQUJ5QUFBQUFBQUFBREFBQUFBd0FBQUFBQUFBQUQ4QUFBQXFBQUFBUEFBQUFENEFBQUI4QUFBQUlnQUFBQUFBQUFBL0FBQUFLZ0JCOEEwTGhRVUlCQUFBQVFBQUFBSUFBQUFCQUFBQUFnQUFBQUVBQUFBQkFBQUFRd0FBQUUwQUFBQlVBQUFBQUFBQUFEc0FBQUFsQUFBQWRRQUFBQUFBQUFCU0FBQUFVZ0FBQUFBQUFBRC8vLy8vWHdBQUFGOEFBQUJ5QUFBQVlRQUFBSElBQUFCZkFBQUFBQUFBQUNvQUFBQS9BQUFBQUFBQUFEVUFBQUNIYUZldEFRQUFBRGtBQUFCKzVkYzhBZ0FBQUhnQUFBQS9pV2szQXdBQUFCMEFBQUI5QndZT0JnQUFBSlVBQUFESVhTd2NCQUFBQU5nQUFBQUI1NFc4QlFBQUFKZ3Zpa0tSUkRkeHovdkF0YVhidGVsYndsWTU4Ukh4V2FTQ1A1TFZYaHlybUtvSDJBRmJneEsraFRFa3czME1WWFJkdm5MK3NkNkFwd2JjbTNUeG04SEJhWnZraGtlKzc4YWR3US9Nb1F3a2J5enBMYXFFZEVyY3FiQmMyb2o1ZGxKUlBwaHR4akdveUNjRHNNZC9XYi96QytER1I1R24xVkZqeWdabktTa1VoUXEzSnpnaEd5NzhiU3hORXcwNFUxUnpDbVc3Q21wMkxzbkNnWVVzY3BLaDZMK2lTMllhcUhDTFM4S2pVV3pIR2VpUzBTUUdtZGFGTlE3MGNLQnFFQmJCcEJrSWJEY2VUSGRJSjdXOHNEU3pEQnc1U3FyWVRrL0tuRnZ6Ynk1bzdvS1BkRzlqcFhnVWVNaUVDQUxIalByL3ZwRHJiRkNrOTZQNXZ2SjRjY1puNWdscWhhNW51M0x6Ymp3NjlVK2xmMUlPVVl4b0JadXIyWU1mR2MzZ1cxVUFBQUJQQUFBQVZ3QUFBQUFBQUFBZ0FBQUFBQUFBQUFnQUFBQUlBQUFBQ0FBQUFBZ0FBQUFJQUFBQUlBQUFBQUFBQUFBZ0FBQUFJQUFBQUQ4QUFBQUFBQUFBSlFBQUFITUFBQUFsQUFBQWN3QUFBQ0FBQUFBQUFBQUFDQUFBQUFnQUFBQUlBQUFBQ0FBQUFBZ0FBQUFnQUFBQUlBQUFBQ0FBQUFBZ0FBQUFJQUFBQUFBQUFBQWdBQUFBSlFBQUFITUFBQUFBQUFBQUlBQUFBQ0FBQUFBZ0FBQUFJQUFBQUNBQVFZQVRDM0dnQUFBQTBBQUFBT0FBQUFEd0FBQUErQUFBQVB3QUFBRCtBQUFBL3dBQUFNQUFBQUNBQUFBQWtBQUFBSmdBQUFDY0FBQUFzQUFBQUFFQUFBQURBQUFBQkFBQUFBUUFBQUFGQUFBQUJnQUFBQWNBQUFBSUFBQUFDQUFBQUFRQUFBQUVBQUFBQlFBQUFBWUFBQUFHQUFBQUJBQkIvQk1MY1VBQUFBQmdBQUFBb0FBQUFOQUFBQURnQUFBQThBQUFBUGdBQUFEOEFBQUF3QUFBQUlBQUFBQ1FBQUFBbUFBQUFKd0FBQUN3QUFBQUFnQUFBQU1BQUFBREFBQUFBd0FBQUFRQUFBQUVBQUFBQlFBQUFBWUFBQUFHQUFBQUJBQUFBQVFBQUFBRkFBQUFCZ0FBQUFZQUFBQUVBRUgxRkFzbG9BQUFBTUFBQUFEUUFBQUE0QUFBQU9vQUFBRHVBQUFBOEFBQUFQSUFBRUR5QUFELy93QkJyQlVMVGdVQUFBQUhBQUFBQ1FBQUFBMEFBQUFTQUFBQUZnQUFBQm9BQUFBaUFBQUFKQUFBQUFDQUFBQUFvQUFBQU1BQUFBRFFBQUFBNEFBQUFPb0FBQUR1QUFBQThBQUFBUElBQUFEeUFBRC8vd0JCaUJZTFJnSUFBQUFEQUFBQUJRQUFBQWNBQUFBTEFBQUFFQUFBQUJRQUFBQVlBQUFBSUFBQUFDQUFBQUFBRUFBQUFDUUFBQUNBQUFBQXdBQUFBUG9BQVAvL0FBRC8vd0FBLy84QVFlZ1dDeEVDQUFBQUJ3QUFBRFVBQUFCMUFBQUE2UUJCaFJjTEhTQUFBQURBQUFBQTRBQUFBUEFBQUFEeUFBQUE4Z0FBNFBjQUFQLy9BRUc4RndzK0JBQUFBQ3dBQUFBOEFBQUFUQUFBQUZBQUFBQlFBQUFBZndBQUFBQ0FBQUFBd0FBQUFPQUFBQUR5QUFBQThnQUFBUElBQUFEeUFBQUE4Z0FBLy84QVFaQVlDellJQUFBQUVBQUFBQmdBQUFBaEFBQUFJUUFBQUNFQUFBQWhBQUFBSVFBQUFBRC9BQUQvL3dBQS8vOEFBUC8vQUFELy93QUEvLzhBUWV3WUN3SC9BRUg5R0FzWkNBQUFBQ1FBQUFEdUFBQ0EvZ0FBLy84QUFQLy9BQUQvL3dCQnRCa0xEUUlBQUFBUUFBQUEyZ0FBQVBzQVFkQVpDNXNFQVFBQUFBSUFBQUFEQUFBQUJBQUFBQVlBQUFBSUFBQUFEQUFBQUJBQUFBQVlBQUFBSUFBQUFEQUFBQUJBQUFBQVlBQUFBSUFBQUFEQUFBQUFBQUVBQUlBQkFBQUFBZ0FBQUFNQUFBQUVBQUFBQmdBQUFBZ0FBQUFNQUFBQUVBQUFBQmdBQUFBZ0FBQUFNQUFBQUVBQUFBQmdBQUFBZ0FBQUFNQUFBQUFBQVFBQWdBRUFBQUFDQUFBQUF3QUFBQVFBQUFBRkFBQUFCZ0FBQUFjQUFBQUlBQUFBQ1FBQUFBb0FBQUFMQUFBQURBQUFBQTBBQUFBT0FBQUFEd0FFQUFBQUFnQUFBQUlBQUFBQ0FBQUFBZ0FBQUFJQUFBQUNBQUFBQWdBQUFBSUFBQUFDQUFBQUFnQUFBQUlBQUFBQ0FBQUFBZ0FBQUFJQUFBQUNBQUFBRGdBQUFBQUFBQUFNQUFBQVRRQUFBR0VBQUFCNEFBQUFhUUFBQUcwQUFBQjFBQUFBYlFBQUFDQUFBQUJoQUFBQWJBQUFBR3dBQUFCdkFBQUFkd0FBQUdVQUFBQmtBQUFBSUFBQUFHRUFBQUJ5QUFBQWNnQUFBR0VBQUFCNUFBQUFJQUFBQUhNQUFBQnBBQUFBZWdBQUFHVUFBQUFnQUFBQUtBQUFBQ1VBQUFCMUFBQUFLUUFBQUNBQUFBQnBBQUFBY3dBQUFDQUFBQUJsQUFBQWVBQUFBR01BQUFCbEFBQUFaUUFBQUdRQUFBQmxBQUFBWkFBQUFBQUFBQUFxQUFBQUFBQUFBQ0FFQUFCZ0JBQUFJQVFBQUdnRUFBQm9CQUFBeUFVQUFJQUVBQUFnQkFBQVFBUUFBQ0FFQUFESUJRQUFBQUFBQUpBRUFBQURBQUFBQkFBQUFBTUFBQUFFQUFBQUFnQUFBQUlBQUFENERnQUFGQUFBQUVNdVZWUkdMVGdBUWZnZEN4YmVFZ1NWQUFBQUFQLy8vLy8vLy8vLy8vLy8vOXdPQUVHa0hndlJBUUlBQU1BREFBREFCQUFBd0FVQUFNQUdBQURBQndBQXdBZ0FBTUFKQUFEQUNnQUF3QXNBQU1BTUFBREFEUUFBd0E0QUFNQVBBQURBRUFBQXdCRUFBTUFTQUFEQUV3QUF3QlFBQU1BVkFBREFGZ0FBd0JjQUFNQVlBQURBR1FBQXdCb0FBTUFiQUFEQUhBQUF3QjBBQU1BZUFBREFId0FBd0FBQUFMTUJBQUREQWdBQXd3TUFBTU1FQUFEREJRQUF3d1lBQU1NSEFBRERDQUFBd3drQUFNTUtBQUREQ3dBQXd3d0FBTU1OQUFEVERnQUF3dzhBQU1NQUFBeTdBUUFNd3dJQURNTURBQXpEQkFBTTAvUVBBQUFKQUVHQUlBc0JBUUJCbENBTEVnVUFBQUFBQUFBQUJnQUFBQ1FCQVFBQUJBQkJ3Q0FMQlAvLy8vOEFRZkFnQ3dWMEVBQUFCUUJCZ0NFTEFRRUFRWmdoQ3dzSEFBQUFCZ0FBQUN3RkFRQkJzQ0VMQVFJQVFiOGhDd1gvLy8vLy93QkJyQ01MQXZEZEFFR0lKQXNCQ0FCQnJ5UUxCZi8vLy8vL0FFSGdKQXVORENVQUFBQUFBQUFBQVFBQUFBQUFBQUFnQlFBQUJRQUFBQVlBQUFBSEFBQUFDQUFBQUFrQUFBQUJBQUFBQVFBQUFBRUFBQUFBQUFBQVNBVUFBQVVBQUFBSkFBQUFCd0FBQUFnQUFBQUpBQUFBQWdBQUFBSUFBQUFDQUFBQUFBQUFBRmdGQUFBS0FBQUFDd0FBQUFJQUFBQUFBQUFBYUFVQUFBd0FBQUFOQUFBQUF3QUFBQUFBQUFCNEJRQUFEQUFBQUE0QUFBQURBQUFBQUFBQUFLZ0ZBQUFGQUFBQUR3QUFBQWNBQUFBSUFBQUFDZ0FBQUFBQUFBQ1lCUUFBQlFBQUFCQUFBQUFIQUFBQUNBQUFBQXNBQUFBQUFBQUFLQVlBQUFVQUFBQVJBQUFBQndBQUFBZ0FBQUFNQUFBQUFBQUFBRGdHQUFBRkFBQUFFZ0FBQUFjQUFBQUlBQUFBQ1FBQUFBTUFBQUFEQUFBQUF3QUFBRWtBTVFGVEFIOEJNQUZwQUhnQi93Q0JBVk1DZ2dHREFZUUJoUUdHQVZRQ2h3R0lBWWtCVmdLS0FWY0Npd0dNQVk0QjNRR1BBVmtDa0FGYkFwRUJrZ0dUQVdBQ2xBRmpBcFlCYVFLWEFXZ0NtQUdaQVp3QmJ3S2RBWElDbndGMUFxWUJnQUtuQWFnQnFRR0RBcXdCclFHdUFZZ0Nyd0d3QWJFQmlnS3lBWXNDdHdHU0FyZ0J1UUc4QWIwQnhBSEdBY1FCeFFIRkFjWUJ4d0hKQWNjQnlBSElBY2tCeWdITUFjb0J5d0hMQWN3QjhRSHpBZkVCOGdIeUFmTUI5QUgxQWZZQmxRSDNBYjhCSUFLZUFZWURyQU9JQTYwRGlRT3VBNG9EcndPTUE4d0RqZ1BOQTQ4RHpnT1pBMFVEbVFPK0g2TUR3Z1AzQS9nRCtnUDdBMkFlbXg2ZUh0OEFXUjlSSDFzZlV4OWRIMVVmWHg5WEg3d2ZzeC9NSDhNZjdCL2xIL3dmOHg4NkFtVXNPd0k4QWowQ21nRStBbVlzUVFKQ0FrTUNnQUZFQW9rQ1JRS01BdlFEdUFQNUEvSUQvUU43QS80RGZBUC9BMzBEd0FUUEJDWWh5UU1xSVdzQUt5SGxBREloVGlHRElZUWhZQ3hoTEdJc2F3SmpMSDBkWkN4OUFtMHNVUUp1TEhFQ2J5eFFBbkFzVWdKeUxITXNkU3gyTEg0c1B3Si9MRUFDOGl6ekxIMm5lUjJMcDR5bmphZGxBcXFuWmdMSEVDY3R6UkF0TFhZRGR3T2NBN1VBa2dQUUE1Z0QwUU9tQTlVRG9BUFdBNW9EOEFPaEEvRURsUVAxQTg4RDF3TUFBQUFBUVFBZ0dzQUFJQjhBQVFFdk1nRUJCVGtCQVE5S0FRRXRlUUVCQlhBREFRT1JBeUFSb3dNZ0NRQUVVQkFRQkNBZ1lBUUJJWW9FQVRYQkJBRU4wQVFCUHhRRkFSTXhCVEFtb0FFQkJiTUJBUVBOQVFFUDNnRUJFZmdCQVNjaUFnRVIyQU1CRndBZUFaV2dIZ0ZmQ0IvNENCZ2YrQVlvSC9nSU9CLzRDRWdmK0Fab0gvZ0lpQi80Q0pnZitBaW9IL2dJdUIvNEFyb2Z0Z0xJSDZvRTJCLzRBdG9mbkFMb0gvZ0M2aCtRQXZnZmdBTDZINElDUmdJQkNSQUZBUU5nSVJBUUFDd3dMMmNzQVFXQUxBRmo2eXdCQTBDbUFTMkFwZ0VYSXFjQkRUS25BVDE1cHdFRGZxY0JDWkNuQVFPZ3B3RUpJZjhnR2dBQUFBQTRVa0ZTWDBWWVNWUUFOMEZ5WTJocGRtVUExeE9WSTBuRndNMzVIQkIzTU4wQ0t1Z0JzZWtPV05zWjM4UDBXbGZ2bVluL3g1TkdYRUwyRGRnb1BoM1o1bFlHUnhpcnhHVngybnRkVzZPeXlrTXM2MnY2UytveHAzM1RVM0tka0NEQmp5U2VmUGU3V2RhTkwzbmtQWUxWd3E3N1lXNDI1WE01bUY1cDg5UTMwZlUvQzZUSUg1eFJzT01WVEdPTHZIOFIrRFBQZUwzU0NPSXBTTGZMaDZXbVBHSUhlaWFicWtXcy9PNG5oanVBN0J2d1VJTURWYzZSVDVxT245ekpoVXBBRklIZ3VZcG5yYllySXY1U3hwZm50RG9LZGhwbURES0VGcitJYjZLekxRU1ViS0U0VG43eTNnK3ZraGNoOGJXK1RlRUFMcW02UkYvdFFUWFEvYWdKRW1RMGRMaWdZRzBsSG1xTWFKWUZ6SFZ3VkFRRUJnWUFBQWNIQkFRQUFBUUVBQUFBQVFJREJBVUdCd2dKQ2dzTURRNFBEZ29FQ0FrUERRWUJEQUFDQ3djRkF3c0lEQUFGQWc4TkNnNERCZ2NCQ1FRSENRTUJEUXdMRGdJR0JRb0VBQThJQ1FBRkJ3SUVDZzhPQVFzTUJnZ0REUUlNQmdvQUN3Z0RCQTBIQlE4T0FRa01CUUVQRGcwRUNnQUhCZ01KQWdnTERRc0hEZ3dCQXdrRkFBOEVDQVlDQ2dZUERna0xBd0FJREFJTkJ3RUVDZ1VLQWdnRUJ3WUJCUThMQ1E0RERBMEEzUTZKRjNhVFAwUEgwREt3aXBGK0pYUWZpcW1oTEJMaHlzaUFGUUR5eWs5Y1B6OWNBQzgvUHk4QUdRNEpCd1VGQkFRRUF3TURBZ0lDQWdBQkFnTUVCUVlIQ0FvTURoQVVHQndnS0RBNFFGQmdjSUNnd09BQVFmVXdDNlVTQVFFQkFRSUNBZ0lEQXdNREJBUUVCQVVGQlFVQUFBQUFBUUVDQWdNREJBUUZCUVlHQndjSUNBa0pDZ29MQ3d3TURRME9EZzhQRUJBUUVCQVFFQkFRRUJBUUVCQUFCQWdRSUVDQXdBSUNBd1FGQmdZR2FXa0FkZ0JTWVhKQmNtTm9hWFpsQUhacEFHOXdaVzRBYVdscGFXbHBBR2RsZEVacGJHVklaV0ZrWlhJQWFXbHBBSEpsWVdSR2FXeGxBR2xwYVdrQVUzUmhkR1VBYVFCbGNuSkRiMlJsQUhacGFXa0FaWEp5Vkhsd1pRQkJjbU5JWldGa1pYSUFjM1JoZEdVQVkyOXRiV1Z1ZEFCbWJHRm5jd0JCY21OR2FXeGxTR1ZoWkdWeUFHNWhiV1VBY0dGamExTnBlbVVBWkdscEFIWnBhV1FBZFc1d1UybDZaUUJvYjNOMFQxTUFZM0pqQUhScGJXVUFkVzV3Vm1WeUFHMWxkR2h2WkFCbWFXeGxRWFIwY2dBeE0wRnlZMFpwYkdWSVpXRmtaWElBVGxOME0xOWZNakV5WW1GemFXTmZjM1J5YVc1blNYZE9VMTh4TVdOb1lYSmZkSEpoYVhSelNYZEZSVTVUWHpsaGJHeHZZMkYwYjNKSmQwVkZSVVVBVGxOME0xOWZNakl4WDE5aVlYTnBZMTl6ZEhKcGJtZGZZMjl0Ylc5dVNVeGlNVVZGUlFBNVFYSmpTR1ZoWkdWeUFFNVRkRE5mWHpJeE1tSmhjMmxqWDNOMGNtbHVaMGxqVGxOZk1URmphR0Z5WDNSeVlXbDBjMGxqUlVWT1UxODVZV3hzYjJOaGRHOXlTV05GUlVWRkFEVlRkR0YwWlFCRlVsSmZVRkpQUTBWVFV3QkZVbEpmVWtWQlJBQkZVbEpmVDFCRlRnQlFTekV3VW1GeVFYSmphR2wyWlFCUU1UQlNZWEpCY21Ob2FYWmxBREV3VW1GeVFYSmphR2wyWlFCVFJWUUFSVTVFQUVOVlVnQTBSbWxzWlFCMmIybGtBR0p2YjJ3QVkyaGhjZ0J6YVdkdVpXUWdZMmhoY2dCMWJuTnBaMjVsWkNCamFHRnlBSE5vYjNKMEFIVnVjMmxuYm1Wa0lITm9iM0owQUdsdWRBQjFibk5wWjI1bFpDQnBiblFBYkc5dVp3QjFibk5wWjI1bFpDQnNiMjVuQUdac2IyRjBBR1J2ZFdKc1pRQnpkR1E2T25OMGNtbHVad0J6ZEdRNk9tSmhjMmxqWDNOMGNtbHVaengxYm5OcFoyNWxaQ0JqYUdGeVBnQnpkR1E2T25kemRISnBibWNBWlcxelkzSnBjSFJsYmpvNmRtRnNBR1Z0YzJOeWFYQjBaVzQ2T20xbGJXOXllVjkyYVdWM1BHTm9ZWEkrQUdWdGMyTnlhWEIwWlc0Nk9tMWxiVzl5ZVY5MmFXVjNQSE5wWjI1bFpDQmphR0Z5UGdCbGJYTmpjbWx3ZEdWdU9qcHRaVzF2Y25sZmRtbGxkengxYm5OcFoyNWxaQ0JqYUdGeVBnQmxiWE5qY21sd2RHVnVPanB0WlcxdmNubGZkbWxsZHp4emFHOXlkRDRBWlcxelkzSnBjSFJsYmpvNmJXVnRiM0o1WDNacFpYYzhkVzV6YVdkdVpXUWdjMmh2Y25RK0FHVnRjMk55YVhCMFpXNDZPbTFsYlc5eWVWOTJhV1YzUEdsdWRENEFaVzF6WTNKcGNIUmxiam82YldWdGIzSjVYM1pwWlhjOGRXNXphV2R1WldRZ2FXNTBQZ0JsYlhOamNtbHdkR1Z1T2pwdFpXMXZjbmxmZG1sbGR6eHNiMjVuUGdCbGJYTmpjbWx3ZEdWdU9qcHRaVzF2Y25sZmRtbGxkengxYm5OcFoyNWxaQ0JzYjI1blBnQmxiWE5qY21sd2RHVnVPanB0WlcxdmNubGZkbWxsZHp4cGJuUTRYM1ErQUdWdGMyTnlhWEIwWlc0Nk9tMWxiVzl5ZVY5MmFXVjNQSFZwYm5RNFgzUStBR1Z0YzJOeWFYQjBaVzQ2T20xbGJXOXllVjkyYVdWM1BHbHVkREUyWDNRK0FHVnRjMk55YVhCMFpXNDZPbTFsYlc5eWVWOTJhV1YzUEhWcGJuUXhObDkwUGdCbGJYTmpjbWx3ZEdWdU9qcHRaVzF2Y25sZmRtbGxkenhwYm5Rek1sOTBQZ0JsYlhOamNtbHdkR1Z1T2pwdFpXMXZjbmxmZG1sbGR6eDFhVzUwTXpKZmRENEFaVzF6WTNKcGNIUmxiam82YldWdGIzSjVYM1pwWlhjOFpteHZZWFErQUdWdGMyTnlhWEIwWlc0Nk9tMWxiVzl5ZVY5MmFXVjNQR1J2ZFdKc1pUNEFaVzF6WTNKcGNIUmxiam82YldWdGIzSjVYM1pwWlhjOGJHOXVaeUJrYjNWaWJHVStBRTR4TUdWdGMyTnlhWEIwWlc0eE1XMWxiVzl5ZVY5MmFXVjNTV1ZGUlFCT01UQmxiWE5qY21sd2RHVnVNVEZ0WlcxdmNubGZkbWxsZDBsa1JVVUFUakV3WlcxelkzSnBjSFJsYmpFeGJXVnRiM0o1WDNacFpYZEpaa1ZGQUU0eE1HVnRjMk55YVhCMFpXNHhNVzFsYlc5eWVWOTJhV1YzU1cxRlJRQk9NVEJsYlhOamNtbHdkR1Z1TVRGdFpXMXZjbmxmZG1sbGQwbHNSVVVBVGpFd1pXMXpZM0pwY0hSbGJqRXhiV1Z0YjNKNVgzWnBaWGRKYWtWRkFFNHhNR1Z0YzJOeWFYQjBaVzR4TVcxbGJXOXllVjkyYVdWM1NXbEZSUUJPTVRCbGJYTmpjbWx3ZEdWdU1URnRaVzF2Y25sZmRtbGxkMGwwUlVVQVRqRXdaVzF6WTNKcGNIUmxiakV4YldWdGIzSjVYM1pwWlhkSmMwVkZBRTR4TUdWdGMyTnlhWEIwWlc0eE1XMWxiVzl5ZVY5MmFXVjNTV2hGUlFCT01UQmxiWE5qY21sd2RHVnVNVEZ0WlcxdmNubGZkbWxsZDBsaFJVVUFUakV3WlcxelkzSnBjSFJsYmpFeGJXVnRiM0o1WDNacFpYZEpZMFZGQUU0eE1HVnRjMk55YVhCMFpXNHpkbUZzUlFCT1UzUXpYMTh5TVRKaVlYTnBZMTl6ZEhKcGJtZEphRTVUWHpFeFkyaGhjbDkwY21GcGRITkphRVZGVGxOZk9XRnNiRzlqWVhSdmNrbG9SVVZGUlFBU0VSTVVGUllYR0JrYUd4d2RIaDhnSVJFaUl5UVJKU1luS0NrcUt5d1JMUzR2RUJBd0VCQVFFQkFRRURFeU14QTBOUkFRRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFVFlSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkUzRVJFUkVUZ1JPVG83UEQwK0VSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVJFUkVSRVQ4UUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFSUUVFUlFrTkVSVVpIU0VrUUVCQktTMHhOVGhBUUVFOVFFQkFRRUZFUUVCQVFFQkFRRUJBUkVSRlNVeEFRRUJBUUVCQVFFQkFRRVJFUkVWUVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUkVWVVFFQkFRVmhBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJCWEVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUJCWVdWcGJFQkFRRUJBUUVCQVFFQkFRRUJBUUVCQVFFQkFRRUZ3UUVCQVFFQkFRRUJBUUVCQVFFQkFRRUFCQnVzTUFDeUQvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy93QkI0c01BQ3piKy8vOEgvdi8vQndBQUFBQUFCQ0FFLy85Ly8vLy9mLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL0Qvd01BSDFBQVFhTEVBQXVrQVNBQUFBQUFBTjg4UU5mLy8vdi8vLy8vLy8vLy8vKy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vOEQvUC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLzhBL3YvLy8zOEMvdi8vLy84QUFBQUFBUCsvdGdELy8vOEhCd0FBQVA4SC8vLy8vLy8vLy83L3cvLy8vLy8vLy8vLy8vLy8vKzhmL3VIL253QUEvLy8vLy8vL0FPRC8vLy8vLy8vLy8vLy8vLzhEQVAvLy8vLy9CekFFLy8vLy9QOGZBQUQvLy84QkFFSE94UUFMNUFIOUh3QUFBQUFBQVBBRC8zLy8vLy8vLy8vLzcvL2Y0Zi9QLy83KzdwLzUvLy85eGVPZldZQ3d6LzhEQU82SCtmLy8vVzNEaHhrQ1hzRC9Qd0R1di92Ly8vM3Q0NzhiQVFEUC93QUE3cC81Ly8vOTdlT2ZHY0N3ei84Q0FPekhQZFlZeC8vRHh4MkJBTUQvQUFEdTMvMy8vLzN2NDk4ZFlBUFAvd0FBN04vOS8vLzk3K1BmSFdCQXovOEdBT3pmL2YvLy8vL24zMTJBQU0vL0FQenMvMy84Ly8vN0wzK0FYLzhBQUF3QS92Ly8vLzkvL3djL0lQOERBQUFBQUpZbDhQNnU3UDg3WHlELzh3QUFBQUFCQUFBQS93TUFBUC8rLy8vL0gvNy9BLy8vL3YvLy94OEFRYnJIQUF1VkF2Ly8vLy8vLzMvNS93UC8vK2ZCLy85L1FQOHovLy8vLzc4Zy8vLy8vLy8zLy8vLy8vLy8vLy8vUFg4OS8vLy8vLzg5Ly8vLy96MS9QZjkvLy8vLy8vLy8vejMvLy8vLy8vLy8vNGNBQUFBQS8vOEFBUC8vLy8vLy8vLy8vLzhmQVA3Ly8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLzUvLy8vNy8vd2YvLy8vLy8vLy8vLy9IQVFELzN3OEEvLzhQQVAvL0R3RC8zdzBBLy8vLy8vLy96Ly8vQVlBUS93TUFBQUFBL3dQLy8vLy8vLy8vLy8vLy93RC8vLy8vL3dmLy8vLy8vLy8vL3o4QS8vLy9ILzhQL3dIQS8vLy8vejhmQVAvLy8vLy9ELy8vL3dQL0F3QUFBQUQvLy84UC8vLy8vLy8vLzMvKy94OEEvd1AvQTRBQVFkckpBQXN3Ly8vLy8vLy83Ly92RC84REFBQUFBUC8vLy8vLzgvLy8vLy8vLzcvL0F3RC8vLy8vLy84L0FQL2ovLy8vLy84L0FFR1h5Z0FMRzk1dkFQLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL3dCQnVzb0FDeUQvL3o4Ly8vLy8vejgvLzZyLy8vOC8vLy8vLy8vLzMxL2NIODhQL3gvY0h3QkI2TW9BQ3dZQ2dBQUEveDhBUWZyS0FBc1NoUHd2UGxDOS8vUGdRd0FBLy8vLy8vOEJBRUd3eXdBTFVNRC8vLy8vLy84REFBRC8vLy8vLzMvLy8vLy8vMy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9IM2dNQVAvLy8vKy9JUC8vLy8vLy8vK0FBQUQvLzM4QWYzOS9mMzkvZjMvLy8vLy9BQUFBQUFDQUFFR2F6QUFMVitBQUFBRCtBejRmL3YvLy8vLy8vLy8vLzMvZy92Ly8vLy8vLy8vLy8vLzM0UC8vLy84Ly92Ly8vLy8vLy8vLy8vOS9BQUQvLy84SEFBQUFBQUFBLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9Qd0JCK3N3QUN6TC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL0h3QUFBQUFBQVAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vSHdCQnRNMEFDenovLy8vLy96Ly9ILy8vL3c4QUFQLy8vLy8vZi9DUC8vLy9nUC8vLy8vLy8vLy8vLzhBQUFBQWdQLzgvLy8vLy8vLy8vLy8vLy8vZVE4QS93Y0FRZm5OQUF0bi83djMvLy8vQUFBQS8vLy8vLy8vRHdELy8vLy8vLy8vL3c4QS93TUFBUHdJLy8vLy8vOEgvLy8vL3djQS8vLy9ILy8vLy8vLy8vZi9BSUQvQXdBQUFBRC8vLy8vLy85L0FQOC8vd1AvLzM4RS8vLy8vLy8vLzM4RkFBQTQvLzg4QUg1K2ZnQi9md0JCOHM0QUM0Z0IvLy8vLy84SC93UC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vdzhBLy85LytQLy8vLy8vRC8vLy8vLy8vLy8vLy8vLy8vOC8vLy8vLy8vLy8vLy8vLy8vL3dNQUFBQUFmd0Q0NFAvOWYxL2IvLy8vLy8vLy8vLy8vLy8vL3dNQUFBRDQvLy8vLy8vLy8vLy8vLy8vUHdBQS8vLy8vLy8vLy8vOC8vLy8vLy8vQUFBQUFBRC9Ed0JCaU5BQUMxTGYvLy8vLy8vLy8vLy8vLy8vLy8vLy94OEFBUDhEL3YvL0IvNy8vd2ZBLy8vLy8vLy8vLy8vLzMvOC9Qd2NBQUFBQVAvdi8vOS8vLyszL3ovL1B3QUFBQUQvLy8vLy8vLy8vLy8vLy8vLy8vOEhBRUhpMEFBTEIvLy8vLy8vL3g4QVFZclJBQXRHLy8vL0gvLy8vLy8vL3dFQUFBQUFBUC8vLzM4QUFQLy8vd2NBQUFBQUFBRC8vLzgvLy8vLy93Ly9QZ0FBQUFBQS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy96Ly9Bd0JCMnRFQUN3cy8vZi8vLy8rL2tmLy9Qd0JCK3RFQUN3ai8vejhBLy8vL0F3QkJpdElBQ3dqLy8vLy8vLy8vd0FCQm10SUFDeEJ2OE8vKy8vOFBBQUFBQUFELy8vOGZBRUc2MGdBTEQvLy8vLy8vL3o4QS8vOC9BUC8vQndCQjJ0SUFDd3IvLy8vLy8vLy8vLzhCQUVINjBnQUxLUC8vLy8vLy8vLy9Qd0FBQU1EL0FBRDgvLy8vLy8vL0FRQUEvLy8vQWY4RC8vLy8vLy8veC84QVFhclRBQXNNLy8vLy8vLy8vLzhlQVA4REFFSEswd0FMSHYvLy8vLy8vejhBL3dNQUFBQUFBQUQvLy8vLy8vLy8vLy8vLy8vL2Z3QkIrdE1BQ3czLy8vLy8vLy8vLy8vLy8vOEhBRUdhMUFBTEJ2Ly8vLy8vZndCQnV0UUFDd2ovLy8vLy8vLy9BUUJCMnRRQUN4VC8vLy8vLy8vLy94OEEvLy8vLy85L0FBRDQvd0JCK3RRQUN3RURBRUdhMVFBTG1BSC8vLy8vLy8vLy8vLy8zLy8vLy8vLy8vLy8zMlRlLyt2di8vLy8vLy8vLzcvbjM5Ly8vLzk3WC96OS8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLzgvLy8vLy9mLy85Ly8vLy9mLy85Ly8vLy9mLy85Ly8vLy9mLy8vLy8zLy8vLzkvLy8zei8vLy8vLy8vKy8vLy8rVy92Y0toT3FXcXBiMzkxNy8rLzhQN3Z2L0R3QkJ1dFlBQytzUFZDRWlHUTBCQWdNUlN4d01FQVFMSFJJZUoyaHViM0J4WWlBRkJnOFRGQlVhQ0JZSEtDUVhHQWtLRGhzZkpTT0RnbjBtS2lzOFBUNC9RMGRLVFZoWldsdGNYVjVmWUdGalpHVm1aMmxxYTJ4eWMzUjVlbnQ4QUVsc2JHVm5ZV3dnWW5sMFpTQnpaWEYxWlc1alpRQkViMjFoYVc0Z1pYSnliM0lBVW1WemRXeDBJRzV2ZENCeVpYQnlaWE5sYm5SaFlteGxBRTV2ZENCaElIUjBlUUJRWlhKdGFYTnphVzl1SUdSbGJtbGxaQUJQY0dWeVlYUnBiMjRnYm05MElIQmxjbTFwZEhSbFpBQk9ieUJ6ZFdOb0lHWnBiR1VnYjNJZ1pHbHlaV04wYjNKNUFFNXZJSE4xWTJnZ2NISnZZMlZ6Y3dCR2FXeGxJR1Y0YVhOMGN3QldZV3gxWlNCMGIyOGdiR0Z5WjJVZ1ptOXlJR1JoZEdFZ2RIbHdaUUJPYnlCemNHRmpaU0JzWldaMElHOXVJR1JsZG1salpRQlBkWFFnYjJZZ2JXVnRiM0o1QUZKbGMyOTFjbU5sSUdKMWMza0FTVzUwWlhKeWRYQjBaV1FnYzNsemRHVnRJR05oYkd3QVVtVnpiM1Z5WTJVZ2RHVnRjRzl5WVhKcGJIa2dkVzVoZG1GcGJHRmliR1VBU1c1MllXeHBaQ0J6WldWckFFTnliM056TFdSbGRtbGpaU0JzYVc1ckFGSmxZV1F0YjI1c2VTQm1hV3hsSUhONWMzUmxiUUJFYVhKbFkzUnZjbmtnYm05MElHVnRjSFI1QUVOdmJtNWxZM1JwYjI0Z2NtVnpaWFFnWW5rZ2NHVmxjZ0JQY0dWeVlYUnBiMjRnZEdsdFpXUWdiM1YwQUVOdmJtNWxZM1JwYjI0Z2NtVm1kWE5sWkFCSWIzTjBJR2x6SUdSdmQyNEFTRzl6ZENCcGN5QjFibkpsWVdOb1lXSnNaUUJCWkdSeVpYTnpJR2x1SUhWelpRQkNjbTlyWlc0Z2NHbHdaUUJKTDA4Z1pYSnliM0lBVG04Z2MzVmphQ0JrWlhacFkyVWdiM0lnWVdSa2NtVnpjd0JDYkc5amF5QmtaWFpwWTJVZ2NtVnhkV2x5WldRQVRtOGdjM1ZqYUNCa1pYWnBZMlVBVG05MElHRWdaR2x5WldOMGIzSjVBRWx6SUdFZ1pHbHlaV04wYjNKNUFGUmxlSFFnWm1sc1pTQmlkWE41QUVWNFpXTWdabTl5YldGMElHVnljbTl5QUVsdWRtRnNhV1FnWVhKbmRXMWxiblFBUVhKbmRXMWxiblFnYkdsemRDQjBiMjhnYkc5dVp3QlRlVzFpYjJ4cFl5QnNhVzVySUd4dmIzQUFSbWxzWlc1aGJXVWdkRzl2SUd4dmJtY0FWRzl2SUcxaGJua2diM0JsYmlCbWFXeGxjeUJwYmlCemVYTjBaVzBBVG04Z1ptbHNaU0JrWlhOamNtbHdkRzl5Y3lCaGRtRnBiR0ZpYkdVQVFtRmtJR1pwYkdVZ1pHVnpZM0pwY0hSdmNnQk9ieUJqYUdsc1pDQndjbTlqWlhOekFFSmhaQ0JoWkdSeVpYTnpBRVpwYkdVZ2RHOXZJR3hoY21kbEFGUnZieUJ0WVc1NUlHeHBibXR6QUU1dklHeHZZMnR6SUdGMllXbHNZV0pzWlFCU1pYTnZkWEpqWlNCa1pXRmtiRzlqYXlCM2IzVnNaQ0J2WTJOMWNnQlRkR0YwWlNCdWIzUWdjbVZqYjNabGNtRmliR1VBVUhKbGRtbHZkWE1nYjNkdVpYSWdaR2xsWkFCUGNHVnlZWFJwYjI0Z1kyRnVZMlZzWldRQVJuVnVZM1JwYjI0Z2JtOTBJR2x0Y0d4bGJXVnVkR1ZrQUU1dklHMWxjM05oWjJVZ2IyWWdaR1Z6YVhKbFpDQjBlWEJsQUVsa1pXNTBhV1pwWlhJZ2NtVnRiM1psWkFCRVpYWnBZMlVnYm05MElHRWdjM1J5WldGdEFFNXZJR1JoZEdFZ1lYWmhhV3hoWW14bEFFUmxkbWxqWlNCMGFXMWxiM1YwQUU5MWRDQnZaaUJ6ZEhKbFlXMXpJSEpsYzI5MWNtTmxjd0JNYVc1cklHaGhjeUJpWldWdUlITmxkbVZ5WldRQVVISnZkRzlqYjJ3Z1pYSnliM0lBUW1Ga0lHMWxjM05oWjJVQVJtbHNaU0JrWlhOamNtbHdkRzl5SUdsdUlHSmhaQ0J6ZEdGMFpRQk9iM1FnWVNCemIyTnJaWFFBUkdWemRHbHVZWFJwYjI0Z1lXUmtjbVZ6Y3lCeVpYRjFhWEpsWkFCTlpYTnpZV2RsSUhSdmJ5QnNZWEpuWlFCUWNtOTBiMk52YkNCM2NtOXVaeUIwZVhCbElHWnZjaUJ6YjJOclpYUUFVSEp2ZEc5amIyd2dibTkwSUdGMllXbHNZV0pzWlFCUWNtOTBiMk52YkNCdWIzUWdjM1Z3Y0c5eWRHVmtBRk52WTJ0bGRDQjBlWEJsSUc1dmRDQnpkWEJ3YjNKMFpXUUFUbTkwSUhOMWNIQnZjblJsWkFCUWNtOTBiMk52YkNCbVlXMXBiSGtnYm05MElITjFjSEJ2Y25SbFpBQkJaR1J5WlhOeklHWmhiV2xzZVNCdWIzUWdjM1Z3Y0c5eWRHVmtJR0o1SUhCeWIzUnZZMjlzQUVGa1pISmxjM01nYm05MElHRjJZV2xzWVdKc1pRQk9aWFIzYjNKcklHbHpJR1J2ZDI0QVRtVjBkMjl5YXlCMWJuSmxZV05vWVdKc1pRQkRiMjV1WldOMGFXOXVJSEpsYzJWMElHSjVJRzVsZEhkdmNtc0FRMjl1Ym1WamRHbHZiaUJoWW05eWRHVmtBRTV2SUdKMVptWmxjaUJ6Y0dGalpTQmhkbUZwYkdGaWJHVUFVMjlqYTJWMElHbHpJR052Ym01bFkzUmxaQUJUYjJOclpYUWdibTkwSUdOdmJtNWxZM1JsWkFCRFlXNXViM1FnYzJWdVpDQmhablJsY2lCemIyTnJaWFFnYzJoMWRHUnZkMjRBVDNCbGNtRjBhVzl1SUdGc2NtVmhaSGtnYVc0Z2NISnZaM0psYzNNQVQzQmxjbUYwYVc5dUlHbHVJSEJ5YjJkeVpYTnpBRk4wWVd4bElHWnBiR1VnYUdGdVpHeGxBRkpsYlc5MFpTQkpMMDhnWlhKeWIzSUFVWFZ2ZEdFZ1pYaGpaV1ZrWldRQVRtOGdiV1ZrYVhWdElHWnZkVzVrQUZkeWIyNW5JRzFsWkdsMWJTQjBlWEJsQUU1dklHVnljbTl5SUdsdVptOXliV0YwYVc5dUFBQk1RMTlCVEV3QVRFTmZRMVJaVUVVQUFBQUFURU5mVGxWTlJWSkpRd0FBVEVOZlZFbE5SUUFBQUFBQVRFTmZRMDlNVEVGVVJRQUFURU5mVFU5T1JWUkJVbGtBVEVOZlRVVlRVMEZIUlZNQVRFRk9Sd0JETGxWVVJpMDRBRkJQVTBsWUFFMVZVMHhmVEU5RFVFRlVTQUFSQUFvQUVSRVJBQUFBQUFVQUFBQUFBQUFKQUFBQUFBc0FRYTNtQUFzaEVRQVBDaEVSRVFNS0J3QUJFd2tMQ3dBQUNRWUxBQUFMQUFZUkFBQUFFUkVSQUVIZTVnQUxBUXNBUWVmbUFBc1lFUUFLQ2hFUkVRQUtBQUFDQUFrTEFBQUFDUUFMQUFBTEFFR1k1d0FMQVF3QVFhVG5BQXNWREFBQUFBQU1BQUFBQUFrTUFBQUFBQUFNQUFBTUFFSFM1d0FMQVE0QVFkN25BQXNWRFFBQUFBUU5BQUFBQUFrT0FBQUFBQUFPQUFBT0FFR002QUFMQVJBQVFaam9BQXNlRHdBQUFBQVBBQUFBQUFrUUFBQUFBQUFRQUFBUUFBQVNBQUFBRWhJU0FFSFA2QUFMRGhJQUFBQVNFaElBQUFBQUFBQUpBRUdBNlFBTEFRc0FRWXpwQUFzVkNnQUFBQUFLQUFBQUFBa0xBQUFBQUFBTEFBQUxBRUc2NlFBTEFRd0FRY2JwQUF0ZERBQUFBQUFNQUFBQUFBa01BQUFBQUFBTUFBQU1BQUF0S3lBZ0lEQllNSGdBTFRCWUt6QllJREJZTFRCNEt6QjRJREI0QUdsdVpnQkpUa1lBYm1GdUFFNUJUZ0F3TVRJek5EVTJOemc1UVVKRFJFVkdMZ0JETGxWVVJpMDRBRUdzNmdBTEdrTUFFUUFLQUJFUkVRQUFBQUFGQUFBQUFBQUFDUUFBQUFBTEFFSE82Z0FMR2hFQUR3b1JFUkVEQ2djQUFSTUpDd3NBQUFrR0N3QUFDd0FHQUVILzZnQUxBUXNBUVlyckFBc1dDZ29BQUFBQUNnQUFBZ0FKQ3dBQUFBa0FDd0FBQ3dCQnVlc0FDd0VNQUVIRjZ3QUxGUXdBQUFBQURBQUFBQUFKREFBQUFBQUFEQUFBREFCQjgrc0FDd0VPQUVILzZ3QUxGUTBBQUFBRURRQUFBQUFKRGdBQUFBQUFEZ0FBRGdCQnJld0FDd0VRQUVHNTdBQUxIZzhBQUFBQUR3QUFBQUFKRUFBQUFBQUFFQUFBRUFBQUVnQUFBQklTRWdCQjhPd0FDdzRTQUFBQUVoSVNBQUFBQUFBQUNRQkJvZTBBQ3dFTEFFR3Q3UUFMRlFvQUFBQUFDZ0FBQUFBSkN3QUFBQUFBQ3dBQUN3QkIyKzBBQ3dFTUFFSG43UUFMdkFjTUFBQUFBQXdBQUFBQUNRd0FBQUFBQUF3QUFBd0FBQ1VxY3dBb2JuVnNiQ2tBSXdBckFDMEFJQUF3QUV3QUFHcE1URXdBYWdBQUFBQUFhbW9BQUFBQWFnQUFhaVVsSlhNbGN5VnpKWE1sY3lvdUtpVmpKV01BWW1GemFXTmZjM1J5YVc1bkFHRnNiRzlqWVhSdmNqeFVQam82WVd4c2IyTmhkR1VvYzJsNlpWOTBJRzRwSUNkdUp5QmxlR05sWldSeklHMWhlR2x0ZFcwZ2MzVndjRzl5ZEdWa0lITnBlbVVBZEdWeWJXbHVZWFJwYm1jZ2QybDBhQ0FsY3lCbGVHTmxjSFJwYjI0Z2IyWWdkSGx3WlNBbGN6b2dKWE1BZEdWeWJXbHVZWFJwYm1jZ2QybDBhQ0FsY3lCbGVHTmxjSFJwYjI0Z2IyWWdkSGx3WlNBbGN3QjBaWEp0YVc1aGRHbHVaeUIzYVhSb0lDVnpJR1p2Y21WcFoyNGdaWGhqWlhCMGFXOXVBSFJsY20xcGJtRjBhVzVuQUhWdVkyRjFaMmgwQUZOME9XVjRZMlZ3ZEdsdmJnQk9NVEJmWDJONGVHRmlhWFl4TVRaZlgzTm9hVzFmZEhsd1pWOXBibVp2UlFCVGREbDBlWEJsWDJsdVptOEFUakV3WDE5amVIaGhZbWwyTVRJd1gxOXphVjlqYkdGemMxOTBlWEJsWDJsdVptOUZBRTR4TUY5ZlkzaDRZV0pwZGpFeE4xOWZZMnhoYzNOZmRIbHdaVjlwYm1adlJRQndkR2h5WldGa1gyOXVZMlVnWm1GcGJIVnlaU0JwYmlCZlgyTjRZVjluWlhSZloyeHZZbUZzYzE5bVlYTjBLQ2tBWTJGdWJtOTBJR055WldGMFpTQndkR2h5WldGa0lHdGxlU0JtYjNJZ1gxOWplR0ZmWjJWMFgyZHNiMkpoYkhNb0tRQmpZVzV1YjNRZ2VtVnlieUJ2ZFhRZ2RHaHlaV0ZrSUhaaGJIVmxJR1p2Y2lCZlgyTjRZVjluWlhSZloyeHZZbUZzY3lncEFIUmxjbTFwYm1GMFpWOW9ZVzVrYkdWeUlIVnVaWGh3WldOMFpXUnNlU0J5WlhSMWNtNWxaQUIwWlhKdGFXNWhkR1ZmYUdGdVpHeGxjaUIxYm1WNGNHVmpkR1ZrYkhrZ2RHaHlaWGNnWVc0Z1pYaGpaWEIwYVc5dUFITjBaRG82WW1Ga1gyRnNiRzlqQUZOME9XSmhaRjloYkd4dll3QlRkREV4Ykc5bmFXTmZaWEp5YjNJQVUzUXhNbXhsYm1kMGFGOWxjbkp2Y2dCT01UQmZYMk40ZUdGaWFYWXhNVGxmWDNCdmFXNTBaWEpmZEhsd1pWOXBibVp2UlFCT01UQmZYMk40ZUdGaWFYWXhNVGRmWDNCaVlYTmxYM1I1Y0dWZmFXNW1iMFVBVGpFd1gxOWplSGhoWW1sMk1USXpYMTltZFc1a1lXMWxiblJoYkY5MGVYQmxYMmx1Wm05RkFIWUFSRzRBWWdCakFHZ0FZUUJ6QUhRQWFRQnFBR3dBYlFCbUFHUUFUakV3WDE5amVIaGhZbWwyTVRFMlgxOWxiblZ0WDNSNWNHVmZhVzVtYjBVQVRqRXdYMTlqZUhoaFltbDJNVEl4WDE5MmJXbGZZMnhoYzNOZmRIbHdaVjlwYm1adlJRPT0iOwoKICAvLyA8IS0tIHByZXR0aWVyLWlnbm9yZS1zdGFydCAtLT4KCiAgY29uc3Qgd2FzbVVybCA9ICJkYXRhOmFwcGxpY2F0aW9uL29jdGV0LXN0cmVhbTtiYXNlNjQsIit1bnBhY2tCYXNlNjRTdHI7IAoKICBjb25zdCBXb3JrZXJTY29wZSA9IHt9OwoKICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tdW5wYWNrQnJpZGdlLmpzLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICFmdW5jdGlvbih0LGUpewogICAgLy8gVGhlIGZvbGxvd2luZyBjb2RlIGhhcyBiZWVuIF9jYXJlZnVsbHlfIG1vZGlmaWVkIGJ5IGhhbmQuCiAgICAvLyBUaGVyZSB3ZXJlIHZhcmlvdXMgY2FzZXMgZm9yIGluIHdoYXQgY29udGV4dCB0aGUgY29kZSBtaWdodCAKICAgIC8vIGJlIHJ1biwgYW5kIEkgcmVtb3ZlZCBhbGwgYnV0IHRoZSB3ZWJ3b3JrZXIgY2FzZS4gCiAgICAvLyBUaGVyZSB3YXMgY29kZSB0byBoYW5kbGUgbG9hZGluZyBpbiBhIG5vZGVKUyBjb250ZXh0LCB0aGF0IHRyaWVkIHRvIGltcG9ydCgiZnMiKQogICAgLy8gV2ViUGFjayBrZXB0cyB0cmlwcGluZyB1cCBvbiB0aGF0IGNvZGUgaW4gaXRzIHN0YXRpYyBhbmFseXNpcyBvZiB0aGUgY29kZSwgc28KICAgIC8vIEkgY2FyZWZ1bGx5IHJlbW92ZWQgaXQuCiAgICB0LnVucGFja0JyaWRnZSA9IGUodC5mcyk7CiAgfShXb3JrZXJTY29wZSxmdW5jdGlvbih0KXsKICAgIHJldHVybiBmdW5jdGlvbih0KXsKICAgICAgdmFyIGU9e307ZnVuY3Rpb24gcihuKXtpZihlW25dKXJldHVybiBlW25dLmV4cG9ydHM7dmFyIGk9ZVtuXT17aTpuLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIHRbbl0uY2FsbChpLmV4cG9ydHMsaSxpLmV4cG9ydHMsciksaS5sPSEwLGkuZXhwb3J0c31yZXR1cm4gci5tPXQsci5jPWUsci5kPWZ1bmN0aW9uKHQsZSxuKXtyLm8odCxlKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsZSx7ZW51bWVyYWJsZTohMCxnZXQ6bn0pO30sci5yPWZ1bmN0aW9uKHQpeyJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wudG9TdHJpbmdUYWcmJk9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFN5bWJvbC50b1N0cmluZ1RhZyx7dmFsdWU6Ik1vZHVsZSJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodCwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7fSxyLnQ9ZnVuY3Rpb24odCxlKXtpZigxJmUmJih0PXIodCkpLDgmZSlyZXR1cm4gdDtpZig0JmUmJiJvYmplY3QiPT10eXBlb2YgdCYmdCYmdC5fX2VzTW9kdWxlKXJldHVybiB0O3ZhciBuPU9iamVjdC5jcmVhdGUobnVsbCk7aWYoci5yKG4pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLCJkZWZhdWx0Iix7ZW51bWVyYWJsZTohMCx2YWx1ZTp0fSksMiZlJiYic3RyaW5nIiE9dHlwZW9mIHQpZm9yKHZhciBpIGluIHQpci5kKG4saSxmdW5jdGlvbihlKXtyZXR1cm4gdFtlXX0uYmluZChudWxsLGkpKTtyZXR1cm4gbn0sci5uPWZ1bmN0aW9uKHQpe3ZhciBlPXQmJnQuX19lc01vZHVsZT9mdW5jdGlvbigpe3JldHVybiB0LmRlZmF1bHR9OmZ1bmN0aW9uKCl7cmV0dXJuIHR9O3JldHVybiByLmQoZSwiYSIsZSksZX0sci5vPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGUpfSxyLnA9IiIscihyLnM9Mil9KFtmdW5jdGlvbih0LGUscil7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIl9fZXNNb2R1bGUiLHt2YWx1ZTohMH0pO2NvbnN0IG49cigxKSxpPXswOiJFUkFSX1NVQ0NFU1MiLDEwOiJFUkFSX0VORF9BUkNISVZFIiwxMToiRVJBUl9OT19NRU1PUlkiLDEyOiJFUkFSX0JBRF9EQVRBIiwxMzoiRVJBUl9CQURfQVJDSElWRSIsMTQ6IkVSQVJfVU5LTk9XTl9GT1JNQVQiLDE1OiJFUkFSX0VPUEVOIiwxNjoiRVJBUl9FQ1JFQVRFIiwxNzoiRVJBUl9FQ0xPU0UiLDE4OiJFUkFSX0VSRUFEIiwxOToiRVJBUl9FV1JJVEUiLDIwOiJFUkFSX1NNQUxMX0JVRiIsMjE6IkVSQVJfVU5LTk9XTiIsMjI6IkVSQVJfTUlTU0lOR19QQVNTV09SRCIsMjM6IkVSQVJfRVJFRkVSRU5DRSIsMjQ6IkVSQVJfQkFEX1BBU1NXT1JEIn0sbz17MDoiU3VjY2VzcyIsMTE6Ik5vdCBlbm91Z2ggbWVtb3J5IiwxMjoiQXJjaGl2ZSBoZWFkZXIgb3IgZGF0YSBhcmUgZGFtYWdlZCIsMTM6IkZpbGUgaXMgbm90IFJBUiBhcmNoaXZlIiwxNDoiVW5rbm93biBhcmNoaXZlIGZvcm1hdCIsMTU6IkZpbGUgb3BlbiBlcnJvciIsMTY6IkZpbGUgY3JlYXRlIGVycm9yIiwxNzoiRmlsZSBjbG9zZSBlcnJvciIsMTg6IkZpbGUgcmVhZCBlcnJvciIsMTk6IkZpbGUgd3JpdGUgZXJyb3IiLDIwOiJCdWZmZXIgZm9yIGFyY2hpdmUgY29tbWVudCBpcyB0b28gc21hbGwsIGNvbW1lbnQgdHJ1bmNhdGVkIiwyMToiVW5rbm93biBlcnJvciIsMjI6IlBhc3N3b3JkIGZvciBlbmNyeXB0ZWQgZmlsZSBvciBoZWFkZXIgaXMgbm90IHNwZWNpZmllZCIsMjM6IkNhbm5vdCBvcGVuIGZpbGUgc291cmNlIGZvciByZWZlcmVuY2UgcmVjb3JkIiwyNDoiV3JvbmcgcGFzc3dvcmQgaXMgc3BlY2lmaWVkIn07Y2xhc3Mgc3tjb25zdHJ1Y3Rvcih0PSIiKXt0aGlzLl9wYXNzd29yZD10LHRoaXMuX2FyY2hpdmU9bnVsbDt9Z2V0RmlsZUxpc3QoKXtsZXQgdCxbZSxyXT10aGlzLm9wZW5BcmMoITApO2lmKCJTVUNDRVNTIiE9PWUuc3RhdGUpdD1bZSxudWxsXTtlbHNlIHtsZXQgZSxuLGk9W107Zm9yKDtbZSxuXT10aGlzLnByb2Nlc3NOZXh0RmlsZSgoKT0+ITApLCJTVUNDRVNTIj09PWUuc3RhdGU7KWkucHVzaChuLmZpbGVIZWFkZXIpO3Q9IkVSQVJfRU5EX0FSQ0hJVkUiIT09ZS5yZWFzb24/W2UsbnVsbF06W3tzdGF0ZToiU1VDQ0VTUyJ9LHthcmNIZWFkZXI6cixmaWxlSGVhZGVyczppfV07fXJldHVybiB0aGlzLmNsb3NlQXJjKCksdH1leHRyYWN0QWxsKCl7bGV0IHQsW2Uscl09dGhpcy5vcGVuQXJjKCExKTtpZigiU1VDQ0VTUyIhPT1lLnN0YXRlKXQ9W2UsbnVsbF07ZWxzZSB7bGV0IGUsbixpPVtdO2Zvcig7W2Usbl09dGhpcy5wcm9jZXNzTmV4dEZpbGUoKCk9PiExKSwiU1VDQ0VTUyI9PT1lLnN0YXRlOylpLnB1c2gobik7dD0iRVJBUl9FTkRfQVJDSElWRSIhPT1lLnJlYXNvbj9bZSxudWxsXTpbe3N0YXRlOiJTVUNDRVNTIn0se2FyY0hlYWRlcjpyLGZpbGVzOml9XTt9cmV0dXJuIHRoaXMuY2xvc2VBcmMoKSx0fWV4dHJhY3RGaWxlcyh0LGUpe2xldCByLFtuLGldPXRoaXMub3BlbkFyYyghMSxlKSxvPXt9O2ZvcihsZXQgZT0wO2U8dC5sZW5ndGg7KytlKW9bdFtlXV09ZTtpZigiU1VDQ0VTUyIhPT1uLnN0YXRlKXI9W24sbnVsbF07ZWxzZSB7bGV0IGUsbixzPUFycmF5KHQubGVuZ3RoKS5maWxsKG51bGwpLHU9MDtmb3IoOzspe2xldCByPSExLGk9bnVsbDtpZihbZSxuXT10aGlzLnByb2Nlc3NOZXh0RmlsZSh0PT50IGluIG8/KGk9b1t0XSwhMSk6KHI9ITAsITApKSwiU1VDQ0VTUyIhPT1lLnN0YXRlKWJyZWFrO2lmKCFyJiYoc1tpXT1uLCsrdT09PXQubGVuZ3RoKSl7ZS5yZWFzb249IkVSQVJfRU5EX0FSQ0hJVkUiO2JyZWFrfX1yPSJFUkFSX0VORF9BUkNISVZFIiE9PWUucmVhc29uP1tlLG51bGxdOlt7c3RhdGU6IlNVQ0NFU1MifSx7YXJjSGVhZGVyOmksZmlsZXM6c31dO31yZXR1cm4gdGhpcy5jbG9zZUFyYygpLHJ9ZmlsZUNyZWF0ZWQodCl7fWNsb3NlKHQpe3RoaXMuX2xhc3RGaWxlQ29udGVudD10aGlzLmNsb3NlRmlsZSh0KTt9b3BlbkFyYyh0LGUpe24uRXh0LmN1cnJlbnQ9dGhpcyx0aGlzLl9hcmNoaXZlPW5ldyB1bnBhY2suUmFyQXJjaGl2ZTtsZXQgcixpPXRoaXMuX2FyY2hpdmUub3Blbih0aGlzLl9maWxlUGF0aCxlfHx0aGlzLl9wYXNzd29yZCx0KTtyZXR1cm4gcj0wIT09aS5zdGF0ZS5lcnJDb2RlP1t0aGlzLmdldEZhaWxJbmZvKGkuc3RhdGUuZXJyQ29kZSxpLnN0YXRlLmVyclR5cGUpLG51bGxdOlt7c3RhdGU6IlNVQ0NFU1MifSx7Y29tbWVudDppLmNvbW1lbnQsZmxhZ3M6e3ZvbHVtZTowIT0oMSZpLmZsYWdzKSxsb2NrOjAhPSg0JmkuZmxhZ3MpLHNvbGlkOjAhPSg4JmkuZmxhZ3MpLGF1dGhJbmZvOjAhPSgzMiZpLmZsYWdzKSxyZWNvdmVyeVJlY29yZDowIT0oNjQmaS5mbGFncyksaGVhZGVyRW5jcnlwdGVkOjAhPSgxMjgmaS5mbGFncyl9fV0sbi5FeHQuY3VycmVudD1udWxsLHJ9cHJvY2Vzc05leHRGaWxlKHQpe2xldCBlO24uRXh0LmN1cnJlbnQ9dGhpcztsZXQgcj10aGlzLl9hcmNoaXZlLmdldEZpbGVIZWFkZXIoKSxpPVt7c3RhdGU6IlNVQ0NFU1MifSxudWxsXTtpZigwPT09ci5zdGF0ZS5lcnJDb2RlKXtsZXQgZT10KHIubmFtZSk7dGhpcy5fbGFzdEZpbGVDb250ZW50PW51bGw7bGV0IG49dGhpcy5fYXJjaGl2ZS5yZWFkRmlsZShlKTswPT09bi5lcnJDb2RlfHxlfHwoaVswXT10aGlzLmdldEZhaWxJbmZvKG4uZXJyQ29kZSxuLmVyclR5cGUpLDIyPT09bi5lcnJDb2RlP249dGhpcy5fYXJjaGl2ZS5yZWFkRmlsZSghMCk6bi5lcnJDb2RlPTApLDA9PT1uLmVyckNvZGU/aVsxXT10aGlzLl9sYXN0RmlsZUNvbnRlbnQ6KHIuc3RhdGUuZXJyQ29kZT1uLmVyckNvZGUsci5zdGF0ZS5lcnJUeXBlPW4uZXJyVHlwZSksdGhpcy5fbGFzdEZpbGVDb250ZW50PW51bGw7fXJldHVybiBlPTAhPT1yLnN0YXRlLmVyckNvZGU/W3RoaXMuZ2V0RmFpbEluZm8oci5zdGF0ZS5lcnJDb2RlLHIuc3RhdGUuZXJyVHlwZSksbnVsbF06W3tzdGF0ZToiU1VDQ0VTUyJ9LHtmaWxlSGVhZGVyOntuYW1lOnIubmFtZSxmbGFnczp7ZW5jcnlwdGVkOjAhPSg0JnIuZmxhZ3MpLHNvbGlkOjAhPSgxNiZyLmZsYWdzKSxkaXJlY3Rvcnk6MCE9KDMyJnIuZmxhZ3MpfSxwYWNrU2l6ZTpyLnBhY2tTaXplLHVucFNpemU6ci51bnBTaXplLGNyYzpyLmNyYyx0aW1lOmZ1bmN0aW9uKHQpe2NvbnN0IGU9WzUsNiw1LDUsNCw3XTtsZXQgcj1bXTtmb3IobGV0IG4gb2YgZSlyLnB1c2godCYoMTw8biktMSksdD4+PW47bGV0IG49dD0+dDwxMD8iMCIrdDoiIit0O3JldHVybiBgJHsxOTgwKyhyPXIucmV2ZXJzZSgpKVswXX0tJHtuKHJbMV0pfS0ke24oclsyXSl9YCtgVCR7bihyWzNdKX06JHtuKHJbNF0pfToke24oMipyWzVdKX0uMDAwYH0oci50aW1lKSx1bnBWZXI6YCR7TWF0aC5mbG9vcihyLnVucFZlci8xMCl9LiR7ci51bnBWZXIlMTB9YCxtZXRob2Q6ZnVuY3Rpb24odCl7cmV0dXJuIHs0ODoiU3RvcmluZyIsNDk6IkZhc3Rlc3QiLDUwOiJGYXN0Iiw1MToiTm9ybWFsIiw1MjoiR29vZCIsNTM6IkJlc3QifVt0XXx8IlVua25vd24ifShyLm1ldGhvZCl9LGV4dHJhY3Q6aX1dLG4uRXh0LmN1cnJlbnQ9bnVsbCxlfWNsb3NlQXJjKCl7bi5FeHQuY3VycmVudD10aGlzLHRoaXMuX2FyY2hpdmUuZGVsZXRlKCksbi5FeHQuY3VycmVudD1udWxsLHRoaXMuX2FyY2hpdmU9bnVsbDt9Z2V0RmFpbEluZm8odCxlKXtyZXR1cm4ge3N0YXRlOiJGQUlMIixyZWFzb246aVt0XSxtc2c6b1t0XX19fXMuX2N1cnJlbnQ9bnVsbCxlLkV4dHJhY3Rvcj1zO30sZnVuY3Rpb24odCxlLHIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KSxlLkV4dD17Y3VycmVudDpudWxsfTt9LGZ1bmN0aW9uKHQsZSxyKXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSksZnVuY3Rpb24odCl7Zm9yKHZhciByIGluIHQpZS5oYXNPd25Qcm9wZXJ0eShyKXx8KGVbcl09dFtyXSk7fShyKDMpKTt2YXIgbj1yKDEpO2UuRXh0PW4uRXh0O30sZnVuY3Rpb24odCxlLHIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtjb25zdCBuPXIoNCksaT1yKDYpO2UuY3JlYXRlRXh0cmFjdG9yRnJvbURhdGE9ZnVuY3Rpb24odCxlPSIiKXtyZXR1cm4gbmV3IG4uRGF0YUV4dHJhY3Rvcih0LGUpfSxlLmNyZWF0ZUV4dHJhY3RvckZyb21GaWxlPWZ1bmN0aW9uKHQsZT0iIixyPSIiKXtyZXR1cm4gbmV3IGkuRmlsZUV4dHJhY3Rvcih0LGUscil9O30sZnVuY3Rpb24odCxlLHIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtjb25zdCBuPXIoNSksaT1yKDApO2UuRGF0YUV4dHJhY3Rvcj1jbGFzcyBleHRlbmRzIGkuRXh0cmFjdG9ye2NvbnN0cnVjdG9yKHQsZSl7c3VwZXIoZSksdGhpcy5kYXRhRmlsZXM9e30sdGhpcy5kYXRhRmlsZU1hcD17fSx0aGlzLmN1cnJlbnRGZD0xO2xldCByPXtmaWxlOm5ldyBuLkRhdGFGaWxlKG5ldyBVaW50OEFycmF5KHQpKSxmZDp0aGlzLmN1cnJlbnRGZCsrfTt0aGlzLl9maWxlUGF0aD0iX2RlZmF1bHRVbnJhckpTXy5yYXIiLHRoaXMuZGF0YUZpbGVzW3RoaXMuX2ZpbGVQYXRoXT1yLHRoaXMuZGF0YUZpbGVNYXBbci5mZF09dGhpcy5fZmlsZVBhdGg7fW9wZW4odCl7bGV0IGU9dGhpcy5kYXRhRmlsZXNbdF07cmV0dXJuIGU/ZS5mZDowfWNyZWF0ZSh0KXtsZXQgZT10aGlzLmN1cnJlbnRGZCsrO3JldHVybiB0aGlzLmRhdGFGaWxlc1t0XT17ZmlsZTpuZXcgbi5EYXRhRmlsZSxmZDp0aGlzLmN1cnJlbnRGZCsrfSx0aGlzLmRhdGFGaWxlTWFwW2VdPXQsZX1jbG9zZUZpbGUodCl7bGV0IGU9dGhpcy5kYXRhRmlsZXNbdGhpcy5kYXRhRmlsZU1hcFt0XV07aWYoIWUpcmV0dXJuIG51bGw7bGV0IHI9ZS5maWxlLnJlYWRBbGwoKTtyZXR1cm4gMSE9PXQ/KGRlbGV0ZSB0aGlzLmRhdGFGaWxlc1t0aGlzLmRhdGFGaWxlTWFwW3RdXSxkZWxldGUgdGhpcy5kYXRhRmlsZU1hcFt0XSk6ZS5maWxlLnNlZWsoMCwiU0VUIikscn1yZWFkKHQsZSxyKXtsZXQgbj10aGlzLmRhdGFGaWxlc1t0aGlzLmRhdGFGaWxlTWFwW3RdXTtpZighbilyZXR1cm4gLTE7bGV0IGk9bi5maWxlLnJlYWQocik7cmV0dXJuIG51bGw9PT1pPy0xOih1bnBhY2suSEVBUFU4LnNldChpLGUpLGkuYnl0ZUxlbmd0aCl9d3JpdGUodCxlLHIpe2xldCBuPXRoaXMuZGF0YUZpbGVzW3RoaXMuZGF0YUZpbGVNYXBbdF1dO3JldHVybiAhIW4mJihuLmZpbGUud3JpdGUodW5wYWNrLkhFQVBVOC5zbGljZShlLGUrcikpLCEwKX10ZWxsKHQpe2xldCBlPXRoaXMuZGF0YUZpbGVzW3RoaXMuZGF0YUZpbGVNYXBbdF1dO3JldHVybiBlP2UuZmlsZS50ZWxsKCk6LTF9c2Vlayh0LGUscil7bGV0IG49dGhpcy5kYXRhRmlsZXNbdGhpcy5kYXRhRmlsZU1hcFt0XV07cmV0dXJuICEhbiYmbi5maWxlLnNlZWsoZSxyKX19O30sZnVuY3Rpb24odCxlLHIpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCJfX2VzTW9kdWxlIix7dmFsdWU6ITB9KTtlLkRhdGFGaWxlPWNsYXNze2NvbnN0cnVjdG9yKHQpe3RoaXMuYnVmZmVycz1bXSx0aGlzLnBvcz0wLHRoaXMuc2l6ZT0wLHQmJih0aGlzLmJ1ZmZlcnMucHVzaCh0KSx0aGlzLnNpemU9dC5ieXRlTGVuZ3RoLHRoaXMucG9zPTApO31yZWFkKHQpe2lmKHRoaXMuZmxhdHRlbigpLHQrdGhpcy5wb3M+dGhpcy5zaXplKXJldHVybiBudWxsO2xldCBlPXRoaXMucG9zO3JldHVybiB0aGlzLnBvcys9dCx0aGlzLmJ1ZmZlcnNbMF0uc2xpY2UoZSx0aGlzLnBvcyl9cmVhZEFsbCgpe3JldHVybiB0aGlzLmZsYXR0ZW4oKSx0aGlzLmJ1ZmZlcnNbMF19d3JpdGUodCl7cmV0dXJuIHRoaXMuYnVmZmVycy5wdXNoKHQpLHRoaXMuc2l6ZSs9dC5ieXRlTGVuZ3RoLHRoaXMucG9zKz10LmJ5dGVMZW5ndGgsITB9dGVsbCgpe3JldHVybiB0aGlzLnBvc31zZWVrKHQsZSl7bGV0IHI9dGhpcy5wb3M7cmV0dXJuICJTRVQiPT09ZT9yPXQ6IkNVUiI9PT1lP3IrPXQ6cj10aGlzLnNpemUtdCwhKHI8MHx8cj50aGlzLnNpemV8fCh0aGlzLnBvcz1yLDApKX1mbGF0dGVuKCl7aWYodGhpcy5idWZmZXJzLmxlbmd0aDw9MSlyZXR1cm47bGV0IHQ9bmV3IFVpbnQ4QXJyYXkodGhpcy5zaXplKSxlPTA7Zm9yKGxldCByIG9mIHRoaXMuYnVmZmVycyl0LnNldChyLGUpLGUrPXIuYnl0ZUxlbmd0aDt0aGlzLmJ1ZmZlcnM9W3RdO319O30sZnVuY3Rpb24odCxlLHIpeyhmdW5jdGlvbih0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSk7Y29uc3Qgbj1yKDEyKSxpPXIoMTMpLG89cigwKTtlLkZpbGVFeHRyYWN0b3I9Y2xhc3MgZXh0ZW5kcyBvLkV4dHJhY3Rvcntjb25zdHJ1Y3Rvcih0LGUscil7c3VwZXIociksdGhpcy5fZmlsZVBhdGg9dCx0aGlzLmZpbGVNYXA9e30sdGhpcy5fdGFyZ2V0PWU7fW9wZW4odCl7bGV0IGU9bi5vcGVuU3luYyh0LCJyIik7cmV0dXJuIHRoaXMuZmlsZU1hcFtlXT17c2l6ZTpuLmZzdGF0U3luYyhlKS5zaXplLHBvczowLG5hbWU6dH0sZX1jcmVhdGUodCl7bGV0IGU9aS5qb2luKHRoaXMuX3RhcmdldCx0KTtpLnBhcnNlKGUpLmRpci5zcGxpdCgiLyIpLnJlZHVjZSgodCxlKT0+KHQrPWUrIi8iLG4uZXhpc3RzU3luYyh0KXx8bi5ta2RpclN5bmModCksdCksIiIpO2xldCByPW4ub3BlblN5bmMoZSwidyIpO3JldHVybiB0aGlzLmZpbGVNYXBbcl09e3NpemU6MCxwb3M6MCxuYW1lOnR9LHJ9Y2xvc2VGaWxlKHQpe3JldHVybiBkZWxldGUgdGhpcy5maWxlTWFwW3RdLG4uY2xvc2VTeW5jKHQpLG51bGx9cmVhZChlLHIsaSl7bGV0IG89dGhpcy5maWxlTWFwW2VdLHM9bmV3IHQoaSksdT1uLnJlYWRTeW5jKGUscywwLGksby5wb3MpO3JldHVybiB1bnBhY2suSEVBUFU4LnNldChzLHIpLG8ucG9zKz11LHV9d3JpdGUoZSxyLGkpe2xldCBvPXRoaXMuZmlsZU1hcFtlXSxzPW4ud3JpdGVTeW5jKGUsbmV3IHQodW5wYWNrLkhFQVBVOC5zdWJhcnJheShyLHIraSkpLDAsaSk7cmV0dXJuIG8ucG9zKz1zLG8uc2l6ZSs9cyxzPT09aX10ZWxsKHQpe3JldHVybiB0aGlzLmZpbGVNYXBbdF0ucG9zfXNlZWsodCxlLHIpe2xldCBuPXRoaXMuZmlsZU1hcFt0XSxpPW4ucG9zO3JldHVybiAiU0VUIj09PXI/aT0wOiJFTkQiPT09ciYmKGk9bi5zaXplKSwhKChpKz1lKTwwfHxpPm4uc2l6ZXx8KG4ucG9zPWksMCkpfX07fSkuY2FsbCh0aGlzLHIoNykuQnVmZmVyKTt9LGZ1bmN0aW9uKHQsZSxyKXsoZnVuY3Rpb24odCl7CiAgLyohCiAgICogVGhlIGJ1ZmZlciBtb2R1bGUgZnJvbSBub2RlLmpzLCBmb3IgdGhlIGJyb3dzZXIuCiAgICoKICAgKiBAYXV0aG9yICAgRmVyb3NzIEFib3VraGFkaWplaCA8ZmVyb3NzQGZlcm9zcy5vcmc+IDxodHRwOi8vZmVyb3NzLm9yZz4KICAgKiBAbGljZW5zZSAgTUlUCiAgICovCiAgdmFyIG49cig5KSxpPXIoMTApLG89cigxMSk7ZnVuY3Rpb24gcygpe3JldHVybiBhLlRZUEVEX0FSUkFZX1NVUFBPUlQ/MjE0NzQ4MzY0NzoxMDczNzQxODIzfWZ1bmN0aW9uIHUodCxlKXtpZihzKCk8ZSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCB0eXBlZCBhcnJheSBsZW5ndGgiKTtyZXR1cm4gYS5UWVBFRF9BUlJBWV9TVVBQT1JUPyh0PW5ldyBVaW50OEFycmF5KGUpKS5fX3Byb3RvX189YS5wcm90b3R5cGU6KG51bGw9PT10JiYodD1uZXcgYShlKSksdC5sZW5ndGg9ZSksdH1mdW5jdGlvbiBhKHQsZSxyKXtpZighKGEuVFlQRURfQVJSQVlfU1VQUE9SVHx8dGhpcyBpbnN0YW5jZW9mIGEpKXJldHVybiBuZXcgYSh0LGUscik7aWYoIm51bWJlciI9PXR5cGVvZiB0KXtpZigic3RyaW5nIj09dHlwZW9mIGUpdGhyb3cgbmV3IEVycm9yKCJJZiBlbmNvZGluZyBpcyBzcGVjaWZpZWQgdGhlbiB0aGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZyIpO3JldHVybiBsKHRoaXMsdCl9cmV0dXJuIGYodGhpcyx0LGUscil9ZnVuY3Rpb24gZih0LGUscixuKXtpZigibnVtYmVyIj09dHlwZW9mIGUpdGhyb3cgbmV3IFR5cGVFcnJvcignInZhbHVlIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBhIG51bWJlcicpO3JldHVybiAidW5kZWZpbmVkIiE9dHlwZW9mIEFycmF5QnVmZmVyJiZlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXI/ZnVuY3Rpb24odCxlLHIsbil7aWYoZS5ieXRlTGVuZ3RoLHI8MHx8ZS5ieXRlTGVuZ3RoPHIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIidvZmZzZXQnIGlzIG91dCBvZiBib3VuZHMiKTtpZihlLmJ5dGVMZW5ndGg8cisobnx8MCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIidsZW5ndGgnIGlzIG91dCBvZiBib3VuZHMiKTtlPXZvaWQgMD09PXImJnZvaWQgMD09PW4/bmV3IFVpbnQ4QXJyYXkoZSk6dm9pZCAwPT09bj9uZXcgVWludDhBcnJheShlLHIpOm5ldyBVaW50OEFycmF5KGUscixuKTthLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHQ9ZSkuX19wcm90b19fPWEucHJvdG90eXBlOnQ9Yyh0LGUpO3JldHVybiB0fSh0LGUscixuKToic3RyaW5nIj09dHlwZW9mIGU/ZnVuY3Rpb24odCxlLHIpeyJzdHJpbmciPT10eXBlb2YgciYmIiIhPT1yfHwocj0idXRmOCIpO2lmKCFhLmlzRW5jb2RpbmcocikpdGhyb3cgbmV3IFR5cGVFcnJvcignImVuY29kaW5nIiBtdXN0IGJlIGEgdmFsaWQgc3RyaW5nIGVuY29kaW5nJyk7dmFyIG49MHxnKGUsciksaT0odD11KHQsbikpLndyaXRlKGUscik7aSE9PW4mJih0PXQuc2xpY2UoMCxpKSk7cmV0dXJuIHR9KHQsZSxyKTpmdW5jdGlvbih0LGUpe2lmKGEuaXNCdWZmZXIoZSkpe3ZhciByPTB8cChlLmxlbmd0aCk7cmV0dXJuIDA9PT0odD11KHQscikpLmxlbmd0aD90OihlLmNvcHkodCwwLDAsciksdCl9aWYoZSl7aWYoInVuZGVmaW5lZCIhPXR5cGVvZiBBcnJheUJ1ZmZlciYmZS5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcnx8Imxlbmd0aCJpbiBlKXJldHVybiAibnVtYmVyIiE9dHlwZW9mIGUubGVuZ3RofHxmdW5jdGlvbih0KXtyZXR1cm4gdCE9dH0oZS5sZW5ndGgpP3UodCwwKTpjKHQsZSk7aWYoIkJ1ZmZlciI9PT1lLnR5cGUmJm8oZS5kYXRhKSlyZXR1cm4gYyh0LGUuZGF0YSl9dGhyb3cgbmV3IFR5cGVFcnJvcigiRmlyc3QgYXJndW1lbnQgbXVzdCBiZSBhIHN0cmluZywgQnVmZmVyLCBBcnJheUJ1ZmZlciwgQXJyYXksIG9yIGFycmF5LWxpa2Ugb2JqZWN0LiIpfSh0LGUpfWZ1bmN0aW9uIGgodCl7aWYoIm51bWJlciIhPXR5cGVvZiB0KXRocm93IG5ldyBUeXBlRXJyb3IoJyJzaXplIiBhcmd1bWVudCBtdXN0IGJlIGEgbnVtYmVyJyk7aWYodDwwKXRocm93IG5ldyBSYW5nZUVycm9yKCcic2l6ZSIgYXJndW1lbnQgbXVzdCBub3QgYmUgbmVnYXRpdmUnKX1mdW5jdGlvbiBsKHQsZSl7aWYoaChlKSx0PXUodCxlPDA/MDowfHAoZSkpLCFhLlRZUEVEX0FSUkFZX1NVUFBPUlQpZm9yKHZhciByPTA7cjxlOysrcil0W3JdPTA7cmV0dXJuIHR9ZnVuY3Rpb24gYyh0LGUpe3ZhciByPWUubGVuZ3RoPDA/MDowfHAoZS5sZW5ndGgpO3Q9dSh0LHIpO2Zvcih2YXIgbj0wO248cjtuKz0xKXRbbl09MjU1JmVbbl07cmV0dXJuIHR9ZnVuY3Rpb24gcCh0KXtpZih0Pj1zKCkpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkF0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gc2l6ZTogMHgiK3MoKS50b1N0cmluZygxNikrIiBieXRlcyIpO3JldHVybiAwfHR9ZnVuY3Rpb24gZyh0LGUpe2lmKGEuaXNCdWZmZXIodCkpcmV0dXJuIHQubGVuZ3RoO2lmKCJ1bmRlZmluZWQiIT10eXBlb2YgQXJyYXlCdWZmZXImJiJmdW5jdGlvbiI9PXR5cGVvZiBBcnJheUJ1ZmZlci5pc1ZpZXcmJihBcnJheUJ1ZmZlci5pc1ZpZXcodCl8fHQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikpcmV0dXJuIHQuYnl0ZUxlbmd0aDsic3RyaW5nIiE9dHlwZW9mIHQmJih0PSIiK3QpO3ZhciByPXQubGVuZ3RoO2lmKDA9PT1yKXJldHVybiAwO2Zvcih2YXIgbj0hMTs7KXN3aXRjaChlKXtjYXNlImFzY2lpIjpjYXNlImxhdGluMSI6Y2FzZSJiaW5hcnkiOnJldHVybiByO2Nhc2UidXRmOCI6Y2FzZSJ1dGYtOCI6Y2FzZSB2b2lkIDA6cmV0dXJuIGsodCkubGVuZ3RoO2Nhc2UidWNzMiI6Y2FzZSJ1Y3MtMiI6Y2FzZSJ1dGYxNmxlIjpjYXNlInV0Zi0xNmxlIjpyZXR1cm4gMipyO2Nhc2UiaGV4IjpyZXR1cm4gcj4+PjE7Y2FzZSJiYXNlNjQiOnJldHVybiBqKHQpLmxlbmd0aDtkZWZhdWx0OmlmKG4pcmV0dXJuIGsodCkubGVuZ3RoO2U9KCIiK2UpLnRvTG93ZXJDYXNlKCksbj0hMDt9fWZ1bmN0aW9uIGQodCxlLHIpe3ZhciBuPXRbZV07dFtlXT10W3JdLHRbcl09bjt9ZnVuY3Rpb24geSh0LGUscixuLGkpe2lmKDA9PT10Lmxlbmd0aClyZXR1cm4gLTE7aWYoInN0cmluZyI9PXR5cGVvZiByPyhuPXIscj0wKTpyPjIxNDc0ODM2NDc/cj0yMTQ3NDgzNjQ3OnI8LTIxNDc0ODM2NDgmJihyPS0yMTQ3NDgzNjQ4KSxyPStyLGlzTmFOKHIpJiYocj1pPzA6dC5sZW5ndGgtMSkscjwwJiYocj10Lmxlbmd0aCtyKSxyPj10Lmxlbmd0aCl7aWYoaSlyZXR1cm4gLTE7cj10Lmxlbmd0aC0xO31lbHNlIGlmKHI8MCl7aWYoIWkpcmV0dXJuIC0xO3I9MDt9aWYoInN0cmluZyI9PXR5cGVvZiBlJiYoZT1hLmZyb20oZSxuKSksYS5pc0J1ZmZlcihlKSlyZXR1cm4gMD09PWUubGVuZ3RoPy0xOncodCxlLHIsbixpKTtpZigibnVtYmVyIj09dHlwZW9mIGUpcmV0dXJuIGUmPTI1NSxhLlRZUEVEX0FSUkFZX1NVUFBPUlQmJiJmdW5jdGlvbiI9PXR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mP2k/VWludDhBcnJheS5wcm90b3R5cGUuaW5kZXhPZi5jYWxsKHQsZSxyKTpVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKHQsZSxyKTp3KHQsW2VdLHIsbixpKTt0aHJvdyBuZXcgVHlwZUVycm9yKCJ2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXIiKX1mdW5jdGlvbiB3KHQsZSxyLG4saSl7dmFyIG8scz0xLHU9dC5sZW5ndGgsYT1lLmxlbmd0aDtpZih2b2lkIDAhPT1uJiYoInVjczIiPT09KG49U3RyaW5nKG4pLnRvTG93ZXJDYXNlKCkpfHwidWNzLTIiPT09bnx8InV0ZjE2bGUiPT09bnx8InV0Zi0xNmxlIj09PW4pKXtpZih0Lmxlbmd0aDwyfHxlLmxlbmd0aDwyKXJldHVybiAtMTtzPTIsdS89MixhLz0yLHIvPTI7fWZ1bmN0aW9uIGYodCxlKXtyZXR1cm4gMT09PXM/dFtlXTp0LnJlYWRVSW50MTZCRShlKnMpfWlmKGkpe3ZhciBoPS0xO2ZvcihvPXI7bzx1O28rKylpZihmKHQsbyk9PT1mKGUsLTE9PT1oPzA6by1oKSl7aWYoLTE9PT1oJiYoaD1vKSxvLWgrMT09PWEpcmV0dXJuIGgqc31lbHNlIC0xIT09aCYmKG8tPW8taCksaD0tMTt9ZWxzZSBmb3IocithPnUmJihyPXUtYSksbz1yO28+PTA7by0tKXtmb3IodmFyIGw9ITAsYz0wO2M8YTtjKyspaWYoZih0LG8rYykhPT1mKGUsYykpe2w9ITE7YnJlYWt9aWYobClyZXR1cm4gb31yZXR1cm4gLTF9ZnVuY3Rpb24gRSh0LGUscixuKXtyPU51bWJlcihyKXx8MDt2YXIgaT10Lmxlbmd0aC1yO24/KG49TnVtYmVyKG4pKT5pJiYobj1pKTpuPWk7dmFyIG89ZS5sZW5ndGg7aWYobyUyIT0wKXRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgaGV4IHN0cmluZyIpO24+by8yJiYobj1vLzIpO2Zvcih2YXIgcz0wO3M8bjsrK3Mpe3ZhciB1PXBhcnNlSW50KGUuc3Vic3RyKDIqcywyKSwxNik7aWYoaXNOYU4odSkpcmV0dXJuIHM7dFtyK3NdPXU7fXJldHVybiBzfWZ1bmN0aW9uIHYodCxlLHIsbil7cmV0dXJuIHooayhlLHQubGVuZ3RoLXIpLHQscixuKX1mdW5jdGlvbiBBKHQsZSxyLG4pe3JldHVybiB6KGZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1bXSxyPTA7cjx0Lmxlbmd0aDsrK3IpZS5wdXNoKDI1NSZ0LmNoYXJDb2RlQXQocikpO3JldHVybiBlfShlKSx0LHIsbil9ZnVuY3Rpb24gXyh0LGUscixuKXtyZXR1cm4gQSh0LGUscixuKX1mdW5jdGlvbiBiKHQsZSxyLG4pe3JldHVybiB6KGooZSksdCxyLG4pfWZ1bmN0aW9uIG0odCxlLHIsbil7cmV0dXJuIHooZnVuY3Rpb24odCxlKXtmb3IodmFyIHIsbixpLG89W10scz0wO3M8dC5sZW5ndGgmJiEoKGUtPTIpPDApOysrcylyPXQuY2hhckNvZGVBdChzKSxuPXI+PjgsaT1yJTI1NixvLnB1c2goaSksby5wdXNoKG4pO3JldHVybiBvfShlLHQubGVuZ3RoLXIpLHQscixuKX1mdW5jdGlvbiBSKHQsZSxyKXtyZXR1cm4gMD09PWUmJnI9PT10Lmxlbmd0aD9uLmZyb21CeXRlQXJyYXkodCk6bi5mcm9tQnl0ZUFycmF5KHQuc2xpY2UoZSxyKSl9ZnVuY3Rpb24gUyh0LGUscil7cj1NYXRoLm1pbih0Lmxlbmd0aCxyKTtmb3IodmFyIG49W10saT1lO2k8cjspe3ZhciBvLHMsdSxhLGY9dFtpXSxoPW51bGwsbD1mPjIzOT80OmY+MjIzPzM6Zj4xOTE/MjoxO2lmKGkrbDw9cilzd2l0Y2gobCl7Y2FzZSAxOmY8MTI4JiYoaD1mKTticmVhaztjYXNlIDI6MTI4PT0oMTkyJihvPXRbaSsxXSkpJiYoYT0oMzEmZik8PDZ8NjMmbyk+MTI3JiYoaD1hKTticmVhaztjYXNlIDM6bz10W2krMV0scz10W2krMl0sMTI4PT0oMTkyJm8pJiYxMjg9PSgxOTImcykmJihhPSgxNSZmKTw8MTJ8KDYzJm8pPDw2fDYzJnMpPjIwNDcmJihhPDU1Mjk2fHxhPjU3MzQzKSYmKGg9YSk7YnJlYWs7Y2FzZSA0Om89dFtpKzFdLHM9dFtpKzJdLHU9dFtpKzNdLDEyOD09KDE5MiZvKSYmMTI4PT0oMTkyJnMpJiYxMjg9PSgxOTImdSkmJihhPSgxNSZmKTw8MTh8KDYzJm8pPDwxMnwoNjMmcyk8PDZ8NjMmdSk+NjU1MzUmJmE8MTExNDExMiYmKGg9YSk7fW51bGw9PT1oPyhoPTY1NTMzLGw9MSk6aD42NTUzNSYmKGgtPTY1NTM2LG4ucHVzaChoPj4+MTAmMTAyM3w1NTI5NiksaD01NjMyMHwxMDIzJmgpLG4ucHVzaChoKSxpKz1sO31yZXR1cm4gZnVuY3Rpb24odCl7dmFyIGU9dC5sZW5ndGg7aWYoZTw9VClyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShTdHJpbmcsdCk7dmFyIHI9IiIsbj0wO2Zvcig7bjxlOylyKz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyx0LnNsaWNlKG4sbis9VCkpO3JldHVybiByfShuKX1lLkJ1ZmZlcj1hLGUuU2xvd0J1ZmZlcj1mdW5jdGlvbih0KXsrdCE9dCYmKHQ9MCk7cmV0dXJuIGEuYWxsb2MoK3QpfSxlLklOU1BFQ1RfTUFYX0JZVEVTPTUwLGEuVFlQRURfQVJSQVlfU1VQUE9SVD12b2lkIDAhPT10LlRZUEVEX0FSUkFZX1NVUFBPUlQ/dC5UWVBFRF9BUlJBWV9TVVBQT1JUOmZ1bmN0aW9uKCl7dHJ5e3ZhciB0PW5ldyBVaW50OEFycmF5KDEpO3JldHVybiB0Ll9fcHJvdG9fXz17X19wcm90b19fOlVpbnQ4QXJyYXkucHJvdG90eXBlLGZvbzpmdW5jdGlvbigpe3JldHVybiA0Mn19LDQyPT09dC5mb28oKSYmImZ1bmN0aW9uIj09dHlwZW9mIHQuc3ViYXJyYXkmJjA9PT10LnN1YmFycmF5KDEsMSkuYnl0ZUxlbmd0aH1jYXRjaCh0KXtyZXR1cm4gITF9fSgpLGUua01heExlbmd0aD1zKCksYS5wb29sU2l6ZT04MTkyLGEuX2F1Z21lbnQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQuX19wcm90b19fPWEucHJvdG90eXBlLHR9LGEuZnJvbT1mdW5jdGlvbih0LGUscil7cmV0dXJuIGYobnVsbCx0LGUscil9LGEuVFlQRURfQVJSQVlfU1VQUE9SVCYmKGEucHJvdG90eXBlLl9fcHJvdG9fXz1VaW50OEFycmF5LnByb3RvdHlwZSxhLl9fcHJvdG9fXz1VaW50OEFycmF5LCJ1bmRlZmluZWQiIT10eXBlb2YgU3ltYm9sJiZTeW1ib2wuc3BlY2llcyYmYVtTeW1ib2wuc3BlY2llc109PT1hJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoYSxTeW1ib2wuc3BlY2llcyx7dmFsdWU6bnVsbCxjb25maWd1cmFibGU6ITB9KSksYS5hbGxvYz1mdW5jdGlvbih0LGUscil7cmV0dXJuIGZ1bmN0aW9uKHQsZSxyLG4pe3JldHVybiBoKGUpLGU8PTA/dSh0LGUpOnZvaWQgMCE9PXI/InN0cmluZyI9PXR5cGVvZiBuP3UodCxlKS5maWxsKHIsbik6dSh0LGUpLmZpbGwocik6dSh0LGUpfShudWxsLHQsZSxyKX0sYS5hbGxvY1Vuc2FmZT1mdW5jdGlvbih0KXtyZXR1cm4gbChudWxsLHQpfSxhLmFsbG9jVW5zYWZlU2xvdz1mdW5jdGlvbih0KXtyZXR1cm4gbChudWxsLHQpfSxhLmlzQnVmZmVyPWZ1bmN0aW9uKHQpe3JldHVybiAhKG51bGw9PXR8fCF0Ll9pc0J1ZmZlcil9LGEuY29tcGFyZT1mdW5jdGlvbih0LGUpe2lmKCFhLmlzQnVmZmVyKHQpfHwhYS5pc0J1ZmZlcihlKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudHMgbXVzdCBiZSBCdWZmZXJzIik7aWYodD09PWUpcmV0dXJuIDA7Zm9yKHZhciByPXQubGVuZ3RoLG49ZS5sZW5ndGgsaT0wLG89TWF0aC5taW4ocixuKTtpPG87KytpKWlmKHRbaV0hPT1lW2ldKXtyPXRbaV0sbj1lW2ldO2JyZWFrfXJldHVybiByPG4/LTE6bjxyPzE6MH0sYS5pc0VuY29kaW5nPWZ1bmN0aW9uKHQpe3N3aXRjaChTdHJpbmcodCkudG9Mb3dlckNhc2UoKSl7Y2FzZSJoZXgiOmNhc2UidXRmOCI6Y2FzZSJ1dGYtOCI6Y2FzZSJhc2NpaSI6Y2FzZSJsYXRpbjEiOmNhc2UiYmluYXJ5IjpjYXNlImJhc2U2NCI6Y2FzZSJ1Y3MyIjpjYXNlInVjcy0yIjpjYXNlInV0ZjE2bGUiOmNhc2UidXRmLTE2bGUiOnJldHVybiAhMDtkZWZhdWx0OnJldHVybiAhMX19LGEuY29uY2F0PWZ1bmN0aW9uKHQsZSl7aWYoIW8odCkpdGhyb3cgbmV3IFR5cGVFcnJvcignImxpc3QiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpO2lmKDA9PT10Lmxlbmd0aClyZXR1cm4gYS5hbGxvYygwKTt2YXIgcjtpZih2b2lkIDA9PT1lKWZvcihlPTAscj0wO3I8dC5sZW5ndGg7KytyKWUrPXRbcl0ubGVuZ3RoO3ZhciBuPWEuYWxsb2NVbnNhZmUoZSksaT0wO2ZvcihyPTA7cjx0Lmxlbmd0aDsrK3Ipe3ZhciBzPXRbcl07aWYoIWEuaXNCdWZmZXIocykpdGhyb3cgbmV3IFR5cGVFcnJvcignImxpc3QiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpO3MuY29weShuLGkpLGkrPXMubGVuZ3RoO31yZXR1cm4gbn0sYS5ieXRlTGVuZ3RoPWcsYS5wcm90b3R5cGUuX2lzQnVmZmVyPSEwLGEucHJvdG90eXBlLnN3YXAxNj1mdW5jdGlvbigpe3ZhciB0PXRoaXMubGVuZ3RoO2lmKHQlMiE9MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHMiKTtmb3IodmFyIGU9MDtlPHQ7ZSs9MilkKHRoaXMsZSxlKzEpO3JldHVybiB0aGlzfSxhLnByb3RvdHlwZS5zd2FwMzI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLmxlbmd0aDtpZih0JTQhPTApdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkJ1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAzMi1iaXRzIik7Zm9yKHZhciBlPTA7ZTx0O2UrPTQpZCh0aGlzLGUsZSszKSxkKHRoaXMsZSsxLGUrMik7cmV0dXJuIHRoaXN9LGEucHJvdG90eXBlLnN3YXA2ND1mdW5jdGlvbigpe3ZhciB0PXRoaXMubGVuZ3RoO2lmKHQlOCE9MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHMiKTtmb3IodmFyIGU9MDtlPHQ7ZSs9OClkKHRoaXMsZSxlKzcpLGQodGhpcyxlKzEsZSs2KSxkKHRoaXMsZSsyLGUrNSksZCh0aGlzLGUrMyxlKzQpO3JldHVybiB0aGlzfSxhLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3ZhciB0PTB8dGhpcy5sZW5ndGg7cmV0dXJuIDA9PT10PyIiOjA9PT1hcmd1bWVudHMubGVuZ3RoP1ModGhpcywwLHQpOmZ1bmN0aW9uKHQsZSxyKXt2YXIgbj0hMTtpZigodm9pZCAwPT09ZXx8ZTwwKSYmKGU9MCksZT50aGlzLmxlbmd0aClyZXR1cm4gIiI7aWYoKHZvaWQgMD09PXJ8fHI+dGhpcy5sZW5ndGgpJiYocj10aGlzLmxlbmd0aCkscjw9MClyZXR1cm4gIiI7aWYoKHI+Pj49MCk8PShlPj4+PTApKXJldHVybiAiIjtmb3IodHx8KHQ9InV0ZjgiKTs7KXN3aXRjaCh0KXtjYXNlImhleCI6cmV0dXJuIFUodGhpcyxlLHIpO2Nhc2UidXRmOCI6Y2FzZSJ1dGYtOCI6cmV0dXJuIFModGhpcyxlLHIpO2Nhc2UiYXNjaWkiOnJldHVybiBQKHRoaXMsZSxyKTtjYXNlImxhdGluMSI6Y2FzZSJiaW5hcnkiOnJldHVybiBDKHRoaXMsZSxyKTtjYXNlImJhc2U2NCI6cmV0dXJuIFIodGhpcyxlLHIpO2Nhc2UidWNzMiI6Y2FzZSJ1Y3MtMiI6Y2FzZSJ1dGYxNmxlIjpjYXNlInV0Zi0xNmxlIjpyZXR1cm4gQih0aGlzLGUscik7ZGVmYXVsdDppZihuKXRocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gZW5jb2Rpbmc6ICIrdCk7dD0odCsiIikudG9Mb3dlckNhc2UoKSxuPSEwO319LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0sYS5wcm90b3R5cGUuZXF1YWxzPWZ1bmN0aW9uKHQpe2lmKCFhLmlzQnVmZmVyKHQpKXRocm93IG5ldyBUeXBlRXJyb3IoIkFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIiKTtyZXR1cm4gdGhpcz09PXR8fDA9PT1hLmNvbXBhcmUodGhpcyx0KX0sYS5wcm90b3R5cGUuaW5zcGVjdD1mdW5jdGlvbigpe3ZhciB0PSIiLHI9ZS5JTlNQRUNUX01BWF9CWVRFUztyZXR1cm4gdGhpcy5sZW5ndGg+MCYmKHQ9dGhpcy50b1N0cmluZygiaGV4IiwwLHIpLm1hdGNoKC8uezJ9L2cpLmpvaW4oIiAiKSx0aGlzLmxlbmd0aD5yJiYodCs9IiAuLi4gIikpLCI8QnVmZmVyICIrdCsiPiJ9LGEucHJvdG90eXBlLmNvbXBhcmU9ZnVuY3Rpb24odCxlLHIsbixpKXtpZighYS5pc0J1ZmZlcih0KSl0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIik7aWYodm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09ciYmKHI9dD90Lmxlbmd0aDowKSx2b2lkIDA9PT1uJiYobj0wKSx2b2lkIDA9PT1pJiYoaT10aGlzLmxlbmd0aCksZTwwfHxyPnQubGVuZ3RofHxuPDB8fGk+dGhpcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIm91dCBvZiByYW5nZSBpbmRleCIpO2lmKG4+PWkmJmU+PXIpcmV0dXJuIDA7aWYobj49aSlyZXR1cm4gLTE7aWYoZT49cilyZXR1cm4gMTtpZihlPj4+PTAscj4+Pj0wLG4+Pj49MCxpPj4+PTAsdGhpcz09PXQpcmV0dXJuIDA7Zm9yKHZhciBvPWktbixzPXItZSx1PU1hdGgubWluKG8scyksZj10aGlzLnNsaWNlKG4saSksaD10LnNsaWNlKGUsciksbD0wO2w8dTsrK2wpaWYoZltsXSE9PWhbbF0pe289ZltsXSxzPWhbbF07YnJlYWt9cmV0dXJuIG88cz8tMTpzPG8/MTowfSxhLnByb3RvdHlwZS5pbmNsdWRlcz1mdW5jdGlvbih0LGUscil7cmV0dXJuIC0xIT09dGhpcy5pbmRleE9mKHQsZSxyKX0sYS5wcm90b3R5cGUuaW5kZXhPZj1mdW5jdGlvbih0LGUscil7cmV0dXJuIHkodGhpcyx0LGUsciwhMCl9LGEucHJvdG90eXBlLmxhc3RJbmRleE9mPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4geSh0aGlzLHQsZSxyLCExKX0sYS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCxlLHIsbil7aWYodm9pZCAwPT09ZSluPSJ1dGY4IixyPXRoaXMubGVuZ3RoLGU9MDtlbHNlIGlmKHZvaWQgMD09PXImJiJzdHJpbmciPT10eXBlb2YgZSluPWUscj10aGlzLmxlbmd0aCxlPTA7ZWxzZSB7aWYoIWlzRmluaXRlKGUpKXRocm93IG5ldyBFcnJvcigiQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQiKTtlfD0wLGlzRmluaXRlKHIpPyhyfD0wLHZvaWQgMD09PW4mJihuPSJ1dGY4IikpOihuPXIscj12b2lkIDApO312YXIgaT10aGlzLmxlbmd0aC1lO2lmKCh2b2lkIDA9PT1yfHxyPmkpJiYocj1pKSx0Lmxlbmd0aD4wJiYocjwwfHxlPDApfHxlPnRoaXMubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJBdHRlbXB0IHRvIHdyaXRlIG91dHNpZGUgYnVmZmVyIGJvdW5kcyIpO258fChuPSJ1dGY4Iik7Zm9yKHZhciBvPSExOzspc3dpdGNoKG4pe2Nhc2UiaGV4IjpyZXR1cm4gRSh0aGlzLHQsZSxyKTtjYXNlInV0ZjgiOmNhc2UidXRmLTgiOnJldHVybiB2KHRoaXMsdCxlLHIpO2Nhc2UiYXNjaWkiOnJldHVybiBBKHRoaXMsdCxlLHIpO2Nhc2UibGF0aW4xIjpjYXNlImJpbmFyeSI6cmV0dXJuIF8odGhpcyx0LGUscik7Y2FzZSJiYXNlNjQiOnJldHVybiBiKHRoaXMsdCxlLHIpO2Nhc2UidWNzMiI6Y2FzZSJ1Y3MtMiI6Y2FzZSJ1dGYxNmxlIjpjYXNlInV0Zi0xNmxlIjpyZXR1cm4gbSh0aGlzLHQsZSxyKTtkZWZhdWx0OmlmKG8pdGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBlbmNvZGluZzogIituKTtuPSgiIituKS50b0xvd2VyQ2FzZSgpLG89ITA7fX0sYS5wcm90b3R5cGUudG9KU09OPWZ1bmN0aW9uKCl7cmV0dXJuIHt0eXBlOiJCdWZmZXIiLGRhdGE6QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyfHx0aGlzLDApfX07dmFyIFQ9NDA5NjtmdW5jdGlvbiBQKHQsZSxyKXt2YXIgbj0iIjtyPU1hdGgubWluKHQubGVuZ3RoLHIpO2Zvcih2YXIgaT1lO2k8cjsrK2kpbis9U3RyaW5nLmZyb21DaGFyQ29kZSgxMjcmdFtpXSk7cmV0dXJuIG59ZnVuY3Rpb24gQyh0LGUscil7dmFyIG49IiI7cj1NYXRoLm1pbih0Lmxlbmd0aCxyKTtmb3IodmFyIGk9ZTtpPHI7KytpKW4rPVN0cmluZy5mcm9tQ2hhckNvZGUodFtpXSk7cmV0dXJuIG59ZnVuY3Rpb24gVSh0LGUscil7dmFyIG49dC5sZW5ndGg7KCFlfHxlPDApJiYoZT0wKSwoIXJ8fHI8MHx8cj5uKSYmKHI9bik7Zm9yKHZhciBpPSIiLG89ZTtvPHI7KytvKWkrPU4odFtvXSk7cmV0dXJuIGl9ZnVuY3Rpb24gQih0LGUscil7Zm9yKHZhciBuPXQuc2xpY2UoZSxyKSxpPSIiLG89MDtvPG4ubGVuZ3RoO28rPTIpaSs9U3RyaW5nLmZyb21DaGFyQ29kZShuW29dKzI1NipuW28rMV0pO3JldHVybiBpfWZ1bmN0aW9uIEYodCxlLHIpe2lmKHQlMSE9MHx8dDwwKXRocm93IG5ldyBSYW5nZUVycm9yKCJvZmZzZXQgaXMgbm90IHVpbnQiKTtpZih0K2U+cil0aHJvdyBuZXcgUmFuZ2VFcnJvcigiVHJ5aW5nIHRvIGFjY2VzcyBiZXlvbmQgYnVmZmVyIGxlbmd0aCIpfWZ1bmN0aW9uIE0odCxlLHIsbixpLG8pe2lmKCFhLmlzQnVmZmVyKHQpKXRocm93IG5ldyBUeXBlRXJyb3IoJyJidWZmZXIiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKTtpZihlPml8fGU8byl0aHJvdyBuZXcgUmFuZ2VFcnJvcignInZhbHVlIiBhcmd1bWVudCBpcyBvdXQgb2YgYm91bmRzJyk7aWYocituPnQubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCBvdXQgb2YgcmFuZ2UiKX1mdW5jdGlvbiB4KHQsZSxyLG4pe2U8MCYmKGU9NjU1MzUrZSsxKTtmb3IodmFyIGk9MCxvPU1hdGgubWluKHQubGVuZ3RoLXIsMik7aTxvOysraSl0W3IraV09KGUmMjU1PDw4KihuP2k6MS1pKSk+Pj44KihuP2k6MS1pKTt9ZnVuY3Rpb24gSSh0LGUscixuKXtlPDAmJihlPTQyOTQ5NjcyOTUrZSsxKTtmb3IodmFyIGk9MCxvPU1hdGgubWluKHQubGVuZ3RoLXIsNCk7aTxvOysraSl0W3IraV09ZT4+PjgqKG4/aTozLWkpJjI1NTt9ZnVuY3Rpb24gTyh0LGUscixuLGksbyl7aWYocituPnQubGVuZ3RoKXRocm93IG5ldyBSYW5nZUVycm9yKCJJbmRleCBvdXQgb2YgcmFuZ2UiKTtpZihyPDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoIkluZGV4IG91dCBvZiByYW5nZSIpfWZ1bmN0aW9uIFkodCxlLHIsbixvKXtyZXR1cm4gb3x8Tyh0LDAsciw0KSxpLndyaXRlKHQsZSxyLG4sMjMsNCkscis0fWZ1bmN0aW9uIEwodCxlLHIsbixvKXtyZXR1cm4gb3x8Tyh0LDAsciw4KSxpLndyaXRlKHQsZSxyLG4sNTIsOCkscis4fWEucHJvdG90eXBlLnNsaWNlPWZ1bmN0aW9uKHQsZSl7dmFyIHIsbj10aGlzLmxlbmd0aDtpZih0PX5+dCxlPXZvaWQgMD09PWU/bjp+fmUsdDwwPyh0Kz1uKTwwJiYodD0wKTp0Pm4mJih0PW4pLGU8MD8oZSs9bik8MCYmKGU9MCk6ZT5uJiYoZT1uKSxlPHQmJihlPXQpLGEuVFlQRURfQVJSQVlfU1VQUE9SVCkocj10aGlzLnN1YmFycmF5KHQsZSkpLl9fcHJvdG9fXz1hLnByb3RvdHlwZTtlbHNlIHt2YXIgaT1lLXQ7cj1uZXcgYShpLHZvaWQgMCk7Zm9yKHZhciBvPTA7bzxpOysrbylyW29dPXRoaXNbbyt0XTt9cmV0dXJuIHJ9LGEucHJvdG90eXBlLnJlYWRVSW50TEU9ZnVuY3Rpb24odCxlLHIpe3R8PTAsZXw9MCxyfHxGKHQsZSx0aGlzLmxlbmd0aCk7Zm9yKHZhciBuPXRoaXNbdF0saT0xLG89MDsrK288ZSYmKGkqPTI1Nik7KW4rPXRoaXNbdCtvXSppO3JldHVybiBufSxhLnByb3RvdHlwZS5yZWFkVUludEJFPWZ1bmN0aW9uKHQsZSxyKXt0fD0wLGV8PTAscnx8Rih0LGUsdGhpcy5sZW5ndGgpO2Zvcih2YXIgbj10aGlzW3QrLS1lXSxpPTE7ZT4wJiYoaSo9MjU2KTspbis9dGhpc1t0Ky0tZV0qaTtyZXR1cm4gbn0sYS5wcm90b3R5cGUucmVhZFVJbnQ4PWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fEYodCwxLHRoaXMubGVuZ3RoKSx0aGlzW3RdfSxhLnByb3RvdHlwZS5yZWFkVUludDE2TEU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8Rih0LDIsdGhpcy5sZW5ndGgpLHRoaXNbdF18dGhpc1t0KzFdPDw4fSxhLnByb3RvdHlwZS5yZWFkVUludDE2QkU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8Rih0LDIsdGhpcy5sZW5ndGgpLHRoaXNbdF08PDh8dGhpc1t0KzFdfSxhLnByb3RvdHlwZS5yZWFkVUludDMyTEU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8Rih0LDQsdGhpcy5sZW5ndGgpLCh0aGlzW3RdfHRoaXNbdCsxXTw8OHx0aGlzW3QrMl08PDE2KSsxNjc3NzIxNip0aGlzW3QrM119LGEucHJvdG90eXBlLnJlYWRVSW50MzJCRT1mdW5jdGlvbih0LGUpe3JldHVybiBlfHxGKHQsNCx0aGlzLmxlbmd0aCksMTY3NzcyMTYqdGhpc1t0XSsodGhpc1t0KzFdPDwxNnx0aGlzW3QrMl08PDh8dGhpc1t0KzNdKX0sYS5wcm90b3R5cGUucmVhZEludExFPWZ1bmN0aW9uKHQsZSxyKXt0fD0wLGV8PTAscnx8Rih0LGUsdGhpcy5sZW5ndGgpO2Zvcih2YXIgbj10aGlzW3RdLGk9MSxvPTA7KytvPGUmJihpKj0yNTYpOyluKz10aGlzW3Qrb10qaTtyZXR1cm4gbj49KGkqPTEyOCkmJihuLT1NYXRoLnBvdygyLDgqZSkpLG59LGEucHJvdG90eXBlLnJlYWRJbnRCRT1mdW5jdGlvbih0LGUscil7dHw9MCxlfD0wLHJ8fEYodCxlLHRoaXMubGVuZ3RoKTtmb3IodmFyIG49ZSxpPTEsbz10aGlzW3QrLS1uXTtuPjAmJihpKj0yNTYpOylvKz10aGlzW3QrLS1uXSppO3JldHVybiBvPj0oaSo9MTI4KSYmKG8tPU1hdGgucG93KDIsOCplKSksb30sYS5wcm90b3R5cGUucmVhZEludDg9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8Rih0LDEsdGhpcy5sZW5ndGgpLDEyOCZ0aGlzW3RdPy0xKigyNTUtdGhpc1t0XSsxKTp0aGlzW3RdfSxhLnByb3RvdHlwZS5yZWFkSW50MTZMRT1mdW5jdGlvbih0LGUpe2V8fEYodCwyLHRoaXMubGVuZ3RoKTt2YXIgcj10aGlzW3RdfHRoaXNbdCsxXTw8ODtyZXR1cm4gMzI3Njgmcj80Mjk0OTAxNzYwfHI6cn0sYS5wcm90b3R5cGUucmVhZEludDE2QkU9ZnVuY3Rpb24odCxlKXtlfHxGKHQsMix0aGlzLmxlbmd0aCk7dmFyIHI9dGhpc1t0KzFdfHRoaXNbdF08PDg7cmV0dXJuIDMyNzY4JnI/NDI5NDkwMTc2MHxyOnJ9LGEucHJvdG90eXBlLnJlYWRJbnQzMkxFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fEYodCw0LHRoaXMubGVuZ3RoKSx0aGlzW3RdfHRoaXNbdCsxXTw8OHx0aGlzW3QrMl08PDE2fHRoaXNbdCszXTw8MjR9LGEucHJvdG90eXBlLnJlYWRJbnQzMkJFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fEYodCw0LHRoaXMubGVuZ3RoKSx0aGlzW3RdPDwyNHx0aGlzW3QrMV08PDE2fHRoaXNbdCsyXTw8OHx0aGlzW3QrM119LGEucHJvdG90eXBlLnJlYWRGbG9hdExFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fEYodCw0LHRoaXMubGVuZ3RoKSxpLnJlYWQodGhpcyx0LCEwLDIzLDQpfSxhLnByb3RvdHlwZS5yZWFkRmxvYXRCRT1mdW5jdGlvbih0LGUpe3JldHVybiBlfHxGKHQsNCx0aGlzLmxlbmd0aCksaS5yZWFkKHRoaXMsdCwhMSwyMyw0KX0sYS5wcm90b3R5cGUucmVhZERvdWJsZUxFPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGV8fEYodCw4LHRoaXMubGVuZ3RoKSxpLnJlYWQodGhpcyx0LCEwLDUyLDgpfSxhLnByb3RvdHlwZS5yZWFkRG91YmxlQkU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZXx8Rih0LDgsdGhpcy5sZW5ndGgpLGkucmVhZCh0aGlzLHQsITEsNTIsOCl9LGEucHJvdG90eXBlLndyaXRlVUludExFPWZ1bmN0aW9uKHQsZSxyLG4peyh0PSt0LGV8PTAscnw9MCxuKXx8TSh0aGlzLHQsZSxyLE1hdGgucG93KDIsOCpyKS0xLDApO3ZhciBpPTEsbz0wO2Zvcih0aGlzW2VdPTI1NSZ0OysrbzxyJiYoaSo9MjU2KTspdGhpc1tlK29dPXQvaSYyNTU7cmV0dXJuIGUrcn0sYS5wcm90b3R5cGUud3JpdGVVSW50QkU9ZnVuY3Rpb24odCxlLHIsbil7KHQ9K3QsZXw9MCxyfD0wLG4pfHxNKHRoaXMsdCxlLHIsTWF0aC5wb3coMiw4KnIpLTEsMCk7dmFyIGk9ci0xLG89MTtmb3IodGhpc1tlK2ldPTI1NSZ0Oy0taT49MCYmKG8qPTI1Nik7KXRoaXNbZStpXT10L28mMjU1O3JldHVybiBlK3J9LGEucHJvdG90eXBlLndyaXRlVUludDg9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0PSt0LGV8PTAscnx8TSh0aGlzLHQsZSwxLDI1NSwwKSxhLlRZUEVEX0FSUkFZX1NVUFBPUlR8fCh0PU1hdGguZmxvb3IodCkpLHRoaXNbZV09MjU1JnQsZSsxfSxhLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdD0rdCxlfD0wLHJ8fE0odGhpcyx0LGUsMiw2NTUzNSwwKSxhLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbZV09MjU1JnQsdGhpc1tlKzFdPXQ+Pj44KTp4KHRoaXMsdCxlLCEwKSxlKzJ9LGEucHJvdG90eXBlLndyaXRlVUludDE2QkU9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0PSt0LGV8PTAscnx8TSh0aGlzLHQsZSwyLDY1NTM1LDApLGEuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tlXT10Pj4+OCx0aGlzW2UrMV09MjU1JnQpOngodGhpcyx0LGUsITEpLGUrMn0sYS5wcm90b3R5cGUud3JpdGVVSW50MzJMRT1mdW5jdGlvbih0LGUscil7cmV0dXJuIHQ9K3QsZXw9MCxyfHxNKHRoaXMsdCxlLDQsNDI5NDk2NzI5NSwwKSxhLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbZSszXT10Pj4+MjQsdGhpc1tlKzJdPXQ+Pj4xNix0aGlzW2UrMV09dD4+PjgsdGhpc1tlXT0yNTUmdCk6SSh0aGlzLHQsZSwhMCksZSs0fSxhLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdD0rdCxlfD0wLHJ8fE0odGhpcyx0LGUsNCw0Mjk0OTY3Mjk1LDApLGEuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tlXT10Pj4+MjQsdGhpc1tlKzFdPXQ+Pj4xNix0aGlzW2UrMl09dD4+PjgsdGhpc1tlKzNdPTI1NSZ0KTpJKHRoaXMsdCxlLCExKSxlKzR9LGEucHJvdG90eXBlLndyaXRlSW50TEU9ZnVuY3Rpb24odCxlLHIsbil7aWYodD0rdCxlfD0wLCFuKXt2YXIgaT1NYXRoLnBvdygyLDgqci0xKTtNKHRoaXMsdCxlLHIsaS0xLC1pKTt9dmFyIG89MCxzPTEsdT0wO2Zvcih0aGlzW2VdPTI1NSZ0OysrbzxyJiYocyo9MjU2KTspdDwwJiYwPT09dSYmMCE9PXRoaXNbZStvLTFdJiYodT0xKSx0aGlzW2Urb109KHQvcz4+MCktdSYyNTU7cmV0dXJuIGUrcn0sYS5wcm90b3R5cGUud3JpdGVJbnRCRT1mdW5jdGlvbih0LGUscixuKXtpZih0PSt0LGV8PTAsIW4pe3ZhciBpPU1hdGgucG93KDIsOCpyLTEpO00odGhpcyx0LGUscixpLTEsLWkpO312YXIgbz1yLTEscz0xLHU9MDtmb3IodGhpc1tlK29dPTI1NSZ0Oy0tbz49MCYmKHMqPTI1Nik7KXQ8MCYmMD09PXUmJjAhPT10aGlzW2UrbysxXSYmKHU9MSksdGhpc1tlK29dPSh0L3M+PjApLXUmMjU1O3JldHVybiBlK3J9LGEucHJvdG90eXBlLndyaXRlSW50OD1mdW5jdGlvbih0LGUscil7cmV0dXJuIHQ9K3QsZXw9MCxyfHxNKHRoaXMsdCxlLDEsMTI3LC0xMjgpLGEuVFlQRURfQVJSQVlfU1VQUE9SVHx8KHQ9TWF0aC5mbG9vcih0KSksdDwwJiYodD0yNTUrdCsxKSx0aGlzW2VdPTI1NSZ0LGUrMX0sYS5wcm90b3R5cGUud3JpdGVJbnQxNkxFPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdD0rdCxlfD0wLHJ8fE0odGhpcyx0LGUsMiwzMjc2NywtMzI3NjgpLGEuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tlXT0yNTUmdCx0aGlzW2UrMV09dD4+PjgpOngodGhpcyx0LGUsITApLGUrMn0sYS5wcm90b3R5cGUud3JpdGVJbnQxNkJFPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdD0rdCxlfD0wLHJ8fE0odGhpcyx0LGUsMiwzMjc2NywtMzI3NjgpLGEuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tlXT10Pj4+OCx0aGlzW2UrMV09MjU1JnQpOngodGhpcyx0LGUsITEpLGUrMn0sYS5wcm90b3R5cGUud3JpdGVJbnQzMkxFPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gdD0rdCxlfD0wLHJ8fE0odGhpcyx0LGUsNCwyMTQ3NDgzNjQ3LC0yMTQ3NDgzNjQ4KSxhLlRZUEVEX0FSUkFZX1NVUFBPUlQ/KHRoaXNbZV09MjU1JnQsdGhpc1tlKzFdPXQ+Pj44LHRoaXNbZSsyXT10Pj4+MTYsdGhpc1tlKzNdPXQ+Pj4yNCk6SSh0aGlzLHQsZSwhMCksZSs0fSxhLnByb3RvdHlwZS53cml0ZUludDMyQkU9ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0PSt0LGV8PTAscnx8TSh0aGlzLHQsZSw0LDIxNDc0ODM2NDcsLTIxNDc0ODM2NDgpLHQ8MCYmKHQ9NDI5NDk2NzI5NSt0KzEpLGEuVFlQRURfQVJSQVlfU1VQUE9SVD8odGhpc1tlXT10Pj4+MjQsdGhpc1tlKzFdPXQ+Pj4xNix0aGlzW2UrMl09dD4+PjgsdGhpc1tlKzNdPTI1NSZ0KTpJKHRoaXMsdCxlLCExKSxlKzR9LGEucHJvdG90eXBlLndyaXRlRmxvYXRMRT1mdW5jdGlvbih0LGUscil7cmV0dXJuIFkodGhpcyx0LGUsITAscil9LGEucHJvdG90eXBlLndyaXRlRmxvYXRCRT1mdW5jdGlvbih0LGUscil7cmV0dXJuIFkodGhpcyx0LGUsITEscil9LGEucHJvdG90eXBlLndyaXRlRG91YmxlTEU9ZnVuY3Rpb24odCxlLHIpe3JldHVybiBMKHRoaXMsdCxlLCEwLHIpfSxhLnByb3RvdHlwZS53cml0ZURvdWJsZUJFPWZ1bmN0aW9uKHQsZSxyKXtyZXR1cm4gTCh0aGlzLHQsZSwhMSxyKX0sYS5wcm90b3R5cGUuY29weT1mdW5jdGlvbih0LGUscixuKXtpZihyfHwocj0wKSxufHwwPT09bnx8KG49dGhpcy5sZW5ndGgpLGU+PXQubGVuZ3RoJiYoZT10Lmxlbmd0aCksZXx8KGU9MCksbj4wJiZuPHImJihuPXIpLG49PT1yKXJldHVybiAwO2lmKDA9PT10Lmxlbmd0aHx8MD09PXRoaXMubGVuZ3RoKXJldHVybiAwO2lmKGU8MCl0aHJvdyBuZXcgUmFuZ2VFcnJvcigidGFyZ2V0U3RhcnQgb3V0IG9mIGJvdW5kcyIpO2lmKHI8MHx8cj49dGhpcy5sZW5ndGgpdGhyb3cgbmV3IFJhbmdlRXJyb3IoInNvdXJjZVN0YXJ0IG91dCBvZiBib3VuZHMiKTtpZihuPDApdGhyb3cgbmV3IFJhbmdlRXJyb3IoInNvdXJjZUVuZCBvdXQgb2YgYm91bmRzIik7bj50aGlzLmxlbmd0aCYmKG49dGhpcy5sZW5ndGgpLHQubGVuZ3RoLWU8bi1yJiYobj10Lmxlbmd0aC1lK3IpO3ZhciBpLG89bi1yO2lmKHRoaXM9PT10JiZyPGUmJmU8bilmb3IoaT1vLTE7aT49MDstLWkpdFtpK2VdPXRoaXNbaStyXTtlbHNlIGlmKG88MWUzfHwhYS5UWVBFRF9BUlJBWV9TVVBQT1JUKWZvcihpPTA7aTxvOysraSl0W2krZV09dGhpc1tpK3JdO2Vsc2UgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwodCx0aGlzLnN1YmFycmF5KHIscitvKSxlKTtyZXR1cm4gb30sYS5wcm90b3R5cGUuZmlsbD1mdW5jdGlvbih0LGUscixuKXtpZigic3RyaW5nIj09dHlwZW9mIHQpe2lmKCJzdHJpbmciPT10eXBlb2YgZT8obj1lLGU9MCxyPXRoaXMubGVuZ3RoKToic3RyaW5nIj09dHlwZW9mIHImJihuPXIscj10aGlzLmxlbmd0aCksMT09PXQubGVuZ3RoKXt2YXIgaT10LmNoYXJDb2RlQXQoMCk7aTwyNTYmJih0PWkpO31pZih2b2lkIDAhPT1uJiYic3RyaW5nIiE9dHlwZW9mIG4pdGhyb3cgbmV3IFR5cGVFcnJvcigiZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZyIpO2lmKCJzdHJpbmciPT10eXBlb2YgbiYmIWEuaXNFbmNvZGluZyhuKSl0aHJvdyBuZXcgVHlwZUVycm9yKCJVbmtub3duIGVuY29kaW5nOiAiK24pfWVsc2UgIm51bWJlciI9PXR5cGVvZiB0JiYodCY9MjU1KTtpZihlPDB8fHRoaXMubGVuZ3RoPGV8fHRoaXMubGVuZ3RoPHIpdGhyb3cgbmV3IFJhbmdlRXJyb3IoIk91dCBvZiByYW5nZSBpbmRleCIpO2lmKHI8PWUpcmV0dXJuIHRoaXM7dmFyIG87aWYoZT4+Pj0wLHI9dm9pZCAwPT09cj90aGlzLmxlbmd0aDpyPj4+MCx0fHwodD0wKSwibnVtYmVyIj09dHlwZW9mIHQpZm9yKG89ZTtvPHI7KytvKXRoaXNbb109dDtlbHNlIHt2YXIgcz1hLmlzQnVmZmVyKHQpP3Q6ayhuZXcgYSh0LG4pLnRvU3RyaW5nKCkpLHU9cy5sZW5ndGg7Zm9yKG89MDtvPHItZTsrK28pdGhpc1tvK2VdPXNbbyV1XTt9cmV0dXJuIHRoaXN9O3ZhciBEPS9bXitcLzAtOUEtWmEtei1fXS9nO2Z1bmN0aW9uIE4odCl7cmV0dXJuIHQ8MTY/IjAiK3QudG9TdHJpbmcoMTYpOnQudG9TdHJpbmcoMTYpfWZ1bmN0aW9uIGsodCxlKXt2YXIgcjtlPWV8fDEvMDtmb3IodmFyIG49dC5sZW5ndGgsaT1udWxsLG89W10scz0wO3M8bjsrK3Mpe2lmKChyPXQuY2hhckNvZGVBdChzKSk+NTUyOTUmJnI8NTczNDQpe2lmKCFpKXtpZihyPjU2MzE5KXsoZS09Myk+LTEmJm8ucHVzaCgyMzksMTkxLDE4OSk7Y29udGludWV9aWYocysxPT09bil7KGUtPTMpPi0xJiZvLnB1c2goMjM5LDE5MSwxODkpO2NvbnRpbnVlfWk9cjtjb250aW51ZX1pZihyPDU2MzIwKXsoZS09Myk+LTEmJm8ucHVzaCgyMzksMTkxLDE4OSksaT1yO2NvbnRpbnVlfXI9NjU1MzYrKGktNTUyOTY8PDEwfHItNTYzMjApO31lbHNlIGkmJihlLT0zKT4tMSYmby5wdXNoKDIzOSwxOTEsMTg5KTtpZihpPW51bGwscjwxMjgpe2lmKChlLT0xKTwwKWJyZWFrO28ucHVzaChyKTt9ZWxzZSBpZihyPDIwNDgpe2lmKChlLT0yKTwwKWJyZWFrO28ucHVzaChyPj42fDE5Miw2MyZyfDEyOCk7fWVsc2UgaWYocjw2NTUzNil7aWYoKGUtPTMpPDApYnJlYWs7by5wdXNoKHI+PjEyfDIyNCxyPj42JjYzfDEyOCw2MyZyfDEyOCk7fWVsc2Uge2lmKCEocjwxMTE0MTEyKSl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgY29kZSBwb2ludCIpO2lmKChlLT00KTwwKWJyZWFrO28ucHVzaChyPj4xOHwyNDAscj4+MTImNjN8MTI4LHI+PjYmNjN8MTI4LDYzJnJ8MTI4KTt9fXJldHVybiBvfWZ1bmN0aW9uIGoodCl7cmV0dXJuIG4udG9CeXRlQXJyYXkoZnVuY3Rpb24odCl7aWYoKHQ9ZnVuY3Rpb24odCl7cmV0dXJuIHQudHJpbT90LnRyaW0oKTp0LnJlcGxhY2UoL15ccyt8XHMrJC9nLCIiKX0odCkucmVwbGFjZShELCIiKSkubGVuZ3RoPDIpcmV0dXJuICIiO2Zvcig7dC5sZW5ndGglNCE9MDspdCs9Ij0iO3JldHVybiB0fSh0KSl9ZnVuY3Rpb24geih0LGUscixuKXtmb3IodmFyIGk9MDtpPG4mJiEoaStyPj1lLmxlbmd0aHx8aT49dC5sZW5ndGgpOysraSllW2krcl09dFtpXTtyZXR1cm4gaX19KS5jYWxsKHRoaXMscig4KSk7fSxmdW5jdGlvbih0LGUpe3ZhciByO3I9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30oKTt0cnl7cj1yfHxGdW5jdGlvbigicmV0dXJuIHRoaXMiKSgpfHwoMCxldmFsKSgidGhpcyIpO31jYXRjaCh0KXsib2JqZWN0Ij09dHlwZW9mIHdpbmRvdyYmKHI9d2luZG93KTt9dC5leHBvcnRzPXI7fSxmdW5jdGlvbih0LGUscil7ZS5ieXRlTGVuZ3RoPWZ1bmN0aW9uKHQpe3ZhciBlPWYodCkscj1lWzBdLG49ZVsxXTtyZXR1cm4gMyoocituKS80LW59LGUudG9CeXRlQXJyYXk9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLHI9Zih0KSxuPXJbMF0scz1yWzFdLHU9bmV3IG8oZnVuY3Rpb24odCxlLHIpe3JldHVybiAzKihlK3IpLzQtcn0oMCxuLHMpKSxhPTAsaD1zPjA/bi00Om4sbD0wO2w8aDtsKz00KWU9aVt0LmNoYXJDb2RlQXQobCldPDwxOHxpW3QuY2hhckNvZGVBdChsKzEpXTw8MTJ8aVt0LmNoYXJDb2RlQXQobCsyKV08PDZ8aVt0LmNoYXJDb2RlQXQobCszKV0sdVthKytdPWU+PjE2JjI1NSx1W2ErK109ZT4+OCYyNTUsdVthKytdPTI1NSZlOzI9PT1zJiYoZT1pW3QuY2hhckNvZGVBdChsKV08PDJ8aVt0LmNoYXJDb2RlQXQobCsxKV0+PjQsdVthKytdPTI1NSZlKTsxPT09cyYmKGU9aVt0LmNoYXJDb2RlQXQobCldPDwxMHxpW3QuY2hhckNvZGVBdChsKzEpXTw8NHxpW3QuY2hhckNvZGVBdChsKzIpXT4+Mix1W2ErK109ZT4+OCYyNTUsdVthKytdPTI1NSZlKTtyZXR1cm4gdX0sZS5mcm9tQnl0ZUFycmF5PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxyPXQubGVuZ3RoLGk9ciUzLG89W10scz0wLHU9ci1pO3M8dTtzKz0xNjM4MylvLnB1c2gobCh0LHMscysxNjM4Mz51P3U6cysxNjM4MykpOzE9PT1pPyhlPXRbci0xXSxvLnB1c2gobltlPj4yXStuW2U8PDQmNjNdKyI9PSIpKToyPT09aSYmKGU9KHRbci0yXTw8OCkrdFtyLTFdLG8ucHVzaChuW2U+PjEwXStuW2U+PjQmNjNdK25bZTw8MiY2M10rIj0iKSk7cmV0dXJuIG8uam9pbigiIil9O2Zvcih2YXIgbj1bXSxpPVtdLG89InVuZGVmaW5lZCIhPXR5cGVvZiBVaW50OEFycmF5P1VpbnQ4QXJyYXk6QXJyYXkscz0iQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyIsdT0wLGE9cy5sZW5ndGg7dTxhOysrdSluW3VdPXNbdV0saVtzLmNoYXJDb2RlQXQodSldPXU7ZnVuY3Rpb24gZih0KXt2YXIgZT10Lmxlbmd0aDtpZihlJTQ+MCl0aHJvdyBuZXcgRXJyb3IoIkludmFsaWQgc3RyaW5nLiBMZW5ndGggbXVzdCBiZSBhIG11bHRpcGxlIG9mIDQiKTt2YXIgcj10LmluZGV4T2YoIj0iKTtyZXR1cm4gLTE9PT1yJiYocj1lKSxbcixyPT09ZT8wOjQtciU0XX1mdW5jdGlvbiBoKHQpe3JldHVybiBuW3Q+PjE4JjYzXStuW3Q+PjEyJjYzXStuW3Q+PjYmNjNdK25bNjMmdF19ZnVuY3Rpb24gbCh0LGUscil7Zm9yKHZhciBuLGk9W10sbz1lO288cjtvKz0zKW49KHRbb108PDE2JjE2NzExNjgwKSsodFtvKzFdPDw4JjY1MjgwKSsoMjU1JnRbbysyXSksaS5wdXNoKGgobikpO3JldHVybiBpLmpvaW4oIiIpfWlbIi0iLmNoYXJDb2RlQXQoMCldPTYyLGlbIl8iLmNoYXJDb2RlQXQoMCldPTYzO30sZnVuY3Rpb24odCxlKXtlLnJlYWQ9ZnVuY3Rpb24odCxlLHIsbixpKXt2YXIgbyxzLHU9OCppLW4tMSxhPSgxPDx1KS0xLGY9YT4+MSxoPS03LGw9cj9pLTE6MCxjPXI/LTE6MSxwPXRbZStsXTtmb3IobCs9YyxvPXAmKDE8PC1oKS0xLHA+Pj0taCxoKz11O2g+MDtvPTI1NipvK3RbZStsXSxsKz1jLGgtPTgpO2ZvcihzPW8mKDE8PC1oKS0xLG8+Pj0taCxoKz1uO2g+MDtzPTI1NipzK3RbZStsXSxsKz1jLGgtPTgpO2lmKDA9PT1vKW89MS1mO2Vsc2Uge2lmKG89PT1hKXJldHVybiBzP05hTjoxLzAqKHA/LTE6MSk7cys9TWF0aC5wb3coMixuKSxvLT1mO31yZXR1cm4gKHA/LTE6MSkqcypNYXRoLnBvdygyLG8tbil9LGUud3JpdGU9ZnVuY3Rpb24odCxlLHIsbixpLG8pe3ZhciBzLHUsYSxmPTgqby1pLTEsaD0oMTw8ZiktMSxsPWg+PjEsYz0yMz09PWk/TWF0aC5wb3coMiwtMjQpLU1hdGgucG93KDIsLTc3KTowLHA9bj8wOm8tMSxnPW4/MTotMSxkPWU8MHx8MD09PWUmJjEvZTwwPzE6MDtmb3IoZT1NYXRoLmFicyhlKSxpc05hTihlKXx8ZT09PTEvMD8odT1pc05hTihlKT8xOjAscz1oKToocz1NYXRoLmZsb29yKE1hdGgubG9nKGUpL01hdGguTE4yKSxlKihhPU1hdGgucG93KDIsLXMpKTwxJiYocy0tLGEqPTIpLChlKz1zK2w+PTE/Yy9hOmMqTWF0aC5wb3coMiwxLWwpKSphPj0yJiYocysrLGEvPTIpLHMrbD49aD8odT0wLHM9aCk6cytsPj0xPyh1PShlKmEtMSkqTWF0aC5wb3coMixpKSxzKz1sKToodT1lKk1hdGgucG93KDIsbC0xKSpNYXRoLnBvdygyLGkpLHM9MCkpO2k+PTg7dFtyK3BdPTI1NSZ1LHArPWcsdS89MjU2LGktPTgpO2ZvcihzPXM8PGl8dSxmKz1pO2Y+MDt0W3IrcF09MjU1JnMscCs9ZyxzLz0yNTYsZi09OCk7dFtyK3AtZ118PTEyOCpkO307fSxmdW5jdGlvbih0LGUpe3ZhciByPXt9LnRvU3RyaW5nO3QuZXhwb3J0cz1BcnJheS5pc0FycmF5fHxmdW5jdGlvbih0KXtyZXR1cm4gIltvYmplY3QgQXJyYXldIj09ci5jYWxsKHQpfTt9LGZ1bmN0aW9uKGUscil7ZS5leHBvcnRzPXQ7fSxmdW5jdGlvbih0LGUscil7KGZ1bmN0aW9uKHQpe2Z1bmN0aW9uIHIodCxlKXtmb3IodmFyIHI9MCxuPXQubGVuZ3RoLTE7bj49MDtuLS0pe3ZhciBpPXRbbl07Ii4iPT09aT90LnNwbGljZShuLDEpOiIuLiI9PT1pPyh0LnNwbGljZShuLDEpLHIrKyk6ciYmKHQuc3BsaWNlKG4sMSksci0tKTt9aWYoZSlmb3IoO3ItLTtyKXQudW5zaGlmdCgiLi4iKTtyZXR1cm4gdH12YXIgbj0vXihcLz98KShbXHNcU10qPykoKD86XC57MSwyfXxbXlwvXSs/fCkoXC5bXi5cL10qfCkpKD86W1wvXSopJC8saT1mdW5jdGlvbih0KXtyZXR1cm4gbi5leGVjKHQpLnNsaWNlKDEpfTtmdW5jdGlvbiBvKHQsZSl7aWYodC5maWx0ZXIpcmV0dXJuIHQuZmlsdGVyKGUpO2Zvcih2YXIgcj1bXSxuPTA7bjx0Lmxlbmd0aDtuKyspZSh0W25dLG4sdCkmJnIucHVzaCh0W25dKTtyZXR1cm4gcn1lLnJlc29sdmU9ZnVuY3Rpb24oKXtmb3IodmFyIGU9IiIsbj0hMSxpPWFyZ3VtZW50cy5sZW5ndGgtMTtpPj0tMSYmIW47aS0tKXt2YXIgcz1pPj0wP2FyZ3VtZW50c1tpXTp0LmN3ZCgpO2lmKCJzdHJpbmciIT10eXBlb2Ygcyl0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudHMgdG8gcGF0aC5yZXNvbHZlIG11c3QgYmUgc3RyaW5ncyIpO3MmJihlPXMrIi8iK2Usbj0iLyI9PT1zLmNoYXJBdCgwKSk7fXJldHVybiBlPXIobyhlLnNwbGl0KCIvIiksZnVuY3Rpb24odCl7cmV0dXJuICEhdH0pLCFuKS5qb2luKCIvIiksKG4/Ii8iOiIiKStlfHwiLiJ9LGUubm9ybWFsaXplPWZ1bmN0aW9uKHQpe3ZhciBuPWUuaXNBYnNvbHV0ZSh0KSxpPSIvIj09PXModCwtMSk7cmV0dXJuICh0PXIobyh0LnNwbGl0KCIvIiksZnVuY3Rpb24odCl7cmV0dXJuICEhdH0pLCFuKS5qb2luKCIvIikpfHxufHwodD0iLiIpLHQmJmkmJih0Kz0iLyIpLChuPyIvIjoiIikrdH0sZS5pc0Fic29sdXRlPWZ1bmN0aW9uKHQpe3JldHVybiAiLyI9PT10LmNoYXJBdCgwKX0sZS5qb2luPWZ1bmN0aW9uKCl7dmFyIHQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApO3JldHVybiBlLm5vcm1hbGl6ZShvKHQsZnVuY3Rpb24odCxlKXtpZigic3RyaW5nIiE9dHlwZW9mIHQpdGhyb3cgbmV3IFR5cGVFcnJvcigiQXJndW1lbnRzIHRvIHBhdGguam9pbiBtdXN0IGJlIHN0cmluZ3MiKTtyZXR1cm4gdH0pLmpvaW4oIi8iKSl9LGUucmVsYXRpdmU9ZnVuY3Rpb24odCxyKXtmdW5jdGlvbiBuKHQpe2Zvcih2YXIgZT0wO2U8dC5sZW5ndGgmJiIiPT09dFtlXTtlKyspO2Zvcih2YXIgcj10Lmxlbmd0aC0xO3I+PTAmJiIiPT09dFtyXTtyLS0pO3JldHVybiBlPnI/W106dC5zbGljZShlLHItZSsxKX10PWUucmVzb2x2ZSh0KS5zdWJzdHIoMSkscj1lLnJlc29sdmUocikuc3Vic3RyKDEpO2Zvcih2YXIgaT1uKHQuc3BsaXQoIi8iKSksbz1uKHIuc3BsaXQoIi8iKSkscz1NYXRoLm1pbihpLmxlbmd0aCxvLmxlbmd0aCksdT1zLGE9MDthPHM7YSsrKWlmKGlbYV0hPT1vW2FdKXt1PWE7YnJlYWt9dmFyIGY9W107Zm9yKGE9dTthPGkubGVuZ3RoO2ErKylmLnB1c2goIi4uIik7cmV0dXJuIChmPWYuY29uY2F0KG8uc2xpY2UodSkpKS5qb2luKCIvIil9LGUuc2VwPSIvIixlLmRlbGltaXRlcj0iOiIsZS5kaXJuYW1lPWZ1bmN0aW9uKHQpe3ZhciBlPWkodCkscj1lWzBdLG49ZVsxXTtyZXR1cm4gcnx8bj8obiYmKG49bi5zdWJzdHIoMCxuLmxlbmd0aC0xKSkscituKToiLiJ9LGUuYmFzZW5hbWU9ZnVuY3Rpb24odCxlKXt2YXIgcj1pKHQpWzJdO3JldHVybiBlJiZyLnN1YnN0cigtMSplLmxlbmd0aCk9PT1lJiYocj1yLnN1YnN0cigwLHIubGVuZ3RoLWUubGVuZ3RoKSkscn0sZS5leHRuYW1lPWZ1bmN0aW9uKHQpe3JldHVybiBpKHQpWzNdfTt2YXIgcz0iYiI9PT0iYWIiLnN1YnN0cigtMSk/ZnVuY3Rpb24odCxlLHIpe3JldHVybiB0LnN1YnN0cihlLHIpfTpmdW5jdGlvbih0LGUscil7cmV0dXJuIGU8MCYmKGU9dC5sZW5ndGgrZSksdC5zdWJzdHIoZSxyKX07fSkuY2FsbCh0aGlzLHIoMTQpKTt9LGZ1bmN0aW9uKHQsZSl7dmFyIHIsbixpPXQuZXhwb3J0cz17fTtmdW5jdGlvbiBvKCl7dGhyb3cgbmV3IEVycm9yKCJzZXRUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkIil9ZnVuY3Rpb24gcygpe3Rocm93IG5ldyBFcnJvcigiY2xlYXJUaW1lb3V0IGhhcyBub3QgYmVlbiBkZWZpbmVkIil9ZnVuY3Rpb24gdSh0KXtpZihyPT09c2V0VGltZW91dClyZXR1cm4gc2V0VGltZW91dCh0LDApO2lmKChyPT09b3x8IXIpJiZzZXRUaW1lb3V0KXJldHVybiByPXNldFRpbWVvdXQsc2V0VGltZW91dCh0LDApO3RyeXtyZXR1cm4gcih0LDApfWNhdGNoKGUpe3RyeXtyZXR1cm4gci5jYWxsKG51bGwsdCwwKX1jYXRjaChlKXtyZXR1cm4gci5jYWxsKHRoaXMsdCwwKX19fSFmdW5jdGlvbigpe3RyeXtyPSJmdW5jdGlvbiI9PXR5cGVvZiBzZXRUaW1lb3V0P3NldFRpbWVvdXQ6bzt9Y2F0Y2godCl7cj1vO310cnl7bj0iZnVuY3Rpb24iPT10eXBlb2YgY2xlYXJUaW1lb3V0P2NsZWFyVGltZW91dDpzO31jYXRjaCh0KXtuPXM7fX0oKTt2YXIgYSxmPVtdLGg9ITEsbD0tMTtmdW5jdGlvbiBjKCl7aCYmYSYmKGg9ITEsYS5sZW5ndGg/Zj1hLmNvbmNhdChmKTpsPS0xLGYubGVuZ3RoJiZwKCkpO31mdW5jdGlvbiBwKCl7aWYoIWgpe3ZhciB0PXUoYyk7aD0hMDtmb3IodmFyIGU9Zi5sZW5ndGg7ZTspe2ZvcihhPWYsZj1bXTsrK2w8ZTspYSYmYVtsXS5ydW4oKTtsPS0xLGU9Zi5sZW5ndGg7fWE9bnVsbCxoPSExLGZ1bmN0aW9uKHQpe2lmKG49PT1jbGVhclRpbWVvdXQpcmV0dXJuIGNsZWFyVGltZW91dCh0KTtpZigobj09PXN8fCFuKSYmY2xlYXJUaW1lb3V0KXJldHVybiBuPWNsZWFyVGltZW91dCxjbGVhclRpbWVvdXQodCk7dHJ5e24odCk7fWNhdGNoKGUpe3RyeXtyZXR1cm4gbi5jYWxsKG51bGwsdCl9Y2F0Y2goZSl7cmV0dXJuIG4uY2FsbCh0aGlzLHQpfX19KHQpO319ZnVuY3Rpb24gZyh0LGUpe3RoaXMuZnVuPXQsdGhpcy5hcnJheT1lO31mdW5jdGlvbiBkKCl7fWkubmV4dFRpY2s9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgtMSk7aWYoYXJndW1lbnRzLmxlbmd0aD4xKWZvcih2YXIgcj0xO3I8YXJndW1lbnRzLmxlbmd0aDtyKyspZVtyLTFdPWFyZ3VtZW50c1tyXTtmLnB1c2gobmV3IGcodCxlKSksMSE9PWYubGVuZ3RofHxofHx1KHApO30sZy5wcm90b3R5cGUucnVuPWZ1bmN0aW9uKCl7dGhpcy5mdW4uYXBwbHkobnVsbCx0aGlzLmFycmF5KTt9LGkudGl0bGU9ImJyb3dzZXIiLGkuYnJvd3Nlcj0hMCxpLmVudj17fSxpLmFyZ3Y9W10saS52ZXJzaW9uPSIiLGkudmVyc2lvbnM9e30saS5vbj1kLGkuYWRkTGlzdGVuZXI9ZCxpLm9uY2U9ZCxpLm9mZj1kLGkucmVtb3ZlTGlzdGVuZXI9ZCxpLnJlbW92ZUFsbExpc3RlbmVycz1kLGkuZW1pdD1kLGkucHJlcGVuZExpc3RlbmVyPWQsaS5wcmVwZW5kT25jZUxpc3RlbmVyPWQsaS5saXN0ZW5lcnM9ZnVuY3Rpb24odCl7cmV0dXJuIFtdfSxpLmJpbmRpbmc9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKCJwcm9jZXNzLmJpbmRpbmcgaXMgbm90IHN1cHBvcnRlZCIpfSxpLmN3ZD1mdW5jdGlvbigpe3JldHVybiAiLyJ9LGkuY2hkaXI9ZnVuY3Rpb24odCl7dGhyb3cgbmV3IEVycm9yKCJwcm9jZXNzLmNoZGlyIGlzIG5vdCBzdXBwb3J0ZWQiKX0saS51bWFzaz1mdW5jdGlvbigpe3JldHVybiAwfTt9XSl9KTsKICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgY29uc3QgdW5wYWNrQnJpZGdlID0gV29ya2VyU2NvcGUudW5wYWNrQnJpZGdlOwoKICBsZXQgdW5wYWNrOwoKICAvLy0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS11bnBhY2stLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLQogIHZhciBpbml0dW5wYWNrID0gZnVuY3Rpb24od2FzbUJpbmFyeUZpbGUpIHsKICAgIC8vIFRoZSBmb2xsb3dpbmcgY29kZSBoYXMgYmVlbiBfY2FyZWZ1bGx5XyBtb2RpZmllZCBieSBoYW5kLgogICAgLy8gRHVlIHRvIFdlYlBhY2sgZW1iZWRkaW5nIHRoaXMgc2NyaXB0IGludG8gdGhlIFplYSBlbmdpbmUKICAgIC8vIGJ1aWxkLCBjZXJ0YWluIGZlYXR1cmVzIGJyb2tlLgogICAgLy8gVGhlcmUgd2FzIGNvZGUgdG8gaGFuZGxlIGxvYWRpbmcgaW4gYSBub2RlSlMgY29udGV4dCwgdGhhdCB0cmllZCB0byBpbXBvcnQoImZzIikKICAgIC8vIFdlYlBhY2sga2VwdHMgdHJpcHBpbmcgdXAgb24gdGhhdCBjb2RlIGluIGl0cyBzdGF0aWMgYW5hbHlzaXMgb2YgdGhlIGNvZGUsIHNvCiAgICAvLyBJIGNhcmVmdWxseSByZW1vdmVkIGl0LgogICAgLy8gVGhlIGdsb2JhbCBzY29wZSBvZiB0aGUgc2NyaXB0IHNlZW1zIHRvIGJlIGRpZmZlcmVudCwgc28gdW5wYWNrQnJpZGdlIHdhcyBub3QgYXZhaWxhYmxlLgogICAgLy8gVGhlIHVucGFja0JyaWRnZSBjb2RlIGFzc2lnbnMgdW5wYWNrQnJpZGdlIHRvIHRoZSBwYXNzZWQgaW4gc2NvcGUsIHdoaWNoIGlzICd0aGlzJywgYnV0IHRoYXQKICAgIC8vIHNjb3BlIGlzbid0IGF2YWlsYWJsZSBpbnNpZGUgdGhpcyAndW5wYWNrJyBmdW5jdGlvbi4KICAgIGNvbnN0IHVucGFjayA9IHt9OwoKICAgIC8vIE5vdGU6IHRoZSBmb2xsb3dpbmcgaXMgdGhlIFVSTCBvZiB0aGUgdW5wYWNrLndhc20gZmlsZSBpbiBvdXIgWmVhRW5naW5lIHByb2plY3Qgb24gb3VyCiAgICAvLyBzZXJ2ZXIuIElkZWFsbHkgd2UgY291bGQgdXNlIGEgcmVsYXRpdmUgcGF0aCBmcm9tIHRoZSBaZWFFbmdpbmUgZmlsZSwgYnV0CiAgICAvLyB0aGF0IGlzbid0IHBvc3NpYmxlIHlldC4gKFRPRE86IEFzayBNYXVybyBhYm91dCB0aGlzKQogICAgY29uc3QgY3JlZGVudGlhbHMgPSAib21pdCI7CiAgICAvLyB2YXIgd2FzbUJpbmFyeUZpbGU9InVucGFjay53YXNtIjsKCiAgdmFyIE1vZHVsZT10eXBlb2YgdW5wYWNrIT09InVuZGVmaW5lZCI/dW5wYWNrOnt9O3ZhciBFeHQ9dW5wYWNrQnJpZGdlLkV4dDt2YXIganNBUEk9e29wZW46KGZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5jdXJyZW50Lm9wZW4uYXBwbHkoRXh0LmN1cnJlbnQsYXJndW1lbnRzKX0pLGNsb3NlOihmdW5jdGlvbigpe3JldHVybiBFeHQuY3VycmVudC5jbG9zZS5hcHBseShFeHQuY3VycmVudCxhcmd1bWVudHMpfSkscmVhZDooZnVuY3Rpb24oKXtyZXR1cm4gRXh0LmN1cnJlbnQucmVhZC5hcHBseShFeHQuY3VycmVudCxhcmd1bWVudHMpfSksd3JpdGU6KGZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5jdXJyZW50LndyaXRlLmFwcGx5KEV4dC5jdXJyZW50LGFyZ3VtZW50cyl9KSx0ZWxsOihmdW5jdGlvbigpe3JldHVybiBFeHQuY3VycmVudC50ZWxsLmFwcGx5KEV4dC5jdXJyZW50LGFyZ3VtZW50cyl9KSxzZWVrOihmdW5jdGlvbigpe3JldHVybiBFeHQuY3VycmVudC5zZWVrLmFwcGx5KEV4dC5jdXJyZW50LGFyZ3VtZW50cyl9KSxjcmVhdGU6KGZ1bmN0aW9uKCl7cmV0dXJuIEV4dC5jdXJyZW50LmNyZWF0ZS5hcHBseShFeHQuY3VycmVudCxhcmd1bWVudHMpfSl9O3ZhciBtb2R1bGVPdmVycmlkZXM9e307dmFyIGtleTtmb3Ioa2V5IGluIE1vZHVsZSl7aWYoTW9kdWxlLmhhc093blByb3BlcnR5KGtleSkpe21vZHVsZU92ZXJyaWRlc1trZXldPU1vZHVsZVtrZXldO319TW9kdWxlWyJhcmd1bWVudHMiXT1bXTtNb2R1bGVbInRoaXNQcm9ncmFtIl09Ii4vdGhpcy5wcm9ncmFtIjtNb2R1bGVbInF1aXQiXT0oZnVuY3Rpb24oc3RhdHVzLHRvVGhyb3cpe3Rocm93IHRvVGhyb3d9KTtNb2R1bGVbInByZVJ1biJdPVtdO01vZHVsZVsicG9zdFJ1biJdPVtdO3ZhciBFTlZJUk9OTUVOVF9JU19XRUI9ZmFsc2U7dmFyIEVOVklST05NRU5UX0lTX1dPUktFUj1mYWxzZTt2YXIgRU5WSVJPTk1FTlRfSVNfTk9ERT1mYWxzZTtpZihNb2R1bGVbIkVOVklST05NRU5UIl0pe2lmKE1vZHVsZVsiRU5WSVJPTk1FTlQiXT09PSJXRUIiKXtFTlZJUk9OTUVOVF9JU19XRUI9dHJ1ZTt9ZWxzZSBpZihNb2R1bGVbIkVOVklST05NRU5UIl09PT0iV09SS0VSIil7RU5WSVJPTk1FTlRfSVNfV09SS0VSPXRydWU7fWVsc2UgaWYoTW9kdWxlWyJFTlZJUk9OTUVOVCJdPT09Ik5PREUiKXtFTlZJUk9OTUVOVF9JU19OT0RFPXRydWU7fWVsc2UgaWYoTW9kdWxlWyJFTlZJUk9OTUVOVCJdPT09IlNIRUxMIik7ZWxzZSB7dGhyb3cgbmV3IEVycm9yKCJNb2R1bGVbJ0VOVklST05NRU5UJ10gdmFsdWUgaXMgbm90IHZhbGlkLiBtdXN0IGJlIG9uZSBvZjogV0VCfFdPUktFUnxOT0RFfFNIRUxMLiIpfX1lbHNlIHtFTlZJUk9OTUVOVF9JU19XRUI9dHlwZW9mIHdpbmRvdz09PSJvYmplY3QiO0VOVklST05NRU5UX0lTX1dPUktFUj10eXBlb2YgaW1wb3J0U2NyaXB0cz09PSJmdW5jdGlvbiI7RU5WSVJPTk1FTlRfSVNfTk9ERT10eXBlb2YgcHJvY2Vzcz09PSJvYmplY3QiJiZ0eXBlb2YgcmVxdWlyZT09PSJmdW5jdGlvbiImJiFFTlZJUk9OTUVOVF9JU19XRUImJiFFTlZJUk9OTUVOVF9JU19XT1JLRVI7fQogIGlmKEVOVklST05NRU5UX0lTX1dFQnx8RU5WSVJPTk1FTlRfSVNfV09SS0VSKXtNb2R1bGVbInJlYWQiXT1mdW5jdGlvbiBzaGVsbF9yZWFkKHVybCl7dmFyIHhocj1uZXcgWE1MSHR0cFJlcXVlc3Q7eGhyLm9wZW4oIkdFVCIsdXJsLGZhbHNlKTt4aHIuc2VuZChudWxsKTtyZXR1cm4geGhyLnJlc3BvbnNlVGV4dH07aWYoRU5WSVJPTk1FTlRfSVNfV09SS0VSKXtNb2R1bGVbInJlYWRCaW5hcnkiXT1mdW5jdGlvbiByZWFkQmluYXJ5KHVybCl7dmFyIHhocj1uZXcgWE1MSHR0cFJlcXVlc3Q7eGhyLm9wZW4oIkdFVCIsdXJsLGZhbHNlKTt4aHIucmVzcG9uc2VUeXBlPSJhcnJheWJ1ZmZlciI7eGhyLnNlbmQobnVsbCk7cmV0dXJuIG5ldyBVaW50OEFycmF5KHhoci5yZXNwb25zZSl9O31Nb2R1bGVbInJlYWRBc3luYyJdPWZ1bmN0aW9uIHJlYWRBc3luYyh1cmwsb25sb2FkLG9uZXJyb3Ipe3ZhciB4aHI9bmV3IFhNTEh0dHBSZXF1ZXN0O3hoci5vcGVuKCJHRVQiLHVybCx0cnVlKTt4aHIucmVzcG9uc2VUeXBlPSJhcnJheWJ1ZmZlciI7eGhyLm9ubG9hZD1mdW5jdGlvbiB4aHJfb25sb2FkKCl7aWYoeGhyLnN0YXR1cz09MjAwfHx4aHIuc3RhdHVzPT0wJiZ4aHIucmVzcG9uc2Upe29ubG9hZCh4aHIucmVzcG9uc2UpO3JldHVybn1vbmVycm9yKCk7fTt4aHIub25lcnJvcj1vbmVycm9yO3hoci5zZW5kKG51bGwpO307TW9kdWxlWyJzZXRXaW5kb3dUaXRsZSJdPShmdW5jdGlvbih0aXRsZSl7ZG9jdW1lbnQudGl0bGU9dGl0bGU7fSk7fU1vZHVsZVsicHJpbnQiXT10eXBlb2YgY29uc29sZSE9PSJ1bmRlZmluZWQiP2NvbnNvbGUubG9nLmJpbmQoY29uc29sZSk6dHlwZW9mIHByaW50IT09InVuZGVmaW5lZCI/cHJpbnQ6bnVsbDtNb2R1bGVbInByaW50RXJyIl09dHlwZW9mIHByaW50RXJyIT09InVuZGVmaW5lZCI/cHJpbnRFcnI6dHlwZW9mIGNvbnNvbGUhPT0idW5kZWZpbmVkIiYmY29uc29sZS53YXJuLmJpbmQoY29uc29sZSl8fE1vZHVsZVsicHJpbnQiXTtNb2R1bGUucHJpbnQ9TW9kdWxlWyJwcmludCJdO01vZHVsZS5wcmludEVycj1Nb2R1bGVbInByaW50RXJyIl07Zm9yKGtleSBpbiBtb2R1bGVPdmVycmlkZXMpe2lmKG1vZHVsZU92ZXJyaWRlcy5oYXNPd25Qcm9wZXJ0eShrZXkpKXtNb2R1bGVba2V5XT1tb2R1bGVPdmVycmlkZXNba2V5XTt9fW1vZHVsZU92ZXJyaWRlcz11bmRlZmluZWQ7dmFyIFNUQUNLX0FMSUdOPTE2O2Z1bmN0aW9uIHN0YXRpY0FsbG9jKHNpemUpe2Fzc2VydCghc3RhdGljU2VhbGVkKTt2YXIgcmV0PVNUQVRJQ1RPUDtTVEFUSUNUT1A9U1RBVElDVE9QK3NpemUrMTUmLTE2O3JldHVybiByZXR9ZnVuY3Rpb24gZHluYW1pY0FsbG9jKHNpemUpe2Fzc2VydChEWU5BTUlDVE9QX1BUUik7dmFyIHJldD1IRUFQMzJbRFlOQU1JQ1RPUF9QVFI+PjJdO3ZhciBlbmQ9cmV0K3NpemUrMTUmLTE2O0hFQVAzMltEWU5BTUlDVE9QX1BUUj4+Ml09ZW5kO2lmKGVuZD49VE9UQUxfTUVNT1JZKXt2YXIgc3VjY2Vzcz1lbmxhcmdlTWVtb3J5KCk7aWYoIXN1Y2Nlc3Mpe0hFQVAzMltEWU5BTUlDVE9QX1BUUj4+Ml09cmV0O3JldHVybiAwfX1yZXR1cm4gcmV0fWZ1bmN0aW9uIGFsaWduTWVtb3J5KHNpemUsZmFjdG9yKXtpZighZmFjdG9yKWZhY3Rvcj1TVEFDS19BTElHTjt2YXIgcmV0PXNpemU9TWF0aC5jZWlsKHNpemUvZmFjdG9yKSpmYWN0b3I7cmV0dXJuIHJldH1mdW5jdGlvbiBnZXROYXRpdmVUeXBlU2l6ZSh0eXBlKXtzd2l0Y2godHlwZSl7Y2FzZSJpMSI6Y2FzZSJpOCI6cmV0dXJuIDE7Y2FzZSJpMTYiOnJldHVybiAyO2Nhc2UiaTMyIjpyZXR1cm4gNDtjYXNlImk2NCI6cmV0dXJuIDg7Y2FzZSJmbG9hdCI6cmV0dXJuIDQ7Y2FzZSJkb3VibGUiOnJldHVybiA4O2RlZmF1bHQ6e2lmKHR5cGVbdHlwZS5sZW5ndGgtMV09PT0iKiIpe3JldHVybiA0fWVsc2UgaWYodHlwZVswXT09PSJpIil7dmFyIGJpdHM9cGFyc2VJbnQodHlwZS5zdWJzdHIoMSkpO2Fzc2VydChiaXRzJTg9PT0wKTtyZXR1cm4gYml0cy84fWVsc2Uge3JldHVybiAwfX19fW5ldyBBcnJheSgwKTt2YXIgR0xPQkFMX0JBU0U9MTAyNDt2YXIgQUJPUlQ9MDtmdW5jdGlvbiBhc3NlcnQoY29uZGl0aW9uLHRleHQpe2lmKCFjb25kaXRpb24pe2Fib3J0KCJBc3NlcnRpb24gZmFpbGVkOiAiK3RleHQpO319ZnVuY3Rpb24gc2V0VmFsdWUocHRyLHZhbHVlLHR5cGUsbm9TYWZlKXt0eXBlPXR5cGV8fCJpOCI7aWYodHlwZS5jaGFyQXQodHlwZS5sZW5ndGgtMSk9PT0iKiIpdHlwZT0iaTMyIjtzd2l0Y2godHlwZSl7Y2FzZSJpMSI6SEVBUDhbcHRyPj4wXT12YWx1ZTticmVhaztjYXNlImk4IjpIRUFQOFtwdHI+PjBdPXZhbHVlO2JyZWFrO2Nhc2UiaTE2IjpIRUFQMTZbcHRyPj4xXT12YWx1ZTticmVhaztjYXNlImkzMiI6SEVBUDMyW3B0cj4+Ml09dmFsdWU7YnJlYWs7Y2FzZSJpNjQiOnRlbXBJNjQ9W3ZhbHVlPj4+MCwodGVtcERvdWJsZT12YWx1ZSwrTWF0aF9hYnModGVtcERvdWJsZSk+PTE/dGVtcERvdWJsZT4wPyhNYXRoX21pbigrTWF0aF9mbG9vcih0ZW1wRG91YmxlLzQyOTQ5NjcyOTYpLDQyOTQ5NjcyOTUpfDApPj4+MDp+fitNYXRoX2NlaWwoKHRlbXBEb3VibGUtICsofn50ZW1wRG91YmxlPj4+MCkpLzQyOTQ5NjcyOTYpPj4+MDowKV0sSEVBUDMyW3B0cj4+Ml09dGVtcEk2NFswXSxIRUFQMzJbcHRyKzQ+PjJdPXRlbXBJNjRbMV07YnJlYWs7Y2FzZSJmbG9hdCI6SEVBUEYzMltwdHI+PjJdPXZhbHVlO2JyZWFrO2Nhc2UiZG91YmxlIjpIRUFQRjY0W3B0cj4+M109dmFsdWU7YnJlYWs7ZGVmYXVsdDphYm9ydCgiaW52YWxpZCB0eXBlIGZvciBzZXRWYWx1ZTogIit0eXBlKTt9fXZhciBBTExPQ19OT1JNQUw9MDt2YXIgQUxMT0NfU1RBVElDPTI7dmFyIEFMTE9DX05PTkU9NDtmdW5jdGlvbiBhbGxvY2F0ZShzbGFiLHR5cGVzLGFsbG9jYXRvcixwdHIpe3ZhciB6ZXJvaW5pdCxzaXplO2lmKHR5cGVvZiBzbGFiPT09Im51bWJlciIpe3plcm9pbml0PXRydWU7c2l6ZT1zbGFiO31lbHNlIHt6ZXJvaW5pdD1mYWxzZTtzaXplPXNsYWIubGVuZ3RoO312YXIgc2luZ2xlVHlwZT10eXBlb2YgdHlwZXM9PT0ic3RyaW5nIj90eXBlczpudWxsO3ZhciByZXQ7aWYoYWxsb2NhdG9yPT1BTExPQ19OT05FKXtyZXQ9cHRyO31lbHNlIHtyZXQ9W3R5cGVvZiBfbWFsbG9jPT09ImZ1bmN0aW9uIj9fbWFsbG9jOnN0YXRpY0FsbG9jLHN0YWNrQWxsb2Msc3RhdGljQWxsb2MsZHluYW1pY0FsbG9jXVthbGxvY2F0b3I9PT11bmRlZmluZWQ/QUxMT0NfU1RBVElDOmFsbG9jYXRvcl0oTWF0aC5tYXgoc2l6ZSxzaW5nbGVUeXBlPzE6dHlwZXMubGVuZ3RoKSk7fWlmKHplcm9pbml0KXt2YXIgc3RvcDtwdHI9cmV0O2Fzc2VydCgocmV0JjMpPT0wKTtzdG9wPXJldCsoc2l6ZSZ+Myk7Zm9yKDtwdHI8c3RvcDtwdHIrPTQpe0hFQVAzMltwdHI+PjJdPTA7fXN0b3A9cmV0K3NpemU7d2hpbGUocHRyPHN0b3Ape0hFQVA4W3B0cisrPj4wXT0wO31yZXR1cm4gcmV0fWlmKHNpbmdsZVR5cGU9PT0iaTgiKXtpZihzbGFiLnN1YmFycmF5fHxzbGFiLnNsaWNlKXtIRUFQVTguc2V0KHNsYWIscmV0KTt9ZWxzZSB7SEVBUFU4LnNldChuZXcgVWludDhBcnJheShzbGFiKSxyZXQpO31yZXR1cm4gcmV0fXZhciBpPTAsdHlwZSx0eXBlU2l6ZSxwcmV2aW91c1R5cGU7d2hpbGUoaTxzaXplKXt2YXIgY3Vycj1zbGFiW2ldO3R5cGU9c2luZ2xlVHlwZXx8dHlwZXNbaV07aWYodHlwZT09PTApe2krKztjb250aW51ZX1pZih0eXBlPT0iaTY0Iil0eXBlPSJpMzIiO3NldFZhbHVlKHJldCtpLGN1cnIsdHlwZSk7aWYocHJldmlvdXNUeXBlIT09dHlwZSl7dHlwZVNpemU9Z2V0TmF0aXZlVHlwZVNpemUodHlwZSk7cHJldmlvdXNUeXBlPXR5cGU7fWkrPXR5cGVTaXplO31yZXR1cm4gcmV0fWZ1bmN0aW9uIFBvaW50ZXJfc3RyaW5naWZ5KHB0cixsZW5ndGgpe2lmKGxlbmd0aD09PTB8fCFwdHIpcmV0dXJuICIiO3ZhciBoYXNVdGY9MDt2YXIgdDt2YXIgaT0wO3doaWxlKDEpe3Q9SEVBUFU4W3B0citpPj4wXTtoYXNVdGZ8PXQ7aWYodD09MCYmIWxlbmd0aClicmVhaztpKys7aWYobGVuZ3RoJiZpPT1sZW5ndGgpYnJlYWt9aWYoIWxlbmd0aClsZW5ndGg9aTt2YXIgcmV0PSIiO2lmKGhhc1V0ZjwxMjgpe3ZhciBNQVhfQ0hVTks9MTAyNDt2YXIgY3Vycjt3aGlsZShsZW5ndGg+MCl7Y3Vycj1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KFN0cmluZyxIRUFQVTguc3ViYXJyYXkocHRyLHB0citNYXRoLm1pbihsZW5ndGgsTUFYX0NIVU5LKSkpO3JldD1yZXQ/cmV0K2N1cnI6Y3VycjtwdHIrPU1BWF9DSFVOSztsZW5ndGgtPU1BWF9DSFVOSzt9cmV0dXJuIHJldH1yZXR1cm4gVVRGOFRvU3RyaW5nKHB0cil9dmFyIFVURjhEZWNvZGVyPXR5cGVvZiBUZXh0RGVjb2RlciE9PSJ1bmRlZmluZWQiP25ldyBUZXh0RGVjb2RlcigidXRmOCIpOnVuZGVmaW5lZDtmdW5jdGlvbiBVVEY4QXJyYXlUb1N0cmluZyh1OEFycmF5LGlkeCl7dmFyIGVuZFB0cj1pZHg7d2hpbGUodThBcnJheVtlbmRQdHJdKSsrZW5kUHRyO2lmKGVuZFB0ci1pZHg+MTYmJnU4QXJyYXkuc3ViYXJyYXkmJlVURjhEZWNvZGVyKXtyZXR1cm4gVVRGOERlY29kZXIuZGVjb2RlKHU4QXJyYXkuc3ViYXJyYXkoaWR4LGVuZFB0cikpfWVsc2Uge3ZhciB1MCx1MSx1Mix1Myx1NCx1NTt2YXIgc3RyPSIiO3doaWxlKDEpe3UwPXU4QXJyYXlbaWR4KytdO2lmKCF1MClyZXR1cm4gc3RyO2lmKCEodTAmMTI4KSl7c3RyKz1TdHJpbmcuZnJvbUNoYXJDb2RlKHUwKTtjb250aW51ZX11MT11OEFycmF5W2lkeCsrXSY2MztpZigodTAmMjI0KT09MTkyKXtzdHIrPVN0cmluZy5mcm9tQ2hhckNvZGUoKHUwJjMxKTw8Nnx1MSk7Y29udGludWV9dTI9dThBcnJheVtpZHgrK10mNjM7aWYoKHUwJjI0MCk9PTIyNCl7dTA9KHUwJjE1KTw8MTJ8dTE8PDZ8dTI7fWVsc2Uge3UzPXU4QXJyYXlbaWR4KytdJjYzO2lmKCh1MCYyNDgpPT0yNDApe3UwPSh1MCY3KTw8MTh8dTE8PDEyfHUyPDw2fHUzO31lbHNlIHt1ND11OEFycmF5W2lkeCsrXSY2MztpZigodTAmMjUyKT09MjQ4KXt1MD0odTAmMyk8PDI0fHUxPDwxOHx1Mjw8MTJ8dTM8PDZ8dTQ7fWVsc2Uge3U1PXU4QXJyYXlbaWR4KytdJjYzO3UwPSh1MCYxKTw8MzB8dTE8PDI0fHUyPDwxOHx1Mzw8MTJ8dTQ8PDZ8dTU7fX19aWYodTA8NjU1MzYpe3N0cis9U3RyaW5nLmZyb21DaGFyQ29kZSh1MCk7fWVsc2Uge3ZhciBjaD11MC02NTUzNjtzdHIrPVN0cmluZy5mcm9tQ2hhckNvZGUoNTUyOTZ8Y2g+PjEwLDU2MzIwfGNoJjEwMjMpO319fX1mdW5jdGlvbiBVVEY4VG9TdHJpbmcocHRyKXtyZXR1cm4gVVRGOEFycmF5VG9TdHJpbmcoSEVBUFU4LHB0cil9ZnVuY3Rpb24gc3RyaW5nVG9VVEY4QXJyYXkoc3RyLG91dFU4QXJyYXksb3V0SWR4LG1heEJ5dGVzVG9Xcml0ZSl7aWYoIShtYXhCeXRlc1RvV3JpdGU+MCkpcmV0dXJuIDA7dmFyIHN0YXJ0SWR4PW91dElkeDt2YXIgZW5kSWR4PW91dElkeCttYXhCeXRlc1RvV3JpdGUtMTtmb3IodmFyIGk9MDtpPHN0ci5sZW5ndGg7KytpKXt2YXIgdT1zdHIuY2hhckNvZGVBdChpKTtpZih1Pj01NTI5NiYmdTw9NTczNDMpdT02NTUzNisoKHUmMTAyMyk8PDEwKXxzdHIuY2hhckNvZGVBdCgrK2kpJjEwMjM7aWYodTw9MTI3KXtpZihvdXRJZHg+PWVuZElkeClicmVhaztvdXRVOEFycmF5W291dElkeCsrXT11O31lbHNlIGlmKHU8PTIwNDcpe2lmKG91dElkeCsxPj1lbmRJZHgpYnJlYWs7b3V0VThBcnJheVtvdXRJZHgrK109MTkyfHU+PjY7b3V0VThBcnJheVtvdXRJZHgrK109MTI4fHUmNjM7fWVsc2UgaWYodTw9NjU1MzUpe2lmKG91dElkeCsyPj1lbmRJZHgpYnJlYWs7b3V0VThBcnJheVtvdXRJZHgrK109MjI0fHU+PjEyO291dFU4QXJyYXlbb3V0SWR4KytdPTEyOHx1Pj42JjYzO291dFU4QXJyYXlbb3V0SWR4KytdPTEyOHx1JjYzO31lbHNlIGlmKHU8PTIwOTcxNTEpe2lmKG91dElkeCszPj1lbmRJZHgpYnJlYWs7b3V0VThBcnJheVtvdXRJZHgrK109MjQwfHU+PjE4O291dFU4QXJyYXlbb3V0SWR4KytdPTEyOHx1Pj4xMiY2MztvdXRVOEFycmF5W291dElkeCsrXT0xMjh8dT4+NiY2MztvdXRVOEFycmF5W291dElkeCsrXT0xMjh8dSY2Mzt9ZWxzZSBpZih1PD02NzEwODg2Myl7aWYob3V0SWR4KzQ+PWVuZElkeClicmVhaztvdXRVOEFycmF5W291dElkeCsrXT0yNDh8dT4+MjQ7b3V0VThBcnJheVtvdXRJZHgrK109MTI4fHU+PjE4JjYzO291dFU4QXJyYXlbb3V0SWR4KytdPTEyOHx1Pj4xMiY2MztvdXRVOEFycmF5W291dElkeCsrXT0xMjh8dT4+NiY2MztvdXRVOEFycmF5W291dElkeCsrXT0xMjh8dSY2Mzt9ZWxzZSB7aWYob3V0SWR4KzU+PWVuZElkeClicmVhaztvdXRVOEFycmF5W291dElkeCsrXT0yNTJ8dT4+MzA7b3V0VThBcnJheVtvdXRJZHgrK109MTI4fHU+PjI0JjYzO291dFU4QXJyYXlbb3V0SWR4KytdPTEyOHx1Pj4xOCY2MztvdXRVOEFycmF5W291dElkeCsrXT0xMjh8dT4+MTImNjM7b3V0VThBcnJheVtvdXRJZHgrK109MTI4fHU+PjYmNjM7b3V0VThBcnJheVtvdXRJZHgrK109MTI4fHUmNjM7fX1vdXRVOEFycmF5W291dElkeF09MDtyZXR1cm4gb3V0SWR4LXN0YXJ0SWR4fWZ1bmN0aW9uIHN0cmluZ1RvVVRGOChzdHIsb3V0UHRyLG1heEJ5dGVzVG9Xcml0ZSl7cmV0dXJuIHN0cmluZ1RvVVRGOEFycmF5KHN0cixIRUFQVTgsb3V0UHRyLG1heEJ5dGVzVG9Xcml0ZSl9ZnVuY3Rpb24gbGVuZ3RoQnl0ZXNVVEY4KHN0cil7dmFyIGxlbj0wO2Zvcih2YXIgaT0wO2k8c3RyLmxlbmd0aDsrK2kpe3ZhciB1PXN0ci5jaGFyQ29kZUF0KGkpO2lmKHU+PTU1Mjk2JiZ1PD01NzM0Myl1PTY1NTM2KygodSYxMDIzKTw8MTApfHN0ci5jaGFyQ29kZUF0KCsraSkmMTAyMztpZih1PD0xMjcpeysrbGVuO31lbHNlIGlmKHU8PTIwNDcpe2xlbis9Mjt9ZWxzZSBpZih1PD02NTUzNSl7bGVuKz0zO31lbHNlIGlmKHU8PTIwOTcxNTEpe2xlbis9NDt9ZWxzZSBpZih1PD02NzEwODg2Myl7bGVuKz01O31lbHNlIHtsZW4rPTY7fX1yZXR1cm4gbGVufXR5cGVvZiBUZXh0RGVjb2RlciE9PSJ1bmRlZmluZWQiP25ldyBUZXh0RGVjb2RlcigidXRmLTE2bGUiKTp1bmRlZmluZWQ7ZnVuY3Rpb24gVVRGMzJUb1N0cmluZyhwdHIpe3ZhciBpPTA7dmFyIHN0cj0iIjt3aGlsZSgxKXt2YXIgdXRmMzI9SEVBUDMyW3B0citpKjQ+PjJdO2lmKHV0ZjMyPT0wKXJldHVybiBzdHI7KytpO2lmKHV0ZjMyPj02NTUzNil7dmFyIGNoPXV0ZjMyLTY1NTM2O3N0cis9U3RyaW5nLmZyb21DaGFyQ29kZSg1NTI5NnxjaD4+MTAsNTYzMjB8Y2gmMTAyMyk7fWVsc2Uge3N0cis9U3RyaW5nLmZyb21DaGFyQ29kZSh1dGYzMik7fX19ZnVuY3Rpb24gYWxsb2NhdGVVVEY4KHN0cil7dmFyIHNpemU9bGVuZ3RoQnl0ZXNVVEY4KHN0cikrMTt2YXIgcmV0PV9tYWxsb2Moc2l6ZSk7aWYocmV0KXN0cmluZ1RvVVRGOEFycmF5KHN0cixIRUFQOCxyZXQsc2l6ZSk7cmV0dXJuIHJldH1mdW5jdGlvbiBkZW1hbmdsZShmdW5jKXtyZXR1cm4gZnVuY31mdW5jdGlvbiBkZW1hbmdsZUFsbCh0ZXh0KXt2YXIgcmVnZXg9L19fWltcd1xkX10rL2c7cmV0dXJuIHRleHQucmVwbGFjZShyZWdleCwoZnVuY3Rpb24oeCl7dmFyIHk9ZGVtYW5nbGUoeCk7cmV0dXJuIHg9PT15P3g6eCsiIFsiK3krIl0ifSkpfWZ1bmN0aW9uIGpzU3RhY2tUcmFjZSgpe3ZhciBlcnI9bmV3IEVycm9yO2lmKCFlcnIuc3RhY2spe3RyeXt0aHJvdyBuZXcgRXJyb3IoMCl9Y2F0Y2goZSl7ZXJyPWU7fWlmKCFlcnIuc3RhY2spe3JldHVybiAiKG5vIHN0YWNrIHRyYWNlIGF2YWlsYWJsZSkifX1yZXR1cm4gZXJyLnN0YWNrLnRvU3RyaW5nKCl9ZnVuY3Rpb24gc3RhY2tUcmFjZSgpe3ZhciBqcz1qc1N0YWNrVHJhY2UoKTtpZihNb2R1bGVbImV4dHJhU3RhY2tUcmFjZSJdKWpzKz0iXG4iK01vZHVsZVsiZXh0cmFTdGFja1RyYWNlIl0oKTtyZXR1cm4gZGVtYW5nbGVBbGwoanMpfXZhciBXQVNNX1BBR0VfU0laRT02NTUzNjt2YXIgQVNNSlNfUEFHRV9TSVpFPTE2Nzc3MjE2O3ZhciBNSU5fVE9UQUxfTUVNT1JZPTE2Nzc3MjE2O2Z1bmN0aW9uIGFsaWduVXAoeCxtdWx0aXBsZSl7aWYoeCVtdWx0aXBsZT4wKXt4Kz1tdWx0aXBsZS14JW11bHRpcGxlO31yZXR1cm4geH12YXIgYnVmZmVyLEhFQVA4LEhFQVBVOCxIRUFQMTYsSEVBUFUxNixIRUFQMzIsSEVBUFUzMixIRUFQRjMyLEhFQVBGNjQ7ZnVuY3Rpb24gdXBkYXRlR2xvYmFsQnVmZmVyKGJ1Zil7TW9kdWxlWyJidWZmZXIiXT1idWZmZXI9YnVmO31mdW5jdGlvbiB1cGRhdGVHbG9iYWxCdWZmZXJWaWV3cygpe01vZHVsZVsiSEVBUDgiXT1IRUFQOD1uZXcgSW50OEFycmF5KGJ1ZmZlcik7TW9kdWxlWyJIRUFQMTYiXT1IRUFQMTY9bmV3IEludDE2QXJyYXkoYnVmZmVyKTtNb2R1bGVbIkhFQVAzMiJdPUhFQVAzMj1uZXcgSW50MzJBcnJheShidWZmZXIpO01vZHVsZVsiSEVBUFU4Il09SEVBUFU4PW5ldyBVaW50OEFycmF5KGJ1ZmZlcik7TW9kdWxlWyJIRUFQVTE2Il09SEVBUFUxNj1uZXcgVWludDE2QXJyYXkoYnVmZmVyKTtNb2R1bGVbIkhFQVBVMzIiXT1IRUFQVTMyPW5ldyBVaW50MzJBcnJheShidWZmZXIpO01vZHVsZVsiSEVBUEYzMiJdPUhFQVBGMzI9bmV3IEZsb2F0MzJBcnJheShidWZmZXIpO01vZHVsZVsiSEVBUEY2NCJdPUhFQVBGNjQ9bmV3IEZsb2F0NjRBcnJheShidWZmZXIpO312YXIgU1RBVElDX0JBU0UsU1RBVElDVE9QLHN0YXRpY1NlYWxlZDt2YXIgU1RBQ0tfQkFTRSxTVEFDS1RPUCxTVEFDS19NQVg7dmFyIERZTkFNSUNfQkFTRSxEWU5BTUlDVE9QX1BUUjtTVEFUSUNfQkFTRT1TVEFUSUNUT1A9U1RBQ0tfQkFTRT1TVEFDS1RPUD1TVEFDS19NQVg9RFlOQU1JQ19CQVNFPURZTkFNSUNUT1BfUFRSPTA7c3RhdGljU2VhbGVkPWZhbHNlO2Z1bmN0aW9uIGFib3J0T25DYW5ub3RHcm93TWVtb3J5KCl7YWJvcnQoIkNhbm5vdCBlbmxhcmdlIG1lbW9yeSBhcnJheXMuIEVpdGhlciAoMSkgY29tcGlsZSB3aXRoICAtcyBUT1RBTF9NRU1PUlk9WCAgd2l0aCBYIGhpZ2hlciB0aGFuIHRoZSBjdXJyZW50IHZhbHVlICIrVE9UQUxfTUVNT1JZKyIsICgyKSBjb21waWxlIHdpdGggIC1zIEFMTE9XX01FTU9SWV9HUk9XVEg9MSAgd2hpY2ggYWxsb3dzIGluY3JlYXNpbmcgdGhlIHNpemUgYXQgcnVudGltZSwgb3IgKDMpIGlmIHlvdSB3YW50IG1hbGxvYyB0byByZXR1cm4gTlVMTCAoMCkgaW5zdGVhZCBvZiB0aGlzIGFib3J0LCBjb21waWxlIHdpdGggIC1zIEFCT1JUSU5HX01BTExPQz0wICIpO31pZighTW9kdWxlWyJyZWFsbG9jQnVmZmVyIl0pTW9kdWxlWyJyZWFsbG9jQnVmZmVyIl09KGZ1bmN0aW9uKHNpemUpe3ZhciByZXQ7dHJ5e2lmKEFycmF5QnVmZmVyLnRyYW5zZmVyKXtyZXQ9QXJyYXlCdWZmZXIudHJhbnNmZXIoYnVmZmVyLHNpemUpO31lbHNlIHt2YXIgb2xkSEVBUDg9SEVBUDg7cmV0PW5ldyBBcnJheUJ1ZmZlcihzaXplKTt2YXIgdGVtcD1uZXcgSW50OEFycmF5KHJldCk7dGVtcC5zZXQob2xkSEVBUDgpO319Y2F0Y2goZSl7cmV0dXJuIGZhbHNlfXZhciBzdWNjZXNzPV9lbXNjcmlwdGVuX3JlcGxhY2VfbWVtb3J5KHJldCk7aWYoIXN1Y2Nlc3MpcmV0dXJuIGZhbHNlO3JldHVybiByZXR9KTtmdW5jdGlvbiBlbmxhcmdlTWVtb3J5KCl7dmFyIFBBR0VfTVVMVElQTEU9TW9kdWxlWyJ1c2luZ1dhc20iXT9XQVNNX1BBR0VfU0laRTpBU01KU19QQUdFX1NJWkU7dmFyIExJTUlUPTIxNDc0ODM2NDgtUEFHRV9NVUxUSVBMRTtpZihIRUFQMzJbRFlOQU1JQ1RPUF9QVFI+PjJdPkxJTUlUKXtyZXR1cm4gZmFsc2V9dmFyIE9MRF9UT1RBTF9NRU1PUlk9VE9UQUxfTUVNT1JZO1RPVEFMX01FTU9SWT1NYXRoLm1heChUT1RBTF9NRU1PUlksTUlOX1RPVEFMX01FTU9SWSk7d2hpbGUoVE9UQUxfTUVNT1JZPEhFQVAzMltEWU5BTUlDVE9QX1BUUj4+Ml0pe2lmKFRPVEFMX01FTU9SWTw9NTM2ODcwOTEyKXtUT1RBTF9NRU1PUlk9YWxpZ25VcCgyKlRPVEFMX01FTU9SWSxQQUdFX01VTFRJUExFKTt9ZWxzZSB7VE9UQUxfTUVNT1JZPU1hdGgubWluKGFsaWduVXAoKDMqVE9UQUxfTUVNT1JZKzIxNDc0ODM2NDgpLzQsUEFHRV9NVUxUSVBMRSksTElNSVQpO319dmFyIHJlcGxhY2VtZW50PU1vZHVsZVsicmVhbGxvY0J1ZmZlciJdKFRPVEFMX01FTU9SWSk7aWYoIXJlcGxhY2VtZW50fHxyZXBsYWNlbWVudC5ieXRlTGVuZ3RoIT1UT1RBTF9NRU1PUlkpe1RPVEFMX01FTU9SWT1PTERfVE9UQUxfTUVNT1JZO3JldHVybiBmYWxzZX11cGRhdGVHbG9iYWxCdWZmZXIocmVwbGFjZW1lbnQpO3VwZGF0ZUdsb2JhbEJ1ZmZlclZpZXdzKCk7cmV0dXJuIHRydWV9dmFyIGJ5dGVMZW5ndGg7dHJ5e2J5dGVMZW5ndGg9RnVuY3Rpb24ucHJvdG90eXBlLmNhbGwuYmluZChPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKEFycmF5QnVmZmVyLnByb3RvdHlwZSwiYnl0ZUxlbmd0aCIpLmdldCk7Ynl0ZUxlbmd0aChuZXcgQXJyYXlCdWZmZXIoNCkpO31jYXRjaChlKXtieXRlTGVuZ3RoPShmdW5jdGlvbihidWZmZXIpe3JldHVybiBidWZmZXIuYnl0ZUxlbmd0aH0pO312YXIgVE9UQUxfU1RBQ0s9TW9kdWxlWyJUT1RBTF9TVEFDSyJdfHw1MjQyODgwO3ZhciBUT1RBTF9NRU1PUlk9TW9kdWxlWyJUT1RBTF9NRU1PUlkiXXx8MTY3NzcyMTY7aWYoVE9UQUxfTUVNT1JZPFRPVEFMX1NUQUNLKU1vZHVsZS5wcmludEVycigiVE9UQUxfTUVNT1JZIHNob3VsZCBiZSBsYXJnZXIgdGhhbiBUT1RBTF9TVEFDSywgd2FzICIrVE9UQUxfTUVNT1JZKyIhIChUT1RBTF9TVEFDSz0iK1RPVEFMX1NUQUNLKyIpIik7aWYoTW9kdWxlWyJidWZmZXIiXSl7YnVmZmVyPU1vZHVsZVsiYnVmZmVyIl07fWVsc2Uge2lmKHR5cGVvZiBXZWJBc3NlbWJseT09PSJvYmplY3QiJiZ0eXBlb2YgV2ViQXNzZW1ibHkuTWVtb3J5PT09ImZ1bmN0aW9uIil7TW9kdWxlWyJ3YXNtTWVtb3J5Il09bmV3IFdlYkFzc2VtYmx5Lk1lbW9yeSh7ImluaXRpYWwiOlRPVEFMX01FTU9SWS9XQVNNX1BBR0VfU0laRX0pO2J1ZmZlcj1Nb2R1bGVbIndhc21NZW1vcnkiXS5idWZmZXI7fWVsc2Uge2J1ZmZlcj1uZXcgQXJyYXlCdWZmZXIoVE9UQUxfTUVNT1JZKTt9TW9kdWxlWyJidWZmZXIiXT1idWZmZXI7fXVwZGF0ZUdsb2JhbEJ1ZmZlclZpZXdzKCk7ZnVuY3Rpb24gZ2V0VG90YWxNZW1vcnkoKXtyZXR1cm4gVE9UQUxfTUVNT1JZfUhFQVAzMlswXT0xNjY4NTA5MDI5O0hFQVAxNlsxXT0yNTQ1OTtpZihIRUFQVThbMl0hPT0xMTV8fEhFQVBVOFszXSE9PTk5KXRocm93ICJSdW50aW1lIGVycm9yOiBleHBlY3RlZCB0aGUgc3lzdGVtIHRvIGJlIGxpdHRsZS1lbmRpYW4hIjtmdW5jdGlvbiBjYWxsUnVudGltZUNhbGxiYWNrcyhjYWxsYmFja3Mpe3doaWxlKGNhbGxiYWNrcy5sZW5ndGg+MCl7dmFyIGNhbGxiYWNrPWNhbGxiYWNrcy5zaGlmdCgpO2lmKHR5cGVvZiBjYWxsYmFjaz09ImZ1bmN0aW9uIil7Y2FsbGJhY2soKTtjb250aW51ZX12YXIgZnVuYz1jYWxsYmFjay5mdW5jO2lmKHR5cGVvZiBmdW5jPT09Im51bWJlciIpe2lmKGNhbGxiYWNrLmFyZz09PXVuZGVmaW5lZCl7TW9kdWxlWyJkeW5DYWxsX3YiXShmdW5jKTt9ZWxzZSB7TW9kdWxlWyJkeW5DYWxsX3ZpIl0oZnVuYyxjYWxsYmFjay5hcmcpO319ZWxzZSB7ZnVuYyhjYWxsYmFjay5hcmc9PT11bmRlZmluZWQ/bnVsbDpjYWxsYmFjay5hcmcpO319fXZhciBfX0FUUFJFUlVOX189W107dmFyIF9fQVRJTklUX189W107dmFyIF9fQVRNQUlOX189W107dmFyIF9fQVRFWElUX189W107dmFyIF9fQVRQT1NUUlVOX189W107dmFyIHJ1bnRpbWVJbml0aWFsaXplZD1mYWxzZTtmdW5jdGlvbiBwcmVSdW4oKXtpZihNb2R1bGVbInByZVJ1biJdKXtpZih0eXBlb2YgTW9kdWxlWyJwcmVSdW4iXT09ImZ1bmN0aW9uIilNb2R1bGVbInByZVJ1biJdPVtNb2R1bGVbInByZVJ1biJdXTt3aGlsZShNb2R1bGVbInByZVJ1biJdLmxlbmd0aCl7YWRkT25QcmVSdW4oTW9kdWxlWyJwcmVSdW4iXS5zaGlmdCgpKTt9fWNhbGxSdW50aW1lQ2FsbGJhY2tzKF9fQVRQUkVSVU5fXyk7fWZ1bmN0aW9uIGVuc3VyZUluaXRSdW50aW1lKCl7aWYocnVudGltZUluaXRpYWxpemVkKXJldHVybjtydW50aW1lSW5pdGlhbGl6ZWQ9dHJ1ZTtjYWxsUnVudGltZUNhbGxiYWNrcyhfX0FUSU5JVF9fKTt9ZnVuY3Rpb24gcHJlTWFpbigpe2NhbGxSdW50aW1lQ2FsbGJhY2tzKF9fQVRNQUlOX18pO31mdW5jdGlvbiBleGl0UnVudGltZSgpe2NhbGxSdW50aW1lQ2FsbGJhY2tzKF9fQVRFWElUX18pO31mdW5jdGlvbiBwb3N0UnVuKCl7aWYoTW9kdWxlWyJwb3N0UnVuIl0pe2lmKHR5cGVvZiBNb2R1bGVbInBvc3RSdW4iXT09ImZ1bmN0aW9uIilNb2R1bGVbInBvc3RSdW4iXT1bTW9kdWxlWyJwb3N0UnVuIl1dO3doaWxlKE1vZHVsZVsicG9zdFJ1biJdLmxlbmd0aCl7YWRkT25Qb3N0UnVuKE1vZHVsZVsicG9zdFJ1biJdLnNoaWZ0KCkpO319Y2FsbFJ1bnRpbWVDYWxsYmFja3MoX19BVFBPU1RSVU5fXyk7fWZ1bmN0aW9uIGFkZE9uUHJlUnVuKGNiKXtfX0FUUFJFUlVOX18udW5zaGlmdChjYik7fWZ1bmN0aW9uIGFkZE9uUG9zdFJ1bihjYil7X19BVFBPU1RSVU5fXy51bnNoaWZ0KGNiKTt9ZnVuY3Rpb24gd3JpdGVBc2NpaVRvTWVtb3J5KHN0cixidWZmZXIsZG9udEFkZE51bGwpe2Zvcih2YXIgaT0wO2k8c3RyLmxlbmd0aDsrK2kpe0hFQVA4W2J1ZmZlcisrPj4wXT1zdHIuY2hhckNvZGVBdChpKTt9aWYoIWRvbnRBZGROdWxsKUhFQVA4W2J1ZmZlcj4+MF09MDt9dmFyIE1hdGhfYWJzPU1hdGguYWJzO3ZhciBNYXRoX2NlaWw9TWF0aC5jZWlsO3ZhciBNYXRoX2Zsb29yPU1hdGguZmxvb3I7dmFyIE1hdGhfbWluPU1hdGgubWluO3ZhciBydW5EZXBlbmRlbmNpZXM9MDt2YXIgZGVwZW5kZW5jaWVzRnVsZmlsbGVkPW51bGw7ZnVuY3Rpb24gYWRkUnVuRGVwZW5kZW5jeShpZCl7cnVuRGVwZW5kZW5jaWVzKys7aWYoTW9kdWxlWyJtb25pdG9yUnVuRGVwZW5kZW5jaWVzIl0pe01vZHVsZVsibW9uaXRvclJ1bkRlcGVuZGVuY2llcyJdKHJ1bkRlcGVuZGVuY2llcyk7fX1mdW5jdGlvbiByZW1vdmVSdW5EZXBlbmRlbmN5KGlkKXtydW5EZXBlbmRlbmNpZXMtLTtpZihNb2R1bGVbIm1vbml0b3JSdW5EZXBlbmRlbmNpZXMiXSl7TW9kdWxlWyJtb25pdG9yUnVuRGVwZW5kZW5jaWVzIl0ocnVuRGVwZW5kZW5jaWVzKTt9aWYocnVuRGVwZW5kZW5jaWVzPT0wKXtpZihkZXBlbmRlbmNpZXNGdWxmaWxsZWQpe3ZhciBjYWxsYmFjaz1kZXBlbmRlbmNpZXNGdWxmaWxsZWQ7ZGVwZW5kZW5jaWVzRnVsZmlsbGVkPW51bGw7Y2FsbGJhY2soKTt9fX1Nb2R1bGVbInByZWxvYWRlZEltYWdlcyJdPXt9O01vZHVsZVsicHJlbG9hZGVkQXVkaW9zIl09e307dmFyIGRhdGFVUklQcmVmaXg9ImRhdGE6YXBwbGljYXRpb24vb2N0ZXQtc3RyZWFtO2Jhc2U2NCwiO2Z1bmN0aW9uIGlzRGF0YVVSSShmaWxlbmFtZSl7cmV0dXJuIFN0cmluZy5wcm90b3R5cGUuc3RhcnRzV2l0aD9maWxlbmFtZS5zdGFydHNXaXRoKGRhdGFVUklQcmVmaXgpOmZpbGVuYW1lLmluZGV4T2YoZGF0YVVSSVByZWZpeCk9PT0wfWZ1bmN0aW9uIGludGVncmF0ZVdhc21KUygpe3ZhciB3YXNtVGV4dEZpbGU9InVucGFjay53YXN0Ijt2YXIgYXNtanNDb2RlRmlsZT0idW5wYWNrLnRlbXAuYXNtLmpzIjtpZih0eXBlb2YgTW9kdWxlWyJsb2NhdGVGaWxlIl09PT0iZnVuY3Rpb24iKXtpZighaXNEYXRhVVJJKHdhc21UZXh0RmlsZSkpe3dhc21UZXh0RmlsZT1Nb2R1bGVbImxvY2F0ZUZpbGUiXSh3YXNtVGV4dEZpbGUpO31pZighaXNEYXRhVVJJKHdhc21CaW5hcnlGaWxlKSl7d2FzbUJpbmFyeUZpbGU9TW9kdWxlWyJsb2NhdGVGaWxlIl0od2FzbUJpbmFyeUZpbGUpO31pZighaXNEYXRhVVJJKGFzbWpzQ29kZUZpbGUpKXthc21qc0NvZGVGaWxlPU1vZHVsZVsibG9jYXRlRmlsZSJdKGFzbWpzQ29kZUZpbGUpO319dmFyIHdhc21QYWdlU2l6ZT02NCoxMDI0O3ZhciBpbmZvPXsiZ2xvYmFsIjpudWxsLCJlbnYiOm51bGwsImFzbTJ3YXNtIjp7ImY2NC1yZW0iOihmdW5jdGlvbih4LHkpe3JldHVybiB4JXl9KSwiZGVidWdnZXIiOihmdW5jdGlvbigpe2RlYnVnZ2VyfSl9LCJwYXJlbnQiOk1vZHVsZX07dmFyIGV4cG9ydHM9bnVsbDtmdW5jdGlvbiBtZXJnZU1lbW9yeShuZXdCdWZmZXIpe3ZhciBvbGRCdWZmZXI9TW9kdWxlWyJidWZmZXIiXTtpZihuZXdCdWZmZXIuYnl0ZUxlbmd0aDxvbGRCdWZmZXIuYnl0ZUxlbmd0aCl7TW9kdWxlWyJwcmludEVyciJdKCJ0aGUgbmV3IGJ1ZmZlciBpbiBtZXJnZU1lbW9yeSBpcyBzbWFsbGVyIHRoYW4gdGhlIHByZXZpb3VzIG9uZS4gaW4gbmF0aXZlIHdhc20sIHdlIHNob3VsZCBncm93IG1lbW9yeSBoZXJlIik7fXZhciBvbGRWaWV3PW5ldyBJbnQ4QXJyYXkob2xkQnVmZmVyKTt2YXIgbmV3Vmlldz1uZXcgSW50OEFycmF5KG5ld0J1ZmZlcik7bmV3Vmlldy5zZXQob2xkVmlldyk7dXBkYXRlR2xvYmFsQnVmZmVyKG5ld0J1ZmZlcik7dXBkYXRlR2xvYmFsQnVmZmVyVmlld3MoKTt9ZnVuY3Rpb24gZml4SW1wb3J0cyhpbXBvcnRzKXtyZXR1cm4gaW1wb3J0c31mdW5jdGlvbiBnZXRCaW5hcnkoKXt0cnl7aWYoTW9kdWxlWyJ3YXNtQmluYXJ5Il0pe3JldHVybiBuZXcgVWludDhBcnJheShNb2R1bGVbIndhc21CaW5hcnkiXSl9aWYoTW9kdWxlWyJyZWFkQmluYXJ5Il0pe3JldHVybiBNb2R1bGVbInJlYWRCaW5hcnkiXSh3YXNtQmluYXJ5RmlsZSl9ZWxzZSB7dGhyb3cgIm9uIHRoZSB3ZWIsIHdlIG5lZWQgdGhlIHdhc20gYmluYXJ5IHRvIGJlIHByZWxvYWRlZCBhbmQgc2V0IG9uIE1vZHVsZVsnd2FzbUJpbmFyeSddLiBlbWNjLnB5IHdpbGwgZG8gdGhhdCBmb3IgeW91IHdoZW4gZ2VuZXJhdGluZyBIVE1MIChidXQgbm90IEpTKSJ9fWNhdGNoKGVycil7YWJvcnQoZXJyKTt9fWZ1bmN0aW9uIGdldEJpbmFyeVByb21pc2UoKXtpZighTW9kdWxlWyJ3YXNtQmluYXJ5Il0mJihFTlZJUk9OTUVOVF9JU19XRUJ8fEVOVklST05NRU5UX0lTX1dPUktFUikmJnR5cGVvZiBmZXRjaD09PSJmdW5jdGlvbiIpe3JldHVybiBmZXRjaCh3YXNtQmluYXJ5RmlsZSx7Y3JlZGVudGlhbHN9KS50aGVuKChmdW5jdGlvbihyZXNwb25zZSl7aWYoIXJlc3BvbnNlWyJvayJdKXt0aHJvdyAiZmFpbGVkIHRvIGxvYWQgd2FzbSBiaW5hcnkgZmlsZSBhdCAnIit3YXNtQmluYXJ5RmlsZSsiJyJ9cmV0dXJuIHJlc3BvbnNlWyJhcnJheUJ1ZmZlciJdKCl9KSkuY2F0Y2goKGZ1bmN0aW9uKCl7cmV0dXJuIGdldEJpbmFyeSgpfSkpfXJldHVybiBuZXcgUHJvbWlzZSgoZnVuY3Rpb24ocmVzb2x2ZSxyZWplY3Qpe3Jlc29sdmUoZ2V0QmluYXJ5KCkpO30pKX1mdW5jdGlvbiBkb05hdGl2ZVdhc20oZ2xvYmFsLGVudixwcm92aWRlZEJ1ZmZlcil7aWYodHlwZW9mIFdlYkFzc2VtYmx5IT09Im9iamVjdCIpe01vZHVsZVsicHJpbnRFcnIiXSgibm8gbmF0aXZlIHdhc20gc3VwcG9ydCBkZXRlY3RlZCIpO3JldHVybiBmYWxzZX1pZighKE1vZHVsZVsid2FzbU1lbW9yeSJdaW5zdGFuY2VvZiBXZWJBc3NlbWJseS5NZW1vcnkpKXtNb2R1bGVbInByaW50RXJyIl0oIm5vIG5hdGl2ZSB3YXNtIE1lbW9yeSBpbiB1c2UiKTtyZXR1cm4gZmFsc2V9ZW52WyJtZW1vcnkiXT1Nb2R1bGVbIndhc21NZW1vcnkiXTtpbmZvWyJnbG9iYWwiXT17Ik5hTiI6TmFOLCJJbmZpbml0eSI6SW5maW5pdHl9O2luZm9bImdsb2JhbC5NYXRoIl09TWF0aDtpbmZvWyJlbnYiXT1lbnY7ZnVuY3Rpb24gcmVjZWl2ZUluc3RhbmNlKGluc3RhbmNlLG1vZHVsZSl7ZXhwb3J0cz1pbnN0YW5jZS5leHBvcnRzO2lmKGV4cG9ydHMubWVtb3J5KW1lcmdlTWVtb3J5KGV4cG9ydHMubWVtb3J5KTtNb2R1bGVbImFzbSJdPWV4cG9ydHM7TW9kdWxlWyJ1c2luZ1dhc20iXT10cnVlO3JlbW92ZVJ1bkRlcGVuZGVuY3koKTt9YWRkUnVuRGVwZW5kZW5jeSgpO2lmKE1vZHVsZVsiaW5zdGFudGlhdGVXYXNtIl0pe3RyeXtyZXR1cm4gTW9kdWxlWyJpbnN0YW50aWF0ZVdhc20iXShpbmZvLHJlY2VpdmVJbnN0YW5jZSl9Y2F0Y2goZSl7TW9kdWxlWyJwcmludEVyciJdKCJNb2R1bGUuaW5zdGFudGlhdGVXYXNtIGNhbGxiYWNrIGZhaWxlZCB3aXRoIGVycm9yOiAiK2UpO3JldHVybiBmYWxzZX19ZnVuY3Rpb24gcmVjZWl2ZUluc3RhbnRpYXRlZFNvdXJjZShvdXRwdXQpe3JlY2VpdmVJbnN0YW5jZShvdXRwdXRbImluc3RhbmNlIl0sb3V0cHV0WyJtb2R1bGUiXSk7fWZ1bmN0aW9uIGluc3RhbnRpYXRlQXJyYXlCdWZmZXIocmVjZWl2ZXIpe2dldEJpbmFyeVByb21pc2UoKS50aGVuKChmdW5jdGlvbihiaW5hcnkpe3JldHVybiBXZWJBc3NlbWJseS5pbnN0YW50aWF0ZShiaW5hcnksaW5mbyl9KSkudGhlbihyZWNlaXZlcikuY2F0Y2goKGZ1bmN0aW9uKHJlYXNvbil7TW9kdWxlWyJwcmludEVyciJdKCJmYWlsZWQgdG8gYXN5bmNocm9ub3VzbHkgcHJlcGFyZSB3YXNtOiAiK3JlYXNvbik7YWJvcnQocmVhc29uKTt9KSk7fWlmKCFNb2R1bGVbIndhc21CaW5hcnkiXSYmdHlwZW9mIFdlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nPT09ImZ1bmN0aW9uIiYmIWlzRGF0YVVSSSh3YXNtQmluYXJ5RmlsZSkmJnR5cGVvZiBmZXRjaD09PSJmdW5jdGlvbiIpe1dlYkFzc2VtYmx5Lmluc3RhbnRpYXRlU3RyZWFtaW5nKGZldGNoKHdhc21CaW5hcnlGaWxlLHtjcmVkZW50aWFsc30pLGluZm8pLnRoZW4ocmVjZWl2ZUluc3RhbnRpYXRlZFNvdXJjZSkuY2F0Y2goKGZ1bmN0aW9uKHJlYXNvbil7TW9kdWxlWyJwcmludEVyciJdKCJ3YXNtIHN0cmVhbWluZyBjb21waWxlIGZhaWxlZDogIityZWFzb24pO01vZHVsZVsicHJpbnRFcnIiXSgiZmFsbGluZyBiYWNrIHRvIEFycmF5QnVmZmVyIGluc3RhbnRpYXRpb24iKTtpbnN0YW50aWF0ZUFycmF5QnVmZmVyKHJlY2VpdmVJbnN0YW50aWF0ZWRTb3VyY2UpO30pKTt9ZWxzZSB7aW5zdGFudGlhdGVBcnJheUJ1ZmZlcihyZWNlaXZlSW5zdGFudGlhdGVkU291cmNlKTt9cmV0dXJuIHt9fU1vZHVsZVsiYXNtUHJlbG9hZCJdPU1vZHVsZVsiYXNtIl07dmFyIGFzbWpzUmVhbGxvY0J1ZmZlcj1Nb2R1bGVbInJlYWxsb2NCdWZmZXIiXTt2YXIgd2FzbVJlYWxsb2NCdWZmZXI9KGZ1bmN0aW9uKHNpemUpe3ZhciBQQUdFX01VTFRJUExFPU1vZHVsZVsidXNpbmdXYXNtIl0/V0FTTV9QQUdFX1NJWkU6QVNNSlNfUEFHRV9TSVpFO3NpemU9YWxpZ25VcChzaXplLFBBR0VfTVVMVElQTEUpO3ZhciBvbGQ9TW9kdWxlWyJidWZmZXIiXTt2YXIgb2xkU2l6ZT1vbGQuYnl0ZUxlbmd0aDtpZihNb2R1bGVbInVzaW5nV2FzbSJdKXt0cnl7dmFyIHJlc3VsdD1Nb2R1bGVbIndhc21NZW1vcnkiXS5ncm93KChzaXplLW9sZFNpemUpL3dhc21QYWdlU2l6ZSk7aWYocmVzdWx0IT09KC0xfDApKXtyZXR1cm4gTW9kdWxlWyJidWZmZXIiXT1Nb2R1bGVbIndhc21NZW1vcnkiXS5idWZmZXJ9ZWxzZSB7cmV0dXJuIG51bGx9fWNhdGNoKGUpe3JldHVybiBudWxsfX19KTtNb2R1bGVbInJlYWxsb2NCdWZmZXIiXT0oZnVuY3Rpb24oc2l6ZSl7aWYoZmluYWxNZXRob2Q9PT0iYXNtanMiKXtyZXR1cm4gYXNtanNSZWFsbG9jQnVmZmVyKHNpemUpfWVsc2Uge3JldHVybiB3YXNtUmVhbGxvY0J1ZmZlcihzaXplKX19KTt2YXIgZmluYWxNZXRob2Q9IiI7TW9kdWxlWyJhc20iXT0oZnVuY3Rpb24oZ2xvYmFsLGVudixwcm92aWRlZEJ1ZmZlcil7ZW52PWZpeEltcG9ydHMoZW52KTtpZighZW52WyJ0YWJsZSJdKXt2YXIgVEFCTEVfU0laRT1Nb2R1bGVbIndhc21UYWJsZVNpemUiXTtpZihUQUJMRV9TSVpFPT09dW5kZWZpbmVkKVRBQkxFX1NJWkU9MTAyNDt2YXIgTUFYX1RBQkxFX1NJWkU9TW9kdWxlWyJ3YXNtTWF4VGFibGVTaXplIl07aWYodHlwZW9mIFdlYkFzc2VtYmx5PT09Im9iamVjdCImJnR5cGVvZiBXZWJBc3NlbWJseS5UYWJsZT09PSJmdW5jdGlvbiIpe2lmKE1BWF9UQUJMRV9TSVpFIT09dW5kZWZpbmVkKXtlbnZbInRhYmxlIl09bmV3IFdlYkFzc2VtYmx5LlRhYmxlKHsiaW5pdGlhbCI6VEFCTEVfU0laRSwibWF4aW11bSI6TUFYX1RBQkxFX1NJWkUsImVsZW1lbnQiOiJhbnlmdW5jIn0pO31lbHNlIHtlbnZbInRhYmxlIl09bmV3IFdlYkFzc2VtYmx5LlRhYmxlKHsiaW5pdGlhbCI6VEFCTEVfU0laRSxlbGVtZW50OiJhbnlmdW5jIn0pO319ZWxzZSB7ZW52WyJ0YWJsZSJdPW5ldyBBcnJheShUQUJMRV9TSVpFKTt9TW9kdWxlWyJ3YXNtVGFibGUiXT1lbnZbInRhYmxlIl07fWlmKCFlbnZbIm1lbW9yeUJhc2UiXSl7ZW52WyJtZW1vcnlCYXNlIl09TW9kdWxlWyJTVEFUSUNfQkFTRSJdO31pZighZW52WyJ0YWJsZUJhc2UiXSl7ZW52WyJ0YWJsZUJhc2UiXT0wO312YXIgZXhwb3J0cztleHBvcnRzPWRvTmF0aXZlV2FzbShnbG9iYWwsZW52KTtpZighZXhwb3J0cylhYm9ydCgibm8gYmluYXJ5ZW4gbWV0aG9kIHN1Y2NlZWRlZC4gY29uc2lkZXIgZW5hYmxpbmcgbW9yZSBvcHRpb25zLCBsaWtlIGludGVycHJldGluZywgaWYgeW91IHdhbnQgdGhhdDogaHR0cHM6Ly9naXRodWIuY29tL2tyaXBrZW4vZW1zY3JpcHRlbi93aWtpL1dlYkFzc2VtYmx5I2JpbmFyeWVuLW1ldGhvZHMiKTtyZXR1cm4gZXhwb3J0c30pO31pbnRlZ3JhdGVXYXNtSlMoKTtTVEFUSUNfQkFTRT1HTE9CQUxfQkFTRTtTVEFUSUNUT1A9U1RBVElDX0JBU0UrNjY5NjA7X19BVElOSVRfXy5wdXNoKHtmdW5jOihmdW5jdGlvbigpe19fR0xPQkFMX19zdWJfSV9nbG9iYWxfY3BwKCk7fSl9LHtmdW5jOihmdW5jdGlvbigpe19fR0xPQkFMX19zdWJfSV9jcmNfY3BwKCk7fSl9LHtmdW5jOihmdW5jdGlvbigpe19fR0xPQkFMX19zdWJfSV9icmlkZ2VfY3BwKCk7fSl9LHtmdW5jOihmdW5jdGlvbigpe19fR0xPQkFMX19zdWJfSV9iaW5kX2NwcCgpO30pfSk7dmFyIFNUQVRJQ19CVU1QPTY2OTYwO01vZHVsZVsiU1RBVElDX0JBU0UiXT1TVEFUSUNfQkFTRTtNb2R1bGVbIlNUQVRJQ19CVU1QIl09U1RBVElDX0JVTVA7U1RBVElDVE9QKz0xNjtmdW5jdGlvbiBfX19jeGFfYWxsb2NhdGVfZXhjZXB0aW9uKHNpemUpe3JldHVybiBfbWFsbG9jKHNpemUpfXZhciBFWENFUFRJT05TPXtsYXN0OjAsY2F1Z2h0OltdLGluZm9zOnt9LGRlQWRqdXN0OihmdW5jdGlvbihhZGp1c3RlZCl7aWYoIWFkanVzdGVkfHxFWENFUFRJT05TLmluZm9zW2FkanVzdGVkXSlyZXR1cm4gYWRqdXN0ZWQ7Zm9yKHZhciBrZXkgaW4gRVhDRVBUSU9OUy5pbmZvcyl7dmFyIHB0cj0ra2V5O3ZhciBpbmZvPUVYQ0VQVElPTlMuaW5mb3NbcHRyXTtpZihpbmZvLmFkanVzdGVkPT09YWRqdXN0ZWQpe3JldHVybiBwdHJ9fXJldHVybiBhZGp1c3RlZH0pLGFkZFJlZjooZnVuY3Rpb24ocHRyKXtpZighcHRyKXJldHVybjt2YXIgaW5mbz1FWENFUFRJT05TLmluZm9zW3B0cl07aW5mby5yZWZjb3VudCsrO30pLGRlY1JlZjooZnVuY3Rpb24ocHRyKXtpZighcHRyKXJldHVybjt2YXIgaW5mbz1FWENFUFRJT05TLmluZm9zW3B0cl07YXNzZXJ0KGluZm8ucmVmY291bnQ+MCk7aW5mby5yZWZjb3VudC0tO2lmKGluZm8ucmVmY291bnQ9PT0wJiYhaW5mby5yZXRocm93bil7aWYoaW5mby5kZXN0cnVjdG9yKXtNb2R1bGVbImR5bkNhbGxfdmkiXShpbmZvLmRlc3RydWN0b3IscHRyKTt9ZGVsZXRlIEVYQ0VQVElPTlMuaW5mb3NbcHRyXTtfX19jeGFfZnJlZV9leGNlcHRpb24ocHRyKTt9fSksY2xlYXJSZWY6KGZ1bmN0aW9uKHB0cil7aWYoIXB0cilyZXR1cm47dmFyIGluZm89RVhDRVBUSU9OUy5pbmZvc1twdHJdO2luZm8ucmVmY291bnQ9MDt9KX07ZnVuY3Rpb24gX19fY3hhX2JlZ2luX2NhdGNoKHB0cil7dmFyIGluZm89RVhDRVBUSU9OUy5pbmZvc1twdHJdO2lmKGluZm8mJiFpbmZvLmNhdWdodCl7aW5mby5jYXVnaHQ9dHJ1ZTt9aWYoaW5mbylpbmZvLnJldGhyb3duPWZhbHNlO0VYQ0VQVElPTlMuY2F1Z2h0LnB1c2gocHRyKTtFWENFUFRJT05TLmFkZFJlZihFWENFUFRJT05TLmRlQWRqdXN0KHB0cikpO3JldHVybiBwdHJ9ZnVuY3Rpb24gX19fY3hhX2ZyZWVfZXhjZXB0aW9uKHB0cil7dHJ5e3JldHVybiBfZnJlZShwdHIpfWNhdGNoKGUpe319ZnVuY3Rpb24gX19fY3hhX2VuZF9jYXRjaCgpe01vZHVsZVsic2V0VGhyZXciXSgwKTt2YXIgcHRyPUVYQ0VQVElPTlMuY2F1Z2h0LnBvcCgpO2lmKHB0cil7RVhDRVBUSU9OUy5kZWNSZWYoRVhDRVBUSU9OUy5kZUFkanVzdChwdHIpKTtFWENFUFRJT05TLmxhc3Q9MDt9fWZ1bmN0aW9uIF9fX2N4YV9maW5kX21hdGNoaW5nX2NhdGNoXzIoKXtyZXR1cm4gX19fY3hhX2ZpbmRfbWF0Y2hpbmdfY2F0Y2guYXBwbHkobnVsbCxhcmd1bWVudHMpfWZ1bmN0aW9uIF9fX2N4YV9maW5kX21hdGNoaW5nX2NhdGNoXzMoKXtyZXR1cm4gX19fY3hhX2ZpbmRfbWF0Y2hpbmdfY2F0Y2guYXBwbHkobnVsbCxhcmd1bWVudHMpfWZ1bmN0aW9uIF9fX2N4YV9maW5kX21hdGNoaW5nX2NhdGNoXzQoKXtyZXR1cm4gX19fY3hhX2ZpbmRfbWF0Y2hpbmdfY2F0Y2guYXBwbHkobnVsbCxhcmd1bWVudHMpfWZ1bmN0aW9uIF9fX3Jlc3VtZUV4Y2VwdGlvbihwdHIpe2lmKCFFWENFUFRJT05TLmxhc3Qpe0VYQ0VQVElPTlMubGFzdD1wdHI7fXRocm93IHB0cn1mdW5jdGlvbiBfX19jeGFfZmluZF9tYXRjaGluZ19jYXRjaCgpe3ZhciB0aHJvd249RVhDRVBUSU9OUy5sYXN0O2lmKCF0aHJvd24pe3JldHVybiAoc2V0VGVtcFJldDAoMCksMCl8MH12YXIgaW5mbz1FWENFUFRJT05TLmluZm9zW3Rocm93bl07dmFyIHRocm93bnR5cGU9aW5mby50eXBlO2lmKCF0aHJvd250eXBlKXtyZXR1cm4gKHNldFRlbXBSZXQwKDApLHRocm93bil8MH12YXIgdHlwZUFycmF5PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cyk7TW9kdWxlWyJfX19jeGFfaXNfcG9pbnRlcl90eXBlIl0odGhyb3dudHlwZSk7aWYoIV9fX2N4YV9maW5kX21hdGNoaW5nX2NhdGNoLmJ1ZmZlcilfX19jeGFfZmluZF9tYXRjaGluZ19jYXRjaC5idWZmZXI9X21hbGxvYyg0KTtIRUFQMzJbX19fY3hhX2ZpbmRfbWF0Y2hpbmdfY2F0Y2guYnVmZmVyPj4yXT10aHJvd247dGhyb3duPV9fX2N4YV9maW5kX21hdGNoaW5nX2NhdGNoLmJ1ZmZlcjtmb3IodmFyIGk9MDtpPHR5cGVBcnJheS5sZW5ndGg7aSsrKXtpZih0eXBlQXJyYXlbaV0mJk1vZHVsZVsiX19fY3hhX2Nhbl9jYXRjaCJdKHR5cGVBcnJheVtpXSx0aHJvd250eXBlLHRocm93bikpe3Rocm93bj1IRUFQMzJbdGhyb3duPj4yXTtpbmZvLmFkanVzdGVkPXRocm93bjtyZXR1cm4gKHNldFRlbXBSZXQwKHR5cGVBcnJheVtpXSksdGhyb3duKXwwfX10aHJvd249SEVBUDMyW3Rocm93bj4+Ml07cmV0dXJuIChzZXRUZW1wUmV0MCh0aHJvd250eXBlKSx0aHJvd24pfDB9ZnVuY3Rpb24gX19fY3hhX3Rocm93KHB0cix0eXBlLGRlc3RydWN0b3Ipe0VYQ0VQVElPTlMuaW5mb3NbcHRyXT17cHRyOnB0cixhZGp1c3RlZDpwdHIsdHlwZTp0eXBlLGRlc3RydWN0b3I6ZGVzdHJ1Y3RvcixyZWZjb3VudDowLGNhdWdodDpmYWxzZSxyZXRocm93bjpmYWxzZX07RVhDRVBUSU9OUy5sYXN0PXB0cjt0aHJvdyBwdHJ9ZnVuY3Rpb24gX19fbG9jaygpe312YXIgRVJSTk9fQ09ERVM9e0VQRVJNOjEsRU5PRU5UOjIsRVNSQ0g6MyxFSU5UUjo0LEVJTzo1LEVOWElPOjYsRTJCSUc6NyxFTk9FWEVDOjgsRUJBREY6OSxFQ0hJTEQ6MTAsRUFHQUlOOjExLEVXT1VMREJMT0NLOjExLEVOT01FTToxMixFQUNDRVM6MTMsRUZBVUxUOjE0LEVOT1RCTEs6MTUsRUJVU1k6MTYsRUVYSVNUOjE3LEVYREVWOjE4LEVOT0RFVjoxOSxFTk9URElSOjIwLEVJU0RJUjoyMSxFSU5WQUw6MjIsRU5GSUxFOjIzLEVNRklMRToyNCxFTk9UVFk6MjUsRVRYVEJTWToyNixFRkJJRzoyNyxFTk9TUEM6MjgsRVNQSVBFOjI5LEVST0ZTOjMwLEVNTElOSzozMSxFUElQRTozMixFRE9NOjMzLEVSQU5HRTozNCxFTk9NU0c6NDIsRUlEUk06NDMsRUNIUk5HOjQ0LEVMMk5TWU5DOjQ1LEVMM0hMVDo0NixFTDNSU1Q6NDcsRUxOUk5HOjQ4LEVVTkFUQ0g6NDksRU5PQ1NJOjUwLEVMMkhMVDo1MSxFREVBRExLOjM1LEVOT0xDSzozNyxFQkFERTo1MixFQkFEUjo1MyxFWEZVTEw6NTQsRU5PQU5POjU1LEVCQURSUUM6NTYsRUJBRFNMVDo1NyxFREVBRExPQ0s6MzUsRUJGT05UOjU5LEVOT1NUUjo2MCxFTk9EQVRBOjYxLEVUSU1FOjYyLEVOT1NSOjYzLEVOT05FVDo2NCxFTk9QS0c6NjUsRVJFTU9URTo2NixFTk9MSU5LOjY3LEVBRFY6NjgsRVNSTU5UOjY5LEVDT01NOjcwLEVQUk9UTzo3MSxFTVVMVElIT1A6NzIsRURPVERPVDo3MyxFQkFETVNHOjc0LEVOT1RVTklROjc2LEVCQURGRDo3NyxFUkVNQ0hHOjc4LEVMSUJBQ0M6NzksRUxJQkJBRDo4MCxFTElCU0NOOjgxLEVMSUJNQVg6ODIsRUxJQkVYRUM6ODMsRU5PU1lTOjM4LEVOT1RFTVBUWTozOSxFTkFNRVRPT0xPTkc6MzYsRUxPT1A6NDAsRU9QTk9UU1VQUDo5NSxFUEZOT1NVUFBPUlQ6OTYsRUNPTk5SRVNFVDoxMDQsRU5PQlVGUzoxMDUsRUFGTk9TVVBQT1JUOjk3LEVQUk9UT1RZUEU6OTEsRU5PVFNPQ0s6ODgsRU5PUFJPVE9PUFQ6OTIsRVNIVVRET1dOOjEwOCxFQ09OTlJFRlVTRUQ6MTExLEVBRERSSU5VU0U6OTgsRUNPTk5BQk9SVEVEOjEwMyxFTkVUVU5SRUFDSDoxMDEsRU5FVERPV046MTAwLEVUSU1FRE9VVDoxMTAsRUhPU1RET1dOOjExMixFSE9TVFVOUkVBQ0g6MTEzLEVJTlBST0dSRVNTOjExNSxFQUxSRUFEWToxMTQsRURFU1RBRERSUkVROjg5LEVNU0dTSVpFOjkwLEVQUk9UT05PU1VQUE9SVDo5MyxFU09DS1ROT1NVUFBPUlQ6OTQsRUFERFJOT1RBVkFJTDo5OSxFTkVUUkVTRVQ6MTAyLEVJU0NPTk46MTA2LEVOT1RDT05OOjEwNyxFVE9PTUFOWVJFRlM6MTA5LEVVU0VSUzo4NyxFRFFVT1Q6MTIyLEVTVEFMRToxMTYsRU5PVFNVUDo5NSxFTk9NRURJVU06MTIzLEVJTFNFUTo4NCxFT1ZFUkZMT1c6NzUsRUNBTkNFTEVEOjEyNSxFTk9UUkVDT1ZFUkFCTEU6MTMxLEVPV05FUkRFQUQ6MTMwLEVTVFJQSVBFOjg2fTtmdW5jdGlvbiBfX19zZXRFcnJObyh2YWx1ZSl7aWYoTW9kdWxlWyJfX19lcnJub19sb2NhdGlvbiJdKUhFQVAzMltNb2R1bGVbIl9fX2Vycm5vX2xvY2F0aW9uIl0oKT4+Ml09dmFsdWU7cmV0dXJuIHZhbHVlfWZ1bmN0aW9uIF9fX21hcF9maWxlKHBhdGhuYW1lLHNpemUpe19fX3NldEVyck5vKEVSUk5PX0NPREVTLkVQRVJNKTtyZXR1cm4gLTF9dmFyIEVSUk5PX01FU1NBR0VTPXswOiJTdWNjZXNzIiwxOiJOb3Qgc3VwZXItdXNlciIsMjoiTm8gc3VjaCBmaWxlIG9yIGRpcmVjdG9yeSIsMzoiTm8gc3VjaCBwcm9jZXNzIiw0OiJJbnRlcnJ1cHRlZCBzeXN0ZW0gY2FsbCIsNToiSS9PIGVycm9yIiw2OiJObyBzdWNoIGRldmljZSBvciBhZGRyZXNzIiw3OiJBcmcgbGlzdCB0b28gbG9uZyIsODoiRXhlYyBmb3JtYXQgZXJyb3IiLDk6IkJhZCBmaWxlIG51bWJlciIsMTA6Ik5vIGNoaWxkcmVuIiwxMToiTm8gbW9yZSBwcm9jZXNzZXMiLDEyOiJOb3QgZW5vdWdoIGNvcmUiLDEzOiJQZXJtaXNzaW9uIGRlbmllZCIsMTQ6IkJhZCBhZGRyZXNzIiwxNToiQmxvY2sgZGV2aWNlIHJlcXVpcmVkIiwxNjoiTW91bnQgZGV2aWNlIGJ1c3kiLDE3OiJGaWxlIGV4aXN0cyIsMTg6IkNyb3NzLWRldmljZSBsaW5rIiwxOToiTm8gc3VjaCBkZXZpY2UiLDIwOiJOb3QgYSBkaXJlY3RvcnkiLDIxOiJJcyBhIGRpcmVjdG9yeSIsMjI6IkludmFsaWQgYXJndW1lbnQiLDIzOiJUb28gbWFueSBvcGVuIGZpbGVzIGluIHN5c3RlbSIsMjQ6IlRvbyBtYW55IG9wZW4gZmlsZXMiLDI1OiJOb3QgYSB0eXBld3JpdGVyIiwyNjoiVGV4dCBmaWxlIGJ1c3kiLDI3OiJGaWxlIHRvbyBsYXJnZSIsMjg6Ik5vIHNwYWNlIGxlZnQgb24gZGV2aWNlIiwyOToiSWxsZWdhbCBzZWVrIiwzMDoiUmVhZCBvbmx5IGZpbGUgc3lzdGVtIiwzMToiVG9vIG1hbnkgbGlua3MiLDMyOiJCcm9rZW4gcGlwZSIsMzM6Ik1hdGggYXJnIG91dCBvZiBkb21haW4gb2YgZnVuYyIsMzQ6Ik1hdGggcmVzdWx0IG5vdCByZXByZXNlbnRhYmxlIiwzNToiRmlsZSBsb2NraW5nIGRlYWRsb2NrIGVycm9yIiwzNjoiRmlsZSBvciBwYXRoIG5hbWUgdG9vIGxvbmciLDM3OiJObyByZWNvcmQgbG9ja3MgYXZhaWxhYmxlIiwzODoiRnVuY3Rpb24gbm90IGltcGxlbWVudGVkIiwzOToiRGlyZWN0b3J5IG5vdCBlbXB0eSIsNDA6IlRvbyBtYW55IHN5bWJvbGljIGxpbmtzIiw0MjoiTm8gbWVzc2FnZSBvZiBkZXNpcmVkIHR5cGUiLDQzOiJJZGVudGlmaWVyIHJlbW92ZWQiLDQ0OiJDaGFubmVsIG51bWJlciBvdXQgb2YgcmFuZ2UiLDQ1OiJMZXZlbCAyIG5vdCBzeW5jaHJvbml6ZWQiLDQ2OiJMZXZlbCAzIGhhbHRlZCIsNDc6IkxldmVsIDMgcmVzZXQiLDQ4OiJMaW5rIG51bWJlciBvdXQgb2YgcmFuZ2UiLDQ5OiJQcm90b2NvbCBkcml2ZXIgbm90IGF0dGFjaGVkIiw1MDoiTm8gQ1NJIHN0cnVjdHVyZSBhdmFpbGFibGUiLDUxOiJMZXZlbCAyIGhhbHRlZCIsNTI6IkludmFsaWQgZXhjaGFuZ2UiLDUzOiJJbnZhbGlkIHJlcXVlc3QgZGVzY3JpcHRvciIsNTQ6IkV4Y2hhbmdlIGZ1bGwiLDU1OiJObyBhbm9kZSIsNTY6IkludmFsaWQgcmVxdWVzdCBjb2RlIiw1NzoiSW52YWxpZCBzbG90Iiw1OToiQmFkIGZvbnQgZmlsZSBmbXQiLDYwOiJEZXZpY2Ugbm90IGEgc3RyZWFtIiw2MToiTm8gZGF0YSAoZm9yIG5vIGRlbGF5IGlvKSIsNjI6IlRpbWVyIGV4cGlyZWQiLDYzOiJPdXQgb2Ygc3RyZWFtcyByZXNvdXJjZXMiLDY0OiJNYWNoaW5lIGlzIG5vdCBvbiB0aGUgbmV0d29yayIsNjU6IlBhY2thZ2Ugbm90IGluc3RhbGxlZCIsNjY6IlRoZSBvYmplY3QgaXMgcmVtb3RlIiw2NzoiVGhlIGxpbmsgaGFzIGJlZW4gc2V2ZXJlZCIsNjg6IkFkdmVydGlzZSBlcnJvciIsNjk6IlNybW91bnQgZXJyb3IiLDcwOiJDb21tdW5pY2F0aW9uIGVycm9yIG9uIHNlbmQiLDcxOiJQcm90b2NvbCBlcnJvciIsNzI6Ik11bHRpaG9wIGF0dGVtcHRlZCIsNzM6IkNyb3NzIG1vdW50IHBvaW50IChub3QgcmVhbGx5IGVycm9yKSIsNzQ6IlRyeWluZyB0byByZWFkIHVucmVhZGFibGUgbWVzc2FnZSIsNzU6IlZhbHVlIHRvbyBsYXJnZSBmb3IgZGVmaW5lZCBkYXRhIHR5cGUiLDc2OiJHaXZlbiBsb2cuIG5hbWUgbm90IHVuaXF1ZSIsNzc6ImYuZC4gaW52YWxpZCBmb3IgdGhpcyBvcGVyYXRpb24iLDc4OiJSZW1vdGUgYWRkcmVzcyBjaGFuZ2VkIiw3OToiQ2FuICAgYWNjZXNzIGEgbmVlZGVkIHNoYXJlZCBsaWIiLDgwOiJBY2Nlc3NpbmcgYSBjb3JydXB0ZWQgc2hhcmVkIGxpYiIsODE6Ii5saWIgc2VjdGlvbiBpbiBhLm91dCBjb3JydXB0ZWQiLDgyOiJBdHRlbXB0aW5nIHRvIGxpbmsgaW4gdG9vIG1hbnkgbGlicyIsODM6IkF0dGVtcHRpbmcgdG8gZXhlYyBhIHNoYXJlZCBsaWJyYXJ5Iiw4NDoiSWxsZWdhbCBieXRlIHNlcXVlbmNlIiw4NjoiU3RyZWFtcyBwaXBlIGVycm9yIiw4NzoiVG9vIG1hbnkgdXNlcnMiLDg4OiJTb2NrZXQgb3BlcmF0aW9uIG9uIG5vbi1zb2NrZXQiLDg5OiJEZXN0aW5hdGlvbiBhZGRyZXNzIHJlcXVpcmVkIiw5MDoiTWVzc2FnZSB0b28gbG9uZyIsOTE6IlByb3RvY29sIHdyb25nIHR5cGUgZm9yIHNvY2tldCIsOTI6IlByb3RvY29sIG5vdCBhdmFpbGFibGUiLDkzOiJVbmtub3duIHByb3RvY29sIiw5NDoiU29ja2V0IHR5cGUgbm90IHN1cHBvcnRlZCIsOTU6Ik5vdCBzdXBwb3J0ZWQiLDk2OiJQcm90b2NvbCBmYW1pbHkgbm90IHN1cHBvcnRlZCIsOTc6IkFkZHJlc3MgZmFtaWx5IG5vdCBzdXBwb3J0ZWQgYnkgcHJvdG9jb2wgZmFtaWx5Iiw5ODoiQWRkcmVzcyBhbHJlYWR5IGluIHVzZSIsOTk6IkFkZHJlc3Mgbm90IGF2YWlsYWJsZSIsMTAwOiJOZXR3b3JrIGludGVyZmFjZSBpcyBub3QgY29uZmlndXJlZCIsMTAxOiJOZXR3b3JrIGlzIHVucmVhY2hhYmxlIiwxMDI6IkNvbm5lY3Rpb24gcmVzZXQgYnkgbmV0d29yayIsMTAzOiJDb25uZWN0aW9uIGFib3J0ZWQiLDEwNDoiQ29ubmVjdGlvbiByZXNldCBieSBwZWVyIiwxMDU6Ik5vIGJ1ZmZlciBzcGFjZSBhdmFpbGFibGUiLDEwNjoiU29ja2V0IGlzIGFscmVhZHkgY29ubmVjdGVkIiwxMDc6IlNvY2tldCBpcyBub3QgY29ubmVjdGVkIiwxMDg6IkNhbid0IHNlbmQgYWZ0ZXIgc29ja2V0IHNodXRkb3duIiwxMDk6IlRvbyBtYW55IHJlZmVyZW5jZXMiLDExMDoiQ29ubmVjdGlvbiB0aW1lZCBvdXQiLDExMToiQ29ubmVjdGlvbiByZWZ1c2VkIiwxMTI6Ikhvc3QgaXMgZG93biIsMTEzOiJIb3N0IGlzIHVucmVhY2hhYmxlIiwxMTQ6IlNvY2tldCBhbHJlYWR5IGNvbm5lY3RlZCIsMTE1OiJDb25uZWN0aW9uIGFscmVhZHkgaW4gcHJvZ3Jlc3MiLDExNjoiU3RhbGUgZmlsZSBoYW5kbGUiLDEyMjoiUXVvdGEgZXhjZWVkZWQiLDEyMzoiTm8gbWVkaXVtIChpbiB0YXBlIGRyaXZlKSIsMTI1OiJPcGVyYXRpb24gY2FuY2VsZWQiLDEzMDoiUHJldmlvdXMgb3duZXIgZGllZCIsMTMxOiJTdGF0ZSBub3QgcmVjb3ZlcmFibGUifTt2YXIgUEFUSD17c3BsaXRQYXRoOihmdW5jdGlvbihmaWxlbmFtZSl7dmFyIHNwbGl0UGF0aFJlPS9eKFwvP3wpKFtcc1xTXSo/KSgoPzpcLnsxLDJ9fFteXC9dKz98KShcLlteLlwvXSp8KSkoPzpbXC9dKikkLztyZXR1cm4gc3BsaXRQYXRoUmUuZXhlYyhmaWxlbmFtZSkuc2xpY2UoMSl9KSxub3JtYWxpemVBcnJheTooZnVuY3Rpb24ocGFydHMsYWxsb3dBYm92ZVJvb3Qpe3ZhciB1cD0wO2Zvcih2YXIgaT1wYXJ0cy5sZW5ndGgtMTtpPj0wO2ktLSl7dmFyIGxhc3Q9cGFydHNbaV07aWYobGFzdD09PSIuIil7cGFydHMuc3BsaWNlKGksMSk7fWVsc2UgaWYobGFzdD09PSIuLiIpe3BhcnRzLnNwbGljZShpLDEpO3VwKys7fWVsc2UgaWYodXApe3BhcnRzLnNwbGljZShpLDEpO3VwLS07fX1pZihhbGxvd0Fib3ZlUm9vdCl7Zm9yKDt1cDt1cC0tKXtwYXJ0cy51bnNoaWZ0KCIuLiIpO319cmV0dXJuIHBhcnRzfSksbm9ybWFsaXplOihmdW5jdGlvbihwYXRoKXt2YXIgaXNBYnNvbHV0ZT1wYXRoLmNoYXJBdCgwKT09PSIvIix0cmFpbGluZ1NsYXNoPXBhdGguc3Vic3RyKC0xKT09PSIvIjtwYXRoPVBBVEgubm9ybWFsaXplQXJyYXkocGF0aC5zcGxpdCgiLyIpLmZpbHRlcigoZnVuY3Rpb24ocCl7cmV0dXJuICEhcH0pKSwhaXNBYnNvbHV0ZSkuam9pbigiLyIpO2lmKCFwYXRoJiYhaXNBYnNvbHV0ZSl7cGF0aD0iLiI7fWlmKHBhdGgmJnRyYWlsaW5nU2xhc2gpe3BhdGgrPSIvIjt9cmV0dXJuIChpc0Fic29sdXRlPyIvIjoiIikrcGF0aH0pLGRpcm5hbWU6KGZ1bmN0aW9uKHBhdGgpe3ZhciByZXN1bHQ9UEFUSC5zcGxpdFBhdGgocGF0aCkscm9vdD1yZXN1bHRbMF0sZGlyPXJlc3VsdFsxXTtpZighcm9vdCYmIWRpcil7cmV0dXJuICIuIn1pZihkaXIpe2Rpcj1kaXIuc3Vic3RyKDAsZGlyLmxlbmd0aC0xKTt9cmV0dXJuIHJvb3QrZGlyfSksYmFzZW5hbWU6KGZ1bmN0aW9uKHBhdGgpe2lmKHBhdGg9PT0iLyIpcmV0dXJuICIvIjt2YXIgbGFzdFNsYXNoPXBhdGgubGFzdEluZGV4T2YoIi8iKTtpZihsYXN0U2xhc2g9PT0tMSlyZXR1cm4gcGF0aDtyZXR1cm4gcGF0aC5zdWJzdHIobGFzdFNsYXNoKzEpfSksZXh0bmFtZTooZnVuY3Rpb24ocGF0aCl7cmV0dXJuIFBBVEguc3BsaXRQYXRoKHBhdGgpWzNdfSksam9pbjooZnVuY3Rpb24oKXt2YXIgcGF0aHM9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDApO3JldHVybiBQQVRILm5vcm1hbGl6ZShwYXRocy5qb2luKCIvIikpfSksam9pbjI6KGZ1bmN0aW9uKGwscil7cmV0dXJuIFBBVEgubm9ybWFsaXplKGwrIi8iK3IpfSkscmVzb2x2ZTooZnVuY3Rpb24oKXt2YXIgcmVzb2x2ZWRQYXRoPSIiLHJlc29sdmVkQWJzb2x1dGU9ZmFsc2U7Zm9yKHZhciBpPWFyZ3VtZW50cy5sZW5ndGgtMTtpPj0tMSYmIXJlc29sdmVkQWJzb2x1dGU7aS0tKXt2YXIgcGF0aD1pPj0wP2FyZ3VtZW50c1tpXTpGUy5jd2QoKTtpZih0eXBlb2YgcGF0aCE9PSJzdHJpbmciKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJBcmd1bWVudHMgdG8gcGF0aC5yZXNvbHZlIG11c3QgYmUgc3RyaW5ncyIpfWVsc2UgaWYoIXBhdGgpe3JldHVybiAiIn1yZXNvbHZlZFBhdGg9cGF0aCsiLyIrcmVzb2x2ZWRQYXRoO3Jlc29sdmVkQWJzb2x1dGU9cGF0aC5jaGFyQXQoMCk9PT0iLyI7fXJlc29sdmVkUGF0aD1QQVRILm5vcm1hbGl6ZUFycmF5KHJlc29sdmVkUGF0aC5zcGxpdCgiLyIpLmZpbHRlcigoZnVuY3Rpb24ocCl7cmV0dXJuICEhcH0pKSwhcmVzb2x2ZWRBYnNvbHV0ZSkuam9pbigiLyIpO3JldHVybiAocmVzb2x2ZWRBYnNvbHV0ZT8iLyI6IiIpK3Jlc29sdmVkUGF0aHx8Ii4ifSkscmVsYXRpdmU6KGZ1bmN0aW9uKGZyb20sdG8pe2Zyb209UEFUSC5yZXNvbHZlKGZyb20pLnN1YnN0cigxKTt0bz1QQVRILnJlc29sdmUodG8pLnN1YnN0cigxKTtmdW5jdGlvbiB0cmltKGFycil7dmFyIHN0YXJ0PTA7Zm9yKDtzdGFydDxhcnIubGVuZ3RoO3N0YXJ0Kyspe2lmKGFycltzdGFydF0hPT0iIilicmVha312YXIgZW5kPWFyci5sZW5ndGgtMTtmb3IoO2VuZD49MDtlbmQtLSl7aWYoYXJyW2VuZF0hPT0iIilicmVha31pZihzdGFydD5lbmQpcmV0dXJuIFtdO3JldHVybiBhcnIuc2xpY2Uoc3RhcnQsZW5kLXN0YXJ0KzEpfXZhciBmcm9tUGFydHM9dHJpbShmcm9tLnNwbGl0KCIvIikpO3ZhciB0b1BhcnRzPXRyaW0odG8uc3BsaXQoIi8iKSk7dmFyIGxlbmd0aD1NYXRoLm1pbihmcm9tUGFydHMubGVuZ3RoLHRvUGFydHMubGVuZ3RoKTt2YXIgc2FtZVBhcnRzTGVuZ3RoPWxlbmd0aDtmb3IodmFyIGk9MDtpPGxlbmd0aDtpKyspe2lmKGZyb21QYXJ0c1tpXSE9PXRvUGFydHNbaV0pe3NhbWVQYXJ0c0xlbmd0aD1pO2JyZWFrfX12YXIgb3V0cHV0UGFydHM9W107Zm9yKHZhciBpPXNhbWVQYXJ0c0xlbmd0aDtpPGZyb21QYXJ0cy5sZW5ndGg7aSsrKXtvdXRwdXRQYXJ0cy5wdXNoKCIuLiIpO31vdXRwdXRQYXJ0cz1vdXRwdXRQYXJ0cy5jb25jYXQodG9QYXJ0cy5zbGljZShzYW1lUGFydHNMZW5ndGgpKTtyZXR1cm4gb3V0cHV0UGFydHMuam9pbigiLyIpfSl9O3ZhciBUVFk9e3R0eXM6W10saW5pdDooZnVuY3Rpb24oKXt9KSxzaHV0ZG93bjooZnVuY3Rpb24oKXt9KSxyZWdpc3RlcjooZnVuY3Rpb24oZGV2LG9wcyl7VFRZLnR0eXNbZGV2XT17aW5wdXQ6W10sb3V0cHV0OltdLG9wczpvcHN9O0ZTLnJlZ2lzdGVyRGV2aWNlKGRldixUVFkuc3RyZWFtX29wcyk7fSksc3RyZWFtX29wczp7b3BlbjooZnVuY3Rpb24oc3RyZWFtKXt2YXIgdHR5PVRUWS50dHlzW3N0cmVhbS5ub2RlLnJkZXZdO2lmKCF0dHkpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVOT0RFVil9c3RyZWFtLnR0eT10dHk7c3RyZWFtLnNlZWthYmxlPWZhbHNlO30pLGNsb3NlOihmdW5jdGlvbihzdHJlYW0pe3N0cmVhbS50dHkub3BzLmZsdXNoKHN0cmVhbS50dHkpO30pLGZsdXNoOihmdW5jdGlvbihzdHJlYW0pe3N0cmVhbS50dHkub3BzLmZsdXNoKHN0cmVhbS50dHkpO30pLHJlYWQ6KGZ1bmN0aW9uKHN0cmVhbSxidWZmZXIsb2Zmc2V0LGxlbmd0aCxwb3Mpe2lmKCFzdHJlYW0udHR5fHwhc3RyZWFtLnR0eS5vcHMuZ2V0X2NoYXIpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVOWElPKX12YXIgYnl0ZXNSZWFkPTA7Zm9yKHZhciBpPTA7aTxsZW5ndGg7aSsrKXt2YXIgcmVzdWx0O3RyeXtyZXN1bHQ9c3RyZWFtLnR0eS5vcHMuZ2V0X2NoYXIoc3RyZWFtLnR0eSk7fWNhdGNoKGUpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVJTyl9aWYocmVzdWx0PT09dW5kZWZpbmVkJiZieXRlc1JlYWQ9PT0wKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FQUdBSU4pfWlmKHJlc3VsdD09PW51bGx8fHJlc3VsdD09PXVuZGVmaW5lZClicmVhaztieXRlc1JlYWQrKztidWZmZXJbb2Zmc2V0K2ldPXJlc3VsdDt9aWYoYnl0ZXNSZWFkKXtzdHJlYW0ubm9kZS50aW1lc3RhbXA9RGF0ZS5ub3coKTt9cmV0dXJuIGJ5dGVzUmVhZH0pLHdyaXRlOihmdW5jdGlvbihzdHJlYW0sYnVmZmVyLG9mZnNldCxsZW5ndGgscG9zKXtpZighc3RyZWFtLnR0eXx8IXN0cmVhbS50dHkub3BzLnB1dF9jaGFyKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FTlhJTyl9Zm9yKHZhciBpPTA7aTxsZW5ndGg7aSsrKXt0cnl7c3RyZWFtLnR0eS5vcHMucHV0X2NoYXIoc3RyZWFtLnR0eSxidWZmZXJbb2Zmc2V0K2ldKTt9Y2F0Y2goZSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlPKX19aWYobGVuZ3RoKXtzdHJlYW0ubm9kZS50aW1lc3RhbXA9RGF0ZS5ub3coKTt9cmV0dXJuIGl9KX0sZGVmYXVsdF90dHlfb3BzOntnZXRfY2hhcjooZnVuY3Rpb24odHR5KXtpZighdHR5LmlucHV0Lmxlbmd0aCl7dmFyIHJlc3VsdD1udWxsO2lmKEVOVklST05NRU5UX0lTX05PREUpe3ZhciBCVUZTSVpFPTI1Njt2YXIgYnVmPW5ldyBCdWZmZXIoQlVGU0laRSk7dmFyIGJ5dGVzUmVhZD0wO3ZhciBpc1Bvc2l4UGxhdGZvcm09cHJvY2Vzcy5wbGF0Zm9ybSE9IndpbjMyIjt2YXIgZmQ9cHJvY2Vzcy5zdGRpbi5mZDtpZihpc1Bvc2l4UGxhdGZvcm0pe3ZhciB1c2luZ0RldmljZT1mYWxzZTt0cnl7ZmQ9ZnMub3BlblN5bmMoIi9kZXYvc3RkaW4iLCJyIik7dXNpbmdEZXZpY2U9dHJ1ZTt9Y2F0Y2goZSl7fX10cnl7Ynl0ZXNSZWFkPWZzLnJlYWRTeW5jKGZkLGJ1ZiwwLEJVRlNJWkUsbnVsbCk7fWNhdGNoKGUpe2lmKGUudG9TdHJpbmcoKS5pbmRleE9mKCJFT0YiKSE9LTEpYnl0ZXNSZWFkPTA7ZWxzZSB0aHJvdyBlfWlmKHVzaW5nRGV2aWNlKXtmcy5jbG9zZVN5bmMoZmQpO31pZihieXRlc1JlYWQ+MCl7cmVzdWx0PWJ1Zi5zbGljZSgwLGJ5dGVzUmVhZCkudG9TdHJpbmcoInV0Zi04Iik7fWVsc2Uge3Jlc3VsdD1udWxsO319ZWxzZSBpZih0eXBlb2Ygd2luZG93IT0idW5kZWZpbmVkIiYmdHlwZW9mIHdpbmRvdy5wcm9tcHQ9PSJmdW5jdGlvbiIpe3Jlc3VsdD13aW5kb3cucHJvbXB0KCJJbnB1dDogIik7aWYocmVzdWx0IT09bnVsbCl7cmVzdWx0Kz0iXG4iO319ZWxzZSBpZih0eXBlb2YgcmVhZGxpbmU9PSJmdW5jdGlvbiIpe3Jlc3VsdD1yZWFkbGluZSgpO2lmKHJlc3VsdCE9PW51bGwpe3Jlc3VsdCs9IlxuIjt9fWlmKCFyZXN1bHQpe3JldHVybiBudWxsfXR0eS5pbnB1dD1pbnRBcnJheUZyb21TdHJpbmcocmVzdWx0LHRydWUpO31yZXR1cm4gdHR5LmlucHV0LnNoaWZ0KCl9KSxwdXRfY2hhcjooZnVuY3Rpb24odHR5LHZhbCl7aWYodmFsPT09bnVsbHx8dmFsPT09MTApe01vZHVsZVsicHJpbnQiXShVVEY4QXJyYXlUb1N0cmluZyh0dHkub3V0cHV0LDApKTt0dHkub3V0cHV0PVtdO31lbHNlIHtpZih2YWwhPTApdHR5Lm91dHB1dC5wdXNoKHZhbCk7fX0pLGZsdXNoOihmdW5jdGlvbih0dHkpe2lmKHR0eS5vdXRwdXQmJnR0eS5vdXRwdXQubGVuZ3RoPjApe01vZHVsZVsicHJpbnQiXShVVEY4QXJyYXlUb1N0cmluZyh0dHkub3V0cHV0LDApKTt0dHkub3V0cHV0PVtdO319KX0sZGVmYXVsdF90dHkxX29wczp7cHV0X2NoYXI6KGZ1bmN0aW9uKHR0eSx2YWwpe2lmKHZhbD09PW51bGx8fHZhbD09PTEwKXtNb2R1bGVbInByaW50RXJyIl0oVVRGOEFycmF5VG9TdHJpbmcodHR5Lm91dHB1dCwwKSk7dHR5Lm91dHB1dD1bXTt9ZWxzZSB7aWYodmFsIT0wKXR0eS5vdXRwdXQucHVzaCh2YWwpO319KSxmbHVzaDooZnVuY3Rpb24odHR5KXtpZih0dHkub3V0cHV0JiZ0dHkub3V0cHV0Lmxlbmd0aD4wKXtNb2R1bGVbInByaW50RXJyIl0oVVRGOEFycmF5VG9TdHJpbmcodHR5Lm91dHB1dCwwKSk7dHR5Lm91dHB1dD1bXTt9fSl9fTt2YXIgTUVNRlM9e29wc190YWJsZTpudWxsLG1vdW50OihmdW5jdGlvbihtb3VudCl7cmV0dXJuIE1FTUZTLmNyZWF0ZU5vZGUobnVsbCwiLyIsMTYzODR8NTExLDApfSksY3JlYXRlTm9kZTooZnVuY3Rpb24ocGFyZW50LG5hbWUsbW9kZSxkZXYpe2lmKEZTLmlzQmxrZGV2KG1vZGUpfHxGUy5pc0ZJRk8obW9kZSkpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVQRVJNKX1pZighTUVNRlMub3BzX3RhYmxlKXtNRU1GUy5vcHNfdGFibGU9e2Rpcjp7bm9kZTp7Z2V0YXR0cjpNRU1GUy5ub2RlX29wcy5nZXRhdHRyLHNldGF0dHI6TUVNRlMubm9kZV9vcHMuc2V0YXR0cixsb29rdXA6TUVNRlMubm9kZV9vcHMubG9va3VwLG1rbm9kOk1FTUZTLm5vZGVfb3BzLm1rbm9kLHJlbmFtZTpNRU1GUy5ub2RlX29wcy5yZW5hbWUsdW5saW5rOk1FTUZTLm5vZGVfb3BzLnVubGluayxybWRpcjpNRU1GUy5ub2RlX29wcy5ybWRpcixyZWFkZGlyOk1FTUZTLm5vZGVfb3BzLnJlYWRkaXIsc3ltbGluazpNRU1GUy5ub2RlX29wcy5zeW1saW5rfSxzdHJlYW06e2xsc2VlazpNRU1GUy5zdHJlYW1fb3BzLmxsc2Vla319LGZpbGU6e25vZGU6e2dldGF0dHI6TUVNRlMubm9kZV9vcHMuZ2V0YXR0cixzZXRhdHRyOk1FTUZTLm5vZGVfb3BzLnNldGF0dHJ9LHN0cmVhbTp7bGxzZWVrOk1FTUZTLnN0cmVhbV9vcHMubGxzZWVrLHJlYWQ6TUVNRlMuc3RyZWFtX29wcy5yZWFkLHdyaXRlOk1FTUZTLnN0cmVhbV9vcHMud3JpdGUsYWxsb2NhdGU6TUVNRlMuc3RyZWFtX29wcy5hbGxvY2F0ZSxtbWFwOk1FTUZTLnN0cmVhbV9vcHMubW1hcCxtc3luYzpNRU1GUy5zdHJlYW1fb3BzLm1zeW5jfX0sbGluazp7bm9kZTp7Z2V0YXR0cjpNRU1GUy5ub2RlX29wcy5nZXRhdHRyLHNldGF0dHI6TUVNRlMubm9kZV9vcHMuc2V0YXR0cixyZWFkbGluazpNRU1GUy5ub2RlX29wcy5yZWFkbGlua30sc3RyZWFtOnt9fSxjaHJkZXY6e25vZGU6e2dldGF0dHI6TUVNRlMubm9kZV9vcHMuZ2V0YXR0cixzZXRhdHRyOk1FTUZTLm5vZGVfb3BzLnNldGF0dHJ9LHN0cmVhbTpGUy5jaHJkZXZfc3RyZWFtX29wc319O312YXIgbm9kZT1GUy5jcmVhdGVOb2RlKHBhcmVudCxuYW1lLG1vZGUsZGV2KTtpZihGUy5pc0Rpcihub2RlLm1vZGUpKXtub2RlLm5vZGVfb3BzPU1FTUZTLm9wc190YWJsZS5kaXIubm9kZTtub2RlLnN0cmVhbV9vcHM9TUVNRlMub3BzX3RhYmxlLmRpci5zdHJlYW07bm9kZS5jb250ZW50cz17fTt9ZWxzZSBpZihGUy5pc0ZpbGUobm9kZS5tb2RlKSl7bm9kZS5ub2RlX29wcz1NRU1GUy5vcHNfdGFibGUuZmlsZS5ub2RlO25vZGUuc3RyZWFtX29wcz1NRU1GUy5vcHNfdGFibGUuZmlsZS5zdHJlYW07bm9kZS51c2VkQnl0ZXM9MDtub2RlLmNvbnRlbnRzPW51bGw7fWVsc2UgaWYoRlMuaXNMaW5rKG5vZGUubW9kZSkpe25vZGUubm9kZV9vcHM9TUVNRlMub3BzX3RhYmxlLmxpbmsubm9kZTtub2RlLnN0cmVhbV9vcHM9TUVNRlMub3BzX3RhYmxlLmxpbmsuc3RyZWFtO31lbHNlIGlmKEZTLmlzQ2hyZGV2KG5vZGUubW9kZSkpe25vZGUubm9kZV9vcHM9TUVNRlMub3BzX3RhYmxlLmNocmRldi5ub2RlO25vZGUuc3RyZWFtX29wcz1NRU1GUy5vcHNfdGFibGUuY2hyZGV2LnN0cmVhbTt9bm9kZS50aW1lc3RhbXA9RGF0ZS5ub3coKTtpZihwYXJlbnQpe3BhcmVudC5jb250ZW50c1tuYW1lXT1ub2RlO31yZXR1cm4gbm9kZX0pLGdldEZpbGVEYXRhQXNSZWd1bGFyQXJyYXk6KGZ1bmN0aW9uKG5vZGUpe2lmKG5vZGUuY29udGVudHMmJm5vZGUuY29udGVudHMuc3ViYXJyYXkpe3ZhciBhcnI9W107Zm9yKHZhciBpPTA7aTxub2RlLnVzZWRCeXRlczsrK2kpYXJyLnB1c2gobm9kZS5jb250ZW50c1tpXSk7cmV0dXJuIGFycn1yZXR1cm4gbm9kZS5jb250ZW50c30pLGdldEZpbGVEYXRhQXNUeXBlZEFycmF5OihmdW5jdGlvbihub2RlKXtpZighbm9kZS5jb250ZW50cylyZXR1cm4gbmV3IFVpbnQ4QXJyYXk7aWYobm9kZS5jb250ZW50cy5zdWJhcnJheSlyZXR1cm4gbm9kZS5jb250ZW50cy5zdWJhcnJheSgwLG5vZGUudXNlZEJ5dGVzKTtyZXR1cm4gbmV3IFVpbnQ4QXJyYXkobm9kZS5jb250ZW50cyl9KSxleHBhbmRGaWxlU3RvcmFnZTooZnVuY3Rpb24obm9kZSxuZXdDYXBhY2l0eSl7aWYobm9kZS5jb250ZW50cyYmbm9kZS5jb250ZW50cy5zdWJhcnJheSYmbmV3Q2FwYWNpdHk+bm9kZS5jb250ZW50cy5sZW5ndGgpe25vZGUuY29udGVudHM9TUVNRlMuZ2V0RmlsZURhdGFBc1JlZ3VsYXJBcnJheShub2RlKTtub2RlLnVzZWRCeXRlcz1ub2RlLmNvbnRlbnRzLmxlbmd0aDt9aWYoIW5vZGUuY29udGVudHN8fG5vZGUuY29udGVudHMuc3ViYXJyYXkpe3ZhciBwcmV2Q2FwYWNpdHk9bm9kZS5jb250ZW50cz9ub2RlLmNvbnRlbnRzLmxlbmd0aDowO2lmKHByZXZDYXBhY2l0eT49bmV3Q2FwYWNpdHkpcmV0dXJuO3ZhciBDQVBBQ0lUWV9ET1VCTElOR19NQVg9MTAyNCoxMDI0O25ld0NhcGFjaXR5PU1hdGgubWF4KG5ld0NhcGFjaXR5LHByZXZDYXBhY2l0eSoocHJldkNhcGFjaXR5PENBUEFDSVRZX0RPVUJMSU5HX01BWD8yOjEuMTI1KXwwKTtpZihwcmV2Q2FwYWNpdHkhPTApbmV3Q2FwYWNpdHk9TWF0aC5tYXgobmV3Q2FwYWNpdHksMjU2KTt2YXIgb2xkQ29udGVudHM9bm9kZS5jb250ZW50cztub2RlLmNvbnRlbnRzPW5ldyBVaW50OEFycmF5KG5ld0NhcGFjaXR5KTtpZihub2RlLnVzZWRCeXRlcz4wKW5vZGUuY29udGVudHMuc2V0KG9sZENvbnRlbnRzLnN1YmFycmF5KDAsbm9kZS51c2VkQnl0ZXMpLDApO3JldHVybn1pZighbm9kZS5jb250ZW50cyYmbmV3Q2FwYWNpdHk+MClub2RlLmNvbnRlbnRzPVtdO3doaWxlKG5vZGUuY29udGVudHMubGVuZ3RoPG5ld0NhcGFjaXR5KW5vZGUuY29udGVudHMucHVzaCgwKTt9KSxyZXNpemVGaWxlU3RvcmFnZTooZnVuY3Rpb24obm9kZSxuZXdTaXplKXtpZihub2RlLnVzZWRCeXRlcz09bmV3U2l6ZSlyZXR1cm47aWYobmV3U2l6ZT09MCl7bm9kZS5jb250ZW50cz1udWxsO25vZGUudXNlZEJ5dGVzPTA7cmV0dXJufWlmKCFub2RlLmNvbnRlbnRzfHxub2RlLmNvbnRlbnRzLnN1YmFycmF5KXt2YXIgb2xkQ29udGVudHM9bm9kZS5jb250ZW50cztub2RlLmNvbnRlbnRzPW5ldyBVaW50OEFycmF5KG5ldyBBcnJheUJ1ZmZlcihuZXdTaXplKSk7aWYob2xkQ29udGVudHMpe25vZGUuY29udGVudHMuc2V0KG9sZENvbnRlbnRzLnN1YmFycmF5KDAsTWF0aC5taW4obmV3U2l6ZSxub2RlLnVzZWRCeXRlcykpKTt9bm9kZS51c2VkQnl0ZXM9bmV3U2l6ZTtyZXR1cm59aWYoIW5vZGUuY29udGVudHMpbm9kZS5jb250ZW50cz1bXTtpZihub2RlLmNvbnRlbnRzLmxlbmd0aD5uZXdTaXplKW5vZGUuY29udGVudHMubGVuZ3RoPW5ld1NpemU7ZWxzZSB3aGlsZShub2RlLmNvbnRlbnRzLmxlbmd0aDxuZXdTaXplKW5vZGUuY29udGVudHMucHVzaCgwKTtub2RlLnVzZWRCeXRlcz1uZXdTaXplO30pLG5vZGVfb3BzOntnZXRhdHRyOihmdW5jdGlvbihub2RlKXt2YXIgYXR0cj17fTthdHRyLmRldj1GUy5pc0NocmRldihub2RlLm1vZGUpP25vZGUuaWQ6MTthdHRyLmlubz1ub2RlLmlkO2F0dHIubW9kZT1ub2RlLm1vZGU7YXR0ci5ubGluaz0xO2F0dHIudWlkPTA7YXR0ci5naWQ9MDthdHRyLnJkZXY9bm9kZS5yZGV2O2lmKEZTLmlzRGlyKG5vZGUubW9kZSkpe2F0dHIuc2l6ZT00MDk2O31lbHNlIGlmKEZTLmlzRmlsZShub2RlLm1vZGUpKXthdHRyLnNpemU9bm9kZS51c2VkQnl0ZXM7fWVsc2UgaWYoRlMuaXNMaW5rKG5vZGUubW9kZSkpe2F0dHIuc2l6ZT1ub2RlLmxpbmsubGVuZ3RoO31lbHNlIHthdHRyLnNpemU9MDt9YXR0ci5hdGltZT1uZXcgRGF0ZShub2RlLnRpbWVzdGFtcCk7YXR0ci5tdGltZT1uZXcgRGF0ZShub2RlLnRpbWVzdGFtcCk7YXR0ci5jdGltZT1uZXcgRGF0ZShub2RlLnRpbWVzdGFtcCk7YXR0ci5ibGtzaXplPTQwOTY7YXR0ci5ibG9ja3M9TWF0aC5jZWlsKGF0dHIuc2l6ZS9hdHRyLmJsa3NpemUpO3JldHVybiBhdHRyfSksc2V0YXR0cjooZnVuY3Rpb24obm9kZSxhdHRyKXtpZihhdHRyLm1vZGUhPT11bmRlZmluZWQpe25vZGUubW9kZT1hdHRyLm1vZGU7fWlmKGF0dHIudGltZXN0YW1wIT09dW5kZWZpbmVkKXtub2RlLnRpbWVzdGFtcD1hdHRyLnRpbWVzdGFtcDt9aWYoYXR0ci5zaXplIT09dW5kZWZpbmVkKXtNRU1GUy5yZXNpemVGaWxlU3RvcmFnZShub2RlLGF0dHIuc2l6ZSk7fX0pLGxvb2t1cDooZnVuY3Rpb24ocGFyZW50LG5hbWUpe3Rocm93IEZTLmdlbmVyaWNFcnJvcnNbRVJSTk9fQ09ERVMuRU5PRU5UXX0pLG1rbm9kOihmdW5jdGlvbihwYXJlbnQsbmFtZSxtb2RlLGRldil7cmV0dXJuIE1FTUZTLmNyZWF0ZU5vZGUocGFyZW50LG5hbWUsbW9kZSxkZXYpfSkscmVuYW1lOihmdW5jdGlvbihvbGRfbm9kZSxuZXdfZGlyLG5ld19uYW1lKXtpZihGUy5pc0RpcihvbGRfbm9kZS5tb2RlKSl7dmFyIG5ld19ub2RlO3RyeXtuZXdfbm9kZT1GUy5sb29rdXBOb2RlKG5ld19kaXIsbmV3X25hbWUpO31jYXRjaChlKXt9aWYobmV3X25vZGUpe2Zvcih2YXIgaSBpbiBuZXdfbm9kZS5jb250ZW50cyl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRU5PVEVNUFRZKX19fWRlbGV0ZSBvbGRfbm9kZS5wYXJlbnQuY29udGVudHNbb2xkX25vZGUubmFtZV07b2xkX25vZGUubmFtZT1uZXdfbmFtZTtuZXdfZGlyLmNvbnRlbnRzW25ld19uYW1lXT1vbGRfbm9kZTtvbGRfbm9kZS5wYXJlbnQ9bmV3X2Rpcjt9KSx1bmxpbms6KGZ1bmN0aW9uKHBhcmVudCxuYW1lKXtkZWxldGUgcGFyZW50LmNvbnRlbnRzW25hbWVdO30pLHJtZGlyOihmdW5jdGlvbihwYXJlbnQsbmFtZSl7dmFyIG5vZGU9RlMubG9va3VwTm9kZShwYXJlbnQsbmFtZSk7Zm9yKHZhciBpIGluIG5vZGUuY29udGVudHMpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVOT1RFTVBUWSl9ZGVsZXRlIHBhcmVudC5jb250ZW50c1tuYW1lXTt9KSxyZWFkZGlyOihmdW5jdGlvbihub2RlKXt2YXIgZW50cmllcz1bIi4iLCIuLiJdO2Zvcih2YXIga2V5IGluIG5vZGUuY29udGVudHMpe2lmKCFub2RlLmNvbnRlbnRzLmhhc093blByb3BlcnR5KGtleSkpe2NvbnRpbnVlfWVudHJpZXMucHVzaChrZXkpO31yZXR1cm4gZW50cmllc30pLHN5bWxpbms6KGZ1bmN0aW9uKHBhcmVudCxuZXduYW1lLG9sZHBhdGgpe3ZhciBub2RlPU1FTUZTLmNyZWF0ZU5vZGUocGFyZW50LG5ld25hbWUsNTExfDQwOTYwLDApO25vZGUubGluaz1vbGRwYXRoO3JldHVybiBub2RlfSkscmVhZGxpbms6KGZ1bmN0aW9uKG5vZGUpe2lmKCFGUy5pc0xpbmsobm9kZS5tb2RlKSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlOVkFMKX1yZXR1cm4gbm9kZS5saW5rfSl9LHN0cmVhbV9vcHM6e3JlYWQ6KGZ1bmN0aW9uKHN0cmVhbSxidWZmZXIsb2Zmc2V0LGxlbmd0aCxwb3NpdGlvbil7dmFyIGNvbnRlbnRzPXN0cmVhbS5ub2RlLmNvbnRlbnRzO2lmKHBvc2l0aW9uPj1zdHJlYW0ubm9kZS51c2VkQnl0ZXMpcmV0dXJuIDA7dmFyIHNpemU9TWF0aC5taW4oc3RyZWFtLm5vZGUudXNlZEJ5dGVzLXBvc2l0aW9uLGxlbmd0aCk7YXNzZXJ0KHNpemU+PTApO2lmKHNpemU+OCYmY29udGVudHMuc3ViYXJyYXkpe2J1ZmZlci5zZXQoY29udGVudHMuc3ViYXJyYXkocG9zaXRpb24scG9zaXRpb24rc2l6ZSksb2Zmc2V0KTt9ZWxzZSB7Zm9yKHZhciBpPTA7aTxzaXplO2krKylidWZmZXJbb2Zmc2V0K2ldPWNvbnRlbnRzW3Bvc2l0aW9uK2ldO31yZXR1cm4gc2l6ZX0pLHdyaXRlOihmdW5jdGlvbihzdHJlYW0sYnVmZmVyLG9mZnNldCxsZW5ndGgscG9zaXRpb24sY2FuT3duKXtpZighbGVuZ3RoKXJldHVybiAwO3ZhciBub2RlPXN0cmVhbS5ub2RlO25vZGUudGltZXN0YW1wPURhdGUubm93KCk7aWYoYnVmZmVyLnN1YmFycmF5JiYoIW5vZGUuY29udGVudHN8fG5vZGUuY29udGVudHMuc3ViYXJyYXkpKXtpZihjYW5Pd24pe25vZGUuY29udGVudHM9YnVmZmVyLnN1YmFycmF5KG9mZnNldCxvZmZzZXQrbGVuZ3RoKTtub2RlLnVzZWRCeXRlcz1sZW5ndGg7cmV0dXJuIGxlbmd0aH1lbHNlIGlmKG5vZGUudXNlZEJ5dGVzPT09MCYmcG9zaXRpb249PT0wKXtub2RlLmNvbnRlbnRzPW5ldyBVaW50OEFycmF5KGJ1ZmZlci5zdWJhcnJheShvZmZzZXQsb2Zmc2V0K2xlbmd0aCkpO25vZGUudXNlZEJ5dGVzPWxlbmd0aDtyZXR1cm4gbGVuZ3RofWVsc2UgaWYocG9zaXRpb24rbGVuZ3RoPD1ub2RlLnVzZWRCeXRlcyl7bm9kZS5jb250ZW50cy5zZXQoYnVmZmVyLnN1YmFycmF5KG9mZnNldCxvZmZzZXQrbGVuZ3RoKSxwb3NpdGlvbik7cmV0dXJuIGxlbmd0aH19TUVNRlMuZXhwYW5kRmlsZVN0b3JhZ2Uobm9kZSxwb3NpdGlvbitsZW5ndGgpO2lmKG5vZGUuY29udGVudHMuc3ViYXJyYXkmJmJ1ZmZlci5zdWJhcnJheSlub2RlLmNvbnRlbnRzLnNldChidWZmZXIuc3ViYXJyYXkob2Zmc2V0LG9mZnNldCtsZW5ndGgpLHBvc2l0aW9uKTtlbHNlIHtmb3IodmFyIGk9MDtpPGxlbmd0aDtpKyspe25vZGUuY29udGVudHNbcG9zaXRpb24raV09YnVmZmVyW29mZnNldCtpXTt9fW5vZGUudXNlZEJ5dGVzPU1hdGgubWF4KG5vZGUudXNlZEJ5dGVzLHBvc2l0aW9uK2xlbmd0aCk7cmV0dXJuIGxlbmd0aH0pLGxsc2VlazooZnVuY3Rpb24oc3RyZWFtLG9mZnNldCx3aGVuY2Upe3ZhciBwb3NpdGlvbj1vZmZzZXQ7aWYod2hlbmNlPT09MSl7cG9zaXRpb24rPXN0cmVhbS5wb3NpdGlvbjt9ZWxzZSBpZih3aGVuY2U9PT0yKXtpZihGUy5pc0ZpbGUoc3RyZWFtLm5vZGUubW9kZSkpe3Bvc2l0aW9uKz1zdHJlYW0ubm9kZS51c2VkQnl0ZXM7fX1pZihwb3NpdGlvbjwwKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU5WQUwpfXJldHVybiBwb3NpdGlvbn0pLGFsbG9jYXRlOihmdW5jdGlvbihzdHJlYW0sb2Zmc2V0LGxlbmd0aCl7TUVNRlMuZXhwYW5kRmlsZVN0b3JhZ2Uoc3RyZWFtLm5vZGUsb2Zmc2V0K2xlbmd0aCk7c3RyZWFtLm5vZGUudXNlZEJ5dGVzPU1hdGgubWF4KHN0cmVhbS5ub2RlLnVzZWRCeXRlcyxvZmZzZXQrbGVuZ3RoKTt9KSxtbWFwOihmdW5jdGlvbihzdHJlYW0sYnVmZmVyLG9mZnNldCxsZW5ndGgscG9zaXRpb24scHJvdCxmbGFncyl7aWYoIUZTLmlzRmlsZShzdHJlYW0ubm9kZS5tb2RlKSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRU5PREVWKX12YXIgcHRyO3ZhciBhbGxvY2F0ZWQ7dmFyIGNvbnRlbnRzPXN0cmVhbS5ub2RlLmNvbnRlbnRzO2lmKCEoZmxhZ3MmMikmJihjb250ZW50cy5idWZmZXI9PT1idWZmZXJ8fGNvbnRlbnRzLmJ1ZmZlcj09PWJ1ZmZlci5idWZmZXIpKXthbGxvY2F0ZWQ9ZmFsc2U7cHRyPWNvbnRlbnRzLmJ5dGVPZmZzZXQ7fWVsc2Uge2lmKHBvc2l0aW9uPjB8fHBvc2l0aW9uK2xlbmd0aDxzdHJlYW0ubm9kZS51c2VkQnl0ZXMpe2lmKGNvbnRlbnRzLnN1YmFycmF5KXtjb250ZW50cz1jb250ZW50cy5zdWJhcnJheShwb3NpdGlvbixwb3NpdGlvbitsZW5ndGgpO31lbHNlIHtjb250ZW50cz1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChjb250ZW50cyxwb3NpdGlvbixwb3NpdGlvbitsZW5ndGgpO319YWxsb2NhdGVkPXRydWU7cHRyPV9tYWxsb2MobGVuZ3RoKTtpZighcHRyKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FTk9NRU0pfWJ1ZmZlci5zZXQoY29udGVudHMscHRyKTt9cmV0dXJuIHtwdHI6cHRyLGFsbG9jYXRlZDphbGxvY2F0ZWR9fSksbXN5bmM6KGZ1bmN0aW9uKHN0cmVhbSxidWZmZXIsb2Zmc2V0LGxlbmd0aCxtbWFwRmxhZ3Mpe2lmKCFGUy5pc0ZpbGUoc3RyZWFtLm5vZGUubW9kZSkpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVOT0RFVil9aWYobW1hcEZsYWdzJjIpe3JldHVybiAwfU1FTUZTLnN0cmVhbV9vcHMud3JpdGUoc3RyZWFtLGJ1ZmZlciwwLGxlbmd0aCxvZmZzZXQsZmFsc2UpO3JldHVybiAwfSl9fTt2YXIgSURCRlM9e2Riczp7fSxpbmRleGVkREI6KGZ1bmN0aW9uKCl7aWYodHlwZW9mIGluZGV4ZWREQiE9PSJ1bmRlZmluZWQiKXJldHVybiBpbmRleGVkREI7dmFyIHJldD1udWxsO2lmKHR5cGVvZiB3aW5kb3c9PT0ib2JqZWN0IilyZXQ9d2luZG93LmluZGV4ZWREQnx8d2luZG93Lm1vekluZGV4ZWREQnx8d2luZG93LndlYmtpdEluZGV4ZWREQnx8d2luZG93Lm1zSW5kZXhlZERCO2Fzc2VydChyZXQsIklEQkZTIHVzZWQsIGJ1dCBpbmRleGVkREIgbm90IHN1cHBvcnRlZCIpO3JldHVybiByZXR9KSxEQl9WRVJTSU9OOjIxLERCX1NUT1JFX05BTUU6IkZJTEVfREFUQSIsbW91bnQ6KGZ1bmN0aW9uKG1vdW50KXtyZXR1cm4gTUVNRlMubW91bnQuYXBwbHkobnVsbCxhcmd1bWVudHMpfSksc3luY2ZzOihmdW5jdGlvbihtb3VudCxwb3B1bGF0ZSxjYWxsYmFjayl7SURCRlMuZ2V0TG9jYWxTZXQobW91bnQsKGZ1bmN0aW9uKGVycixsb2NhbCl7aWYoZXJyKXJldHVybiBjYWxsYmFjayhlcnIpO0lEQkZTLmdldFJlbW90ZVNldChtb3VudCwoZnVuY3Rpb24oZXJyLHJlbW90ZSl7aWYoZXJyKXJldHVybiBjYWxsYmFjayhlcnIpO3ZhciBzcmM9cG9wdWxhdGU/cmVtb3RlOmxvY2FsO3ZhciBkc3Q9cG9wdWxhdGU/bG9jYWw6cmVtb3RlO0lEQkZTLnJlY29uY2lsZShzcmMsZHN0LGNhbGxiYWNrKTt9KSk7fSkpO30pLGdldERCOihmdW5jdGlvbihuYW1lLGNhbGxiYWNrKXt2YXIgZGI9SURCRlMuZGJzW25hbWVdO2lmKGRiKXtyZXR1cm4gY2FsbGJhY2sobnVsbCxkYil9dmFyIHJlcTt0cnl7cmVxPUlEQkZTLmluZGV4ZWREQigpLm9wZW4obmFtZSxJREJGUy5EQl9WRVJTSU9OKTt9Y2F0Y2goZSl7cmV0dXJuIGNhbGxiYWNrKGUpfWlmKCFyZXEpe3JldHVybiBjYWxsYmFjaygiVW5hYmxlIHRvIGNvbm5lY3QgdG8gSW5kZXhlZERCIil9cmVxLm9udXBncmFkZW5lZWRlZD0oZnVuY3Rpb24oZSl7dmFyIGRiPWUudGFyZ2V0LnJlc3VsdDt2YXIgdHJhbnNhY3Rpb249ZS50YXJnZXQudHJhbnNhY3Rpb247dmFyIGZpbGVTdG9yZTtpZihkYi5vYmplY3RTdG9yZU5hbWVzLmNvbnRhaW5zKElEQkZTLkRCX1NUT1JFX05BTUUpKXtmaWxlU3RvcmU9dHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoSURCRlMuREJfU1RPUkVfTkFNRSk7fWVsc2Uge2ZpbGVTdG9yZT1kYi5jcmVhdGVPYmplY3RTdG9yZShJREJGUy5EQl9TVE9SRV9OQU1FKTt9aWYoIWZpbGVTdG9yZS5pbmRleE5hbWVzLmNvbnRhaW5zKCJ0aW1lc3RhbXAiKSl7ZmlsZVN0b3JlLmNyZWF0ZUluZGV4KCJ0aW1lc3RhbXAiLCJ0aW1lc3RhbXAiLHt1bmlxdWU6ZmFsc2V9KTt9fSk7cmVxLm9uc3VjY2Vzcz0oZnVuY3Rpb24oKXtkYj1yZXEucmVzdWx0O0lEQkZTLmRic1tuYW1lXT1kYjtjYWxsYmFjayhudWxsLGRiKTt9KTtyZXEub25lcnJvcj0oZnVuY3Rpb24oZSl7Y2FsbGJhY2sodGhpcy5lcnJvcik7ZS5wcmV2ZW50RGVmYXVsdCgpO30pO30pLGdldExvY2FsU2V0OihmdW5jdGlvbihtb3VudCxjYWxsYmFjayl7dmFyIGVudHJpZXM9e307ZnVuY3Rpb24gaXNSZWFsRGlyKHApe3JldHVybiBwIT09Ii4iJiZwIT09Ii4uIn1mdW5jdGlvbiB0b0Fic29sdXRlKHJvb3Qpe3JldHVybihmdW5jdGlvbihwKXtyZXR1cm4gUEFUSC5qb2luMihyb290LHApfSl9dmFyIGNoZWNrPUZTLnJlYWRkaXIobW91bnQubW91bnRwb2ludCkuZmlsdGVyKGlzUmVhbERpcikubWFwKHRvQWJzb2x1dGUobW91bnQubW91bnRwb2ludCkpO3doaWxlKGNoZWNrLmxlbmd0aCl7dmFyIHBhdGg9Y2hlY2sucG9wKCk7dmFyIHN0YXQ7dHJ5e3N0YXQ9RlMuc3RhdChwYXRoKTt9Y2F0Y2goZSl7cmV0dXJuIGNhbGxiYWNrKGUpfWlmKEZTLmlzRGlyKHN0YXQubW9kZSkpe2NoZWNrLnB1c2guYXBwbHkoY2hlY2ssRlMucmVhZGRpcihwYXRoKS5maWx0ZXIoaXNSZWFsRGlyKS5tYXAodG9BYnNvbHV0ZShwYXRoKSkpO31lbnRyaWVzW3BhdGhdPXt0aW1lc3RhbXA6c3RhdC5tdGltZX07fXJldHVybiBjYWxsYmFjayhudWxsLHt0eXBlOiJsb2NhbCIsZW50cmllczplbnRyaWVzfSl9KSxnZXRSZW1vdGVTZXQ6KGZ1bmN0aW9uKG1vdW50LGNhbGxiYWNrKXt2YXIgZW50cmllcz17fTtJREJGUy5nZXREQihtb3VudC5tb3VudHBvaW50LChmdW5jdGlvbihlcnIsZGIpe2lmKGVycilyZXR1cm4gY2FsbGJhY2soZXJyKTt0cnl7dmFyIHRyYW5zYWN0aW9uPWRiLnRyYW5zYWN0aW9uKFtJREJGUy5EQl9TVE9SRV9OQU1FXSwicmVhZG9ubHkiKTt0cmFuc2FjdGlvbi5vbmVycm9yPShmdW5jdGlvbihlKXtjYWxsYmFjayh0aGlzLmVycm9yKTtlLnByZXZlbnREZWZhdWx0KCk7fSk7dmFyIHN0b3JlPXRyYW5zYWN0aW9uLm9iamVjdFN0b3JlKElEQkZTLkRCX1NUT1JFX05BTUUpO3ZhciBpbmRleD1zdG9yZS5pbmRleCgidGltZXN0YW1wIik7aW5kZXgub3BlbktleUN1cnNvcigpLm9uc3VjY2Vzcz0oZnVuY3Rpb24oZXZlbnQpe3ZhciBjdXJzb3I9ZXZlbnQudGFyZ2V0LnJlc3VsdDtpZighY3Vyc29yKXtyZXR1cm4gY2FsbGJhY2sobnVsbCx7dHlwZToicmVtb3RlIixkYjpkYixlbnRyaWVzOmVudHJpZXN9KX1lbnRyaWVzW2N1cnNvci5wcmltYXJ5S2V5XT17dGltZXN0YW1wOmN1cnNvci5rZXl9O2N1cnNvci5jb250aW51ZSgpO30pO31jYXRjaChlKXtyZXR1cm4gY2FsbGJhY2soZSl9fSkpO30pLGxvYWRMb2NhbEVudHJ5OihmdW5jdGlvbihwYXRoLGNhbGxiYWNrKXt2YXIgc3RhdCxub2RlO3RyeXt2YXIgbG9va3VwPUZTLmxvb2t1cFBhdGgocGF0aCk7bm9kZT1sb29rdXAubm9kZTtzdGF0PUZTLnN0YXQocGF0aCk7fWNhdGNoKGUpe3JldHVybiBjYWxsYmFjayhlKX1pZihGUy5pc0RpcihzdGF0Lm1vZGUpKXtyZXR1cm4gY2FsbGJhY2sobnVsbCx7dGltZXN0YW1wOnN0YXQubXRpbWUsbW9kZTpzdGF0Lm1vZGV9KX1lbHNlIGlmKEZTLmlzRmlsZShzdGF0Lm1vZGUpKXtub2RlLmNvbnRlbnRzPU1FTUZTLmdldEZpbGVEYXRhQXNUeXBlZEFycmF5KG5vZGUpO3JldHVybiBjYWxsYmFjayhudWxsLHt0aW1lc3RhbXA6c3RhdC5tdGltZSxtb2RlOnN0YXQubW9kZSxjb250ZW50czpub2RlLmNvbnRlbnRzfSl9ZWxzZSB7cmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcigibm9kZSB0eXBlIG5vdCBzdXBwb3J0ZWQiKSl9fSksc3RvcmVMb2NhbEVudHJ5OihmdW5jdGlvbihwYXRoLGVudHJ5LGNhbGxiYWNrKXt0cnl7aWYoRlMuaXNEaXIoZW50cnkubW9kZSkpe0ZTLm1rZGlyKHBhdGgsZW50cnkubW9kZSk7fWVsc2UgaWYoRlMuaXNGaWxlKGVudHJ5Lm1vZGUpKXtGUy53cml0ZUZpbGUocGF0aCxlbnRyeS5jb250ZW50cyx7Y2FuT3duOnRydWV9KTt9ZWxzZSB7cmV0dXJuIGNhbGxiYWNrKG5ldyBFcnJvcigibm9kZSB0eXBlIG5vdCBzdXBwb3J0ZWQiKSl9RlMuY2htb2QocGF0aCxlbnRyeS5tb2RlKTtGUy51dGltZShwYXRoLGVudHJ5LnRpbWVzdGFtcCxlbnRyeS50aW1lc3RhbXApO31jYXRjaChlKXtyZXR1cm4gY2FsbGJhY2soZSl9Y2FsbGJhY2sobnVsbCk7fSkscmVtb3ZlTG9jYWxFbnRyeTooZnVuY3Rpb24ocGF0aCxjYWxsYmFjayl7dHJ5e3ZhciBsb29rdXA9RlMubG9va3VwUGF0aChwYXRoKTt2YXIgc3RhdD1GUy5zdGF0KHBhdGgpO2lmKEZTLmlzRGlyKHN0YXQubW9kZSkpe0ZTLnJtZGlyKHBhdGgpO31lbHNlIGlmKEZTLmlzRmlsZShzdGF0Lm1vZGUpKXtGUy51bmxpbmsocGF0aCk7fX1jYXRjaChlKXtyZXR1cm4gY2FsbGJhY2soZSl9Y2FsbGJhY2sobnVsbCk7fSksbG9hZFJlbW90ZUVudHJ5OihmdW5jdGlvbihzdG9yZSxwYXRoLGNhbGxiYWNrKXt2YXIgcmVxPXN0b3JlLmdldChwYXRoKTtyZXEub25zdWNjZXNzPShmdW5jdGlvbihldmVudCl7Y2FsbGJhY2sobnVsbCxldmVudC50YXJnZXQucmVzdWx0KTt9KTtyZXEub25lcnJvcj0oZnVuY3Rpb24oZSl7Y2FsbGJhY2sodGhpcy5lcnJvcik7ZS5wcmV2ZW50RGVmYXVsdCgpO30pO30pLHN0b3JlUmVtb3RlRW50cnk6KGZ1bmN0aW9uKHN0b3JlLHBhdGgsZW50cnksY2FsbGJhY2spe3ZhciByZXE9c3RvcmUucHV0KGVudHJ5LHBhdGgpO3JlcS5vbnN1Y2Nlc3M9KGZ1bmN0aW9uKCl7Y2FsbGJhY2sobnVsbCk7fSk7cmVxLm9uZXJyb3I9KGZ1bmN0aW9uKGUpe2NhbGxiYWNrKHRoaXMuZXJyb3IpO2UucHJldmVudERlZmF1bHQoKTt9KTt9KSxyZW1vdmVSZW1vdGVFbnRyeTooZnVuY3Rpb24oc3RvcmUscGF0aCxjYWxsYmFjayl7dmFyIHJlcT1zdG9yZS5kZWxldGUocGF0aCk7cmVxLm9uc3VjY2Vzcz0oZnVuY3Rpb24oKXtjYWxsYmFjayhudWxsKTt9KTtyZXEub25lcnJvcj0oZnVuY3Rpb24oZSl7Y2FsbGJhY2sodGhpcy5lcnJvcik7ZS5wcmV2ZW50RGVmYXVsdCgpO30pO30pLHJlY29uY2lsZTooZnVuY3Rpb24oc3JjLGRzdCxjYWxsYmFjayl7dmFyIHRvdGFsPTA7dmFyIGNyZWF0ZT1bXTtPYmplY3Qua2V5cyhzcmMuZW50cmllcykuZm9yRWFjaCgoZnVuY3Rpb24oa2V5KXt2YXIgZT1zcmMuZW50cmllc1trZXldO3ZhciBlMj1kc3QuZW50cmllc1trZXldO2lmKCFlMnx8ZS50aW1lc3RhbXA+ZTIudGltZXN0YW1wKXtjcmVhdGUucHVzaChrZXkpO3RvdGFsKys7fX0pKTt2YXIgcmVtb3ZlPVtdO09iamVjdC5rZXlzKGRzdC5lbnRyaWVzKS5mb3JFYWNoKChmdW5jdGlvbihrZXkpe2RzdC5lbnRyaWVzW2tleV07dmFyIGUyPXNyYy5lbnRyaWVzW2tleV07aWYoIWUyKXtyZW1vdmUucHVzaChrZXkpO3RvdGFsKys7fX0pKTtpZighdG90YWwpe3JldHVybiBjYWxsYmFjayhudWxsKX12YXIgY29tcGxldGVkPTA7dmFyIGRiPXNyYy50eXBlPT09InJlbW90ZSI/c3JjLmRiOmRzdC5kYjt2YXIgdHJhbnNhY3Rpb249ZGIudHJhbnNhY3Rpb24oW0lEQkZTLkRCX1NUT1JFX05BTUVdLCJyZWFkd3JpdGUiKTt2YXIgc3RvcmU9dHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoSURCRlMuREJfU1RPUkVfTkFNRSk7ZnVuY3Rpb24gZG9uZShlcnIpe2lmKGVycil7aWYoIWRvbmUuZXJyb3JlZCl7ZG9uZS5lcnJvcmVkPXRydWU7cmV0dXJuIGNhbGxiYWNrKGVycil9cmV0dXJufWlmKCsrY29tcGxldGVkPj10b3RhbCl7cmV0dXJuIGNhbGxiYWNrKG51bGwpfX10cmFuc2FjdGlvbi5vbmVycm9yPShmdW5jdGlvbihlKXtkb25lKHRoaXMuZXJyb3IpO2UucHJldmVudERlZmF1bHQoKTt9KTtjcmVhdGUuc29ydCgpLmZvckVhY2goKGZ1bmN0aW9uKHBhdGgpe2lmKGRzdC50eXBlPT09ImxvY2FsIil7SURCRlMubG9hZFJlbW90ZUVudHJ5KHN0b3JlLHBhdGgsKGZ1bmN0aW9uKGVycixlbnRyeSl7aWYoZXJyKXJldHVybiBkb25lKGVycik7SURCRlMuc3RvcmVMb2NhbEVudHJ5KHBhdGgsZW50cnksZG9uZSk7fSkpO31lbHNlIHtJREJGUy5sb2FkTG9jYWxFbnRyeShwYXRoLChmdW5jdGlvbihlcnIsZW50cnkpe2lmKGVycilyZXR1cm4gZG9uZShlcnIpO0lEQkZTLnN0b3JlUmVtb3RlRW50cnkoc3RvcmUscGF0aCxlbnRyeSxkb25lKTt9KSk7fX0pKTtyZW1vdmUuc29ydCgpLnJldmVyc2UoKS5mb3JFYWNoKChmdW5jdGlvbihwYXRoKXtpZihkc3QudHlwZT09PSJsb2NhbCIpe0lEQkZTLnJlbW92ZUxvY2FsRW50cnkocGF0aCxkb25lKTt9ZWxzZSB7SURCRlMucmVtb3ZlUmVtb3RlRW50cnkoc3RvcmUscGF0aCxkb25lKTt9fSkpO30pfTt2YXIgTk9ERUZTPXtpc1dpbmRvd3M6ZmFsc2Usc3RhdGljSW5pdDooZnVuY3Rpb24oKXtOT0RFRlMuaXNXaW5kb3dzPSEhcHJvY2Vzcy5wbGF0Zm9ybS5tYXRjaCgvXndpbi8pO3ZhciBmbGFncz1wcm9jZXNzWyJiaW5kaW5nIl0oImNvbnN0YW50cyIpO2lmKGZsYWdzWyJmcyJdKXtmbGFncz1mbGFnc1siZnMiXTt9Tk9ERUZTLmZsYWdzRm9yTm9kZU1hcD17IjEwMjQiOmZsYWdzWyJPX0FQUEVORCJdLCI2NCI6ZmxhZ3NbIk9fQ1JFQVQiXSwiMTI4IjpmbGFnc1siT19FWENMIl0sIjAiOmZsYWdzWyJPX1JET05MWSJdLCIyIjpmbGFnc1siT19SRFdSIl0sIjQwOTYiOmZsYWdzWyJPX1NZTkMiXSwiNTEyIjpmbGFnc1siT19UUlVOQyJdLCIxIjpmbGFnc1siT19XUk9OTFkiXX07fSksYnVmZmVyRnJvbTooZnVuY3Rpb24oYXJyYXlCdWZmZXIpe3JldHVybiBCdWZmZXIuYWxsb2M/QnVmZmVyLmZyb20oYXJyYXlCdWZmZXIpOm5ldyBCdWZmZXIoYXJyYXlCdWZmZXIpfSksbW91bnQ6KGZ1bmN0aW9uKG1vdW50KXthc3NlcnQoRU5WSVJPTk1FTlRfSVNfTk9ERSk7cmV0dXJuIE5PREVGUy5jcmVhdGVOb2RlKG51bGwsIi8iLE5PREVGUy5nZXRNb2RlKG1vdW50Lm9wdHMucm9vdCksMCl9KSxjcmVhdGVOb2RlOihmdW5jdGlvbihwYXJlbnQsbmFtZSxtb2RlLGRldil7aWYoIUZTLmlzRGlyKG1vZGUpJiYhRlMuaXNGaWxlKG1vZGUpJiYhRlMuaXNMaW5rKG1vZGUpKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU5WQUwpfXZhciBub2RlPUZTLmNyZWF0ZU5vZGUocGFyZW50LG5hbWUsbW9kZSk7bm9kZS5ub2RlX29wcz1OT0RFRlMubm9kZV9vcHM7bm9kZS5zdHJlYW1fb3BzPU5PREVGUy5zdHJlYW1fb3BzO3JldHVybiBub2RlfSksZ2V0TW9kZTooZnVuY3Rpb24ocGF0aCl7dmFyIHN0YXQ7dHJ5e3N0YXQ9ZnMubHN0YXRTeW5jKHBhdGgpO2lmKE5PREVGUy5pc1dpbmRvd3Mpe3N0YXQubW9kZT1zdGF0Lm1vZGV8KHN0YXQubW9kZSYyOTIpPj4yO319Y2F0Y2goZSl7aWYoIWUuY29kZSl0aHJvdyBlO3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTW2UuY29kZV0pfXJldHVybiBzdGF0Lm1vZGV9KSxyZWFsUGF0aDooZnVuY3Rpb24obm9kZSl7dmFyIHBhcnRzPVtdO3doaWxlKG5vZGUucGFyZW50IT09bm9kZSl7cGFydHMucHVzaChub2RlLm5hbWUpO25vZGU9bm9kZS5wYXJlbnQ7fXBhcnRzLnB1c2gobm9kZS5tb3VudC5vcHRzLnJvb3QpO3BhcnRzLnJldmVyc2UoKTtyZXR1cm4gUEFUSC5qb2luLmFwcGx5KG51bGwscGFydHMpfSksZmxhZ3NGb3JOb2RlOihmdW5jdGlvbihmbGFncyl7ZmxhZ3MmPX4yMDk3MTUyO2ZsYWdzJj1+MjA0ODtmbGFncyY9fjMyNzY4O2ZsYWdzJj1+NTI0Mjg4O3ZhciBuZXdGbGFncz0wO2Zvcih2YXIgayBpbiBOT0RFRlMuZmxhZ3NGb3JOb2RlTWFwKXtpZihmbGFncyZrKXtuZXdGbGFnc3w9Tk9ERUZTLmZsYWdzRm9yTm9kZU1hcFtrXTtmbGFnc149azt9fWlmKCFmbGFncyl7cmV0dXJuIG5ld0ZsYWdzfWVsc2Uge3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVJTlZBTCl9fSksbm9kZV9vcHM6e2dldGF0dHI6KGZ1bmN0aW9uKG5vZGUpe3ZhciBwYXRoPU5PREVGUy5yZWFsUGF0aChub2RlKTt2YXIgc3RhdDt0cnl7c3RhdD1mcy5sc3RhdFN5bmMocGF0aCk7fWNhdGNoKGUpe2lmKCFlLmNvZGUpdGhyb3cgZTt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFU1tlLmNvZGVdKX1pZihOT0RFRlMuaXNXaW5kb3dzJiYhc3RhdC5ibGtzaXplKXtzdGF0LmJsa3NpemU9NDA5Njt9aWYoTk9ERUZTLmlzV2luZG93cyYmIXN0YXQuYmxvY2tzKXtzdGF0LmJsb2Nrcz0oc3RhdC5zaXplK3N0YXQuYmxrc2l6ZS0xKS9zdGF0LmJsa3NpemV8MDt9cmV0dXJuIHtkZXY6c3RhdC5kZXYsaW5vOnN0YXQuaW5vLG1vZGU6c3RhdC5tb2RlLG5saW5rOnN0YXQubmxpbmssdWlkOnN0YXQudWlkLGdpZDpzdGF0LmdpZCxyZGV2OnN0YXQucmRldixzaXplOnN0YXQuc2l6ZSxhdGltZTpzdGF0LmF0aW1lLG10aW1lOnN0YXQubXRpbWUsY3RpbWU6c3RhdC5jdGltZSxibGtzaXplOnN0YXQuYmxrc2l6ZSxibG9ja3M6c3RhdC5ibG9ja3N9fSksc2V0YXR0cjooZnVuY3Rpb24obm9kZSxhdHRyKXt2YXIgcGF0aD1OT0RFRlMucmVhbFBhdGgobm9kZSk7dHJ5e2lmKGF0dHIubW9kZSE9PXVuZGVmaW5lZCl7ZnMuY2htb2RTeW5jKHBhdGgsYXR0ci5tb2RlKTtub2RlLm1vZGU9YXR0ci5tb2RlO31pZihhdHRyLnRpbWVzdGFtcCE9PXVuZGVmaW5lZCl7dmFyIGRhdGU9bmV3IERhdGUoYXR0ci50aW1lc3RhbXApO2ZzLnV0aW1lc1N5bmMocGF0aCxkYXRlLGRhdGUpO31pZihhdHRyLnNpemUhPT11bmRlZmluZWQpe2ZzLnRydW5jYXRlU3luYyhwYXRoLGF0dHIuc2l6ZSk7fX1jYXRjaChlKXtpZighZS5jb2RlKXRocm93IGU7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVNbZS5jb2RlXSl9fSksbG9va3VwOihmdW5jdGlvbihwYXJlbnQsbmFtZSl7dmFyIHBhdGg9UEFUSC5qb2luMihOT0RFRlMucmVhbFBhdGgocGFyZW50KSxuYW1lKTt2YXIgbW9kZT1OT0RFRlMuZ2V0TW9kZShwYXRoKTtyZXR1cm4gTk9ERUZTLmNyZWF0ZU5vZGUocGFyZW50LG5hbWUsbW9kZSl9KSxta25vZDooZnVuY3Rpb24ocGFyZW50LG5hbWUsbW9kZSxkZXYpe3ZhciBub2RlPU5PREVGUy5jcmVhdGVOb2RlKHBhcmVudCxuYW1lLG1vZGUsZGV2KTt2YXIgcGF0aD1OT0RFRlMucmVhbFBhdGgobm9kZSk7dHJ5e2lmKEZTLmlzRGlyKG5vZGUubW9kZSkpe2ZzLm1rZGlyU3luYyhwYXRoLG5vZGUubW9kZSk7fWVsc2Uge2ZzLndyaXRlRmlsZVN5bmMocGF0aCwiIix7bW9kZTpub2RlLm1vZGV9KTt9fWNhdGNoKGUpe2lmKCFlLmNvZGUpdGhyb3cgZTt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFU1tlLmNvZGVdKX1yZXR1cm4gbm9kZX0pLHJlbmFtZTooZnVuY3Rpb24ob2xkTm9kZSxuZXdEaXIsbmV3TmFtZSl7dmFyIG9sZFBhdGg9Tk9ERUZTLnJlYWxQYXRoKG9sZE5vZGUpO3ZhciBuZXdQYXRoPVBBVEguam9pbjIoTk9ERUZTLnJlYWxQYXRoKG5ld0RpciksbmV3TmFtZSk7dHJ5e2ZzLnJlbmFtZVN5bmMob2xkUGF0aCxuZXdQYXRoKTt9Y2F0Y2goZSl7aWYoIWUuY29kZSl0aHJvdyBlO3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTW2UuY29kZV0pfX0pLHVubGluazooZnVuY3Rpb24ocGFyZW50LG5hbWUpe3ZhciBwYXRoPVBBVEguam9pbjIoTk9ERUZTLnJlYWxQYXRoKHBhcmVudCksbmFtZSk7dHJ5e2ZzLnVubGlua1N5bmMocGF0aCk7fWNhdGNoKGUpe2lmKCFlLmNvZGUpdGhyb3cgZTt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFU1tlLmNvZGVdKX19KSxybWRpcjooZnVuY3Rpb24ocGFyZW50LG5hbWUpe3ZhciBwYXRoPVBBVEguam9pbjIoTk9ERUZTLnJlYWxQYXRoKHBhcmVudCksbmFtZSk7dHJ5e2ZzLnJtZGlyU3luYyhwYXRoKTt9Y2F0Y2goZSl7aWYoIWUuY29kZSl0aHJvdyBlO3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTW2UuY29kZV0pfX0pLHJlYWRkaXI6KGZ1bmN0aW9uKG5vZGUpe3ZhciBwYXRoPU5PREVGUy5yZWFsUGF0aChub2RlKTt0cnl7cmV0dXJuIGZzLnJlYWRkaXJTeW5jKHBhdGgpfWNhdGNoKGUpe2lmKCFlLmNvZGUpdGhyb3cgZTt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFU1tlLmNvZGVdKX19KSxzeW1saW5rOihmdW5jdGlvbihwYXJlbnQsbmV3TmFtZSxvbGRQYXRoKXt2YXIgbmV3UGF0aD1QQVRILmpvaW4yKE5PREVGUy5yZWFsUGF0aChwYXJlbnQpLG5ld05hbWUpO3RyeXtmcy5zeW1saW5rU3luYyhvbGRQYXRoLG5ld1BhdGgpO31jYXRjaChlKXtpZighZS5jb2RlKXRocm93IGU7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVNbZS5jb2RlXSl9fSkscmVhZGxpbms6KGZ1bmN0aW9uKG5vZGUpe3ZhciBwYXRoPU5PREVGUy5yZWFsUGF0aChub2RlKTt0cnl7cGF0aD1mcy5yZWFkbGlua1N5bmMocGF0aCk7cGF0aD1OT0RFSlNfUEFUSC5yZWxhdGl2ZShOT0RFSlNfUEFUSC5yZXNvbHZlKG5vZGUubW91bnQub3B0cy5yb290KSxwYXRoKTtyZXR1cm4gcGF0aH1jYXRjaChlKXtpZighZS5jb2RlKXRocm93IGU7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVNbZS5jb2RlXSl9fSl9LHN0cmVhbV9vcHM6e29wZW46KGZ1bmN0aW9uKHN0cmVhbSl7dmFyIHBhdGg9Tk9ERUZTLnJlYWxQYXRoKHN0cmVhbS5ub2RlKTt0cnl7aWYoRlMuaXNGaWxlKHN0cmVhbS5ub2RlLm1vZGUpKXtzdHJlYW0ubmZkPWZzLm9wZW5TeW5jKHBhdGgsTk9ERUZTLmZsYWdzRm9yTm9kZShzdHJlYW0uZmxhZ3MpKTt9fWNhdGNoKGUpe2lmKCFlLmNvZGUpdGhyb3cgZTt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFU1tlLmNvZGVdKX19KSxjbG9zZTooZnVuY3Rpb24oc3RyZWFtKXt0cnl7aWYoRlMuaXNGaWxlKHN0cmVhbS5ub2RlLm1vZGUpJiZzdHJlYW0ubmZkKXtmcy5jbG9zZVN5bmMoc3RyZWFtLm5mZCk7fX1jYXRjaChlKXtpZighZS5jb2RlKXRocm93IGU7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVNbZS5jb2RlXSl9fSkscmVhZDooZnVuY3Rpb24oc3RyZWFtLGJ1ZmZlcixvZmZzZXQsbGVuZ3RoLHBvc2l0aW9uKXtpZihsZW5ndGg9PT0wKXJldHVybiAwO3RyeXtyZXR1cm4gZnMucmVhZFN5bmMoc3RyZWFtLm5mZCxOT0RFRlMuYnVmZmVyRnJvbShidWZmZXIuYnVmZmVyKSxvZmZzZXQsbGVuZ3RoLHBvc2l0aW9uKX1jYXRjaChlKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFU1tlLmNvZGVdKX19KSx3cml0ZTooZnVuY3Rpb24oc3RyZWFtLGJ1ZmZlcixvZmZzZXQsbGVuZ3RoLHBvc2l0aW9uKXt0cnl7cmV0dXJuIGZzLndyaXRlU3luYyhzdHJlYW0ubmZkLE5PREVGUy5idWZmZXJGcm9tKGJ1ZmZlci5idWZmZXIpLG9mZnNldCxsZW5ndGgscG9zaXRpb24pfWNhdGNoKGUpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTW2UuY29kZV0pfX0pLGxsc2VlazooZnVuY3Rpb24oc3RyZWFtLG9mZnNldCx3aGVuY2Upe3ZhciBwb3NpdGlvbj1vZmZzZXQ7aWYod2hlbmNlPT09MSl7cG9zaXRpb24rPXN0cmVhbS5wb3NpdGlvbjt9ZWxzZSBpZih3aGVuY2U9PT0yKXtpZihGUy5pc0ZpbGUoc3RyZWFtLm5vZGUubW9kZSkpe3RyeXt2YXIgc3RhdD1mcy5mc3RhdFN5bmMoc3RyZWFtLm5mZCk7cG9zaXRpb24rPXN0YXQuc2l6ZTt9Y2F0Y2goZSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVNbZS5jb2RlXSl9fX1pZihwb3NpdGlvbjwwKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU5WQUwpfXJldHVybiBwb3NpdGlvbn0pfX07dmFyIFdPUktFUkZTPXtESVJfTU9ERToxNjg5NSxGSUxFX01PREU6MzMyNzkscmVhZGVyOm51bGwsbW91bnQ6KGZ1bmN0aW9uKG1vdW50KXthc3NlcnQoRU5WSVJPTk1FTlRfSVNfV09SS0VSKTtpZighV09SS0VSRlMucmVhZGVyKVdPUktFUkZTLnJlYWRlcj1uZXcgRmlsZVJlYWRlclN5bmM7dmFyIHJvb3Q9V09SS0VSRlMuY3JlYXRlTm9kZShudWxsLCIvIixXT1JLRVJGUy5ESVJfTU9ERSwwKTt2YXIgY3JlYXRlZFBhcmVudHM9e307ZnVuY3Rpb24gZW5zdXJlUGFyZW50KHBhdGgpe3ZhciBwYXJ0cz1wYXRoLnNwbGl0KCIvIik7dmFyIHBhcmVudD1yb290O2Zvcih2YXIgaT0wO2k8cGFydHMubGVuZ3RoLTE7aSsrKXt2YXIgY3Vycj1wYXJ0cy5zbGljZSgwLGkrMSkuam9pbigiLyIpO2lmKCFjcmVhdGVkUGFyZW50c1tjdXJyXSl7Y3JlYXRlZFBhcmVudHNbY3Vycl09V09SS0VSRlMuY3JlYXRlTm9kZShwYXJlbnQscGFydHNbaV0sV09SS0VSRlMuRElSX01PREUsMCk7fXBhcmVudD1jcmVhdGVkUGFyZW50c1tjdXJyXTt9cmV0dXJuIHBhcmVudH1mdW5jdGlvbiBiYXNlKHBhdGgpe3ZhciBwYXJ0cz1wYXRoLnNwbGl0KCIvIik7cmV0dXJuIHBhcnRzW3BhcnRzLmxlbmd0aC0xXX1BcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKG1vdW50Lm9wdHNbImZpbGVzIl18fFtdLChmdW5jdGlvbihmaWxlKXtXT1JLRVJGUy5jcmVhdGVOb2RlKGVuc3VyZVBhcmVudChmaWxlLm5hbWUpLGJhc2UoZmlsZS5uYW1lKSxXT1JLRVJGUy5GSUxFX01PREUsMCxmaWxlLGZpbGUubGFzdE1vZGlmaWVkRGF0ZSk7fSkpOyhtb3VudC5vcHRzWyJibG9icyJdfHxbXSkuZm9yRWFjaCgoZnVuY3Rpb24ob2JqKXtXT1JLRVJGUy5jcmVhdGVOb2RlKGVuc3VyZVBhcmVudChvYmpbIm5hbWUiXSksYmFzZShvYmpbIm5hbWUiXSksV09SS0VSRlMuRklMRV9NT0RFLDAsb2JqWyJkYXRhIl0pO30pKTsobW91bnQub3B0c1sicGFja2FnZXMiXXx8W10pLmZvckVhY2goKGZ1bmN0aW9uKHBhY2spe3BhY2tbIm1ldGFkYXRhIl0uZmlsZXMuZm9yRWFjaCgoZnVuY3Rpb24oZmlsZSl7dmFyIG5hbWU9ZmlsZS5maWxlbmFtZS5zdWJzdHIoMSk7V09SS0VSRlMuY3JlYXRlTm9kZShlbnN1cmVQYXJlbnQobmFtZSksYmFzZShuYW1lKSxXT1JLRVJGUy5GSUxFX01PREUsMCxwYWNrWyJibG9iIl0uc2xpY2UoZmlsZS5zdGFydCxmaWxlLmVuZCkpO30pKTt9KSk7cmV0dXJuIHJvb3R9KSxjcmVhdGVOb2RlOihmdW5jdGlvbihwYXJlbnQsbmFtZSxtb2RlLGRldixjb250ZW50cyxtdGltZSl7dmFyIG5vZGU9RlMuY3JlYXRlTm9kZShwYXJlbnQsbmFtZSxtb2RlKTtub2RlLm1vZGU9bW9kZTtub2RlLm5vZGVfb3BzPVdPUktFUkZTLm5vZGVfb3BzO25vZGUuc3RyZWFtX29wcz1XT1JLRVJGUy5zdHJlYW1fb3BzO25vZGUudGltZXN0YW1wPShtdGltZXx8bmV3IERhdGUpLmdldFRpbWUoKTthc3NlcnQoV09SS0VSRlMuRklMRV9NT0RFIT09V09SS0VSRlMuRElSX01PREUpO2lmKG1vZGU9PT1XT1JLRVJGUy5GSUxFX01PREUpe25vZGUuc2l6ZT1jb250ZW50cy5zaXplO25vZGUuY29udGVudHM9Y29udGVudHM7fWVsc2Uge25vZGUuc2l6ZT00MDk2O25vZGUuY29udGVudHM9e307fWlmKHBhcmVudCl7cGFyZW50LmNvbnRlbnRzW25hbWVdPW5vZGU7fXJldHVybiBub2RlfSksbm9kZV9vcHM6e2dldGF0dHI6KGZ1bmN0aW9uKG5vZGUpe3JldHVybiB7ZGV2OjEsaW5vOnVuZGVmaW5lZCxtb2RlOm5vZGUubW9kZSxubGluazoxLHVpZDowLGdpZDowLHJkZXY6dW5kZWZpbmVkLHNpemU6bm9kZS5zaXplLGF0aW1lOm5ldyBEYXRlKG5vZGUudGltZXN0YW1wKSxtdGltZTpuZXcgRGF0ZShub2RlLnRpbWVzdGFtcCksY3RpbWU6bmV3IERhdGUobm9kZS50aW1lc3RhbXApLGJsa3NpemU6NDA5NixibG9ja3M6TWF0aC5jZWlsKG5vZGUuc2l6ZS80MDk2KX19KSxzZXRhdHRyOihmdW5jdGlvbihub2RlLGF0dHIpe2lmKGF0dHIubW9kZSE9PXVuZGVmaW5lZCl7bm9kZS5tb2RlPWF0dHIubW9kZTt9aWYoYXR0ci50aW1lc3RhbXAhPT11bmRlZmluZWQpe25vZGUudGltZXN0YW1wPWF0dHIudGltZXN0YW1wO319KSxsb29rdXA6KGZ1bmN0aW9uKHBhcmVudCxuYW1lKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FTk9FTlQpfSksbWtub2Q6KGZ1bmN0aW9uKHBhcmVudCxuYW1lLG1vZGUsZGV2KXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FUEVSTSl9KSxyZW5hbWU6KGZ1bmN0aW9uKG9sZE5vZGUsbmV3RGlyLG5ld05hbWUpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVQRVJNKX0pLHVubGluazooZnVuY3Rpb24ocGFyZW50LG5hbWUpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVQRVJNKX0pLHJtZGlyOihmdW5jdGlvbihwYXJlbnQsbmFtZSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRVBFUk0pfSkscmVhZGRpcjooZnVuY3Rpb24obm9kZSl7dmFyIGVudHJpZXM9WyIuIiwiLi4iXTtmb3IodmFyIGtleSBpbiBub2RlLmNvbnRlbnRzKXtpZighbm9kZS5jb250ZW50cy5oYXNPd25Qcm9wZXJ0eShrZXkpKXtjb250aW51ZX1lbnRyaWVzLnB1c2goa2V5KTt9cmV0dXJuIGVudHJpZXN9KSxzeW1saW5rOihmdW5jdGlvbihwYXJlbnQsbmV3TmFtZSxvbGRQYXRoKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FUEVSTSl9KSxyZWFkbGluazooZnVuY3Rpb24obm9kZSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRVBFUk0pfSl9LHN0cmVhbV9vcHM6e3JlYWQ6KGZ1bmN0aW9uKHN0cmVhbSxidWZmZXIsb2Zmc2V0LGxlbmd0aCxwb3NpdGlvbil7aWYocG9zaXRpb24+PXN0cmVhbS5ub2RlLnNpemUpcmV0dXJuIDA7dmFyIGNodW5rPXN0cmVhbS5ub2RlLmNvbnRlbnRzLnNsaWNlKHBvc2l0aW9uLHBvc2l0aW9uK2xlbmd0aCk7dmFyIGFiPVdPUktFUkZTLnJlYWRlci5yZWFkQXNBcnJheUJ1ZmZlcihjaHVuayk7YnVmZmVyLnNldChuZXcgVWludDhBcnJheShhYiksb2Zmc2V0KTtyZXR1cm4gY2h1bmsuc2l6ZX0pLHdyaXRlOihmdW5jdGlvbihzdHJlYW0sYnVmZmVyLG9mZnNldCxsZW5ndGgscG9zaXRpb24pe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVJTyl9KSxsbHNlZWs6KGZ1bmN0aW9uKHN0cmVhbSxvZmZzZXQsd2hlbmNlKXt2YXIgcG9zaXRpb249b2Zmc2V0O2lmKHdoZW5jZT09PTEpe3Bvc2l0aW9uKz1zdHJlYW0ucG9zaXRpb247fWVsc2UgaWYod2hlbmNlPT09Mil7aWYoRlMuaXNGaWxlKHN0cmVhbS5ub2RlLm1vZGUpKXtwb3NpdGlvbis9c3RyZWFtLm5vZGUuc2l6ZTt9fWlmKHBvc2l0aW9uPDApe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVJTlZBTCl9cmV0dXJuIHBvc2l0aW9ufSl9fTtTVEFUSUNUT1ArPTE2O1NUQVRJQ1RPUCs9MTY7U1RBVElDVE9QKz0xNjt2YXIgRlM9e3Jvb3Q6bnVsbCxtb3VudHM6W10sZGV2aWNlczp7fSxzdHJlYW1zOltdLG5leHRJbm9kZToxLG5hbWVUYWJsZTpudWxsLGN1cnJlbnRQYXRoOiIvIixpbml0aWFsaXplZDpmYWxzZSxpZ25vcmVQZXJtaXNzaW9uczp0cnVlLHRyYWNraW5nRGVsZWdhdGU6e30sdHJhY2tpbmc6e29wZW5GbGFnczp7UkVBRDoxLFdSSVRFOjJ9fSxFcnJub0Vycm9yOm51bGwsZ2VuZXJpY0Vycm9yczp7fSxmaWxlc3lzdGVtczpudWxsLHN5bmNGU1JlcXVlc3RzOjAsaGFuZGxlRlNFcnJvcjooZnVuY3Rpb24oZSl7aWYoIShlIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcikpdGhyb3cgZSsiIDogIitzdGFja1RyYWNlKCk7cmV0dXJuIF9fX3NldEVyck5vKGUuZXJybm8pfSksbG9va3VwUGF0aDooZnVuY3Rpb24ocGF0aCxvcHRzKXtwYXRoPVBBVEgucmVzb2x2ZShGUy5jd2QoKSxwYXRoKTtvcHRzPW9wdHN8fHt9O2lmKCFwYXRoKXJldHVybiB7cGF0aDoiIixub2RlOm51bGx9O3ZhciBkZWZhdWx0cz17Zm9sbG93X21vdW50OnRydWUscmVjdXJzZV9jb3VudDowfTtmb3IodmFyIGtleSBpbiBkZWZhdWx0cyl7aWYob3B0c1trZXldPT09dW5kZWZpbmVkKXtvcHRzW2tleV09ZGVmYXVsdHNba2V5XTt9fWlmKG9wdHMucmVjdXJzZV9jb3VudD44KXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FTE9PUCl9dmFyIHBhcnRzPVBBVEgubm9ybWFsaXplQXJyYXkocGF0aC5zcGxpdCgiLyIpLmZpbHRlcigoZnVuY3Rpb24ocCl7cmV0dXJuICEhcH0pKSxmYWxzZSk7dmFyIGN1cnJlbnQ9RlMucm9vdDt2YXIgY3VycmVudF9wYXRoPSIvIjtmb3IodmFyIGk9MDtpPHBhcnRzLmxlbmd0aDtpKyspe3ZhciBpc2xhc3Q9aT09PXBhcnRzLmxlbmd0aC0xO2lmKGlzbGFzdCYmb3B0cy5wYXJlbnQpe2JyZWFrfWN1cnJlbnQ9RlMubG9va3VwTm9kZShjdXJyZW50LHBhcnRzW2ldKTtjdXJyZW50X3BhdGg9UEFUSC5qb2luMihjdXJyZW50X3BhdGgscGFydHNbaV0pO2lmKEZTLmlzTW91bnRwb2ludChjdXJyZW50KSl7aWYoIWlzbGFzdHx8aXNsYXN0JiZvcHRzLmZvbGxvd19tb3VudCl7Y3VycmVudD1jdXJyZW50Lm1vdW50ZWQucm9vdDt9fWlmKCFpc2xhc3R8fG9wdHMuZm9sbG93KXt2YXIgY291bnQ9MDt3aGlsZShGUy5pc0xpbmsoY3VycmVudC5tb2RlKSl7dmFyIGxpbms9RlMucmVhZGxpbmsoY3VycmVudF9wYXRoKTtjdXJyZW50X3BhdGg9UEFUSC5yZXNvbHZlKFBBVEguZGlybmFtZShjdXJyZW50X3BhdGgpLGxpbmspO3ZhciBsb29rdXA9RlMubG9va3VwUGF0aChjdXJyZW50X3BhdGgse3JlY3Vyc2VfY291bnQ6b3B0cy5yZWN1cnNlX2NvdW50fSk7Y3VycmVudD1sb29rdXAubm9kZTtpZihjb3VudCsrPjQwKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FTE9PUCl9fX19cmV0dXJuIHtwYXRoOmN1cnJlbnRfcGF0aCxub2RlOmN1cnJlbnR9fSksZ2V0UGF0aDooZnVuY3Rpb24obm9kZSl7dmFyIHBhdGg7d2hpbGUodHJ1ZSl7aWYoRlMuaXNSb290KG5vZGUpKXt2YXIgbW91bnQ9bm9kZS5tb3VudC5tb3VudHBvaW50O2lmKCFwYXRoKXJldHVybiBtb3VudDtyZXR1cm4gbW91bnRbbW91bnQubGVuZ3RoLTFdIT09Ii8iP21vdW50KyIvIitwYXRoOm1vdW50K3BhdGh9cGF0aD1wYXRoP25vZGUubmFtZSsiLyIrcGF0aDpub2RlLm5hbWU7bm9kZT1ub2RlLnBhcmVudDt9fSksaGFzaE5hbWU6KGZ1bmN0aW9uKHBhcmVudGlkLG5hbWUpe3ZhciBoYXNoPTA7Zm9yKHZhciBpPTA7aTxuYW1lLmxlbmd0aDtpKyspe2hhc2g9KGhhc2g8PDUpLWhhc2grbmFtZS5jaGFyQ29kZUF0KGkpfDA7fXJldHVybiAocGFyZW50aWQraGFzaD4+PjApJUZTLm5hbWVUYWJsZS5sZW5ndGh9KSxoYXNoQWRkTm9kZTooZnVuY3Rpb24obm9kZSl7dmFyIGhhc2g9RlMuaGFzaE5hbWUobm9kZS5wYXJlbnQuaWQsbm9kZS5uYW1lKTtub2RlLm5hbWVfbmV4dD1GUy5uYW1lVGFibGVbaGFzaF07RlMubmFtZVRhYmxlW2hhc2hdPW5vZGU7fSksaGFzaFJlbW92ZU5vZGU6KGZ1bmN0aW9uKG5vZGUpe3ZhciBoYXNoPUZTLmhhc2hOYW1lKG5vZGUucGFyZW50LmlkLG5vZGUubmFtZSk7aWYoRlMubmFtZVRhYmxlW2hhc2hdPT09bm9kZSl7RlMubmFtZVRhYmxlW2hhc2hdPW5vZGUubmFtZV9uZXh0O31lbHNlIHt2YXIgY3VycmVudD1GUy5uYW1lVGFibGVbaGFzaF07d2hpbGUoY3VycmVudCl7aWYoY3VycmVudC5uYW1lX25leHQ9PT1ub2RlKXtjdXJyZW50Lm5hbWVfbmV4dD1ub2RlLm5hbWVfbmV4dDticmVha31jdXJyZW50PWN1cnJlbnQubmFtZV9uZXh0O319fSksbG9va3VwTm9kZTooZnVuY3Rpb24ocGFyZW50LG5hbWUpe3ZhciBlcnI9RlMubWF5TG9va3VwKHBhcmVudCk7aWYoZXJyKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihlcnIscGFyZW50KX12YXIgaGFzaD1GUy5oYXNoTmFtZShwYXJlbnQuaWQsbmFtZSk7Zm9yKHZhciBub2RlPUZTLm5hbWVUYWJsZVtoYXNoXTtub2RlO25vZGU9bm9kZS5uYW1lX25leHQpe3ZhciBub2RlTmFtZT1ub2RlLm5hbWU7aWYobm9kZS5wYXJlbnQuaWQ9PT1wYXJlbnQuaWQmJm5vZGVOYW1lPT09bmFtZSl7cmV0dXJuIG5vZGV9fXJldHVybiBGUy5sb29rdXAocGFyZW50LG5hbWUpfSksY3JlYXRlTm9kZTooZnVuY3Rpb24ocGFyZW50LG5hbWUsbW9kZSxyZGV2KXtpZighRlMuRlNOb2RlKXtGUy5GU05vZGU9KGZ1bmN0aW9uKHBhcmVudCxuYW1lLG1vZGUscmRldil7aWYoIXBhcmVudCl7cGFyZW50PXRoaXM7fXRoaXMucGFyZW50PXBhcmVudDt0aGlzLm1vdW50PXBhcmVudC5tb3VudDt0aGlzLm1vdW50ZWQ9bnVsbDt0aGlzLmlkPUZTLm5leHRJbm9kZSsrO3RoaXMubmFtZT1uYW1lO3RoaXMubW9kZT1tb2RlO3RoaXMubm9kZV9vcHM9e307dGhpcy5zdHJlYW1fb3BzPXt9O3RoaXMucmRldj1yZGV2O30pO0ZTLkZTTm9kZS5wcm90b3R5cGU9e307dmFyIHJlYWRNb2RlPTI5Mnw3Mzt2YXIgd3JpdGVNb2RlPTE0NjtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhGUy5GU05vZGUucHJvdG90eXBlLHtyZWFkOntnZXQ6KGZ1bmN0aW9uKCl7cmV0dXJuICh0aGlzLm1vZGUmcmVhZE1vZGUpPT09cmVhZE1vZGV9KSxzZXQ6KGZ1bmN0aW9uKHZhbCl7dmFsP3RoaXMubW9kZXw9cmVhZE1vZGU6dGhpcy5tb2RlJj1+cmVhZE1vZGU7fSl9LHdyaXRlOntnZXQ6KGZ1bmN0aW9uKCl7cmV0dXJuICh0aGlzLm1vZGUmd3JpdGVNb2RlKT09PXdyaXRlTW9kZX0pLHNldDooZnVuY3Rpb24odmFsKXt2YWw/dGhpcy5tb2RlfD13cml0ZU1vZGU6dGhpcy5tb2RlJj1+d3JpdGVNb2RlO30pfSxpc0ZvbGRlcjp7Z2V0OihmdW5jdGlvbigpe3JldHVybiBGUy5pc0Rpcih0aGlzLm1vZGUpfSl9LGlzRGV2aWNlOntnZXQ6KGZ1bmN0aW9uKCl7cmV0dXJuIEZTLmlzQ2hyZGV2KHRoaXMubW9kZSl9KX19KTt9dmFyIG5vZGU9bmV3IEZTLkZTTm9kZShwYXJlbnQsbmFtZSxtb2RlLHJkZXYpO0ZTLmhhc2hBZGROb2RlKG5vZGUpO3JldHVybiBub2RlfSksZGVzdHJveU5vZGU6KGZ1bmN0aW9uKG5vZGUpe0ZTLmhhc2hSZW1vdmVOb2RlKG5vZGUpO30pLGlzUm9vdDooZnVuY3Rpb24obm9kZSl7cmV0dXJuIG5vZGU9PT1ub2RlLnBhcmVudH0pLGlzTW91bnRwb2ludDooZnVuY3Rpb24obm9kZSl7cmV0dXJuICEhbm9kZS5tb3VudGVkfSksaXNGaWxlOihmdW5jdGlvbihtb2RlKXtyZXR1cm4gKG1vZGUmNjE0NDApPT09MzI3Njh9KSxpc0RpcjooZnVuY3Rpb24obW9kZSl7cmV0dXJuIChtb2RlJjYxNDQwKT09PTE2Mzg0fSksaXNMaW5rOihmdW5jdGlvbihtb2RlKXtyZXR1cm4gKG1vZGUmNjE0NDApPT09NDA5NjB9KSxpc0NocmRldjooZnVuY3Rpb24obW9kZSl7cmV0dXJuIChtb2RlJjYxNDQwKT09PTgxOTJ9KSxpc0Jsa2RldjooZnVuY3Rpb24obW9kZSl7cmV0dXJuIChtb2RlJjYxNDQwKT09PTI0NTc2fSksaXNGSUZPOihmdW5jdGlvbihtb2RlKXtyZXR1cm4gKG1vZGUmNjE0NDApPT09NDA5Nn0pLGlzU29ja2V0OihmdW5jdGlvbihtb2RlKXtyZXR1cm4gKG1vZGUmNDkxNTIpPT09NDkxNTJ9KSxmbGFnTW9kZXM6eyJyIjowLCJycyI6MTA1MjY3MiwicisiOjIsInciOjU3Nywid3giOjcwNSwieHciOjcwNSwidysiOjU3OCwid3grIjo3MDYsInh3KyI6NzA2LCJhIjoxMDg5LCJheCI6MTIxNywieGEiOjEyMTcsImErIjoxMDkwLCJheCsiOjEyMTgsInhhKyI6MTIxOH0sbW9kZVN0cmluZ1RvRmxhZ3M6KGZ1bmN0aW9uKHN0cil7dmFyIGZsYWdzPUZTLmZsYWdNb2Rlc1tzdHJdO2lmKHR5cGVvZiBmbGFncz09PSJ1bmRlZmluZWQiKXt0aHJvdyBuZXcgRXJyb3IoIlVua25vd24gZmlsZSBvcGVuIG1vZGU6ICIrc3RyKX1yZXR1cm4gZmxhZ3N9KSxmbGFnc1RvUGVybWlzc2lvblN0cmluZzooZnVuY3Rpb24oZmxhZyl7dmFyIHBlcm1zPVsiciIsInciLCJydyJdW2ZsYWcmM107aWYoZmxhZyY1MTIpe3Blcm1zKz0idyI7fXJldHVybiBwZXJtc30pLG5vZGVQZXJtaXNzaW9uczooZnVuY3Rpb24obm9kZSxwZXJtcyl7aWYoRlMuaWdub3JlUGVybWlzc2lvbnMpe3JldHVybiAwfWlmKHBlcm1zLmluZGV4T2YoInIiKSE9PS0xJiYhKG5vZGUubW9kZSYyOTIpKXtyZXR1cm4gRVJSTk9fQ09ERVMuRUFDQ0VTfWVsc2UgaWYocGVybXMuaW5kZXhPZigidyIpIT09LTEmJiEobm9kZS5tb2RlJjE0Nikpe3JldHVybiBFUlJOT19DT0RFUy5FQUNDRVN9ZWxzZSBpZihwZXJtcy5pbmRleE9mKCJ4IikhPT0tMSYmIShub2RlLm1vZGUmNzMpKXtyZXR1cm4gRVJSTk9fQ09ERVMuRUFDQ0VTfXJldHVybiAwfSksbWF5TG9va3VwOihmdW5jdGlvbihkaXIpe3ZhciBlcnI9RlMubm9kZVBlcm1pc3Npb25zKGRpciwieCIpO2lmKGVycilyZXR1cm4gZXJyO2lmKCFkaXIubm9kZV9vcHMubG9va3VwKXJldHVybiBFUlJOT19DT0RFUy5FQUNDRVM7cmV0dXJuIDB9KSxtYXlDcmVhdGU6KGZ1bmN0aW9uKGRpcixuYW1lKXt0cnl7dmFyIG5vZGU9RlMubG9va3VwTm9kZShkaXIsbmFtZSk7cmV0dXJuIEVSUk5PX0NPREVTLkVFWElTVH1jYXRjaChlKXt9cmV0dXJuIEZTLm5vZGVQZXJtaXNzaW9ucyhkaXIsInd4Iil9KSxtYXlEZWxldGU6KGZ1bmN0aW9uKGRpcixuYW1lLGlzZGlyKXt2YXIgbm9kZTt0cnl7bm9kZT1GUy5sb29rdXBOb2RlKGRpcixuYW1lKTt9Y2F0Y2goZSl7cmV0dXJuIGUuZXJybm99dmFyIGVycj1GUy5ub2RlUGVybWlzc2lvbnMoZGlyLCJ3eCIpO2lmKGVycil7cmV0dXJuIGVycn1pZihpc2Rpcil7aWYoIUZTLmlzRGlyKG5vZGUubW9kZSkpe3JldHVybiBFUlJOT19DT0RFUy5FTk9URElSfWlmKEZTLmlzUm9vdChub2RlKXx8RlMuZ2V0UGF0aChub2RlKT09PUZTLmN3ZCgpKXtyZXR1cm4gRVJSTk9fQ09ERVMuRUJVU1l9fWVsc2Uge2lmKEZTLmlzRGlyKG5vZGUubW9kZSkpe3JldHVybiBFUlJOT19DT0RFUy5FSVNESVJ9fXJldHVybiAwfSksbWF5T3BlbjooZnVuY3Rpb24obm9kZSxmbGFncyl7aWYoIW5vZGUpe3JldHVybiBFUlJOT19DT0RFUy5FTk9FTlR9aWYoRlMuaXNMaW5rKG5vZGUubW9kZSkpe3JldHVybiBFUlJOT19DT0RFUy5FTE9PUH1lbHNlIGlmKEZTLmlzRGlyKG5vZGUubW9kZSkpe2lmKEZTLmZsYWdzVG9QZXJtaXNzaW9uU3RyaW5nKGZsYWdzKSE9PSJyInx8ZmxhZ3MmNTEyKXtyZXR1cm4gRVJSTk9fQ09ERVMuRUlTRElSfX1yZXR1cm4gRlMubm9kZVBlcm1pc3Npb25zKG5vZGUsRlMuZmxhZ3NUb1Blcm1pc3Npb25TdHJpbmcoZmxhZ3MpKX0pLE1BWF9PUEVOX0ZEUzo0MDk2LG5leHRmZDooZnVuY3Rpb24oZmRfc3RhcnQsZmRfZW5kKXtmZF9zdGFydD1mZF9zdGFydHx8MDtmZF9lbmQ9ZmRfZW5kfHxGUy5NQVhfT1BFTl9GRFM7Zm9yKHZhciBmZD1mZF9zdGFydDtmZDw9ZmRfZW5kO2ZkKyspe2lmKCFGUy5zdHJlYW1zW2ZkXSl7cmV0dXJuIGZkfX10aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FTUZJTEUpfSksZ2V0U3RyZWFtOihmdW5jdGlvbihmZCl7cmV0dXJuIEZTLnN0cmVhbXNbZmRdfSksY3JlYXRlU3RyZWFtOihmdW5jdGlvbihzdHJlYW0sZmRfc3RhcnQsZmRfZW5kKXtpZighRlMuRlNTdHJlYW0pe0ZTLkZTU3RyZWFtPShmdW5jdGlvbigpe30pO0ZTLkZTU3RyZWFtLnByb3RvdHlwZT17fTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhGUy5GU1N0cmVhbS5wcm90b3R5cGUse29iamVjdDp7Z2V0OihmdW5jdGlvbigpe3JldHVybiB0aGlzLm5vZGV9KSxzZXQ6KGZ1bmN0aW9uKHZhbCl7dGhpcy5ub2RlPXZhbDt9KX0saXNSZWFkOntnZXQ6KGZ1bmN0aW9uKCl7cmV0dXJuICh0aGlzLmZsYWdzJjIwOTcxNTUpIT09MX0pfSxpc1dyaXRlOntnZXQ6KGZ1bmN0aW9uKCl7cmV0dXJuICh0aGlzLmZsYWdzJjIwOTcxNTUpIT09MH0pfSxpc0FwcGVuZDp7Z2V0OihmdW5jdGlvbigpe3JldHVybiB0aGlzLmZsYWdzJjEwMjR9KX19KTt9dmFyIG5ld1N0cmVhbT1uZXcgRlMuRlNTdHJlYW07Zm9yKHZhciBwIGluIHN0cmVhbSl7bmV3U3RyZWFtW3BdPXN0cmVhbVtwXTt9c3RyZWFtPW5ld1N0cmVhbTt2YXIgZmQ9RlMubmV4dGZkKGZkX3N0YXJ0LGZkX2VuZCk7c3RyZWFtLmZkPWZkO0ZTLnN0cmVhbXNbZmRdPXN0cmVhbTtyZXR1cm4gc3RyZWFtfSksY2xvc2VTdHJlYW06KGZ1bmN0aW9uKGZkKXtGUy5zdHJlYW1zW2ZkXT1udWxsO30pLGNocmRldl9zdHJlYW1fb3BzOntvcGVuOihmdW5jdGlvbihzdHJlYW0pe3ZhciBkZXZpY2U9RlMuZ2V0RGV2aWNlKHN0cmVhbS5ub2RlLnJkZXYpO3N0cmVhbS5zdHJlYW1fb3BzPWRldmljZS5zdHJlYW1fb3BzO2lmKHN0cmVhbS5zdHJlYW1fb3BzLm9wZW4pe3N0cmVhbS5zdHJlYW1fb3BzLm9wZW4oc3RyZWFtKTt9fSksbGxzZWVrOihmdW5jdGlvbigpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVTUElQRSl9KX0sbWFqb3I6KGZ1bmN0aW9uKGRldil7cmV0dXJuIGRldj4+OH0pLG1pbm9yOihmdW5jdGlvbihkZXYpe3JldHVybiBkZXYmMjU1fSksbWFrZWRldjooZnVuY3Rpb24obWEsbWkpe3JldHVybiBtYTw8OHxtaX0pLHJlZ2lzdGVyRGV2aWNlOihmdW5jdGlvbihkZXYsb3BzKXtGUy5kZXZpY2VzW2Rldl09e3N0cmVhbV9vcHM6b3BzfTt9KSxnZXREZXZpY2U6KGZ1bmN0aW9uKGRldil7cmV0dXJuIEZTLmRldmljZXNbZGV2XX0pLGdldE1vdW50czooZnVuY3Rpb24obW91bnQpe3ZhciBtb3VudHM9W107dmFyIGNoZWNrPVttb3VudF07d2hpbGUoY2hlY2subGVuZ3RoKXt2YXIgbT1jaGVjay5wb3AoKTttb3VudHMucHVzaChtKTtjaGVjay5wdXNoLmFwcGx5KGNoZWNrLG0ubW91bnRzKTt9cmV0dXJuIG1vdW50c30pLHN5bmNmczooZnVuY3Rpb24ocG9wdWxhdGUsY2FsbGJhY2spe2lmKHR5cGVvZiBwb3B1bGF0ZT09PSJmdW5jdGlvbiIpe2NhbGxiYWNrPXBvcHVsYXRlO3BvcHVsYXRlPWZhbHNlO31GUy5zeW5jRlNSZXF1ZXN0cysrO2lmKEZTLnN5bmNGU1JlcXVlc3RzPjEpe2NvbnNvbGUubG9nKCJ3YXJuaW5nOiAiK0ZTLnN5bmNGU1JlcXVlc3RzKyIgRlMuc3luY2ZzIG9wZXJhdGlvbnMgaW4gZmxpZ2h0IGF0IG9uY2UsIHByb2JhYmx5IGp1c3QgZG9pbmcgZXh0cmEgd29yayIpO312YXIgbW91bnRzPUZTLmdldE1vdW50cyhGUy5yb290Lm1vdW50KTt2YXIgY29tcGxldGVkPTA7ZnVuY3Rpb24gZG9DYWxsYmFjayhlcnIpe2Fzc2VydChGUy5zeW5jRlNSZXF1ZXN0cz4wKTtGUy5zeW5jRlNSZXF1ZXN0cy0tO3JldHVybiBjYWxsYmFjayhlcnIpfWZ1bmN0aW9uIGRvbmUoZXJyKXtpZihlcnIpe2lmKCFkb25lLmVycm9yZWQpe2RvbmUuZXJyb3JlZD10cnVlO3JldHVybiBkb0NhbGxiYWNrKGVycil9cmV0dXJufWlmKCsrY29tcGxldGVkPj1tb3VudHMubGVuZ3RoKXtkb0NhbGxiYWNrKG51bGwpO319bW91bnRzLmZvckVhY2goKGZ1bmN0aW9uKG1vdW50KXtpZighbW91bnQudHlwZS5zeW5jZnMpe3JldHVybiBkb25lKG51bGwpfW1vdW50LnR5cGUuc3luY2ZzKG1vdW50LHBvcHVsYXRlLGRvbmUpO30pKTt9KSxtb3VudDooZnVuY3Rpb24odHlwZSxvcHRzLG1vdW50cG9pbnQpe3ZhciByb290PW1vdW50cG9pbnQ9PT0iLyI7dmFyIHBzZXVkbz0hbW91bnRwb2ludDt2YXIgbm9kZTtpZihyb290JiZGUy5yb290KXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FQlVTWSl9ZWxzZSBpZighcm9vdCYmIXBzZXVkbyl7dmFyIGxvb2t1cD1GUy5sb29rdXBQYXRoKG1vdW50cG9pbnQse2ZvbGxvd19tb3VudDpmYWxzZX0pO21vdW50cG9pbnQ9bG9va3VwLnBhdGg7bm9kZT1sb29rdXAubm9kZTtpZihGUy5pc01vdW50cG9pbnQobm9kZSkpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVCVVNZKX1pZighRlMuaXNEaXIobm9kZS5tb2RlKSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRU5PVERJUil9fXZhciBtb3VudD17dHlwZTp0eXBlLG9wdHM6b3B0cyxtb3VudHBvaW50Om1vdW50cG9pbnQsbW91bnRzOltdfTt2YXIgbW91bnRSb290PXR5cGUubW91bnQobW91bnQpO21vdW50Um9vdC5tb3VudD1tb3VudDttb3VudC5yb290PW1vdW50Um9vdDtpZihyb290KXtGUy5yb290PW1vdW50Um9vdDt9ZWxzZSBpZihub2RlKXtub2RlLm1vdW50ZWQ9bW91bnQ7aWYobm9kZS5tb3VudCl7bm9kZS5tb3VudC5tb3VudHMucHVzaChtb3VudCk7fX1yZXR1cm4gbW91bnRSb290fSksdW5tb3VudDooZnVuY3Rpb24obW91bnRwb2ludCl7dmFyIGxvb2t1cD1GUy5sb29rdXBQYXRoKG1vdW50cG9pbnQse2ZvbGxvd19tb3VudDpmYWxzZX0pO2lmKCFGUy5pc01vdW50cG9pbnQobG9va3VwLm5vZGUpKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU5WQUwpfXZhciBub2RlPWxvb2t1cC5ub2RlO3ZhciBtb3VudD1ub2RlLm1vdW50ZWQ7dmFyIG1vdW50cz1GUy5nZXRNb3VudHMobW91bnQpO09iamVjdC5rZXlzKEZTLm5hbWVUYWJsZSkuZm9yRWFjaCgoZnVuY3Rpb24oaGFzaCl7dmFyIGN1cnJlbnQ9RlMubmFtZVRhYmxlW2hhc2hdO3doaWxlKGN1cnJlbnQpe3ZhciBuZXh0PWN1cnJlbnQubmFtZV9uZXh0O2lmKG1vdW50cy5pbmRleE9mKGN1cnJlbnQubW91bnQpIT09LTEpe0ZTLmRlc3Ryb3lOb2RlKGN1cnJlbnQpO31jdXJyZW50PW5leHQ7fX0pKTtub2RlLm1vdW50ZWQ9bnVsbDt2YXIgaWR4PW5vZGUubW91bnQubW91bnRzLmluZGV4T2YobW91bnQpO2Fzc2VydChpZHghPT0tMSk7bm9kZS5tb3VudC5tb3VudHMuc3BsaWNlKGlkeCwxKTt9KSxsb29rdXA6KGZ1bmN0aW9uKHBhcmVudCxuYW1lKXtyZXR1cm4gcGFyZW50Lm5vZGVfb3BzLmxvb2t1cChwYXJlbnQsbmFtZSl9KSxta25vZDooZnVuY3Rpb24ocGF0aCxtb2RlLGRldil7dmFyIGxvb2t1cD1GUy5sb29rdXBQYXRoKHBhdGgse3BhcmVudDp0cnVlfSk7dmFyIHBhcmVudD1sb29rdXAubm9kZTt2YXIgbmFtZT1QQVRILmJhc2VuYW1lKHBhdGgpO2lmKCFuYW1lfHxuYW1lPT09Ii4ifHxuYW1lPT09Ii4uIil7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlOVkFMKX12YXIgZXJyPUZTLm1heUNyZWF0ZShwYXJlbnQsbmFtZSk7aWYoZXJyKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihlcnIpfWlmKCFwYXJlbnQubm9kZV9vcHMubWtub2Qpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVQRVJNKX1yZXR1cm4gcGFyZW50Lm5vZGVfb3BzLm1rbm9kKHBhcmVudCxuYW1lLG1vZGUsZGV2KX0pLGNyZWF0ZTooZnVuY3Rpb24ocGF0aCxtb2RlKXttb2RlPW1vZGUhPT11bmRlZmluZWQ/bW9kZTo0Mzg7bW9kZSY9NDA5NTttb2RlfD0zMjc2ODtyZXR1cm4gRlMubWtub2QocGF0aCxtb2RlLDApfSksbWtkaXI6KGZ1bmN0aW9uKHBhdGgsbW9kZSl7bW9kZT1tb2RlIT09dW5kZWZpbmVkP21vZGU6NTExO21vZGUmPTUxMXw1MTI7bW9kZXw9MTYzODQ7cmV0dXJuIEZTLm1rbm9kKHBhdGgsbW9kZSwwKX0pLG1rZGlyVHJlZTooZnVuY3Rpb24ocGF0aCxtb2RlKXt2YXIgZGlycz1wYXRoLnNwbGl0KCIvIik7dmFyIGQ9IiI7Zm9yKHZhciBpPTA7aTxkaXJzLmxlbmd0aDsrK2kpe2lmKCFkaXJzW2ldKWNvbnRpbnVlO2QrPSIvIitkaXJzW2ldO3RyeXtGUy5ta2RpcihkLG1vZGUpO31jYXRjaChlKXtpZihlLmVycm5vIT1FUlJOT19DT0RFUy5FRVhJU1QpdGhyb3cgZX19fSksbWtkZXY6KGZ1bmN0aW9uKHBhdGgsbW9kZSxkZXYpe2lmKHR5cGVvZiBkZXY9PT0idW5kZWZpbmVkIil7ZGV2PW1vZGU7bW9kZT00Mzg7fW1vZGV8PTgxOTI7cmV0dXJuIEZTLm1rbm9kKHBhdGgsbW9kZSxkZXYpfSksc3ltbGluazooZnVuY3Rpb24ob2xkcGF0aCxuZXdwYXRoKXtpZighUEFUSC5yZXNvbHZlKG9sZHBhdGgpKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FTk9FTlQpfXZhciBsb29rdXA9RlMubG9va3VwUGF0aChuZXdwYXRoLHtwYXJlbnQ6dHJ1ZX0pO3ZhciBwYXJlbnQ9bG9va3VwLm5vZGU7aWYoIXBhcmVudCl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRU5PRU5UKX12YXIgbmV3bmFtZT1QQVRILmJhc2VuYW1lKG5ld3BhdGgpO3ZhciBlcnI9RlMubWF5Q3JlYXRlKHBhcmVudCxuZXduYW1lKTtpZihlcnIpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKGVycil9aWYoIXBhcmVudC5ub2RlX29wcy5zeW1saW5rKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FUEVSTSl9cmV0dXJuIHBhcmVudC5ub2RlX29wcy5zeW1saW5rKHBhcmVudCxuZXduYW1lLG9sZHBhdGgpfSkscmVuYW1lOihmdW5jdGlvbihvbGRfcGF0aCxuZXdfcGF0aCl7dmFyIG9sZF9kaXJuYW1lPVBBVEguZGlybmFtZShvbGRfcGF0aCk7dmFyIG5ld19kaXJuYW1lPVBBVEguZGlybmFtZShuZXdfcGF0aCk7dmFyIG9sZF9uYW1lPVBBVEguYmFzZW5hbWUob2xkX3BhdGgpO3ZhciBuZXdfbmFtZT1QQVRILmJhc2VuYW1lKG5ld19wYXRoKTt2YXIgbG9va3VwLG9sZF9kaXIsbmV3X2Rpcjt0cnl7bG9va3VwPUZTLmxvb2t1cFBhdGgob2xkX3BhdGgse3BhcmVudDp0cnVlfSk7b2xkX2Rpcj1sb29rdXAubm9kZTtsb29rdXA9RlMubG9va3VwUGF0aChuZXdfcGF0aCx7cGFyZW50OnRydWV9KTtuZXdfZGlyPWxvb2t1cC5ub2RlO31jYXRjaChlKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FQlVTWSl9aWYoIW9sZF9kaXJ8fCFuZXdfZGlyKXRocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVOT0VOVCk7aWYob2xkX2Rpci5tb3VudCE9PW5ld19kaXIubW91bnQpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVYREVWKX12YXIgb2xkX25vZGU9RlMubG9va3VwTm9kZShvbGRfZGlyLG9sZF9uYW1lKTt2YXIgcmVsYXRpdmU9UEFUSC5yZWxhdGl2ZShvbGRfcGF0aCxuZXdfZGlybmFtZSk7aWYocmVsYXRpdmUuY2hhckF0KDApIT09Ii4iKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU5WQUwpfXJlbGF0aXZlPVBBVEgucmVsYXRpdmUobmV3X3BhdGgsb2xkX2Rpcm5hbWUpO2lmKHJlbGF0aXZlLmNoYXJBdCgwKSE9PSIuIil7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRU5PVEVNUFRZKX12YXIgbmV3X25vZGU7dHJ5e25ld19ub2RlPUZTLmxvb2t1cE5vZGUobmV3X2RpcixuZXdfbmFtZSk7fWNhdGNoKGUpe31pZihvbGRfbm9kZT09PW5ld19ub2RlKXtyZXR1cm59dmFyIGlzZGlyPUZTLmlzRGlyKG9sZF9ub2RlLm1vZGUpO3ZhciBlcnI9RlMubWF5RGVsZXRlKG9sZF9kaXIsb2xkX25hbWUsaXNkaXIpO2lmKGVycil7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoZXJyKX1lcnI9bmV3X25vZGU/RlMubWF5RGVsZXRlKG5ld19kaXIsbmV3X25hbWUsaXNkaXIpOkZTLm1heUNyZWF0ZShuZXdfZGlyLG5ld19uYW1lKTtpZihlcnIpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKGVycil9aWYoIW9sZF9kaXIubm9kZV9vcHMucmVuYW1lKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FUEVSTSl9aWYoRlMuaXNNb3VudHBvaW50KG9sZF9ub2RlKXx8bmV3X25vZGUmJkZTLmlzTW91bnRwb2ludChuZXdfbm9kZSkpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVCVVNZKX1pZihuZXdfZGlyIT09b2xkX2Rpcil7ZXJyPUZTLm5vZGVQZXJtaXNzaW9ucyhvbGRfZGlyLCJ3Iik7aWYoZXJyKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihlcnIpfX10cnl7aWYoRlMudHJhY2tpbmdEZWxlZ2F0ZVsid2lsbE1vdmVQYXRoIl0pO31jYXRjaChlKXtjb25zb2xlLmxvZygiRlMudHJhY2tpbmdEZWxlZ2F0ZVsnd2lsbE1vdmVQYXRoJ10oJyIrb2xkX3BhdGgrIicsICciK25ld19wYXRoKyInKSB0aHJldyBhbiBleGNlcHRpb246ICIrZS5tZXNzYWdlKTt9RlMuaGFzaFJlbW92ZU5vZGUob2xkX25vZGUpO3RyeXtvbGRfZGlyLm5vZGVfb3BzLnJlbmFtZShvbGRfbm9kZSxuZXdfZGlyLG5ld19uYW1lKTt9Y2F0Y2goZSl7dGhyb3cgZX1maW5hbGx5e0ZTLmhhc2hBZGROb2RlKG9sZF9ub2RlKTt9dHJ5e2lmKEZTLnRyYWNraW5nRGVsZWdhdGVbIm9uTW92ZVBhdGgiXSk7fWNhdGNoKGUpe2NvbnNvbGUubG9nKCJGUy50cmFja2luZ0RlbGVnYXRlWydvbk1vdmVQYXRoJ10oJyIrb2xkX3BhdGgrIicsICciK25ld19wYXRoKyInKSB0aHJldyBhbiBleGNlcHRpb246ICIrZS5tZXNzYWdlKTt9fSkscm1kaXI6KGZ1bmN0aW9uKHBhdGgpe3ZhciBsb29rdXA9RlMubG9va3VwUGF0aChwYXRoLHtwYXJlbnQ6dHJ1ZX0pO3ZhciBwYXJlbnQ9bG9va3VwLm5vZGU7dmFyIG5hbWU9UEFUSC5iYXNlbmFtZShwYXRoKTt2YXIgbm9kZT1GUy5sb29rdXBOb2RlKHBhcmVudCxuYW1lKTt2YXIgZXJyPUZTLm1heURlbGV0ZShwYXJlbnQsbmFtZSx0cnVlKTtpZihlcnIpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKGVycil9aWYoIXBhcmVudC5ub2RlX29wcy5ybWRpcil7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRVBFUk0pfWlmKEZTLmlzTW91bnRwb2ludChub2RlKSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUJVU1kpfXRyeXtpZihGUy50cmFja2luZ0RlbGVnYXRlWyJ3aWxsRGVsZXRlUGF0aCJdKTt9Y2F0Y2goZSl7Y29uc29sZS5sb2coIkZTLnRyYWNraW5nRGVsZWdhdGVbJ3dpbGxEZWxldGVQYXRoJ10oJyIrcGF0aCsiJykgdGhyZXcgYW4gZXhjZXB0aW9uOiAiK2UubWVzc2FnZSk7fXBhcmVudC5ub2RlX29wcy5ybWRpcihwYXJlbnQsbmFtZSk7RlMuZGVzdHJveU5vZGUobm9kZSk7dHJ5e2lmKEZTLnRyYWNraW5nRGVsZWdhdGVbIm9uRGVsZXRlUGF0aCJdKTt9Y2F0Y2goZSl7Y29uc29sZS5sb2coIkZTLnRyYWNraW5nRGVsZWdhdGVbJ29uRGVsZXRlUGF0aCddKCciK3BhdGgrIicpIHRocmV3IGFuIGV4Y2VwdGlvbjogIitlLm1lc3NhZ2UpO319KSxyZWFkZGlyOihmdW5jdGlvbihwYXRoKXt2YXIgbG9va3VwPUZTLmxvb2t1cFBhdGgocGF0aCx7Zm9sbG93OnRydWV9KTt2YXIgbm9kZT1sb29rdXAubm9kZTtpZighbm9kZS5ub2RlX29wcy5yZWFkZGlyKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FTk9URElSKX1yZXR1cm4gbm9kZS5ub2RlX29wcy5yZWFkZGlyKG5vZGUpfSksdW5saW5rOihmdW5jdGlvbihwYXRoKXt2YXIgbG9va3VwPUZTLmxvb2t1cFBhdGgocGF0aCx7cGFyZW50OnRydWV9KTt2YXIgcGFyZW50PWxvb2t1cC5ub2RlO3ZhciBuYW1lPVBBVEguYmFzZW5hbWUocGF0aCk7dmFyIG5vZGU9RlMubG9va3VwTm9kZShwYXJlbnQsbmFtZSk7dmFyIGVycj1GUy5tYXlEZWxldGUocGFyZW50LG5hbWUsZmFsc2UpO2lmKGVycil7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoZXJyKX1pZighcGFyZW50Lm5vZGVfb3BzLnVubGluayl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRVBFUk0pfWlmKEZTLmlzTW91bnRwb2ludChub2RlKSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUJVU1kpfXRyeXtpZihGUy50cmFja2luZ0RlbGVnYXRlWyJ3aWxsRGVsZXRlUGF0aCJdKTt9Y2F0Y2goZSl7Y29uc29sZS5sb2coIkZTLnRyYWNraW5nRGVsZWdhdGVbJ3dpbGxEZWxldGVQYXRoJ10oJyIrcGF0aCsiJykgdGhyZXcgYW4gZXhjZXB0aW9uOiAiK2UubWVzc2FnZSk7fXBhcmVudC5ub2RlX29wcy51bmxpbmsocGFyZW50LG5hbWUpO0ZTLmRlc3Ryb3lOb2RlKG5vZGUpO3RyeXtpZihGUy50cmFja2luZ0RlbGVnYXRlWyJvbkRlbGV0ZVBhdGgiXSk7fWNhdGNoKGUpe2NvbnNvbGUubG9nKCJGUy50cmFja2luZ0RlbGVnYXRlWydvbkRlbGV0ZVBhdGgnXSgnIitwYXRoKyInKSB0aHJldyBhbiBleGNlcHRpb246ICIrZS5tZXNzYWdlKTt9fSkscmVhZGxpbms6KGZ1bmN0aW9uKHBhdGgpe3ZhciBsb29rdXA9RlMubG9va3VwUGF0aChwYXRoKTt2YXIgbGluaz1sb29rdXAubm9kZTtpZighbGluayl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRU5PRU5UKX1pZighbGluay5ub2RlX29wcy5yZWFkbGluayl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlOVkFMKX1yZXR1cm4gUEFUSC5yZXNvbHZlKEZTLmdldFBhdGgobGluay5wYXJlbnQpLGxpbmsubm9kZV9vcHMucmVhZGxpbmsobGluaykpfSksc3RhdDooZnVuY3Rpb24ocGF0aCxkb250Rm9sbG93KXt2YXIgbG9va3VwPUZTLmxvb2t1cFBhdGgocGF0aCx7Zm9sbG93OiFkb250Rm9sbG93fSk7dmFyIG5vZGU9bG9va3VwLm5vZGU7aWYoIW5vZGUpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVOT0VOVCl9aWYoIW5vZGUubm9kZV9vcHMuZ2V0YXR0cil7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRVBFUk0pfXJldHVybiBub2RlLm5vZGVfb3BzLmdldGF0dHIobm9kZSl9KSxsc3RhdDooZnVuY3Rpb24ocGF0aCl7cmV0dXJuIEZTLnN0YXQocGF0aCx0cnVlKX0pLGNobW9kOihmdW5jdGlvbihwYXRoLG1vZGUsZG9udEZvbGxvdyl7dmFyIG5vZGU7aWYodHlwZW9mIHBhdGg9PT0ic3RyaW5nIil7dmFyIGxvb2t1cD1GUy5sb29rdXBQYXRoKHBhdGgse2ZvbGxvdzohZG9udEZvbGxvd30pO25vZGU9bG9va3VwLm5vZGU7fWVsc2Uge25vZGU9cGF0aDt9aWYoIW5vZGUubm9kZV9vcHMuc2V0YXR0cil7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRVBFUk0pfW5vZGUubm9kZV9vcHMuc2V0YXR0cihub2RlLHttb2RlOm1vZGUmNDA5NXxub2RlLm1vZGUmfjQwOTUsdGltZXN0YW1wOkRhdGUubm93KCl9KTt9KSxsY2htb2Q6KGZ1bmN0aW9uKHBhdGgsbW9kZSl7RlMuY2htb2QocGF0aCxtb2RlLHRydWUpO30pLGZjaG1vZDooZnVuY3Rpb24oZmQsbW9kZSl7dmFyIHN0cmVhbT1GUy5nZXRTdHJlYW0oZmQpO2lmKCFzdHJlYW0pe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVCQURGKX1GUy5jaG1vZChzdHJlYW0ubm9kZSxtb2RlKTt9KSxjaG93bjooZnVuY3Rpb24ocGF0aCx1aWQsZ2lkLGRvbnRGb2xsb3cpe3ZhciBub2RlO2lmKHR5cGVvZiBwYXRoPT09InN0cmluZyIpe3ZhciBsb29rdXA9RlMubG9va3VwUGF0aChwYXRoLHtmb2xsb3c6IWRvbnRGb2xsb3d9KTtub2RlPWxvb2t1cC5ub2RlO31lbHNlIHtub2RlPXBhdGg7fWlmKCFub2RlLm5vZGVfb3BzLnNldGF0dHIpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVQRVJNKX1ub2RlLm5vZGVfb3BzLnNldGF0dHIobm9kZSx7dGltZXN0YW1wOkRhdGUubm93KCl9KTt9KSxsY2hvd246KGZ1bmN0aW9uKHBhdGgsdWlkLGdpZCl7RlMuY2hvd24ocGF0aCx1aWQsZ2lkLHRydWUpO30pLGZjaG93bjooZnVuY3Rpb24oZmQsdWlkLGdpZCl7dmFyIHN0cmVhbT1GUy5nZXRTdHJlYW0oZmQpO2lmKCFzdHJlYW0pe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVCQURGKX1GUy5jaG93bihzdHJlYW0ubm9kZSx1aWQsZ2lkKTt9KSx0cnVuY2F0ZTooZnVuY3Rpb24ocGF0aCxsZW4pe2lmKGxlbjwwKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU5WQUwpfXZhciBub2RlO2lmKHR5cGVvZiBwYXRoPT09InN0cmluZyIpe3ZhciBsb29rdXA9RlMubG9va3VwUGF0aChwYXRoLHtmb2xsb3c6dHJ1ZX0pO25vZGU9bG9va3VwLm5vZGU7fWVsc2Uge25vZGU9cGF0aDt9aWYoIW5vZGUubm9kZV9vcHMuc2V0YXR0cil7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRVBFUk0pfWlmKEZTLmlzRGlyKG5vZGUubW9kZSkpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVJU0RJUil9aWYoIUZTLmlzRmlsZShub2RlLm1vZGUpKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU5WQUwpfXZhciBlcnI9RlMubm9kZVBlcm1pc3Npb25zKG5vZGUsInciKTtpZihlcnIpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKGVycil9bm9kZS5ub2RlX29wcy5zZXRhdHRyKG5vZGUse3NpemU6bGVuLHRpbWVzdGFtcDpEYXRlLm5vdygpfSk7fSksZnRydW5jYXRlOihmdW5jdGlvbihmZCxsZW4pe3ZhciBzdHJlYW09RlMuZ2V0U3RyZWFtKGZkKTtpZighc3RyZWFtKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FQkFERil9aWYoKHN0cmVhbS5mbGFncyYyMDk3MTU1KT09PTApe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVJTlZBTCl9RlMudHJ1bmNhdGUoc3RyZWFtLm5vZGUsbGVuKTt9KSx1dGltZTooZnVuY3Rpb24ocGF0aCxhdGltZSxtdGltZSl7dmFyIGxvb2t1cD1GUy5sb29rdXBQYXRoKHBhdGgse2ZvbGxvdzp0cnVlfSk7dmFyIG5vZGU9bG9va3VwLm5vZGU7bm9kZS5ub2RlX29wcy5zZXRhdHRyKG5vZGUse3RpbWVzdGFtcDpNYXRoLm1heChhdGltZSxtdGltZSl9KTt9KSxvcGVuOihmdW5jdGlvbihwYXRoLGZsYWdzLG1vZGUsZmRfc3RhcnQsZmRfZW5kKXtpZihwYXRoPT09IiIpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVOT0VOVCl9ZmxhZ3M9dHlwZW9mIGZsYWdzPT09InN0cmluZyI/RlMubW9kZVN0cmluZ1RvRmxhZ3MoZmxhZ3MpOmZsYWdzO21vZGU9dHlwZW9mIG1vZGU9PT0idW5kZWZpbmVkIj80Mzg6bW9kZTtpZihmbGFncyY2NCl7bW9kZT1tb2RlJjQwOTV8MzI3Njg7fWVsc2Uge21vZGU9MDt9dmFyIG5vZGU7aWYodHlwZW9mIHBhdGg9PT0ib2JqZWN0Iil7bm9kZT1wYXRoO31lbHNlIHtwYXRoPVBBVEgubm9ybWFsaXplKHBhdGgpO3RyeXt2YXIgbG9va3VwPUZTLmxvb2t1cFBhdGgocGF0aCx7Zm9sbG93OiEoZmxhZ3MmMTMxMDcyKX0pO25vZGU9bG9va3VwLm5vZGU7fWNhdGNoKGUpe319dmFyIGNyZWF0ZWQ9ZmFsc2U7aWYoZmxhZ3MmNjQpe2lmKG5vZGUpe2lmKGZsYWdzJjEyOCl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUVYSVNUKX19ZWxzZSB7bm9kZT1GUy5ta25vZChwYXRoLG1vZGUsMCk7Y3JlYXRlZD10cnVlO319aWYoIW5vZGUpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVOT0VOVCl9aWYoRlMuaXNDaHJkZXYobm9kZS5tb2RlKSl7ZmxhZ3MmPX41MTI7fWlmKGZsYWdzJjY1NTM2JiYhRlMuaXNEaXIobm9kZS5tb2RlKSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRU5PVERJUil9aWYoIWNyZWF0ZWQpe3ZhciBlcnI9RlMubWF5T3Blbihub2RlLGZsYWdzKTtpZihlcnIpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKGVycil9fWlmKGZsYWdzJjUxMil7RlMudHJ1bmNhdGUobm9kZSwwKTt9ZmxhZ3MmPX4oMTI4fDUxMik7dmFyIHN0cmVhbT1GUy5jcmVhdGVTdHJlYW0oe25vZGU6bm9kZSxwYXRoOkZTLmdldFBhdGgobm9kZSksZmxhZ3M6ZmxhZ3Msc2Vla2FibGU6dHJ1ZSxwb3NpdGlvbjowLHN0cmVhbV9vcHM6bm9kZS5zdHJlYW1fb3BzLHVuZ290dGVuOltdLGVycm9yOmZhbHNlfSxmZF9zdGFydCxmZF9lbmQpO2lmKHN0cmVhbS5zdHJlYW1fb3BzLm9wZW4pe3N0cmVhbS5zdHJlYW1fb3BzLm9wZW4oc3RyZWFtKTt9aWYoTW9kdWxlWyJsb2dSZWFkRmlsZXMiXSYmIShmbGFncyYxKSl7aWYoIUZTLnJlYWRGaWxlcylGUy5yZWFkRmlsZXM9e307aWYoIShwYXRoIGluIEZTLnJlYWRGaWxlcykpe0ZTLnJlYWRGaWxlc1twYXRoXT0xO01vZHVsZVsicHJpbnRFcnIiXSgicmVhZCBmaWxlOiAiK3BhdGgpO319dHJ5e3ZhciB0cmFja2luZ0ZsYWdzOyBpZihGUy50cmFja2luZ0RlbGVnYXRlWyJvbk9wZW5GaWxlIl0pO31jYXRjaChlKXtjb25zb2xlLmxvZygiRlMudHJhY2tpbmdEZWxlZ2F0ZVsnb25PcGVuRmlsZSddKCciK3BhdGgrIicsIGZsYWdzKSB0aHJldyBhbiBleGNlcHRpb246ICIrZS5tZXNzYWdlKTt9cmV0dXJuIHN0cmVhbX0pLGNsb3NlOihmdW5jdGlvbihzdHJlYW0pe2lmKEZTLmlzQ2xvc2VkKHN0cmVhbSkpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVCQURGKX1pZihzdHJlYW0uZ2V0ZGVudHMpc3RyZWFtLmdldGRlbnRzPW51bGw7dHJ5e2lmKHN0cmVhbS5zdHJlYW1fb3BzLmNsb3NlKXtzdHJlYW0uc3RyZWFtX29wcy5jbG9zZShzdHJlYW0pO319Y2F0Y2goZSl7dGhyb3cgZX1maW5hbGx5e0ZTLmNsb3NlU3RyZWFtKHN0cmVhbS5mZCk7fXN0cmVhbS5mZD1udWxsO30pLGlzQ2xvc2VkOihmdW5jdGlvbihzdHJlYW0pe3JldHVybiBzdHJlYW0uZmQ9PT1udWxsfSksbGxzZWVrOihmdW5jdGlvbihzdHJlYW0sb2Zmc2V0LHdoZW5jZSl7aWYoRlMuaXNDbG9zZWQoc3RyZWFtKSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUJBREYpfWlmKCFzdHJlYW0uc2Vla2FibGV8fCFzdHJlYW0uc3RyZWFtX29wcy5sbHNlZWspe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVTUElQRSl9c3RyZWFtLnBvc2l0aW9uPXN0cmVhbS5zdHJlYW1fb3BzLmxsc2VlayhzdHJlYW0sb2Zmc2V0LHdoZW5jZSk7c3RyZWFtLnVuZ290dGVuPVtdO3JldHVybiBzdHJlYW0ucG9zaXRpb259KSxyZWFkOihmdW5jdGlvbihzdHJlYW0sYnVmZmVyLG9mZnNldCxsZW5ndGgscG9zaXRpb24pe2lmKGxlbmd0aDwwfHxwb3NpdGlvbjwwKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU5WQUwpfWlmKEZTLmlzQ2xvc2VkKHN0cmVhbSkpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVCQURGKX1pZigoc3RyZWFtLmZsYWdzJjIwOTcxNTUpPT09MSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUJBREYpfWlmKEZTLmlzRGlyKHN0cmVhbS5ub2RlLm1vZGUpKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSVNESVIpfWlmKCFzdHJlYW0uc3RyZWFtX29wcy5yZWFkKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU5WQUwpfXZhciBzZWVraW5nPXR5cGVvZiBwb3NpdGlvbiE9PSJ1bmRlZmluZWQiO2lmKCFzZWVraW5nKXtwb3NpdGlvbj1zdHJlYW0ucG9zaXRpb247fWVsc2UgaWYoIXN0cmVhbS5zZWVrYWJsZSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRVNQSVBFKX12YXIgYnl0ZXNSZWFkPXN0cmVhbS5zdHJlYW1fb3BzLnJlYWQoc3RyZWFtLGJ1ZmZlcixvZmZzZXQsbGVuZ3RoLHBvc2l0aW9uKTtpZighc2Vla2luZylzdHJlYW0ucG9zaXRpb24rPWJ5dGVzUmVhZDtyZXR1cm4gYnl0ZXNSZWFkfSksd3JpdGU6KGZ1bmN0aW9uKHN0cmVhbSxidWZmZXIsb2Zmc2V0LGxlbmd0aCxwb3NpdGlvbixjYW5Pd24pe2lmKGxlbmd0aDwwfHxwb3NpdGlvbjwwKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU5WQUwpfWlmKEZTLmlzQ2xvc2VkKHN0cmVhbSkpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVCQURGKX1pZigoc3RyZWFtLmZsYWdzJjIwOTcxNTUpPT09MCl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUJBREYpfWlmKEZTLmlzRGlyKHN0cmVhbS5ub2RlLm1vZGUpKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSVNESVIpfWlmKCFzdHJlYW0uc3RyZWFtX29wcy53cml0ZSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlOVkFMKX1pZihzdHJlYW0uZmxhZ3MmMTAyNCl7RlMubGxzZWVrKHN0cmVhbSwwLDIpO312YXIgc2Vla2luZz10eXBlb2YgcG9zaXRpb24hPT0idW5kZWZpbmVkIjtpZighc2Vla2luZyl7cG9zaXRpb249c3RyZWFtLnBvc2l0aW9uO31lbHNlIGlmKCFzdHJlYW0uc2Vla2FibGUpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVTUElQRSl9dmFyIGJ5dGVzV3JpdHRlbj1zdHJlYW0uc3RyZWFtX29wcy53cml0ZShzdHJlYW0sYnVmZmVyLG9mZnNldCxsZW5ndGgscG9zaXRpb24sY2FuT3duKTtpZighc2Vla2luZylzdHJlYW0ucG9zaXRpb24rPWJ5dGVzV3JpdHRlbjt0cnl7aWYoc3RyZWFtLnBhdGgmJkZTLnRyYWNraW5nRGVsZWdhdGVbIm9uV3JpdGVUb0ZpbGUiXSlGUy50cmFja2luZ0RlbGVnYXRlWyJvbldyaXRlVG9GaWxlIl0oc3RyZWFtLnBhdGgpO31jYXRjaChlKXtjb25zb2xlLmxvZygiRlMudHJhY2tpbmdEZWxlZ2F0ZVsnb25Xcml0ZVRvRmlsZSddKCciK3BhdGgrIicpIHRocmV3IGFuIGV4Y2VwdGlvbjogIitlLm1lc3NhZ2UpO31yZXR1cm4gYnl0ZXNXcml0dGVufSksYWxsb2NhdGU6KGZ1bmN0aW9uKHN0cmVhbSxvZmZzZXQsbGVuZ3RoKXtpZihGUy5pc0Nsb3NlZChzdHJlYW0pKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FQkFERil9aWYob2Zmc2V0PDB8fGxlbmd0aDw9MCl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlOVkFMKX1pZigoc3RyZWFtLmZsYWdzJjIwOTcxNTUpPT09MCl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUJBREYpfWlmKCFGUy5pc0ZpbGUoc3RyZWFtLm5vZGUubW9kZSkmJiFGUy5pc0RpcihzdHJlYW0ubm9kZS5tb2RlKSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRU5PREVWKX1pZighc3RyZWFtLnN0cmVhbV9vcHMuYWxsb2NhdGUpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVPUE5PVFNVUFApfXN0cmVhbS5zdHJlYW1fb3BzLmFsbG9jYXRlKHN0cmVhbSxvZmZzZXQsbGVuZ3RoKTt9KSxtbWFwOihmdW5jdGlvbihzdHJlYW0sYnVmZmVyLG9mZnNldCxsZW5ndGgscG9zaXRpb24scHJvdCxmbGFncyl7aWYoKHN0cmVhbS5mbGFncyYyMDk3MTU1KT09PTEpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVBQ0NFUyl9aWYoIXN0cmVhbS5zdHJlYW1fb3BzLm1tYXApe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVOT0RFVil9cmV0dXJuIHN0cmVhbS5zdHJlYW1fb3BzLm1tYXAoc3RyZWFtLGJ1ZmZlcixvZmZzZXQsbGVuZ3RoLHBvc2l0aW9uLHByb3QsZmxhZ3MpfSksbXN5bmM6KGZ1bmN0aW9uKHN0cmVhbSxidWZmZXIsb2Zmc2V0LGxlbmd0aCxtbWFwRmxhZ3Mpe2lmKCFzdHJlYW18fCFzdHJlYW0uc3RyZWFtX29wcy5tc3luYyl7cmV0dXJuIDB9cmV0dXJuIHN0cmVhbS5zdHJlYW1fb3BzLm1zeW5jKHN0cmVhbSxidWZmZXIsb2Zmc2V0LGxlbmd0aCxtbWFwRmxhZ3MpfSksbXVubWFwOihmdW5jdGlvbihzdHJlYW0pe3JldHVybiAwfSksaW9jdGw6KGZ1bmN0aW9uKHN0cmVhbSxjbWQsYXJnKXtpZighc3RyZWFtLnN0cmVhbV9vcHMuaW9jdGwpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVOT1RUWSl9cmV0dXJuIHN0cmVhbS5zdHJlYW1fb3BzLmlvY3RsKHN0cmVhbSxjbWQsYXJnKX0pLHJlYWRGaWxlOihmdW5jdGlvbihwYXRoLG9wdHMpe29wdHM9b3B0c3x8e307b3B0cy5mbGFncz1vcHRzLmZsYWdzfHwiciI7b3B0cy5lbmNvZGluZz1vcHRzLmVuY29kaW5nfHwiYmluYXJ5IjtpZihvcHRzLmVuY29kaW5nIT09InV0ZjgiJiZvcHRzLmVuY29kaW5nIT09ImJpbmFyeSIpe3Rocm93IG5ldyBFcnJvcignSW52YWxpZCBlbmNvZGluZyB0eXBlICInK29wdHMuZW5jb2RpbmcrJyInKX12YXIgcmV0O3ZhciBzdHJlYW09RlMub3BlbihwYXRoLG9wdHMuZmxhZ3MpO3ZhciBzdGF0PUZTLnN0YXQocGF0aCk7dmFyIGxlbmd0aD1zdGF0LnNpemU7dmFyIGJ1Zj1uZXcgVWludDhBcnJheShsZW5ndGgpO0ZTLnJlYWQoc3RyZWFtLGJ1ZiwwLGxlbmd0aCwwKTtpZihvcHRzLmVuY29kaW5nPT09InV0ZjgiKXtyZXQ9VVRGOEFycmF5VG9TdHJpbmcoYnVmLDApO31lbHNlIGlmKG9wdHMuZW5jb2Rpbmc9PT0iYmluYXJ5Iil7cmV0PWJ1Zjt9RlMuY2xvc2Uoc3RyZWFtKTtyZXR1cm4gcmV0fSksd3JpdGVGaWxlOihmdW5jdGlvbihwYXRoLGRhdGEsb3B0cyl7b3B0cz1vcHRzfHx7fTtvcHRzLmZsYWdzPW9wdHMuZmxhZ3N8fCJ3Ijt2YXIgc3RyZWFtPUZTLm9wZW4ocGF0aCxvcHRzLmZsYWdzLG9wdHMubW9kZSk7aWYodHlwZW9mIGRhdGE9PT0ic3RyaW5nIil7dmFyIGJ1Zj1uZXcgVWludDhBcnJheShsZW5ndGhCeXRlc1VURjgoZGF0YSkrMSk7dmFyIGFjdHVhbE51bUJ5dGVzPXN0cmluZ1RvVVRGOEFycmF5KGRhdGEsYnVmLDAsYnVmLmxlbmd0aCk7RlMud3JpdGUoc3RyZWFtLGJ1ZiwwLGFjdHVhbE51bUJ5dGVzLHVuZGVmaW5lZCxvcHRzLmNhbk93bik7fWVsc2UgaWYoQXJyYXlCdWZmZXIuaXNWaWV3KGRhdGEpKXtGUy53cml0ZShzdHJlYW0sZGF0YSwwLGRhdGEuYnl0ZUxlbmd0aCx1bmRlZmluZWQsb3B0cy5jYW5Pd24pO31lbHNlIHt0aHJvdyBuZXcgRXJyb3IoIlVuc3VwcG9ydGVkIGRhdGEgdHlwZSIpfUZTLmNsb3NlKHN0cmVhbSk7fSksY3dkOihmdW5jdGlvbigpe3JldHVybiBGUy5jdXJyZW50UGF0aH0pLGNoZGlyOihmdW5jdGlvbihwYXRoKXt2YXIgbG9va3VwPUZTLmxvb2t1cFBhdGgocGF0aCx7Zm9sbG93OnRydWV9KTtpZihsb29rdXAubm9kZT09PW51bGwpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVOT0VOVCl9aWYoIUZTLmlzRGlyKGxvb2t1cC5ub2RlLm1vZGUpKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FTk9URElSKX12YXIgZXJyPUZTLm5vZGVQZXJtaXNzaW9ucyhsb29rdXAubm9kZSwieCIpO2lmKGVycil7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoZXJyKX1GUy5jdXJyZW50UGF0aD1sb29rdXAucGF0aDt9KSxjcmVhdGVEZWZhdWx0RGlyZWN0b3JpZXM6KGZ1bmN0aW9uKCl7RlMubWtkaXIoIi90bXAiKTtGUy5ta2RpcigiL2hvbWUiKTtGUy5ta2RpcigiL2hvbWUvd2ViX3VzZXIiKTt9KSxjcmVhdGVEZWZhdWx0RGV2aWNlczooZnVuY3Rpb24oKXtGUy5ta2RpcigiL2RldiIpO0ZTLnJlZ2lzdGVyRGV2aWNlKEZTLm1ha2VkZXYoMSwzKSx7cmVhZDooZnVuY3Rpb24oKXtyZXR1cm4gMH0pLHdyaXRlOihmdW5jdGlvbihzdHJlYW0sYnVmZmVyLG9mZnNldCxsZW5ndGgscG9zKXtyZXR1cm4gbGVuZ3RofSl9KTtGUy5ta2RldigiL2Rldi9udWxsIixGUy5tYWtlZGV2KDEsMykpO1RUWS5yZWdpc3RlcihGUy5tYWtlZGV2KDUsMCksVFRZLmRlZmF1bHRfdHR5X29wcyk7VFRZLnJlZ2lzdGVyKEZTLm1ha2VkZXYoNiwwKSxUVFkuZGVmYXVsdF90dHkxX29wcyk7RlMubWtkZXYoIi9kZXYvdHR5IixGUy5tYWtlZGV2KDUsMCkpO0ZTLm1rZGV2KCIvZGV2L3R0eTEiLEZTLm1ha2VkZXYoNiwwKSk7dmFyIHJhbmRvbV9kZXZpY2U7aWYodHlwZW9mIGNyeXB0byE9PSJ1bmRlZmluZWQiKXt2YXIgcmFuZG9tQnVmZmVyPW5ldyBVaW50OEFycmF5KDEpO3JhbmRvbV9kZXZpY2U9KGZ1bmN0aW9uKCl7Y3J5cHRvLmdldFJhbmRvbVZhbHVlcyhyYW5kb21CdWZmZXIpO3JldHVybiByYW5kb21CdWZmZXJbMF19KTt9ZWxzZSBpZihFTlZJUk9OTUVOVF9JU19OT0RFKXtyYW5kb21fZGV2aWNlPShmdW5jdGlvbigpe3JldHVybiByZXF1aXJlKCJjcnlwdG8iKVsicmFuZG9tQnl0ZXMiXSgxKVswXX0pO31lbHNlIHtyYW5kb21fZGV2aWNlPShmdW5jdGlvbigpe3JldHVybiBNYXRoLnJhbmRvbSgpKjI1NnwwfSk7fUZTLmNyZWF0ZURldmljZSgiL2RldiIsInJhbmRvbSIscmFuZG9tX2RldmljZSk7RlMuY3JlYXRlRGV2aWNlKCIvZGV2IiwidXJhbmRvbSIscmFuZG9tX2RldmljZSk7RlMubWtkaXIoIi9kZXYvc2htIik7RlMubWtkaXIoIi9kZXYvc2htL3RtcCIpO30pLGNyZWF0ZVNwZWNpYWxEaXJlY3RvcmllczooZnVuY3Rpb24oKXtGUy5ta2RpcigiL3Byb2MiKTtGUy5ta2RpcigiL3Byb2Mvc2VsZiIpO0ZTLm1rZGlyKCIvcHJvYy9zZWxmL2ZkIik7RlMubW91bnQoe21vdW50OihmdW5jdGlvbigpe3ZhciBub2RlPUZTLmNyZWF0ZU5vZGUoIi9wcm9jL3NlbGYiLCJmZCIsMTYzODR8NTExLDczKTtub2RlLm5vZGVfb3BzPXtsb29rdXA6KGZ1bmN0aW9uKHBhcmVudCxuYW1lKXt2YXIgZmQ9K25hbWU7dmFyIHN0cmVhbT1GUy5nZXRTdHJlYW0oZmQpO2lmKCFzdHJlYW0pdGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUJBREYpO3ZhciByZXQ9e3BhcmVudDpudWxsLG1vdW50Onttb3VudHBvaW50OiJmYWtlIn0sbm9kZV9vcHM6e3JlYWRsaW5rOihmdW5jdGlvbigpe3JldHVybiBzdHJlYW0ucGF0aH0pfX07cmV0LnBhcmVudD1yZXQ7cmV0dXJuIHJldH0pfTtyZXR1cm4gbm9kZX0pfSx7fSwiL3Byb2Mvc2VsZi9mZCIpO30pLGNyZWF0ZVN0YW5kYXJkU3RyZWFtczooZnVuY3Rpb24oKXtpZihNb2R1bGVbInN0ZGluIl0pe0ZTLmNyZWF0ZURldmljZSgiL2RldiIsInN0ZGluIixNb2R1bGVbInN0ZGluIl0pO31lbHNlIHtGUy5zeW1saW5rKCIvZGV2L3R0eSIsIi9kZXYvc3RkaW4iKTt9aWYoTW9kdWxlWyJzdGRvdXQiXSl7RlMuY3JlYXRlRGV2aWNlKCIvZGV2Iiwic3Rkb3V0IixudWxsLE1vZHVsZVsic3Rkb3V0Il0pO31lbHNlIHtGUy5zeW1saW5rKCIvZGV2L3R0eSIsIi9kZXYvc3Rkb3V0Iik7fWlmKE1vZHVsZVsic3RkZXJyIl0pe0ZTLmNyZWF0ZURldmljZSgiL2RldiIsInN0ZGVyciIsbnVsbCxNb2R1bGVbInN0ZGVyciJdKTt9ZWxzZSB7RlMuc3ltbGluaygiL2Rldi90dHkxIiwiL2Rldi9zdGRlcnIiKTt9dmFyIHN0ZGluPUZTLm9wZW4oIi9kZXYvc3RkaW4iLCJyIik7YXNzZXJ0KHN0ZGluLmZkPT09MCwiaW52YWxpZCBoYW5kbGUgZm9yIHN0ZGluICgiK3N0ZGluLmZkKyIpIik7dmFyIHN0ZG91dD1GUy5vcGVuKCIvZGV2L3N0ZG91dCIsInciKTthc3NlcnQoc3Rkb3V0LmZkPT09MSwiaW52YWxpZCBoYW5kbGUgZm9yIHN0ZG91dCAoIitzdGRvdXQuZmQrIikiKTt2YXIgc3RkZXJyPUZTLm9wZW4oIi9kZXYvc3RkZXJyIiwidyIpO2Fzc2VydChzdGRlcnIuZmQ9PT0yLCJpbnZhbGlkIGhhbmRsZSBmb3Igc3RkZXJyICgiK3N0ZGVyci5mZCsiKSIpO30pLGVuc3VyZUVycm5vRXJyb3I6KGZ1bmN0aW9uKCl7aWYoRlMuRXJybm9FcnJvcilyZXR1cm47RlMuRXJybm9FcnJvcj1mdW5jdGlvbiBFcnJub0Vycm9yKGVycm5vLG5vZGUpe3RoaXMubm9kZT1ub2RlO3RoaXMuc2V0RXJybm89KGZ1bmN0aW9uKGVycm5vKXt0aGlzLmVycm5vPWVycm5vO2Zvcih2YXIga2V5IGluIEVSUk5PX0NPREVTKXtpZihFUlJOT19DT0RFU1trZXldPT09ZXJybm8pe3RoaXMuY29kZT1rZXk7YnJlYWt9fX0pO3RoaXMuc2V0RXJybm8oZXJybm8pO3RoaXMubWVzc2FnZT1FUlJOT19NRVNTQUdFU1tlcnJub107aWYodGhpcy5zdGFjaylPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywic3RhY2siLHt2YWx1ZToobmV3IEVycm9yKS5zdGFjayx3cml0YWJsZTp0cnVlfSk7fTtGUy5FcnJub0Vycm9yLnByb3RvdHlwZT1uZXcgRXJyb3I7RlMuRXJybm9FcnJvci5wcm90b3R5cGUuY29uc3RydWN0b3I9RlMuRXJybm9FcnJvcjtbRVJSTk9fQ09ERVMuRU5PRU5UXS5mb3JFYWNoKChmdW5jdGlvbihjb2RlKXtGUy5nZW5lcmljRXJyb3JzW2NvZGVdPW5ldyBGUy5FcnJub0Vycm9yKGNvZGUpO0ZTLmdlbmVyaWNFcnJvcnNbY29kZV0uc3RhY2s9IjxnZW5lcmljIGVycm9yLCBubyBzdGFjaz4iO30pKTt9KSxzdGF0aWNJbml0OihmdW5jdGlvbigpe0ZTLmVuc3VyZUVycm5vRXJyb3IoKTtGUy5uYW1lVGFibGU9bmV3IEFycmF5KDQwOTYpO0ZTLm1vdW50KE1FTUZTLHt9LCIvIik7RlMuY3JlYXRlRGVmYXVsdERpcmVjdG9yaWVzKCk7RlMuY3JlYXRlRGVmYXVsdERldmljZXMoKTtGUy5jcmVhdGVTcGVjaWFsRGlyZWN0b3JpZXMoKTtGUy5maWxlc3lzdGVtcz17Ik1FTUZTIjpNRU1GUywiSURCRlMiOklEQkZTLCJOT0RFRlMiOk5PREVGUywiV09SS0VSRlMiOldPUktFUkZTfTt9KSxpbml0OihmdW5jdGlvbihpbnB1dCxvdXRwdXQsZXJyb3Ipe2Fzc2VydCghRlMuaW5pdC5pbml0aWFsaXplZCwiRlMuaW5pdCB3YXMgcHJldmlvdXNseSBjYWxsZWQuIElmIHlvdSB3YW50IHRvIGluaXRpYWxpemUgbGF0ZXIgd2l0aCBjdXN0b20gcGFyYW1ldGVycywgcmVtb3ZlIGFueSBlYXJsaWVyIGNhbGxzIChub3RlIHRoYXQgb25lIGlzIGF1dG9tYXRpY2FsbHkgYWRkZWQgdG8gdGhlIGdlbmVyYXRlZCBjb2RlKSIpO0ZTLmluaXQuaW5pdGlhbGl6ZWQ9dHJ1ZTtGUy5lbnN1cmVFcnJub0Vycm9yKCk7TW9kdWxlWyJzdGRpbiJdPWlucHV0fHxNb2R1bGVbInN0ZGluIl07TW9kdWxlWyJzdGRvdXQiXT1vdXRwdXR8fE1vZHVsZVsic3Rkb3V0Il07TW9kdWxlWyJzdGRlcnIiXT1lcnJvcnx8TW9kdWxlWyJzdGRlcnIiXTtGUy5jcmVhdGVTdGFuZGFyZFN0cmVhbXMoKTt9KSxxdWl0OihmdW5jdGlvbigpe0ZTLmluaXQuaW5pdGlhbGl6ZWQ9ZmFsc2U7dmFyIGZmbHVzaD1Nb2R1bGVbIl9mZmx1c2giXTtpZihmZmx1c2gpZmZsdXNoKDApO2Zvcih2YXIgaT0wO2k8RlMuc3RyZWFtcy5sZW5ndGg7aSsrKXt2YXIgc3RyZWFtPUZTLnN0cmVhbXNbaV07aWYoIXN0cmVhbSl7Y29udGludWV9RlMuY2xvc2Uoc3RyZWFtKTt9fSksZ2V0TW9kZTooZnVuY3Rpb24oY2FuUmVhZCxjYW5Xcml0ZSl7dmFyIG1vZGU9MDtpZihjYW5SZWFkKW1vZGV8PTI5Mnw3MztpZihjYW5Xcml0ZSltb2RlfD0xNDY7cmV0dXJuIG1vZGV9KSxqb2luUGF0aDooZnVuY3Rpb24ocGFydHMsZm9yY2VSZWxhdGl2ZSl7dmFyIHBhdGg9UEFUSC5qb2luLmFwcGx5KG51bGwscGFydHMpO2lmKGZvcmNlUmVsYXRpdmUmJnBhdGhbMF09PSIvIilwYXRoPXBhdGguc3Vic3RyKDEpO3JldHVybiBwYXRofSksYWJzb2x1dGVQYXRoOihmdW5jdGlvbihyZWxhdGl2ZSxiYXNlKXtyZXR1cm4gUEFUSC5yZXNvbHZlKGJhc2UscmVsYXRpdmUpfSksc3RhbmRhcmRpemVQYXRoOihmdW5jdGlvbihwYXRoKXtyZXR1cm4gUEFUSC5ub3JtYWxpemUocGF0aCl9KSxmaW5kT2JqZWN0OihmdW5jdGlvbihwYXRoLGRvbnRSZXNvbHZlTGFzdExpbmspe3ZhciByZXQ9RlMuYW5hbHl6ZVBhdGgocGF0aCxkb250UmVzb2x2ZUxhc3RMaW5rKTtpZihyZXQuZXhpc3RzKXtyZXR1cm4gcmV0Lm9iamVjdH1lbHNlIHtfX19zZXRFcnJObyhyZXQuZXJyb3IpO3JldHVybiBudWxsfX0pLGFuYWx5emVQYXRoOihmdW5jdGlvbihwYXRoLGRvbnRSZXNvbHZlTGFzdExpbmspe3RyeXt2YXIgbG9va3VwPUZTLmxvb2t1cFBhdGgocGF0aCx7Zm9sbG93OiFkb250UmVzb2x2ZUxhc3RMaW5rfSk7cGF0aD1sb29rdXAucGF0aDt9Y2F0Y2goZSl7fXZhciByZXQ9e2lzUm9vdDpmYWxzZSxleGlzdHM6ZmFsc2UsZXJyb3I6MCxuYW1lOm51bGwscGF0aDpudWxsLG9iamVjdDpudWxsLHBhcmVudEV4aXN0czpmYWxzZSxwYXJlbnRQYXRoOm51bGwscGFyZW50T2JqZWN0Om51bGx9O3RyeXt2YXIgbG9va3VwPUZTLmxvb2t1cFBhdGgocGF0aCx7cGFyZW50OnRydWV9KTtyZXQucGFyZW50RXhpc3RzPXRydWU7cmV0LnBhcmVudFBhdGg9bG9va3VwLnBhdGg7cmV0LnBhcmVudE9iamVjdD1sb29rdXAubm9kZTtyZXQubmFtZT1QQVRILmJhc2VuYW1lKHBhdGgpO2xvb2t1cD1GUy5sb29rdXBQYXRoKHBhdGgse2ZvbGxvdzohZG9udFJlc29sdmVMYXN0TGlua30pO3JldC5leGlzdHM9dHJ1ZTtyZXQucGF0aD1sb29rdXAucGF0aDtyZXQub2JqZWN0PWxvb2t1cC5ub2RlO3JldC5uYW1lPWxvb2t1cC5ub2RlLm5hbWU7cmV0LmlzUm9vdD1sb29rdXAucGF0aD09PSIvIjt9Y2F0Y2goZSl7cmV0LmVycm9yPWUuZXJybm87fXJldHVybiByZXR9KSxjcmVhdGVGb2xkZXI6KGZ1bmN0aW9uKHBhcmVudCxuYW1lLGNhblJlYWQsY2FuV3JpdGUpe3ZhciBwYXRoPVBBVEguam9pbjIodHlwZW9mIHBhcmVudD09PSJzdHJpbmciP3BhcmVudDpGUy5nZXRQYXRoKHBhcmVudCksbmFtZSk7dmFyIG1vZGU9RlMuZ2V0TW9kZShjYW5SZWFkLGNhbldyaXRlKTtyZXR1cm4gRlMubWtkaXIocGF0aCxtb2RlKX0pLGNyZWF0ZVBhdGg6KGZ1bmN0aW9uKHBhcmVudCxwYXRoLGNhblJlYWQsY2FuV3JpdGUpe3BhcmVudD10eXBlb2YgcGFyZW50PT09InN0cmluZyI/cGFyZW50OkZTLmdldFBhdGgocGFyZW50KTt2YXIgcGFydHM9cGF0aC5zcGxpdCgiLyIpLnJldmVyc2UoKTt3aGlsZShwYXJ0cy5sZW5ndGgpe3ZhciBwYXJ0PXBhcnRzLnBvcCgpO2lmKCFwYXJ0KWNvbnRpbnVlO3ZhciBjdXJyZW50PVBBVEguam9pbjIocGFyZW50LHBhcnQpO3RyeXtGUy5ta2RpcihjdXJyZW50KTt9Y2F0Y2goZSl7fXBhcmVudD1jdXJyZW50O31yZXR1cm4gY3VycmVudH0pLGNyZWF0ZUZpbGU6KGZ1bmN0aW9uKHBhcmVudCxuYW1lLHByb3BlcnRpZXMsY2FuUmVhZCxjYW5Xcml0ZSl7dmFyIHBhdGg9UEFUSC5qb2luMih0eXBlb2YgcGFyZW50PT09InN0cmluZyI/cGFyZW50OkZTLmdldFBhdGgocGFyZW50KSxuYW1lKTt2YXIgbW9kZT1GUy5nZXRNb2RlKGNhblJlYWQsY2FuV3JpdGUpO3JldHVybiBGUy5jcmVhdGUocGF0aCxtb2RlKX0pLGNyZWF0ZURhdGFGaWxlOihmdW5jdGlvbihwYXJlbnQsbmFtZSxkYXRhLGNhblJlYWQsY2FuV3JpdGUsY2FuT3duKXt2YXIgcGF0aD1uYW1lP1BBVEguam9pbjIodHlwZW9mIHBhcmVudD09PSJzdHJpbmciP3BhcmVudDpGUy5nZXRQYXRoKHBhcmVudCksbmFtZSk6cGFyZW50O3ZhciBtb2RlPUZTLmdldE1vZGUoY2FuUmVhZCxjYW5Xcml0ZSk7dmFyIG5vZGU9RlMuY3JlYXRlKHBhdGgsbW9kZSk7aWYoZGF0YSl7aWYodHlwZW9mIGRhdGE9PT0ic3RyaW5nIil7dmFyIGFycj1uZXcgQXJyYXkoZGF0YS5sZW5ndGgpO2Zvcih2YXIgaT0wLGxlbj1kYXRhLmxlbmd0aDtpPGxlbjsrK2kpYXJyW2ldPWRhdGEuY2hhckNvZGVBdChpKTtkYXRhPWFycjt9RlMuY2htb2Qobm9kZSxtb2RlfDE0Nik7dmFyIHN0cmVhbT1GUy5vcGVuKG5vZGUsInciKTtGUy53cml0ZShzdHJlYW0sZGF0YSwwLGRhdGEubGVuZ3RoLDAsY2FuT3duKTtGUy5jbG9zZShzdHJlYW0pO0ZTLmNobW9kKG5vZGUsbW9kZSk7fXJldHVybiBub2RlfSksY3JlYXRlRGV2aWNlOihmdW5jdGlvbihwYXJlbnQsbmFtZSxpbnB1dCxvdXRwdXQpe3ZhciBwYXRoPVBBVEguam9pbjIodHlwZW9mIHBhcmVudD09PSJzdHJpbmciP3BhcmVudDpGUy5nZXRQYXRoKHBhcmVudCksbmFtZSk7dmFyIG1vZGU9RlMuZ2V0TW9kZSghIWlucHV0LCEhb3V0cHV0KTtpZighRlMuY3JlYXRlRGV2aWNlLm1ham9yKUZTLmNyZWF0ZURldmljZS5tYWpvcj02NDt2YXIgZGV2PUZTLm1ha2VkZXYoRlMuY3JlYXRlRGV2aWNlLm1ham9yKyssMCk7RlMucmVnaXN0ZXJEZXZpY2UoZGV2LHtvcGVuOihmdW5jdGlvbihzdHJlYW0pe3N0cmVhbS5zZWVrYWJsZT1mYWxzZTt9KSxjbG9zZTooZnVuY3Rpb24oc3RyZWFtKXtpZihvdXRwdXQmJm91dHB1dC5idWZmZXImJm91dHB1dC5idWZmZXIubGVuZ3RoKXtvdXRwdXQoMTApO319KSxyZWFkOihmdW5jdGlvbihzdHJlYW0sYnVmZmVyLG9mZnNldCxsZW5ndGgscG9zKXt2YXIgYnl0ZXNSZWFkPTA7Zm9yKHZhciBpPTA7aTxsZW5ndGg7aSsrKXt2YXIgcmVzdWx0O3RyeXtyZXN1bHQ9aW5wdXQoKTt9Y2F0Y2goZSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlPKX1pZihyZXN1bHQ9PT11bmRlZmluZWQmJmJ5dGVzUmVhZD09PTApe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVBR0FJTil9aWYocmVzdWx0PT09bnVsbHx8cmVzdWx0PT09dW5kZWZpbmVkKWJyZWFrO2J5dGVzUmVhZCsrO2J1ZmZlcltvZmZzZXQraV09cmVzdWx0O31pZihieXRlc1JlYWQpe3N0cmVhbS5ub2RlLnRpbWVzdGFtcD1EYXRlLm5vdygpO31yZXR1cm4gYnl0ZXNSZWFkfSksd3JpdGU6KGZ1bmN0aW9uKHN0cmVhbSxidWZmZXIsb2Zmc2V0LGxlbmd0aCxwb3Mpe2Zvcih2YXIgaT0wO2k8bGVuZ3RoO2krKyl7dHJ5e291dHB1dChidWZmZXJbb2Zmc2V0K2ldKTt9Y2F0Y2goZSl7dGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUlPKX19aWYobGVuZ3RoKXtzdHJlYW0ubm9kZS50aW1lc3RhbXA9RGF0ZS5ub3coKTt9cmV0dXJuIGl9KX0pO3JldHVybiBGUy5ta2RldihwYXRoLG1vZGUsZGV2KX0pLGNyZWF0ZUxpbms6KGZ1bmN0aW9uKHBhcmVudCxuYW1lLHRhcmdldCxjYW5SZWFkLGNhbldyaXRlKXt2YXIgcGF0aD1QQVRILmpvaW4yKHR5cGVvZiBwYXJlbnQ9PT0ic3RyaW5nIj9wYXJlbnQ6RlMuZ2V0UGF0aChwYXJlbnQpLG5hbWUpO3JldHVybiBGUy5zeW1saW5rKHRhcmdldCxwYXRoKX0pLGZvcmNlTG9hZEZpbGU6KGZ1bmN0aW9uKG9iail7aWYob2JqLmlzRGV2aWNlfHxvYmouaXNGb2xkZXJ8fG9iai5saW5rfHxvYmouY29udGVudHMpcmV0dXJuIHRydWU7dmFyIHN1Y2Nlc3M9dHJ1ZTtpZih0eXBlb2YgWE1MSHR0cFJlcXVlc3QhPT0idW5kZWZpbmVkIil7dGhyb3cgbmV3IEVycm9yKCJMYXp5IGxvYWRpbmcgc2hvdWxkIGhhdmUgYmVlbiBwZXJmb3JtZWQgKGNvbnRlbnRzIHNldCkgaW4gY3JlYXRlTGF6eUZpbGUsIGJ1dCBpdCB3YXMgbm90LiBMYXp5IGxvYWRpbmcgb25seSB3b3JrcyBpbiB3ZWIgd29ya2Vycy4gVXNlIC0tZW1iZWQtZmlsZSBvciAtLXByZWxvYWQtZmlsZSBpbiBlbWNjIG9uIHRoZSBtYWluIHRocmVhZC4iKX1lbHNlIGlmKE1vZHVsZVsicmVhZCJdKXt0cnl7b2JqLmNvbnRlbnRzPWludEFycmF5RnJvbVN0cmluZyhNb2R1bGVbInJlYWQiXShvYmoudXJsKSx0cnVlKTtvYmoudXNlZEJ5dGVzPW9iai5jb250ZW50cy5sZW5ndGg7fWNhdGNoKGUpe3N1Y2Nlc3M9ZmFsc2U7fX1lbHNlIHt0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBsb2FkIHdpdGhvdXQgcmVhZCgpIG9yIFhNTEh0dHBSZXF1ZXN0LiIpfWlmKCFzdWNjZXNzKV9fX3NldEVyck5vKEVSUk5PX0NPREVTLkVJTyk7cmV0dXJuIHN1Y2Nlc3N9KSxjcmVhdGVMYXp5RmlsZTooZnVuY3Rpb24ocGFyZW50LG5hbWUsdXJsLGNhblJlYWQsY2FuV3JpdGUpe2Z1bmN0aW9uIExhenlVaW50OEFycmF5KCl7dGhpcy5sZW5ndGhLbm93bj1mYWxzZTt0aGlzLmNodW5rcz1bXTt9TGF6eVVpbnQ4QXJyYXkucHJvdG90eXBlLmdldD1mdW5jdGlvbiBMYXp5VWludDhBcnJheV9nZXQoaWR4KXtpZihpZHg+dGhpcy5sZW5ndGgtMXx8aWR4PDApe3JldHVybiB1bmRlZmluZWR9dmFyIGNodW5rT2Zmc2V0PWlkeCV0aGlzLmNodW5rU2l6ZTt2YXIgY2h1bmtOdW09aWR4L3RoaXMuY2h1bmtTaXplfDA7cmV0dXJuIHRoaXMuZ2V0dGVyKGNodW5rTnVtKVtjaHVua09mZnNldF19O0xhenlVaW50OEFycmF5LnByb3RvdHlwZS5zZXREYXRhR2V0dGVyPWZ1bmN0aW9uIExhenlVaW50OEFycmF5X3NldERhdGFHZXR0ZXIoZ2V0dGVyKXt0aGlzLmdldHRlcj1nZXR0ZXI7fTtMYXp5VWludDhBcnJheS5wcm90b3R5cGUuY2FjaGVMZW5ndGg9ZnVuY3Rpb24gTGF6eVVpbnQ4QXJyYXlfY2FjaGVMZW5ndGgoKXt2YXIgeGhyPW5ldyBYTUxIdHRwUmVxdWVzdDt4aHIub3BlbigiSEVBRCIsdXJsLGZhbHNlKTt4aHIuc2VuZChudWxsKTtpZighKHhoci5zdGF0dXM+PTIwMCYmeGhyLnN0YXR1czwzMDB8fHhoci5zdGF0dXM9PT0zMDQpKXRocm93IG5ldyBFcnJvcigiQ291bGRuJ3QgbG9hZCAiK3VybCsiLiBTdGF0dXM6ICIreGhyLnN0YXR1cyk7dmFyIGRhdGFsZW5ndGg9TnVtYmVyKHhoci5nZXRSZXNwb25zZUhlYWRlcigiQ29udGVudC1sZW5ndGgiKSk7dmFyIGhlYWRlcjt2YXIgaGFzQnl0ZVNlcnZpbmc9KGhlYWRlcj14aHIuZ2V0UmVzcG9uc2VIZWFkZXIoIkFjY2VwdC1SYW5nZXMiKSkmJmhlYWRlcj09PSJieXRlcyI7dmFyIHVzZXNHemlwPShoZWFkZXI9eGhyLmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LUVuY29kaW5nIikpJiZoZWFkZXI9PT0iZ3ppcCI7dmFyIGNodW5rU2l6ZT0xMDI0KjEwMjQ7aWYoIWhhc0J5dGVTZXJ2aW5nKWNodW5rU2l6ZT1kYXRhbGVuZ3RoO3ZhciBkb1hIUj0oZnVuY3Rpb24oZnJvbSx0byl7aWYoZnJvbT50byl0aHJvdyBuZXcgRXJyb3IoImludmFsaWQgcmFuZ2UgKCIrZnJvbSsiLCAiK3RvKyIpIG9yIG5vIGJ5dGVzIHJlcXVlc3RlZCEiKTtpZih0bz5kYXRhbGVuZ3RoLTEpdGhyb3cgbmV3IEVycm9yKCJvbmx5ICIrZGF0YWxlbmd0aCsiIGJ5dGVzIGF2YWlsYWJsZSEgcHJvZ3JhbW1lciBlcnJvciEiKTt2YXIgeGhyPW5ldyBYTUxIdHRwUmVxdWVzdDt4aHIub3BlbigiR0VUIix1cmwsZmFsc2UpO2lmKGRhdGFsZW5ndGghPT1jaHVua1NpemUpeGhyLnNldFJlcXVlc3RIZWFkZXIoIlJhbmdlIiwiYnl0ZXM9Iitmcm9tKyItIit0byk7aWYodHlwZW9mIFVpbnQ4QXJyYXkhPSJ1bmRlZmluZWQiKXhoci5yZXNwb25zZVR5cGU9ImFycmF5YnVmZmVyIjtpZih4aHIub3ZlcnJpZGVNaW1lVHlwZSl7eGhyLm92ZXJyaWRlTWltZVR5cGUoInRleHQvcGxhaW47IGNoYXJzZXQ9eC11c2VyLWRlZmluZWQiKTt9eGhyLnNlbmQobnVsbCk7aWYoISh4aHIuc3RhdHVzPj0yMDAmJnhoci5zdGF0dXM8MzAwfHx4aHIuc3RhdHVzPT09MzA0KSl0aHJvdyBuZXcgRXJyb3IoIkNvdWxkbid0IGxvYWQgIit1cmwrIi4gU3RhdHVzOiAiK3hoci5zdGF0dXMpO2lmKHhoci5yZXNwb25zZSE9PXVuZGVmaW5lZCl7cmV0dXJuIG5ldyBVaW50OEFycmF5KHhoci5yZXNwb25zZXx8W10pfWVsc2Uge3JldHVybiBpbnRBcnJheUZyb21TdHJpbmcoeGhyLnJlc3BvbnNlVGV4dHx8IiIsdHJ1ZSl9fSk7dmFyIGxhenlBcnJheT10aGlzO2xhenlBcnJheS5zZXREYXRhR2V0dGVyKChmdW5jdGlvbihjaHVua051bSl7dmFyIHN0YXJ0PWNodW5rTnVtKmNodW5rU2l6ZTt2YXIgZW5kPShjaHVua051bSsxKSpjaHVua1NpemUtMTtlbmQ9TWF0aC5taW4oZW5kLGRhdGFsZW5ndGgtMSk7aWYodHlwZW9mIGxhenlBcnJheS5jaHVua3NbY2h1bmtOdW1dPT09InVuZGVmaW5lZCIpe2xhenlBcnJheS5jaHVua3NbY2h1bmtOdW1dPWRvWEhSKHN0YXJ0LGVuZCk7fWlmKHR5cGVvZiBsYXp5QXJyYXkuY2h1bmtzW2NodW5rTnVtXT09PSJ1bmRlZmluZWQiKXRocm93IG5ldyBFcnJvcigiZG9YSFIgZmFpbGVkISIpO3JldHVybiBsYXp5QXJyYXkuY2h1bmtzW2NodW5rTnVtXX0pKTtpZih1c2VzR3ppcHx8IWRhdGFsZW5ndGgpe2NodW5rU2l6ZT1kYXRhbGVuZ3RoPTE7ZGF0YWxlbmd0aD10aGlzLmdldHRlcigwKS5sZW5ndGg7Y2h1bmtTaXplPWRhdGFsZW5ndGg7Y29uc29sZS5sb2coIkxhenlGaWxlcyBvbiBnemlwIGZvcmNlcyBkb3dubG9hZCBvZiB0aGUgd2hvbGUgZmlsZSB3aGVuIGxlbmd0aCBpcyBhY2Nlc3NlZCIpO310aGlzLl9sZW5ndGg9ZGF0YWxlbmd0aDt0aGlzLl9jaHVua1NpemU9Y2h1bmtTaXplO3RoaXMubGVuZ3RoS25vd249dHJ1ZTt9O2lmKHR5cGVvZiBYTUxIdHRwUmVxdWVzdCE9PSJ1bmRlZmluZWQiKXtpZighRU5WSVJPTk1FTlRfSVNfV09SS0VSKXRocm93ICJDYW5ub3QgZG8gc3luY2hyb25vdXMgYmluYXJ5IFhIUnMgb3V0c2lkZSB3ZWJ3b3JrZXJzIGluIG1vZGVybiBicm93c2Vycy4gVXNlIC0tZW1iZWQtZmlsZSBvciAtLXByZWxvYWQtZmlsZSBpbiBlbWNjIjt2YXIgbGF6eUFycmF5PW5ldyBMYXp5VWludDhBcnJheTtPYmplY3QuZGVmaW5lUHJvcGVydGllcyhsYXp5QXJyYXkse2xlbmd0aDp7Z2V0OihmdW5jdGlvbigpe2lmKCF0aGlzLmxlbmd0aEtub3duKXt0aGlzLmNhY2hlTGVuZ3RoKCk7fXJldHVybiB0aGlzLl9sZW5ndGh9KX0sY2h1bmtTaXplOntnZXQ6KGZ1bmN0aW9uKCl7aWYoIXRoaXMubGVuZ3RoS25vd24pe3RoaXMuY2FjaGVMZW5ndGgoKTt9cmV0dXJuIHRoaXMuX2NodW5rU2l6ZX0pfX0pO3ZhciBwcm9wZXJ0aWVzPXtpc0RldmljZTpmYWxzZSxjb250ZW50czpsYXp5QXJyYXl9O31lbHNlIHt2YXIgcHJvcGVydGllcz17aXNEZXZpY2U6ZmFsc2UsdXJsOnVybH07fXZhciBub2RlPUZTLmNyZWF0ZUZpbGUocGFyZW50LG5hbWUscHJvcGVydGllcyxjYW5SZWFkLGNhbldyaXRlKTtpZihwcm9wZXJ0aWVzLmNvbnRlbnRzKXtub2RlLmNvbnRlbnRzPXByb3BlcnRpZXMuY29udGVudHM7fWVsc2UgaWYocHJvcGVydGllcy51cmwpe25vZGUuY29udGVudHM9bnVsbDtub2RlLnVybD1wcm9wZXJ0aWVzLnVybDt9T2JqZWN0LmRlZmluZVByb3BlcnRpZXMobm9kZSx7dXNlZEJ5dGVzOntnZXQ6KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudHMubGVuZ3RofSl9fSk7dmFyIHN0cmVhbV9vcHM9e307dmFyIGtleXM9T2JqZWN0LmtleXMobm9kZS5zdHJlYW1fb3BzKTtrZXlzLmZvckVhY2goKGZ1bmN0aW9uKGtleSl7dmFyIGZuPW5vZGUuc3RyZWFtX29wc1trZXldO3N0cmVhbV9vcHNba2V5XT1mdW5jdGlvbiBmb3JjZUxvYWRMYXp5RmlsZSgpe2lmKCFGUy5mb3JjZUxvYWRGaWxlKG5vZGUpKXt0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihFUlJOT19DT0RFUy5FSU8pfXJldHVybiBmbi5hcHBseShudWxsLGFyZ3VtZW50cyl9O30pKTtzdHJlYW1fb3BzLnJlYWQ9ZnVuY3Rpb24gc3RyZWFtX29wc19yZWFkKHN0cmVhbSxidWZmZXIsb2Zmc2V0LGxlbmd0aCxwb3NpdGlvbil7aWYoIUZTLmZvcmNlTG9hZEZpbGUobm9kZSkpe3Rocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVJTyl9dmFyIGNvbnRlbnRzPXN0cmVhbS5ub2RlLmNvbnRlbnRzO2lmKHBvc2l0aW9uPj1jb250ZW50cy5sZW5ndGgpcmV0dXJuIDA7dmFyIHNpemU9TWF0aC5taW4oY29udGVudHMubGVuZ3RoLXBvc2l0aW9uLGxlbmd0aCk7YXNzZXJ0KHNpemU+PTApO2lmKGNvbnRlbnRzLnNsaWNlKXtmb3IodmFyIGk9MDtpPHNpemU7aSsrKXtidWZmZXJbb2Zmc2V0K2ldPWNvbnRlbnRzW3Bvc2l0aW9uK2ldO319ZWxzZSB7Zm9yKHZhciBpPTA7aTxzaXplO2krKyl7YnVmZmVyW29mZnNldCtpXT1jb250ZW50cy5nZXQocG9zaXRpb24raSk7fX1yZXR1cm4gc2l6ZX07bm9kZS5zdHJlYW1fb3BzPXN0cmVhbV9vcHM7cmV0dXJuIG5vZGV9KSxjcmVhdGVQcmVsb2FkZWRGaWxlOihmdW5jdGlvbihwYXJlbnQsbmFtZSx1cmwsY2FuUmVhZCxjYW5Xcml0ZSxvbmxvYWQsb25lcnJvcixkb250Q3JlYXRlRmlsZSxjYW5Pd24scHJlRmluaXNoKXtCcm93c2VyLmluaXQoKTt2YXIgZnVsbG5hbWU9bmFtZT9QQVRILnJlc29sdmUoUEFUSC5qb2luMihwYXJlbnQsbmFtZSkpOnBhcmVudDtmdW5jdGlvbiBwcm9jZXNzRGF0YShieXRlQXJyYXkpe2Z1bmN0aW9uIGZpbmlzaChieXRlQXJyYXkpe2lmKHByZUZpbmlzaClwcmVGaW5pc2goKTtpZighZG9udENyZWF0ZUZpbGUpe0ZTLmNyZWF0ZURhdGFGaWxlKHBhcmVudCxuYW1lLGJ5dGVBcnJheSxjYW5SZWFkLGNhbldyaXRlLGNhbk93bik7fWlmKG9ubG9hZClvbmxvYWQoKTtyZW1vdmVSdW5EZXBlbmRlbmN5KCk7fXZhciBoYW5kbGVkPWZhbHNlO01vZHVsZVsicHJlbG9hZFBsdWdpbnMiXS5mb3JFYWNoKChmdW5jdGlvbihwbHVnaW4pe2lmKGhhbmRsZWQpcmV0dXJuO2lmKHBsdWdpblsiY2FuSGFuZGxlIl0oZnVsbG5hbWUpKXtwbHVnaW5bImhhbmRsZSJdKGJ5dGVBcnJheSxmdWxsbmFtZSxmaW5pc2gsKGZ1bmN0aW9uKCl7aWYob25lcnJvcilvbmVycm9yKCk7cmVtb3ZlUnVuRGVwZW5kZW5jeSgpO30pKTtoYW5kbGVkPXRydWU7fX0pKTtpZighaGFuZGxlZClmaW5pc2goYnl0ZUFycmF5KTt9YWRkUnVuRGVwZW5kZW5jeSgpO2lmKHR5cGVvZiB1cmw9PSJzdHJpbmciKXtCcm93c2VyLmFzeW5jTG9hZCh1cmwsKGZ1bmN0aW9uKGJ5dGVBcnJheSl7cHJvY2Vzc0RhdGEoYnl0ZUFycmF5KTt9KSxvbmVycm9yKTt9ZWxzZSB7cHJvY2Vzc0RhdGEodXJsKTt9fSksaW5kZXhlZERCOihmdW5jdGlvbigpe3JldHVybiB3aW5kb3cuaW5kZXhlZERCfHx3aW5kb3cubW96SW5kZXhlZERCfHx3aW5kb3cud2Via2l0SW5kZXhlZERCfHx3aW5kb3cubXNJbmRleGVkREJ9KSxEQl9OQU1FOihmdW5jdGlvbigpe3JldHVybiAiRU1fRlNfIit3aW5kb3cubG9jYXRpb24ucGF0aG5hbWV9KSxEQl9WRVJTSU9OOjIwLERCX1NUT1JFX05BTUU6IkZJTEVfREFUQSIsc2F2ZUZpbGVzVG9EQjooZnVuY3Rpb24ocGF0aHMsb25sb2FkLG9uZXJyb3Ipe29ubG9hZD1vbmxvYWR8fChmdW5jdGlvbigpe30pO29uZXJyb3I9b25lcnJvcnx8KGZ1bmN0aW9uKCl7fSk7dmFyIGluZGV4ZWREQj1GUy5pbmRleGVkREIoKTt0cnl7dmFyIG9wZW5SZXF1ZXN0PWluZGV4ZWREQi5vcGVuKEZTLkRCX05BTUUoKSxGUy5EQl9WRVJTSU9OKTt9Y2F0Y2goZSl7cmV0dXJuIG9uZXJyb3IoZSl9b3BlblJlcXVlc3Qub251cGdyYWRlbmVlZGVkPWZ1bmN0aW9uIG9wZW5SZXF1ZXN0X29udXBncmFkZW5lZWRlZCgpe2NvbnNvbGUubG9nKCJjcmVhdGluZyBkYiIpO3ZhciBkYj1vcGVuUmVxdWVzdC5yZXN1bHQ7ZGIuY3JlYXRlT2JqZWN0U3RvcmUoRlMuREJfU1RPUkVfTkFNRSk7fTtvcGVuUmVxdWVzdC5vbnN1Y2Nlc3M9ZnVuY3Rpb24gb3BlblJlcXVlc3Rfb25zdWNjZXNzKCl7dmFyIGRiPW9wZW5SZXF1ZXN0LnJlc3VsdDt2YXIgdHJhbnNhY3Rpb249ZGIudHJhbnNhY3Rpb24oW0ZTLkRCX1NUT1JFX05BTUVdLCJyZWFkd3JpdGUiKTt2YXIgZmlsZXM9dHJhbnNhY3Rpb24ub2JqZWN0U3RvcmUoRlMuREJfU1RPUkVfTkFNRSk7dmFyIG9rPTAsZmFpbD0wLHRvdGFsPXBhdGhzLmxlbmd0aDtmdW5jdGlvbiBmaW5pc2goKXtpZihmYWlsPT0wKW9ubG9hZCgpO2Vsc2Ugb25lcnJvcigpO31wYXRocy5mb3JFYWNoKChmdW5jdGlvbihwYXRoKXt2YXIgcHV0UmVxdWVzdD1maWxlcy5wdXQoRlMuYW5hbHl6ZVBhdGgocGF0aCkub2JqZWN0LmNvbnRlbnRzLHBhdGgpO3B1dFJlcXVlc3Qub25zdWNjZXNzPWZ1bmN0aW9uIHB1dFJlcXVlc3Rfb25zdWNjZXNzKCl7b2srKztpZihvaytmYWlsPT10b3RhbClmaW5pc2goKTt9O3B1dFJlcXVlc3Qub25lcnJvcj1mdW5jdGlvbiBwdXRSZXF1ZXN0X29uZXJyb3IoKXtmYWlsKys7aWYob2srZmFpbD09dG90YWwpZmluaXNoKCk7fTt9KSk7dHJhbnNhY3Rpb24ub25lcnJvcj1vbmVycm9yO307b3BlblJlcXVlc3Qub25lcnJvcj1vbmVycm9yO30pLGxvYWRGaWxlc0Zyb21EQjooZnVuY3Rpb24ocGF0aHMsb25sb2FkLG9uZXJyb3Ipe29ubG9hZD1vbmxvYWR8fChmdW5jdGlvbigpe30pO29uZXJyb3I9b25lcnJvcnx8KGZ1bmN0aW9uKCl7fSk7dmFyIGluZGV4ZWREQj1GUy5pbmRleGVkREIoKTt0cnl7dmFyIG9wZW5SZXF1ZXN0PWluZGV4ZWREQi5vcGVuKEZTLkRCX05BTUUoKSxGUy5EQl9WRVJTSU9OKTt9Y2F0Y2goZSl7cmV0dXJuIG9uZXJyb3IoZSl9b3BlblJlcXVlc3Qub251cGdyYWRlbmVlZGVkPW9uZXJyb3I7b3BlblJlcXVlc3Qub25zdWNjZXNzPWZ1bmN0aW9uIG9wZW5SZXF1ZXN0X29uc3VjY2Vzcygpe3ZhciBkYj1vcGVuUmVxdWVzdC5yZXN1bHQ7dHJ5e3ZhciB0cmFuc2FjdGlvbj1kYi50cmFuc2FjdGlvbihbRlMuREJfU1RPUkVfTkFNRV0sInJlYWRvbmx5Iik7fWNhdGNoKGUpe29uZXJyb3IoZSk7cmV0dXJufXZhciBmaWxlcz10cmFuc2FjdGlvbi5vYmplY3RTdG9yZShGUy5EQl9TVE9SRV9OQU1FKTt2YXIgb2s9MCxmYWlsPTAsdG90YWw9cGF0aHMubGVuZ3RoO2Z1bmN0aW9uIGZpbmlzaCgpe2lmKGZhaWw9PTApb25sb2FkKCk7ZWxzZSBvbmVycm9yKCk7fXBhdGhzLmZvckVhY2goKGZ1bmN0aW9uKHBhdGgpe3ZhciBnZXRSZXF1ZXN0PWZpbGVzLmdldChwYXRoKTtnZXRSZXF1ZXN0Lm9uc3VjY2Vzcz1mdW5jdGlvbiBnZXRSZXF1ZXN0X29uc3VjY2Vzcygpe2lmKEZTLmFuYWx5emVQYXRoKHBhdGgpLmV4aXN0cyl7RlMudW5saW5rKHBhdGgpO31GUy5jcmVhdGVEYXRhRmlsZShQQVRILmRpcm5hbWUocGF0aCksUEFUSC5iYXNlbmFtZShwYXRoKSxnZXRSZXF1ZXN0LnJlc3VsdCx0cnVlLHRydWUsdHJ1ZSk7b2srKztpZihvaytmYWlsPT10b3RhbClmaW5pc2goKTt9O2dldFJlcXVlc3Qub25lcnJvcj1mdW5jdGlvbiBnZXRSZXF1ZXN0X29uZXJyb3IoKXtmYWlsKys7aWYob2srZmFpbD09dG90YWwpZmluaXNoKCk7fTt9KSk7dHJhbnNhY3Rpb24ub25lcnJvcj1vbmVycm9yO307b3BlblJlcXVlc3Qub25lcnJvcj1vbmVycm9yO30pfTt2YXIgU1lTQ0FMTFM9e0RFRkFVTFRfUE9MTE1BU0s6NSxtYXBwaW5nczp7fSx1bWFzazo1MTEsY2FsY3VsYXRlQXQ6KGZ1bmN0aW9uKGRpcmZkLHBhdGgpe2lmKHBhdGhbMF0hPT0iLyIpe3ZhciBkaXI7aWYoZGlyZmQ9PT0tMTAwKXtkaXI9RlMuY3dkKCk7fWVsc2Uge3ZhciBkaXJzdHJlYW09RlMuZ2V0U3RyZWFtKGRpcmZkKTtpZighZGlyc3RyZWFtKXRocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVCQURGKTtkaXI9ZGlyc3RyZWFtLnBhdGg7fXBhdGg9UEFUSC5qb2luMihkaXIscGF0aCk7fXJldHVybiBwYXRofSksZG9TdGF0OihmdW5jdGlvbihmdW5jLHBhdGgsYnVmKXt0cnl7dmFyIHN0YXQ9ZnVuYyhwYXRoKTt9Y2F0Y2goZSl7aWYoZSYmZS5ub2RlJiZQQVRILm5vcm1hbGl6ZShwYXRoKSE9PVBBVEgubm9ybWFsaXplKEZTLmdldFBhdGgoZS5ub2RlKSkpe3JldHVybiAtRVJSTk9fQ09ERVMuRU5PVERJUn10aHJvdyBlfUhFQVAzMltidWY+PjJdPXN0YXQuZGV2O0hFQVAzMltidWYrND4+Ml09MDtIRUFQMzJbYnVmKzg+PjJdPXN0YXQuaW5vO0hFQVAzMltidWYrMTI+PjJdPXN0YXQubW9kZTtIRUFQMzJbYnVmKzE2Pj4yXT1zdGF0Lm5saW5rO0hFQVAzMltidWYrMjA+PjJdPXN0YXQudWlkO0hFQVAzMltidWYrMjQ+PjJdPXN0YXQuZ2lkO0hFQVAzMltidWYrMjg+PjJdPXN0YXQucmRldjtIRUFQMzJbYnVmKzMyPj4yXT0wO0hFQVAzMltidWYrMzY+PjJdPXN0YXQuc2l6ZTtIRUFQMzJbYnVmKzQwPj4yXT00MDk2O0hFQVAzMltidWYrNDQ+PjJdPXN0YXQuYmxvY2tzO0hFQVAzMltidWYrNDg+PjJdPXN0YXQuYXRpbWUuZ2V0VGltZSgpLzFlM3wwO0hFQVAzMltidWYrNTI+PjJdPTA7SEVBUDMyW2J1Zis1Nj4+Ml09c3RhdC5tdGltZS5nZXRUaW1lKCkvMWUzfDA7SEVBUDMyW2J1Zis2MD4+Ml09MDtIRUFQMzJbYnVmKzY0Pj4yXT1zdGF0LmN0aW1lLmdldFRpbWUoKS8xZTN8MDtIRUFQMzJbYnVmKzY4Pj4yXT0wO0hFQVAzMltidWYrNzI+PjJdPXN0YXQuaW5vO3JldHVybiAwfSksZG9Nc3luYzooZnVuY3Rpb24oYWRkcixzdHJlYW0sbGVuLGZsYWdzKXt2YXIgYnVmZmVyPW5ldyBVaW50OEFycmF5KEhFQVBVOC5zdWJhcnJheShhZGRyLGFkZHIrbGVuKSk7RlMubXN5bmMoc3RyZWFtLGJ1ZmZlciwwLGxlbixmbGFncyk7fSksZG9Na2RpcjooZnVuY3Rpb24ocGF0aCxtb2RlKXtwYXRoPVBBVEgubm9ybWFsaXplKHBhdGgpO2lmKHBhdGhbcGF0aC5sZW5ndGgtMV09PT0iLyIpcGF0aD1wYXRoLnN1YnN0cigwLHBhdGgubGVuZ3RoLTEpO0ZTLm1rZGlyKHBhdGgsbW9kZSwwKTtyZXR1cm4gMH0pLGRvTWtub2Q6KGZ1bmN0aW9uKHBhdGgsbW9kZSxkZXYpe3N3aXRjaChtb2RlJjYxNDQwKXtjYXNlIDMyNzY4OmNhc2UgODE5MjpjYXNlIDI0NTc2OmNhc2UgNDA5NjpjYXNlIDQ5MTUyOmJyZWFrO2RlZmF1bHQ6cmV0dXJuIC1FUlJOT19DT0RFUy5FSU5WQUx9RlMubWtub2QocGF0aCxtb2RlLGRldik7cmV0dXJuIDB9KSxkb1JlYWRsaW5rOihmdW5jdGlvbihwYXRoLGJ1ZixidWZzaXplKXtpZihidWZzaXplPD0wKXJldHVybiAtRVJSTk9fQ09ERVMuRUlOVkFMO3ZhciByZXQ9RlMucmVhZGxpbmsocGF0aCk7dmFyIGxlbj1NYXRoLm1pbihidWZzaXplLGxlbmd0aEJ5dGVzVVRGOChyZXQpKTt2YXIgZW5kQ2hhcj1IRUFQOFtidWYrbGVuXTtzdHJpbmdUb1VURjgocmV0LGJ1ZixidWZzaXplKzEpO0hFQVA4W2J1ZitsZW5dPWVuZENoYXI7cmV0dXJuIGxlbn0pLGRvQWNjZXNzOihmdW5jdGlvbihwYXRoLGFtb2RlKXtpZihhbW9kZSZ+Nyl7cmV0dXJuIC1FUlJOT19DT0RFUy5FSU5WQUx9dmFyIG5vZGU7dmFyIGxvb2t1cD1GUy5sb29rdXBQYXRoKHBhdGgse2ZvbGxvdzp0cnVlfSk7bm9kZT1sb29rdXAubm9kZTt2YXIgcGVybXM9IiI7aWYoYW1vZGUmNClwZXJtcys9InIiO2lmKGFtb2RlJjIpcGVybXMrPSJ3IjtpZihhbW9kZSYxKXBlcm1zKz0ieCI7aWYocGVybXMmJkZTLm5vZGVQZXJtaXNzaW9ucyhub2RlLHBlcm1zKSl7cmV0dXJuIC1FUlJOT19DT0RFUy5FQUNDRVN9cmV0dXJuIDB9KSxkb0R1cDooZnVuY3Rpb24ocGF0aCxmbGFncyxzdWdnZXN0RkQpe3ZhciBzdWdnZXN0PUZTLmdldFN0cmVhbShzdWdnZXN0RkQpO2lmKHN1Z2dlc3QpRlMuY2xvc2Uoc3VnZ2VzdCk7cmV0dXJuIEZTLm9wZW4ocGF0aCxmbGFncywwLHN1Z2dlc3RGRCxzdWdnZXN0RkQpLmZkfSksZG9SZWFkdjooZnVuY3Rpb24oc3RyZWFtLGlvdixpb3ZjbnQsb2Zmc2V0KXt2YXIgcmV0PTA7Zm9yKHZhciBpPTA7aTxpb3ZjbnQ7aSsrKXt2YXIgcHRyPUhFQVAzMltpb3YraSo4Pj4yXTt2YXIgbGVuPUhFQVAzMltpb3YrKGkqOCs0KT4+Ml07dmFyIGN1cnI9RlMucmVhZChzdHJlYW0sSEVBUDgscHRyLGxlbixvZmZzZXQpO2lmKGN1cnI8MClyZXR1cm4gLTE7cmV0Kz1jdXJyO2lmKGN1cnI8bGVuKWJyZWFrfXJldHVybiByZXR9KSxkb1dyaXRldjooZnVuY3Rpb24oc3RyZWFtLGlvdixpb3ZjbnQsb2Zmc2V0KXt2YXIgcmV0PTA7Zm9yKHZhciBpPTA7aTxpb3ZjbnQ7aSsrKXt2YXIgcHRyPUhFQVAzMltpb3YraSo4Pj4yXTt2YXIgbGVuPUhFQVAzMltpb3YrKGkqOCs0KT4+Ml07dmFyIGN1cnI9RlMud3JpdGUoc3RyZWFtLEhFQVA4LHB0cixsZW4sb2Zmc2V0KTtpZihjdXJyPDApcmV0dXJuIC0xO3JldCs9Y3Vycjt9cmV0dXJuIHJldH0pLHZhcmFyZ3M6MCxnZXQ6KGZ1bmN0aW9uKHZhcmFyZ3Mpe1NZU0NBTExTLnZhcmFyZ3MrPTQ7dmFyIHJldD1IRUFQMzJbU1lTQ0FMTFMudmFyYXJncy00Pj4yXTtyZXR1cm4gcmV0fSksZ2V0U3RyOihmdW5jdGlvbigpe3ZhciByZXQ9UG9pbnRlcl9zdHJpbmdpZnkoU1lTQ0FMTFMuZ2V0KCkpO3JldHVybiByZXR9KSxnZXRTdHJlYW1Gcm9tRkQ6KGZ1bmN0aW9uKCl7dmFyIHN0cmVhbT1GUy5nZXRTdHJlYW0oU1lTQ0FMTFMuZ2V0KCkpO2lmKCFzdHJlYW0pdGhyb3cgbmV3IEZTLkVycm5vRXJyb3IoRVJSTk9fQ09ERVMuRUJBREYpO3JldHVybiBzdHJlYW19KSxnZXRTb2NrZXRGcm9tRkQ6KGZ1bmN0aW9uKCl7dmFyIHNvY2tldD1TT0NLRlMuZ2V0U29ja2V0KFNZU0NBTExTLmdldCgpKTtpZighc29ja2V0KXRocm93IG5ldyBGUy5FcnJub0Vycm9yKEVSUk5PX0NPREVTLkVCQURGKTtyZXR1cm4gc29ja2V0fSksZ2V0U29ja2V0QWRkcmVzczooZnVuY3Rpb24oYWxsb3dOdWxsKXt2YXIgYWRkcnA9U1lTQ0FMTFMuZ2V0KCksYWRkcmxlbj1TWVNDQUxMUy5nZXQoKTtpZihhbGxvd051bGwmJmFkZHJwPT09MClyZXR1cm4gbnVsbDt2YXIgaW5mbz1fX3JlYWRfc29ja2FkZHIoYWRkcnAsYWRkcmxlbik7aWYoaW5mby5lcnJubyl0aHJvdyBuZXcgRlMuRXJybm9FcnJvcihpbmZvLmVycm5vKTtpbmZvLmFkZHI9RE5TLmxvb2t1cF9hZGRyKGluZm8uYWRkcil8fGluZm8uYWRkcjtyZXR1cm4gaW5mb30pLGdldDY0OihmdW5jdGlvbigpe3ZhciBsb3c9U1lTQ0FMTFMuZ2V0KCksaGlnaD1TWVNDQUxMUy5nZXQoKTtpZihsb3c+PTApYXNzZXJ0KGhpZ2g9PT0wKTtlbHNlIGFzc2VydChoaWdoPT09LTEpO3JldHVybiBsb3d9KSxnZXRaZXJvOihmdW5jdGlvbigpe2Fzc2VydChTWVNDQUxMUy5nZXQoKT09PTApO30pfTtmdW5jdGlvbiBfX19zeXNjYWxsMTQwKHdoaWNoLHZhcmFyZ3Mpe1NZU0NBTExTLnZhcmFyZ3M9dmFyYXJnczt0cnl7dmFyIHN0cmVhbT1TWVNDQUxMUy5nZXRTdHJlYW1Gcm9tRkQoKSxvZmZzZXRfaGlnaD1TWVNDQUxMUy5nZXQoKSxvZmZzZXRfbG93PVNZU0NBTExTLmdldCgpLHJlc3VsdD1TWVNDQUxMUy5nZXQoKSx3aGVuY2U9U1lTQ0FMTFMuZ2V0KCk7dmFyIG9mZnNldD1vZmZzZXRfbG93O0ZTLmxsc2VlayhzdHJlYW0sb2Zmc2V0LHdoZW5jZSk7SEVBUDMyW3Jlc3VsdD4+Ml09c3RyZWFtLnBvc2l0aW9uO2lmKHN0cmVhbS5nZXRkZW50cyYmb2Zmc2V0PT09MCYmd2hlbmNlPT09MClzdHJlYW0uZ2V0ZGVudHM9bnVsbDtyZXR1cm4gMH1jYXRjaChlKXtpZih0eXBlb2YgRlM9PT0idW5kZWZpbmVkInx8IShlIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcikpYWJvcnQoZSk7cmV0dXJuIC1lLmVycm5vfX1mdW5jdGlvbiBfX19zeXNjYWxsMTQ1KHdoaWNoLHZhcmFyZ3Mpe1NZU0NBTExTLnZhcmFyZ3M9dmFyYXJnczt0cnl7dmFyIHN0cmVhbT1TWVNDQUxMUy5nZXRTdHJlYW1Gcm9tRkQoKSxpb3Y9U1lTQ0FMTFMuZ2V0KCksaW92Y250PVNZU0NBTExTLmdldCgpO3JldHVybiBTWVNDQUxMUy5kb1JlYWR2KHN0cmVhbSxpb3YsaW92Y250KX1jYXRjaChlKXtpZih0eXBlb2YgRlM9PT0idW5kZWZpbmVkInx8IShlIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcikpYWJvcnQoZSk7cmV0dXJuIC1lLmVycm5vfX1mdW5jdGlvbiBfX19zeXNjYWxsMTQ2KHdoaWNoLHZhcmFyZ3Mpe1NZU0NBTExTLnZhcmFyZ3M9dmFyYXJnczt0cnl7dmFyIHN0cmVhbT1TWVNDQUxMUy5nZXRTdHJlYW1Gcm9tRkQoKSxpb3Y9U1lTQ0FMTFMuZ2V0KCksaW92Y250PVNZU0NBTExTLmdldCgpO3JldHVybiBTWVNDQUxMUy5kb1dyaXRldihzdHJlYW0saW92LGlvdmNudCl9Y2F0Y2goZSl7aWYodHlwZW9mIEZTPT09InVuZGVmaW5lZCJ8fCEoZSBpbnN0YW5jZW9mIEZTLkVycm5vRXJyb3IpKWFib3J0KGUpO3JldHVybiAtZS5lcnJub319ZnVuY3Rpb24gX19fc3lzY2FsbDE4Myh3aGljaCx2YXJhcmdzKXtTWVNDQUxMUy52YXJhcmdzPXZhcmFyZ3M7dHJ5e3ZhciBidWY9U1lTQ0FMTFMuZ2V0KCksc2l6ZT1TWVNDQUxMUy5nZXQoKTtpZihzaXplPT09MClyZXR1cm4gLUVSUk5PX0NPREVTLkVJTlZBTDt2YXIgY3dkPUZTLmN3ZCgpO3ZhciBjd2RMZW5ndGhJbkJ5dGVzPWxlbmd0aEJ5dGVzVVRGOChjd2QpO2lmKHNpemU8Y3dkTGVuZ3RoSW5CeXRlcysxKXJldHVybiAtRVJSTk9fQ09ERVMuRVJBTkdFO3N0cmluZ1RvVVRGOChjd2QsYnVmLHNpemUpO3JldHVybiBidWZ9Y2F0Y2goZSl7aWYodHlwZW9mIEZTPT09InVuZGVmaW5lZCJ8fCEoZSBpbnN0YW5jZW9mIEZTLkVycm5vRXJyb3IpKWFib3J0KGUpO3JldHVybiAtZS5lcnJub319ZnVuY3Rpb24gX19fc3lzY2FsbDE5OCh3aGljaCx2YXJhcmdzKXtTWVNDQUxMUy52YXJhcmdzPXZhcmFyZ3M7dHJ5e3ZhciBwYXRoPVNZU0NBTExTLmdldFN0cigpLG93bmVyPVNZU0NBTExTLmdldCgpLGdyb3VwPVNZU0NBTExTLmdldCgpO0ZTLmNob3duKHBhdGgsb3duZXIsZ3JvdXApO3JldHVybiAwfWNhdGNoKGUpe2lmKHR5cGVvZiBGUz09PSJ1bmRlZmluZWQifHwhKGUgaW5zdGFuY2VvZiBGUy5FcnJub0Vycm9yKSlhYm9ydChlKTtyZXR1cm4gLWUuZXJybm99fXZhciBQUk9DSU5GTz17cHBpZDoxLHBpZDo0MixzaWQ6NDIscGdpZDo0Mn07ZnVuY3Rpb24gX19fc3lzY2FsbDIwKHdoaWNoLHZhcmFyZ3Mpe1NZU0NBTExTLnZhcmFyZ3M9dmFyYXJnczt0cnl7cmV0dXJuIFBST0NJTkZPLnBpZH1jYXRjaChlKXtpZih0eXBlb2YgRlM9PT0idW5kZWZpbmVkInx8IShlIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcikpYWJvcnQoZSk7cmV0dXJuIC1lLmVycm5vfX1mdW5jdGlvbiBfX19zeXNjYWxsNih3aGljaCx2YXJhcmdzKXtTWVNDQUxMUy52YXJhcmdzPXZhcmFyZ3M7dHJ5e3ZhciBzdHJlYW09U1lTQ0FMTFMuZ2V0U3RyZWFtRnJvbUZEKCk7RlMuY2xvc2Uoc3RyZWFtKTtyZXR1cm4gMH1jYXRjaChlKXtpZih0eXBlb2YgRlM9PT0idW5kZWZpbmVkInx8IShlIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcikpYWJvcnQoZSk7cmV0dXJuIC1lLmVycm5vfX1mdW5jdGlvbiBfX19zeXNjYWxsNjAod2hpY2gsdmFyYXJncyl7U1lTQ0FMTFMudmFyYXJncz12YXJhcmdzO3RyeXt2YXIgbWFzaz1TWVNDQUxMUy5nZXQoKTt2YXIgb2xkPVNZU0NBTExTLnVtYXNrO1NZU0NBTExTLnVtYXNrPW1hc2s7cmV0dXJuIG9sZH1jYXRjaChlKXtpZih0eXBlb2YgRlM9PT0idW5kZWZpbmVkInx8IShlIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcikpYWJvcnQoZSk7cmV0dXJuIC1lLmVycm5vfX1mdW5jdGlvbiBfX19zeXNjYWxsODMod2hpY2gsdmFyYXJncyl7U1lTQ0FMTFMudmFyYXJncz12YXJhcmdzO3RyeXt2YXIgdGFyZ2V0PVNZU0NBTExTLmdldFN0cigpLGxpbmtwYXRoPVNZU0NBTExTLmdldFN0cigpO0ZTLnN5bWxpbmsodGFyZ2V0LGxpbmtwYXRoKTtyZXR1cm4gMH1jYXRjaChlKXtpZih0eXBlb2YgRlM9PT0idW5kZWZpbmVkInx8IShlIGluc3RhbmNlb2YgRlMuRXJybm9FcnJvcikpYWJvcnQoZSk7cmV0dXJuIC1lLmVycm5vfX1mdW5jdGlvbiBfX19zeXNjYWxsOTEod2hpY2gsdmFyYXJncyl7U1lTQ0FMTFMudmFyYXJncz12YXJhcmdzO3RyeXt2YXIgYWRkcj1TWVNDQUxMUy5nZXQoKSxsZW49U1lTQ0FMTFMuZ2V0KCk7dmFyIGluZm89U1lTQ0FMTFMubWFwcGluZ3NbYWRkcl07aWYoIWluZm8pcmV0dXJuIDA7aWYobGVuPT09aW5mby5sZW4pe3ZhciBzdHJlYW09RlMuZ2V0U3RyZWFtKGluZm8uZmQpO1NZU0NBTExTLmRvTXN5bmMoYWRkcixzdHJlYW0sbGVuLGluZm8uZmxhZ3MpO0ZTLm11bm1hcChzdHJlYW0pO1NZU0NBTExTLm1hcHBpbmdzW2FkZHJdPW51bGw7aWYoaW5mby5hbGxvY2F0ZWQpe19mcmVlKGluZm8ubWFsbG9jKTt9fXJldHVybiAwfWNhdGNoKGUpe2lmKHR5cGVvZiBGUz09PSJ1bmRlZmluZWQifHwhKGUgaW5zdGFuY2VvZiBGUy5FcnJub0Vycm9yKSlhYm9ydChlKTtyZXR1cm4gLWUuZXJybm99fWZ1bmN0aW9uIF9fX3VubG9jaygpe312YXIgc3RydWN0UmVnaXN0cmF0aW9ucz17fTtmdW5jdGlvbiBydW5EZXN0cnVjdG9ycyhkZXN0cnVjdG9ycyl7d2hpbGUoZGVzdHJ1Y3RvcnMubGVuZ3RoKXt2YXIgcHRyPWRlc3RydWN0b3JzLnBvcCgpO3ZhciBkZWw9ZGVzdHJ1Y3RvcnMucG9wKCk7ZGVsKHB0cik7fX1mdW5jdGlvbiBzaW1wbGVSZWFkVmFsdWVGcm9tUG9pbnRlcihwb2ludGVyKXtyZXR1cm4gdGhpc1siZnJvbVdpcmVUeXBlIl0oSEVBUFUzMltwb2ludGVyPj4yXSl9dmFyIGF3YWl0aW5nRGVwZW5kZW5jaWVzPXt9O3ZhciByZWdpc3RlcmVkVHlwZXM9e307dmFyIHR5cGVEZXBlbmRlbmNpZXM9e307dmFyIGNoYXJfMD00ODt2YXIgY2hhcl85PTU3O2Z1bmN0aW9uIG1ha2VMZWdhbEZ1bmN0aW9uTmFtZShuYW1lKXtpZih1bmRlZmluZWQ9PT1uYW1lKXtyZXR1cm4gIl91bmtub3duIn1uYW1lPW5hbWUucmVwbGFjZSgvW15hLXpBLVowLTlfXS9nLCIkIik7dmFyIGY9bmFtZS5jaGFyQ29kZUF0KDApO2lmKGY+PWNoYXJfMCYmZjw9Y2hhcl85KXtyZXR1cm4gIl8iK25hbWV9ZWxzZSB7cmV0dXJuIG5hbWV9fWZ1bmN0aW9uIGNyZWF0ZU5hbWVkRnVuY3Rpb24obmFtZSxib2R5KXtuYW1lPW1ha2VMZWdhbEZ1bmN0aW9uTmFtZShuYW1lKTtyZXR1cm4gKG5ldyBGdW5jdGlvbigiYm9keSIsInJldHVybiBmdW5jdGlvbiAiK25hbWUrIigpIHtcbiIrJyAgICAidXNlIHN0cmljdCI7JysiICAgIHJldHVybiBib2R5LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4iKyJ9O1xuIikpKGJvZHkpfWZ1bmN0aW9uIGV4dGVuZEVycm9yKGJhc2VFcnJvclR5cGUsZXJyb3JOYW1lKXt2YXIgZXJyb3JDbGFzcz1jcmVhdGVOYW1lZEZ1bmN0aW9uKGVycm9yTmFtZSwoZnVuY3Rpb24obWVzc2FnZSl7dGhpcy5uYW1lPWVycm9yTmFtZTt0aGlzLm1lc3NhZ2U9bWVzc2FnZTt2YXIgc3RhY2s9KG5ldyBFcnJvcihtZXNzYWdlKSkuc3RhY2s7aWYoc3RhY2shPT11bmRlZmluZWQpe3RoaXMuc3RhY2s9dGhpcy50b1N0cmluZygpKyJcbiIrc3RhY2sucmVwbGFjZSgvXkVycm9yKDpbXlxuXSopP1xuLywiIik7fX0pKTtlcnJvckNsYXNzLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGJhc2VFcnJvclR5cGUucHJvdG90eXBlKTtlcnJvckNsYXNzLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lcnJvckNsYXNzO2Vycm9yQ2xhc3MucHJvdG90eXBlLnRvU3RyaW5nPShmdW5jdGlvbigpe2lmKHRoaXMubWVzc2FnZT09PXVuZGVmaW5lZCl7cmV0dXJuIHRoaXMubmFtZX1lbHNlIHtyZXR1cm4gdGhpcy5uYW1lKyI6ICIrdGhpcy5tZXNzYWdlfX0pO3JldHVybiBlcnJvckNsYXNzfXZhciBJbnRlcm5hbEVycm9yPXVuZGVmaW5lZDtmdW5jdGlvbiB0aHJvd0ludGVybmFsRXJyb3IobWVzc2FnZSl7dGhyb3cgbmV3IEludGVybmFsRXJyb3IobWVzc2FnZSl9ZnVuY3Rpb24gd2hlbkRlcGVuZGVudFR5cGVzQXJlUmVzb2x2ZWQobXlUeXBlcyxkZXBlbmRlbnRUeXBlcyxnZXRUeXBlQ29udmVydGVycyl7bXlUeXBlcy5mb3JFYWNoKChmdW5jdGlvbih0eXBlKXt0eXBlRGVwZW5kZW5jaWVzW3R5cGVdPWRlcGVuZGVudFR5cGVzO30pKTtmdW5jdGlvbiBvbkNvbXBsZXRlKHR5cGVDb252ZXJ0ZXJzKXt2YXIgbXlUeXBlQ29udmVydGVycz1nZXRUeXBlQ29udmVydGVycyh0eXBlQ29udmVydGVycyk7aWYobXlUeXBlQ29udmVydGVycy5sZW5ndGghPT1teVR5cGVzLmxlbmd0aCl7dGhyb3dJbnRlcm5hbEVycm9yKCJNaXNtYXRjaGVkIHR5cGUgY29udmVydGVyIGNvdW50Iik7fWZvcih2YXIgaT0wO2k8bXlUeXBlcy5sZW5ndGg7KytpKXtyZWdpc3RlclR5cGUobXlUeXBlc1tpXSxteVR5cGVDb252ZXJ0ZXJzW2ldKTt9fXZhciB0eXBlQ29udmVydGVycz1uZXcgQXJyYXkoZGVwZW5kZW50VHlwZXMubGVuZ3RoKTt2YXIgdW5yZWdpc3RlcmVkVHlwZXM9W107dmFyIHJlZ2lzdGVyZWQ9MDtkZXBlbmRlbnRUeXBlcy5mb3JFYWNoKChmdW5jdGlvbihkdCxpKXtpZihyZWdpc3RlcmVkVHlwZXMuaGFzT3duUHJvcGVydHkoZHQpKXt0eXBlQ29udmVydGVyc1tpXT1yZWdpc3RlcmVkVHlwZXNbZHRdO31lbHNlIHt1bnJlZ2lzdGVyZWRUeXBlcy5wdXNoKGR0KTtpZighYXdhaXRpbmdEZXBlbmRlbmNpZXMuaGFzT3duUHJvcGVydHkoZHQpKXthd2FpdGluZ0RlcGVuZGVuY2llc1tkdF09W107fWF3YWl0aW5nRGVwZW5kZW5jaWVzW2R0XS5wdXNoKChmdW5jdGlvbigpe3R5cGVDb252ZXJ0ZXJzW2ldPXJlZ2lzdGVyZWRUeXBlc1tkdF07KytyZWdpc3RlcmVkO2lmKHJlZ2lzdGVyZWQ9PT11bnJlZ2lzdGVyZWRUeXBlcy5sZW5ndGgpe29uQ29tcGxldGUodHlwZUNvbnZlcnRlcnMpO319KSk7fX0pKTtpZigwPT09dW5yZWdpc3RlcmVkVHlwZXMubGVuZ3RoKXtvbkNvbXBsZXRlKHR5cGVDb252ZXJ0ZXJzKTt9fWZ1bmN0aW9uIF9fZW1iaW5kX2ZpbmFsaXplX3ZhbHVlX29iamVjdChzdHJ1Y3RUeXBlKXt2YXIgcmVnPXN0cnVjdFJlZ2lzdHJhdGlvbnNbc3RydWN0VHlwZV07ZGVsZXRlIHN0cnVjdFJlZ2lzdHJhdGlvbnNbc3RydWN0VHlwZV07dmFyIHJhd0NvbnN0cnVjdG9yPXJlZy5yYXdDb25zdHJ1Y3Rvcjt2YXIgcmF3RGVzdHJ1Y3Rvcj1yZWcucmF3RGVzdHJ1Y3Rvcjt2YXIgZmllbGRSZWNvcmRzPXJlZy5maWVsZHM7dmFyIGZpZWxkVHlwZXM9ZmllbGRSZWNvcmRzLm1hcCgoZnVuY3Rpb24oZmllbGQpe3JldHVybiBmaWVsZC5nZXR0ZXJSZXR1cm5UeXBlfSkpLmNvbmNhdChmaWVsZFJlY29yZHMubWFwKChmdW5jdGlvbihmaWVsZCl7cmV0dXJuIGZpZWxkLnNldHRlckFyZ3VtZW50VHlwZX0pKSk7d2hlbkRlcGVuZGVudFR5cGVzQXJlUmVzb2x2ZWQoW3N0cnVjdFR5cGVdLGZpZWxkVHlwZXMsKGZ1bmN0aW9uKGZpZWxkVHlwZXMpe3ZhciBmaWVsZHM9e307ZmllbGRSZWNvcmRzLmZvckVhY2goKGZ1bmN0aW9uKGZpZWxkLGkpe3ZhciBmaWVsZE5hbWU9ZmllbGQuZmllbGROYW1lO3ZhciBnZXR0ZXJSZXR1cm5UeXBlPWZpZWxkVHlwZXNbaV07dmFyIGdldHRlcj1maWVsZC5nZXR0ZXI7dmFyIGdldHRlckNvbnRleHQ9ZmllbGQuZ2V0dGVyQ29udGV4dDt2YXIgc2V0dGVyQXJndW1lbnRUeXBlPWZpZWxkVHlwZXNbaStmaWVsZFJlY29yZHMubGVuZ3RoXTt2YXIgc2V0dGVyPWZpZWxkLnNldHRlcjt2YXIgc2V0dGVyQ29udGV4dD1maWVsZC5zZXR0ZXJDb250ZXh0O2ZpZWxkc1tmaWVsZE5hbWVdPXtyZWFkOihmdW5jdGlvbihwdHIpe3JldHVybiBnZXR0ZXJSZXR1cm5UeXBlWyJmcm9tV2lyZVR5cGUiXShnZXR0ZXIoZ2V0dGVyQ29udGV4dCxwdHIpKX0pLHdyaXRlOihmdW5jdGlvbihwdHIsbyl7dmFyIGRlc3RydWN0b3JzPVtdO3NldHRlcihzZXR0ZXJDb250ZXh0LHB0cixzZXR0ZXJBcmd1bWVudFR5cGVbInRvV2lyZVR5cGUiXShkZXN0cnVjdG9ycyxvKSk7cnVuRGVzdHJ1Y3RvcnMoZGVzdHJ1Y3RvcnMpO30pfTt9KSk7cmV0dXJuIFt7bmFtZTpyZWcubmFtZSwiZnJvbVdpcmVUeXBlIjooZnVuY3Rpb24ocHRyKXt2YXIgcnY9e307Zm9yKHZhciBpIGluIGZpZWxkcyl7cnZbaV09ZmllbGRzW2ldLnJlYWQocHRyKTt9cmF3RGVzdHJ1Y3RvcihwdHIpO3JldHVybiBydn0pLCJ0b1dpcmVUeXBlIjooZnVuY3Rpb24oZGVzdHJ1Y3RvcnMsbyl7Zm9yKHZhciBmaWVsZE5hbWUgaW4gZmllbGRzKXtpZighKGZpZWxkTmFtZSBpbiBvKSl7dGhyb3cgbmV3IFR5cGVFcnJvcigiTWlzc2luZyBmaWVsZCIpfX12YXIgcHRyPXJhd0NvbnN0cnVjdG9yKCk7Zm9yKGZpZWxkTmFtZSBpbiBmaWVsZHMpe2ZpZWxkc1tmaWVsZE5hbWVdLndyaXRlKHB0cixvW2ZpZWxkTmFtZV0pO31pZihkZXN0cnVjdG9ycyE9PW51bGwpe2Rlc3RydWN0b3JzLnB1c2gocmF3RGVzdHJ1Y3RvcixwdHIpO31yZXR1cm4gcHRyfSksImFyZ1BhY2tBZHZhbmNlIjo4LCJyZWFkVmFsdWVGcm9tUG9pbnRlciI6c2ltcGxlUmVhZFZhbHVlRnJvbVBvaW50ZXIsZGVzdHJ1Y3RvckZ1bmN0aW9uOnJhd0Rlc3RydWN0b3J9XX0pKTt9ZnVuY3Rpb24gZ2V0U2hpZnRGcm9tU2l6ZShzaXplKXtzd2l0Y2goc2l6ZSl7Y2FzZSAxOnJldHVybiAwO2Nhc2UgMjpyZXR1cm4gMTtjYXNlIDQ6cmV0dXJuIDI7Y2FzZSA4OnJldHVybiAzO2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biB0eXBlIHNpemU6ICIrc2l6ZSl9fWZ1bmN0aW9uIGVtYmluZF9pbml0X2NoYXJDb2Rlcygpe3ZhciBjb2Rlcz1uZXcgQXJyYXkoMjU2KTtmb3IodmFyIGk9MDtpPDI1NjsrK2kpe2NvZGVzW2ldPVN0cmluZy5mcm9tQ2hhckNvZGUoaSk7fWVtYmluZF9jaGFyQ29kZXM9Y29kZXM7fXZhciBlbWJpbmRfY2hhckNvZGVzPXVuZGVmaW5lZDtmdW5jdGlvbiByZWFkTGF0aW4xU3RyaW5nKHB0cil7dmFyIHJldD0iIjt2YXIgYz1wdHI7d2hpbGUoSEVBUFU4W2NdKXtyZXQrPWVtYmluZF9jaGFyQ29kZXNbSEVBUFU4W2MrK11dO31yZXR1cm4gcmV0fXZhciBCaW5kaW5nRXJyb3I9dW5kZWZpbmVkO2Z1bmN0aW9uIHRocm93QmluZGluZ0Vycm9yKG1lc3NhZ2Upe3Rocm93IG5ldyBCaW5kaW5nRXJyb3IobWVzc2FnZSl9ZnVuY3Rpb24gcmVnaXN0ZXJUeXBlKHJhd1R5cGUscmVnaXN0ZXJlZEluc3RhbmNlLG9wdGlvbnMpe29wdGlvbnM9b3B0aW9uc3x8e307aWYoISgiYXJnUGFja0FkdmFuY2UiaW4gcmVnaXN0ZXJlZEluc3RhbmNlKSl7dGhyb3cgbmV3IFR5cGVFcnJvcigicmVnaXN0ZXJUeXBlIHJlZ2lzdGVyZWRJbnN0YW5jZSByZXF1aXJlcyBhcmdQYWNrQWR2YW5jZSIpfXZhciBuYW1lPXJlZ2lzdGVyZWRJbnN0YW5jZS5uYW1lO2lmKCFyYXdUeXBlKXt0aHJvd0JpbmRpbmdFcnJvcigndHlwZSAiJytuYW1lKyciIG11c3QgaGF2ZSBhIHBvc2l0aXZlIGludGVnZXIgdHlwZWlkIHBvaW50ZXInKTt9aWYocmVnaXN0ZXJlZFR5cGVzLmhhc093blByb3BlcnR5KHJhd1R5cGUpKXtpZihvcHRpb25zLmlnbm9yZUR1cGxpY2F0ZVJlZ2lzdHJhdGlvbnMpe3JldHVybn1lbHNlIHt0aHJvd0JpbmRpbmdFcnJvcigiQ2Fubm90IHJlZ2lzdGVyIHR5cGUgJyIrbmFtZSsiJyB0d2ljZSIpO319cmVnaXN0ZXJlZFR5cGVzW3Jhd1R5cGVdPXJlZ2lzdGVyZWRJbnN0YW5jZTtkZWxldGUgdHlwZURlcGVuZGVuY2llc1tyYXdUeXBlXTtpZihhd2FpdGluZ0RlcGVuZGVuY2llcy5oYXNPd25Qcm9wZXJ0eShyYXdUeXBlKSl7dmFyIGNhbGxiYWNrcz1hd2FpdGluZ0RlcGVuZGVuY2llc1tyYXdUeXBlXTtkZWxldGUgYXdhaXRpbmdEZXBlbmRlbmNpZXNbcmF3VHlwZV07Y2FsbGJhY2tzLmZvckVhY2goKGZ1bmN0aW9uKGNiKXtjYigpO30pKTt9fWZ1bmN0aW9uIF9fZW1iaW5kX3JlZ2lzdGVyX2Jvb2wocmF3VHlwZSxuYW1lLHNpemUsdHJ1ZVZhbHVlLGZhbHNlVmFsdWUpe3ZhciBzaGlmdD1nZXRTaGlmdEZyb21TaXplKHNpemUpO25hbWU9cmVhZExhdGluMVN0cmluZyhuYW1lKTtyZWdpc3RlclR5cGUocmF3VHlwZSx7bmFtZTpuYW1lLCJmcm9tV2lyZVR5cGUiOihmdW5jdGlvbih3dCl7cmV0dXJuICEhd3R9KSwidG9XaXJlVHlwZSI6KGZ1bmN0aW9uKGRlc3RydWN0b3JzLG8pe3JldHVybiBvP3RydWVWYWx1ZTpmYWxzZVZhbHVlfSksImFyZ1BhY2tBZHZhbmNlIjo4LCJyZWFkVmFsdWVGcm9tUG9pbnRlciI6KGZ1bmN0aW9uKHBvaW50ZXIpe3ZhciBoZWFwO2lmKHNpemU9PT0xKXtoZWFwPUhFQVA4O31lbHNlIGlmKHNpemU9PT0yKXtoZWFwPUhFQVAxNjt9ZWxzZSBpZihzaXplPT09NCl7aGVhcD1IRUFQMzI7fWVsc2Uge3Rocm93IG5ldyBUeXBlRXJyb3IoIlVua25vd24gYm9vbGVhbiB0eXBlIHNpemU6ICIrbmFtZSl9cmV0dXJuIHRoaXNbImZyb21XaXJlVHlwZSJdKGhlYXBbcG9pbnRlcj4+c2hpZnRdKX0pLGRlc3RydWN0b3JGdW5jdGlvbjpudWxsfSk7fWZ1bmN0aW9uIENsYXNzSGFuZGxlX2lzQWxpYXNPZihvdGhlcil7aWYoISh0aGlzIGluc3RhbmNlb2YgQ2xhc3NIYW5kbGUpKXtyZXR1cm4gZmFsc2V9aWYoIShvdGhlciBpbnN0YW5jZW9mIENsYXNzSGFuZGxlKSl7cmV0dXJuIGZhbHNlfXZhciBsZWZ0Q2xhc3M9dGhpcy4kJC5wdHJUeXBlLnJlZ2lzdGVyZWRDbGFzczt2YXIgbGVmdD10aGlzLiQkLnB0cjt2YXIgcmlnaHRDbGFzcz1vdGhlci4kJC5wdHJUeXBlLnJlZ2lzdGVyZWRDbGFzczt2YXIgcmlnaHQ9b3RoZXIuJCQucHRyO3doaWxlKGxlZnRDbGFzcy5iYXNlQ2xhc3Mpe2xlZnQ9bGVmdENsYXNzLnVwY2FzdChsZWZ0KTtsZWZ0Q2xhc3M9bGVmdENsYXNzLmJhc2VDbGFzczt9d2hpbGUocmlnaHRDbGFzcy5iYXNlQ2xhc3Mpe3JpZ2h0PXJpZ2h0Q2xhc3MudXBjYXN0KHJpZ2h0KTtyaWdodENsYXNzPXJpZ2h0Q2xhc3MuYmFzZUNsYXNzO31yZXR1cm4gbGVmdENsYXNzPT09cmlnaHRDbGFzcyYmbGVmdD09PXJpZ2h0fWZ1bmN0aW9uIHNoYWxsb3dDb3B5SW50ZXJuYWxQb2ludGVyKG8pe3JldHVybiB7Y291bnQ6by5jb3VudCxkZWxldGVTY2hlZHVsZWQ6by5kZWxldGVTY2hlZHVsZWQscHJlc2VydmVQb2ludGVyT25EZWxldGU6by5wcmVzZXJ2ZVBvaW50ZXJPbkRlbGV0ZSxwdHI6by5wdHIscHRyVHlwZTpvLnB0clR5cGUsc21hcnRQdHI6by5zbWFydFB0cixzbWFydFB0clR5cGU6by5zbWFydFB0clR5cGV9fWZ1bmN0aW9uIHRocm93SW5zdGFuY2VBbHJlYWR5RGVsZXRlZChvYmope2Z1bmN0aW9uIGdldEluc3RhbmNlVHlwZU5hbWUoaGFuZGxlKXtyZXR1cm4gaGFuZGxlLiQkLnB0clR5cGUucmVnaXN0ZXJlZENsYXNzLm5hbWV9dGhyb3dCaW5kaW5nRXJyb3IoZ2V0SW5zdGFuY2VUeXBlTmFtZShvYmopKyIgaW5zdGFuY2UgYWxyZWFkeSBkZWxldGVkIik7fWZ1bmN0aW9uIENsYXNzSGFuZGxlX2Nsb25lKCl7aWYoIXRoaXMuJCQucHRyKXt0aHJvd0luc3RhbmNlQWxyZWFkeURlbGV0ZWQodGhpcyk7fWlmKHRoaXMuJCQucHJlc2VydmVQb2ludGVyT25EZWxldGUpe3RoaXMuJCQuY291bnQudmFsdWUrPTE7cmV0dXJuIHRoaXN9ZWxzZSB7dmFyIGNsb25lPU9iamVjdC5jcmVhdGUoT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLHskJDp7dmFsdWU6c2hhbGxvd0NvcHlJbnRlcm5hbFBvaW50ZXIodGhpcy4kJCl9fSk7Y2xvbmUuJCQuY291bnQudmFsdWUrPTE7Y2xvbmUuJCQuZGVsZXRlU2NoZWR1bGVkPWZhbHNlO3JldHVybiBjbG9uZX19ZnVuY3Rpb24gcnVuRGVzdHJ1Y3RvcihoYW5kbGUpe3ZhciAkJD1oYW5kbGUuJCQ7aWYoJCQuc21hcnRQdHIpeyQkLnNtYXJ0UHRyVHlwZS5yYXdEZXN0cnVjdG9yKCQkLnNtYXJ0UHRyKTt9ZWxzZSB7JCQucHRyVHlwZS5yZWdpc3RlcmVkQ2xhc3MucmF3RGVzdHJ1Y3RvcigkJC5wdHIpO319ZnVuY3Rpb24gQ2xhc3NIYW5kbGVfZGVsZXRlKCl7aWYoIXRoaXMuJCQucHRyKXt0aHJvd0luc3RhbmNlQWxyZWFkeURlbGV0ZWQodGhpcyk7fWlmKHRoaXMuJCQuZGVsZXRlU2NoZWR1bGVkJiYhdGhpcy4kJC5wcmVzZXJ2ZVBvaW50ZXJPbkRlbGV0ZSl7dGhyb3dCaW5kaW5nRXJyb3IoIk9iamVjdCBhbHJlYWR5IHNjaGVkdWxlZCBmb3IgZGVsZXRpb24iKTt9dGhpcy4kJC5jb3VudC52YWx1ZS09MTt2YXIgdG9EZWxldGU9MD09PXRoaXMuJCQuY291bnQudmFsdWU7aWYodG9EZWxldGUpe3J1bkRlc3RydWN0b3IodGhpcyk7fWlmKCF0aGlzLiQkLnByZXNlcnZlUG9pbnRlck9uRGVsZXRlKXt0aGlzLiQkLnNtYXJ0UHRyPXVuZGVmaW5lZDt0aGlzLiQkLnB0cj11bmRlZmluZWQ7fX1mdW5jdGlvbiBDbGFzc0hhbmRsZV9pc0RlbGV0ZWQoKXtyZXR1cm4gIXRoaXMuJCQucHRyfXZhciBkZWxheUZ1bmN0aW9uPXVuZGVmaW5lZDt2YXIgZGVsZXRpb25RdWV1ZT1bXTtmdW5jdGlvbiBmbHVzaFBlbmRpbmdEZWxldGVzKCl7d2hpbGUoZGVsZXRpb25RdWV1ZS5sZW5ndGgpe3ZhciBvYmo9ZGVsZXRpb25RdWV1ZS5wb3AoKTtvYmouJCQuZGVsZXRlU2NoZWR1bGVkPWZhbHNlO29ialsiZGVsZXRlIl0oKTt9fWZ1bmN0aW9uIENsYXNzSGFuZGxlX2RlbGV0ZUxhdGVyKCl7aWYoIXRoaXMuJCQucHRyKXt0aHJvd0luc3RhbmNlQWxyZWFkeURlbGV0ZWQodGhpcyk7fWlmKHRoaXMuJCQuZGVsZXRlU2NoZWR1bGVkJiYhdGhpcy4kJC5wcmVzZXJ2ZVBvaW50ZXJPbkRlbGV0ZSl7dGhyb3dCaW5kaW5nRXJyb3IoIk9iamVjdCBhbHJlYWR5IHNjaGVkdWxlZCBmb3IgZGVsZXRpb24iKTt9ZGVsZXRpb25RdWV1ZS5wdXNoKHRoaXMpO2lmKGRlbGV0aW9uUXVldWUubGVuZ3RoPT09MSYmZGVsYXlGdW5jdGlvbil7ZGVsYXlGdW5jdGlvbihmbHVzaFBlbmRpbmdEZWxldGVzKTt9dGhpcy4kJC5kZWxldGVTY2hlZHVsZWQ9dHJ1ZTtyZXR1cm4gdGhpc31mdW5jdGlvbiBpbml0X0NsYXNzSGFuZGxlKCl7Q2xhc3NIYW5kbGUucHJvdG90eXBlWyJpc0FsaWFzT2YiXT1DbGFzc0hhbmRsZV9pc0FsaWFzT2Y7Q2xhc3NIYW5kbGUucHJvdG90eXBlWyJjbG9uZSJdPUNsYXNzSGFuZGxlX2Nsb25lO0NsYXNzSGFuZGxlLnByb3RvdHlwZVsiZGVsZXRlIl09Q2xhc3NIYW5kbGVfZGVsZXRlO0NsYXNzSGFuZGxlLnByb3RvdHlwZVsiaXNEZWxldGVkIl09Q2xhc3NIYW5kbGVfaXNEZWxldGVkO0NsYXNzSGFuZGxlLnByb3RvdHlwZVsiZGVsZXRlTGF0ZXIiXT1DbGFzc0hhbmRsZV9kZWxldGVMYXRlcjt9ZnVuY3Rpb24gQ2xhc3NIYW5kbGUoKXt9dmFyIHJlZ2lzdGVyZWRQb2ludGVycz17fTtmdW5jdGlvbiBlbnN1cmVPdmVybG9hZFRhYmxlKHByb3RvLG1ldGhvZE5hbWUsaHVtYW5OYW1lKXtpZih1bmRlZmluZWQ9PT1wcm90b1ttZXRob2ROYW1lXS5vdmVybG9hZFRhYmxlKXt2YXIgcHJldkZ1bmM9cHJvdG9bbWV0aG9kTmFtZV07cHJvdG9bbWV0aG9kTmFtZV09KGZ1bmN0aW9uKCl7aWYoIXByb3RvW21ldGhvZE5hbWVdLm92ZXJsb2FkVGFibGUuaGFzT3duUHJvcGVydHkoYXJndW1lbnRzLmxlbmd0aCkpe3Rocm93QmluZGluZ0Vycm9yKCJGdW5jdGlvbiAnIitodW1hbk5hbWUrIicgY2FsbGVkIHdpdGggYW4gaW52YWxpZCBudW1iZXIgb2YgYXJndW1lbnRzICgiK2FyZ3VtZW50cy5sZW5ndGgrIikgLSBleHBlY3RzIG9uZSBvZiAoIitwcm90b1ttZXRob2ROYW1lXS5vdmVybG9hZFRhYmxlKyIpISIpO31yZXR1cm4gcHJvdG9bbWV0aG9kTmFtZV0ub3ZlcmxvYWRUYWJsZVthcmd1bWVudHMubGVuZ3RoXS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KTtwcm90b1ttZXRob2ROYW1lXS5vdmVybG9hZFRhYmxlPVtdO3Byb3RvW21ldGhvZE5hbWVdLm92ZXJsb2FkVGFibGVbcHJldkZ1bmMuYXJnQ291bnRdPXByZXZGdW5jO319ZnVuY3Rpb24gZXhwb3NlUHVibGljU3ltYm9sKG5hbWUsdmFsdWUsbnVtQXJndW1lbnRzKXtpZihNb2R1bGUuaGFzT3duUHJvcGVydHkobmFtZSkpe2lmKHVuZGVmaW5lZD09PW51bUFyZ3VtZW50c3x8dW5kZWZpbmVkIT09TW9kdWxlW25hbWVdLm92ZXJsb2FkVGFibGUmJnVuZGVmaW5lZCE9PU1vZHVsZVtuYW1lXS5vdmVybG9hZFRhYmxlW251bUFyZ3VtZW50c10pe3Rocm93QmluZGluZ0Vycm9yKCJDYW5ub3QgcmVnaXN0ZXIgcHVibGljIG5hbWUgJyIrbmFtZSsiJyB0d2ljZSIpO31lbnN1cmVPdmVybG9hZFRhYmxlKE1vZHVsZSxuYW1lLG5hbWUpO2lmKE1vZHVsZS5oYXNPd25Qcm9wZXJ0eShudW1Bcmd1bWVudHMpKXt0aHJvd0JpbmRpbmdFcnJvcigiQ2Fubm90IHJlZ2lzdGVyIG11bHRpcGxlIG92ZXJsb2FkcyBvZiBhIGZ1bmN0aW9uIHdpdGggdGhlIHNhbWUgbnVtYmVyIG9mIGFyZ3VtZW50cyAoIitudW1Bcmd1bWVudHMrIikhIik7fU1vZHVsZVtuYW1lXS5vdmVybG9hZFRhYmxlW251bUFyZ3VtZW50c109dmFsdWU7fWVsc2Uge01vZHVsZVtuYW1lXT12YWx1ZTtpZih1bmRlZmluZWQhPT1udW1Bcmd1bWVudHMpe01vZHVsZVtuYW1lXS5udW1Bcmd1bWVudHM9bnVtQXJndW1lbnRzO319fWZ1bmN0aW9uIFJlZ2lzdGVyZWRDbGFzcyhuYW1lLGNvbnN0cnVjdG9yLGluc3RhbmNlUHJvdG90eXBlLHJhd0Rlc3RydWN0b3IsYmFzZUNsYXNzLGdldEFjdHVhbFR5cGUsdXBjYXN0LGRvd25jYXN0KXt0aGlzLm5hbWU9bmFtZTt0aGlzLmNvbnN0cnVjdG9yPWNvbnN0cnVjdG9yO3RoaXMuaW5zdGFuY2VQcm90b3R5cGU9aW5zdGFuY2VQcm90b3R5cGU7dGhpcy5yYXdEZXN0cnVjdG9yPXJhd0Rlc3RydWN0b3I7dGhpcy5iYXNlQ2xhc3M9YmFzZUNsYXNzO3RoaXMuZ2V0QWN0dWFsVHlwZT1nZXRBY3R1YWxUeXBlO3RoaXMudXBjYXN0PXVwY2FzdDt0aGlzLmRvd25jYXN0PWRvd25jYXN0O3RoaXMucHVyZVZpcnR1YWxGdW5jdGlvbnM9W107fWZ1bmN0aW9uIHVwY2FzdFBvaW50ZXIocHRyLHB0ckNsYXNzLGRlc2lyZWRDbGFzcyl7d2hpbGUocHRyQ2xhc3MhPT1kZXNpcmVkQ2xhc3Mpe2lmKCFwdHJDbGFzcy51cGNhc3Qpe3Rocm93QmluZGluZ0Vycm9yKCJFeHBlY3RlZCBudWxsIG9yIGluc3RhbmNlIG9mICIrZGVzaXJlZENsYXNzLm5hbWUrIiwgZ290IGFuIGluc3RhbmNlIG9mICIrcHRyQ2xhc3MubmFtZSk7fXB0cj1wdHJDbGFzcy51cGNhc3QocHRyKTtwdHJDbGFzcz1wdHJDbGFzcy5iYXNlQ2xhc3M7fXJldHVybiBwdHJ9ZnVuY3Rpb24gY29uc3ROb1NtYXJ0UHRyUmF3UG9pbnRlclRvV2lyZVR5cGUoZGVzdHJ1Y3RvcnMsaGFuZGxlKXtpZihoYW5kbGU9PT1udWxsKXtpZih0aGlzLmlzUmVmZXJlbmNlKXt0aHJvd0JpbmRpbmdFcnJvcigibnVsbCBpcyBub3QgYSB2YWxpZCAiK3RoaXMubmFtZSk7fXJldHVybiAwfWlmKCFoYW5kbGUuJCQpe3Rocm93QmluZGluZ0Vycm9yKCdDYW5ub3QgcGFzcyAiJytfZW1iaW5kX3JlcHIoaGFuZGxlKSsnIiBhcyBhICcrdGhpcy5uYW1lKTt9aWYoIWhhbmRsZS4kJC5wdHIpe3Rocm93QmluZGluZ0Vycm9yKCJDYW5ub3QgcGFzcyBkZWxldGVkIG9iamVjdCBhcyBhIHBvaW50ZXIgb2YgdHlwZSAiK3RoaXMubmFtZSk7fXZhciBoYW5kbGVDbGFzcz1oYW5kbGUuJCQucHRyVHlwZS5yZWdpc3RlcmVkQ2xhc3M7dmFyIHB0cj11cGNhc3RQb2ludGVyKGhhbmRsZS4kJC5wdHIsaGFuZGxlQ2xhc3MsdGhpcy5yZWdpc3RlcmVkQ2xhc3MpO3JldHVybiBwdHJ9ZnVuY3Rpb24gZ2VuZXJpY1BvaW50ZXJUb1dpcmVUeXBlKGRlc3RydWN0b3JzLGhhbmRsZSl7dmFyIHB0cjtpZihoYW5kbGU9PT1udWxsKXtpZih0aGlzLmlzUmVmZXJlbmNlKXt0aHJvd0JpbmRpbmdFcnJvcigibnVsbCBpcyBub3QgYSB2YWxpZCAiK3RoaXMubmFtZSk7fWlmKHRoaXMuaXNTbWFydFBvaW50ZXIpe3B0cj10aGlzLnJhd0NvbnN0cnVjdG9yKCk7aWYoZGVzdHJ1Y3RvcnMhPT1udWxsKXtkZXN0cnVjdG9ycy5wdXNoKHRoaXMucmF3RGVzdHJ1Y3RvcixwdHIpO31yZXR1cm4gcHRyfWVsc2Uge3JldHVybiAwfX1pZighaGFuZGxlLiQkKXt0aHJvd0JpbmRpbmdFcnJvcignQ2Fubm90IHBhc3MgIicrX2VtYmluZF9yZXByKGhhbmRsZSkrJyIgYXMgYSAnK3RoaXMubmFtZSk7fWlmKCFoYW5kbGUuJCQucHRyKXt0aHJvd0JpbmRpbmdFcnJvcigiQ2Fubm90IHBhc3MgZGVsZXRlZCBvYmplY3QgYXMgYSBwb2ludGVyIG9mIHR5cGUgIit0aGlzLm5hbWUpO31pZighdGhpcy5pc0NvbnN0JiZoYW5kbGUuJCQucHRyVHlwZS5pc0NvbnN0KXt0aHJvd0JpbmRpbmdFcnJvcigiQ2Fubm90IGNvbnZlcnQgYXJndW1lbnQgb2YgdHlwZSAiKyhoYW5kbGUuJCQuc21hcnRQdHJUeXBlP2hhbmRsZS4kJC5zbWFydFB0clR5cGUubmFtZTpoYW5kbGUuJCQucHRyVHlwZS5uYW1lKSsiIHRvIHBhcmFtZXRlciB0eXBlICIrdGhpcy5uYW1lKTt9dmFyIGhhbmRsZUNsYXNzPWhhbmRsZS4kJC5wdHJUeXBlLnJlZ2lzdGVyZWRDbGFzcztwdHI9dXBjYXN0UG9pbnRlcihoYW5kbGUuJCQucHRyLGhhbmRsZUNsYXNzLHRoaXMucmVnaXN0ZXJlZENsYXNzKTtpZih0aGlzLmlzU21hcnRQb2ludGVyKXtpZih1bmRlZmluZWQ9PT1oYW5kbGUuJCQuc21hcnRQdHIpe3Rocm93QmluZGluZ0Vycm9yKCJQYXNzaW5nIHJhdyBwb2ludGVyIHRvIHNtYXJ0IHBvaW50ZXIgaXMgaWxsZWdhbCIpO31zd2l0Y2godGhpcy5zaGFyaW5nUG9saWN5KXtjYXNlIDA6aWYoaGFuZGxlLiQkLnNtYXJ0UHRyVHlwZT09PXRoaXMpe3B0cj1oYW5kbGUuJCQuc21hcnRQdHI7fWVsc2Uge3Rocm93QmluZGluZ0Vycm9yKCJDYW5ub3QgY29udmVydCBhcmd1bWVudCBvZiB0eXBlICIrKGhhbmRsZS4kJC5zbWFydFB0clR5cGU/aGFuZGxlLiQkLnNtYXJ0UHRyVHlwZS5uYW1lOmhhbmRsZS4kJC5wdHJUeXBlLm5hbWUpKyIgdG8gcGFyYW1ldGVyIHR5cGUgIit0aGlzLm5hbWUpO31icmVhaztjYXNlIDE6cHRyPWhhbmRsZS4kJC5zbWFydFB0cjticmVhaztjYXNlIDI6aWYoaGFuZGxlLiQkLnNtYXJ0UHRyVHlwZT09PXRoaXMpe3B0cj1oYW5kbGUuJCQuc21hcnRQdHI7fWVsc2Uge3ZhciBjbG9uZWRIYW5kbGU9aGFuZGxlWyJjbG9uZSJdKCk7cHRyPXRoaXMucmF3U2hhcmUocHRyLF9fZW12YWxfcmVnaXN0ZXIoKGZ1bmN0aW9uKCl7Y2xvbmVkSGFuZGxlWyJkZWxldGUiXSgpO30pKSk7aWYoZGVzdHJ1Y3RvcnMhPT1udWxsKXtkZXN0cnVjdG9ycy5wdXNoKHRoaXMucmF3RGVzdHJ1Y3RvcixwdHIpO319YnJlYWs7ZGVmYXVsdDp0aHJvd0JpbmRpbmdFcnJvcigiVW5zdXBwb3J0aW5nIHNoYXJpbmcgcG9saWN5Iik7fX1yZXR1cm4gcHRyfWZ1bmN0aW9uIG5vbkNvbnN0Tm9TbWFydFB0clJhd1BvaW50ZXJUb1dpcmVUeXBlKGRlc3RydWN0b3JzLGhhbmRsZSl7aWYoaGFuZGxlPT09bnVsbCl7aWYodGhpcy5pc1JlZmVyZW5jZSl7dGhyb3dCaW5kaW5nRXJyb3IoIm51bGwgaXMgbm90IGEgdmFsaWQgIit0aGlzLm5hbWUpO31yZXR1cm4gMH1pZighaGFuZGxlLiQkKXt0aHJvd0JpbmRpbmdFcnJvcignQ2Fubm90IHBhc3MgIicrX2VtYmluZF9yZXByKGhhbmRsZSkrJyIgYXMgYSAnK3RoaXMubmFtZSk7fWlmKCFoYW5kbGUuJCQucHRyKXt0aHJvd0JpbmRpbmdFcnJvcigiQ2Fubm90IHBhc3MgZGVsZXRlZCBvYmplY3QgYXMgYSBwb2ludGVyIG9mIHR5cGUgIit0aGlzLm5hbWUpO31pZihoYW5kbGUuJCQucHRyVHlwZS5pc0NvbnN0KXt0aHJvd0JpbmRpbmdFcnJvcigiQ2Fubm90IGNvbnZlcnQgYXJndW1lbnQgb2YgdHlwZSAiK2hhbmRsZS4kJC5wdHJUeXBlLm5hbWUrIiB0byBwYXJhbWV0ZXIgdHlwZSAiK3RoaXMubmFtZSk7fXZhciBoYW5kbGVDbGFzcz1oYW5kbGUuJCQucHRyVHlwZS5yZWdpc3RlcmVkQ2xhc3M7dmFyIHB0cj11cGNhc3RQb2ludGVyKGhhbmRsZS4kJC5wdHIsaGFuZGxlQ2xhc3MsdGhpcy5yZWdpc3RlcmVkQ2xhc3MpO3JldHVybiBwdHJ9ZnVuY3Rpb24gUmVnaXN0ZXJlZFBvaW50ZXJfZ2V0UG9pbnRlZShwdHIpe2lmKHRoaXMucmF3R2V0UG9pbnRlZSl7cHRyPXRoaXMucmF3R2V0UG9pbnRlZShwdHIpO31yZXR1cm4gcHRyfWZ1bmN0aW9uIFJlZ2lzdGVyZWRQb2ludGVyX2Rlc3RydWN0b3IocHRyKXtpZih0aGlzLnJhd0Rlc3RydWN0b3Ipe3RoaXMucmF3RGVzdHJ1Y3RvcihwdHIpO319ZnVuY3Rpb24gUmVnaXN0ZXJlZFBvaW50ZXJfZGVsZXRlT2JqZWN0KGhhbmRsZSl7aWYoaGFuZGxlIT09bnVsbCl7aGFuZGxlWyJkZWxldGUiXSgpO319ZnVuY3Rpb24gZG93bmNhc3RQb2ludGVyKHB0cixwdHJDbGFzcyxkZXNpcmVkQ2xhc3Mpe2lmKHB0ckNsYXNzPT09ZGVzaXJlZENsYXNzKXtyZXR1cm4gcHRyfWlmKHVuZGVmaW5lZD09PWRlc2lyZWRDbGFzcy5iYXNlQ2xhc3Mpe3JldHVybiBudWxsfXZhciBydj1kb3duY2FzdFBvaW50ZXIocHRyLHB0ckNsYXNzLGRlc2lyZWRDbGFzcy5iYXNlQ2xhc3MpO2lmKHJ2PT09bnVsbCl7cmV0dXJuIG51bGx9cmV0dXJuIGRlc2lyZWRDbGFzcy5kb3duY2FzdChydil9ZnVuY3Rpb24gZ2V0SW5oZXJpdGVkSW5zdGFuY2VDb3VudCgpe3JldHVybiBPYmplY3Qua2V5cyhyZWdpc3RlcmVkSW5zdGFuY2VzKS5sZW5ndGh9ZnVuY3Rpb24gZ2V0TGl2ZUluaGVyaXRlZEluc3RhbmNlcygpe3ZhciBydj1bXTtmb3IodmFyIGsgaW4gcmVnaXN0ZXJlZEluc3RhbmNlcyl7aWYocmVnaXN0ZXJlZEluc3RhbmNlcy5oYXNPd25Qcm9wZXJ0eShrKSl7cnYucHVzaChyZWdpc3RlcmVkSW5zdGFuY2VzW2tdKTt9fXJldHVybiBydn1mdW5jdGlvbiBzZXREZWxheUZ1bmN0aW9uKGZuKXtkZWxheUZ1bmN0aW9uPWZuO2lmKGRlbGV0aW9uUXVldWUubGVuZ3RoJiZkZWxheUZ1bmN0aW9uKXtkZWxheUZ1bmN0aW9uKGZsdXNoUGVuZGluZ0RlbGV0ZXMpO319ZnVuY3Rpb24gaW5pdF9lbWJpbmQoKXtNb2R1bGVbImdldEluaGVyaXRlZEluc3RhbmNlQ291bnQiXT1nZXRJbmhlcml0ZWRJbnN0YW5jZUNvdW50O01vZHVsZVsiZ2V0TGl2ZUluaGVyaXRlZEluc3RhbmNlcyJdPWdldExpdmVJbmhlcml0ZWRJbnN0YW5jZXM7TW9kdWxlWyJmbHVzaFBlbmRpbmdEZWxldGVzIl09Zmx1c2hQZW5kaW5nRGVsZXRlcztNb2R1bGVbInNldERlbGF5RnVuY3Rpb24iXT1zZXREZWxheUZ1bmN0aW9uO312YXIgcmVnaXN0ZXJlZEluc3RhbmNlcz17fTtmdW5jdGlvbiBnZXRCYXNlc3RQb2ludGVyKGNsYXNzXyxwdHIpe2lmKHB0cj09PXVuZGVmaW5lZCl7dGhyb3dCaW5kaW5nRXJyb3IoInB0ciBzaG91bGQgbm90IGJlIHVuZGVmaW5lZCIpO313aGlsZShjbGFzc18uYmFzZUNsYXNzKXtwdHI9Y2xhc3NfLnVwY2FzdChwdHIpO2NsYXNzXz1jbGFzc18uYmFzZUNsYXNzO31yZXR1cm4gcHRyfWZ1bmN0aW9uIGdldEluaGVyaXRlZEluc3RhbmNlKGNsYXNzXyxwdHIpe3B0cj1nZXRCYXNlc3RQb2ludGVyKGNsYXNzXyxwdHIpO3JldHVybiByZWdpc3RlcmVkSW5zdGFuY2VzW3B0cl19ZnVuY3Rpb24gbWFrZUNsYXNzSGFuZGxlKHByb3RvdHlwZSxyZWNvcmQpe2lmKCFyZWNvcmQucHRyVHlwZXx8IXJlY29yZC5wdHIpe3Rocm93SW50ZXJuYWxFcnJvcigibWFrZUNsYXNzSGFuZGxlIHJlcXVpcmVzIHB0ciBhbmQgcHRyVHlwZSIpO312YXIgaGFzU21hcnRQdHJUeXBlPSEhcmVjb3JkLnNtYXJ0UHRyVHlwZTt2YXIgaGFzU21hcnRQdHI9ISFyZWNvcmQuc21hcnRQdHI7aWYoaGFzU21hcnRQdHJUeXBlIT09aGFzU21hcnRQdHIpe3Rocm93SW50ZXJuYWxFcnJvcigiQm90aCBzbWFydFB0clR5cGUgYW5kIHNtYXJ0UHRyIG11c3QgYmUgc3BlY2lmaWVkIik7fXJlY29yZC5jb3VudD17dmFsdWU6MX07cmV0dXJuIE9iamVjdC5jcmVhdGUocHJvdG90eXBlLHskJDp7dmFsdWU6cmVjb3JkfX0pfWZ1bmN0aW9uIFJlZ2lzdGVyZWRQb2ludGVyX2Zyb21XaXJlVHlwZShwdHIpe3ZhciByYXdQb2ludGVyPXRoaXMuZ2V0UG9pbnRlZShwdHIpO2lmKCFyYXdQb2ludGVyKXt0aGlzLmRlc3RydWN0b3IocHRyKTtyZXR1cm4gbnVsbH12YXIgcmVnaXN0ZXJlZEluc3RhbmNlPWdldEluaGVyaXRlZEluc3RhbmNlKHRoaXMucmVnaXN0ZXJlZENsYXNzLHJhd1BvaW50ZXIpO2lmKHVuZGVmaW5lZCE9PXJlZ2lzdGVyZWRJbnN0YW5jZSl7aWYoMD09PXJlZ2lzdGVyZWRJbnN0YW5jZS4kJC5jb3VudC52YWx1ZSl7cmVnaXN0ZXJlZEluc3RhbmNlLiQkLnB0cj1yYXdQb2ludGVyO3JlZ2lzdGVyZWRJbnN0YW5jZS4kJC5zbWFydFB0cj1wdHI7cmV0dXJuIHJlZ2lzdGVyZWRJbnN0YW5jZVsiY2xvbmUiXSgpfWVsc2Uge3ZhciBydj1yZWdpc3RlcmVkSW5zdGFuY2VbImNsb25lIl0oKTt0aGlzLmRlc3RydWN0b3IocHRyKTtyZXR1cm4gcnZ9fWZ1bmN0aW9uIG1ha2VEZWZhdWx0SGFuZGxlKCl7aWYodGhpcy5pc1NtYXJ0UG9pbnRlcil7cmV0dXJuIG1ha2VDbGFzc0hhbmRsZSh0aGlzLnJlZ2lzdGVyZWRDbGFzcy5pbnN0YW5jZVByb3RvdHlwZSx7cHRyVHlwZTp0aGlzLnBvaW50ZWVUeXBlLHB0cjpyYXdQb2ludGVyLHNtYXJ0UHRyVHlwZTp0aGlzLHNtYXJ0UHRyOnB0cn0pfWVsc2Uge3JldHVybiBtYWtlQ2xhc3NIYW5kbGUodGhpcy5yZWdpc3RlcmVkQ2xhc3MuaW5zdGFuY2VQcm90b3R5cGUse3B0clR5cGU6dGhpcyxwdHI6cHRyfSl9fXZhciBhY3R1YWxUeXBlPXRoaXMucmVnaXN0ZXJlZENsYXNzLmdldEFjdHVhbFR5cGUocmF3UG9pbnRlcik7dmFyIHJlZ2lzdGVyZWRQb2ludGVyUmVjb3JkPXJlZ2lzdGVyZWRQb2ludGVyc1thY3R1YWxUeXBlXTtpZighcmVnaXN0ZXJlZFBvaW50ZXJSZWNvcmQpe3JldHVybiBtYWtlRGVmYXVsdEhhbmRsZS5jYWxsKHRoaXMpfXZhciB0b1R5cGU7aWYodGhpcy5pc0NvbnN0KXt0b1R5cGU9cmVnaXN0ZXJlZFBvaW50ZXJSZWNvcmQuY29uc3RQb2ludGVyVHlwZTt9ZWxzZSB7dG9UeXBlPXJlZ2lzdGVyZWRQb2ludGVyUmVjb3JkLnBvaW50ZXJUeXBlO312YXIgZHA9ZG93bmNhc3RQb2ludGVyKHJhd1BvaW50ZXIsdGhpcy5yZWdpc3RlcmVkQ2xhc3MsdG9UeXBlLnJlZ2lzdGVyZWRDbGFzcyk7aWYoZHA9PT1udWxsKXtyZXR1cm4gbWFrZURlZmF1bHRIYW5kbGUuY2FsbCh0aGlzKX1pZih0aGlzLmlzU21hcnRQb2ludGVyKXtyZXR1cm4gbWFrZUNsYXNzSGFuZGxlKHRvVHlwZS5yZWdpc3RlcmVkQ2xhc3MuaW5zdGFuY2VQcm90b3R5cGUse3B0clR5cGU6dG9UeXBlLHB0cjpkcCxzbWFydFB0clR5cGU6dGhpcyxzbWFydFB0cjpwdHJ9KX1lbHNlIHtyZXR1cm4gbWFrZUNsYXNzSGFuZGxlKHRvVHlwZS5yZWdpc3RlcmVkQ2xhc3MuaW5zdGFuY2VQcm90b3R5cGUse3B0clR5cGU6dG9UeXBlLHB0cjpkcH0pfX1mdW5jdGlvbiBpbml0X1JlZ2lzdGVyZWRQb2ludGVyKCl7UmVnaXN0ZXJlZFBvaW50ZXIucHJvdG90eXBlLmdldFBvaW50ZWU9UmVnaXN0ZXJlZFBvaW50ZXJfZ2V0UG9pbnRlZTtSZWdpc3RlcmVkUG9pbnRlci5wcm90b3R5cGUuZGVzdHJ1Y3Rvcj1SZWdpc3RlcmVkUG9pbnRlcl9kZXN0cnVjdG9yO1JlZ2lzdGVyZWRQb2ludGVyLnByb3RvdHlwZVsiYXJnUGFja0FkdmFuY2UiXT04O1JlZ2lzdGVyZWRQb2ludGVyLnByb3RvdHlwZVsicmVhZFZhbHVlRnJvbVBvaW50ZXIiXT1zaW1wbGVSZWFkVmFsdWVGcm9tUG9pbnRlcjtSZWdpc3RlcmVkUG9pbnRlci5wcm90b3R5cGVbImRlbGV0ZU9iamVjdCJdPVJlZ2lzdGVyZWRQb2ludGVyX2RlbGV0ZU9iamVjdDtSZWdpc3RlcmVkUG9pbnRlci5wcm90b3R5cGVbImZyb21XaXJlVHlwZSJdPVJlZ2lzdGVyZWRQb2ludGVyX2Zyb21XaXJlVHlwZTt9ZnVuY3Rpb24gUmVnaXN0ZXJlZFBvaW50ZXIobmFtZSxyZWdpc3RlcmVkQ2xhc3MsaXNSZWZlcmVuY2UsaXNDb25zdCxpc1NtYXJ0UG9pbnRlcixwb2ludGVlVHlwZSxzaGFyaW5nUG9saWN5LHJhd0dldFBvaW50ZWUscmF3Q29uc3RydWN0b3IscmF3U2hhcmUscmF3RGVzdHJ1Y3Rvcil7dGhpcy5uYW1lPW5hbWU7dGhpcy5yZWdpc3RlcmVkQ2xhc3M9cmVnaXN0ZXJlZENsYXNzO3RoaXMuaXNSZWZlcmVuY2U9aXNSZWZlcmVuY2U7dGhpcy5pc0NvbnN0PWlzQ29uc3Q7dGhpcy5pc1NtYXJ0UG9pbnRlcj1pc1NtYXJ0UG9pbnRlcjt0aGlzLnBvaW50ZWVUeXBlPXBvaW50ZWVUeXBlO3RoaXMuc2hhcmluZ1BvbGljeT1zaGFyaW5nUG9saWN5O3RoaXMucmF3R2V0UG9pbnRlZT1yYXdHZXRQb2ludGVlO3RoaXMucmF3Q29uc3RydWN0b3I9cmF3Q29uc3RydWN0b3I7dGhpcy5yYXdTaGFyZT1yYXdTaGFyZTt0aGlzLnJhd0Rlc3RydWN0b3I9cmF3RGVzdHJ1Y3RvcjtpZighaXNTbWFydFBvaW50ZXImJnJlZ2lzdGVyZWRDbGFzcy5iYXNlQ2xhc3M9PT11bmRlZmluZWQpe2lmKGlzQ29uc3Qpe3RoaXNbInRvV2lyZVR5cGUiXT1jb25zdE5vU21hcnRQdHJSYXdQb2ludGVyVG9XaXJlVHlwZTt0aGlzLmRlc3RydWN0b3JGdW5jdGlvbj1udWxsO31lbHNlIHt0aGlzWyJ0b1dpcmVUeXBlIl09bm9uQ29uc3ROb1NtYXJ0UHRyUmF3UG9pbnRlclRvV2lyZVR5cGU7dGhpcy5kZXN0cnVjdG9yRnVuY3Rpb249bnVsbDt9fWVsc2Uge3RoaXNbInRvV2lyZVR5cGUiXT1nZW5lcmljUG9pbnRlclRvV2lyZVR5cGU7fX1mdW5jdGlvbiByZXBsYWNlUHVibGljU3ltYm9sKG5hbWUsdmFsdWUsbnVtQXJndW1lbnRzKXtpZighTW9kdWxlLmhhc093blByb3BlcnR5KG5hbWUpKXt0aHJvd0ludGVybmFsRXJyb3IoIlJlcGxhY2luZyBub25leGlzdGFudCBwdWJsaWMgc3ltYm9sIik7fWlmKHVuZGVmaW5lZCE9PU1vZHVsZVtuYW1lXS5vdmVybG9hZFRhYmxlJiZ1bmRlZmluZWQhPT1udW1Bcmd1bWVudHMpe01vZHVsZVtuYW1lXS5vdmVybG9hZFRhYmxlW251bUFyZ3VtZW50c109dmFsdWU7fWVsc2Uge01vZHVsZVtuYW1lXT12YWx1ZTtNb2R1bGVbbmFtZV0uYXJnQ291bnQ9bnVtQXJndW1lbnRzO319ZnVuY3Rpb24gZW1iaW5kX19yZXF1aXJlRnVuY3Rpb24oc2lnbmF0dXJlLHJhd0Z1bmN0aW9uKXtzaWduYXR1cmU9cmVhZExhdGluMVN0cmluZyhzaWduYXR1cmUpO2Z1bmN0aW9uIG1ha2VEeW5DYWxsZXIoZHluQ2FsbCl7dmFyIGFyZ3M9W107Zm9yKHZhciBpPTE7aTxzaWduYXR1cmUubGVuZ3RoOysraSl7YXJncy5wdXNoKCJhIitpKTt9dmFyIG5hbWU9ImR5bkNhbGxfIitzaWduYXR1cmUrIl8iK3Jhd0Z1bmN0aW9uO3ZhciBib2R5PSJyZXR1cm4gZnVuY3Rpb24gIituYW1lKyIoIithcmdzLmpvaW4oIiwgIikrIikge1xuIjtib2R5Kz0iICAgIHJldHVybiBkeW5DYWxsKHJhd0Z1bmN0aW9uIisoYXJncy5sZW5ndGg/IiwgIjoiIikrYXJncy5qb2luKCIsICIpKyIpO1xuIjtib2R5Kz0ifTtcbiI7cmV0dXJuIChuZXcgRnVuY3Rpb24oImR5bkNhbGwiLCJyYXdGdW5jdGlvbiIsYm9keSkpKGR5bkNhbGwscmF3RnVuY3Rpb24pfXZhciBmcDtpZihNb2R1bGVbIkZVTkNUSU9OX1RBQkxFXyIrc2lnbmF0dXJlXSE9PXVuZGVmaW5lZCl7ZnA9TW9kdWxlWyJGVU5DVElPTl9UQUJMRV8iK3NpZ25hdHVyZV1bcmF3RnVuY3Rpb25dO31lbHNlIGlmKHR5cGVvZiBGVU5DVElPTl9UQUJMRSE9PSJ1bmRlZmluZWQiKXtmcD1GVU5DVElPTl9UQUJMRVtyYXdGdW5jdGlvbl07fWVsc2Uge3ZhciBkYz1Nb2R1bGVbImFzbSJdWyJkeW5DYWxsXyIrc2lnbmF0dXJlXTtpZihkYz09PXVuZGVmaW5lZCl7ZGM9TW9kdWxlWyJhc20iXVsiZHluQ2FsbF8iK3NpZ25hdHVyZS5yZXBsYWNlKC9mL2csImQiKV07aWYoZGM9PT11bmRlZmluZWQpe3Rocm93QmluZGluZ0Vycm9yKCJObyBkeW5DYWxsIGludm9rZXIgZm9yIHNpZ25hdHVyZTogIitzaWduYXR1cmUpO319ZnA9bWFrZUR5bkNhbGxlcihkYyk7fWlmKHR5cGVvZiBmcCE9PSJmdW5jdGlvbiIpe3Rocm93QmluZGluZ0Vycm9yKCJ1bmtub3duIGZ1bmN0aW9uIHBvaW50ZXIgd2l0aCBzaWduYXR1cmUgIitzaWduYXR1cmUrIjogIityYXdGdW5jdGlvbik7fXJldHVybiBmcH12YXIgVW5ib3VuZFR5cGVFcnJvcj11bmRlZmluZWQ7ZnVuY3Rpb24gZ2V0VHlwZU5hbWUodHlwZSl7dmFyIHB0cj1fX19nZXRUeXBlTmFtZSh0eXBlKTt2YXIgcnY9cmVhZExhdGluMVN0cmluZyhwdHIpO19mcmVlKHB0cik7cmV0dXJuIHJ2fWZ1bmN0aW9uIHRocm93VW5ib3VuZFR5cGVFcnJvcihtZXNzYWdlLHR5cGVzKXt2YXIgdW5ib3VuZFR5cGVzPVtdO3ZhciBzZWVuPXt9O2Z1bmN0aW9uIHZpc2l0KHR5cGUpe2lmKHNlZW5bdHlwZV0pe3JldHVybn1pZihyZWdpc3RlcmVkVHlwZXNbdHlwZV0pe3JldHVybn1pZih0eXBlRGVwZW5kZW5jaWVzW3R5cGVdKXt0eXBlRGVwZW5kZW5jaWVzW3R5cGVdLmZvckVhY2godmlzaXQpO3JldHVybn11bmJvdW5kVHlwZXMucHVzaCh0eXBlKTtzZWVuW3R5cGVdPXRydWU7fXR5cGVzLmZvckVhY2godmlzaXQpO3Rocm93IG5ldyBVbmJvdW5kVHlwZUVycm9yKG1lc3NhZ2UrIjogIit1bmJvdW5kVHlwZXMubWFwKGdldFR5cGVOYW1lKS5qb2luKFsiLCAiXSkpfWZ1bmN0aW9uIF9fZW1iaW5kX3JlZ2lzdGVyX2NsYXNzKHJhd1R5cGUscmF3UG9pbnRlclR5cGUscmF3Q29uc3RQb2ludGVyVHlwZSxiYXNlQ2xhc3NSYXdUeXBlLGdldEFjdHVhbFR5cGVTaWduYXR1cmUsZ2V0QWN0dWFsVHlwZSx1cGNhc3RTaWduYXR1cmUsdXBjYXN0LGRvd25jYXN0U2lnbmF0dXJlLGRvd25jYXN0LG5hbWUsZGVzdHJ1Y3RvclNpZ25hdHVyZSxyYXdEZXN0cnVjdG9yKXtuYW1lPXJlYWRMYXRpbjFTdHJpbmcobmFtZSk7Z2V0QWN0dWFsVHlwZT1lbWJpbmRfX3JlcXVpcmVGdW5jdGlvbihnZXRBY3R1YWxUeXBlU2lnbmF0dXJlLGdldEFjdHVhbFR5cGUpO2lmKHVwY2FzdCl7dXBjYXN0PWVtYmluZF9fcmVxdWlyZUZ1bmN0aW9uKHVwY2FzdFNpZ25hdHVyZSx1cGNhc3QpO31pZihkb3duY2FzdCl7ZG93bmNhc3Q9ZW1iaW5kX19yZXF1aXJlRnVuY3Rpb24oZG93bmNhc3RTaWduYXR1cmUsZG93bmNhc3QpO31yYXdEZXN0cnVjdG9yPWVtYmluZF9fcmVxdWlyZUZ1bmN0aW9uKGRlc3RydWN0b3JTaWduYXR1cmUscmF3RGVzdHJ1Y3Rvcik7dmFyIGxlZ2FsRnVuY3Rpb25OYW1lPW1ha2VMZWdhbEZ1bmN0aW9uTmFtZShuYW1lKTtleHBvc2VQdWJsaWNTeW1ib2wobGVnYWxGdW5jdGlvbk5hbWUsKGZ1bmN0aW9uKCl7dGhyb3dVbmJvdW5kVHlwZUVycm9yKCJDYW5ub3QgY29uc3RydWN0ICIrbmFtZSsiIGR1ZSB0byB1bmJvdW5kIHR5cGVzIixbYmFzZUNsYXNzUmF3VHlwZV0pO30pKTt3aGVuRGVwZW5kZW50VHlwZXNBcmVSZXNvbHZlZChbcmF3VHlwZSxyYXdQb2ludGVyVHlwZSxyYXdDb25zdFBvaW50ZXJUeXBlXSxiYXNlQ2xhc3NSYXdUeXBlP1tiYXNlQ2xhc3NSYXdUeXBlXTpbXSwoZnVuY3Rpb24oYmFzZSl7YmFzZT1iYXNlWzBdO3ZhciBiYXNlQ2xhc3M7dmFyIGJhc2VQcm90b3R5cGU7aWYoYmFzZUNsYXNzUmF3VHlwZSl7YmFzZUNsYXNzPWJhc2UucmVnaXN0ZXJlZENsYXNzO2Jhc2VQcm90b3R5cGU9YmFzZUNsYXNzLmluc3RhbmNlUHJvdG90eXBlO31lbHNlIHtiYXNlUHJvdG90eXBlPUNsYXNzSGFuZGxlLnByb3RvdHlwZTt9dmFyIGNvbnN0cnVjdG9yPWNyZWF0ZU5hbWVkRnVuY3Rpb24obGVnYWxGdW5jdGlvbk5hbWUsKGZ1bmN0aW9uKCl7aWYoT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpIT09aW5zdGFuY2VQcm90b3R5cGUpe3Rocm93IG5ldyBCaW5kaW5nRXJyb3IoIlVzZSAnbmV3JyB0byBjb25zdHJ1Y3QgIituYW1lKX1pZih1bmRlZmluZWQ9PT1yZWdpc3RlcmVkQ2xhc3MuY29uc3RydWN0b3JfYm9keSl7dGhyb3cgbmV3IEJpbmRpbmdFcnJvcihuYW1lKyIgaGFzIG5vIGFjY2Vzc2libGUgY29uc3RydWN0b3IiKX12YXIgYm9keT1yZWdpc3RlcmVkQ2xhc3MuY29uc3RydWN0b3JfYm9keVthcmd1bWVudHMubGVuZ3RoXTtpZih1bmRlZmluZWQ9PT1ib2R5KXt0aHJvdyBuZXcgQmluZGluZ0Vycm9yKCJUcmllZCB0byBpbnZva2UgY3RvciBvZiAiK25hbWUrIiB3aXRoIGludmFsaWQgbnVtYmVyIG9mIHBhcmFtZXRlcnMgKCIrYXJndW1lbnRzLmxlbmd0aCsiKSAtIGV4cGVjdGVkICgiK09iamVjdC5rZXlzKHJlZ2lzdGVyZWRDbGFzcy5jb25zdHJ1Y3Rvcl9ib2R5KS50b1N0cmluZygpKyIpIHBhcmFtZXRlcnMgaW5zdGVhZCEiKX1yZXR1cm4gYm9keS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KSk7dmFyIGluc3RhbmNlUHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYmFzZVByb3RvdHlwZSx7Y29uc3RydWN0b3I6e3ZhbHVlOmNvbnN0cnVjdG9yfX0pO2NvbnN0cnVjdG9yLnByb3RvdHlwZT1pbnN0YW5jZVByb3RvdHlwZTt2YXIgcmVnaXN0ZXJlZENsYXNzPW5ldyBSZWdpc3RlcmVkQ2xhc3MobmFtZSxjb25zdHJ1Y3RvcixpbnN0YW5jZVByb3RvdHlwZSxyYXdEZXN0cnVjdG9yLGJhc2VDbGFzcyxnZXRBY3R1YWxUeXBlLHVwY2FzdCxkb3duY2FzdCk7dmFyIHJlZmVyZW5jZUNvbnZlcnRlcj1uZXcgUmVnaXN0ZXJlZFBvaW50ZXIobmFtZSxyZWdpc3RlcmVkQ2xhc3MsdHJ1ZSxmYWxzZSxmYWxzZSk7dmFyIHBvaW50ZXJDb252ZXJ0ZXI9bmV3IFJlZ2lzdGVyZWRQb2ludGVyKG5hbWUrIioiLHJlZ2lzdGVyZWRDbGFzcyxmYWxzZSxmYWxzZSxmYWxzZSk7dmFyIGNvbnN0UG9pbnRlckNvbnZlcnRlcj1uZXcgUmVnaXN0ZXJlZFBvaW50ZXIobmFtZSsiIGNvbnN0KiIscmVnaXN0ZXJlZENsYXNzLGZhbHNlLHRydWUsZmFsc2UpO3JlZ2lzdGVyZWRQb2ludGVyc1tyYXdUeXBlXT17cG9pbnRlclR5cGU6cG9pbnRlckNvbnZlcnRlcixjb25zdFBvaW50ZXJUeXBlOmNvbnN0UG9pbnRlckNvbnZlcnRlcn07cmVwbGFjZVB1YmxpY1N5bWJvbChsZWdhbEZ1bmN0aW9uTmFtZSxjb25zdHJ1Y3Rvcik7cmV0dXJuIFtyZWZlcmVuY2VDb252ZXJ0ZXIscG9pbnRlckNvbnZlcnRlcixjb25zdFBvaW50ZXJDb252ZXJ0ZXJdfSkpO31mdW5jdGlvbiBoZWFwMzJWZWN0b3JUb0FycmF5KGNvdW50LGZpcnN0RWxlbWVudCl7dmFyIGFycmF5PVtdO2Zvcih2YXIgaT0wO2k8Y291bnQ7aSsrKXthcnJheS5wdXNoKEhFQVAzMlsoZmlyc3RFbGVtZW50Pj4yKStpXSk7fXJldHVybiBhcnJheX1mdW5jdGlvbiBfX2VtYmluZF9yZWdpc3Rlcl9jbGFzc19jb25zdHJ1Y3RvcihyYXdDbGFzc1R5cGUsYXJnQ291bnQscmF3QXJnVHlwZXNBZGRyLGludm9rZXJTaWduYXR1cmUsaW52b2tlcixyYXdDb25zdHJ1Y3Rvcil7dmFyIHJhd0FyZ1R5cGVzPWhlYXAzMlZlY3RvclRvQXJyYXkoYXJnQ291bnQscmF3QXJnVHlwZXNBZGRyKTtpbnZva2VyPWVtYmluZF9fcmVxdWlyZUZ1bmN0aW9uKGludm9rZXJTaWduYXR1cmUsaW52b2tlcik7d2hlbkRlcGVuZGVudFR5cGVzQXJlUmVzb2x2ZWQoW10sW3Jhd0NsYXNzVHlwZV0sKGZ1bmN0aW9uKGNsYXNzVHlwZSl7Y2xhc3NUeXBlPWNsYXNzVHlwZVswXTt2YXIgaHVtYW5OYW1lPSJjb25zdHJ1Y3RvciAiK2NsYXNzVHlwZS5uYW1lO2lmKHVuZGVmaW5lZD09PWNsYXNzVHlwZS5yZWdpc3RlcmVkQ2xhc3MuY29uc3RydWN0b3JfYm9keSl7Y2xhc3NUeXBlLnJlZ2lzdGVyZWRDbGFzcy5jb25zdHJ1Y3Rvcl9ib2R5PVtdO31pZih1bmRlZmluZWQhPT1jbGFzc1R5cGUucmVnaXN0ZXJlZENsYXNzLmNvbnN0cnVjdG9yX2JvZHlbYXJnQ291bnQtMV0pe3Rocm93IG5ldyBCaW5kaW5nRXJyb3IoIkNhbm5vdCByZWdpc3RlciBtdWx0aXBsZSBjb25zdHJ1Y3RvcnMgd2l0aCBpZGVudGljYWwgbnVtYmVyIG9mIHBhcmFtZXRlcnMgKCIrKGFyZ0NvdW50LTEpKyIpIGZvciBjbGFzcyAnIitjbGFzc1R5cGUubmFtZSsiJyEgT3ZlcmxvYWQgcmVzb2x1dGlvbiBpcyBjdXJyZW50bHkgb25seSBwZXJmb3JtZWQgdXNpbmcgdGhlIHBhcmFtZXRlciBjb3VudCwgbm90IGFjdHVhbCB0eXBlIGluZm8hIil9Y2xhc3NUeXBlLnJlZ2lzdGVyZWRDbGFzcy5jb25zdHJ1Y3Rvcl9ib2R5W2FyZ0NvdW50LTFdPWZ1bmN0aW9uIHVuYm91bmRUeXBlSGFuZGxlcigpe3Rocm93VW5ib3VuZFR5cGVFcnJvcigiQ2Fubm90IGNvbnN0cnVjdCAiK2NsYXNzVHlwZS5uYW1lKyIgZHVlIHRvIHVuYm91bmQgdHlwZXMiLHJhd0FyZ1R5cGVzKTt9O3doZW5EZXBlbmRlbnRUeXBlc0FyZVJlc29sdmVkKFtdLHJhd0FyZ1R5cGVzLChmdW5jdGlvbihhcmdUeXBlcyl7Y2xhc3NUeXBlLnJlZ2lzdGVyZWRDbGFzcy5jb25zdHJ1Y3Rvcl9ib2R5W2FyZ0NvdW50LTFdPWZ1bmN0aW9uIGNvbnN0cnVjdG9yX2JvZHkoKXtpZihhcmd1bWVudHMubGVuZ3RoIT09YXJnQ291bnQtMSl7dGhyb3dCaW5kaW5nRXJyb3IoaHVtYW5OYW1lKyIgY2FsbGVkIHdpdGggIithcmd1bWVudHMubGVuZ3RoKyIgYXJndW1lbnRzLCBleHBlY3RlZCAiKyhhcmdDb3VudC0xKSk7fXZhciBkZXN0cnVjdG9ycz1bXTt2YXIgYXJncz1uZXcgQXJyYXkoYXJnQ291bnQpO2FyZ3NbMF09cmF3Q29uc3RydWN0b3I7Zm9yKHZhciBpPTE7aTxhcmdDb3VudDsrK2kpe2FyZ3NbaV09YXJnVHlwZXNbaV1bInRvV2lyZVR5cGUiXShkZXN0cnVjdG9ycyxhcmd1bWVudHNbaS0xXSk7fXZhciBwdHI9aW52b2tlci5hcHBseShudWxsLGFyZ3MpO3J1bkRlc3RydWN0b3JzKGRlc3RydWN0b3JzKTtyZXR1cm4gYXJnVHlwZXNbMF1bImZyb21XaXJlVHlwZSJdKHB0cil9O3JldHVybiBbXX0pKTtyZXR1cm4gW119KSk7fWZ1bmN0aW9uIG5ld18oY29uc3RydWN0b3IsYXJndW1lbnRMaXN0KXtpZighKGNvbnN0cnVjdG9yIGluc3RhbmNlb2YgRnVuY3Rpb24pKXt0aHJvdyBuZXcgVHlwZUVycm9yKCJuZXdfIGNhbGxlZCB3aXRoIGNvbnN0cnVjdG9yIHR5cGUgIit0eXBlb2YgY29uc3RydWN0b3IrIiB3aGljaCBpcyBub3QgYSBmdW5jdGlvbiIpfXZhciBkdW1teT1jcmVhdGVOYW1lZEZ1bmN0aW9uKGNvbnN0cnVjdG9yLm5hbWV8fCJ1bmtub3duRnVuY3Rpb25OYW1lIiwoZnVuY3Rpb24oKXt9KSk7ZHVtbXkucHJvdG90eXBlPWNvbnN0cnVjdG9yLnByb3RvdHlwZTt2YXIgb2JqPW5ldyBkdW1teTt2YXIgcj1jb25zdHJ1Y3Rvci5hcHBseShvYmosYXJndW1lbnRMaXN0KTtyZXR1cm4gciBpbnN0YW5jZW9mIE9iamVjdD9yOm9ian1mdW5jdGlvbiBjcmFmdEludm9rZXJGdW5jdGlvbihodW1hbk5hbWUsYXJnVHlwZXMsY2xhc3NUeXBlLGNwcEludm9rZXJGdW5jLGNwcFRhcmdldEZ1bmMpe3ZhciBhcmdDb3VudD1hcmdUeXBlcy5sZW5ndGg7aWYoYXJnQ291bnQ8Mil7dGhyb3dCaW5kaW5nRXJyb3IoImFyZ1R5cGVzIGFycmF5IHNpemUgbWlzbWF0Y2ghIE11c3QgYXQgbGVhc3QgZ2V0IHJldHVybiB2YWx1ZSBhbmQgJ3RoaXMnIHR5cGVzISIpO312YXIgaXNDbGFzc01ldGhvZEZ1bmM9YXJnVHlwZXNbMV0hPT1udWxsJiZjbGFzc1R5cGUhPT1udWxsO3ZhciBuZWVkc0Rlc3RydWN0b3JTdGFjaz1mYWxzZTtmb3IodmFyIGk9MTtpPGFyZ1R5cGVzLmxlbmd0aDsrK2kpe2lmKGFyZ1R5cGVzW2ldIT09bnVsbCYmYXJnVHlwZXNbaV0uZGVzdHJ1Y3RvckZ1bmN0aW9uPT09dW5kZWZpbmVkKXtuZWVkc0Rlc3RydWN0b3JTdGFjaz10cnVlO2JyZWFrfX12YXIgcmV0dXJucz1hcmdUeXBlc1swXS5uYW1lIT09InZvaWQiO3ZhciBhcmdzTGlzdD0iIjt2YXIgYXJnc0xpc3RXaXJlZD0iIjtmb3IodmFyIGk9MDtpPGFyZ0NvdW50LTI7KytpKXthcmdzTGlzdCs9KGkhPT0wPyIsICI6IiIpKyJhcmciK2k7YXJnc0xpc3RXaXJlZCs9KGkhPT0wPyIsICI6IiIpKyJhcmciK2krIldpcmVkIjt9dmFyIGludm9rZXJGbkJvZHk9InJldHVybiBmdW5jdGlvbiAiK21ha2VMZWdhbEZ1bmN0aW9uTmFtZShodW1hbk5hbWUpKyIoIithcmdzTGlzdCsiKSB7XG4iKyJpZiAoYXJndW1lbnRzLmxlbmd0aCAhPT0gIisoYXJnQ291bnQtMikrIikge1xuIisidGhyb3dCaW5kaW5nRXJyb3IoJ2Z1bmN0aW9uICIraHVtYW5OYW1lKyIgY2FsbGVkIHdpdGggJyArIGFyZ3VtZW50cy5sZW5ndGggKyAnIGFyZ3VtZW50cywgZXhwZWN0ZWQgIisoYXJnQ291bnQtMikrIiBhcmdzIScpO1xuIisifVxuIjtpZihuZWVkc0Rlc3RydWN0b3JTdGFjayl7aW52b2tlckZuQm9keSs9InZhciBkZXN0cnVjdG9ycyA9IFtdO1xuIjt9dmFyIGR0b3JTdGFjaz1uZWVkc0Rlc3RydWN0b3JTdGFjaz8iZGVzdHJ1Y3RvcnMiOiJudWxsIjt2YXIgYXJnczE9WyJ0aHJvd0JpbmRpbmdFcnJvciIsImludm9rZXIiLCJmbiIsInJ1bkRlc3RydWN0b3JzIiwicmV0VHlwZSIsImNsYXNzUGFyYW0iXTt2YXIgYXJnczI9W3Rocm93QmluZGluZ0Vycm9yLGNwcEludm9rZXJGdW5jLGNwcFRhcmdldEZ1bmMscnVuRGVzdHJ1Y3RvcnMsYXJnVHlwZXNbMF0sYXJnVHlwZXNbMV1dO2lmKGlzQ2xhc3NNZXRob2RGdW5jKXtpbnZva2VyRm5Cb2R5Kz0idmFyIHRoaXNXaXJlZCA9IGNsYXNzUGFyYW0udG9XaXJlVHlwZSgiK2R0b3JTdGFjaysiLCB0aGlzKTtcbiI7fWZvcih2YXIgaT0wO2k8YXJnQ291bnQtMjsrK2kpe2ludm9rZXJGbkJvZHkrPSJ2YXIgYXJnIitpKyJXaXJlZCA9IGFyZ1R5cGUiK2krIi50b1dpcmVUeXBlKCIrZHRvclN0YWNrKyIsIGFyZyIraSsiKTsgLy8gIithcmdUeXBlc1tpKzJdLm5hbWUrIlxuIjthcmdzMS5wdXNoKCJhcmdUeXBlIitpKTthcmdzMi5wdXNoKGFyZ1R5cGVzW2krMl0pO31pZihpc0NsYXNzTWV0aG9kRnVuYyl7YXJnc0xpc3RXaXJlZD0idGhpc1dpcmVkIisoYXJnc0xpc3RXaXJlZC5sZW5ndGg+MD8iLCAiOiIiKSthcmdzTGlzdFdpcmVkO31pbnZva2VyRm5Cb2R5Kz0ocmV0dXJucz8idmFyIHJ2ID0gIjoiIikrImludm9rZXIoZm4iKyhhcmdzTGlzdFdpcmVkLmxlbmd0aD4wPyIsICI6IiIpK2FyZ3NMaXN0V2lyZWQrIik7XG4iO2lmKG5lZWRzRGVzdHJ1Y3RvclN0YWNrKXtpbnZva2VyRm5Cb2R5Kz0icnVuRGVzdHJ1Y3RvcnMoZGVzdHJ1Y3RvcnMpO1xuIjt9ZWxzZSB7Zm9yKHZhciBpPWlzQ2xhc3NNZXRob2RGdW5jPzE6MjtpPGFyZ1R5cGVzLmxlbmd0aDsrK2kpe3ZhciBwYXJhbU5hbWU9aT09PTE/InRoaXNXaXJlZCI6ImFyZyIrKGktMikrIldpcmVkIjtpZihhcmdUeXBlc1tpXS5kZXN0cnVjdG9yRnVuY3Rpb24hPT1udWxsKXtpbnZva2VyRm5Cb2R5Kz1wYXJhbU5hbWUrIl9kdG9yKCIrcGFyYW1OYW1lKyIpOyAvLyAiK2FyZ1R5cGVzW2ldLm5hbWUrIlxuIjthcmdzMS5wdXNoKHBhcmFtTmFtZSsiX2R0b3IiKTthcmdzMi5wdXNoKGFyZ1R5cGVzW2ldLmRlc3RydWN0b3JGdW5jdGlvbik7fX19aWYocmV0dXJucyl7aW52b2tlckZuQm9keSs9InZhciByZXQgPSByZXRUeXBlLmZyb21XaXJlVHlwZShydik7XG4iKyJyZXR1cm4gcmV0O1xuIjt9aW52b2tlckZuQm9keSs9In1cbiI7YXJnczEucHVzaChpbnZva2VyRm5Cb2R5KTt2YXIgaW52b2tlckZ1bmN0aW9uPW5ld18oRnVuY3Rpb24sYXJnczEpLmFwcGx5KG51bGwsYXJnczIpO3JldHVybiBpbnZva2VyRnVuY3Rpb259ZnVuY3Rpb24gX19lbWJpbmRfcmVnaXN0ZXJfY2xhc3NfZnVuY3Rpb24ocmF3Q2xhc3NUeXBlLG1ldGhvZE5hbWUsYXJnQ291bnQscmF3QXJnVHlwZXNBZGRyLGludm9rZXJTaWduYXR1cmUscmF3SW52b2tlcixjb250ZXh0LGlzUHVyZVZpcnR1YWwpe3ZhciByYXdBcmdUeXBlcz1oZWFwMzJWZWN0b3JUb0FycmF5KGFyZ0NvdW50LHJhd0FyZ1R5cGVzQWRkcik7bWV0aG9kTmFtZT1yZWFkTGF0aW4xU3RyaW5nKG1ldGhvZE5hbWUpO3Jhd0ludm9rZXI9ZW1iaW5kX19yZXF1aXJlRnVuY3Rpb24oaW52b2tlclNpZ25hdHVyZSxyYXdJbnZva2VyKTt3aGVuRGVwZW5kZW50VHlwZXNBcmVSZXNvbHZlZChbXSxbcmF3Q2xhc3NUeXBlXSwoZnVuY3Rpb24oY2xhc3NUeXBlKXtjbGFzc1R5cGU9Y2xhc3NUeXBlWzBdO3ZhciBodW1hbk5hbWU9Y2xhc3NUeXBlLm5hbWUrIi4iK21ldGhvZE5hbWU7aWYoaXNQdXJlVmlydHVhbCl7Y2xhc3NUeXBlLnJlZ2lzdGVyZWRDbGFzcy5wdXJlVmlydHVhbEZ1bmN0aW9ucy5wdXNoKG1ldGhvZE5hbWUpO31mdW5jdGlvbiB1bmJvdW5kVHlwZXNIYW5kbGVyKCl7dGhyb3dVbmJvdW5kVHlwZUVycm9yKCJDYW5ub3QgY2FsbCAiK2h1bWFuTmFtZSsiIGR1ZSB0byB1bmJvdW5kIHR5cGVzIixyYXdBcmdUeXBlcyk7fXZhciBwcm90bz1jbGFzc1R5cGUucmVnaXN0ZXJlZENsYXNzLmluc3RhbmNlUHJvdG90eXBlO3ZhciBtZXRob2Q9cHJvdG9bbWV0aG9kTmFtZV07aWYodW5kZWZpbmVkPT09bWV0aG9kfHx1bmRlZmluZWQ9PT1tZXRob2Qub3ZlcmxvYWRUYWJsZSYmbWV0aG9kLmNsYXNzTmFtZSE9PWNsYXNzVHlwZS5uYW1lJiZtZXRob2QuYXJnQ291bnQ9PT1hcmdDb3VudC0yKXt1bmJvdW5kVHlwZXNIYW5kbGVyLmFyZ0NvdW50PWFyZ0NvdW50LTI7dW5ib3VuZFR5cGVzSGFuZGxlci5jbGFzc05hbWU9Y2xhc3NUeXBlLm5hbWU7cHJvdG9bbWV0aG9kTmFtZV09dW5ib3VuZFR5cGVzSGFuZGxlcjt9ZWxzZSB7ZW5zdXJlT3ZlcmxvYWRUYWJsZShwcm90byxtZXRob2ROYW1lLGh1bWFuTmFtZSk7cHJvdG9bbWV0aG9kTmFtZV0ub3ZlcmxvYWRUYWJsZVthcmdDb3VudC0yXT11bmJvdW5kVHlwZXNIYW5kbGVyO313aGVuRGVwZW5kZW50VHlwZXNBcmVSZXNvbHZlZChbXSxyYXdBcmdUeXBlcywoZnVuY3Rpb24oYXJnVHlwZXMpe3ZhciBtZW1iZXJGdW5jdGlvbj1jcmFmdEludm9rZXJGdW5jdGlvbihodW1hbk5hbWUsYXJnVHlwZXMsY2xhc3NUeXBlLHJhd0ludm9rZXIsY29udGV4dCk7aWYodW5kZWZpbmVkPT09cHJvdG9bbWV0aG9kTmFtZV0ub3ZlcmxvYWRUYWJsZSl7bWVtYmVyRnVuY3Rpb24uYXJnQ291bnQ9YXJnQ291bnQtMjtwcm90b1ttZXRob2ROYW1lXT1tZW1iZXJGdW5jdGlvbjt9ZWxzZSB7cHJvdG9bbWV0aG9kTmFtZV0ub3ZlcmxvYWRUYWJsZVthcmdDb3VudC0yXT1tZW1iZXJGdW5jdGlvbjt9cmV0dXJuIFtdfSkpO3JldHVybiBbXX0pKTt9dmFyIGVtdmFsX2ZyZWVfbGlzdD1bXTt2YXIgZW12YWxfaGFuZGxlX2FycmF5PVt7fSx7dmFsdWU6dW5kZWZpbmVkfSx7dmFsdWU6bnVsbH0se3ZhbHVlOnRydWV9LHt2YWx1ZTpmYWxzZX1dO2Z1bmN0aW9uIF9fZW12YWxfZGVjcmVmKGhhbmRsZSl7aWYoaGFuZGxlPjQmJjA9PT0tLWVtdmFsX2hhbmRsZV9hcnJheVtoYW5kbGVdLnJlZmNvdW50KXtlbXZhbF9oYW5kbGVfYXJyYXlbaGFuZGxlXT11bmRlZmluZWQ7ZW12YWxfZnJlZV9saXN0LnB1c2goaGFuZGxlKTt9fWZ1bmN0aW9uIGNvdW50X2VtdmFsX2hhbmRsZXMoKXt2YXIgY291bnQ9MDtmb3IodmFyIGk9NTtpPGVtdmFsX2hhbmRsZV9hcnJheS5sZW5ndGg7KytpKXtpZihlbXZhbF9oYW5kbGVfYXJyYXlbaV0hPT11bmRlZmluZWQpeysrY291bnQ7fX1yZXR1cm4gY291bnR9ZnVuY3Rpb24gZ2V0X2ZpcnN0X2VtdmFsKCl7Zm9yKHZhciBpPTU7aTxlbXZhbF9oYW5kbGVfYXJyYXkubGVuZ3RoOysraSl7aWYoZW12YWxfaGFuZGxlX2FycmF5W2ldIT09dW5kZWZpbmVkKXtyZXR1cm4gZW12YWxfaGFuZGxlX2FycmF5W2ldfX1yZXR1cm4gbnVsbH1mdW5jdGlvbiBpbml0X2VtdmFsKCl7TW9kdWxlWyJjb3VudF9lbXZhbF9oYW5kbGVzIl09Y291bnRfZW12YWxfaGFuZGxlcztNb2R1bGVbImdldF9maXJzdF9lbXZhbCJdPWdldF9maXJzdF9lbXZhbDt9ZnVuY3Rpb24gX19lbXZhbF9yZWdpc3Rlcih2YWx1ZSl7c3dpdGNoKHZhbHVlKXtjYXNlIHVuZGVmaW5lZDp7cmV0dXJuIDF9Y2FzZSBudWxsOntyZXR1cm4gMn1jYXNlIHRydWU6e3JldHVybiAzfWNhc2UgZmFsc2U6e3JldHVybiA0fWRlZmF1bHQ6e3ZhciBoYW5kbGU9ZW12YWxfZnJlZV9saXN0Lmxlbmd0aD9lbXZhbF9mcmVlX2xpc3QucG9wKCk6ZW12YWxfaGFuZGxlX2FycmF5Lmxlbmd0aDtlbXZhbF9oYW5kbGVfYXJyYXlbaGFuZGxlXT17cmVmY291bnQ6MSx2YWx1ZTp2YWx1ZX07cmV0dXJuIGhhbmRsZX19fWZ1bmN0aW9uIF9fZW1iaW5kX3JlZ2lzdGVyX2VtdmFsKHJhd1R5cGUsbmFtZSl7bmFtZT1yZWFkTGF0aW4xU3RyaW5nKG5hbWUpO3JlZ2lzdGVyVHlwZShyYXdUeXBlLHtuYW1lOm5hbWUsImZyb21XaXJlVHlwZSI6KGZ1bmN0aW9uKGhhbmRsZSl7dmFyIHJ2PWVtdmFsX2hhbmRsZV9hcnJheVtoYW5kbGVdLnZhbHVlO19fZW12YWxfZGVjcmVmKGhhbmRsZSk7cmV0dXJuIHJ2fSksInRvV2lyZVR5cGUiOihmdW5jdGlvbihkZXN0cnVjdG9ycyx2YWx1ZSl7cmV0dXJuIF9fZW12YWxfcmVnaXN0ZXIodmFsdWUpfSksImFyZ1BhY2tBZHZhbmNlIjo4LCJyZWFkVmFsdWVGcm9tUG9pbnRlciI6c2ltcGxlUmVhZFZhbHVlRnJvbVBvaW50ZXIsZGVzdHJ1Y3RvckZ1bmN0aW9uOm51bGx9KTt9ZnVuY3Rpb24gX2VtYmluZF9yZXByKHYpe2lmKHY9PT1udWxsKXtyZXR1cm4gIm51bGwifXZhciB0PXR5cGVvZiB2O2lmKHQ9PT0ib2JqZWN0Inx8dD09PSJhcnJheSJ8fHQ9PT0iZnVuY3Rpb24iKXtyZXR1cm4gdi50b1N0cmluZygpfWVsc2Uge3JldHVybiAiIit2fX1mdW5jdGlvbiBmbG9hdFJlYWRWYWx1ZUZyb21Qb2ludGVyKG5hbWUsc2hpZnQpe3N3aXRjaChzaGlmdCl7Y2FzZSAyOnJldHVybihmdW5jdGlvbihwb2ludGVyKXtyZXR1cm4gdGhpc1siZnJvbVdpcmVUeXBlIl0oSEVBUEYzMltwb2ludGVyPj4yXSl9KTtjYXNlIDM6cmV0dXJuKGZ1bmN0aW9uKHBvaW50ZXIpe3JldHVybiB0aGlzWyJmcm9tV2lyZVR5cGUiXShIRUFQRjY0W3BvaW50ZXI+PjNdKX0pO2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBmbG9hdCB0eXBlOiAiK25hbWUpfX1mdW5jdGlvbiBfX2VtYmluZF9yZWdpc3Rlcl9mbG9hdChyYXdUeXBlLG5hbWUsc2l6ZSl7dmFyIHNoaWZ0PWdldFNoaWZ0RnJvbVNpemUoc2l6ZSk7bmFtZT1yZWFkTGF0aW4xU3RyaW5nKG5hbWUpO3JlZ2lzdGVyVHlwZShyYXdUeXBlLHtuYW1lOm5hbWUsImZyb21XaXJlVHlwZSI6KGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdmFsdWV9KSwidG9XaXJlVHlwZSI6KGZ1bmN0aW9uKGRlc3RydWN0b3JzLHZhbHVlKXtpZih0eXBlb2YgdmFsdWUhPT0ibnVtYmVyIiYmdHlwZW9mIHZhbHVlIT09ImJvb2xlYW4iKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCAiJytfZW1iaW5kX3JlcHIodmFsdWUpKyciIHRvICcrdGhpcy5uYW1lKX1yZXR1cm4gdmFsdWV9KSwiYXJnUGFja0FkdmFuY2UiOjgsInJlYWRWYWx1ZUZyb21Qb2ludGVyIjpmbG9hdFJlYWRWYWx1ZUZyb21Qb2ludGVyKG5hbWUsc2hpZnQpLGRlc3RydWN0b3JGdW5jdGlvbjpudWxsfSk7fWZ1bmN0aW9uIGludGVnZXJSZWFkVmFsdWVGcm9tUG9pbnRlcihuYW1lLHNoaWZ0LHNpZ25lZCl7c3dpdGNoKHNoaWZ0KXtjYXNlIDA6cmV0dXJuIHNpZ25lZD9mdW5jdGlvbiByZWFkUzhGcm9tUG9pbnRlcihwb2ludGVyKXtyZXR1cm4gSEVBUDhbcG9pbnRlcl19OmZ1bmN0aW9uIHJlYWRVOEZyb21Qb2ludGVyKHBvaW50ZXIpe3JldHVybiBIRUFQVThbcG9pbnRlcl19O2Nhc2UgMTpyZXR1cm4gc2lnbmVkP2Z1bmN0aW9uIHJlYWRTMTZGcm9tUG9pbnRlcihwb2ludGVyKXtyZXR1cm4gSEVBUDE2W3BvaW50ZXI+PjFdfTpmdW5jdGlvbiByZWFkVTE2RnJvbVBvaW50ZXIocG9pbnRlcil7cmV0dXJuIEhFQVBVMTZbcG9pbnRlcj4+MV19O2Nhc2UgMjpyZXR1cm4gc2lnbmVkP2Z1bmN0aW9uIHJlYWRTMzJGcm9tUG9pbnRlcihwb2ludGVyKXtyZXR1cm4gSEVBUDMyW3BvaW50ZXI+PjJdfTpmdW5jdGlvbiByZWFkVTMyRnJvbVBvaW50ZXIocG9pbnRlcil7cmV0dXJuIEhFQVBVMzJbcG9pbnRlcj4+Ml19O2RlZmF1bHQ6dGhyb3cgbmV3IFR5cGVFcnJvcigiVW5rbm93biBpbnRlZ2VyIHR5cGU6ICIrbmFtZSl9fWZ1bmN0aW9uIF9fZW1iaW5kX3JlZ2lzdGVyX2ludGVnZXIocHJpbWl0aXZlVHlwZSxuYW1lLHNpemUsbWluUmFuZ2UsbWF4UmFuZ2Upe25hbWU9cmVhZExhdGluMVN0cmluZyhuYW1lKTtpZihtYXhSYW5nZT09PS0xKXttYXhSYW5nZT00Mjk0OTY3Mjk1O312YXIgc2hpZnQ9Z2V0U2hpZnRGcm9tU2l6ZShzaXplKTt2YXIgZnJvbVdpcmVUeXBlPShmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbHVlfSk7aWYobWluUmFuZ2U9PT0wKXt2YXIgYml0c2hpZnQ9MzItOCpzaXplO2Zyb21XaXJlVHlwZT0oZnVuY3Rpb24odmFsdWUpe3JldHVybiB2YWx1ZTw8Yml0c2hpZnQ+Pj5iaXRzaGlmdH0pO312YXIgaXNVbnNpZ25lZFR5cGU9bmFtZS5pbmRleE9mKCJ1bnNpZ25lZCIpIT0tMTtyZWdpc3RlclR5cGUocHJpbWl0aXZlVHlwZSx7bmFtZTpuYW1lLCJmcm9tV2lyZVR5cGUiOmZyb21XaXJlVHlwZSwidG9XaXJlVHlwZSI6KGZ1bmN0aW9uKGRlc3RydWN0b3JzLHZhbHVlKXtpZih0eXBlb2YgdmFsdWUhPT0ibnVtYmVyIiYmdHlwZW9mIHZhbHVlIT09ImJvb2xlYW4iKXt0aHJvdyBuZXcgVHlwZUVycm9yKCdDYW5ub3QgY29udmVydCAiJytfZW1iaW5kX3JlcHIodmFsdWUpKyciIHRvICcrdGhpcy5uYW1lKX1pZih2YWx1ZTxtaW5SYW5nZXx8dmFsdWU+bWF4UmFuZ2Upe3Rocm93IG5ldyBUeXBlRXJyb3IoJ1Bhc3NpbmcgYSBudW1iZXIgIicrX2VtYmluZF9yZXByKHZhbHVlKSsnIiBmcm9tIEpTIHNpZGUgdG8gQy9DKysgc2lkZSB0byBhbiBhcmd1bWVudCBvZiB0eXBlICInK25hbWUrJyIsIHdoaWNoIGlzIG91dHNpZGUgdGhlIHZhbGlkIHJhbmdlIFsnK21pblJhbmdlKyIsICIrbWF4UmFuZ2UrIl0hIil9cmV0dXJuIGlzVW5zaWduZWRUeXBlP3ZhbHVlPj4+MDp2YWx1ZXwwfSksImFyZ1BhY2tBZHZhbmNlIjo4LCJyZWFkVmFsdWVGcm9tUG9pbnRlciI6aW50ZWdlclJlYWRWYWx1ZUZyb21Qb2ludGVyKG5hbWUsc2hpZnQsbWluUmFuZ2UhPT0wKSxkZXN0cnVjdG9yRnVuY3Rpb246bnVsbH0pO31mdW5jdGlvbiBfX2VtYmluZF9yZWdpc3Rlcl9tZW1vcnlfdmlldyhyYXdUeXBlLGRhdGFUeXBlSW5kZXgsbmFtZSl7dmFyIHR5cGVNYXBwaW5nPVtJbnQ4QXJyYXksVWludDhBcnJheSxJbnQxNkFycmF5LFVpbnQxNkFycmF5LEludDMyQXJyYXksVWludDMyQXJyYXksRmxvYXQzMkFycmF5LEZsb2F0NjRBcnJheV07dmFyIFRBPXR5cGVNYXBwaW5nW2RhdGFUeXBlSW5kZXhdO2Z1bmN0aW9uIGRlY29kZU1lbW9yeVZpZXcoaGFuZGxlKXtoYW5kbGU9aGFuZGxlPj4yO3ZhciBoZWFwPUhFQVBVMzI7dmFyIHNpemU9aGVhcFtoYW5kbGVdO3ZhciBkYXRhPWhlYXBbaGFuZGxlKzFdO3JldHVybiBuZXcgVEEoaGVhcFsiYnVmZmVyIl0sZGF0YSxzaXplKX1uYW1lPXJlYWRMYXRpbjFTdHJpbmcobmFtZSk7cmVnaXN0ZXJUeXBlKHJhd1R5cGUse25hbWU6bmFtZSwiZnJvbVdpcmVUeXBlIjpkZWNvZGVNZW1vcnlWaWV3LCJhcmdQYWNrQWR2YW5jZSI6OCwicmVhZFZhbHVlRnJvbVBvaW50ZXIiOmRlY29kZU1lbW9yeVZpZXd9LHtpZ25vcmVEdXBsaWNhdGVSZWdpc3RyYXRpb25zOnRydWV9KTt9ZnVuY3Rpb24gX19lbWJpbmRfcmVnaXN0ZXJfc3RkX3N0cmluZyhyYXdUeXBlLG5hbWUpe25hbWU9cmVhZExhdGluMVN0cmluZyhuYW1lKTtyZWdpc3RlclR5cGUocmF3VHlwZSx7bmFtZTpuYW1lLCJmcm9tV2lyZVR5cGUiOihmdW5jdGlvbih2YWx1ZSl7dmFyIGxlbmd0aD1IRUFQVTMyW3ZhbHVlPj4yXTt2YXIgYT1uZXcgQXJyYXkobGVuZ3RoKTtmb3IodmFyIGk9MDtpPGxlbmd0aDsrK2kpe2FbaV09U3RyaW5nLmZyb21DaGFyQ29kZShIRUFQVThbdmFsdWUrNCtpXSk7fV9mcmVlKHZhbHVlKTtyZXR1cm4gYS5qb2luKCIiKX0pLCJ0b1dpcmVUeXBlIjooZnVuY3Rpb24oZGVzdHJ1Y3RvcnMsdmFsdWUpe2lmKHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpe3ZhbHVlPW5ldyBVaW50OEFycmF5KHZhbHVlKTt9ZnVuY3Rpb24gZ2V0VEFFbGVtZW50KHRhLGluZGV4KXtyZXR1cm4gdGFbaW5kZXhdfWZ1bmN0aW9uIGdldFN0cmluZ0VsZW1lbnQoc3RyaW5nLGluZGV4KXtyZXR1cm4gc3RyaW5nLmNoYXJDb2RlQXQoaW5kZXgpfXZhciBnZXRFbGVtZW50O2lmKHZhbHVlIGluc3RhbmNlb2YgVWludDhBcnJheSl7Z2V0RWxlbWVudD1nZXRUQUVsZW1lbnQ7fWVsc2UgaWYodmFsdWUgaW5zdGFuY2VvZiBVaW50OENsYW1wZWRBcnJheSl7Z2V0RWxlbWVudD1nZXRUQUVsZW1lbnQ7fWVsc2UgaWYodmFsdWUgaW5zdGFuY2VvZiBJbnQ4QXJyYXkpe2dldEVsZW1lbnQ9Z2V0VEFFbGVtZW50O31lbHNlIGlmKHR5cGVvZiB2YWx1ZT09PSJzdHJpbmciKXtnZXRFbGVtZW50PWdldFN0cmluZ0VsZW1lbnQ7fWVsc2Uge3Rocm93QmluZGluZ0Vycm9yKCJDYW5ub3QgcGFzcyBub24tc3RyaW5nIHRvIHN0ZDo6c3RyaW5nIik7fXZhciBsZW5ndGg9dmFsdWUubGVuZ3RoO3ZhciBwdHI9X21hbGxvYyg0K2xlbmd0aCk7SEVBUFUzMltwdHI+PjJdPWxlbmd0aDtmb3IodmFyIGk9MDtpPGxlbmd0aDsrK2kpe3ZhciBjaGFyQ29kZT1nZXRFbGVtZW50KHZhbHVlLGkpO2lmKGNoYXJDb2RlPjI1NSl7X2ZyZWUocHRyKTt0aHJvd0JpbmRpbmdFcnJvcigiU3RyaW5nIGhhcyBVVEYtMTYgY29kZSB1bml0cyB0aGF0IGRvIG5vdCBmaXQgaW4gOCBiaXRzIik7fUhFQVBVOFtwdHIrNCtpXT1jaGFyQ29kZTt9aWYoZGVzdHJ1Y3RvcnMhPT1udWxsKXtkZXN0cnVjdG9ycy5wdXNoKF9mcmVlLHB0cik7fXJldHVybiBwdHJ9KSwiYXJnUGFja0FkdmFuY2UiOjgsInJlYWRWYWx1ZUZyb21Qb2ludGVyIjpzaW1wbGVSZWFkVmFsdWVGcm9tUG9pbnRlcixkZXN0cnVjdG9yRnVuY3Rpb246KGZ1bmN0aW9uKHB0cil7X2ZyZWUocHRyKTt9KX0pO31mdW5jdGlvbiBfX2VtYmluZF9yZWdpc3Rlcl9zdGRfd3N0cmluZyhyYXdUeXBlLGNoYXJTaXplLG5hbWUpe25hbWU9cmVhZExhdGluMVN0cmluZyhuYW1lKTt2YXIgZ2V0SGVhcCxzaGlmdDtpZihjaGFyU2l6ZT09PTIpe2dldEhlYXA9KGZ1bmN0aW9uKCl7cmV0dXJuIEhFQVBVMTZ9KTtzaGlmdD0xO31lbHNlIGlmKGNoYXJTaXplPT09NCl7Z2V0SGVhcD0oZnVuY3Rpb24oKXtyZXR1cm4gSEVBUFUzMn0pO3NoaWZ0PTI7fXJlZ2lzdGVyVHlwZShyYXdUeXBlLHtuYW1lOm5hbWUsImZyb21XaXJlVHlwZSI6KGZ1bmN0aW9uKHZhbHVlKXt2YXIgSEVBUD1nZXRIZWFwKCk7dmFyIGxlbmd0aD1IRUFQVTMyW3ZhbHVlPj4yXTt2YXIgYT1uZXcgQXJyYXkobGVuZ3RoKTt2YXIgc3RhcnQ9dmFsdWUrND4+c2hpZnQ7Zm9yKHZhciBpPTA7aTxsZW5ndGg7KytpKXthW2ldPVN0cmluZy5mcm9tQ2hhckNvZGUoSEVBUFtzdGFydCtpXSk7fV9mcmVlKHZhbHVlKTtyZXR1cm4gYS5qb2luKCIiKX0pLCJ0b1dpcmVUeXBlIjooZnVuY3Rpb24oZGVzdHJ1Y3RvcnMsdmFsdWUpe3ZhciBIRUFQPWdldEhlYXAoKTt2YXIgbGVuZ3RoPXZhbHVlLmxlbmd0aDt2YXIgcHRyPV9tYWxsb2MoNCtsZW5ndGgqY2hhclNpemUpO0hFQVBVMzJbcHRyPj4yXT1sZW5ndGg7dmFyIHN0YXJ0PXB0cis0Pj5zaGlmdDtmb3IodmFyIGk9MDtpPGxlbmd0aDsrK2kpe0hFQVBbc3RhcnQraV09dmFsdWUuY2hhckNvZGVBdChpKTt9aWYoZGVzdHJ1Y3RvcnMhPT1udWxsKXtkZXN0cnVjdG9ycy5wdXNoKF9mcmVlLHB0cik7fXJldHVybiBwdHJ9KSwiYXJnUGFja0FkdmFuY2UiOjgsInJlYWRWYWx1ZUZyb21Qb2ludGVyIjpzaW1wbGVSZWFkVmFsdWVGcm9tUG9pbnRlcixkZXN0cnVjdG9yRnVuY3Rpb246KGZ1bmN0aW9uKHB0cil7X2ZyZWUocHRyKTt9KX0pO31mdW5jdGlvbiBfX2VtYmluZF9yZWdpc3Rlcl92YWx1ZV9vYmplY3QocmF3VHlwZSxuYW1lLGNvbnN0cnVjdG9yU2lnbmF0dXJlLHJhd0NvbnN0cnVjdG9yLGRlc3RydWN0b3JTaWduYXR1cmUscmF3RGVzdHJ1Y3Rvcil7c3RydWN0UmVnaXN0cmF0aW9uc1tyYXdUeXBlXT17bmFtZTpyZWFkTGF0aW4xU3RyaW5nKG5hbWUpLHJhd0NvbnN0cnVjdG9yOmVtYmluZF9fcmVxdWlyZUZ1bmN0aW9uKGNvbnN0cnVjdG9yU2lnbmF0dXJlLHJhd0NvbnN0cnVjdG9yKSxyYXdEZXN0cnVjdG9yOmVtYmluZF9fcmVxdWlyZUZ1bmN0aW9uKGRlc3RydWN0b3JTaWduYXR1cmUscmF3RGVzdHJ1Y3RvciksZmllbGRzOltdfTt9ZnVuY3Rpb24gX19lbWJpbmRfcmVnaXN0ZXJfdmFsdWVfb2JqZWN0X2ZpZWxkKHN0cnVjdFR5cGUsZmllbGROYW1lLGdldHRlclJldHVyblR5cGUsZ2V0dGVyU2lnbmF0dXJlLGdldHRlcixnZXR0ZXJDb250ZXh0LHNldHRlckFyZ3VtZW50VHlwZSxzZXR0ZXJTaWduYXR1cmUsc2V0dGVyLHNldHRlckNvbnRleHQpe3N0cnVjdFJlZ2lzdHJhdGlvbnNbc3RydWN0VHlwZV0uZmllbGRzLnB1c2goe2ZpZWxkTmFtZTpyZWFkTGF0aW4xU3RyaW5nKGZpZWxkTmFtZSksZ2V0dGVyUmV0dXJuVHlwZTpnZXR0ZXJSZXR1cm5UeXBlLGdldHRlcjplbWJpbmRfX3JlcXVpcmVGdW5jdGlvbihnZXR0ZXJTaWduYXR1cmUsZ2V0dGVyKSxnZXR0ZXJDb250ZXh0OmdldHRlckNvbnRleHQsc2V0dGVyQXJndW1lbnRUeXBlOnNldHRlckFyZ3VtZW50VHlwZSxzZXR0ZXI6ZW1iaW5kX19yZXF1aXJlRnVuY3Rpb24oc2V0dGVyU2lnbmF0dXJlLHNldHRlciksc2V0dGVyQ29udGV4dDpzZXR0ZXJDb250ZXh0fSk7fWZ1bmN0aW9uIF9fZW1iaW5kX3JlZ2lzdGVyX3ZvaWQocmF3VHlwZSxuYW1lKXtuYW1lPXJlYWRMYXRpbjFTdHJpbmcobmFtZSk7cmVnaXN0ZXJUeXBlKHJhd1R5cGUse2lzVm9pZDp0cnVlLG5hbWU6bmFtZSwiYXJnUGFja0FkdmFuY2UiOjAsImZyb21XaXJlVHlwZSI6KGZ1bmN0aW9uKCl7cmV0dXJuIHVuZGVmaW5lZH0pLCJ0b1dpcmVUeXBlIjooZnVuY3Rpb24oZGVzdHJ1Y3RvcnMsbyl7cmV0dXJuIHVuZGVmaW5lZH0pfSk7fWZ1bmN0aW9uIF9hYm9ydCgpe01vZHVsZVsiYWJvcnQiXSgpO312YXIgX2Vudmlyb249U1RBVElDVE9QO1NUQVRJQ1RPUCs9MTY7ZnVuY3Rpb24gX19fYnVpbGRFbnZpcm9ubWVudChlbnYpe3ZhciBNQVhfRU5WX1ZBTFVFUz02NDt2YXIgVE9UQUxfRU5WX1NJWkU9MTAyNDt2YXIgcG9vbFB0cjt2YXIgZW52UHRyO2lmKCFfX19idWlsZEVudmlyb25tZW50LmNhbGxlZCl7X19fYnVpbGRFbnZpcm9ubWVudC5jYWxsZWQ9dHJ1ZTtFTlZbIlVTRVIiXT1FTlZbIkxPR05BTUUiXT0id2ViX3VzZXIiO0VOVlsiUEFUSCJdPSIvIjtFTlZbIlBXRCJdPSIvIjtFTlZbIkhPTUUiXT0iL2hvbWUvd2ViX3VzZXIiO0VOVlsiTEFORyJdPSJDLlVURi04IjtFTlZbIl8iXT1Nb2R1bGVbInRoaXNQcm9ncmFtIl07cG9vbFB0cj1zdGF0aWNBbGxvYyhUT1RBTF9FTlZfU0laRSk7ZW52UHRyPXN0YXRpY0FsbG9jKE1BWF9FTlZfVkFMVUVTKjQpO0hFQVAzMltlbnZQdHI+PjJdPXBvb2xQdHI7SEVBUDMyW19lbnZpcm9uPj4yXT1lbnZQdHI7fWVsc2Uge2VudlB0cj1IRUFQMzJbX2Vudmlyb24+PjJdO3Bvb2xQdHI9SEVBUDMyW2VudlB0cj4+Ml07fXZhciBzdHJpbmdzPVtdO3ZhciB0b3RhbFNpemU9MDtmb3IodmFyIGtleSBpbiBlbnYpe2lmKHR5cGVvZiBlbnZba2V5XT09PSJzdHJpbmciKXt2YXIgbGluZT1rZXkrIj0iK2VudltrZXldO3N0cmluZ3MucHVzaChsaW5lKTt0b3RhbFNpemUrPWxpbmUubGVuZ3RoO319aWYodG90YWxTaXplPlRPVEFMX0VOVl9TSVpFKXt0aHJvdyBuZXcgRXJyb3IoIkVudmlyb25tZW50IHNpemUgZXhjZWVkZWQgVE9UQUxfRU5WX1NJWkUhIil9dmFyIHB0clNpemU9NDtmb3IodmFyIGk9MDtpPHN0cmluZ3MubGVuZ3RoO2krKyl7dmFyIGxpbmU9c3RyaW5nc1tpXTt3cml0ZUFzY2lpVG9NZW1vcnkobGluZSxwb29sUHRyKTtIRUFQMzJbZW52UHRyK2kqcHRyU2l6ZT4+Ml09cG9vbFB0cjtwb29sUHRyKz1saW5lLmxlbmd0aCsxO31IRUFQMzJbZW52UHRyK3N0cmluZ3MubGVuZ3RoKnB0clNpemU+PjJdPTA7fXZhciBFTlY9e307ZnVuY3Rpb24gX2dldGVudihuYW1lKXtpZihuYW1lPT09MClyZXR1cm4gMDtuYW1lPVBvaW50ZXJfc3RyaW5naWZ5KG5hbWUpO2lmKCFFTlYuaGFzT3duUHJvcGVydHkobmFtZSkpcmV0dXJuIDA7aWYoX2dldGVudi5yZXQpX2ZyZWUoX2dldGVudi5yZXQpO19nZXRlbnYucmV0PWFsbG9jYXRlVVRGOChFTlZbbmFtZV0pO3JldHVybiBfZ2V0ZW52LnJldH1mdW5jdGlvbiBfZ2V0Z3JuYW0oKXtNb2R1bGVbInByaW50RXJyIl0oIm1pc3NpbmcgZnVuY3Rpb246IGdldGdybmFtIik7YWJvcnQoLTEpO31mdW5jdGlvbiBfZ2V0cHduYW0oKXt0aHJvdyAiZ2V0cHduYW06IFRPRE8ifWZ1bmN0aW9uIF9qc0Nsb3NlKCl7cmV0dXJuIGpzQVBJLmNsb3NlLmFwcGx5KG51bGwsYXJndW1lbnRzKX1mdW5jdGlvbiBfanNDcmVhdGUoZmlsZW5hbWUpe3JldHVybiBqc0FQSS5jcmVhdGUuY2FsbChudWxsLFVURjMyVG9TdHJpbmcoZmlsZW5hbWUpKX1mdW5jdGlvbiBfanNPcGVuKGZpbGVuYW1lKXtyZXR1cm4ganNBUEkub3Blbi5jYWxsKG51bGwsVVRGMzJUb1N0cmluZyhmaWxlbmFtZSkpfWZ1bmN0aW9uIF9qc1JlYWQoKXtyZXR1cm4ganNBUEkucmVhZC5hcHBseShudWxsLGFyZ3VtZW50cyl9ZnVuY3Rpb24gX2pzU2VlayhmZCxvZmZzZXQsbWV0aG9kKXtyZXR1cm4ganNBUEkuc2Vlay5jYWxsKG51bGwsZmQsb2Zmc2V0LFVURjhUb1N0cmluZyhtZXRob2QpKX1mdW5jdGlvbiBfanNUZWxsKCl7cmV0dXJuIGpzQVBJLnRlbGwuYXBwbHkobnVsbCxhcmd1bWVudHMpfWZ1bmN0aW9uIF9qc1dyaXRlKCl7cmV0dXJuIGpzQVBJLndyaXRlLmFwcGx5KG51bGwsYXJndW1lbnRzKX1mdW5jdGlvbiBfbGx2bV9laF90eXBlaWRfZm9yKHR5cGUpe3JldHVybiB0eXBlfXZhciBfX190bV9jdXJyZW50PVNUQVRJQ1RPUDtTVEFUSUNUT1ArPTQ4O2FsbG9jYXRlKGludEFycmF5RnJvbVN0cmluZygiR01UIiksImk4IixBTExPQ19TVEFUSUMpO3ZhciBfdHpuYW1lPVNUQVRJQ1RPUDtTVEFUSUNUT1ArPTE2O3ZhciBfZGF5bGlnaHQ9U1RBVElDVE9QO1NUQVRJQ1RPUCs9MTY7dmFyIF90aW1lem9uZT1TVEFUSUNUT1A7U1RBVElDVE9QKz0xNjtmdW5jdGlvbiBfdHpzZXQoKXtpZihfdHpzZXQuY2FsbGVkKXJldHVybjtfdHpzZXQuY2FsbGVkPXRydWU7SEVBUDMyW190aW1lem9uZT4+Ml09KG5ldyBEYXRlKS5nZXRUaW1lem9uZU9mZnNldCgpKjYwO3ZhciB3aW50ZXI9bmV3IERhdGUoMmUzLDAsMSk7dmFyIHN1bW1lcj1uZXcgRGF0ZSgyZTMsNiwxKTtIRUFQMzJbX2RheWxpZ2h0Pj4yXT1OdW1iZXIod2ludGVyLmdldFRpbWV6b25lT2Zmc2V0KCkhPXN1bW1lci5nZXRUaW1lem9uZU9mZnNldCgpKTtmdW5jdGlvbiBleHRyYWN0Wm9uZShkYXRlKXt2YXIgbWF0Y2g9ZGF0ZS50b1RpbWVTdHJpbmcoKS5tYXRjaCgvXCgoW0EtWmEteiBdKylcKSQvKTtyZXR1cm4gbWF0Y2g/bWF0Y2hbMV06IkdNVCJ9dmFyIHdpbnRlck5hbWU9ZXh0cmFjdFpvbmUod2ludGVyKTt2YXIgc3VtbWVyTmFtZT1leHRyYWN0Wm9uZShzdW1tZXIpO3ZhciB3aW50ZXJOYW1lUHRyPWFsbG9jYXRlKGludEFycmF5RnJvbVN0cmluZyh3aW50ZXJOYW1lKSwiaTgiLEFMTE9DX05PUk1BTCk7dmFyIHN1bW1lck5hbWVQdHI9YWxsb2NhdGUoaW50QXJyYXlGcm9tU3RyaW5nKHN1bW1lck5hbWUpLCJpOCIsQUxMT0NfTk9STUFMKTtpZihzdW1tZXIuZ2V0VGltZXpvbmVPZmZzZXQoKTx3aW50ZXIuZ2V0VGltZXpvbmVPZmZzZXQoKSl7SEVBUDMyW190em5hbWU+PjJdPXdpbnRlck5hbWVQdHI7SEVBUDMyW190em5hbWUrND4+Ml09c3VtbWVyTmFtZVB0cjt9ZWxzZSB7SEVBUDMyW190em5hbWU+PjJdPXN1bW1lck5hbWVQdHI7SEVBUDMyW190em5hbWUrND4+Ml09d2ludGVyTmFtZVB0cjt9fWZ1bmN0aW9uIF9sb2NhbHRpbWVfcih0aW1lLHRtUHRyKXtfdHpzZXQoKTt2YXIgZGF0ZT1uZXcgRGF0ZShIRUFQMzJbdGltZT4+Ml0qMWUzKTtIRUFQMzJbdG1QdHI+PjJdPWRhdGUuZ2V0U2Vjb25kcygpO0hFQVAzMlt0bVB0cis0Pj4yXT1kYXRlLmdldE1pbnV0ZXMoKTtIRUFQMzJbdG1QdHIrOD4+Ml09ZGF0ZS5nZXRIb3VycygpO0hFQVAzMlt0bVB0cisxMj4+Ml09ZGF0ZS5nZXREYXRlKCk7SEVBUDMyW3RtUHRyKzE2Pj4yXT1kYXRlLmdldE1vbnRoKCk7SEVBUDMyW3RtUHRyKzIwPj4yXT1kYXRlLmdldEZ1bGxZZWFyKCktMTkwMDtIRUFQMzJbdG1QdHIrMjQ+PjJdPWRhdGUuZ2V0RGF5KCk7dmFyIHN0YXJ0PW5ldyBEYXRlKGRhdGUuZ2V0RnVsbFllYXIoKSwwLDEpO3ZhciB5ZGF5PShkYXRlLmdldFRpbWUoKS1zdGFydC5nZXRUaW1lKCkpLygxZTMqNjAqNjAqMjQpfDA7SEVBUDMyW3RtUHRyKzI4Pj4yXT15ZGF5O0hFQVAzMlt0bVB0ciszNj4+Ml09LShkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkqNjApO3ZhciBzdW1tZXJPZmZzZXQ9KG5ldyBEYXRlKDJlMyw2LDEpKS5nZXRUaW1lem9uZU9mZnNldCgpO3ZhciB3aW50ZXJPZmZzZXQ9c3RhcnQuZ2V0VGltZXpvbmVPZmZzZXQoKTt2YXIgZHN0PShzdW1tZXJPZmZzZXQhPXdpbnRlck9mZnNldCYmZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpPT1NYXRoLm1pbih3aW50ZXJPZmZzZXQsc3VtbWVyT2Zmc2V0KSl8MDtIRUFQMzJbdG1QdHIrMzI+PjJdPWRzdDt2YXIgem9uZVB0cj1IRUFQMzJbX3R6bmFtZSsoZHN0PzQ6MCk+PjJdO0hFQVAzMlt0bVB0cis0MD4+Ml09em9uZVB0cjtyZXR1cm4gdG1QdHJ9ZnVuY3Rpb24gX2xvY2FsdGltZSh0aW1lKXtyZXR1cm4gX2xvY2FsdGltZV9yKHRpbWUsX19fdG1fY3VycmVudCl9ZnVuY3Rpb24gX2Vtc2NyaXB0ZW5fbWVtY3B5X2JpZyhkZXN0LHNyYyxudW0pe0hFQVBVOC5zZXQoSEVBUFU4LnN1YmFycmF5KHNyYyxzcmMrbnVtKSxkZXN0KTtyZXR1cm4gZGVzdH1mdW5jdGlvbiBfbWt0aW1lKHRtUHRyKXtfdHpzZXQoKTt2YXIgZGF0ZT1uZXcgRGF0ZShIRUFQMzJbdG1QdHIrMjA+PjJdKzE5MDAsSEVBUDMyW3RtUHRyKzE2Pj4yXSxIRUFQMzJbdG1QdHIrMTI+PjJdLEhFQVAzMlt0bVB0cis4Pj4yXSxIRUFQMzJbdG1QdHIrND4+Ml0sSEVBUDMyW3RtUHRyPj4yXSwwKTt2YXIgZHN0PUhFQVAzMlt0bVB0ciszMj4+Ml07dmFyIGd1ZXNzZWRPZmZzZXQ9ZGF0ZS5nZXRUaW1lem9uZU9mZnNldCgpO3ZhciBzdGFydD1uZXcgRGF0ZShkYXRlLmdldEZ1bGxZZWFyKCksMCwxKTt2YXIgc3VtbWVyT2Zmc2V0PShuZXcgRGF0ZSgyZTMsNiwxKSkuZ2V0VGltZXpvbmVPZmZzZXQoKTt2YXIgd2ludGVyT2Zmc2V0PXN0YXJ0LmdldFRpbWV6b25lT2Zmc2V0KCk7dmFyIGRzdE9mZnNldD1NYXRoLm1pbih3aW50ZXJPZmZzZXQsc3VtbWVyT2Zmc2V0KTtpZihkc3Q8MCl7SEVBUDMyW3RtUHRyKzMyPj4yXT1OdW1iZXIoc3VtbWVyT2Zmc2V0IT13aW50ZXJPZmZzZXQmJmRzdE9mZnNldD09Z3Vlc3NlZE9mZnNldCk7fWVsc2UgaWYoZHN0PjAhPShkc3RPZmZzZXQ9PWd1ZXNzZWRPZmZzZXQpKXt2YXIgbm9uRHN0T2Zmc2V0PU1hdGgubWF4KHdpbnRlck9mZnNldCxzdW1tZXJPZmZzZXQpO3ZhciB0cnVlT2Zmc2V0PWRzdD4wP2RzdE9mZnNldDpub25Ec3RPZmZzZXQ7ZGF0ZS5zZXRUaW1lKGRhdGUuZ2V0VGltZSgpKyh0cnVlT2Zmc2V0LWd1ZXNzZWRPZmZzZXQpKjZlNCk7fUhFQVAzMlt0bVB0cisyND4+Ml09ZGF0ZS5nZXREYXkoKTt2YXIgeWRheT0oZGF0ZS5nZXRUaW1lKCktc3RhcnQuZ2V0VGltZSgpKS8oMWUzKjYwKjYwKjI0KXwwO0hFQVAzMlt0bVB0cisyOD4+Ml09eWRheTtyZXR1cm4gZGF0ZS5nZXRUaW1lKCkvMWUzfDB9dmFyIFBUSFJFQURfU1BFQ0lGSUM9e307ZnVuY3Rpb24gX3B0aHJlYWRfZ2V0c3BlY2lmaWMoa2V5KXtyZXR1cm4gUFRIUkVBRF9TUEVDSUZJQ1trZXldfHwwfXZhciBQVEhSRUFEX1NQRUNJRklDX05FWFRfS0VZPTE7ZnVuY3Rpb24gX3B0aHJlYWRfa2V5X2NyZWF0ZShrZXksZGVzdHJ1Y3Rvcil7aWYoa2V5PT0wKXtyZXR1cm4gRVJSTk9fQ09ERVMuRUlOVkFMfUhFQVAzMltrZXk+PjJdPVBUSFJFQURfU1BFQ0lGSUNfTkVYVF9LRVk7UFRIUkVBRF9TUEVDSUZJQ1tQVEhSRUFEX1NQRUNJRklDX05FWFRfS0VZXT0wO1BUSFJFQURfU1BFQ0lGSUNfTkVYVF9LRVkrKztyZXR1cm4gMH1mdW5jdGlvbiBfcHRocmVhZF9vbmNlKHB0cixmdW5jKXtpZighX3B0aHJlYWRfb25jZS5zZWVuKV9wdGhyZWFkX29uY2Uuc2Vlbj17fTtpZihwdHIgaW4gX3B0aHJlYWRfb25jZS5zZWVuKXJldHVybjtNb2R1bGVbImR5bkNhbGxfdiJdKGZ1bmMpO19wdGhyZWFkX29uY2Uuc2VlbltwdHJdPTE7fWZ1bmN0aW9uIF9wdGhyZWFkX3NldHNwZWNpZmljKGtleSx2YWx1ZSl7aWYoIShrZXkgaW4gUFRIUkVBRF9TUEVDSUZJQykpe3JldHVybiBFUlJOT19DT0RFUy5FSU5WQUx9UFRIUkVBRF9TUEVDSUZJQ1trZXldPXZhbHVlO3JldHVybiAwfWZ1bmN0aW9uIF90aW1lKHB0cil7dmFyIHJldD1EYXRlLm5vdygpLzFlM3wwO2lmKHB0cil7SEVBUDMyW3B0cj4+Ml09cmV0O31yZXR1cm4gcmV0fUZTLnN0YXRpY0luaXQoKTtfX0FUSU5JVF9fLnVuc2hpZnQoKGZ1bmN0aW9uKCl7aWYoIU1vZHVsZVsibm9GU0luaXQiXSYmIUZTLmluaXQuaW5pdGlhbGl6ZWQpRlMuaW5pdCgpO30pKTtfX0FUTUFJTl9fLnB1c2goKGZ1bmN0aW9uKCl7RlMuaWdub3JlUGVybWlzc2lvbnM9ZmFsc2U7fSkpO19fQVRFWElUX18ucHVzaCgoZnVuY3Rpb24oKXtGUy5xdWl0KCk7fSkpO19fQVRJTklUX18udW5zaGlmdCgoZnVuY3Rpb24oKXt9KSk7X19BVEVYSVRfXy5wdXNoKChmdW5jdGlvbigpe30pKTsKICBJbnRlcm5hbEVycm9yPU1vZHVsZVsiSW50ZXJuYWxFcnJvciJdPWV4dGVuZEVycm9yKEVycm9yLCJJbnRlcm5hbEVycm9yIik7ZW1iaW5kX2luaXRfY2hhckNvZGVzKCk7QmluZGluZ0Vycm9yPU1vZHVsZVsiQmluZGluZ0Vycm9yIl09ZXh0ZW5kRXJyb3IoRXJyb3IsIkJpbmRpbmdFcnJvciIpO2luaXRfQ2xhc3NIYW5kbGUoKTtpbml0X1JlZ2lzdGVyZWRQb2ludGVyKCk7aW5pdF9lbWJpbmQoKTtVbmJvdW5kVHlwZUVycm9yPU1vZHVsZVsiVW5ib3VuZFR5cGVFcnJvciJdPWV4dGVuZEVycm9yKEVycm9yLCJVbmJvdW5kVHlwZUVycm9yIik7aW5pdF9lbXZhbCgpO19fX2J1aWxkRW52aXJvbm1lbnQoRU5WKTtEWU5BTUlDVE9QX1BUUj1zdGF0aWNBbGxvYyg0KTtTVEFDS19CQVNFPVNUQUNLVE9QPWFsaWduTWVtb3J5KFNUQVRJQ1RPUCk7U1RBQ0tfTUFYPVNUQUNLX0JBU0UrVE9UQUxfU1RBQ0s7RFlOQU1JQ19CQVNFPWFsaWduTWVtb3J5KFNUQUNLX01BWCk7SEVBUDMyW0RZTkFNSUNUT1BfUFRSPj4yXT1EWU5BTUlDX0JBU0U7c3RhdGljU2VhbGVkPXRydWU7ZnVuY3Rpb24gaW50QXJyYXlGcm9tU3RyaW5nKHN0cmluZ3ksZG9udEFkZE51bGwsbGVuZ3RoKXt2YXIgbGVuPWxlbmd0aD4wP2xlbmd0aDpsZW5ndGhCeXRlc1VURjgoc3RyaW5neSkrMTt2YXIgdThhcnJheT1uZXcgQXJyYXkobGVuKTt2YXIgbnVtQnl0ZXNXcml0dGVuPXN0cmluZ1RvVVRGOEFycmF5KHN0cmluZ3ksdThhcnJheSwwLHU4YXJyYXkubGVuZ3RoKTtpZihkb250QWRkTnVsbCl1OGFycmF5Lmxlbmd0aD1udW1CeXRlc1dyaXR0ZW47cmV0dXJuIHU4YXJyYXl9TW9kdWxlWyJ3YXNtVGFibGVTaXplIl09MzE2O01vZHVsZVsid2FzbU1heFRhYmxlU2l6ZSJdPTMxNjtmdW5jdGlvbiBpbnZva2VfaShpbmRleCl7dHJ5e3JldHVybiBNb2R1bGVbImR5bkNhbGxfaSJdKGluZGV4KX1jYXRjaChlKXtpZih0eXBlb2YgZSE9PSJudW1iZXIiJiZlIT09ImxvbmdqbXAiKXRocm93IGU7TW9kdWxlWyJzZXRUaHJldyJdKDEsMCk7fX1mdW5jdGlvbiBpbnZva2VfaWkoaW5kZXgsYTEpe3RyeXtyZXR1cm4gTW9kdWxlWyJkeW5DYWxsX2lpIl0oaW5kZXgsYTEpfWNhdGNoKGUpe2lmKHR5cGVvZiBlIT09Im51bWJlciImJmUhPT0ibG9uZ2ptcCIpdGhyb3cgZTtNb2R1bGVbInNldFRocmV3Il0oMSwwKTt9fWZ1bmN0aW9uIGludm9rZV9paWkoaW5kZXgsYTEsYTIpe3RyeXtyZXR1cm4gTW9kdWxlWyJkeW5DYWxsX2lpaSJdKGluZGV4LGExLGEyKX1jYXRjaChlKXtpZih0eXBlb2YgZSE9PSJudW1iZXIiJiZlIT09ImxvbmdqbXAiKXRocm93IGU7TW9kdWxlWyJzZXRUaHJldyJdKDEsMCk7fX1mdW5jdGlvbiBpbnZva2VfaWlpaShpbmRleCxhMSxhMixhMyl7dHJ5e3JldHVybiBNb2R1bGVbImR5bkNhbGxfaWlpaSJdKGluZGV4LGExLGEyLGEzKX1jYXRjaChlKXtpZih0eXBlb2YgZSE9PSJudW1iZXIiJiZlIT09ImxvbmdqbXAiKXRocm93IGU7TW9kdWxlWyJzZXRUaHJldyJdKDEsMCk7fX1mdW5jdGlvbiBpbnZva2VfaWlpaWkoaW5kZXgsYTEsYTIsYTMsYTQpe3RyeXtyZXR1cm4gTW9kdWxlWyJkeW5DYWxsX2lpaWlpIl0oaW5kZXgsYTEsYTIsYTMsYTQpfWNhdGNoKGUpe2lmKHR5cGVvZiBlIT09Im51bWJlciImJmUhPT0ibG9uZ2ptcCIpdGhyb3cgZTtNb2R1bGVbInNldFRocmV3Il0oMSwwKTt9fWZ1bmN0aW9uIGludm9rZV9paWlpaWlpKGluZGV4LGExLGEyLGEzLGE0LGE1LGE2KXt0cnl7cmV0dXJuIE1vZHVsZVsiZHluQ2FsbF9paWlpaWlpIl0oaW5kZXgsYTEsYTIsYTMsYTQsYTUsYTYpfWNhdGNoKGUpe2lmKHR5cGVvZiBlIT09Im51bWJlciImJmUhPT0ibG9uZ2ptcCIpdGhyb3cgZTtNb2R1bGVbInNldFRocmV3Il0oMSwwKTt9fWZ1bmN0aW9uIGludm9rZV9paWlpaWlpaWlpKGluZGV4LGExLGEyLGEzLGE0LGE1LGE2LGE3LGE4LGE5KXt0cnl7cmV0dXJuIE1vZHVsZVsiZHluQ2FsbF9paWlpaWlpaWlpIl0oaW5kZXgsYTEsYTIsYTMsYTQsYTUsYTYsYTcsYTgsYTkpfWNhdGNoKGUpe2lmKHR5cGVvZiBlIT09Im51bWJlciImJmUhPT0ibG9uZ2ptcCIpdGhyb3cgZTtNb2R1bGVbInNldFRocmV3Il0oMSwwKTt9fWZ1bmN0aW9uIGludm9rZV9paWlpaWlqaWkoaW5kZXgsYTEsYTIsYTMsYTQsYTUsYTYsYTcsYTgsYTkpe3RyeXtyZXR1cm4gTW9kdWxlWyJkeW5DYWxsX2lpaWlpaWppaSJdKGluZGV4LGExLGEyLGEzLGE0LGE1LGE2LGE3LGE4LGE5KX1jYXRjaChlKXtpZih0eXBlb2YgZSE9PSJudW1iZXIiJiZlIT09ImxvbmdqbXAiKXRocm93IGU7TW9kdWxlWyJzZXRUaHJldyJdKDEsMCk7fX1mdW5jdGlvbiBpbnZva2VfaWpqKGluZGV4LGExLGEyLGEzLGE0KXt0cnl7cmV0dXJuIE1vZHVsZVsiZHluQ2FsbF9pamoiXShpbmRleCxhMSxhMixhMyxhNCl9Y2F0Y2goZSl7aWYodHlwZW9mIGUhPT0ibnVtYmVyIiYmZSE9PSJsb25nam1wIil0aHJvdyBlO01vZHVsZVsic2V0VGhyZXciXSgxLDApO319ZnVuY3Rpb24gaW52b2tlX2ppKGluZGV4LGExKXt0cnl7cmV0dXJuIE1vZHVsZVsiZHluQ2FsbF9qaSJdKGluZGV4LGExKX1jYXRjaChlKXtpZih0eXBlb2YgZSE9PSJudW1iZXIiJiZlIT09ImxvbmdqbXAiKXRocm93IGU7TW9kdWxlWyJzZXRUaHJldyJdKDEsMCk7fX1mdW5jdGlvbiBpbnZva2VfdihpbmRleCl7dHJ5e01vZHVsZVsiZHluQ2FsbF92Il0oaW5kZXgpO31jYXRjaChlKXtpZih0eXBlb2YgZSE9PSJudW1iZXIiJiZlIT09ImxvbmdqbXAiKXRocm93IGU7TW9kdWxlWyJzZXRUaHJldyJdKDEsMCk7fX1mdW5jdGlvbiBpbnZva2VfdmkoaW5kZXgsYTEpe3RyeXtNb2R1bGVbImR5bkNhbGxfdmkiXShpbmRleCxhMSk7fWNhdGNoKGUpe2lmKHR5cGVvZiBlIT09Im51bWJlciImJmUhPT0ibG9uZ2ptcCIpdGhyb3cgZTtNb2R1bGVbInNldFRocmV3Il0oMSwwKTt9fWZ1bmN0aW9uIGludm9rZV92aWkoaW5kZXgsYTEsYTIpe3RyeXtNb2R1bGVbImR5bkNhbGxfdmlpIl0oaW5kZXgsYTEsYTIpO31jYXRjaChlKXtpZih0eXBlb2YgZSE9PSJudW1iZXIiJiZlIT09ImxvbmdqbXAiKXRocm93IGU7TW9kdWxlWyJzZXRUaHJldyJdKDEsMCk7fX1mdW5jdGlvbiBpbnZva2VfdmlpaShpbmRleCxhMSxhMixhMyl7dHJ5e01vZHVsZVsiZHluQ2FsbF92aWlpIl0oaW5kZXgsYTEsYTIsYTMpO31jYXRjaChlKXtpZih0eXBlb2YgZSE9PSJudW1iZXIiJiZlIT09ImxvbmdqbXAiKXRocm93IGU7TW9kdWxlWyJzZXRUaHJldyJdKDEsMCk7fX1mdW5jdGlvbiBpbnZva2VfdmlpaWkoaW5kZXgsYTEsYTIsYTMsYTQpe3RyeXtNb2R1bGVbImR5bkNhbGxfdmlpaWkiXShpbmRleCxhMSxhMixhMyxhNCk7fWNhdGNoKGUpe2lmKHR5cGVvZiBlIT09Im51bWJlciImJmUhPT0ibG9uZ2ptcCIpdGhyb3cgZTtNb2R1bGVbInNldFRocmV3Il0oMSwwKTt9fWZ1bmN0aW9uIGludm9rZV92aWlpaWkoaW5kZXgsYTEsYTIsYTMsYTQsYTUpe3RyeXtNb2R1bGVbImR5bkNhbGxfdmlpaWlpIl0oaW5kZXgsYTEsYTIsYTMsYTQsYTUpO31jYXRjaChlKXtpZih0eXBlb2YgZSE9PSJudW1iZXIiJiZlIT09ImxvbmdqbXAiKXRocm93IGU7TW9kdWxlWyJzZXRUaHJldyJdKDEsMCk7fX1mdW5jdGlvbiBpbnZva2VfdmlpaWlpaShpbmRleCxhMSxhMixhMyxhNCxhNSxhNil7dHJ5e01vZHVsZVsiZHluQ2FsbF92aWlpaWlpIl0oaW5kZXgsYTEsYTIsYTMsYTQsYTUsYTYpO31jYXRjaChlKXtpZih0eXBlb2YgZSE9PSJudW1iZXIiJiZlIT09ImxvbmdqbXAiKXRocm93IGU7TW9kdWxlWyJzZXRUaHJldyJdKDEsMCk7fX1mdW5jdGlvbiBpbnZva2VfdmlpaWlpaWlpaShpbmRleCxhMSxhMixhMyxhNCxhNSxhNixhNyxhOCxhOSl7dHJ5e01vZHVsZVsiZHluQ2FsbF92aWlpaWlpaWlpIl0oaW5kZXgsYTEsYTIsYTMsYTQsYTUsYTYsYTcsYTgsYTkpO31jYXRjaChlKXtpZih0eXBlb2YgZSE9PSJudW1iZXIiJiZlIT09ImxvbmdqbXAiKXRocm93IGU7TW9kdWxlWyJzZXRUaHJldyJdKDEsMCk7fX1mdW5jdGlvbiBpbnZva2VfdmlpaWlpaWlpaWkoaW5kZXgsYTEsYTIsYTMsYTQsYTUsYTYsYTcsYTgsYTksYTEwKXt0cnl7TW9kdWxlWyJkeW5DYWxsX3ZpaWlpaWlpaWlpIl0oaW5kZXgsYTEsYTIsYTMsYTQsYTUsYTYsYTcsYTgsYTksYTEwKTt9Y2F0Y2goZSl7aWYodHlwZW9mIGUhPT0ibnVtYmVyIiYmZSE9PSJsb25nam1wIil0aHJvdyBlO01vZHVsZVsic2V0VGhyZXciXSgxLDApO319ZnVuY3Rpb24gaW52b2tlX3ZpaihpbmRleCxhMSxhMixhMyl7dHJ5e01vZHVsZVsiZHluQ2FsbF92aWoiXShpbmRleCxhMSxhMixhMyk7fWNhdGNoKGUpe2lmKHR5cGVvZiBlIT09Im51bWJlciImJmUhPT0ibG9uZ2ptcCIpdGhyb3cgZTtNb2R1bGVbInNldFRocmV3Il0oMSwwKTt9fWZ1bmN0aW9uIGludm9rZV92aWppKGluZGV4LGExLGEyLGEzLGE0KXt0cnl7TW9kdWxlWyJkeW5DYWxsX3ZpamkiXShpbmRleCxhMSxhMixhMyxhNCk7fWNhdGNoKGUpe2lmKHR5cGVvZiBlIT09Im51bWJlciImJmUhPT0ibG9uZ2ptcCIpdGhyb3cgZTtNb2R1bGVbInNldFRocmV3Il0oMSwwKTt9fU1vZHVsZS5hc21HbG9iYWxBcmc9e307TW9kdWxlLmFzbUxpYnJhcnlBcmc9eyJhYm9ydCI6YWJvcnQsImVubGFyZ2VNZW1vcnkiOmVubGFyZ2VNZW1vcnksImdldFRvdGFsTWVtb3J5IjpnZXRUb3RhbE1lbW9yeSwiYWJvcnRPbkNhbm5vdEdyb3dNZW1vcnkiOmFib3J0T25DYW5ub3RHcm93TWVtb3J5LCJpbnZva2VfaSI6aW52b2tlX2ksImludm9rZV9paSI6aW52b2tlX2lpLCJpbnZva2VfaWlpIjppbnZva2VfaWlpLCJpbnZva2VfaWlpaSI6aW52b2tlX2lpaWksImludm9rZV9paWlpaSI6aW52b2tlX2lpaWlpLCJpbnZva2VfaWlpaWlpaSI6aW52b2tlX2lpaWlpaWksImludm9rZV9paWlpaWlpaWlpIjppbnZva2VfaWlpaWlpaWlpaSwiaW52b2tlX2lpaWlpaWppaSI6aW52b2tlX2lpaWlpaWppaSwiaW52b2tlX2lqaiI6aW52b2tlX2lqaiwiaW52b2tlX2ppIjppbnZva2VfamksImludm9rZV92IjppbnZva2VfdiwiaW52b2tlX3ZpIjppbnZva2VfdmksImludm9rZV92aWkiOmludm9rZV92aWksImludm9rZV92aWlpIjppbnZva2VfdmlpaSwiaW52b2tlX3ZpaWlpIjppbnZva2VfdmlpaWksImludm9rZV92aWlpaWkiOmludm9rZV92aWlpaWksImludm9rZV92aWlpaWlpIjppbnZva2VfdmlpaWlpaSwiaW52b2tlX3ZpaWlpaWlpaWkiOmludm9rZV92aWlpaWlpaWlpLCJpbnZva2VfdmlpaWlpaWlpaWkiOmludm9rZV92aWlpaWlpaWlpaSwiaW52b2tlX3ZpaiI6aW52b2tlX3ZpaiwiaW52b2tlX3ZpamkiOmludm9rZV92aWppLCJfX19jeGFfYWxsb2NhdGVfZXhjZXB0aW9uIjpfX19jeGFfYWxsb2NhdGVfZXhjZXB0aW9uLCJfX19jeGFfYmVnaW5fY2F0Y2giOl9fX2N4YV9iZWdpbl9jYXRjaCwiX19fY3hhX2VuZF9jYXRjaCI6X19fY3hhX2VuZF9jYXRjaCwiX19fY3hhX2ZpbmRfbWF0Y2hpbmdfY2F0Y2hfMiI6X19fY3hhX2ZpbmRfbWF0Y2hpbmdfY2F0Y2hfMiwiX19fY3hhX2ZpbmRfbWF0Y2hpbmdfY2F0Y2hfMyI6X19fY3hhX2ZpbmRfbWF0Y2hpbmdfY2F0Y2hfMywiX19fY3hhX2ZpbmRfbWF0Y2hpbmdfY2F0Y2hfNCI6X19fY3hhX2ZpbmRfbWF0Y2hpbmdfY2F0Y2hfNCwiX19fY3hhX2ZyZWVfZXhjZXB0aW9uIjpfX19jeGFfZnJlZV9leGNlcHRpb24sIl9fX2N4YV90aHJvdyI6X19fY3hhX3Rocm93LCJfX19sb2NrIjpfX19sb2NrLCJfX19tYXBfZmlsZSI6X19fbWFwX2ZpbGUsIl9fX3Jlc3VtZUV4Y2VwdGlvbiI6X19fcmVzdW1lRXhjZXB0aW9uLCJfX19zZXRFcnJObyI6X19fc2V0RXJyTm8sIl9fX3N5c2NhbGwxNDAiOl9fX3N5c2NhbGwxNDAsIl9fX3N5c2NhbGwxNDUiOl9fX3N5c2NhbGwxNDUsIl9fX3N5c2NhbGwxNDYiOl9fX3N5c2NhbGwxNDYsIl9fX3N5c2NhbGwxODMiOl9fX3N5c2NhbGwxODMsIl9fX3N5c2NhbGwxOTgiOl9fX3N5c2NhbGwxOTgsIl9fX3N5c2NhbGwyMCI6X19fc3lzY2FsbDIwLCJfX19zeXNjYWxsNiI6X19fc3lzY2FsbDYsIl9fX3N5c2NhbGw2MCI6X19fc3lzY2FsbDYwLCJfX19zeXNjYWxsODMiOl9fX3N5c2NhbGw4MywiX19fc3lzY2FsbDkxIjpfX19zeXNjYWxsOTEsIl9fX3VubG9jayI6X19fdW5sb2NrLCJfX2VtYmluZF9maW5hbGl6ZV92YWx1ZV9vYmplY3QiOl9fZW1iaW5kX2ZpbmFsaXplX3ZhbHVlX29iamVjdCwiX19lbWJpbmRfcmVnaXN0ZXJfYm9vbCI6X19lbWJpbmRfcmVnaXN0ZXJfYm9vbCwiX19lbWJpbmRfcmVnaXN0ZXJfY2xhc3MiOl9fZW1iaW5kX3JlZ2lzdGVyX2NsYXNzLCJfX2VtYmluZF9yZWdpc3Rlcl9jbGFzc19jb25zdHJ1Y3RvciI6X19lbWJpbmRfcmVnaXN0ZXJfY2xhc3NfY29uc3RydWN0b3IsIl9fZW1iaW5kX3JlZ2lzdGVyX2NsYXNzX2Z1bmN0aW9uIjpfX2VtYmluZF9yZWdpc3Rlcl9jbGFzc19mdW5jdGlvbiwiX19lbWJpbmRfcmVnaXN0ZXJfZW12YWwiOl9fZW1iaW5kX3JlZ2lzdGVyX2VtdmFsLCJfX2VtYmluZF9yZWdpc3Rlcl9mbG9hdCI6X19lbWJpbmRfcmVnaXN0ZXJfZmxvYXQsIl9fZW1iaW5kX3JlZ2lzdGVyX2ludGVnZXIiOl9fZW1iaW5kX3JlZ2lzdGVyX2ludGVnZXIsIl9fZW1iaW5kX3JlZ2lzdGVyX21lbW9yeV92aWV3IjpfX2VtYmluZF9yZWdpc3Rlcl9tZW1vcnlfdmlldywiX19lbWJpbmRfcmVnaXN0ZXJfc3RkX3N0cmluZyI6X19lbWJpbmRfcmVnaXN0ZXJfc3RkX3N0cmluZywiX19lbWJpbmRfcmVnaXN0ZXJfc3RkX3dzdHJpbmciOl9fZW1iaW5kX3JlZ2lzdGVyX3N0ZF93c3RyaW5nLCJfX2VtYmluZF9yZWdpc3Rlcl92YWx1ZV9vYmplY3QiOl9fZW1iaW5kX3JlZ2lzdGVyX3ZhbHVlX29iamVjdCwiX19lbWJpbmRfcmVnaXN0ZXJfdmFsdWVfb2JqZWN0X2ZpZWxkIjpfX2VtYmluZF9yZWdpc3Rlcl92YWx1ZV9vYmplY3RfZmllbGQsIl9fZW1iaW5kX3JlZ2lzdGVyX3ZvaWQiOl9fZW1iaW5kX3JlZ2lzdGVyX3ZvaWQsIl9hYm9ydCI6X2Fib3J0LCJfZW1zY3JpcHRlbl9tZW1jcHlfYmlnIjpfZW1zY3JpcHRlbl9tZW1jcHlfYmlnLCJfZ2V0ZW52IjpfZ2V0ZW52LCJfZ2V0Z3JuYW0iOl9nZXRncm5hbSwiX2dldHB3bmFtIjpfZ2V0cHduYW0sIl9qc0Nsb3NlIjpfanNDbG9zZSwiX2pzQ3JlYXRlIjpfanNDcmVhdGUsIl9qc09wZW4iOl9qc09wZW4sIl9qc1JlYWQiOl9qc1JlYWQsIl9qc1NlZWsiOl9qc1NlZWssIl9qc1RlbGwiOl9qc1RlbGwsIl9qc1dyaXRlIjpfanNXcml0ZSwiX2xsdm1fZWhfdHlwZWlkX2ZvciI6X2xsdm1fZWhfdHlwZWlkX2ZvciwiX2xvY2FsdGltZSI6X2xvY2FsdGltZSwiX21rdGltZSI6X21rdGltZSwiX3B0aHJlYWRfZ2V0c3BlY2lmaWMiOl9wdGhyZWFkX2dldHNwZWNpZmljLCJfcHRocmVhZF9rZXlfY3JlYXRlIjpfcHRocmVhZF9rZXlfY3JlYXRlLCJfcHRocmVhZF9vbmNlIjpfcHRocmVhZF9vbmNlLCJfcHRocmVhZF9zZXRzcGVjaWZpYyI6X3B0aHJlYWRfc2V0c3BlY2lmaWMsIl90aW1lIjpfdGltZSwiRFlOQU1JQ1RPUF9QVFIiOkRZTkFNSUNUT1BfUFRSLCJTVEFDS1RPUCI6U1RBQ0tUT1B9O3ZhciBhc209TW9kdWxlWyJhc20iXShNb2R1bGUuYXNtR2xvYmFsQXJnLE1vZHVsZS5hc21MaWJyYXJ5QXJnLGJ1ZmZlcik7TW9kdWxlWyJhc20iXT1hc207dmFyIF9fR0xPQkFMX19zdWJfSV9iaW5kX2NwcD1Nb2R1bGVbIl9fR0xPQkFMX19zdWJfSV9iaW5kX2NwcCJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJfX0dMT0JBTF9fc3ViX0lfYmluZF9jcHAiXS5hcHBseShudWxsLGFyZ3VtZW50cyl9KTt2YXIgX19HTE9CQUxfX3N1Yl9JX2JyaWRnZV9jcHA9TW9kdWxlWyJfX0dMT0JBTF9fc3ViX0lfYnJpZGdlX2NwcCJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJfX0dMT0JBTF9fc3ViX0lfYnJpZGdlX2NwcCJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO3ZhciBfX0dMT0JBTF9fc3ViX0lfY3JjX2NwcD1Nb2R1bGVbIl9fR0xPQkFMX19zdWJfSV9jcmNfY3BwIl09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bIl9fR0xPQkFMX19zdWJfSV9jcmNfY3BwIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7dmFyIF9fR0xPQkFMX19zdWJfSV9nbG9iYWxfY3BwPU1vZHVsZVsiX19HTE9CQUxfX3N1Yl9JX2dsb2JhbF9jcHAiXT0oZnVuY3Rpb24oKXtyZXR1cm4gTW9kdWxlWyJhc20iXVsiX19HTE9CQUxfX3N1Yl9JX2dsb2JhbF9jcHAiXS5hcHBseShudWxsLGFyZ3VtZW50cyl9KTtNb2R1bGVbIl9fX2N4YV9jYW5fY2F0Y2giXT0oZnVuY3Rpb24oKXtyZXR1cm4gTW9kdWxlWyJhc20iXVsiX19fY3hhX2Nhbl9jYXRjaCJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO01vZHVsZVsiX19fY3hhX2lzX3BvaW50ZXJfdHlwZSJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJfX19jeGFfaXNfcG9pbnRlcl90eXBlIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7TW9kdWxlWyJfX19lcnJub19sb2NhdGlvbiJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJfX19lcnJub19sb2NhdGlvbiJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO3ZhciBfX19nZXRUeXBlTmFtZT1Nb2R1bGVbIl9fX2dldFR5cGVOYW1lIl09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bIl9fX2dldFR5cGVOYW1lIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7dmFyIF9lbXNjcmlwdGVuX3JlcGxhY2VfbWVtb3J5PU1vZHVsZVsiX2Vtc2NyaXB0ZW5fcmVwbGFjZV9tZW1vcnkiXT0oZnVuY3Rpb24oKXtyZXR1cm4gTW9kdWxlWyJhc20iXVsiX2Vtc2NyaXB0ZW5fcmVwbGFjZV9tZW1vcnkiXS5hcHBseShudWxsLGFyZ3VtZW50cyl9KTt2YXIgX2ZyZWU9TW9kdWxlWyJfZnJlZSJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJfZnJlZSJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO3ZhciBfbWFsbG9jPU1vZHVsZVsiX21hbGxvYyJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJfbWFsbG9jIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7dmFyIHNldFRlbXBSZXQwPU1vZHVsZVsic2V0VGVtcFJldDAiXT0oZnVuY3Rpb24oKXtyZXR1cm4gTW9kdWxlWyJhc20iXVsic2V0VGVtcFJldDAiXS5hcHBseShudWxsLGFyZ3VtZW50cyl9KTtNb2R1bGVbInNldFRocmV3Il09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bInNldFRocmV3Il0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7dmFyIHN0YWNrQWxsb2M9TW9kdWxlWyJzdGFja0FsbG9jIl09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bInN0YWNrQWxsb2MiXS5hcHBseShudWxsLGFyZ3VtZW50cyl9KTtNb2R1bGVbImR5bkNhbGxfZGlpIl09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bImR5bkNhbGxfZGlpIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7TW9kdWxlWyJkeW5DYWxsX2kiXT0oZnVuY3Rpb24oKXtyZXR1cm4gTW9kdWxlWyJhc20iXVsiZHluQ2FsbF9pIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7TW9kdWxlWyJkeW5DYWxsX2lpIl09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bImR5bkNhbGxfaWkiXS5hcHBseShudWxsLGFyZ3VtZW50cyl9KTtNb2R1bGVbImR5bkNhbGxfaWlpIl09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bImR5bkNhbGxfaWlpIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7TW9kdWxlWyJkeW5DYWxsX2lpaWkiXT0oZnVuY3Rpb24oKXtyZXR1cm4gTW9kdWxlWyJhc20iXVsiZHluQ2FsbF9paWlpIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7TW9kdWxlWyJkeW5DYWxsX2lpaWlpIl09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bImR5bkNhbGxfaWlpaWkiXS5hcHBseShudWxsLGFyZ3VtZW50cyl9KTtNb2R1bGVbImR5bkNhbGxfaWlpaWlpIl09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bImR5bkNhbGxfaWlpaWlpIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7TW9kdWxlWyJkeW5DYWxsX2lpaWlpaWkiXT0oZnVuY3Rpb24oKXtyZXR1cm4gTW9kdWxlWyJhc20iXVsiZHluQ2FsbF9paWlpaWlpIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7TW9kdWxlWyJkeW5DYWxsX2lpaWlpaWlpaWkiXT0oZnVuY3Rpb24oKXtyZXR1cm4gTW9kdWxlWyJhc20iXVsiZHluQ2FsbF9paWlpaWlpaWlpIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7TW9kdWxlWyJkeW5DYWxsX2lpaWlpaWppaSJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJkeW5DYWxsX2lpaWlpaWppaSJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO01vZHVsZVsiZHluQ2FsbF9pamoiXT0oZnVuY3Rpb24oKXtyZXR1cm4gTW9kdWxlWyJhc20iXVsiZHluQ2FsbF9pamoiXS5hcHBseShudWxsLGFyZ3VtZW50cyl9KTtNb2R1bGVbImR5bkNhbGxfamkiXT0oZnVuY3Rpb24oKXtyZXR1cm4gTW9kdWxlWyJhc20iXVsiZHluQ2FsbF9qaSJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO01vZHVsZVsiZHluQ2FsbF92Il09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bImR5bkNhbGxfdiJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO01vZHVsZVsiZHluQ2FsbF92aSJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJkeW5DYWxsX3ZpIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7TW9kdWxlWyJkeW5DYWxsX3ZpaSJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJkeW5DYWxsX3ZpaSJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO01vZHVsZVsiZHluQ2FsbF92aWlkIl09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bImR5bkNhbGxfdmlpZCJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO01vZHVsZVsiZHluQ2FsbF92aWlpIl09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bImR5bkNhbGxfdmlpaSJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO01vZHVsZVsiZHluQ2FsbF92aWlpaSJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJkeW5DYWxsX3ZpaWlpIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7TW9kdWxlWyJkeW5DYWxsX3ZpaWlpaSJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJkeW5DYWxsX3ZpaWlpaSJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO01vZHVsZVsiZHluQ2FsbF92aWlpaWlpIl09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bImR5bkNhbGxfdmlpaWlpaSJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO01vZHVsZVsiZHluQ2FsbF92aWlpaWlpaWlpIl09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bImR5bkNhbGxfdmlpaWlpaWlpaSJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO01vZHVsZVsiZHluQ2FsbF92aWlpaWlpaWlpaSJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJkeW5DYWxsX3ZpaWlpaWlpaWlpIl0uYXBwbHkobnVsbCxhcmd1bWVudHMpfSk7TW9kdWxlWyJkeW5DYWxsX3ZpaiJdPShmdW5jdGlvbigpe3JldHVybiBNb2R1bGVbImFzbSJdWyJkeW5DYWxsX3ZpaiJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO01vZHVsZVsiZHluQ2FsbF92aWppIl09KGZ1bmN0aW9uKCl7cmV0dXJuIE1vZHVsZVsiYXNtIl1bImR5bkNhbGxfdmlqaSJdLmFwcGx5KG51bGwsYXJndW1lbnRzKX0pO01vZHVsZVsiYXNtIl09YXNtO2Z1bmN0aW9uIEV4aXRTdGF0dXMoc3RhdHVzKXt0aGlzLm5hbWU9IkV4aXRTdGF0dXMiO3RoaXMubWVzc2FnZT0iUHJvZ3JhbSB0ZXJtaW5hdGVkIHdpdGggZXhpdCgiK3N0YXR1cysiKSI7dGhpcy5zdGF0dXM9c3RhdHVzO31FeGl0U3RhdHVzLnByb3RvdHlwZT1uZXcgRXJyb3I7RXhpdFN0YXR1cy5wcm90b3R5cGUuY29uc3RydWN0b3I9RXhpdFN0YXR1czt2YXIgaW5pdGlhbFN0YWNrVG9wO2RlcGVuZGVuY2llc0Z1bGZpbGxlZD1mdW5jdGlvbiBydW5DYWxsZXIoKXtpZighTW9kdWxlWyJjYWxsZWRSdW4iXSlydW4oKTtpZighTW9kdWxlWyJjYWxsZWRSdW4iXSlkZXBlbmRlbmNpZXNGdWxmaWxsZWQ9cnVuQ2FsbGVyO307ZnVuY3Rpb24gcnVuKGFyZ3Mpe2FyZ3M9YXJnc3x8TW9kdWxlWyJhcmd1bWVudHMiXTtpZihydW5EZXBlbmRlbmNpZXM+MCl7cmV0dXJufXByZVJ1bigpO2lmKHJ1bkRlcGVuZGVuY2llcz4wKXJldHVybjtpZihNb2R1bGVbImNhbGxlZFJ1biJdKXJldHVybjtmdW5jdGlvbiBkb1J1bigpe2lmKE1vZHVsZVsiY2FsbGVkUnVuIl0pcmV0dXJuO01vZHVsZVsiY2FsbGVkUnVuIl09dHJ1ZTtpZihBQk9SVClyZXR1cm47ZW5zdXJlSW5pdFJ1bnRpbWUoKTtwcmVNYWluKCk7aWYoTW9kdWxlWyJvblJ1bnRpbWVJbml0aWFsaXplZCJdKU1vZHVsZVsib25SdW50aW1lSW5pdGlhbGl6ZWQiXSgpO3Bvc3RSdW4oKTt9aWYoTW9kdWxlWyJzZXRTdGF0dXMiXSl7TW9kdWxlWyJzZXRTdGF0dXMiXSgiUnVubmluZy4uLiIpO3NldFRpbWVvdXQoKGZ1bmN0aW9uKCl7c2V0VGltZW91dCgoZnVuY3Rpb24oKXtNb2R1bGVbInNldFN0YXR1cyJdKCIiKTt9KSwxKTtkb1J1bigpO30pLDEpO31lbHNlIHtkb1J1bigpO319TW9kdWxlWyJydW4iXT1ydW47ZnVuY3Rpb24gZXhpdChzdGF0dXMsaW1wbGljaXQpe2lmKGltcGxpY2l0JiZNb2R1bGVbIm5vRXhpdFJ1bnRpbWUiXSYmc3RhdHVzPT09MCl7cmV0dXJufWlmKE1vZHVsZVsibm9FeGl0UnVudGltZSJdKTtlbHNlIHtBQk9SVD10cnVlO1NUQUNLVE9QPWluaXRpYWxTdGFja1RvcDtleGl0UnVudGltZSgpO2lmKE1vZHVsZVsib25FeGl0Il0pTW9kdWxlWyJvbkV4aXQiXShzdGF0dXMpO31pZihFTlZJUk9OTUVOVF9JU19OT0RFKXtwcm9jZXNzWyJleGl0Il0oc3RhdHVzKTt9TW9kdWxlWyJxdWl0Il0oc3RhdHVzLG5ldyBFeGl0U3RhdHVzKHN0YXR1cykpO31Nb2R1bGVbImV4aXQiXT1leGl0O2Z1bmN0aW9uIGFib3J0KHdoYXQpe2lmKE1vZHVsZVsib25BYm9ydCJdKXtNb2R1bGVbIm9uQWJvcnQiXSh3aGF0KTt9aWYod2hhdCE9PXVuZGVmaW5lZCl7TW9kdWxlLnByaW50KHdoYXQpO01vZHVsZS5wcmludEVycih3aGF0KTt3aGF0PUpTT04uc3RyaW5naWZ5KHdoYXQpO31lbHNlIHt3aGF0PSIiO31BQk9SVD10cnVlO3Rocm93ICJhYm9ydCgiK3doYXQrIikuIEJ1aWxkIHdpdGggLXMgQVNTRVJUSU9OUz0xIGZvciBtb3JlIGluZm8uIn1Nb2R1bGVbImFib3J0Il09YWJvcnQ7aWYoTW9kdWxlWyJwcmVJbml0Il0pe2lmKHR5cGVvZiBNb2R1bGVbInByZUluaXQiXT09ImZ1bmN0aW9uIilNb2R1bGVbInByZUluaXQiXT1bTW9kdWxlWyJwcmVJbml0Il1dO3doaWxlKE1vZHVsZVsicHJlSW5pdCJdLmxlbmd0aD4wKXtNb2R1bGVbInByZUluaXQiXS5wb3AoKSgpO319TW9kdWxlWyJub0V4aXRSdW50aW1lIl09dHJ1ZTtydW4oKTsKCiAgICByZXR1cm4gdW5wYWNrOwogIH07CiAgLy8tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgoKCiAgLyoqCiAgICogUmV0dXJucyBhIFByb21pc2UgY29udGFpbmluZyB0aGUgcmFyIGV4dHJhY3RvciBmb3IgdGhlIGdpdmVuIGZpbGVuYW1lLgogICAqIEBwcml2YXRlCiAgICovCiAgZnVuY3Rpb24gZ2V0RXh0cmFjdG9yKHVybCkgewogICAgcmV0dXJuIGZldGNoKG5ldyBSZXF1ZXN0KHVybCkpCiAgICAgIC50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgICBpZiAocmVzcG9uc2Uub2spIAogICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLmFycmF5QnVmZmVyKCk7CiAgICAgICAgZWxzZSB7CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJzQwNCBFcnJvcjogRmlsZSBub3QgZm91bmQuJyk7CiAgICAgICAgfQogICAgICB9KQogICAgICAudGhlbihidWZmZXIgPT4gdW5wYWNrQnJpZGdlLmNyZWF0ZUV4dHJhY3RvckZyb21EYXRhKGJ1ZmZlcikpOwogIH0KCiAgLyoqCiAgICogIFJldHVybnMgYSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSBmb3JtYXR0ZWQgY29udGVudHMgb2YgdGhlIGdpdmVuIGZpbGUuCiAgICogQHByaXZhdGUKICAgKi8KICBmdW5jdGlvbiBleHRyYWN0KHsgcmVzb3VyY2VJZCwgdXJsIH0pIHsKICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHsKCiAgICAgIGlmICghdW5wYWNrQnJpZGdlKSB7IHRocm93IG5ldyBFcnJvcigndW5wYWNrQnJpZGdlIG5vdCBkZXRlY3RlZCcpOyB9CiAgICAgIGlmICghdW5wYWNrKSB7IHRocm93IG5ldyBFcnJvcigndW5wYWNrIG5vdCBkZXRlY3RlZCcpOyB9CgogICAgICBnZXRFeHRyYWN0b3IodXJsKS50aGVuKGV4dHJhY3RvciA9PiB7CiAgICAgICAgLy8gcmV0dXJuIGV4dHJhY3Rvci5leHRyYWN0QWxsKCk7CiAgICAgICAgcmVzb2x2ZShleHRyYWN0b3IuZXh0cmFjdEFsbCgpKTsKICAgICAgfSwgZXJyID0+IHsKICAgICAgICByZWplY3QoZXJyKTsKICAgICAgfSk7CiAgICB9KQogIH0KCiAgLyoqCiAgICogTGlzdGVuIGZvciBtZXNzYWdlcyBzZW50IHRvIHRoZSB3b3JrZXIuCiAgICogQHByaXZhdGUKICAgKi8KICBmdW5jdGlvbiBoYW5kbGVNZXNzYWdlKGRhdGEsIHBvc3RNZXNzYWdlKSB7CiAgICBpZiAoZGF0YS50eXBlID09ICdpbml0JykgewogICAgICB1bnBhY2sgPSBpbml0dW5wYWNrKHdhc21VcmwpOwogICAgICB1bnBhY2sub25SdW50aW1lSW5pdGlhbGl6ZWQgPSAoKSA9PiB7CiAgICAgICAgcG9zdE1lc3NhZ2UoeyB0eXBlOiAnV0FTTV9MT0FERUQnIH0pOwogICAgICB9OwogICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT0gJ2ZldGNoJykgewogICAgICBleHRyYWN0KGRhdGEpLnRoZW4oCiAgICAgICAgKHVucGFja2VkKSA9PiB7CiAgICAgICAgICByZXR1cm5EYXRhKGRhdGEsIHVucGFja2VkLCBwb3N0TWVzc2FnZSk7CiAgICAgICAgfSwKICAgICAgICAoZXJyKSA9PiB7CiAgICAgICAgICBjb25zdCByZXN1bHQgPSB7CiAgICAgICAgICAgIHRhc2tJZDogZGF0YS50YXNrSWQsCiAgICAgICAgICAgIHR5cGU6ICdFUlJPUicsCiAgICAgICAgICAgIHJlc291cmNlSWQ6IGRhdGEucmVzb3VyY2VJZCwKICAgICAgICAgICAgdXJsOiBkYXRhLnVybCwKICAgICAgICAgIH07CiAgICAgICAgICBwb3N0TWVzc2FnZShyZXN1bHQpOwogICAgICAgIH0KICAgICAgKTsKICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09ICd1bnBhY2snKSB7CiAgICAgIGNvbnN0IHsgYnVmZmVyIH0gPSBkYXRhOwoKICAgICAgaWYgKCF1bnBhY2tCcmlkZ2UpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3VucGFja0JyaWRnZSBub3QgZGV0ZWN0ZWQnKQogICAgICB9CiAgICAgIGlmICghdW5wYWNrKSB7CiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCd1bnBhY2sgbm90IGRldGVjdGVkJykKICAgICAgfQoKICAgICAgY29uc3QgZXh0cmFjdG9yID0gdW5wYWNrQnJpZGdlLmNyZWF0ZUV4dHJhY3RvckZyb21EYXRhKGJ1ZmZlcik7CiAgICAgIGNvbnN0IHVucGFja2VkID0gZXh0cmFjdG9yLmV4dHJhY3RBbGwoKTsKICAgICAgcmV0dXJuRGF0YShkYXRhLCB1bnBhY2tlZCwgcG9zdE1lc3NhZ2UpOwogICAgfQogIH0KCiAgZnVuY3Rpb24gcmV0dXJuRGF0YShkYXRhLCB1bnBhY2tlZCwgcG9zdE1lc3NhZ2UpIHsKCiAgICBjb25zdCBbc3RhdGUsIGxpc3RdID0gdW5wYWNrZWQ7CiAgICBpZiAoc3RhdGUuc3RhdGUgPT0gJ0ZBSUwnKSB7CiAgICAgIGNvbnN0IHJlc3VsdCA9IHsKICAgICAgICB0YXNrSWQ6IGRhdGEudGFza0lkLAogICAgICAgIHR5cGU6ICdFUlJPUicsCiAgICAgICAgcmVhc29uOiBzdGF0ZS5yZWFzb24sCiAgICAgICAgbXNnOiBzdGF0ZS5tc2csCiAgICAgICAgcmVzb3VyY2VJZDogZGF0YS5yZXNvdXJjZUlkLAogICAgICAgIHVybDogZGF0YS51cmwKICAgICAgfTsKICAgICAgcG9zdE1lc3NhZ2UocmVzdWx0KTsKICAgICAgcmV0dXJuOwogICAgfQogICAgY29uc3QgcmVzdWx0ID0gewogICAgICAgIHRhc2tJZDogZGF0YS50YXNrSWQsCiAgICAgICAgdHlwZTogJ0ZJTklTSEVEJywKICAgICAgICByZXNvdXJjZUlkOiBkYXRhLnJlc291cmNlSWQsCiAgICAgICAgZW50cmllczoge30KICAgIH07CgogICAgY29uc3QgdHJhbnNmZXJhYmxlcyA9IFtdOwogICAgaWYgKGxpc3QgJiYgbGlzdC5maWxlcykgewogICAgICBmb3IoY29uc3QgZmlsZSBvZiBsaXN0LmZpbGVzKSB7CiAgICAgICAgcmVzdWx0LmVudHJpZXNbZmlsZS5maWxlSGVhZGVyLm5hbWVdID0gZmlsZS5leHRyYWN0WzFdOwogICAgICAgIHRyYW5zZmVyYWJsZXMucHVzaChmaWxlLmV4dHJhY3RbMV0uYnVmZmVyKTsKICAgICAgfQogICAgfQogICAgcG9zdE1lc3NhZ2UocmVzdWx0LCB0cmFuc2ZlcmFibGVzKTsKICB9CgoKICBvbm1lc3NhZ2UgPSBmdW5jdGlvbiAoZXZlbnQpIHsKICAgIGhhbmRsZU1lc3NhZ2UoZXZlbnQuZGF0YSwgc2VsZi5wb3N0TWVzc2FnZSk7CiAgfTsKICAvKioKICAgKiBXaGVuIHRoZSBXQVNNIHJ1bnRpbWUgaGFzIGJlZW4gaW5pdGlhbGl6ZWQgb24gdGhlIHVucGFjay5qcyBtb2R1bGUsIHNlbmQgYSBtZXNzYWdlIGluZGljYXRpbmcKICAgKiB0aGF0IHRoZSBsaWJyYXJ5IGlzIHJlYWR5LgogICAqLwogIC8vIDwhLS0gcHJldHRpZXItaWdub3JlLWVuZCAtLT4KCiAgZXhwb3J0cy5oYW5kbGVNZXNzYWdlID0gaGFuZGxlTWVzc2FnZTsKCiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTsKCiAgcmV0dXJuIGV4cG9ydHM7Cgp9KSh7fSk7Cgo=",null,!1);class mU extends ha{constructor(){super(!0)}constructWorker(){return new Promise(e=>{const g=new ZU;g.onmessage=t=>{t.data.type=="WASM_LOADED"&&e(g)},g.postMessage({type:"init"})})}}function WU(i){return i.ok?i:!1}class bU{constructor(){this.threadPool=new mU}init(e){this.resourceLoader=e}getType(){return"archive"}loadFile(e){return this.resourceLoader.incrementWorkload(1),new Promise((t,I)=>{fetch(e).then(l=>(this.resourceLoader.incrementWorkDone(1),WU(l)?l.arrayBuffer():(I(new Error(`loadArchive: ${l.status} - ${l.statusText} : ${e}`)),null))).then(l=>{if(!l){I("Buffer is null");return}const C=e;this.threadPool.addTask({type:"unpack",resourceId:C,buffer:l},[l]).then(n=>{n.type==="FINISHED"?t(n.entries):n.type==="ERROR"&&I(new Error(`Unable to load Resource: ${C}`))})})})}}function JU(i){return i.ok?i:!1}class GU{init(e){this.resourceLoader=e}getType(){return"json"}loadFile(e){return this.resourceLoader.incrementWorkload(1),new Promise((t,I)=>{fetch(e).then(l=>{this.resourceLoader.incrementWorkDone(1),JU(l)?t(l.json()):I(`loadJSON: ${l.status} - ${l.statusText} : ${e}`)})})}}function uU(i){return i.ok?i:!1}class SU{init(e){this.resourceLoader=e}getType(){return"text"}loadFile(e){return this.resourceLoader.incrementWorkload(1),new Promise((t,I)=>{fetch(e).then(l=>{this.resourceLoader.incrementWorkDone(1),uU(l)?t(l.text()):I(`loadText: ${l.status} - ${l.statusText} : ${e}`)})})}}function NU(i){return i.ok?i:!1}class pU{init(e){this.resourceLoader=e}getType(){return"binary"}loadFile(e){return this.resourceLoader.incrementWorkload(1),new Promise((t,I)=>{fetch(e).then(l=>{this.resourceLoader.incrementWorkDone(1),NU(l)?t(l.arrayBuffer()):I(`loadBinary: ${l.status} - ${l.statusText} : ${e}`)})})}}const oC=2e3;class yU extends Xe{constructor(){super();this.baseUrl="",this.loadCount=0,this.queue=[],this.__totalWork=0,this.__doneWork=0,this.plugins={},this.systemUrls={};const e="https://storage.googleapis.com/visualive-tmp/zea-engine-resources";this.systemUrls["ZeaEngine/Vive.vla"]=e+"/Vive.vla",this.systemUrls["ZeaEngine/Oculus.vla"]=e+"/Oculus.vla",this.commonResources={}}registerPlugin(e){e.init(this),this.plugins[e.getType()]=e}loadFile(e,g,t=!0){const I=this.plugins[e];if(!I)throw new Error(`There's no plugin registered for the type of file "${e}". Did you add the plugins script? See: https://docs.zea.live/zea-engine/#/adding-default-plugins`);if(t&&this.incrementWorkload(),this.loadCount<oC){this.loadCount++;const l=I.loadFile(g);return l.then(()=>{for(this.loadCount--,this.incrementWorkDone(),this.emit("loaded",{url:g});this.loadCount<oC&&this.queue.length>0;)this.queue.pop()()},()=>{this.incrementWorkDone()}),l}else return new Promise((C,n)=>{this.queue.push(()=>{this.loadCount++,I.loadFile(g).then(a=>{for(this.loadCount--,this.incrementWorkDone(),this.emit("loaded",{url:g});this.loadCount<oC&&this.queue.length>0;)this.queue.pop()();C(a)},()=>{this.incrementWorkDone()})})})}getCommonResource(e){return this.commonResources[e]}setCommonResource(e,g){this.commonResources[e]=g}incrementWorkload(e=1){this.__totalWork+=e;const g=this.__doneWork/this.__totalWork*100;this.emit("progressIncremented",{percent:g})}incrementWorkDone(e=1){this.__doneWork+=e;const g=this.__doneWork/this.__totalWork*100;if(this.emit("progressIncremented",{percent:g}),this.__doneWork>this.__totalWork)throw new Error("Mismatch between work loaded and work done.")}}const ee=new yU,XU=new bU;ee.registerPlugin(XU);const kU=new GU;ee.registerPlugin(kU);const fU=new SU;ee.registerPlugin(fU);const EU=new pU;ee.registerPlugin(EU);class rI{constructor(e=""){if(this.branch="",e){const g=e.split("-"),t=g[0].split(".");this.major=parseInt(t[0]),this.minor=parseInt(t[1]),this.patch=parseInt(t[2]),g.length==2&&(this.branch=g[1])}else this.major=0,this.minor=0,this.patch=0}compare(e){const g=[this.major,this.minor,this.patch];for(let t=0;t<3;t++)if(g[t]!==e[t])return g[t]-e[t];return 0}toString(){return`v${this.major}.${this.minor}.${this.patch}`+(this.branch!=""?`-${this.branch}`:"")}}class RI{constructor(e,g=0,t=!0){this.__data=e,this.__byteOffset=g,this.__dataView=new DataView(this.__data),this.__isMobileDevice=t,this.utf8decoder=new TextDecoder}get isMobileDevice(){return this.__isMobileDevice}get data(){return this.__data}get byteLength(){return this.__dataView.byteLength}get remainingByteLength(){return this.__dataView.byteLength-this.__byteOffset}pos(){return this.__byteOffset}seek(e){this.__byteOffset=e}advance(e){this.__byteOffset+=e}loadUInt8(){const e=this.__dataView.getUint8(this.__byteOffset);return this.__byteOffset+=1,e}loadUInt16(){const e=this.__dataView.getUint16(this.__byteOffset,!0);return this.__byteOffset+=2,e}loadUInt32(){const e=this.__dataView.getUint32(this.__byteOffset,!0);return this.__byteOffset+=4,e}loadSInt32(){const e=this.__dataView.getInt32(this.__byteOffset,!0);return this.__byteOffset+=4,e}loadFloat16(){const e=this.loadUInt16();return q.decode16BitFloat(e)}loadUFloat16(){const e=this.loadFloat16();return e<0?2048-e:e}loadFloat16From2xUInt8(){throw Error("loadFloat16From2xUInt8 not implemented!")}loadUInt32From2xUFloat16(){const e=this.loadUFloat16(),g=this.loadUFloat16();return e+g*4096}loadSInt32From2xFloat16(){const e=this.loadFloat16(),g=this.loadFloat16();return e+g*2048}loadFloat32(){const e=this.__dataView.getFloat32(this.__byteOffset,!0);return this.__byteOffset+=4,e}loadUInt8Array(e,g=!1){e==null&&(e=this.loadUInt32());let t;return g?(t=new Uint8Array(this.__data.slice(this.__byteOffset,this.__byteOffset+e)),t.length!=e&&console.log("broken")):t=new Uint8Array(this.__data,this.__byteOffset,e),this.__byteOffset+=e,t}loadUInt16Array(e,g=!1){if(e==null&&(e=this.loadUInt32()),e==0)return new Uint16Array;this.readPad(2);let t;if(this.__isMobileDevice){t=new Uint16Array(e);for(let I=0;I<e;I++)t[I]=this.__dataView.getUint16(this.__byteOffset,!0),this.__byteOffset+=2}else g?(t=new Uint16Array(this.__data.slice(this.__byteOffset,this.__byteOffset+e*2)),t.length!=e&&console.log("broken")):t=new Uint16Array(this.__data,this.__byteOffset,e),this.__byteOffset+=e*2;return t}loadUInt32Array(e,g=!1){if(e==null&&(e=this.loadUInt32()),e==0)return new Uint32Array;this.readPad(4);let t;if(this.__isMobileDevice){t=new Uint32Array(e);for(let I=0;I<e;I++)t[I]=this.__dataView.getUint32(this.__byteOffset,!0),this.__byteOffset+=4}else g?(t=new Uint32Array(this.__data.slice(this.__byteOffset,this.__byteOffset+e*4)),t.length!=e&&console.log("broken")):t=new Uint32Array(this.__data,this.__byteOffset,e),this.__byteOffset+=e*4;return t}loadFloat32Array(e,g=!1){if(e==null&&(e=this.loadUInt32()),e==0)return new Float32Array;this.readPad(4);let t;if(this.__isMobileDevice){t=new Float32Array(e);for(let I=0;I<e;I++)t[I]=this.__dataView.getFloat32(this.__byteOffset,!0),this.__byteOffset+=4}else g?t=new Float32Array(this.__data.slice(this.__byteOffset,this.__byteOffset+e*4)):t=new Float32Array(this.__data,this.__byteOffset,e),this.__byteOffset+=e*4;return t}loadStr(){const e=this.loadUInt32(),g=new Uint8Array(this.__data,this.__byteOffset,e);return this.__byteOffset+=e,this.utf8decoder.decode(g)}loadStrArray(){const e=this.loadUInt32(),g=[];for(let t=0;t<e;t++)g[t]=this.loadStr();return g}loadSInt32Vec2(){const e=this.loadSInt32(),g=this.loadSInt32();return new f(e,g)}loadUInt32Vec2(){const e=this.loadUInt32(),g=this.loadUInt32();return new f(e,g)}loadFloat16Vec2(){const e=this.loadFloat16(),g=this.loadFloat16();return new f(e,g)}loadFloat32Vec2(){const e=this.loadFloat32(),g=this.loadFloat32();return new f(e,g)}loadFloat16Vec3(){const e=this.loadFloat16(),g=this.loadFloat16(),t=this.loadFloat16();return new b(e,g,t)}loadFloat32Vec3(){const e=this.loadFloat32(),g=this.loadFloat32(),t=this.loadFloat32();return new b(e,g,t)}loadFloat16Quat(){const e=this.loadFloat16(),g=this.loadFloat16(),t=this.loadFloat16(),I=this.loadFloat16();return new de(e,g,t,I)}loadFloat32Quat(){const e=this.loadFloat32(),g=this.loadFloat32(),t=this.loadFloat32(),I=this.loadFloat32();return new de(e,g,t,I)}loadRGBFloat32Color(){const e=this.loadFloat32(),g=this.loadFloat32(),t=this.loadFloat32();return new E(e,g,t)}loadRGBAFloat32Color(){const e=this.loadFloat32(),g=this.loadFloat32(),t=this.loadFloat32(),I=this.loadFloat32();return new E(e,g,t,I)}loadRGBUInt8Color(){const e=this.loadUInt8(),g=this.loadUInt8(),t=this.loadUInt8();return new E(e/255,g/255,t/255)}loadRGBAUInt8Color(){const e=this.loadUInt8(),g=this.loadUInt8(),t=this.loadUInt8(),I=this.loadUInt8();return new E(e/255,g/255,t/255,I/255)}loadBox2(){return new Yt(this.loadFloat32Vec2(),this.loadFloat32Vec2())}loadBox3(){return new gg(this.loadFloat32Vec3(),this.loadFloat32Vec3())}readPad(e){const g=this.__byteOffset%e;g!=0&&(this.__byteOffset+=e-g)}}var Mt;(function(i){i[i.OP_WRITE=0]="OP_WRITE",i[i.OP_READ_WRITE=1]="OP_READ_WRITE"})(Mt||(Mt={}));class Le extends Xe{constructor(e="",g,t){super();this.dirty=!1,this.boundInputs=[],this.boundOutputs=[],this.cleaning=!1,this.dirtyOpIndex=0,this.firstOP_WRITE=0,this.name=e,this.__value=g,this.dataType=t}getName(){return this.name}setName(e){if(e===this.name)return;const g=this.name;this.name=e,this.emit("nameChanged",{newName:this.name,prevName:g})}getOwner(){return this.ownerItem}setOwner(e){this.ownerItem=e}getPath(){return this.ownerItem&&this.ownerItem instanceof jg?[...this.ownerItem.getPath(),this.name]:[this.name]}getDataType(){return this.dataType}bindOperatorInput(e){this.boundInputs.push(e)}unbindOperatorInput(e){const g=this.boundInputs.indexOf(e);this.boundInputs.splice(g,1)}bindOperatorOutput(e,g=-1){g==-1&&(g=this.boundOutputs.length),this.boundOutputs.splice(g,0,e);for(let t=g;t<this.boundOutputs.length;t++)this.boundOutputs[t].setParamBindIndex(t);return this.__findFirstOP_WRITE(),this.dirtyOpIndex=this.boundOutputs.length,this.setDirty(g),g}unbindOperatorOutput(e){const g=e.getParamBindIndex();this.boundOutputs.splice(g,1);for(let t=g;t<this.boundOutputs.length;t++)this.boundOutputs[t].setParamBindIndex(t);return this.__findFirstOP_WRITE(),this.dirtyOpIndex=this.boundOutputs.length,this.setDirty(Math.max(0,g-1)),g}__findFirstOP_WRITE(){if(this.firstOP_WRITE=this.boundOutputs.length,this.boundOutputs.length>0)for(this.firstOP_WRITE--;this.firstOP_WRITE>0&&this.boundOutputs[this.firstOP_WRITE].getMode()!=Mt.OP_WRITE;this.firstOP_WRITE--);}setDirty(e){if(e<this.dirtyOpIndex){let g=this.firstOP_WRITE;if(g<=e){for(this.dirtyOpIndex=g,g++;g<this.boundOutputs.length;g++)g!=e&&this.boundOutputs[g].getOperator().setDirty();for(let t=0;t<this.boundInputs.length;t++)this.boundInputs[t].setDirty();return this.emit("valueChanged"),!0}}return!1}isDirty(){return this.dirtyOpIndex<this.boundOutputs.length}getDirtyBindingIndex(){return this.dirtyOpIndex}setCleanFromOp(e,g){if(g!=this.dirtyOpIndex){if(g<this.dirtyOpIndex)console.log("Parameter is cleaned when it was already clean to that point in the stack:",this.getPath());else if(this.boundOutputs[g].getMode()!=Mt.OP_WRITE){const t=this.getClassName(),I=this.boundOutputs[g].getOperator(),l=I.getClassName();throw new Error(`Parameter: ${t} with name: ${this.getName()} is not cleaning all outputs during evaluation of op: ${l} with name: ${I.getName()}`)}}this.__value=e,this.dirtyOpIndex=g+1}getValueFromOp(e){return this.dirtyOpIndex<e&&this._clean(e),this.__value}_clean(e){if(this.cleaning)throw new Error(`Cycle detected when cleaning: ${this.getPath()}. Operators need to be rebound to fix errors`);for(this.cleaning=!0;this.dirtyOpIndex<e;){const g=this.dirtyOpIndex;if(this.boundOutputs[this.dirtyOpIndex].getOperator().evaluate(),g==this.dirtyOpIndex){const I=this.boundOutputs[this.dirtyOpIndex].getOperator(),l=I.getClassName();console.warn(`Operator: ${l} with name: ${I.getName()} is not cleaning its outputs during evaluation`),this.dirtyOpIndex++}}this.cleaning=!1}getValue(){return this.dirtyOpIndex<this.boundOutputs.length&&this._clean(this.boundOutputs.length),this.__value}setValue(e){if(e==null)throw"undefined was passed into the set value for param:"+this.getName();if(this.boundOutputs.length>0)for(let g=this.boundOutputs.length-1;g>=0;g--){const t=this.boundOutputs[g];if(e=t.backPropagateValue(e),t.getMode()==0)return}if(!(typeof e!="object"&&this.__value==e)){this.__value=e;for(let g=0;g<this.boundInputs.length;g++)this.boundInputs[g].paramValueChanged();this.emit("valueChanged")}}get value(){return this.getValue()}set value(e){this.setValue(e)}loadValue(e){this.__value=e}copyFrom(e,g){this.loadValue(e.__value)}readBinary(e,g){console.warn(`TODO: Parameter: ${this.constructor.name} with name: ${this.name} does not implement readBinary`)}destroy(){console.warn("nothing destroyed. This method was not overwritten in subclass")}}class k extends Le{constructor(e="",g=0,t,I){super(e,g,"Number");this.range=t,this.step=I}getRange(){return this.range}setRange(e){this.range=e}getStep(){return this.step}setStep(e){this.step=e}toJSON(e){const g={value:this.__value};return this.range&&(g.range=this.range),this.step&&(g.step=this.step),g}fromJSON(e,g){this.__value=e.value,e.range&&(this.range=e.range),e.step&&(this.step=e.step)}readBinary(e,g){this.__value=e.loadFloat32()}clone(){return new k(this.name,this.__value,this.range,this.step)}}class TU extends k{readBinary(e,g){this.__value=e.loadFloat32()}}class YU extends k{readBinary(e,g){this.__value=e.loadSInt32()}}class vU extends k{readBinary(e,g){this.__value=e.loadUInt32()}}S.register("NumberParameter",k);S.register("Property_SInt32",YU);S.register("Property_UInt32",vU);S.register("Property_Float32",TU);class OC extends k{constructor(e,g,t=[]){super(e,g,[0,t.length],1);this.choices=t}getChoices(){return this.choices}setValue(e){typeof e=="string"?super.setValue(this.choices.indexOf(e)):super.setValue(e)}}S.register("MultiChoiceParameter",OC);class Je extends Le{constructor(e="",g){super(e,g!=null?g:!1,"Boolean")}readBinary(e,g){this.__value=e.loadUInt8()!=0}toJSON(e){return{value:this.__value}}fromJSON(e,g){this.__value=e.value,this.emit("valueChanged",{mode:0})}clone(){return new Je(this.name,this.__value)}}S.register("BooleanParameter",Je);S.register("Property_Boolean",Je);class XI extends Le{constructor(e="",g,t){super(e,g||new f,"Vec2");this.range=t}getRange(){return this.range}setRange(e){this.range=e,this.emit("rangeChanged",{range:e})}readBinary(e,g){var t;(t=this.__value)===null||t===void 0||t.readBinary(e)}toJSON(e){var g;return{name:this.name,value:(g=this.__value)===null||g===void 0?void 0:g.toJSON()}}fromJSON(e,g){const t=new f;t.fromJSON(e.value),this.__value=t,e.name&&(this.name=e.name)}clone(){var e;const g=new XI(this.name,(e=this.__value)===null||e===void 0?void 0:e.clone());return this.range&&g.setRange(this.range),g}}S.register("Vec2Parameter",XI);S.register("Property_Vec2_32f",XI);class kI extends Le{constructor(e="",g,t){super(e,g||new b,"Vec3");this.range=t}readBinary(e,g){var t;(t=this.__value)===null||t===void 0||t.readBinary(e)}toJSON(e){var g;return{name:this.name,value:(g=this.__value)===null||g===void 0?void 0:g.toJSON()}}fromJSON(e,g){const t=new b;t.fromJSON(e.value),this.__value=t,e.name&&(this.name=e.name)}clone(){var e;return new kI(this.name,(e=this.__value)===null||e===void 0?void 0:e.clone())}}S.register("Vec3Parameter",kI);S.register("Property_Vec3_32f",kI);class wt extends Le{constructor(e="",g){super(e,g||new Be,"Vec4")}readBinary(e,g){var t;(t=this.__value)===null||t===void 0||t.readBinary(e)}toJSON(e){var g;return{name:this.name,value:(g=this.__value)===null||g===void 0?void 0:g.toJSON()}}fromJSON(e,g){const t=new Be;t.fromJSON(e.value),this.__value=t,e.name&&(this.name=e.name)}clone(){var e;return new wt(this.name,(e=this.__value)===null||e===void 0?void 0:e.clone())}}S.register("Vec4Parameter",wt);S.register("Property_Vec4_32f",wt);class Xl extends Le{constructor(e="",g){super(e,g||new Yt,"Box2")}readBinary(e,g){this.__value.p0.readBinary(e),this.__value.p1.readBinary(e)}toJSON(e){return{value:{p0:this.__value.p0.toJSON(),p1:this.__value.p1.toJSON()}}}fromJSON(e,g){this.__value.p0.fromJSON(e.p0),this.__value.p1.fromJSON(e.p1)}clone(){var e;return new Xl(this.name,(e=this.__value)===null||e===void 0?void 0:e.clone())}}S.register("Box2Parameter",Xl);S.register("Property_Box2_32f",Xl);class fI extends Le{constructor(e="",g){super(e,g||new gg,"Box3")}readBinary(e,g){this.__value.p0.readBinary(e),this.__value.p1.readBinary(e)}toJSON(e){return{value:{p0:this.__value.p0.toJSON(),p1:this.__value.p1.toJSON()}}}fromJSON(e,g){e.value&&(this.__value.p0.fromJSON(e.value.p0),this.__value.p1.fromJSON(e.value.p1))}clone(){var e;return new fI(this.name,(e=this.__value)===null||e===void 0?void 0:e.clone())}}S.register("Box3Parameter",fI);S.register("Property_Box3_32f",fI);class Fg extends Le{constructor(e="",g){super(e,g||new E,"Color")}readBinary(e,g){const t=e.loadRGBAFloat32Color();t.applyGamma(2.2),this.__value=t}toJSON(e){var g;return{value:(g=this.__value)===null||g===void 0?void 0:g.toJSON()}}fromJSON(e,g){var t;(t=this.__value)===null||t===void 0||t.fromJSON(e.value)}clone(){var e;return new Fg(this.name,(e=this.__value)===null||e===void 0?void 0:e.clone())}}S.register("ColorParameter",Fg);S.register("Property_Color_32f",Fg);class kl extends Le{constructor(e="",g){super(e,g||new de,"Quat")}readBinary(e,g){var t;(t=this.__value)===null||t===void 0||t.readBinary(e)}toJSON(e){var g;return{value:(g=this.__value)===null||g===void 0?void 0:g.toJSON()}}fromJSON(e,g){const t=new de;t.fromJSON(e.value),this.__value=t}clone(){var e;return new kl(this.name,(e=this.__value)===null||e===void 0?void 0:e.clone())}}S.register("QuatParameter",kl);S.register("Property_Quat_32f",kl);class fl extends Le{constructor(e="",g){super(e,g||new ng,"Mat3")}readBinary(e,g){var t;(t=this.__value)===null||t===void 0||t.readBinary(e)}toJSON(e){var g;return{value:(g=this.__value)===null||g===void 0?void 0:g.toJSON()}}fromJSON(e,g){const t=new ng;t.fromJSON(e.value),this.__value=t}clone(){var e;return new fl(this.name,(e=this.__value)===null||e===void 0?void 0:e.clone())}}S.register("Mat3Parameter",fl);S.register("Property_Mat3_32f",fl);class EI extends Le{constructor(e="",g){super(e,g||new Ee,"Mat4")}readBinary(e,g){var t;(t=this.__value)===null||t===void 0||t.readBinary(e)}toJSON(e){var g;return{value:(g=this.__value)===null||g===void 0?void 0:g.toJSON()}}fromJSON(e,g){const t=new Ee;t.fromJSON(e.value),this.__value=t}clone(){var e;return new EI(this.name,(e=this.__value)===null||e===void 0?void 0:e.clone())}}S.register("Mat4Parameter",EI);S.register("Property_Mat4_32f",EI);class cg extends Le{constructor(e="",g){super(e,g||new v,"Xfo")}readBinary(e,g){this.__value.readBinary(e)}toJSON(e){return{name:this.name,value:this.__value.toJSON()}}fromJSON(e,g){const t=new v;t.fromJSON(e.value),this.__value=t,e.name&&(this.name=e.name)}clone(){return new cg(this.name,this.__value.clone())}}S.register("XfoParameter",cg);S.register("Property_Xfo_32f",cg);class TI extends Le{constructor(e="",g){super(e,g,"BaseImage")}toJSON(e){const g={name:this.name};return this.__value&&(g.imageType=this.__value.getClassName(),g.value=this.__value.toJSON()),g}fromJSON(e,g){var t;e.imageType&&(this.__value=S.constructClass(e.imageType),e.value&&((t=this.__value)===null||t===void 0||t.fromJSON(e.value,g)))}clone(){return new TI(this.name,this.__value)}}S.register("ImageParameter",TI);class Zg extends Le{constructor(e="",g=""){super(e,g,"String");this.multiLine=!1}setMultiLine(e){this.multiLine=e}getMultiLine(){return this.multiLine}readBinary(e,g){this.__value=e.loadStr()}toJSON(e){return{value:this.__value}}fromJSON(e,g){this.__value=e.value?e.value:"",this.emit("valueChanged",{mode:0})}clone(){return new Zg(this.name,this.__value)}}S.register("StringParameter",Zg);S.register("Property_String",Zg);class El extends Le{constructor(e="",g=[]){super(e,g,"String[]")}readBinary(e,g){this.__value=e.loadStrArray()}toJSON(e){return{value:this.__value}}fromJSON(e,g){this.__value=e.value,this.emit("valueChanged",{mode:0})}clone(){return new El(this.name,this.__value)}}S.register("StringListParameter",El);S.register("Property_StringList",El);class PC extends Le{constructor(e){super(e,{},"Struct");this.members=[]}addMember(e){return this.__value&&(this.__value[e.getName()]=e.value),e.on("valueChanged",()=>{this.__value&&(this.__value[e.getName()]=e.value)}),this.members.push(e),this.emit("valueChanged"),e}getParameter(e){for(const g of this.members)if(g.getName()==e)return g}getMember(e){return this.getParameter(e)}getMemberNames(){const e=[];for(let g=0;g<this.members.length;g++){const t=this.members[g];t!=null&&(e[g]=t.getName())}return e}toJSON(e){const g={},t=[];for(const I of this.members)t.push(I.toJSON(e));return g.members=t,g.name=this.name,g}fromJSON(e,g){if(e.members==null){console.warn("Invalid Parameter JSON");return}for(let t=0;t<e.members.length;t++)e.members[t]&&this.members[t].fromJSON(e.members[t],g);this.name=e.name}clone(){return new PC(this.name)}destroy(){for(const e of this.members)e.destroy()}}S.register("StructParameter",PC);class Tl extends Xe{constructor(e,g=Mt.OP_WRITE){super();this._op=null,this.__name=e,this._mode=g,this._param=void 0,this._paramBindIndex=-1,this.detached=!1}getName(){return this.__name}setOperator(e){this._op=e}getOperator(){return this._op}getMode(){return this._mode}isConnected(){return this._param!=null}getParam(){return this._param}setParam(e,g=-1){this._param&&this._param.unbindOperatorOutput(this),this._param=e,this._param&&(this._paramBindIndex=this._param.bindOperatorOutput(this,g)),this.emit("paramSet",{param:this._param})}getParamBindIndex(){return this._paramBindIndex}setParamBindIndex(e){this._paramBindIndex=e}setDirty(){this._param&&this._param.setDirty(this._paramBindIndex)}getValue(){if(this._param)return this._param.getValueFromOp(this._paramBindIndex);throw new Error("Cannot call getValue on OperatorOutput that is not connected:",this.__name)}backPropagateValue(e){return this._op&&(e=this._op.backPropagateValue(e)),e}setClean(e){this._param&&this._param.setCleanFromOp(e,this._paramBindIndex)}toJSON(e){const g=this._param?this._param.getPath():"";return{name:this.__name,paramPath:e&&e.makeRelative?e.makeRelative(g):g,paramBindIndex:this._paramBindIndex}}fromJSON(e,g){e.paramPath&&(g==null||g.resolvePath(e.paramPath,t=>{this.setParam(t,e.paramBindIndex)},t=>{console.warn("OperatorOutput: '"+this.getName()+"'. Unable to connect to:"+e.paramPath)}))}detach(){this.detached=!0,this._paramBindIndex=this._param?this._param.unbindOperatorOutput(this):-1}reattach(){this.detached=!1,this._param&&(this._paramBindIndex=this._param.bindOperatorOutput(this,this._paramBindIndex))}rebind(){this._param&&(this._param.unbindOperatorOutput(this),this._paramBindIndex=this._param.bindOperatorOutput(this))}}class MU extends Tl{}class Yl extends Tl{}class HU extends Tl{}class ag extends jg{constructor(e=""){super(e);this.__inputs=new Map,this.__outputs=new Map}setDirty(){this.__outputs.forEach(e=>e.setDirty())}parameterValueChanged(e){super.parameterValueChanged(e),this.setDirty()}addInput(e){return e.setOperator(this),this.__inputs.set(e.getName(),e),this.setDirty(),e}removeInput(e){typeof e=="string"&&(e=this.getInput(e)),e.getParam()&&e.setParam(void 0),this.__inputs.delete(e.getName())}getNumInputs(){return this.__inputs.size}getInputByIndex(e){return Array.from(this.__inputs.values())[e]}getInput(e){const g=this.__inputs.get(e);if(!g)throw`Couldn't find an Input with the name of '${e}'`;return g}addOutput(e){return e.setOperator(this),this.__outputs.set(e.getName(),e),this.setDirty(),e}removeOutput(e){if(typeof e=="string"&&(e=this.getOutput(e)),!(e instanceof Tl))throw new Error("removeOutput only accepts string or OperatorInput");e.getParam()&&e.setParam(),this.__outputs.delete(e.getName())}getNumOutputs(){return this.__outputs.size}getOutputByIndex(e){return Array.from(this.__outputs.values())[e]}getOutput(e){const g=this.__outputs.get(e);if(!g)throw new Error(`Couldn't find an Output with the name of '${e}'`);return g}evaluate(){throw new Error("Not yet implemented")}backPropagateValue(e){return e}toJSON(e){const g=super.toJSON(e);g.type=this.getClassName();const t=[];this.__inputs.forEach(l=>{t.push(l.toJSON(e))}),g.inputs=t;const I=[];return this.__outputs.forEach(l=>{I.push(l.toJSON(e))}),g.outputs=I,g}fromJSON(e,g){super.fromJSON(e,g),e.inputs&&e.inputs.forEach((t,I)=>{let l;t.name?(l=this.getInput(t.name),l||(l=this.addInput(t.name))):l=this.getInputByIndex(I),l.fromJSON(t,g)}),e.outputs&&e.outputs.forEach((t,I)=>{let l;t.name?(l=this.getOutput(t.name),l||(l=this.addOutput(t.name))):l=this.getOutputByIndex(I),l.fromJSON(t,g)})}detach(){this.__inputs.forEach(e=>e.detach()),this.__outputs.forEach(e=>e.detach())}reattach(){this.__inputs.forEach(e=>e.reattach()),this.__outputs.forEach(e=>e.reattach())}rebind(){this.__outputs.forEach(e=>e.rebind())}}class ca extends Xe{constructor(e){super();this.detached=!1,this.name=e}getName(){return this.name}setOperator(e){this._op=e}getOperator(){return this._op}isConnected(){return this.param!=null}getParam(){return this.param}paramValueChanged(){this._op&&this._op.setDirty()}setParam(e){this.param&&this.param.unbindOperatorInput(this),this.param=e,this.param&&this.param.bindOperatorInput(this),this.emit("paramSet",{param:this.param})}getValue(){if(this.param)return this.param.value;throw new Error("Unable to getValue")}setValue(e){this.param&&this.param.setValue(e)}setDirty(){this._op&&this._op.setDirty()}toJSON(e){const g=this.param?this.param.getPath():[],t=e&&e.makeRelative?e.makeRelative(g):g;return{name:this.name,paramPath:t}}fromJSON(e,g){e.paramPath&&(g==null||g.resolvePath(e.paramPath,t=>{this.setParam(t)},()=>{console.warn("OperatorInput: '"+this.getName()+"'. Unable to connect to:"+e.paramPath)}))}detach(){this.param&&this.param.unbindOperatorInput(this)}reattach(){this.detached=!1,this.param&&this.param.bindOperatorInput(this)}}class xU extends ca{}class Pg extends ca{}class Za extends ag{constructor(e,g){super("CalcGlobalXfoOperator");this.parentGlobal=new Pg("ParentGlobal"),this.localXfo=new Pg("LocalXfo"),this.globalXfo=new Yl("GlobalXfo"),this.localXfo.setParam(g),this.globalXfo.setParam(e),this.addInput(this.parentGlobal),this.addInput(this.localXfo),this.addOutput(this.globalXfo)}backPropagateValue(e){if(this.parentGlobal.isConnected()){const g=this.parentGlobal.getValue();this.localXfo.setValue(g.inverse().multiply(e))}else this.localXfo.setValue(e)}evaluate(){const e=this.localXfo.getValue();if(this.parentGlobal.isConnected()){const g=this.parentGlobal.getValue();this.globalXfo.setClean(g.multiply(e))}else this.globalXfo.setClean(e)}}S.register("CalcGlobalXfoOperator",Za);class jC extends fI{constructor(e="",g){super(e);this.dirty=!0,this.treeItem=g}setDirty(e){return this.dirty||(this.dirty=!0,this.emit("valueChanged")),!0}getValue(){return this.dirty&&(this.__value=this.treeItem._cleanBoundingBox(),this.dirty=!1),this.__value}clone(){var e;const g=new jC(this.name,this.treeItem);return g.value=(e=this.__value)===null||e===void 0?void 0:e.clone(),g}loadValue(e){this.__value=e.clone()}}class H extends jg{constructor(e){super(e);this.disableBoundingBox=!1,this.__childItems=[],this.__childItemsEventHandlers=[],this.__childItemsMapping={},this.globalXfoParam=new cg("GlobalXfo",new v),this.localXfoParam=new cg("LocalXfo",new v),this.boundingBoxParam=new jC("BoundingBox",this),this.visibleParam=new Je("Visible",!0),this.opacityParam=new k("Opacity",1,[0,1]),this.__highlightMapping={},this.__highlights=[],this.__visible=!0,this.__visibleCounter=1,this.__opacity=1,this.addParameter(this.visibleParam),this.addParameter(this.opacityParam),this.addParameter(this.localXfoParam),this.addParameter(this.globalXfoParam),this.addParameter(this.boundingBoxParam),this.globalXfoOp=new Za(this.globalXfoParam,this.localXfoParam),this.globalXfoParam.on("valueChanged",g=>{this.setBoundingBoxDirty(),this.emit("globalXfoChanged",g)}),this.visibleParam.on("valueChanged",()=>{this.__visibleCounter+=this.visibleParam.value?1:-1,this.updateVisibility()}),this.opacityParam.on("valueChanged",()=>{this.updateOpacity()})}setOwner(e){if(this.__ownerItem){const g=this.__ownerItem;if(g&&g instanceof H){g.isVisible()||this.__visibleCounter++;const t=g.getChildIndex(this);t>=0&&g.unbindChild(t,this)}}if(super.setOwner(e),this.__ownerItem){const g=this.__ownerItem;g&&(g.isVisible()||this.__visibleCounter--,this.globalXfoOp.getInput("ParentGlobal").setParam(g.globalXfoParam))}else this.globalXfoOp.getInput("ParentGlobal").setParam(void 0);this.updateVisibility()}updatePath(){super.updatePath();for(const e of this.__childItems)e&&e.updatePath()}getParentItem(){return this.getOwner()}setParentItem(e){this.setOwner(e)}isVisible(){return this.__visibleCounter>0}setVisible(e){this.visibleParam.value=e}propagateVisibility(e){this.__visibleCounter+=e,this.updateVisibility()}updateVisibility(){const e=this.__visibleCounter>0;if(e!=this.__visible){this.__visible=e;for(const t of this.__childItems)t.propagateVisibility(this.__visible?1:-1);this.emit("visibilityChanged",new vC(e));const g=this.__ownerItem;return g&&g instanceof H&&g.setBoundingBoxDirty(),!0}return!1}get opacity(){return this.__opacity}isOpaque(){return this.__opacity>.999}updateOpacity(){const e=this.__opacity>.999,g=this.getParentItem();g?this.__opacity=this.opacityParam.value*g.__opacity:this.__opacity=this.opacityParam.value;for(const I of this.__childItems)I.updateOpacity();const t=this.__opacity>.999;this.emit("opacityChanged",new Qa(t,e!=t))}addHighlight(e,g,t=!1){if(e in this.__highlightMapping)if(this.__highlights[this.__highlights.length-1]!=e){const I=this.__highlights.indexOf(e);this.__highlights.splice(I,1),this.__highlights.push(e),this.emit("highlightChanged",{name:e,color:g})}else this.__highlightMapping[e].isEqual(g)||(this.__highlightMapping[e]=g,this.emit("highlightChanged",{name:e,color:g}));else this.__highlights.push(e),this.__highlightMapping[e]=g,this.emit("highlightChanged",{name:e,color:g});t&&this.__childItems.forEach(I=>{I.addHighlight(e,g,t)})}removeHighlight(e,g=!1){if(e in this.__highlightMapping){if(this.__highlights[this.__highlights.length-1]==e)if(this.__highlights.pop(),delete this.__highlightMapping[e],this.__highlights.length>0){const t=this.__highlights[this.__highlights.length-1],I=this.__highlightMapping[t];this.emit("highlightChanged",{name:t,color:I})}else this.emit("highlightChanged");else{const t=this.__highlights.indexOf(e);this.__highlights.splice(t,1),delete this.__highlightMapping[e],this.emit("highlightChanged")}g&&this.__childItems.forEach(t=>{t.removeHighlight(e,g)})}}getHighlight(){return this.__highlights.length==0?null:this.__highlightMapping[this.__highlights[this.__highlights.length-1]]}getHighlightName(){return this.__highlights.length==0?null:this.__highlights[this.__highlights.length-1]}isHighlighted(){return this.__highlights.length>0}_cleanBoundingBox(){const e=new gg;return this.__childItems.forEach(g=>{if(g.isVisible()){const t=g.boundingBoxParam.value;t&&e.addBox3(t)}}),e}setBoundingBoxDirty(){this.boundingBoxParam&&this.boundingBoxParam.setDirty(-1);const e=this.__ownerItem;e&&e instanceof H&&e.setBoundingBoxDirty()}getChildren(){return this.__childItems}getNumChildren(){return this.__childItems.length}generateUniqueName(e){if(!(e in this.__childItemsMapping))return e;let g=1;e.length>4&&!Number.isNaN(parseInt(e.substring(e.length-4)))?g=parseInt(e.substr(e.length-4)):e.length>3&&!Number.isNaN(parseInt(e.substring(e.length-3)))?g=parseInt(e.substr(e.length-3)):e.length>2&&!Number.isNaN(parseInt(e.substring(e.length-2)))&&(g=parseInt(e.substr(e.length-2)));const t=[];for(const l of this.__childItems)l&&t.push(l.getName());let I=e;for(;;){let l=""+g;for(;l.length<2;)l="0"+l;if(I=e+l,!t.includes(I))break;g++}return I}updateChildNameMapping(e){for(let g=e;g<this.__childItems.length;g++)this.__childItemsMapping[this.__childItems[g].getName()]=g}childNameChanged(e){const g=this.__childItemsMapping[e.oldName];delete this.__childItemsMapping[e.oldName],this.__childItemsMapping[e.newName]=g}insertChild(e,g,t=!1,I=!0){if(e.getName()in this.__childItemsMapping)if(I)e.setName(this.generateUniqueName(e.getName()));else throw new Error("Item '"+e.getName()+"' is already a child of :"+this.getPath());if(!(e instanceof H))throw new Error("Object is is not a tree item :"+e);const l={};if(l.nameChanged=e.on("nameChanged",C=>{this.childNameChanged(C)}),t){const C=this.globalXfoParam.value,n=e.globalXfoParam.value,F=C.inverse().multiply(n);e.localXfoParam.value=F}return this.setBoundingBoxDirty(),this.__highlights.forEach(C=>{const n=this.__highlightMapping[C];e.addHighlight(C,n,!0)}),this.__childItems.splice(g,0,e),this.__childItemsEventHandlers.splice(g,0,l),this.__childItemsMapping[e.getName()]=g,this.updateChildNameMapping(g),e.setOwner(this),this.emit("childAdded",new VU(g,e)),e}addChild(e,g=!0,t=!0){const I=this.__childItems.length;return this.insertChild(e,I,g,t),e}getChild(e){return this.__childItems[e]}getChildByName(e){const g=this.__childItemsMapping[e];return g!=null?this.__childItems[g]:null}getChildNames(){const e=[];for(let g=0;g<this.__childItems.length;g++){const t=this.__childItems[g];t!=null&&(e[g]=t.getName())}return e}unbindChild(e,g){const t=this.__childItemsEventHandlers[e];for(const I in t)g.removeListenerById(I,t[I]);this.__childItems.splice(e,1),this.__childItemsEventHandlers.splice(e,1),delete this.__childItemsMapping[g.getName()],this.updateChildNameMapping(e),this.setBoundingBoxDirty(),this.emit("childRemoved",{childItem:g,index:e})}removeChild(e){const g=this.__childItems[e];!g||(this.unbindChild(e,g),g.setOwner(void 0))}removeChildByName(e){const g=this.__childItemsMapping[e];if(g!=null)return this.removeChild(g)}removeChildByHandle(e){const g=this.__childItems.indexOf(e);if(g==-1)throw new Error("Error in removeChildByHandle. Child not found:"+e.getName());this.removeChild(g)}removeAllChildren(){let e=this.__childItems.length;for(;e--;)this.removeChild(e);this.setBoundingBoxDirty()}getChildIndex(e){return this.__childItems.indexOf(e)}resolvePath(e,g=0,t=!1){if(typeof e=="string"&&(e=e.split("/")),g==0){if(e[0]=="."||e[0]==this.__name)g++;else if(e[0]==".."){if(this.__ownerItem)return this.__ownerItem.resolvePath(e,g+1);if(t)throw Error("this.__ownerItem is undefined");console.warn("this.__ownerItem is undefined")}}if(g==e.length)return this;const I=e[g],l=this.getChildByName(I);if(l==null){const C=this.getParameter(e[g]);if(C)return C;throw new Error(`Unable to resolve path : [${e.toString()}] after: ${this.getName()} 
No child or parameter called : "${e[g]}"`)}return l.resolvePath(e,g+1)}traverse(e,g=!0){const t=(l,C)=>{const n=l.getChildren();for(const F of n)F&&I(F,C+1)},I=(l,C)=>{e(l,C)!=!1&&t(l,C)};g?I(this,1):t(this,0)}onPointerDown(e){this.emit("pointerDown",e);const g=this.__ownerItem;e.propagating&&g&&g.onPointerDown(e)}onPointerUp(e){this.emit("pointerUp",e);const g=this.__ownerItem;e.propagating&&g&&g.onPointerUp(e)}onPointerMove(e){this.emit("pointerMove",e);const g=this.__ownerItem;e.propagating&&g&&g.onPointerMove(e)}onPointerEnter(e){this.emit("pointerEnter",e);const g=this.__ownerItem;e.propagating&&g&&g.onPointerEnter(e)}onPointerLeave(e){this.emit("pointerLeave",e);const g=this.__ownerItem;e.propagating&&g&&g.onPointerLeave(e)}onWheel(e){this.emit("mouseWheel",e);const g=this.__ownerItem;e.propagating&&g&&g.onWheel(e)}onTouchCancel(e){this.emit("touchCancel",e);const g=this.__ownerItem;e.propagating&&g&&g.onTouchCancel(e)}toJSON(e){let g=super.toJSON(e);const t={};for(const I of this.__childItems)if(I){const l=I.toJSON(e);l&&(t[I.getName()]=l)}return Object.keys(t).length>0&&(g?g.children=t:g={name:this.__name,children:t}),g}fromJSON(e,g,t){if(super.fromJSON(e,g),g&&!Number.isNaN(g.numTreeItems)&&g.numTreeItems++,e.children!=null){const I=e.children;if(Array.isArray(I))for(const l of I){let C=this.getChildByName(l.name);C?C.fromJSON(l,g):l.type&&(C=S.constructClass(l.type),C&&(C.fromJSON(l,g),this.addChild(C,!1,!1)))}else for(const l in I){const C=I[l];let n=this.getChildByName(l);n?n.fromJSON(C,g):C.type&&(n=S.constructClass(C.type),n&&(n.fromJSON(C,g),this.addChild(n,!1,!1)))}}}readBinary(e,g){super.readBinary(e,g),g.numTreeItems++;const t=e.loadUInt8(),I=1<<1;this.setVisible((t&I)!=0);const l=1<<2,C=1<<5;if(t&l){const a=new v;if(a.tr=e.loadFloat32Vec3(),a.ori=e.loadFloat32Quat(),t&C)a.sc=e.loadFloat32Vec3();else{const U=e.loadFloat32();a.sc.set(U,U,U)}this.localXfoParam.value=a}const n=1<<3;t&n&&this.boundingBoxParam.loadValue(new gg(e.loadFloat32Vec3(),e.loadFloat32Vec3()));const F=e.loadUInt32();if(F>0){const a=e.loadUInt32Array(F);for(let U=0;U<F;U++)try{e.seek(a[U]);let d=e.loadStr();const s=S.constructClass(d);if(!s){const o=e.loadStr();console.warn("Unable to construct child:"+o+" of type:"+d);continue}e.seek(a[U]),s.readBinary(e,g),this.addChild(s,!1,!0)}catch(d){console.warn("Error loading tree item: ",d)}}}clone(e){const g=new H("");return g.copyFrom(this,e),g}copyFrom(e,g){super.copyFrom(e,g),e.getChildren().forEach(t=>{t&&this.addChild(t.clone(g),!1,!1)})}}S.register("TreeItem",H);class qC extends Le{constructor(e="",g){super(e,void 0,"TreeItem");this.listenerIDs={},this.owner=new H(""),this.filterFn=g}emitTreeItemGlobalXfoChanged(e){this.emit("treeItemGlobalXfoChanged",e)}setOwner(e){this.owner=e}getOwner(){return this.owner}setFilterFn(e){this.filterFn=e}getFilterFn(){return this.filterFn}setValue(e){this.filterFn&&!this.filterFn(e)||this.__value!==e&&(this.__value&&this.__value.removeListenerById("globalXfoChanged",this.listenerIDs.globalXfoChanged),this.__value=e,this.__value&&(this.listenerIDs.globalXfoChanged=this.__value.on("globalXfoChanged",g=>{this.emitTreeItemGlobalXfoChanged(g)})),this.emit("valueChanged"))}toJSON(e){var g;return{value:e.makeRelative((g=this.__value)===null||g===void 0?void 0:g.getPath())}}fromJSON(e,g){if(e.value==null){console.warn("Invalid Parameter JSON");return}g.resolvePath(e.value,t=>{this.setValue(t)},()=>{console.warn("Unable to resolve tree item parameter value:"+e.paramPath)})}clone(e){const g=new qC(this.name,this.filterFn);return this.__value&&g.setValue(this.__value.clone(e)),g}}S.register("TreeItemParameter",qC);class gn extends Ke{constructor(e,g){super();this.index=g,this.item=e}}class $C extends Le{constructor(e="",g){super(e,new Set,"TreeItem");this.filterFn=g}setFilterFn(e){this.filterFn=e}getFilterFn(){return this.filterFn}getItem(e){return Array.from(this.__value)[e]}addItem(e,g=!0){if(this.filterFn&&!this.filterFn(e)){console.warn("ItemSet __filterFn rejecting item:",e.getPath());return}this.__value.add(e);const t=Array.from(this.__value).indexOf(e);return this.emit("itemAdded",new gn(e,t)),g&&this.emit("valueChanged"),t}addItems(e,g=!0){e.forEach(t=>this.addItem(t,!1)),g&&this.emit("valueChanged")}removeItem(e,g=!0){const t=Array.from(this.__value)[e];return this.__value.delete(t),this.emit("itemRemoved",new gn(t,e)),g&&this.emit("valueChanged"),t}setItems(e,g=!0){const t=Array.from(this.__value);for(let I=t.length-1;I>=0;I--){const l=t[I];e.has(l)||this.removeItem(I,!1)}for(const I of e)this.__value.has(I)||this.addItem(I,!1);g&&this.emit("valueChanged")}clearItems(e=!0){this.__value.clear(),e&&this.emit("valueChanged")}getNumItems(){return this.__value.size}toJSON(e){this.__value||(this.__value=new Set);const g=[];if(e)for(const t of this.__value)g.push(t.getPath());return{value:g}}fromJSON(e,g){if(g)for(const t in e.value){const I=g.resolvePath(t);this.__value.add(I)}}clone(){return new $C(this.name,this.filterFn)}}class vl extends Le{constructor(e="",g){super(e,g,"Geometry");this.listenerIDs={},g&&this.setValue(g)}emitBoundingBoxDirtied(e){this.emit("boundingBoxChanged",e)}setValue(e){this.__value!==e&&(this.__value&&this.__value.removeListenerById("boundingBoxChanged",this.listenerIDs.boundingBoxChanged),this.__value=e,this.__value&&(this.listenerIDs.boundingBoxChanged=this.__value.on("boundingBoxChanged",g=>{this.emitBoundingBoxDirtied(g)})),this.emit("valueChanged"))}loadValue(e){this.__value&&this.__value.removeListenerById("boundingBoxChanged",this.listenerIDs.boundingBoxChanged),this.__value=e,this.__value&&(this.listenerIDs.boundingBoxChanged=this.__value.on("boundingBoxChanged",g=>{this.emitBoundingBoxDirtied(g)}))}toJSON(e){var g;return{name:this.name,value:(g=this.__value)===null||g===void 0?void 0:g.toJSON(e)}}fromJSON(e,g){e.name&&(this.name=e.name);const t=S.constructClass(e.value.type);t.fromJSON(e.value,g),this.__value=t}clone(){return new vl(this.name,this.__value)}}S.register("GeometryParameter",vl);class ei extends Le{constructor(e=""){super(e,"","FilePath")}getFilename(){if(!this.__value)throw"No file value";return this.__value.lastIndexOf("/")>-1?this.__value.substring(this.__value.lastIndexOf("/")+1):""}getExt(){const e=this.getFilename(),g=e.lastIndexOf(".");if(g!=-1)return e.substring(g).toLowerCase()}getStem(){const e=this.getFilename();if(e){const g=e.split(".");return g.length==2?g[0]:e}return null}setValue(e){if(!e)throw new Error("Invalid value for setValue.");e!=this.__value&&(this.__value=e,this.emit("valueChanged"))}toJSON(e){return{value:this.__value}}fromJSON(e,g){e.value&&(this.__value=e.value)}clone(){const e=new ei(this.name);return this.__value&&e.setValue(this.__value),e}}S.register("FilePathParameter",ei);class YI extends Le{constructor(e="",g){super(e,g,"Material");this.listenerIDs={},g&&this.setValue(g)}valueParameterValueChanged(e){this.emit("valueParameterValueChanged",e)}setValue(e){this.__value!==e&&(this.__value&&this.__value.removeListenerById("parameterValueChanged",this.listenerIDs.parameterValueChanged),this.__value=e,this.__value&&(this.listenerIDs.parameterValueChanged=this.__value.on("parameterValueChanged",g=>{this.valueParameterValueChanged(g)})),this.emit("valueChanged"))}loadValue(e){this.__value&&this.__value.removeListenerById("parameterValueChanged",this.listenerIDs.parameterValueChanged),this.__value=e,this.__value&&(this.listenerIDs.parameterValueChanged=this.__value.on("parameterValueChanged",g=>{this.valueParameterValueChanged(g)}))}toJSON(e){let g={};return g.name=this.name,this.__value&&(g={value:!e||!e.onlyPath?this.__value.toJSON(e):this.__value.getPath()}),g}fromJSON(e,g){if(e.value==null){console.warn("Invalid Parameter JSON");return}if(e.value instanceof Array||e.value instanceof String){if(g&&g.assetItem){const I=g.assetItem.getMaterialLibrary().getMaterial(e.value instanceof Array?e.value[1]:e.value);I&&this.loadValue(I)}}else{const t=S.constructClass(e.value.type);e.value&&t.fromJSON(e.value,g),this.loadValue(t)}}clone(){return new YI(this.name,this.__value)}}S.register("MaterialParameter",YI);class ug extends jg{constructor(e){super(e);this.width=0,this.height=0,this.format="RGB",this.type="UNSIGNED_BYTE",this.loaded=!1,this.mipMapped=!0,this.wrapS="REPEAT",this.wrapT="REPEAT",this.minFilter="LINEAR",this.magFilter="LINEAR",this.alphaFromLuminance=!1,this.on("parameterValueChanged",()=>{this.emit("updated")})}isLoaded(){return this.loaded}getParams(){return{type:this.type,format:this.format,width:this.width,height:this.height,wrapS:this.wrapS,wrapT:this.wrapT,minFilter:this.minFilter,magFilter:this.magFilter,mipMapped:this.mipMapped,alphaFromLuminance:this.alphaFromLuminance}}}class Oe extends k{constructor(e="",g,t){super(e,g,t)}getImage(){return this.image}setImage(e){const g=()=>{this.emit("textureDisconnected")};e?(this.image!=null&&this.image!==e&&g(),this.image=e,this.emit("textureConnected"),this.emit("valueChanged",{mode:0})):this.image!=null&&(g(),this.image=void 0,this.emit("textureDisconnected"))}setValue(e){e instanceof ug?this.setImage(e):super.setValue(e)}readBinary(e,g){super.readBinary(e,g);const t=e.loadStr();t!=""&&(console.log("Load Texture"),this.setImage(g.assetItem.materialLibrary.getImage(t)))}clone(){return new Oe(this.name,this.__value,this.range)}}S.register("MaterialFloatParam",Oe);var Bg;(function(i){i.Gamma="Gamma",i.Linear="Linear"})(Bg||(Bg={}));class ye extends Fg{constructor(e,g){super(e,g);this.listenerIDs={},this.colorSpace=Bg.Gamma}getImage(){return this.image}imageUpdated(){this.emit("valueChanged")}setImage(e){const g=()=>{this.image&&(this.image.removeListenerById("updated",this.listenerIDs.updated),this.image=void 0),this.emit("textureDisconnected")};e?(this.image!=null&&this.image!==e&&g(),this.image=e,this.listenerIDs.updated=this.image.on("updated",()=>{this.imageUpdated()}),this.emit("textureConnected"),this.emit("valueChanged")):this.image!=null&&(g(),this.image=void 0,this.emit("textureDisconnected"))}setValue(e){e instanceof ug?this.setImage(e):super.setValue(e)}readBinary(e,g){super.readBinary(e,g);const t=e.loadStr();t!=""&&this.setImage(g.assetItem.materialLibrary.getImage(t)),this.colorSpace=Bg.Linear}clone(){var e;const g=new ye(this.name,(e=this.__value)===null||e===void 0?void 0:e.clone());return g.colorSpace=this.colorSpace,g}}S.register("MaterialColorParam",ye);function AC(i,e){return!i.some((g,t)=>Math.abs(e[t]-g)>.001)}function wU(i){for(let e=0;e<i.length;e++)if(!Number.isNaN(i[e]))return!0;return!1}class Ml extends LC{constructor(e,g){super();this.data=new Float32Array(0),this.dataTypeName=e,this.stride=g,this.initRange(0),this.splits={},this.splitValues=[]}setMesh(e){this.mesh=e}asArray(){return this.data}getDataTypeName(){return this.dataTypeName}getCount(){return this.data.length/this.stride}setCount(e){const g=this.data.length,t=e*this.stride;if(t>g){const I=new Float32Array(t);I.set(this.data,0),this.data=I,this.initRange(g)}else t<g&&(this.data=this.data.slice(0,t));this.splits={},this.splitValues=[]}initRange(e){for(let g=e;g<this.data.length;g++)this.data[g]=Number.NaN}get numElements(){return this.stride}getFloat32Value(e){return this.data[e]}setFloat32Value(e,g){this.data[e]=g}getSplits(){return this.splits}getFaceVertexValueRef_array(e,g){const t=this.mesh.getFaceVertexIndex(e,g);return t in this.splits&&e in this.splits[t]?this.splitValues[this.splits[t][e]]:this.data.subarray(t*this.stride,(t+1)*this.stride)}setFaceVertexValue_array(e,g,t){const I=this.mesh.getFaceVertexIndex(e,g);this.setFaceVertexValue_ByVertexIndex(e,I,t)}setFaceVertexValue_ByVertexIndex(e,g,t){const I=this.data.subarray(g*this.stride,(g+1)*this.stride);if(!wU(I))I.set(t);else if(!AC(I,t)){if(g in this.splits){const l=this.splits[g];for(const C in l){const n=l[C];if(AC(this.splitValues[n],t)){l[e]=n;return}}if(e in this.splits[g]){this.splitValues[this.splits[g][e]]=t;return}}else this.splits[g]={};this.splits[g][e]=this.splitValues.length,this.splitValues.push(t)}}setSplitVertexValue_array(e,g,t){if(e in this.splits||(this.splits[e]={}),g in this.splits[e]){const I=this.splitValues[this.splits[e][g]];if(AC(I,t))return;console.warn("Face Vertex Already Split with different value")}this.splits[e][g]=this.splitValues.length,this.splitValues.push(t)}setSplitVertexValues(e,g,t){e in this.splits||(this.splits[e]={});const I=this.splitValues.length;this.splitValues.push(t);for(const l of g)this.splits[e][l]=I}generateSplitValues(e,g){if(g==0)return this.data;const t=this.getCount(),I=new Float32Array((t+g)*this.stride);I.set(this.data);for(const l in e){const C=e[l];for(const n in C){const F=t+C[n];if(l in this.splits&&n in this.splits[l]){const a=this.splits[l][n];this.splitValues[a].forEach((U,d)=>{I[F*this.stride+d]=U})}else{const a=parseInt(l);for(let U=0;U<this.stride;U++)I[F*this.stride+U]=this.data[a*this.stride+U]}}}return I}toJSON(e){return{data:this.data,dataType:this.dataTypeName,length:this.data.length/this.stride}}fromJSON(e){const g=e.data.map(t=>q.isNumeric(t)?t:Number.POSITIVE_INFINITY);this.data=Float32Array.from(g)}loadSplitValues(e){const g=e.loadUInt32Array();if(g.length==0)return;let t=0,I=0;for(;;){const n=g[t++],F=g[t++],a={};for(let U=0;U<F;U++){const d=g[t++],s=g[t++];a[d]=s,s>=I&&(I=s+1)}if(this.splits[n]=a,t>=g.length)break}const l=this.stride,C=e.loadFloat32Array(I*l);this.splitValues=[];for(let n=0;n<I;n++){const F=C.slice(n*l,n*l+l);this.splitValues.push(F)}}toString(){return JSON.stringify(this.toJSON(),null,2)}genBuffer(){return{values:this.data,count:this.getCount(),dataType:this.dataTypeName,normalized:this.normalized}}}class Qg extends Ml{constructor(){super("Vec3",3);this.normalized=!1}getValueRef(e){if(e>=this.data.length/this.stride)throw new Error("Invalid vertex index:"+e+". Num Vertices:"+this.data.length/3);const g=e*this.stride,t=this.data.subarray(g,g+this.stride);return new b(t)}getValue(e){if(e>=this.data.length/this.stride)throw new Error("Invalid vertex index:"+e+". Num Vertices:"+this.data.length/3);const g=e*this.stride,t=this.data.slice(g,g+this.stride);return new b(t)}setValue(e,g){if(e>=this.data.length/this.stride)throw new Error("Invalid vertex index:"+e+". Num Vertices:"+this.data.length/3);const t=e*this.stride;this.data.set(g.asArray(),t)}getFaceVertexValueRef(e,g){const t=this.getFaceVertexValueRef_array(e,g);return new b(t)}setFaceVertexValue(e,g,t){this.setFaceVertexValue_array(e,g,t.asArray())}setSplitVertexValue(e,g,t){this.setSplitVertexValue_array(e,g,t.asArray())}}S.register("Vec3Attribute",Qg);class Sg extends Ml{constructor(){super("Vec2",2);this.normalized=!1}getValueRef(e){if(e>=this.data.length/this.stride)throw new Error("Invalid vertex index:"+e+". Num Vertices:"+this.data.length/3);const g=e*this.stride,t=this.data.subarray(g,g+this.stride);return new f(t)}getValue(e){if(e>=this.data.length/this.stride)throw new Error("Invalid vertex index:"+e+". Num Vertices:"+this.data.length/3);const g=e*this.stride,t=this.data.slice(g,g+this.stride);return new f(t)}setValue(e,g){if(e>=this.data.length/this.stride)throw new Error("Invalid vertex index:"+e+". Num Vertices:"+this.data.length/3);const t=e*this.stride;this.data.set(g.asArray(),t)}getFaceVertexValueRef(e,g){const t=this.getFaceVertexValueRef_array(e,g);return new f(t)}setFaceVertexValue(e,g,t){this.setFaceVertexValue_array(e,g,t.asArray())}setSplitVertexValue(e,g,t){this.setSplitVertexValue_array(e,g,t.asArray())}}S.register("Vec2Attribute",Sg);const tn=(i,e,g,t,I)=>{for(let l=i[0];l<i[1];l++){const C=new b(t[l*3+0]/255,t[l*3+1]/255,t[l*3+2]/255);C.multiplyInPlace(g),C.addInPlace(e),I.setValue(l,C)}},In=(i,e,g,t,I)=>{for(let l=i[0];l<i[1];l++){const C=new b(t[l*3+0]/65535,t[l*3+1]/65535,t[l*3+2]/65535);C.multiplyInPlace(g),C.addInPlace(e),I.setValue(l,C)}},ln=(i,e,g,t,I)=>{g.isNull()&&g.set(1,1,1);for(let l=i[0];l<i[1];l++){const C=new b(t[l*3+0]/255,t[l*3+1]/255,t[l*3+2]/255);C.multiplyInPlace(g),C.addInPlace(e),C.normalizeInPlace(),I.setValue(l,C)}},Cn=(i,e,g,t,I)=>{for(let l=i[0];l<i[1];l++){const C=new f(t[l*2+0]/255,t[l*2+1]/255);C.multiplyInPlace(g),C.addInPlace(e),I.setValue(l,C)}},nn=(i,e,g,t,I)=>{for(let l=i[0];l<i[1];l++){const C=new f(t[l*2+0]/65535,t[l*2+1]/65535);C.multiplyInPlace(g),C.addInPlace(e),I.setValue(l,C)}};class gi extends xt{constructor(){super();this.__boundingBox=new gg,this.__boundingBoxDirty=!0,this.__metaData=new Map,this.__name="",this.__numVertices=0,this.__vertexAttributes=new Map,this.debugColor=new E(1,0,0,1),this.name="",this.addVertexAttribute("positions",new Qg)}clear(){this.setNumVertices(0)}setDebugName(e){this.name=e}addVertexAttribute(e,g){g.setCount(this.__numVertices),this.__vertexAttributes.set(e,g)}hasVertexAttribute(e){return this.__vertexAttributes.has(e)}getVertexAttribute(e){return this.__vertexAttributes.get(e)}getVertexAttributes(){const e={};for(const[g,t]of this.__vertexAttributes.entries())e[g]=t;return e}get positions(){return this.__vertexAttributes.get("positions")}numVertices(){return this.__numVertices}getNumVertices(){return this.__numVertices}setNumVertices(e){this.__numVertices=e,this.__vertexAttributes.forEach(g=>g.setCount(this.__numVertices)),this.setBoundingBoxDirty()}getBoundingBox(){return this.__boundingBoxDirty&&this.updateBoundingBox(),this.__boundingBox}setBoundingBoxDirty(){this.__boundingBoxDirty=!0,this.emit("boundingBoxChanged")}updateBoundingBox(){const e=this.positions,g=new gg;if(e){const t=e.getCount();for(let I=0;I<t;I++)g.addPoint(e.getValueRef(I))}this.__boundingBox=g,this.__boundingBoxDirty=!1}getMetadata(e){return this.__metaData.get(e)}hasMetadata(e){return this.__metaData.has(e)}setMetadata(e,g){this.__metaData.set(e,g)}deleteMetadata(e){this.__metaData.delete(e)}genBuffers(e){const g={};for(const[t,I]of this.__vertexAttributes)g[t]=I.genBuffer();return{numVertices:this.numVertices(),attrBuffers:g}}loadBaseGeomBinary(e,g){this.name=e.loadStr();const t=e.loadUInt8();this.debugColor=e.loadRGBFloat32Color();const I=e.loadUInt32();this.__boundingBox.set(e.loadFloat32Vec3(),e.loadFloat32Vec3()),this.setNumVertices(I);const l=this.positions;let C,n;t&1<<1&&(C=this.getVertexAttribute("normals"),C||(C=new Qg,this.addVertexAttribute("normals",C))),t&1<<2&&(n=this.getVertexAttribute("texCoords"),n||(n=new Sg,this.addVertexAttribute("texCoords",n)));const F=e.loadUInt32();if(F==1){{const a=this.__boundingBox;if(g.versions["zea-engine"].compare([3,9,1])>=0){const U=e.loadUInt16Array(I*3);In([0,I],a.p0,a.diagonal(),U,l)}else{const U=e.loadUInt8Array(I*3);tn([0,I],a.p0,a.diagonal(),U,l)}}if(C){const a=new gg(e.loadFloat32Vec3(),e.loadFloat32Vec3()),U=e.loadUInt8Array(I*3);ln([0,I],a.p0,a.diagonal(),U,C),C.loadSplitValues(e)}if(n){const a=new Yt(e.loadFloat32Vec2(),e.loadFloat32Vec2());if(g.versions["zea-engine"].compare([3,9,1])>=0){const U=e.loadUInt16Array(I*2);nn([0,I],a.p0,a.diagonal(),U,n)}else{const U=e.loadUInt8Array(I*2);Cn([0,I],a.p0,a.diagonal(),U,n)}n.loadSplitValues(e)}}else{const a=[];let U=0;for(let A=0;A<F;A++){const B=e.loadUInt32(),Q={range:[U,U+B],bbox:new gg(e.loadFloat32Vec3(),e.loadFloat32Vec3()),normalsRange:new gg,texCoordsRange:new Yt};C&&Q.normalsRange.set(e.loadFloat32Vec3(),e.loadFloat32Vec3()),n&&Q.texCoordsRange.set(e.loadFloat32Vec2(),e.loadFloat32Vec2()),a.push(Q),U+=B}let d;g.versions["zea-engine"].compare([3,9,1])>=0?d=e.loadUInt16Array(I*3):d=e.loadUInt8Array(I*3);let s=null,o=null;C&&(s=e.loadUInt8Array(I*3)),n&&(o=e.loadUInt8Array(I*2));for(let A=0;A<F;A++){{const B=a[A].bbox;g.versions["zea-engine"].compare([3,9,1])>=0?In(a[A].range,B.p0,B.diagonal(),d,l):tn(a[A].range,B.p0,B.diagonal(),d,l)}if(s){const B=a[A].normalsRange;ln(a[A].range,B.p0,B.diagonal(),s,C)}if(o){const B=a[A].texCoordsRange;g.versions["zea-engine"].compare([3,9,1])>=0?nn([0,I],B.p0,B.diagonal(),o,n):Cn(a[A].range,B.p0,B.diagonal(),o,n)}}C&&C.loadSplitValues(e),n&&n.loadSplitValues(e)}}toJSON(e){const g=super.toJSON(e);(!e||!e.skipTopology)&&(g.numVertices=this.__numVertices||0);const t={};for(const[I,l]of this.__vertexAttributes.entries())(!e||!("skipAttributes"in e)||!e.skipAttributes.includes(I))&&(t[I]=l.toJSON(e));return g.vertexAttributes=t,g}fromJSON(e,g){this.clear(),super.fromJSON(e,g),this.setNumVertices(e.numVertices);for(const t in e.vertexAttributes){let I=this.__vertexAttributes.get(t);const l=e.vertexAttributes[t];I?I.fromJSON(l):console.warn("attr undefined, cannot execute fromJSON()")}this.emit("geomDataTopologyChanged")}toString(){return JSON.stringify(this.toJSON(),null,2)}}class DU extends Ml{constructor(){super("Vec4",4);this.normalized=!1}getValueRef(e){if(e>=this.data.length/this.stride)throw new Error("Invalid vertex index:"+e+". Num Vertices:"+this.data.length/3);const g=e*this.stride,t=this.data.subarray(g,g+this.stride);return new Be(t)}getValue(e){if(e>=this.data.length/this.stride)throw new Error("Invalid vertex index:"+e+". Num Vertices:"+this.data.length/3);const g=e*this.stride,t=this.data.slice(g,g+this.stride);return new Be(t)}setValue(e,g){if(e>=this.data.length/this.stride)throw new Error("Invalid vertex index:"+e+". Num Vertices:"+this.data.length/3);const t=e*this.stride;this.data.set(g.asArray(),t)}getFaceVertexValueRef(e,g){const t=this.getFaceVertexValueRef_array(e,g);return new Be(t)}setFaceVertexValue(e,g,t){this.setFaceVertexValue_array(e,g,t.asArray())}setSplitVertexValue(e,g,t){this.setSplitVertexValue_array(e,g,t.asArray())}}S.register("Vec4Attribute",DU);class KU extends Ml{constructor(){super("Color",4);this.normalized=!1}getValueRef(e){if(e>=this.data.length/this.stride)throw new Error("Invalid vertex index:"+e+". Num Vertices:"+this.data.length/3);const g=e*this.stride,t=this.data.subarray(g,g+this.stride);return new E(t)}getValue(e){if(e>=this.data.length/this.stride)throw new Error("Invalid vertex index:"+e+". Num Vertices:"+this.data.length/3);const g=e*this.stride,t=this.data.slice(g,g+this.stride);return new E(t)}setValue(e,g){if(e>=this.data.length/this.stride)throw new Error("Invalid vertex index:"+e+". Num Vertices:"+this.data.length/3);const t=e*this.stride;this.data.set(g.asArray(),t)}getFaceVertexValueRef(e,g){const t=this.getFaceVertexValueRef_array(e,g);return new E(t)}setFaceVertexValue(e,g,t){this.setFaceVertexValue_array(e,g,t.asArray())}setSplitVertexValue(e,g,t){this.setSplitVertexValue_array(e,g,t.asArray())}}S.register("ColorAttribute",KU);class Rt extends gi{constructor(){super()}clear(){this.setNumVertices(0),this.emit("geomDataTopologyChanged")}readBinary(e,g){super.loadBaseGeomBinary(e,g),this.emit("geomDataChanged")}}S.register("Points",Rt);class sg extends gi{constructor(){super();this.__indices=new Uint32Array}clear(){this.setNumSegments(0),this.setNumVertices(0),this.emit("geomDataTopologyChanged")}getIndices(){return this.__indices}getNumSegments(){return this.__indices.length/2}getNumLineSegments(){return this.__indices.length/2}setNumSegments(e){if(e>this.getNumSegments()){const g=new Uint32Array(e*2);g.set(this.__indices),this.__indices=g}else this.__indices=this.__indices.slice(0,e*2)}setSegmentVertexIndices(e,g,t){if(e>=this.__indices.length/2)throw new Error("Invalid line index:"+e+". Num Segments:"+this.__indices.length/2);this.__indices[e*2+0]=g,this.__indices[e*2+1]=t}getSegmentVertexIndex(e,g){const t=this.getNumSegments();return e<t?this.__indices[e*2+g]:-1}genBuffers(e){const g=super.genBuffers();let t;return g.numVertices<Math.pow(2,8)?t=new Uint8Array(this.__indices):g.numVertices<Math.pow(2,16)?t=new Uint16Array(this.__indices):t=this.__indices,g.indices=t,g}readBinary(e,g){super.loadBaseGeomBinary(e,g),this.setNumSegments(e.loadUInt32());const t=e.loadUInt8();t==1?this.__indices=e.loadUInt8Array():t==2?this.__indices=e.loadUInt16Array():t==4&&(this.__indices=e.loadUInt32Array()),this.emit("geomDataChanged")}toJSON(e){const g=super.toJSON(e);return(!e||!e.skipTopology)&&(g.indices=Array.from(this.__indices)),g}fromJSON(e,g){super.fromJSON(e,g),e.indices&&(this.__indices=Uint32Array.from(e.indices))}}S.register("Lines",sg);class ht extends gi{constructor(){super();this.edgeFaces=[],this.faceEdges=[[]],this.faceCounts=[],this.__faceVertexIndices=new Uint32Array,this.__logTopologyWarnings=!1,this.__edgeAttributes=new Map,this.__faceAttributes=new Map,this.numEdges=0,this.edgeVerts=[],this.vertexEdges=[],this.edgeAngles=new Float32Array,this.edgeVecs=[]}clear(){super.clear(),this.edgeVerts=[],this.vertexEdges=[],this.numEdges=0,this.edgeAngles=new Float32Array,this.emit("geomDataTopologyChanged")}addVertexAttribute(e,g){super.addVertexAttribute(e,g),g.setMesh(this)}getFaceCounts(){return this.faceCounts}getNumFaces(){return this.faceCounts.length==0?0:this.faceCounts.reduce((e,g)=>e+=g)}getNumTriangles(){let e=0,g=1;for(const t of this.faceCounts)e+=t*g,g++;return e}setFaceCounts(e){let g=0,t=3;for(const l of e)g+=l*t,t++;if(this.getNumFaces()==0)this.__faceVertexIndices=new Uint32Array(g);else{const l=new Uint32Array(g);let C=0,n=0;g=0,t=3,e.forEach((F,a)=>{const U=C+Math.min(F,this.faceCounts[a])*t;l.set(this.__faceVertexIndices.slice(C,U),n),C+=this.faceCounts[a]*t,n+=F*t,t++}),this.__faceVertexIndices=l}this.faceCounts=e}getFaceVertexCount(e){let g=0,t=0;return this.faceCounts.some((I,l)=>(g+=I,g>e?(t=l+3,!0):!1)),t}getFaceVertexOffset(e){let g=0,t=0;return this.faceCounts.some((I,l)=>g+I>e?(t+=(e-g)*(l+3),!0):(g+=I,t+=I*(l+3),!1)),t}setFaceVertexIndices(e,g){const t=this.getFaceVertexCount(e);if(g.length!=t)throw new Error(`Invalid indices for face:${e} vertexIndices:${g}. Expected ${t} indices`);const I=this.getFaceVertexOffset(e);this.__faceVertexIndices.set(g,I)}addFace(e){const g=[...this.faceCounts];if(g.length<=e.length-3){for(let l=g.length;l<e.length-3;l++)g[l]=0;g[e.length-3]=1}else g[e.length-3]++;this.setFaceCounts(g);let t=0,I=0;return this.faceCounts.some((l,C)=>C+3==e.length?(t+=l-1,I+=(l-1)*(C+3),!0):(t+=l,I+=l*(C+3),!1)),this.__faceVertexIndices.set(e,I),t}getFaceVertexIndices(e){const g=[],t=this.getFaceVertexOffset(e),I=this.getFaceVertexCount(e);for(let l=0;l<I;l++)g.push(this.__faceVertexIndices[t+l]);return g}getFaceVertexIndex(e,g){const t=this.getFaceVertexOffset(e);return this.__faceVertexIndices[t+g]}addFaceAttribute(e,g){return g.setCount(this.getNumFaces()),this.__faceAttributes.set(e,g),g}hasFaceAttribute(e){return this.__faceAttributes.has(e)}getFaceAttribute(e){return this.__faceAttributes.get(e)}addEdgeAttribute(e,g){g.setCount(this.numEdges),this.__edgeAttributes.set(e,g)}hasEdgeAttribute(e){return this.__edgeAttributes.has(e)}getEdgeAttribute(e){return this.__edgeAttributes.get(e)}genTopologyInfo(){let e={};this.vertexEdges=[],this.edgeFaces=[],this.edgeVerts=[],this.faceEdges=[],this.numEdges=0;const g=this.positions,t=(C,n)=>{let F=C,a=n;if(a<F){const Q=F;F=a,a=Q}const U=F+">"+a;if(U in e)return e[U];const d=g.getValueRef(F),o=g.getValueRef(a).subtract(d),B={edgeIndex:this.edgeFaces.length/2,edgeVec:o};return e[U]=B,this.edgeFaces.push(-1),this.edgeFaces.push(-1),this.edgeVerts.push(F),this.edgeVerts.push(a),this.numEdges++,B},I=(C,n,F)=>{const U=t(C,n).edgeIndex;if(n<C){const d=U*2+0;this.__logTopologyWarnings&&this.edgeFaces[d]!=-1&&console.warn("Edge poly 0 already set. Mesh is non-manifold."),this.edgeFaces[d]=F}else{const d=U*2+1;this.__logTopologyWarnings&&this.edgeFaces[d]!=-1&&console.warn("Edge poly 1 already set. Mesh is non-manifold."),this.edgeFaces[d]=F}F in this.faceEdges||(this.faceEdges[F]=[]),this.faceEdges[F].push(U),this.vertexEdges[C]==null&&(this.vertexEdges[C]=new Set),this.vertexEdges[n]==null&&(this.vertexEdges[n]=new Set),this.vertexEdges[C].add(U),this.vertexEdges[n].add(U)},l=this.getNumFaces();for(let C=0;C<l;C++){const n=this.getFaceVertexIndices(C);for(let F=0;F<n.length;F++){const a=n[F],U=n[(F+1)%n.length];I(a,U,C)}}}computeFaceNormals(){const e=this.positions,g=new Qg;this.addFaceAttribute("normals",g);const t=this.getNumFaces();for(let I=0;I<t;I++){const l=this.getFaceVertexIndices(I),C=e.getValueRef(l[0]);let F=e.getValueRef(l[1]);const a=new b;for(let U=2;U<l.length;U++){const d=e.getValueRef(l[U]),s=F.subtract(C),o=d.subtract(C);a.addInPlace(s.cross(o).normalize()),F=d}a.lengthSquared()<Number.EPSILON||g.setValue(I,a.normalize())}}calculateEdgeAngles(){this.vertexEdges.length==0&&this.genTopologyInfo(),this.computeFaceNormals();const e=this.positions,g=this.getFaceAttribute("normals");this.edgeVecs=[],this.edgeAngles=new Float32Array(this.numEdges);for(let t=0;t<this.edgeFaces.length;t+=2){const I=this.edgeVerts[t],l=this.edgeVerts[t+1],C=e.getValueRef(l).subtract(e.getValueRef(I));C.normalizeInPlace(),this.edgeVecs.push(C);const n=this.edgeFaces[t],F=this.edgeFaces[t+1];if(n==-1||F==-1){this.edgeAngles[t/2]=Math.PI*2;continue}const a=g.getValueRef(n),U=g.getValueRef(F);this.edgeAngles[t/2]=a.angleTo(U)}}computeVertexNormals(e=1){this.calculateEdgeAngles();const g=this.getFaceAttribute("normals"),t=new Qg;this.addVertexAttribute("normals",t);const I=n=>g.getValueRef(n),l=(n,F)=>{t.setValue(n,F)},C=(n,F)=>{let a,U;const d=this.faceEdges[n];for(const s of d)this.edgeVerts[s*2]==F?a?U=this.edgeVecs[s]:a=this.edgeVecs[s]:this.edgeVerts[s*2+1]==F&&(a?U=this.edgeVecs[s]:a=this.edgeVecs[s]);return[a,U]};for(let n=0;n<this.vertexEdges.length;n++){if(this.vertexEdges[n]==null)continue;const F=this.vertexEdges[n],a=[],U=s=>{let o=!1;for(const A of a)if(o=A.includes(s),o)break;o||a.push([s])};for(const s of F){const o=this.edgeFaces[s*2],A=this.edgeFaces[s*2+1];if(o!=-1&&A!=-1&&this.edgeAngles[s]<e){let B=-1,Q=-1;for(let r=0;r<a.length;r++)B==-1&&a[r].includes(o)&&(B=r),Q==-1&&a[r].includes(A)&&(Q=r);B==-1&&Q==-1?a.push([o,A]):B!=-1&&Q!=-1?B!=Q&&(a[B]=a[B].concat(a[Q]),a.splice(Q,1)):(B==-1&&a[Q].push(o),Q==-1&&a[B].push(A));continue}o!=-1&&U(o),A!=-1&&U(A)}a.sort((s,o)=>s.length<o.length?1:s.length>o.length?-1:0);let d=!0;for(const s of a){const o=new b;for(const A of s){const B=C(A,n);let Q;B[0]&&B[1]?(Q=B[0].angleTo(B[1]),o.addInPlace(I(A).scale(Q))):console.warn("variable weight is undefined because faceEdges[0] or faceEdges[1] is undefined")}o.normalizeInPlace(),d?(l(n,o),d=!1):t.setSplitVertexValues(n,s,o.asArray())}}return t}computeHardEdgesIndices(e=1){this.edgeVerts.length==0&&this.calculateEdgeAngles();const g=[],t=I=>{g.push(this.edgeVerts[I]),g.push(this.edgeVerts[I+1])};for(let I=0;I<this.edgeAngles.length;I++)this.edgeAngles[I]>e&&t(I*2);return Uint32Array.from(g)}genBuffers(e){const g={};let t=0;for(const[,U]of this.__vertexAttributes){const d=U.getSplits();for(const s in d){s in g||(g[s]={});const o=d[s];for(const A in o){const B=parseInt(A);B in g[s]||(g[s][B]=t,t++)}}}const l=this.positions.getCount(),C=l+t;let n;(!e||e.includeIndices!=!1)&&(n=this.generateTriangulatedIndices(C,l,g));const F={};for(const[U,d]of this.__vertexAttributes){let s;t==0?s=d.asArray():s=d.generateSplitValues(g,t);const o=d.stride,A=s.length/o;F[U]={values:s,count:A,dimension:o,normalized:U=="normals",dataType:d.getDataTypeName()}}return{numVertices:this.numVertices(),numRenderVerts:C,indices:n,attrBuffers:F}}computeNumTriangles(){let e=3,g=0;for(const t of this.faceCounts)g+=t*(e-2),e++;return g}generateTriangulatedIndices(e,g,t){const I=this.computeNumTriangles();let l;e<Math.pow(2,8)?l=new Uint8Array(I*3):e<Math.pow(2,16)?l=new Uint16Array(I*3):l=new Uint32Array(I*3);let C=0;const n=function(a,U){a in t&&U in t[a]&&(a=g+t[a][U]),l[C]=a,C++},F=this.getNumFaces();for(let a=0;a<F;a++){const U=this.getFaceVertexIndices(a);for(let d=0;d<U.length;d++)d>=3&&(n(U[0],a),n(U[d-1],a)),n(U[d],a)}return l}readBinary(e,g){super.loadBaseGeomBinary(e,g),this.setFaceCounts(Array.from(e.loadUInt32Array()));const t=this.getNumFaces(),I=e.loadUInt8Array(t),l=e.loadSInt32Vec2(),C=e.loadUInt8();let n;if(C==1)n=e.loadUInt8Array();else if(C==2)n=e.loadUInt16Array();else if(C==4)n=e.loadUInt32Array();else throw Error("faceVertexIndexDeltas undefined");let F=3,a=0;const U=this.faceCounts.map((A,B)=>{const Q=a;return a+=A*F,F++,Q});let d=0,s=0;const o=[];for(let A=0;A<t;A++){const B=I[A],Q=U[B],r=B+3;o[A]=Q;for(let R=0;R<r;R++){const V=d+R,h=Q+R,m=n[V]+l.x;if(A==0)this.__faceVertexIndices[h]=m;else{let Z=o[A-1];Z+=R<s?R:s-1,this.__faceVertexIndices[h]=this.__faceVertexIndices[Z]+m}}d+=r,U[B]+=r,s=r}this.hasVertexAttribute("normals")||this.computeVertexNormals(),this.emit("geomDataChanged")}toJSON(e){const g=super.toJSON(e);return(!e||!e.skipTopology)&&(g.faceCounts=Array.from(this.faceCounts),g.faceVertexIndices=Array.from(this.__faceVertexIndices)),g}fromJSON(e,g){super.fromJSON(e,g),e.faceCounts&&(this.faceCounts=e.faceCounts),e.faceVertexIndices&&(this.__faceVertexIndices=Uint32Array.from(e.faceVertexIndices))}}S.register("Mesh",ht);class vI extends Xe{constructor(e){super();this.name=e.name,this.__buffers=e.geomBuffers,this.__buffers.attrBuffers,this.boundingBox=new gg,this.boundingBox.p0.__data=e.bbox.p0.__data,this.boundingBox.p1.__data=e.bbox.p1.__data,this.__metaData=new Map}getNumVertices(){return this.__buffers.numVertices}getBoundingBox(){return this.boundingBox}genBuffers(){return this.__buffers}}class ct extends vI{constructor(e){super(e)}}class Gg extends vI{constructor(e){super(e)}getNumLineSegments(){return this.__buffers.indices.length/2}}class Kg extends vI{constructor(e){super(e)}getNumTriangles(){return this.__buffers.indices.length/3}}class ma extends jg{}S.register("SubGeom",ma);class hI extends vI{constructor(e,g){super(e);this.materials=[],this.subGeomMaterialIndices=new Uint8Array(0),this.subGeoms=[],this.counts=e.geomBuffers.counts;const t=g.getMaterials();e.geomBuffers.materialLibraryIndices.forEach((I,l)=>{this.materials[l]=t[I]}),this.subGeomMaterialIndices=e.geomBuffers.subGeomMaterialIndices,this.__buffers.materials=this.materials}getNumTriangles(){return this.counts.TRIANGLES/3}getNumLineSegments(){return this.counts.LINES/2}getNumPoints(){return this.counts.POINTS}loadMetadata(e,g){e.loadUInt32Array().forEach((I,l)=>{const C=new ma;e.seek(I),C.readBinary(e,g),this.subGeoms[l]=C})}}class LU extends Rt{constructor(){super();this.dirtyTopology=!0,this.dirtyVertices=!0,this.topologyParams=[]}parameterValueChanged(e){this.setBoundingBoxDirty(),this.topologyParams.includes(e.param.getName())?(this.dirtyTopology=!0,this.emit("geomDataTopologyChanged")):(this.dirtyVertices=!0,this.setBoundingBoxDirty(),this.emit("geomDataChanged")),super.parameterValueChanged(e)}update(){this.dirtyTopology?(this.rebuild(),this.dirtyTopology=!1,this.dirtyVertices=!1,this.rebuild()):this.dirtyVertices&&(this.dirtyVertices=!1,this.resize(),this.dirtyVertices=!1)}getBoundingBox(){return this.update(),super.getBoundingBox()}getNumVertices(){return this.update(),super.getNumVertices()}genBuffers(e){return this.update(),super.genBuffers(e)}toJSON(e){e||(e={}),e.skipTopology=!0,e.skipAttributes=["positions","normals","texCoords"];const g=super.toJSON(e);return e.skipTopology=!1,e.skipAttributes=[],g}}class MI extends sg{constructor(){super();this.dirtyTopology=!0,this.dirtyVertices=!0,this.topologyParams=[]}parameterValueChanged(e){this.setBoundingBoxDirty(),this.topologyParams.includes(e.param.getName())?(this.dirtyTopology=!0,this.emit("geomDataTopologyChanged")):(this.dirtyVertices=!0,this.setBoundingBoxDirty(),this.emit("geomDataChanged")),super.parameterValueChanged(e)}update(){this.dirtyTopology?(this.rebuild(),this.dirtyTopology=!1,this.dirtyVertices=!1,this.rebuild()):this.dirtyVertices&&(this.resize(),this.dirtyVertices=!1,this.resize())}getBoundingBox(){return this.update(),super.getBoundingBox()}getNumVertices(){return this.update(),super.getNumVertices()}genBuffers(e){return this.update(),super.genBuffers()}toJSON(e){e||(e={}),e.skipTopology=!0,e.skipAttributes=["positions","normals","texCoords"];const g=super.toJSON(e);return e.skipTopology=!1,e.skipAttributes=[],g}}class Zt extends ht{constructor(){super();this.dirtyTopology=!0,this.dirtyVertices=!0,this.topologyParams=[]}parameterValueChanged(e){this.setBoundingBoxDirty(),this.topologyParams.includes(e.param.getName())?(this.dirtyTopology=!0,this.emit("geomDataTopologyChanged")):(this.dirtyVertices=!0,this.setBoundingBoxDirty(),this.emit("geomDataChanged")),super.parameterValueChanged(e)}update(){this.dirtyTopology?(this.vertexEdges=[],this.dirtyTopology=!1,this.dirtyVertices=!1,this.rebuild()):this.dirtyVertices&&(this.dirtyVertices=!1,this.resize())}getBoundingBox(){return this.update(),super.getBoundingBox()}getNumVertices(){return this.update(),super.getNumVertices()}computeVertexNormals(e=1){return this.update(),super.computeVertexNormals(e)}computeHardEdgesIndices(e=1){return this.update(),super.computeHardEdgesIndices(e)}genBuffers(e){return this.update(),super.genBuffers(e)}toJSON(e){e||(e={}),e.skipTopology=!0,e.skipAttributes=["positions","normals","texCoords"];const g=super.toJSON(e);return e.skipTopology=!1,e.skipAttributes=[],g}}class zU extends LU{constructor(e=1,g=1,t=1,I=1,l=!1){super();if(this.topologyParams=[],isNaN(e)||isNaN(g)||isNaN(t)||isNaN(I))throw new Error("Invalid geom args");this.sizeXParam=this.addParameter(new k("X",e)),this.sizeYParam=this.addParameter(new k("Y",g)),this.divisionsXParam=this.addParameter(new k("XDivisions",t)),this.divisionsYParam=this.addParameter(new k("YDivisions",I)),l&&this.addVertexAttribute("texCoords",new Sg),this.topologyParams.push("XDivisions"),this.topologyParams.push("YDivisions")}rebuild(){const e=this.divisionsXParam.value,g=this.divisionsYParam.value;this.setNumVertices(e*g);const t=this.getVertexAttribute("texCoords");if(t)for(let I=0;I<g;I++){const l=I/(g-1);for(let C=0;C<e;C++){const n=C/(e-1);t.getValueRef(I*e+C).set(n,l)}}this.resize()}resize(){const e=this.divisionsXParam.value,g=this.divisionsYParam.value,t=this.sizeXParam.value,I=this.sizeYParam.value,l=this.getVertexAttribute("positions");if(!!l)for(let C=0;C<g;C++){const n=(C/(g-1)-.5)*I;for(let F=0;F<e;F++){const a=(F/(e-1)-.5)*t;l.getValueRef(C*e+F).set(a,n,0)}}}}S.register("PointGrid",zU);class ti extends MI{constructor(e=1,g=1){super();if(isNaN(e)||isNaN(g))throw new Error("Invalid geom args");this.sizeXParam=this.addParameter(new k("X",e)),this.sizeXParam.on("valueChanged",this.resize.bind(this)),this.sizeYParam=this.addParameter(new k("Y",g)),this.sizeYParam.on("valueChanged",this.resize.bind(this)),this.rebuild()}rebuild(){this.setNumVertices(4),this.setNumSegments(4),this.setSegmentVertexIndices(0,0,1),this.setSegmentVertexIndices(1,1,2),this.setSegmentVertexIndices(2,2,3),this.setSegmentVertexIndices(3,3,0),this.resize(!1)}resize(){const e=this.sizeXParam.value,g=this.sizeYParam.value,t=this.getVertexAttribute("positions");!t||(t.getValueRef(0).set(-.5*e,-.5*g,0),t.getValueRef(1).set(.5*e,-.5*g,0),t.getValueRef(2).set(.5*e,.5*g,0),t.getValueRef(3).set(-.5*e,.5*g,0))}}S.register("Rect",ti);class Ii extends MI{constructor(e=1,g=32,t=Math.PI*2){super();if(this.topologyParams=[],isNaN(e)||isNaN(g))throw new Error("Invalid geom args");this.radiusParam=this.addParameter(new k("Radius",e)),this.angleParam=this.addParameter(new k("Angle",t)),this.sidesParam=this.addParameter(new k("Sides",g>=3?g:3,[3,200],1)),this.topologyParams.push("Sides")}rebuild(){const e=this.sidesParam.value;this.setNumVertices(e);const t=this.angleParam.value<Math.PI*2;t?this.setNumSegments(e-1):this.setNumSegments(e);for(let I=0;I<(t?e-1:e);I++)this.setSegmentVertexIndices(I,I,(I+1)%e);this.resize()}resize(){const e=this.radiusParam.value,g=this.sidesParam.value,I=this.angleParam.value/g,l=this.getVertexAttribute("positions");if(l)for(let C=0;C<g;C++)l.getValueRef(C).set(Math.cos(I*C)*e,Math.sin(I*C)*e,0)}}S.register("Circle",Ii);class _U extends MI{constructor(e=1){super();if(isNaN(e))throw new Error("Invalid geom args");this.sizeParam=this.addParameter(new k("Size",e))}rebuild(){this.setNumVertices(6),this.setNumSegments(3),this.setSegmentVertexIndices(0,0,1),this.setSegmentVertexIndices(1,2,3),this.setSegmentVertexIndices(2,4,5),this.resize()}resize(){const e=this.sizeParam.value,g=this.getVertexAttribute("positions");!g||(g.getValueRef(0).set(-.5*e,0,0),g.getValueRef(1).set(.5*e,0,0),g.getValueRef(2).set(0,.5*e,0),g.getValueRef(3).set(0,-.5*e,0),g.getValueRef(4).set(0,0,.5*e),g.getValueRef(5).set(0,0,-.5*e))}}S.register("Cross",_U);class OU extends MI{constructor(e=1,g=1,t=1,I=!1){super();this.sizeXParam=this.addParameter(new k("X",e)),this.sizeYParam=this.addParameter(new k("Y",g)),this.sizeZParam=this.addParameter(new k("Z",t)),this.baseZAtZeroParam=this.addParameter(new Je("BaseZAtZero",I))}rebuild(){this.setNumVertices(8),this.setNumSegments(12),this.setSegmentVertexIndices(0,0,1),this.setSegmentVertexIndices(1,1,2),this.setSegmentVertexIndices(2,2,3),this.setSegmentVertexIndices(3,3,0),this.setSegmentVertexIndices(4,4,5),this.setSegmentVertexIndices(5,5,6),this.setSegmentVertexIndices(6,6,7),this.setSegmentVertexIndices(7,7,4),this.setSegmentVertexIndices(8,0,4),this.setSegmentVertexIndices(9,1,5),this.setSegmentVertexIndices(10,2,6),this.setSegmentVertexIndices(11,3,7),this.resize()}resize(){const e=this.sizeXParam.value,g=this.sizeYParam.value,t=this.sizeZParam.value,I=this.baseZAtZeroParam.value,l=this.getVertexAttribute("positions");if(l){let C=.5;I&&(C=1),l.getValueRef(0).set(.5*e,-.5*g,C*t),l.getValueRef(1).set(.5*e,.5*g,C*t),l.getValueRef(2).set(-.5*e,.5*g,C*t),l.getValueRef(3).set(-.5*e,-.5*g,C*t),C=-.5,I&&(C=0),l.getValueRef(4).set(.5*e,-.5*g,C*t),l.getValueRef(5).set(.5*e,.5*g,C*t),l.getValueRef(6).set(-.5*e,.5*g,C*t),l.getValueRef(7).set(-.5*e,-.5*g,C*t)}}}S.register("LinesCuboid",OU);class Wa extends MI{constructor(e=1,g=1,t=10,I=10,l=!1){super();if(this.topologyParams=[],isNaN(e)||isNaN(g)||isNaN(t)||isNaN(I))throw new Error("Invalid geom args");this.xParam=this.addParameter(new k("X",e)),this.yParam=this.addParameter(new k("Y",g)),this.xDivisionsParam=this.addParameter(new k("XDivisions",t)),this.yDivisionsParam=this.addParameter(new k("YDivisions",I)),this.skipCenterLinesParam=this.addParameter(new Je("SkipCenterLines",l)),this.topologyParams.push("XDivisions"),this.topologyParams.push("YDivisions"),this.topologyParams.push("SkipCenterLines")}rebuild(){const e=this.xDivisionsParam.value,g=this.yDivisionsParam.value,t=this.skipCenterLinesParam.value&&e%2==0&&g%2==0;this.setNumVertices((e+g+2-(t?1:0))*2),this.setNumSegments(e+g+2-(t?1:0));let I=0;for(let l=0;l<=e;l++){if(t&&l==e/2)continue;const C=I*2,n=I*2+1;this.setSegmentVertexIndices(I,C,n),I++}for(let l=0;l<=g;l++){if(t&&l==e/2)continue;const C=I*2,n=I*2+1;this.setSegmentVertexIndices(I,C,n),I++}this.resize()}resize(){const e=this.getVertexAttribute("positions"),g=this.xDivisionsParam.value,t=this.yDivisionsParam.value,I=this.xParam.value,l=this.yParam.value,C=this.skipCenterLinesParam.value&&g%2==0&&t%2==0;let n=0;for(let F=0;F<=g;F++){if(C&&F==g/2)continue;const a=n*2,U=n*2+1,d=(F/g-.5)*I;e&&(e.getValueRef(a).set(d,-.5*l,0),e.getValueRef(U).set(d,.5*l,0)),n++}for(let F=0;F<=t;F++){if(C&&F==g/2)continue;const a=n*2,U=n*2+1,d=(F/t-.5)*l;e&&(e.getValueRef(a).set(-.5*I,d,0),e.getValueRef(U).set(.5*I,d,0)),n++}}}S.register("Grid",Wa);class li extends Zt{constructor(e=.5,g=1,t=32,I=!0,l=!0,C=!0){super();if(this.topologyParams=[],isNaN(e)||isNaN(g)||isNaN(t))throw new Error("Invalid geom args");this.radiusParam=this.addParameter(new k("Radius",e)),this.heightParam=this.addParameter(new k("Height",g)),this.detailParam=this.addParameter(new k("Detail",t>=3?t:3,[3,200],1)),this.capParam=this.addParameter(new Je("Cap",I)),l&&this.addVertexAttribute("normals",new Qg),C&&this.addVertexAttribute("texCoords",new Sg),this.topologyParams.push("Detail"),this.topologyParams.push("Cap")}rebuild(){const e=this.detailParam.value,g=this.radiusParam.value,t=this.heightParam.value,I=this.capParam.value;let l=e+1;I&&(l+=1),this.setNumVertices(l);const C=e,n=e+1,F=this.getVertexAttribute("positions");if(F){F.getValueRef(C).set(0,0,t);for(let U=0;U<e;U++){const d=-(U/e*2*Math.PI);F.getValueRef(U).set(g*Math.cos(d),g*Math.sin(d),0)}I&&F.getValueRef(n).set(0,0,0)}this.setFaceCounts([e+(I?e:0)]);for(let U=0;U<e;U++){const d=(U+1)%e;this.setFaceVertexIndices(U,[d,U,C])}if(I)for(let U=0;U<e;U++){const d=(U+1)%e;this.setFaceVertexIndices(e+U,[U,d,n])}const a=this.getVertexAttribute("texCoords");if(a){let U=0;for(let d=0;d<e;d++)"setFaceVertexValue"in a&&(a.setFaceVertexValue(U,0,new f((d+1)/e,0)),a.setFaceVertexValue(U,1,new f(d/e,0)),a.setFaceVertexValue(U,2,new f((d+.5)/e,1)));if(I)for(let d=0;d<e;d++)a.setFaceVertexValue(U,0,new f(d/e,0)),a.setFaceVertexValue(U,1,new f((d+1)/e,0)),a.setFaceVertexValue(U,2,new f((d+.5)/e,1)),U++}this.resize()}resize(){const e=this.detailParam.value,g=this.radiusParam.value,t=this.heightParam.value,I=e,l=e+1,C=this.getVertexAttribute("positions");if(C){C.getValueRef(I).set(0,0,t);for(let F=0;F<e;F++){const a=-(F/e*2*Math.PI);C.getValueRef(F).set(g*Math.cos(a),g*Math.sin(a),0)}this.capParam.value&&C.getValueRef(l).set(0,0,0)}this.dirtyTopology=!1,this.dirtyVertices=!1,this.getVertexAttribute("normals")&&this.computeVertexNormals()}}S.register("Cone",li);class Hl extends Zt{constructor(e=1,g=1,t=1,I=!1){super();if(isNaN(e)||isNaN(g)||isNaN(t))throw new Error("Invalid geom args");this.sizeXParam=this.addParameter(new k("X",e)),this.sizeYParam=this.addParameter(new k("Y",g)),this.sizeZParam=this.addParameter(new k("Z",t)),this.baseZAtZeroParam=this.addParameter(new Je("BaseZAtZero",I)),this.setFaceCounts([0,6]),this.setFaceVertexIndices(0,[0,1,2,3]),this.setFaceVertexIndices(1,[7,6,5,4]),this.setFaceVertexIndices(2,[1,0,4,5]),this.setFaceVertexIndices(3,[3,2,6,7]),this.setFaceVertexIndices(4,[0,3,7,4]),this.setFaceVertexIndices(5,[2,1,5,6]),this.setNumVertices(8),this.addVertexAttribute("normals",new Qg)}rebuild(){const e=this.getVertexAttribute("normals");if(e)for(let g=0;g<6;g++){let t;switch(g){case 0:t=new b(0,0,1);break;case 1:t=new b(0,0,-1);break;case 2:t=new b(1,0,0);break;case 3:t=new b(-1,0,0);break;case 4:t=new b(0,-1,0);break;default:t=new b(0,1,0);break}e.setFaceVertexValue(g,0,t),e.setFaceVertexValue(g,1,t),e.setFaceVertexValue(g,2,t),e.setFaceVertexValue(g,3,t)}this.resize()}resize(){const e=this.sizeXParam.value,g=this.sizeYParam.value,t=this.sizeZParam.value,I=this.baseZAtZeroParam.value;let l=.5;const C=this.getVertexAttribute("positions");I&&(l=1),C&&(C.getValueRef(0).set(.5*e,-.5*g,l*t),C.getValueRef(1).set(.5*e,.5*g,l*t),C.getValueRef(2).set(-.5*e,.5*g,l*t),C.getValueRef(3).set(-.5*e,-.5*g,l*t),l=-.5,I&&(l=0),C.getValueRef(4).set(.5*e,-.5*g,l*t),C.getValueRef(5).set(.5*e,.5*g,l*t),C.getValueRef(6).set(-.5*e,.5*g,l*t),C.getValueRef(7).set(-.5*e,-.5*g,l*t))}}S.register("Cuboid",Hl);class Ci extends Zt{constructor(e=.5,g=1,t=32,I=2,l=!0,C=!1){super();if(this.topologyParams=[],isNaN(e)||isNaN(g)||isNaN(t)||isNaN(I))throw new Error("Invalid geom args");this.radiusParam=this.addParameter(new k("Radius",e)),this.heightParam=this.addParameter(new k("Height",g)),this.sidesParam=this.addParameter(new k("Sides",t>=3?t:3,[3,200],1)),this.loopsParam=this.addParameter(new k("Loops",I>=2?I:2,[1,200],1)),this.capsParam=this.addParameter(new Je("Caps",l)),this.baseZAtZeroParam=this.addParameter(new Je("BaseZAtZero",C)),this.addVertexAttribute("texCoords",new Sg),this.addVertexAttribute("normals",new Qg),this.topologyParams.push("Sides"),this.topologyParams.push("Loops"),this.topologyParams.push("Caps")}rebuild(){const e=this.sidesParam.value,g=this.loopsParam.value,t=this.capsParam.value;let I=e*g;t&&(I+=2),this.setNumVertices(I),t?this.setFaceCounts([e*2,e]):this.setFaceCounts([0,e]);let l=0;if(t){for(let F=0;F<e;F++){const a=I-1,U=F,d=(F+1)%e;this.setFaceVertexIndices(l++,[a,U,d])}for(let F=0;F<e;F++){const a=e*(g-1)+F,U=I-2,d=e*(g-1)+(F+1)%e;this.setFaceVertexIndices(l++,[a,U,d])}}for(let F=0;F<g-1;F++)for(let a=0;a<e;a++){const U=e*F+(a+1)%e,d=e*F+a,s=e*(F+1)+a,o=e*(F+1)+(a+1)%e;this.setFaceVertexIndices(l++,[U,d,s,o])}const C=this.getVertexAttribute("normals");if(C){if(l=0,t){const F=new b(0,0,-1);for(let a=0;a<e;a++)C.setFaceVertexValue(l,0,F),C.setFaceVertexValue(l,1,F),C.setFaceVertexValue(l,2,F),l++;F.set(0,0,1);for(let a=0;a<e;a++)C.setFaceVertexValue(l,0,F),C.setFaceVertexValue(l,1,F),C.setFaceVertexValue(l,2,F),l++}for(let F=0;F<g-1;F++)for(let a=0;a<e;a++){let U=a/e*2*Math.PI;const d=new b(Math.sin(U),Math.cos(U),0);C.setFaceVertexValue(l,0,d),C.setFaceVertexValue(l,1,d),U=(a+1)/e*2*Math.PI;const s=new b(Math.sin(U),Math.cos(U),0);C.setFaceVertexValue(l,2,s),C.setFaceVertexValue(l,3,s),l++}}const n=this.getVertexAttribute("texCoords");if(n){if(l=0,t){for(let F=0;F<e;F++)n.setFaceVertexValue(l,0,new f(F/e,0)),n.setFaceVertexValue(l,1,new f((F+1)/e,0)),n.setFaceVertexValue(l,2,new f((F+.5)/e,1)),l++;for(let F=0;F<e;F++)n.setFaceVertexValue(l,0,new f(F/e,0)),n.setFaceVertexValue(l,1,new f((F+1)/e,0)),n.setFaceVertexValue(l,2,new f((F+.5)/e,1)),l++}for(let F=0;F<e;F++)n.setFaceVertexValue(l,0,new f((F+1)/e,0)),n.setFaceVertexValue(l,2,new f((F+1)/e,1)),n.setFaceVertexValue(l,1,new f(F/e,0)),n.setFaceVertexValue(l,3,new f(F/e,1)),l++}this.resize()}resize(){const e=this.sidesParam.value,g=this.loopsParam.value,t=this.radiusParam.value,I=this.heightParam.value,l=this.capsParam.value,C=this.baseZAtZeroParam.value;let n=e*g;l&&(n+=2);let F=0,a=.5;C&&(a=0);const U=this.getVertexAttribute("positions");if(U){for(let d=0;d<g;d++){const s=d/(g-1)*I-I*a;for(let o=0;o<e;o++){const A=o/e*2*Math.PI;U.getValueRef(F).set(Math.sin(A)*t,Math.cos(A)*t,s),F++}}l&&(U.getValueRef(n-1).set(0,0,I*(C?0:-.5)),U.getValueRef(n-2).set(0,0,I*(C?1:.5)))}this.dirtyTopology=!1,this.dirtyVertices=!1,this.computeVertexNormals()}}S.register("Cylinder",Ci);class PU extends Zt{constructor(e=.5,g=32){super();if(this.topologyParams=[],isNaN(e)||isNaN(g))throw new Error("Invalid geom args");this.radiusParam=this.addParameter(new k("Radius",e)),this.sidesParam=this.addParameter(new k("Sides",g>=3?g:3,[3,200],1)),this.addVertexAttribute("texCoords",new Sg),this.addVertexAttribute("normals",new Qg),this.topologyParams.push("Sides")}rebuild(){const e=this.sidesParam.value;this.setNumVertices(e+1),this.setFaceCounts([e]);const g=this.getVertexAttribute("positions");g&&g.getValueRef(0).set(0,0,0);for(let l=0;l<e;l++){const C=l%e+1,n=(l+1)%e+1;this.setFaceVertexIndices(l,[0,C,n])}const t=this.getVertexAttribute("normals");if(t){const l=new b(0,0,1);t.setValue(0,l);for(let C=0;C<e;C++)t.setValue(C+1,l)}const I=this.getVertexAttribute("texCoords");if(I){I.getValueRef(0).set(.5,.5);for(let l=0;l<e;l++){const C=l/e*2*Math.PI;I.getValueRef(l+1).set(Math.sin(C)*.5+.5,Math.cos(C)*.5+.5)}}this.resize()}resize(){const e=this.sidesParam.value,g=this.radiusParam.value,t=this.getVertexAttribute("positions");if(t)for(let I=0;I<e;I++){const l=I/e*2*Math.PI;t.getValueRef(I+1).set(Math.sin(l)*g,Math.cos(l)*g,0)}}}S.register("Disc",PU);class Dt extends Zt{constructor(e=1,g=1,t=1,I=1,l=!0,C=!0){super();if(this.topologyParams=[],isNaN(e)||isNaN(g)||isNaN(t)||isNaN(I))throw new Error("Invalid geom args");this.sizeXParam=this.addParameter(new k("SizeX",e)),this.sizeYParam=this.addParameter(new k("SizeY",g)),this.detailXParam=this.addParameter(new k("DetailX",t)),this.detailYParam=this.addParameter(new k("DetailY",I)),l&&this.addVertexAttribute("normals",new Qg),C&&this.addVertexAttribute("texCoords",new Sg),this.topologyParams.push("DetailX"),this.topologyParams.push("DetailY")}rebuild(){const e=this.detailXParam.value,g=this.detailYParam.value;this.setNumVertices((e+1)*(g+1)),this.setFaceCounts([0,e*g]);let t=0;for(let n=0;n<g;n++)for(let F=0;F<e;F++){const a=(e+1)*(n+1)+F,U=(e+1)*n+F,d=(e+1)*n+(F+1),s=(e+1)*(n+1)+(F+1);this.setFaceVertexIndices(t,[a,U,d,s]),t=t+1}let I=0;const l=this.getVertexAttribute("normals");if(l)for(let n=0;n<=g;n++)for(let F=0;F<=e;F++)l.getValueRef(I).set(0,0,1),I++;I=0;const C=this.getVertexAttribute("texCoords");if(C)for(let n=0;n<=g;n++){const F=n/g;for(let a=0;a<=e;a++){const U=a/e;C.getValueRef(I).set(U,F),I++}}this.resize()}resize(){const e=this.sizeXParam.value,g=this.sizeYParam.value,t=this.detailXParam.value,I=this.detailYParam.value,l=this.getVertexAttribute("positions");if(!l)return;let C=0;for(let n=0;n<=I;n++){const F=(n/I-.5)*g;for(let a=0;a<=t;a++){const U=(a/t-.5)*e;l.getValueRef(C).set(U,F,0),C++}}}}S.register("Plane",Dt);class Kt extends Zt{constructor(e=1,g=12,t=12,I=!0,l=!0){super();if(this.radiusParam=new k("Radius",1),this.sidesParam=new k("Sides",12,[3,200],1),this.loopsParam=new k("Loops",6,[3,200],1),isNaN(e)||isNaN(g)||isNaN(t))throw new Error("Invalid geom args");this.addParameter(this.radiusParam),this.addParameter(this.sidesParam),this.addParameter(this.loopsParam),this.radiusParam.value=e,this.sidesParam.value=g,this.loopsParam.value=t,I&&this.addVertexAttribute("normals",new Qg),l&&this.addVertexAttribute("texCoords",new Sg),this.topologyParams.push("Sides"),this.topologyParams.push("Loops")}rebuild(){const e=this.radiusParam.value,g=this.sidesParam.value,t=this.loopsParam.value,I=2+g*t,l=g*2,C=g*t;this.setNumVertices(I),this.setFaceCounts([l,C]);const n=this.getVertexAttribute("positions"),F=this.getVertexAttribute("normals"),a=new b(0,0,1);let U=0;if(!n)return;n.getValueRef(U).set(0,0,e),F&&F.getValueRef(U).set(0,0,1),U++;for(let o=0;o<t;o++){const A=(o+1)/(t+1)*Math.PI;for(let B=0;B<g;B++){const Q=-(B/g*2*Math.PI);a.set(Math.sin(A)*Math.cos(Q),Math.sin(A)*Math.sin(Q),Math.cos(A)),n.getValueRef(U).setFromOther(a.scale(e)),F&&F.getValueRef(U).setFromOther(a),U++}}n.getValueRef(U).set(0,0,-e),F&&F.getValueRef(U).set(0,0,-1),U++;const d=this.getVertexAttribute("texCoords");let s=0;for(let o=0;o<g;o++){const B=(o+1)%g+1,Q=o+1;if(this.setFaceVertexIndices(s,[0,B,Q]),d){const r=new f(.5,0),R=new f((o+1)/(g-1),1/(t+1)),V=new f(o/(g-1),1/(t+1));d.setFaceVertexValue(s,0,r),d.setFaceVertexValue(s,1,R),d.setFaceVertexValue(s,2,V)}s++}for(let o=0;o<g;o++){const A=I-1,B=g*(t-1)+(o+1)%g+1,Q=g*(t-1)+o+1;if(this.setFaceVertexIndices(s,[A,Q,B]),d){const r=new f(.5,1),R=new f((o+1)/(g-1),1-1/(t+1)),V=new f(o/(g-1),1-1/(t+1));d.setFaceVertexValue(s,0,r),d.setFaceVertexValue(s,1,R),d.setFaceVertexValue(s,2,V)}s++}for(let o=0;o<t-1;o++)for(let A=0;A<g;A++){const B=g*o+A+1,Q=g*o+(A+1)%g+1,r=g*(o+1)+(A+1)%g+1,R=g*(o+1)+A+1;this.setFaceVertexIndices(s,[B,Q,r,R]),d&&(d.setFaceVertexValue(s,0,new f(A/g,(o+1)/t)),d.setFaceVertexValue(s,1,new f((A+1)/g,(o+1)/t)),d.setFaceVertexValue(s,2,new f((A+1)/g,(o+2)/t)),d.setFaceVertexValue(s,3,new f(A/g,(o+2)/t))),s++}}resize(){const e=this.radiusParam.value,g=this.sidesParam.value,t=this.loopsParam.value;if(!g||!t){console.warn("resize() failed");return}const I=this.getVertexAttribute("positions"),l=this.getVertexAttribute("normals");let C=0;const n=new b(0,0,1);I.getValueRef(C).set(0,0,e),l&&l.getValueRef(C).set(0,0,1),C++;for(let F=0;F<t;F++){const a=(F+1)/(t+1)*Math.PI;for(let U=0;U<g;U++){const d=-(U/g*2*Math.PI);n.set(Math.sin(a)*Math.cos(d),Math.sin(a)*Math.sin(d),Math.cos(a)),I.getValueRef(C).setFromOther(n.scale(e)),l&&l.getValueRef(C).setFromOther(n),C++}}I.getValueRef(C).set(0,0,-e),l&&l.getValueRef(C).set(0,0,-1),C++}}S.register("Sphere",Kt);class ba extends Zt{constructor(e=.5,g=3,t=32,I=Math.PI*2){super();if(isNaN(e)||isNaN(g)||isNaN(t))throw new Error("Invalid geom args");this.innerRadiusParam=this.addParameter(new k("InnerRadius",e)),this.outerRadiusParam=this.addParameter(new k("OuterRadius",g)),this.detailParam=this.addParameter(new k("Detail",t>=3?t:3,[3,200],1)),this.arcAngleParam=this.addParameter(new k("ArcAngle",I)),this.addVertexAttribute("texCoords",new Sg),this.addVertexAttribute("normals",new Qg),this.topologyParams.push("Detail"),this.topologyParams.push("ArcAngle")}rebuild(){const g=this.arcAngleParam.value<2*Math.PI,t=this.detailParam.value,I=t,l=t*2+(g?1:0),C=I*l;this.setNumVertices(C),this.setFaceCounts([0,I*l]);const n=this.getVertexAttribute("texCoords");if(n){let F=0;for(let a=0;a<(g?l-1:l);a++)for(let U=0;U<I;U++){const d=(a+1)%l,s=(U+1)%I,o=I*a+U,A=I*a+s,B=I*d+s,Q=I*d+U;this.setFaceVertexIndices(F,[o,A,B,Q]),n.setFaceVertexValue(F,0,new f(a/l,U/l)),n.setFaceVertexValue(F,1,new f(a/l,(U+1)/l)),n.setFaceVertexValue(F,2,new f((a+1)/l,(U+1)/l)),n.setFaceVertexValue(F,3,new f((a+1)/l,U/l)),F++}}this.resize()}resize(){const e=this.innerRadiusParam.value,g=this.outerRadiusParam.value,t=this.arcAngleParam.value,I=this.detailParam.value,l=t<2*Math.PI,C=I,n=I*2+(l?1:0),F=this.getVertexAttribute("positions"),a=this.getVertexAttribute("normals");if(!F||!a)return;let U=0;for(let d=0;d<n;d++){const s=-(d/(l?n-1:n)*t),o=Math.cos(s),A=Math.sin(s);for(let B=0;B<C;B++){const Q=B/C*2*Math.PI,r=Math.sin(Q),R=Math.cos(Q),V=g+R*e;F.getValueRef(U).set(o*V,A*V,e*r),a.getValueRef(U).set(o*R,A*R,r),U++}}}}S.register("Torus",ba);class ii extends ug{constructor(e){super(e);this.__data=new Uint8Array(4),this.format="RGBA",this.type="UNSIGNED_BYTE",this.width=1,this.height=1}isLoaded(){return this.loaded}isStream(){return!1}setData(e,g,t){this.__data!=t&&(this.width=e,this.height=g,this.__data=t,this.loaded?this.emit("updated"):(this.loaded=!0,this.emit("loaded")))}getParams(){const e=super.getParams();return e.data=this.__data,e}}S.register("DataImage2D",ii);S.register("DataImage",ii);const BC={};class qg extends ug{constructor(e,g="",t={}){super(e);this.__data=null,this.type="UNSIGNED_BYTE",this.crossOrigin="anonymous",g&&g!=""&&this.load(g)}setCrossOrigin(e){this.crossOrigin=e}getDOMElement(){return this.__data}load(e,g="RGB"){return new Promise((t,I)=>{if(!g){const C=e.lastIndexOf(".");C!=-1&&e.substring(C).toLowerCase()==".png"&&(g="RGBA")}this.format=g,this.loaded=!1;const l=()=>{this.url=e,this.width=this.__data.width,this.height=this.__data.height,this.loaded=!0,this.emit("loaded"),t()};e in BC?(this.__data=BC[e],this.__data.complete?l():(this.__data.addEventListener("load",l),this.__data.addEventListener("error",I))):(this.__data=new Image,this.__data.crossOrigin=this.crossOrigin,this.__data.src=e,this.__data.addEventListener("load",l),this.__data.addEventListener("error",I),BC[e]=this.__data)})}setImageURL(e,g="RGB"){this.load(e,g)}getParams(){const e=super.getParams();return this.loaded&&(e.data=this.__data),e}readBinary(e,g){this.setName(e.loadStr());const t=e.loadStr();if(typeof t=="string"&&t!=""){const I=g.url.substring(0,g.url.lastIndexOf("/"));this.load(I+"/"+t)}}}S.register("FileImage2D",qg);S.register("FileImage",qg);class jU extends qg{constructor(e,g,t){super(e,g,t)}}S.register("LDRImage",jU);class ni extends ug{constructor(e,g={}){super(e);this.exposure=1,this.hdrTint=new E(1,1,1,1);let t;e!=null&&e.includes(".")&&(t=e,this.setName(e.substring(e.lastIndexOf("/")+1,e.lastIndexOf(".")))),this.type="FLOAT",t&&this.load(t)}__decodeData(e){return new Promise((g,t)=>{const I=e.ldr,l=e.cdm,C=new Blob([I.buffer]),n=new Image;n.onload=()=>{this.width=n.width,this.height=n.height,this.__data={ldr:n,cdm:l},this.loaded?this.emit("updated"):(this.loaded=!0,this.emit("loaded")),g()},n.src=URL.createObjectURL(C)})}load(e){return this.loaded=!1,new Promise((g,t)=>{const I=e.lastIndexOf("/")>-1?e.substring(e.lastIndexOf("/")+1):"",l=I.substring(0,I.lastIndexOf("."));this.getName()==""&&this.setName(l),this.type="FLOAT",ee.loadFile("archive",e).then(C=>{if(!C.ldr||!C.cdm)for(const n in C)n.endsWith(".jpg")?(C.ldr=C[n],delete C[n]):n.endsWith(".bin")&&(C.cdm=C[n],delete C[n]);this.__decodeData(C).then(()=>{g()})},C=>{this.emit("error",C),t(C)})})}isStream(){return!1}getParams(){const e=super.getParams();return this.loaded&&(e.data=this.__data,e.exposure=this.exposure),e}setHDRTint(e){this.hdrTint=e}getHDRTint(){return this.hdrTint}readBinary(e,g){this.setName(e.loadStr());let t=e.loadStr();typeof t=="string"&&t!=""&&this.load(t)}}S.register("HDRImage",ni);class qU extends qg{constructor(e,g,t){super(e,g,t);this.videoElem=new HTMLVideoElement,this.muteParam=new Je("Mute",!1),this.loopParam=new Je("Loop",!0),this.spatializeAudioParam=new Je("SpatializeAudio",!0),this.refDistanceParam=new k("refDistance",2),this.maxDistanceParam=new k("maxDistance",1e4),this.rolloffFactorParam=new k("rolloffFactor",1),this.coneInnerAngleParam=new k("coneInnerAngle",360),this.coneOuterAngleParam=new k("coneOuterAngle",0),this.coneOuterGainParam=new k("coneOuterGain",1),this.gainParam=new k("Gain",2),this.format="RGB",this.type="UNSIGNED_BYTE",this.addParameter(this.muteParam),this.addParameter(this.loopParam),this.addParameter(this.spatializeAudioParam),this.addParameter(this.refDistanceParam),this.addParameter(this.maxDistanceParam),this.addParameter(this.rolloffFactorParam),this.addParameter(this.coneInnerAngleParam),this.addParameter(this.coneOuterAngleParam),this.addParameter(this.coneOuterGainParam),this.addParameter(this.gainParam).setRange([0,5])}getAudioSource(){return this.videoElem}load(e,g="RGB"){return new Promise((t,I)=>{ee.incrementWorkload(1),this.videoElem.style.display="none",this.videoElem.preload="auto",this.videoElem.crossOrigin="anonymous",document.body.appendChild(this.videoElem),this.videoElem.addEventListener("loadedmetadata",()=>{this.videoElem.muted=this.muteParam.value,this.muteParam.on("valueChanged",()=>{this.videoElem.muted=this.muteParam.value}),this.videoElem.loop=this.loopParam.value,this.loopParam.on("valueChanged",()=>{this.videoElem.loop=this.loopParam.value}),this.width=this.videoElem.videoHeight,this.height=this.videoElem.videoWidth,this.loaded=!0,ee.incrementWorkDone(1),this.emit("loaded"),t(l);let C=0;const n=29.97,F=()=>{if(this.videoElem.paused||this.videoElem.ended)return;const a=Math.floor(this.videoElem.currentTime*n);C!=a&&(this.emit("updated"),C=a),setTimeout(F,20)};F()},!1),this.videoElem.src=e;const l=this.videoElem.play();l!==void 0&&l.then(C=>{console.log("Autoplay started!")}).catch(()=>{console.log("Autoplay was prevented.")})})}getParams(){const e=super.getParams();return this.loaded&&(e.data=this.videoElem),e}}S.register("LDRVideo",qU);function $g(i){this.data=i,this.pos=0}$g.prototype.readByte=function(){return this.data[this.pos++]};$g.prototype.peekByte=function(){return this.data[this.pos]};$g.prototype.readBytes=function(i){for(var e=new Array(i),g=0;g<i;g++)e[g]=this.readByte();return e};$g.prototype.peekBytes=function(i){for(var e=new Array(i),g=0;g<i;g++)e[g]=this.data[this.pos+g];return e};$g.prototype.readString=function(i){for(var e="",g=0;g<i;g++)e+=String.fromCharCode(this.readByte());return e};$g.prototype.readBitArray=function(){for(var i=[],e=this.readByte(),g=7;g>=0;g--)i.push(!!(e&1<<g));return i};$g.prototype.readUnsigned=function(i){var e=this.readBytes(2);return i?(e[1]<<8)+e[0]:(e[0]<<8)+e[1]};function HI(i){this.stream=new $g(i),this.output={}}HI.prototype.parse=function(i){return this.parseParts(this.output,i),this.output};HI.prototype.parseParts=function(i,e){for(var g=0;g<e.length;g++){var t=e[g];this.parsePart(i,t)}};HI.prototype.parsePart=function(i,e){var g=e.label,t;if(!(e.requires&&!e.requires(this.stream,this.output,i)))if(e.loop){for(var I=[];e.loop(this.stream);){var l={};this.parseParts(l,e.parts),I.push(l)}i[g]=I}else e.parts?(t={},this.parseParts(t,e.parts),i[g]=t):e.parser?(t=e.parser(this.stream,this.output,i),e.skip||(i[g]=t)):e.bits&&(i[g]=this.parseBits(e.bits))};function $U(i){return i.reduce(function(e,g){return e*2+g},0)}HI.prototype.parseBits=function(i){var e={},g=this.stream.readBitArray();for(var t in i){var I=i[t];I.length?e[t]=$U(g.slice(I.index,I.index+I.length)):e[t]=g[I.index]}return e};var De={readByte:function(){return function(i){return i.readByte()}},readBytes:function(i){return function(e){return e.readBytes(i)}},readString:function(i){return function(e){return e.readString(i)}},readUnsigned:function(i){return function(e){return e.readUnsigned(i)}},readArray:function(i,e){return function(g,t,I){for(var l=e(g,t,I),C=new Array(l),n=0;n<l;n++)C[n]=g.readBytes(i);return C}}},xl={label:"blocks",parser:function(i){for(var e=[],g=0,t=i.readByte();t!==g;t=i.readByte())e=e.concat(i.readBytes(t));return e}},ed={label:"gce",requires:function(i){var e=i.peekBytes(2);return e[0]===33&&e[1]===249},parts:[{label:"codes",parser:De.readBytes(2),skip:!0},{label:"byteSize",parser:De.readByte()},{label:"extras",bits:{future:{index:0,length:3},disposal:{index:3,length:3},userInput:{index:6},transparentColorGiven:{index:7}}},{label:"delay",parser:De.readUnsigned(!0)},{label:"transparentColorIndex",parser:De.readByte()},{label:"terminator",parser:De.readByte(),skip:!0}]},gd={label:"image",requires:function(i){var e=i.peekByte();return e===44},parts:[{label:"code",parser:De.readByte(),skip:!0},{label:"descriptor",parts:[{label:"left",parser:De.readUnsigned(!0)},{label:"top",parser:De.readUnsigned(!0)},{label:"width",parser:De.readUnsigned(!0)},{label:"height",parser:De.readUnsigned(!0)},{label:"lct",bits:{exists:{index:0},interlaced:{index:1},sort:{index:2},future:{index:3,length:2},size:{index:5,length:3}}}]},{label:"lct",requires:function(i,e,g){return g.descriptor.lct.exists},parser:De.readArray(3,function(i,e,g){return Math.pow(2,g.descriptor.lct.size+1)})},{label:"data",parts:[{label:"minCodeSize",parser:De.readByte()},xl]}]},td={label:"text",requires:function(i){var e=i.peekBytes(2);return e[0]===33&&e[1]===1},parts:[{label:"codes",parser:De.readBytes(2),skip:!0},{label:"blockSize",parser:De.readByte()},{label:"preData",parser:function(i,e,g){return i.readBytes(g.text.blockSize)}},xl]},Id={label:"application",requires:function(i,e,g){var t=i.peekBytes(2);return t[0]===33&&t[1]===255},parts:[{label:"codes",parser:De.readBytes(2),skip:!0},{label:"blockSize",parser:De.readByte()},{label:"id",parser:function(i,e,g){return i.readString(g.blockSize)}},xl]},ld={label:"comment",requires:function(i,e,g){var t=i.peekBytes(2);return t[0]===33&&t[1]===254},parts:[{label:"codes",parser:De.readBytes(2),skip:!0},xl]},Cd={label:"frames",parts:[ed,Id,ld,gd,td],loop:function(i){var e=i.peekByte();return e===33||e===44}},id=[{label:"header",parts:[{label:"signature",parser:De.readString(3)},{label:"version",parser:De.readString(3)}]},{label:"lsd",parts:[{label:"width",parser:De.readUnsigned(!0)},{label:"height",parser:De.readUnsigned(!0)},{label:"gct",bits:{exists:{index:0},resolution:{index:1,length:3},sort:{index:4},size:{index:5,length:3}}},{label:"backgroundColorIndex",parser:De.readByte()},{label:"pixelAspectRatio",parser:De.readByte()}]},{label:"gct",requires:function(i,e){return e.lsd.gct.exists},parser:De.readArray(3,function(i,e){return Math.pow(2,e.lsd.gct.size+1)})},Cd],nd=id;function ai(i){var e=new Uint8Array(i),g=new HI(e);this.raw=g.parse(nd),this.raw.hasImages=!1;for(var t=0;t<this.raw.frames.length;t++)if(this.raw.frames[t].image){this.raw.hasImages=!0;break}}ai.prototype.decompressFrame=function(i,e){if(i>=this.raw.frames.length)return null;var g=this.raw.frames[i];if(g.image){var t=g.image.descriptor.width*g.image.descriptor.height,I=C(g.image.data.minCodeSize,g.image.data.blocks,t);g.image.descriptor.lct.interlaced&&(I=n(I,g.image.descriptor.width));var l={pixels:I,dims:{top:g.image.descriptor.top,left:g.image.descriptor.left,width:g.image.descriptor.width,height:g.image.descriptor.height}};return g.image.descriptor.lct&&g.image.descriptor.lct.exists?l.colorTable=g.image.lct:l.colorTable=this.raw.gct,g.gce&&(l.delay=(g.gce.delay||10)*10,l.disposalType=g.gce.extras.disposal,g.gce.extras.transparentColorGiven&&(l.transparentIndex=g.gce.transparentColorIndex)),e&&(l.patch=F(l)),l}return null;function C(a,U,d){var s=4096,o=-1,A=d,B,Q,r,R,V,h,m,Z,c,W,u,J,N,X,y,p,_=new Array(d),ae=new Array(s),ne=new Array(s),K=new Array(s+1);for(J=a,Q=1<<J,V=Q+1,B=Q+2,m=o,R=J+1,r=(1<<R)-1,c=0;c<Q;c++)ae[c]=0,ne[c]=c;for(u=Z=N=X=p=y=0,W=0;W<A;){if(X===0){if(Z<R){u+=U[y]<<Z,Z+=8,y++;continue}if(c=u&r,u>>=R,Z-=R,c>B||c==V)break;if(c==Q){R=J+1,r=(1<<R)-1,B=Q+2,m=o;continue}if(m==o){K[X++]=ne[c],m=c,N=c;continue}for(h=c,c==B&&(K[X++]=N,c=m);c>Q;)K[X++]=ne[c],c=ae[c];N=ne[c]&255,K[X++]=N,B<s&&(ae[B]=m,ne[B]=N,B++,(B&r)===0&&B<s&&(R++,r+=B)),m=h}X--,_[p++]=K[X],W++}for(W=p;W<A;W++)_[W]=0;return _}function n(a,U){for(var d=new Array(a.length),s=a.length/U,o=function(V,h){var m=a.slice(h*U,(h+1)*U);d.splice.apply(d,[V*U,U].concat(m))},A=[0,4,2,1],B=[8,8,4,2],Q=0,r=0;r<4;r++)for(var R=A[r];R<s;R+=B[r])o(R,Q),Q++;return d}function F(a){for(var U=a.pixels.length,d=new Uint8ClampedArray(U*4),s=0;s<U;s++){var o=s*4,A=a.pixels[s],B=a.colorTable[A];d[o]=B[0],d[o+1]=B[1],d[o+2]=B[2],d[o+3]=A!==a.transparentIndex?255:0}return d}};ai.prototype.decompressFrames=function(i){for(var e=[],g=0;g<this.raw.frames.length;g++){var t=this.raw.frames[g];t.image&&e.push(this.decompressFrame(g,i))}return e};const QC={};class ad extends qg{constructor(e,g="",t={}){super(e,g,t);this.streamAtlasDescParam=new wt("StreamAtlasDesc"),this.streamAtlasIndexParam=new k("StreamAtlasIndex",0),this.format="RGBA",this.type="UNSIGNED_BYTE",this.__streamAtlas=!0,this.addParameter(this.streamAtlasDescParam),this.addParameter(this.streamAtlasIndexParam);const I=this.streamAtlasIndexParam;I.setRange([0,1]);let l,C=0;const n=F=>{I.value=C,l&&setTimeout(()=>n(F),this.getFrameDelay(C)),C=(C+1)%F};this.play=()=>{this.__resourcePromise.then(()=>{l=!0;let F=I.getRange();if(!F){console.warn("numFrames is null");return}const a=F[1];n(a)})},this.stop=()=>{l=!1}}getFrameDelay(e){return this.__unpackedData.frameDelays[e]*10}load(e,g="RGB"){return e in QC?(this.__resourcePromise=QC[e],this.__resourcePromise):(this.__resourcePromise=new Promise((t,I)=>{ee.incrementWorkload(1),Ra(e,l=>{console.warn("Unpacking Gif client side:"+e);const C=performance.now(),F=new ai(l).decompressFrames(!0),a=Math.sqrt(F.length),U=[a,a];q.fract(a)>0&&(U[0]=Math.floor(U[0]+1),q.fract(a)>.5?U[1]=Math.floor(U[1]+1):U[1]=Math.floor(U[1]));const d=F[0].dims.width,s=F[0].dims.height,o=document.createElement("canvas"),A=o.getContext("2d"),B=document.createElement("canvas"),Q=B.getContext("2d");B.width=d,B.height=s;const r=document.createElement("canvas"),R=r.getContext("2d");r.width=U[0]*d,r.height=U[1]*s;let V;const h=[],m=(W,u)=>{const J=W.dims;h.push(W.delay/10),(!V||J.width!=V.width||J.height!=V.height)&&(o.width=J.width,o.height=J.height,V=A==null?void 0:A.createImageData(J.width,J.height)),V.data.set(W.patch),A==null||A.putImageData(V,0,0),W.disposalType==2&&(Q==null||Q.clearRect(0,0,B.width,B.height)),Q==null||Q.drawImage(o,J.left,J.top),R==null||R.drawImage(B,u%U[0]*d,Math.floor(u/U[0])*s)};for(let W=0;W<F.length;W++)m(F[W],W);ee.incrementWorkDone(1);const Z=R==null?void 0:R.getImageData(0,0,r.width,r.height),c=performance.now()-C;console.log(`Decode GIF '${e}' time:`+c),t({width:r.width,height:r.height,atlasSize:U,frameRange:[0,F.length],frameDelays:h,imageData:Z})},l=>{const C="Unable to Load URL:"+l+":"+e;console.warn(C),I(C)})}),QC[e]=this.__resourcePromise,this.__resourcePromise.then(t=>{this.width=t.width,this.height=t.height,this.streamAtlasDescParam.value=new Be(t.atlasSize[0],t.atlasSize[1],0,0),this.streamAtlasIndexParam.setRange(t.frameRange),this.__unpackedData=t,this.__data=t.imageData,this.loaded=!0,this.emit("loaded")}),this.__resourcePromise)}}S.register("GIFImage",ad);class Fi extends ni{constructor(e,g={}){super(e,g);this.headlightModeParam=new Je("HeadLightMode",!1),this.addParameter(this.headlightModeParam),this.utf8decoder=new TextDecoder,this.shCoeffs=[]}__decodeData(e){const g=e.samples;if(g&&(this.luminanceData=JSON.parse(this.utf8decoder.decode(g)),this.luminanceData.shCoeffs))for(let t=0;t<9;t++)this.shCoeffs[t]=new E(this.luminanceData.shCoeffs[t*3+0],this.luminanceData.shCoeffs[t*3+1],this.luminanceData.shCoeffs[t*3+2]);return super.__decodeData(e)}dirToLuminance(e){const g=e.x,t=e.y,I=e.z,l=this.shCoeffs[0].scale(.886227);return l.addInPlace(this.shCoeffs[1].scale(2*.511664*t)),l.addInPlace(this.shCoeffs[2].scale(2*.511664*I)),l.addInPlace(this.shCoeffs[3].scale(2*.511664*g)),l.addInPlace(this.shCoeffs[4].scale(2*.429043*g*t)),l.addInPlace(this.shCoeffs[5].scale(2*.429043*t*I)),l.addInPlace(this.shCoeffs[6].scale(.743125*I*I-.247708)),l.addInPlace(this.shCoeffs[7].scale(2*.429043*g*I)),l.addInPlace(this.shCoeffs[8].scale(.429043*(g*g-t*t))),l.luminance()}}S.register("EnvMap",Fi);function Fd(){if(!globalThis.navigator)return"en";const i=new URLSearchParams(window.location.search);if(i.has("lang"))return i.get("lang");const e=globalThis.navigator;let g,t;const I=l=>l.startsWith("en")?"En":l.startsWith("es")?"Es":l.startsWith("fr")?"Fr":l.startsWith("gb")||l.startsWith("de")?"Gb":l;if(Array.isArray(e.languages)){for(g=0;g<e.languages.length;g++)if(t=e.languages[g],t&&t.length)return I(t)}return null}class Ud extends Xe{constructor(){super();this.__labelLibraries={},this.__language=Fd(),this.__foundLabelLibraries={}}loadLibrary(e,g){const t=e.substring(0,e.lastIndexOf("."));if(this.__foundLabelLibraries[t]=g,e.endsWith(".labels"))MC(g,I=>{this.__labelLibraries[t]=JSON.parse(I),this.emit("labelLibraryLoaded",{library:t})});else if(e.endsWith(".xlsx")){const I=globalThis.XLSX;Ra(g,l=>{const C=new Uint8Array(l),n=I.read(C,{type:"array"}),F={};n.SheetNames.forEach(function(a){I.utils.sheet_to_json(n.Sheets[a],{}).forEach(function(d){const s=d.Identifier;delete d.Identifier,F[s]=d})}),this.__labelLibraries[t]=F,this.emit("labelLibraryLoaded",{library:t})})}}isLibraryFound(e){return e in this.__foundLabelLibraries}isLibraryLoaded(e){return e in this.__labelLibraries}getLabelText(e,g){const t=this.__labelLibraries[e];if(!t)throw new Error("LabelLibrary: '"+e+"' not found in LabelManager. Found: ["+Object.keys(this.__labelLibraries)+"]");const I=t[g];if(!I)throw new Error("Label: '"+g+"' not found in LabelLibrary: '"+e+"'. Found: ["+Object.keys(t)+"]");const l=I[this.__language];if(!l){if(I.En)return I.En;throw new Error("labelText: '"+this.__language+"' not found in Label. Found: ["+Object.keys(I)+"]")}return l}setLabelText(e,g,t){let I=this.__labelLibraries[e];I||(I={},this.__labelLibraries[e]=I);let l=I[g];l||(l={},I[g]=l),l[this.__language]=t}setLanguage(e){this.__language=e}}const el=new Ud;function dd(i,e,g,t,I,l,C=!1,n=!0,F){if(typeof n=="undefined"&&(n=!0),typeof l=="undefined"&&(l=5),typeof l=="number")l={tl:l,tr:l,br:l,bl:l};else{const a={tl:0,tr:0,br:0,bl:0};for(const U in a)l[U]=l[U]||a[U]}i.beginPath(),i.moveTo(e+l.tl,g),i.lineTo(e+t-l.tr,g),i.quadraticCurveTo(e+t,g,e+t,g+l.tr),i.lineTo(e+t,g+I-l.br),i.quadraticCurveTo(e+t,g+I,e+t-l.br,g+I),i.lineTo(e+l.bl,g+I),i.quadraticCurveTo(e,g+I,e,g+I-l.bl),i.lineTo(e,g+l.tl),i.quadraticCurveTo(e,g,e+l.tl,g),i.closePath(),C&&i.fill(),n&&(i.lineWidth=F,i.stroke())}class Ui extends ii{constructor(e,g){super(e);this.requestedReRender=!1,this.libraryParam=new Zg("Library"),this.textParam=new Zg("Text",""),this.fontColorParam=new Fg("FontColor",new E(0,0,0)),this.fontSizeParam=new k("FontSize",22),this.fontParam=new Zg("Font","Helvetica"),this.borderWidthParam=new k("BorderWidth",2),this.outlineParam=new Je("Outline",!1),this.outlineColorParam=new Fg("OutlineColor",new E(0,0,0)),this.backgroundParam=new Je("Background",!0),this.backgroundColorParam=new Fg("BackgroundColor",new E("#FBC02D")),this.fillBackgroundParam=new Je("FillBackground",!0),this.strokeBackgroundOutlineParam=new Je("StrokeBackgroundOutline",!0),this.canvasElem=document.createElement("canvas");const t=22;this.marginParam=new k("Margin",t*.5),this.borderRadiusParam=new k("BorderRadius",t*.5),this.addParameter(this.marginParam),this.addParameter(this.borderRadiusParam),this.addParameter(this.libraryParam),this.addParameter(this.textParam),this.addParameter(this.fontColorParam),this.addParameter(this.fontSizeParam),this.addParameter(this.fontParam),this.addParameter(this.borderWidthParam),this.addParameter(this.outlineParam),this.addParameter(this.outlineColorParam),this.addParameter(this.backgroundParam),this.addParameter(this.backgroundColorParam),this.addParameter(this.fillBackgroundParam),this.addParameter(this.strokeBackgroundOutlineParam);const I=()=>{this.loadLabelData()};this.on("nameChanged",I),g&&(this.libraryParam.value=g),this.requestedReRender=!1,this.needsRender=!1,this.loadLabelData()}__parameterValueChanged(e){super.parameterValueChanged(e),this.requestedReRender||(this.requestedReRender=!0,this.loadLabelData())}loadLabelData(){const e=()=>{this.requestedReRender=!1,this.needsRender=!0,this.loaded?this.emit("updated"):(this.loaded=!0,this.emit("loaded"))},g=()=>new Promise(I=>{const l=this.libraryParam.value;if(l==""){I();return}if(!el.isLibraryFound(l)){console.warn("Label Library not found:",l),I();return}const C=()=>{try{const n=this.getName(),F=el.getLabelText(l,n);this.textParam.value=F}catch(n){console.warn(n)}I()};el.isLibraryLoaded(l)?C():el.on("labelLibraryLoaded",n=>{n.library==l&&C()})}),t=()=>new Promise(I=>{if(document.fonts!=null){const l=this.fontParam.value,C=this.fontSizeParam.value;document.fonts.load(C+'px "'+l+'"').then(()=>{I()})}else I()});Promise.all([g(),t()]).then(e)}renderLabelToImage(){const e=this.canvasElem.getContext("2d",{alpha:!0});let g=this.textParam.value;g==""&&(g=this.getName());const t=this.fontParam.value,I=this.fontColorParam.value,l="left",C=this.fontSizeParam.value,n=this.marginParam.value,F=this.borderWidthParam.value,a=this.borderRadiusParam.value,U=this.outlineParam.value,d=this.outlineColorParam.value,s=this.backgroundParam.value,o=this.backgroundColorParam.value,A=this.fillBackgroundParam.value,B=this.strokeBackgroundOutlineParam.value,Q=n+F,r=g.split(`
`);e.font=C+'px "'+t+'"';let R=0;r.forEach(h=>{R=Math.max(e.measureText(h).width,R)});const V=C;this.width=Math.ceil(R+Q*2),this.height=Math.ceil(V*r.length+Q*2),e.canvas.width=this.width,e.canvas.height=this.height,this.canvasElem.width=this.width,this.canvasElem.height=this.height,e.fillStyle="rgba(0, 0, 0, 0.0)",e.fillRect(0,0,this.width,this.height),s&&(e.fillStyle=o.toHex(),e.strokeStyle=d.toHex(),dd(e,F,F,this.width-F*2,this.height-F*2,a,A,B,F)),e.font=C+'px "'+t+'"',e.textAlign=l,e.fillStyle=I.toHex(),e.textBaseline="hanging",r.forEach((h,m)=>{e.fillText(h,Q,Q+m*V)}),U&&(e.strokeStyle=d.toHex(),e.lineWidth=1.5,e.strokeText(g,Q,Q)),this.__data=e.getImageData(0,0,this.width,this.height),this.needsRender=!1,this.emit("labelRendered",{width:this.width,height:this.height,data:this.__data})}getParams(){return this.needsRender&&this.renderLabelToImage(),super.getParams()}}S.register("Label",Ui);class sd extends ug{constructor(){super("")}connectWebcam(e,g,t=!1){const I={width:e,height:g,frameRate:{ideal:60,max:60}};t?I.facingMode={exact:"environment"}:I.facingMode={facingMode:"user"};const l=document.createElement("video");l.style.display="none",l.preload="auto",l.crossOrigin="anonymous",document.body.appendChild(l),navigator.mediaDevices.getUserMedia({audio:!1,video:I}).then(C=>{l.srcObject=C,l.onloadedmetadata=n=>{l.play(),this.width=l.videoWidth,this.height=l.videoHeight,console.log("Webcam:["+this.width+", "+this.height+"]"),this.__data=l,this.loaded=!0,this.emit("loaded");let F=0;const a=60,U=()=>{if(l.paused||l.ended)return;const d=Math.floor(l.currentTime*a);F!=d&&(this.emit("updated"),F=d),setTimeout(U,20)};U()}}).catch(function(C){})}setVideoStream(e){this.loaded=!1,this.width=e.videoWidth,this.height=e.videoHeight,this.start(),this.__data=e,this.loaded=!0,this.emit("loaded")}stop(){clearInterval(this.__intervalId)}start(){this.__intervalId=setInterval(()=>{this.emit("updated")},20)}isLoaded(){return this.loaded}getParams(){return{type:this.type,format:this.format,width:this.width,height:this.height,data:this.__data,flipY:!0}}}S.register("VideoStreamImage2D",sd);class Ve extends jg{constructor(e,g){super(e);this.__isOpaque=!0,this.__isTextured=!1,this.__shaderName="",g&&this.setShaderName(g)}getShaderName(){return this.__shaderName}setShaderName(e){if(this.__shaderName==e)return;this.__shaderName=e;const t=S.getClassDefinition(e).getMaterialTemplate();if(!t)throw new Error("Error setting Shader. Material template not registered found:"+e);const I={};let l=t.getNumParameters();for(;l--;){const n=t.getParameterByIndex(l);this.getParameter(n.getName())||this.addParameter(n.clone()),I[n.getName()]=!0}for(const n of this.params)I[n.getName()]||this.removeParameter(n.getName());this.__shaderName=e,this.__checkOpacity({});const C=new dU(e);this.emit("shaderNameChanged",C)}removeAllTextures(){for(const e of this.params)e instanceof ye?e.getImage()&&e.setImage(null):e instanceof Oe&&e.getImage()&&e.setImage(null)}getParamTextures(){const e={};for(const g of this.params)g instanceof ye?g.getImage()&&(e[g.getName()]=g.getImage()):g instanceof Oe&&g.getImage()&&(e[g.getName()]=g.getImage());return e}isOpaque(){return this.__isOpaque}__checkOpacity(e){let g=!0;try{this.getShaderClass().isOpaque()||(g=!1)}catch{}if(g){const t=this.getParameter("Opacity");if(t&&(t.value<.99||t instanceof Oe&&t.getImage()))g=!1;else{const I=this.getParameter("BaseColor");if(I){if(I instanceof ye){const l=I.getImage();l&&l.format=="RGBA"&&(g=!1)}g&&I.value&&I.value.a<1&&(g=!1)}}}if(g!=this.__isOpaque){this.__isOpaque=g;const t=new Qa(g,!0);this.emit("opacityChanged",t),this.emit("transparencyChanged",t)}}isTextured(){return this.__isTextured}__checkTextures(e){const g=e||{};let t=!1;for(const I of this.params)if(I instanceof ye){if(I.getImage()){t=!0;break}}else if(I instanceof Oe&&I.getImage()){t=!0;break}if(t!=this.__isTextured){this.__isTextured=t;let I=new sU(t,g);this.emit("texturedChanged",I)}}parameterValueChanged(e){this.__checkOpacity(e),this.__checkTextures(e),super.parameterValueChanged(e)}getShaderClass(){return S.getClassDefinition(this.getShaderName())}toJSON(e){const g=super.toJSON(e);return g.shader=this.__shaderName,g}fromJSON(e,g={}){if(!e.shader){console.warn("Invalid Material JSON");return}this.setShaderName(e.shader),super.fromJSON(e,g)}readBinary(e,g){let t=e.loadStr();if(t=="StandardMaterial"&&(t="StandardSurfaceShader"),t=="TransparentMaterial"&&(t="StandardSurfaceShader"),this.setShaderName(t),g.versions["zea-engine"].compare([0,0,3])<0)throw`Loading zcad files of version ${g.versions["zea-engine"]} is not longer support`;super.readBinary(e,g),this.__checkOpacity(),this.__checkTextures()}clone(e){const g=new Ve("clone","");return g.copyFrom(this,e),g}copyFrom(e,g){this.setShaderName(e.getShaderName()),super.copyFrom(e,g)}}S.register("Material",Ve);class wl extends Ve{constructor(e){super(e);this.baseColorParam=new ye("BaseColor",new E(1,1,.5)),this.opacityParam=new k("Opacity",1),this.lineThicknessParam=new k("LineThickness",.01),this.overlayParam=new k("Overlay",0),this.__shaderName="FatLinesShader",this.addParameter(this.baseColorParam),this.addParameter(this.opacityParam),this.addParameter(this.overlayParam),this.addParameter(this.lineThicknessParam)}}S.register("FatLinesMaterial",wl);class Dl extends Ve{constructor(e){super(e);this.baseColorParam=new ye("BaseColor",new E(1,1,.5)),this.pointSizeParam=new k("PointSize",1),this.roundedParam=new k("Rounded",1),this.borderWidthParam=new k("BorderWidth",.2),this.overlayParam=new k("Overlay",0),this.__shaderName="FatPointsShader",this.addParameter(this.baseColorParam),this.addParameter(this.pointSizeParam),this.addParameter(this.roundedParam),this.addParameter(this.borderWidthParam),this.addParameter(this.overlayParam)}clone(e){const g=new Dl;return g.copyFrom(this,e),g}}S.register("FatPointsMaterial",Dl);class xI extends Ve{constructor(e){super(e);this.baseColorParam=new ye("BaseColor",new E(1,1,.5)),this.overlayParam=new Oe("Overlay",0),this.__shaderName="FlatSurfaceShader",this.addParameter(this.baseColorParam),this.addParameter(this.overlayParam)}clone(e){const g=new xI;return g.copyFrom(this,e),g}}S.register("FlatSurfaceMaterial",xI);class Lt extends Ve{constructor(e){super(e);this.baseColorParam=new ye("BaseColor",new E(1,1,.5)),this.opacityParam=new Oe("Opacity",.7,[0,1]),this.overlayParam=new Oe("Overlay",1e-6),this.stippleScaleParam=new k("StippleScale",.01),this.stippleValueParam=new k("StippleValue",0,[0,1]),this.occludedStippleValueParam=new k("OccludedStippleValue",1,[0,1]),this.__shaderName="LinesShader",this.addParameter(this.baseColorParam),this.addParameter(this.opacityParam),this.addParameter(this.overlayParam),this.addParameter(this.stippleScaleParam),this.addParameter(this.stippleValueParam),this.addParameter(this.occludedStippleValueParam)}clone(e){const g=new Lt;return g.copyFrom(this,e),g}}S.register("LinesMaterial",Lt);class Kl extends Ve{constructor(e){super(e);this.baseColorParam=new ye("BaseColor",new E(1,1,.5)),this.pointSizeParam=new Oe("PointSize",2),this.overlayParam=new Oe("Overlay",2e-5),this.__shaderName="PointsShader",this.addParameter(this.baseColorParam),this.addParameter(this.pointSizeParam),this.addParameter(this.overlayParam)}clone(e){const g=new Kl;return g.copyFrom(this,e),g}}S.register("PointsMaterial",Kl);class Ll extends Ve{constructor(e){super(e);this.baseColorParam=new ye("BaseColor",new E(1,1,.5)),this.__shaderName="ScreenSpaceShader",this.addParameter(this.baseColorParam)}clone(e){const g=new Ll;return g.copyFrom(this,e),g}}S.register("ScreenSpaceMaterial",Ll);class zl extends Ve{constructor(e){super(e);this.baseColorParam=new ye("BaseColor",new E(1,1,.5)),this.opacityParam=new Oe("Opacity",1,[0,1]),this.emissiveStrengthParam=new Oe("EmissiveStrength",0,[0,1]),this.__shaderName="SimpleSurfaceShader",this.addParameter(this.baseColorParam),this.addParameter(this.opacityParam),this.addParameter(this.emissiveStrengthParam)}clone(e){const g=new zl;return g.copyFrom(this,e),g}}S.register("SimpleSurfaceMaterial",zl);class _l extends Ve{constructor(e){super(e);this.baseColorParam=new ye("BaseColor",new E(1,1,.5)),this.normalParam=new ye("Normal",new E(1,1,.5)),this.ambientOcclusion=new Oe("AmbientOcclusion",1,[0,1]),this.metallicParam=new Oe("Metallic",.05,[0,1]),this.roughnessParam=new Oe("Roughness",.5,[0,1]),this.reflectanceParam=new Oe("Reflectance",.5,[0,1]),this.emissiveStrengthParam=new Oe("EmissiveStrength",0,[0,1]),this.opacityParam=new Oe("Opacity",1,[0,1]),this.edgeColorParam=new ye("EdgeColor",new E(.2,.2,.2)),this.pointColorParam=new ye("PointColor",new E(.1,.1,.1)),this.__shaderName="StandardSurfaceShader",this.addParameter(this.baseColorParam),this.addParameter(this.normalParam),this.addParameter(this.ambientOcclusion),this.addParameter(this.metallicParam),this.addParameter(this.roughnessParam),this.addParameter(this.reflectanceParam),this.addParameter(this.emissiveStrengthParam),this.addParameter(this.opacityParam),this.addParameter(this.edgeColorParam),this.addParameter(this.pointColorParam)}clone(e){const g=new _l;return g.copyFrom(this,e),g}}S.register("StandardSurfaceMaterial",_l);class od extends Xe{constructor(){super();this.assetItem=null}}class Ol extends H{constructor(e){super(e);this.srcTreePath=[],this.srcTree=null}setSrcTree(e){this.srcTree=e;const g=new od,t=this.srcTree.clone(g);t.localXfoParam.value=new v,this.addChild(t,!1)}getSrcTree(){return this.srcTree}readBinary(e,g){if(super.readBinary(e,g),this.srcTreePath=e.loadStrArray(),this.srcTreePath.length>0)try{g.resolvePath(this.srcTreePath,t=>{this.setSrcTree(t)},t=>{console.warn(`Error loading InstanceItem: ${this.getPath()}, unable to resolve: ${this.srcTreePath}. `+t.message)})}catch(t){console.warn(`Error loading InstanceItem: ${this.getPath()}: `+t)}}clone(e){const g=new Ol;return g.copyFrom(this,e),g}copyFrom(e,g){super.copyFrom(e,g),this.srcTreePath=e.srcTreePath,this.srcTreePath.length>0&&this.getNumChildren()==0&&e.once("childAdded",t=>{const l=t.childItem;this.setSrcTree(l)})}}S.register("InstanceItem",Ol);class Lg extends H{constructor(e){super(e);this.materialParam=new YI("Material"),this.overlay=!1,this.__cutAway=!1,this.__cutAwayVector=new b(1,0,0),this.__cutAwayDist=0,this.__layers=[]}setOverlay(e){this.overlay=e}isOverlay(){return this.overlay}addLayer(e){this.__layers.push(e)}getLayers(){return this.__layers}isCutawayEnabled(){return this.__cutAway}setCutawayEnabled(e){this.__cutAway=e,this.emit("cutAwayChanged")}getCutVector(){return this.__cutAwayVector}setCutVector(e){this.__cutAwayVector=e,this.emit("cutAwayChanged")}getCutDist(){return this.__cutAwayDist}setCutDist(e){this.__cutAwayDist=e,this.emit("cutAwayChanged")}readBinary(e,g){if(super.readBinary(e,g),g.versions["zea-engine"].compare([0,0,4])>=0){const t=e.loadStr();let l=g.assetItem.getMaterialLibrary().getMaterial(t,!1);if(l||(l=new Ve(t,"SimpleSurfaceShader"),l.getParameter("BaseColor").loadValue(E.random(.25)),g.assetItem.getMaterialLibrary().addMaterial(l)),this.materialParam.loadValue(l),this.__layers=e.loadStrArray(),this.__layers.length>0)for(const C of this.__layers)g.addGeomToLayer(this,C)}}}let an=!1;class Ad extends ag{constructor(e,g,t){super("CalcGeomMatOperator");this.globalXfo=new Pg("GlobalXfo"),this.geomOffsetXfo=new Pg("GeomOffsetXfo"),this.geomMat=new HU("GeomMat"),this.globalXfo.setParam(e),this.geomOffsetXfo.setParam(g),this.geomMat.setParam(t),this.addInput(this.globalXfo),this.addInput(this.geomOffsetXfo),this.addOutput(this.geomMat)}evaluate(){const e=this.globalXfo.getValue().toMat4(),g=this.geomOffsetXfo.getValue().toMat4();this.geomMat.setClean(e.multiply(g))}}class ge extends Lg{constructor(e,g,t,I){super(e);this.listenerIDs={},this.geomIndex=-1,this.assetItem=null,this.cullable=!0,this.geomOffsetXfoParam=new cg("GeomOffsetXfo"),this.geomParam=new vl("Geometry"),this.geomMatParam=new EI("GeomMat"),this.addParameter(this.geomParam),this.addParameter(this.materialParam),this.addParameter(this.geomOffsetXfoParam),this.addParameter(this.geomMatParam);const l=()=>{this.setBoundingBoxDirty()};this.geomParam.on("valueChanged",l),this.geomParam.on("boundingBoxChanged",l),this.calcGeomMatOperator=new Ad(this.globalXfoParam,this.geomOffsetXfoParam,this.geomMatParam),g&&this.geomParam.loadValue(g),t&&this.materialParam.loadValue(t),I&&(this.localXfoParam.value=I)}_cleanBoundingBox(){if(this.disableBoundingBox)return new gg;const e=super._cleanBoundingBox();if(this.geomBBox){const g=this.geomMatParam.value;e.addPoint(g.transformVec3(this.geomBBox.p0)),e.addPoint(g.transformVec3(this.geomBBox.p1))}else{const g=this.geomParam.value;if(g)if(an){const t=this.geomMatParam.value;if(g instanceof vI){const I=g.__buffers.attrBuffers.positions.values,l=C=>{const n=C*3;return new b(I.subarray(n,n+3))};for(let C=0;C<g.getNumVertices();C++)e.addPoint(t.transformVec3(l(C)))}else{const I=g.getVertexAttribute("positions");for(let l=0;l<g.getNumVertices();l++)e.addPoint(t.transformVec3(I.getValueRef(l)))}}else e.addBox3(g.getBoundingBox(),this.geomMatParam.value)}return e}fromJSON(e,g){super.fromJSON(e,g),g.numGeomItems++}readBinary(e,g){super.readBinary(e,g),g.numGeomItems++;const t=e.loadUInt8(),I=e.loadUInt32(),l=g.assetItem.getGeometryLibrary();this.geomIndex=I,this.assetItem=g.assetItem;const C=l.getGeom(I);if(C)this.geomParam.loadValue(C);else{const F=U=>{const{range:d}=U;if(I>=d[0]&&I<d[1]){const s=l.getGeom(I);s?this.geomParam.value=s:console.warn("Geom not loaded:",this.getName()),l.removeListenerById("rangeLoaded",a)}},a=l.on("rangeLoaded",F)}const n=1<<2;if(t&n&&(this.geomOffsetXfoParam.value=new v(e.loadFloat32Vec3(),e.loadFloat32Quat(),e.loadFloat32Vec3())),g.versions["zea-engine"].compare([0,0,4])<0)if(t&8){const a=g.assetItem.getMaterialLibrary(),U=e.loadStr();let d=a.getMaterial(U);d||(console.warn("Geom :'"+this.__name+"' Material not found:"+U),d=a.getMaterial("Default")),this.materialParam.loadValue(d)}else this.materialParam.loadValue(g.assetItem.getMaterialLibrary().getMaterial("Default"));g.versions["zea-engine"].compare([3,0,0])<0?e.loadFloat32Vec2():this.geomBBox=new gg(e.loadFloat32Vec3(),e.loadFloat32Vec3())}toString(e){return JSON.stringify(this.toJSON(e),null,2)}clone(e){const g=new ge;return g.copyFrom(this,e),g}copyFrom(e,g){if(super.copyFrom(e,g),!e.geomParam.value&&e.geomIndex!=-1){const t=e.assetItem.getGeometryLibrary();this.assetItem=e.assetItem,this.geomIndex=e.geomIndex,this.geomBBox=e.geomBBox;const I=l=>{const{range:C}=l;if(this.geomIndex>=C[0]&&this.geomIndex<C[1]){const n=t.getGeom(this.geomIndex);n?this.geomParam.value=n:console.warn("Geom not loaded:",this.getName()),t.removeListenerById("rangeLoaded",this.listenerIDs.rangeLoaded)}};this.listenerIDs.rangeLoaded=t.on("rangeLoaded",I)}this.geomMatParam.setDirty(0)}static setCalculatePreciseBoundingBoxes(e){an=e}}S.register("GeomItem",ge);class Pl extends H{constructor(e){super(e);this.itemsParam=new $C("Items",g=>g instanceof H),this.__itemsEventHandlers=[],this.addParameter(this.itemsParam),this.__itemsParam=this.itemsParam,this.itemsParam.on("itemAdded",g=>{this.bindItem(g.item,g.index)}),this.itemsParam.on("itemRemoved",g=>{this.unbindItem(g.item,g.index)})}setSearchRoot(e){this.searchRoot=e}setOwner(e){(!this.searchRoot||this.searchRoot==this.getOwner())&&(this.searchRoot=e),super.setOwner(e)}bindItem(e,g){if(!(e instanceof H))return;const t={};t.pointerDown=e.on("pointerDown",I=>{this.onPointerDown(I)}),t.pointerUp=e.on("pointerUp",I=>{this.onPointerUp(I)}),t.pointerMove=e.on("pointerMove",I=>{this.onPointerMove(I)}),t.pointerEnter=e.on("pointerEnter",I=>{this.onPointerEnter(I)}),t.pointerLeave=e.on("pointerLeave",I=>{this.onPointerLeave(I)}),this.__itemsEventHandlers.splice(g,0,t)}unbindItem(e,g){if(!(e instanceof H))return;const t=this.__itemsEventHandlers[g];for(let I in t){const l=I.split(".");if(l.length>1){const C=e.getParameter(l[0]);C&&C.removeListenerById(l[1],t[I])}else e.removeListenerById(I,t[I])}this.__itemsEventHandlers.splice(g,1)}addItem(e,g=!0){if(!e){console.warn("Error adding item to group. Item is null");return}this.itemsParam.addItem(e,g)}removeItem(e,g=!0){const t=this.itemsParam.value;if(!t)return;const I=Array.from(t).indexOf(e);I&&this.itemsParam.removeItem(I,g)}clearItems(e=!0){const g=this.itemsParam.value;if(!g)return;const t=Array.from(g);for(let I=t.length-1;I>=0;I--)this.unbindItem(t[I],I);this.itemsParam.clearItems(e)}getItems(){return this.itemsParam.value}setItems(e){this.clearItems(!1),this.itemsParam.setItems(e)}toJSON(e){const g=super.toJSON(e),t=this.itemsParam.value;if(t){const I=Array.from(t),l=[];I.forEach(C=>{const n=C.getPath();l.push(e?e.makeRelative(n):n)}),g.treeItems=l}return g}fromJSON(e,g){if(super.fromJSON(e,g),!e.treeItems){console.warn("Invalid Parameter JSON");return}if(!g)throw new Error("Unable to load JSON on a BaseGroup without a load context");let t=e.treeItems.length;const I=l=>{g.resolvePath(l,C=>{this.addItem(C),t--,t==0&&this.loadDone()},()=>{console.warn("BaseGroup: '"+this.getName()+"'. Unable to load item:"+l)})};for(const l of e.treeItems)I(l)}loadDone(){}}class wI extends Pl{constructor(e){super(e);this.highlightedParam=new Je("Highlighted",!1),this.highlightColorParam=new Fg("HighlightColor",new E(.5,.5,1)),this.highlightFillParam=new k("HighlightFill",0,[0,1]),this.addParameter(this.highlightedParam),this.highlightedParam.on("valueChanged",()=>{this.updateHighlight()}),this.addParameter(this.highlightColorParam),this.highlightColorParam.on("valueChanged",()=>{this.updateHighlight()}),this.addParameter(this.highlightFillParam),this.highlightFillParam.on("valueChanged",()=>{this.updateHighlight()})}updateVisibility(){if(super.updateVisibility()){const e=this.isVisible();return Array.from(this.itemsParam.value).forEach(g=>{g instanceof H&&g.propagateVisibility(e?1:-1)}),!0}return!1}updateHighlight(){this.__updateHighlightHelper()}__updateHighlightHelper(){let e=!1,g;(this.highlightedParam.value||this.isSelected())&&(e=!0,g=this.highlightColorParam.value,g.a=this.highlightFillParam.value);const t="groupItemHighlight"+this.getId();Array.from(this.itemsParam.value).forEach(I=>{I instanceof H&&(e?I.addHighlight(t,g,!0):I.removeHighlight(t,!0))})}setSelected(e){super.setSelected(e),this.updateHighlight()}bindItem(e,g){super.bindItem(e,g);const t=this.__itemsEventHandlers[g];if(e instanceof H){if(e instanceof H&&this.highlightedParam.value){const I=this.highlightColorParam.value;I.a=this.highlightFillParam.value,e.addHighlight("groupItemHighlight"+this.getId(),I,!0)}this.isVisible()||e.propagateVisibility(-1),t["BoundingBox.valueChanged"]=e.boundingBoxParam.on("valueChanged",I=>{this.setBoundingBoxDirty()})}}unbindItem(e,g){super.unbindItem(e,g),e instanceof H&&(this.highlightedParam.value&&e.removeHighlight("groupItemHighlight"+this.getId(),!0),this.isVisible()||e.propagateVisibility(1),e.traverse(t=>{t instanceof Lg&&t.setCutawayEnabled(!1)},!0))}clone(e){const g=new wI(this.__name+" clone");return g.copyFrom(this,e),g}}S.register("SelectionSet",wI);var Bd=_C("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwp2YXIgd29ya2VyX2NvZGUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHsKICAgICd1c2Ugc3RyaWN0JzsKCiAgICAvKioKICAgICAqIFN0cmluZyBmdW5jdGlvbnMKICAgICAqCiAgICAgKi8KICAgIGNsYXNzIFN0cmluZ0Z1bmN0aW9ucyB7CiAgICAgICAgLyoqCiAgICAgICAgICogUmVwbGFjZXMgYWxsIG1hdGNoZXMgaW4gYSBzdHJpbmcuCiAgICAgICAgICoKICAgICAgICAgKiBAc3RhdGljCiAgICAgICAgICogQHBhcmFtIHN0ciAtCiAgICAgICAgICogQHBhcmFtIHBhdHRlcm4gLQogICAgICAgICAqIEBwYXJhbSByZXBsYWNlbWVudCAtCiAgICAgICAgICogQHJldHVybiAtCiAgICAgICAgICovCiAgICAgICAgc3RhdGljIHJlcGxhY2VBbGwoc3RyLCBwYXR0ZXJuLCByZXBsYWNlbWVudCkgewogICAgICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UobmV3IFJlZ0V4cChwYXR0ZXJuLCAnZycpLCByZXBsYWNlbWVudCk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgSlNPTiBvYmplY3QgYXMgYSBmb3JtYXR0ZWQgc3RyaW5nLCBidXQgdGhlIG51bWVyaWMgdmFsdWVzIGFyZSBmaXhlZCB0byB0aGUgc3BlY2lmaWVkIHByZWNpc2lvbi4KICAgICAgICAgKgogICAgICAgICAqIEBzdGF0aWMKICAgICAgICAgKiBAcGFyYW0gdmFsIC0KICAgICAgICAgKiBAcGFyYW0gc3BhY2UgLQogICAgICAgICAqIEBwYXJhbSBwcmVjaXNpb24gLQogICAgICAgICAqIEByZXR1cm4gLQogICAgICAgICAqLwogICAgICAgIHN0YXRpYyBzdHJpbmdpZnlKU09OV2l0aEZpeGVkUHJlY2lzaW9uKHZhbCwgc3BhY2UgPSAwLCBwcmVjaXNpb24gPSA1KSB7CiAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh2YWwsIChfLCB2YWwpID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiB2YWwgPyAodmFsLnRvRml4ZWQgPyBOdW1iZXIodmFsLnRvRml4ZWQocHJlY2lzaW9uKSkgOiB2YWwpIDogdmFsOwogICAgICAgICAgICB9LCBzcGFjZSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFRyYW5zZm9ybXMgdGhlIGdpdmVuIHN0cmluZyBpbnRvIGEgbnVtZXJpYyB2YWx1ZS4KICAgICAgICAgKgogICAgICAgICAqIEBzdGF0aWMKICAgICAgICAgKiBAcGFyYW0gc3RyIC0KICAgICAgICAgKiBAcmV0dXJuIC0KICAgICAgICAgKi8KICAgICAgICBzdGF0aWMgaGFzaFN0cihzdHIpIHsKICAgICAgICAgICAgbGV0IGhhc2ggPSAwOwogICAgICAgICAgICBsZXQgaTsKICAgICAgICAgICAgbGV0IGNocjsKICAgICAgICAgICAgbGV0IGxlbjsKICAgICAgICAgICAgaWYgKHN0ci5sZW5ndGggPT09IDApCiAgICAgICAgICAgICAgICByZXR1cm4gaGFzaDsKICAgICAgICAgICAgZm9yIChpID0gMCwgbGVuID0gc3RyLmxlbmd0aDsgaSA8IGxlbjsgaSsrKSB7CiAgICAgICAgICAgICAgICBjaHIgPSBzdHIuY2hhckNvZGVBdChpKTsKICAgICAgICAgICAgICAgIGhhc2ggPSAoaGFzaCA8PCA1KSAtIGhhc2ggKyBjaHI7CiAgICAgICAgICAgICAgICBoYXNoIHw9IDA7IC8vIENvbnZlcnQgdG8gMzJiaXQgaW50ZWdlcgogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBNYXRoLmFicyhoYXNoKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBSZXByZXNlbnRpbmcgYSBWZWMyKHR3by1kaW1lbnNpb25hbCBmbG9hdGluZyBwb2ludCB2ZWN0b3IpLiBBIFZlYzIgaXMgZm9yIHJlcHJlc2VudGluZyAyIGRpbWVuc2lvbmFsIHZhbHVlcywgc3VjaCBhcyBzY3JlZW4gY29vcmRpbmF0ZXMgb3IgcGl4ZWwgY29vcmRpbmF0ZXMgd2l0aGluIGFuIGltYWdlLgogICAgICoKICAgICAqIE1hdGggdHlwZXMgaW50ZXJuYWxseSBzdG9yZSB2YWx1ZXMgaW4ge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Zsb2F0MzJBcnJheXxGbG9hdDMyQXJyYXl9IGFuZAogICAgICogZXhwb3NlIGdldHRlcnMgYW5kIHNldHRlcnMgZm9yIHRoZSBjb21wb25lbnQgdmFsdWVzLgogICAgICoKICAgICAqLwogICAgY2xhc3MgVmVjMiB7CiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIFZlYzIuCiAgICAgICAgICoKICAgICAgICAgKiBUaGUgdHlwZSBvZiB2YWx1ZXMgb2YgdGhlIGAoeCwgeSlgIGNvb3JkaW5hdGVzIGNhbiBiZSB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvRmxvYXQzMkFycmF5fEZsb2F0MzJBcnJheX0sCiAgICAgICAgICoge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL1VpbnQzMkFycmF5fFVpbnQzMkFycmF5fSwKICAgICAgICAgKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvSW50MzJBcnJheXxJbnQzMkFycmF5fSBhbmQKICAgICAgICAgKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZXMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2lhL09iamV0b3NfZ2xvYmFsZXMvQXJyYXlCdWZmZXJ8QXJyYXlCdWZmZXJ9LgogICAgICAgICAqCiAgICAgICAgICoKICAgICAgICAgKiBgYGBqYXZhc2NyaXB0CiAgICAgICAgICogIGNvbnN0IG15VmVjMiA9IG5ldyBWZWMyKDEuMiwgMy40KQogICAgICAgICAqIGBgYAogICAgICAgICAqCiAgICAgICAgICogR2l2ZW4gYW4gYXJyYXkgb2YgZmxvYXRzLCBjcmVhdGUgYSBWZWMyIHRoYXQgd3JhcHMgc29tZSBwYXJ0IG9mIGl0LgogICAgICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAgICAgKiAgY29uc3QgZmxvYXRBcnJheSA9IG5ldyBGbG9hdDMyQXJyYXkoNikKICAgICAgICAgKiAgZmxvYXRBcnJheVswXSA9IDEuMgogICAgICAgICAqICBmbG9hdEFycmF5WzFdID0gMy40CiAgICAgICAgICogIGNvbnN0IG15VmVjMiA9IG5ldyBWZWMyKGZsb2F0QXJyYXkpCiAgICAgICAgICogIGNvbnNvbGUubG9nKG15VmVjMi50b0pTT04oKSkKICAgICAgICAgKiBgYGAKICAgICAgICAgKiBUaGUgcmVzdWx0aW5nIG91dHB1dAogICAgICAgICAqIGBgYGpzb24KICAgICAgICAgKiAgPiB7IHg6MS4yLCB5OjMuNCB9CiAgICAgICAgICogYGBgCiAgICAgICAgICoKICAgICAgICAgKiBHaXZlbiBhbiBhcnJheSBvZiBmbG9hdHMsIGNyZWF0ZSBhIFZlYzIgdGhhdCB3cmFwcyBzb21lIHBhcnQgb2YgaXQuCiAgICAgICAgICogYGBgamF2YXNjcmlwdAogICAgICAgICAqICBjb25zdCBmbG9hdEFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSg2KQogICAgICAgICAqICBmbG9hdEFycmF5WzBdID0gMS4yCiAgICAgICAgICogIGZsb2F0QXJyYXlbMV0gPSAzLjQKICAgICAgICAgKiAgZmxvYXRBcnJheVsyXSA9IDUuNgogICAgICAgICAqICBmbG9hdEFycmF5WzNdID0gNy44CiAgICAgICAgICogIGZsb2F0QXJyYXlbNF0gPSA5LjAKICAgICAgICAgKiAgZmxvYXRBcnJheVs1XSA9IDEuOQogICAgICAgICAqICBjb25zdCBteVZlYzIgPSBuZXcgVmVjMihmbG9hdEFycmF5LmJ1ZmZlciwgOCkKICAgICAgICAgKiAgY29uc29sZS5sb2cobXlWZWMyLnRvSlNPTigpKQogICAgICAgICAqIGBgYAogICAgICAgICAqIFRoZSByZXN1bHRpbmcgb3V0cHV0CiAgICAgICAgICogYGBganNvbgogICAgICAgICAqICA+IHsgeDo1LjYsIHk6Ny44IH0KICAgICAgICAgKiBgYGAKICAgICAgICAgKgogICAgICAgICAqIFlvdSBjYW4gYWxzbyBwYXNzIG9uZSBKU09OIG9iamVjdCBwYXJhbWV0ZXIuCiAgICAgICAgICogYGBgamF2YXNjcmlwdAogICAgICAgICAqICBjb25zdCBteVZlYzIgPSBuZXcgVmVjMih7IHg6MS4yLCB5OjMuNCB9KQogICAgICAgICAqIGBgYAogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHggLSBUaGUgeCB2YWx1ZS4gRGVmYXVsdCBpcyAwLgogICAgICAgICAqIEBwYXJhbSB5IC0gVGhlIHkgdmFsdWUuIERlZmF1bHQgaXMgMC4KICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3Rvcih4ID0gMCwgeSA9IDApIHsKICAgICAgICAgICAgaWYgKHggaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkgfHwgeCBpbnN0YW5jZW9mIFVpbnQzMkFycmF5IHx8IHggaW5zdGFuY2VvZiBJbnQzMkFycmF5KSB7CiAgICAgICAgICAgICAgICB0aGlzLl9fZGF0YSA9IHg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHggPT0gJ251bWJlcicgJiYgdHlwZW9mIHkgPT0gJ251bWJlcicpIHsKICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhID0gbmV3IEZsb2F0MzJBcnJheSgyKTsKICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhWzBdID0geDsKICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhWzFdID0geTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgeCA9PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGEgPSBuZXcgRmxvYXQzMkFycmF5KDIpOwogICAgICAgICAgICAgICAgdGhpcy5mcm9tSlNPTih4KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhID0gbmV3IEZsb2F0MzJBcnJheSgyKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIGB4YCBjb21wb25lbnQuCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIHggY29tcG9uZW50LgogICAgICAgICAqLwogICAgICAgIGdldCB4KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX2RhdGFbMF07CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHRlciBmb3IgYHhgIGNvbXBvbmVudC4KICAgICAgICAgKiBAcGFyYW0gdmFsIC0gVGhlIHZhbCBwYXJhbS4KICAgICAgICAgKi8KICAgICAgICBzZXQgeCh2YWwpIHsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMF0gPSB2YWw7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEdldHRlciBmb3IgYHlgIGNvbXBvbmVudC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgeSBjb21wb25lbnQuCiAgICAgICAgICovCiAgICAgICAgZ2V0IHkoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YVsxXTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0dGVyIGZvciBgeWAgY29tcG9uZW50LgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCB5KHZhbCkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVsxXSA9IHZhbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0dGVyIGZyb20gc2NhbGFyIGNvbXBvbmVudHMuCiAgICAgICAgICogQHBhcmFtIHggLSBUaGUgeCBjb21wb25lbnQuCiAgICAgICAgICogQHBhcmFtIHkgIC0gVGhlIHkgY29tcG9uZW50LgogICAgICAgICAqLwogICAgICAgIHNldCh4LCB5KSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzBdID0geDsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMV0gPSB5OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXBsYWNlcyB0aGlzIFZlYzIgZGF0YSB3aXRoIHRoZSBWZWMyIGRhdGEgcGFzc2VkIGFzIHBhcmFtZXRlci4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBvdGhlciBWZWMyIHRvIHNldCBmcm9tLgogICAgICAgICAqLwogICAgICAgIHNldEZyb21PdGhlcihvdGhlcikgewogICAgICAgICAgICB0aGlzLnggPSBvdGhlci54OwogICAgICAgICAgICB0aGlzLnkgPSBvdGhlci55OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDaGVja3MgaWYgdGhpcyBWZWMyIGNvbnRhaW5zIHRoZSBzYW1lIHZhbHVlcyBhcyB0aGUgb3RoZXIgVmVjMi4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBvdGhlciBWZWMyIHRvIGNvbXBhcmUgd2l0aC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBgdHJ1ZWAgaWYgYXJlIHRoZSBzYW1lIFZlY3Rvciwgb3RoZXJ3aXNlLCBgZmFsc2VgLgogICAgICAgICAqLwogICAgICAgIGlzRXF1YWwob3RoZXIpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMueCA9PSBvdGhlci54ICYmIHRoaXMueSA9PSBvdGhlci55OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDaGVja3MgaWYgdGhpcyBWZWMyIGlzIGRpZmZlcmVudCBmcm9tIGFub3RoZXIgVmVjMi4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBvdGhlciBWZWMyIHRvIGNvbXBhcmUgd2l0aC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIFZlYzJzIGFyZSBkaWZmZXJlbnQsIG90aGVyd2lzZSwgYGZhbHNlYC4KICAgICAgICAgKi8KICAgICAgICBub3RFcXVhbChvdGhlcikgewogICAgICAgICAgICByZXR1cm4gdGhpcy54ICE9IG90aGVyLnggJiYgdGhpcy55ICE9IG90aGVyLnk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIFZlYzIgaXMgYXBwcm94aW1hdGVseSB0aGUgc2FtZSBhcyBvdGhlci4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBvdGhlciBWZWMyIHRvIGNvbXBhcmUgd2l0aC4KICAgICAgICAgKiBAcGFyYW0gcHJlY2lzaW9uIC0gVGhlIHByZWNpc2lvbiB0byB3aGljaCB0aGUgdmFsdWVzIG11c3QgbWF0Y2guCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdHJ1ZSBvciBmYWxzZS4KICAgICAgICAgKi8KICAgICAgICBhcHByb3hFcXVhbChvdGhlciwgcHJlY2lzaW9uID0gTnVtYmVyLkVQU0lMT04pIHsKICAgICAgICAgICAgcmV0dXJuIE1hdGguYWJzKHRoaXMueCAtIG90aGVyLngpIDwgcHJlY2lzaW9uICYmIE1hdGguYWJzKHRoaXMueSAtIG90aGVyLnkpIDwgcHJlY2lzaW9uOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBBZGRzIG90aGVyIHRvIHRoaXMgVmVjMiBhbmQgcmV0dXJucyB0aGUgcmVzdWx0IGFzIGEgbmV3IFZlYzIuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgVmVjMiB0byBhZGQuCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYSBuZXcgVmVjMi4KICAgICAgICAgKi8KICAgICAgICBhZGQob3RoZXIpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMyKHRoaXMueCArIG90aGVyLngsIHRoaXMueSArIG90aGVyLnkpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBBZGRzIGEgVmVjMiB0byB0aGlzIFZlYzIuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgVmVjMiB0byBhZGQuCiAgICAgICAgICovCiAgICAgICAgYWRkSW5QbGFjZShvdGhlcikgewogICAgICAgICAgICB0aGlzLnggKz0gb3RoZXIueDsKICAgICAgICAgICAgdGhpcy55ICs9IG90aGVyLnk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFN1YnRyYWN0cyBhIFZlYzIgZnJvbSB0aGlzIFZlYzIgYW5kIHJldHVybnMgdGhlIHJlc3VsdCBhcyBhIG5ldyBWZWMyLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIFZlYzIgdG8gc3VidHJhY3QuCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYSBuZXcgVmVjMi4KICAgICAgICAgKi8KICAgICAgICBzdWJ0cmFjdChvdGhlcikgewogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzIodGhpcy54IC0gb3RoZXIueCwgdGhpcy55IC0gb3RoZXIueSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFN1YnRyYWN0cyBhIFZlYzIgZnJvbSB0aGlzIFZlYzIuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgVmVjMiB0byBzdWJ0cmFjdC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBWZWMyLgogICAgICAgICAqLwogICAgICAgIHN1YnRyYWN0SW5QbGFjZShvdGhlcikgewogICAgICAgICAgICB0aGlzLnggLT0gb3RoZXIueDsKICAgICAgICAgICAgdGhpcy55IC09IG90aGVyLnk7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTY2FsZXMgdGhpcyBWZWMyIGJ5IHNjYWxhciBhbmQgcmV0dXJucyB0aGUgcmVzdWx0IGFzIGEgbmV3IFZlYzIuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gc2NhbGFyIC0gVGhlIHNjYWxhciB2YWx1ZS4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBWZWMyLgogICAgICAgICAqLwogICAgICAgIHNjYWxlKHNjYWxhcikgewogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzIodGhpcy54ICogc2NhbGFyLCB0aGlzLnkgKiBzY2FsYXIpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTY2FsZXMgdGhpcyBWZWMyIGJ5IHNjYWxhci4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBzY2FsYXIgLSBUaGUgc2NhbGFyIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHNjYWxlSW5QbGFjZShzY2FsYXIpIHsKICAgICAgICAgICAgdGhpcy54ICo9IHNjYWxhcjsKICAgICAgICAgICAgdGhpcy55ICo9IHNjYWxhcjsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogSW52ZXJ0cyB0aGlzIFZlYzIgYW5kIHJldHVybnMgdGhlIHJlc3VsdCBhcyBhIG5ldyBWZWMyLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYSBuZXcgVmVjMi4KICAgICAgICAgKi8KICAgICAgICBpbnZlcnQoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjMigxLjAgLyB0aGlzLngsIDEuMCAvIHRoaXMueSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEludmVydHMgdGhpcyBWZWMyLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgaW52ZXJ0SW5QbGFjZSgpIHsKICAgICAgICAgICAgdGhpcy54ID0gMS4wIC8gdGhpcy54OwogICAgICAgICAgICB0aGlzLnkgPSAxLjAgLyB0aGlzLnk7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBNdWx0aXBsaWVzIGEgVmVjMiB3aXRoIHRoaXMgVmVjMiBhbmQgcmV0dXJucyB0aGUgcmVzdWx0IGFzIGEgbmV3IFZlYzIuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgVmVjMiB0byBtdWx0aXBseSB3aXRoLgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGEgbmV3IFZlYzIuCiAgICAgICAgICovCiAgICAgICAgbXVsdGlwbHkob3RoZXIpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMyKHRoaXMueCAqIG90aGVyLngsIHRoaXMueSAqIG90aGVyLnkpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBNdWx0aXBsaWVzIGEgVmVjMiB3aXRoIHRoaXMgVmVjMi4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBvdGhlciBWZWMyIHRvIG11bHRpcGx5IHdpdGguCiAgICAgICAgICovCiAgICAgICAgbXVsdGlwbHlJblBsYWNlKG90aGVyKSB7CiAgICAgICAgICAgIHRoaXMueCAqPSBvdGhlci54OwogICAgICAgICAgICB0aGlzLnkgKj0gb3RoZXIueTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBsZW5ndGggb2YgdGhpcyBWZWMyLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIGxlbmd0aCBzcXVhcmVkLgogICAgICAgICAqLwogICAgICAgIGxlbmd0aFNxdWFyZWQoKSB7CiAgICAgICAgICAgIGNvbnN0IHggPSB0aGlzLl9fZGF0YVswXTsKICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMuX19kYXRhWzFdOwogICAgICAgICAgICByZXR1cm4geCAqIHggKyB5ICogeTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2FsY3VsYXRlcyB0aGUgbGVuZ3RoIG9mIHRoaXMgVmVjMi4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBsZW5ndGguCiAgICAgICAgICovCiAgICAgICAgbGVuZ3RoKCkgewogICAgICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMubGVuZ3RoU3F1YXJlZCgpKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2FsY3VsYXRlcyB0aGUgZGlzdGFuY2UgdG8gYW5vdGhlciB2ZWN0b3IuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgdmFsdWUuCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIGRpc3RhbmNlIGJldHdlZW4gdmVjdG9ycy4KICAgICAgICAgKi8KICAgICAgICBkaXN0YW5jZVRvKG90aGVyKSB7CiAgICAgICAgICAgIGNvbnN0IHggPSB0aGlzLl9fZGF0YVswXSAtIG90aGVyLng7CiAgICAgICAgICAgIGNvbnN0IHkgPSB0aGlzLl9fZGF0YVsxXSAtIG90aGVyLnk7CiAgICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIE5vcm1hbGl6ZXMgdGhlIFZlYzIgYW5kIHJldHVybnMgaXQgYXMgYSBuZXcgVmVjMi4KICAgICAgICAgKiBNdWx0aXBsaWVzIGNvb3JkaW5hdGVzIHZhbHVlIGJ5IHRoZSBpbnZlcnNlIG9mIHRoZSB2ZWN0b3IgbGVuZ3RoLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIFZlYzIgbm9ybWFsaXplZC4KICAgICAgICAgKi8KICAgICAgICBub3JtYWxpemUoKSB7CiAgICAgICAgICAgIGNvbnN0IHggPSB0aGlzLl9fZGF0YVswXTsKICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMuX19kYXRhWzFdOwogICAgICAgICAgICBsZXQgbGVuID0geCAqIHggKyB5ICogeTsKICAgICAgICAgICAgaWYgKGxlbiA8IE51bWJlci5FUFNJTE9OKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFZlYzIoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBUT0RPOiBldmFsdWF0ZSB1c2Ugb2YgZ2xtX2ludnNxcnQgaGVyZT8KICAgICAgICAgICAgbGVuID0gMSAvIE1hdGguc3FydChsZW4pOwogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzIoeCAqIGxlbiwgeSAqIGxlbik7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIE5vcm1hbGl6ZXMgdGhpcyBWZWMyIG11bHRpcGx5aW5nIGNvb3JkaW5hdGUgdmFsdWVzIGJ5IHRoZSBpbnZlcnNlIG9mIHRoZSB2ZWN0b3IgbGVuZ3RoLgogICAgICAgICAqLwogICAgICAgIG5vcm1hbGl6ZUluUGxhY2UoKSB7CiAgICAgICAgICAgIGNvbnN0IHggPSB0aGlzLl9fZGF0YVswXTsKICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMuX19kYXRhWzFdOwogICAgICAgICAgICBsZXQgbGVuID0geCAqIHggKyB5ICogeTsKICAgICAgICAgICAgaWYgKGxlbiA8IE51bWJlci5FUFNJTE9OKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGVuID0gMSAvIE1hdGguc3FydChsZW4pOwogICAgICAgICAgICB0aGlzLnNldCh4ICogbGVuLCB5ICogbGVuKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2FsY3VsYXRlcyB0aGUgZG90IHByb2R1Y3Qgb2YgdGhpcyBWZWMyIGFnYWluc3QgYW5vdGhlciBWZWMyLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIFZlYzIgdG8gY29tcGFyZSB3aXRoLgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBkb3QgcHJvZHVjdC4KICAgICAgICAgKi8KICAgICAgICBkb3Qob3RoZXIpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMueCAqIG90aGVyLnggKyB0aGlzLnkgKiBvdGhlci55OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDYWxjdWxhdGVzIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHRoaXMgVmVjMiBhZ2FpbnN0IGFub3RoZXIgVmVjMi4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBvdGhlciBWZWMyIHRvIGNvbXBhcmUgd2l0aC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgY3Jvc3MgcHJvZHVjdC4KICAgICAgICAgKi8KICAgICAgICBjcm9zcyhvdGhlcikgewogICAgICAgICAgICAvLyBqdXN0IGNhbGN1bGF0ZSB0aGUgei1jb21wb25lbnQKICAgICAgICAgICAgcmV0dXJuIHRoaXMueCAqIG90aGVyLnkgLSB0aGlzLnkgKiBvdGhlci54OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSBhbmdsZSBiZXR3ZWVuIHRoaXMgVmVjMiBhbmQgb3RoZXIgYXNzdW1pbmcgYm90aCBhcmUgbm9ybWFsaXplZCB2ZWN0b3JzLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIFZlYzIgdG8gY29tcGFyZSB3aXRoLgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBhbmdsZSBpbiByYWRpYW5zLgogICAgICAgICAqLwogICAgICAgIGFuZ2xlVG8ob3RoZXIpIHsKICAgICAgICAgICAgY29uc3QgY29zaW5lID0gdGhpcy5ub3JtYWxpemUoKS5kb3Qob3RoZXIubm9ybWFsaXplKCkpOwogICAgICAgICAgICBpZiAoY29zaW5lID4gMS4wKQogICAgICAgICAgICAgICAgcmV0dXJuIDAuMDsKICAgICAgICAgICAgZWxzZSBpZiAoY29zaW5lIDwgLTEuMCkKICAgICAgICAgICAgICAgIHJldHVybiBNYXRoLlBJOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5hY29zKGNvc2luZSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIGFuZ2xlIGJldHdlZW4gdGhpcyBWZWMyIGFuZCBvdGhlci4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBvdGhlciBWZWMyIHRvIGNvbXBhcmUgd2l0aC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgYW5nbGUgaW4gcmFkaWFucy4KICAgICAgICAgKi8KICAgICAgICBzaWduZWRBbmdsZVRvKG90aGVyKSB7CiAgICAgICAgICAgIGNvbnN0IGFuZ2xlID0gdGhpcy5hbmdsZVRvKG90aGVyKTsKICAgICAgICAgICAgaWYgKHRoaXMuY3Jvc3Mob3RoZXIpIDwgMC4wKQogICAgICAgICAgICAgICAgcmV0dXJuIC1hbmdsZTsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgcmV0dXJuIGFuZ2xlOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSb3RhdGVzIGEgVmVjMiBpbiBhIGNsb2Nrd2lzZSBkaXJlY3Rpb24gYW5kIHJldHVybnMgYSBuZXcgcm90YXRlZCBWZWMyLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGFuZ2xlIC0gVGhlIGFuZ2xlIG9mIHJvdGF0aW9uLgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSByb3RhdGVkIHZlY3Rvci4KICAgICAgICAgKi8KICAgICAgICByb3RhdGUoYW5nbGUpIHsKICAgICAgICAgICAgY29uc3QgY29zQSA9IE1hdGguY29zKGFuZ2xlKTsKICAgICAgICAgICAgY29uc3Qgc2luQSA9IE1hdGguc2luKGFuZ2xlKTsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMyKHRoaXMueCAqIGNvc0EgLSB0aGlzLnkgKiBzaW5BLCB0aGlzLnggKiBzaW5BICsgdGhpcy55ICogY29zQSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFBlcmZvcm1zIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0aGlzIFZlYzIgYW5kIG90aGVyIFZlYzIuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgVmVjMiB0byBpbnRlcnBvbGF0ZSBiZXR3ZWVuLgogICAgICAgICAqIEBwYXJhbSB0IC0gSW50ZXJwb2xhdGlvbiBhbW91bnQgYmV0d2VlbiB0aGUgdHdvIGlucHV0cy4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBWZWMyLgogICAgICAgICAqLwogICAgICAgIGxlcnAob3RoZXIsIHQpIHsKICAgICAgICAgICAgY29uc3QgYXggPSB0aGlzLng7CiAgICAgICAgICAgIGNvbnN0IGF5ID0gdGhpcy55OwogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzIoYXggKyB0ICogKG90aGVyLnggLSBheCksIGF5ICsgdCAqIChvdGhlci55IC0gYXkpKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2VuZXJhdGVzIGEgcmFuZG9tIHZlY3RvciB3aXRoIHRoZSBnaXZlbiBzY2FsZS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBzY2FsZSAtIExlbmd0aCBvZiB0aGUgcmVzdWx0aW5nIHZlY3Rvci4gSWYgb21pdHRlZCwgYSB1bml0IHZlY3RvciB3aWxsIGJlIHJldHVybmVkLgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHNldFJhbmRvbURpcihzY2FsZSA9IDEuMCkgewogICAgICAgICAgICBjb25zdCByID0gTWF0aC5yYW5kb20oKSAqIDIuMCAqIE1hdGguUEk7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzBdID0gTWF0aC5jb3MocikgKiBzY2FsZTsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMV0gPSBNYXRoLnNpbihyKSAqIHNjYWxlOwogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmFuZG9taXplcyB0aGUgc2NhbGUgb2YgdGhpcyBWZWMyIGNvb3JkaW5hdGVzLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHNjYWxlIC0gVGhlIHNjYWxlIHZhbHVlLgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHNldFJhbmRvbShzY2FsZSA9IDEuMCkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVswXSA9IE1hdGgucmFuZG9tKCkgKiBzY2FsZTsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMV0gPSBNYXRoLnJhbmRvbSgpICogc2NhbGU7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDbG9uZXMgdGhpcyBWZWMyIGFuZCByZXR1cm5zIGEgbmV3IFZlYzIuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBWZWMyLgogICAgICAgICAqLwogICAgICAgIGNsb25lKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzIodGhpcy5fX2RhdGFbMF0sIHRoaXMuX19kYXRhWzFdKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyBjdXJyZW50IFZlYzIgZGF0YSBhcyBhcnJheS4gT2Z0ZW4gdXNlZCB0byBwYXNzIHR5cGVzIHRvIHRoZSBHUFUuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhcyBhbiBhcnJheS4KICAgICAgICAgKi8KICAgICAgICBhc0FycmF5KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX2RhdGE7CiAgICAgICAgfQogICAgICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgIC8vIFBlcnNpc3RlbmNlCiAgICAgICAgLyoqCiAgICAgICAgICogQ29udmVydHMgdGhpcyBWZWMzIHRvIGEgc3RyaW5nIGluIEpTT04gZm9ybWF0LgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgdG9TdHJpbmcoKSB7CiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuZXctY2FwCiAgICAgICAgICAgIHJldHVybiBTdHJpbmdGdW5jdGlvbnMuc3RyaW5naWZ5SlNPTldpdGhGaXhlZFByZWNpc2lvbih0aGlzLnRvSlNPTigpKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyBWZWMyIENsYXNzIGFzIGEgSlNPTiBvYmplY3QgZm9yIHBlcnNpc3RlbmNlLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFRoZSBqc29uIG9iamVjdC4KICAgICAgICAgKi8KICAgICAgICB0b0pTT04oKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICB4OiB0aGlzLngsCiAgICAgICAgICAgICAgICB5OiB0aGlzLnksCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBKU09OIG9iamVjdCB0byBzZXQgdGhlIHN0YXRlIG9mIHRoaXMgY2xhc3MuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gaiAtIFRoZSBqc29uIG9iamVjdC4KICAgICAgICAgKi8KICAgICAgICBmcm9tSlNPTihqKSB7CiAgICAgICAgICAgIHRoaXMueCA9IGoueDsKICAgICAgICAgICAgdGhpcy55ID0gai55OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBMb2FkcyB0aGUgc3RhdGUgb2YgdGhlIHZhbHVlIGZyb20gYSBiaW5hcnkgcmVhZGVyLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHJlYWRlciAtIFRoZSByZWFkZXIgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgcmVhZEJpbmFyeShyZWFkZXIpIHsKICAgICAgICAgICAgdGhpcy54ID0gcmVhZGVyLmxvYWRGbG9hdDMyKCk7CiAgICAgICAgICAgIHRoaXMueSA9IHJlYWRlci5sb2FkRmxvYXQzMigpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDYWxjdWxhdGUgdGhlIGludGVyc2VjdGlvbiBwb2ludCBvZiAyIDJkIGxpbmVzLCByZXR1cm5pbmcgdGhlIHBhcmFtZXRlcnMgdmFsdWVzIGZvciBlYWNoIGxpbmUuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gcDAgLSBUaGUgcG9pbnQgb2YgdGhlIGZpcnN0IGxpbmUKICAgICAgICAgKiBAcGFyYW0gZDAgLSBUaGUgZGlyZWN0aW9uIG9mIHRoZSBmaXJzdCBsaW5lCiAgICAgICAgICogQHBhcmFtIHAxIC0gVGhlIHBvaW50IG9mIHRoZSBzZWNvbmQgbGluZQogICAgICAgICAqIEBwYXJhbSBkMSAtIFRoZSBkaXJlY3Rpb24gb2YgdGhlIHNlY29uZCBsaW5lCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYW4gYXJyYXkgY29udGFpbmluZyAyIHBhcmFtZXRlciB2YWx1ZXMgZm9yIHRoZSAyIGxpbmVzLgogICAgICAgICAqLwogICAgICAgIHN0YXRpYyBpbnRlcnNlY3Rpb25PZkxpbmVzKHAxLCBwMiwgcDMsIHA0KSB7CiAgICAgICAgICAgIC8vIGh0dHBzOi8vZGlyYXNrLmNvbS9wb3N0cy9KYXZhU2NyaXB0LWhvdy10by1jYWxjdWxhdGUtaW50ZXJzZWN0aW9uLXBvaW50LW9mLXR3by1saW5lcy1mb3ItZ2l2ZW4tNC1wb2ludHMtVmp2bkFqCiAgICAgICAgICAgIC8vIGRvd24gcGFydCBvZiBpbnRlcnNlY3Rpb24gcG9pbnQgZm9ybXVsYQogICAgICAgICAgICBjb25zdCBkMSA9IChwMS54IC0gcDIueCkgKiAocDMueSAtIHA0LnkpOyAvLyAoeDEgLSB4MikgKiAoeTMgLSB5NCkKICAgICAgICAgICAgY29uc3QgZDIgPSAocDEueSAtIHAyLnkpICogKHAzLnggLSBwNC54KTsgLy8gKHkxIC0geTIpICogKHgzIC0geDQpCiAgICAgICAgICAgIGNvbnN0IGQgPSBkMSAtIGQyOwogICAgICAgICAgICBpZiAoZCA9PSAwKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyB1cHBlciBwYXJ0IG9mIGludGVyc2VjdGlvbiBwb2ludCBmb3JtdWxhCiAgICAgICAgICAgIGNvbnN0IHUxID0gcDEueCAqIHAyLnkgLSBwMS55ICogcDIueDsgLy8gKHgxICogeTIgLSB5MSAqIHgyKQogICAgICAgICAgICBjb25zdCB1NCA9IHAzLnggKiBwNC55IC0gcDMueSAqIHA0Lng7IC8vICh4MyAqIHk0IC0geTMgKiB4NCkKICAgICAgICAgICAgY29uc3QgdTJ4ID0gcDMueCAtIHA0Lng7IC8vICh4MyAtIHg0KQogICAgICAgICAgICBjb25zdCB1M3ggPSBwMS54IC0gcDIueDsgLy8gKHgxIC0geDIpCiAgICAgICAgICAgIGNvbnN0IHUyeSA9IHAzLnkgLSBwNC55OyAvLyAoeTMgLSB5NCkKICAgICAgICAgICAgY29uc3QgdTN5ID0gcDEueSAtIHAyLnk7IC8vICh5MSAtIHkyKQogICAgICAgICAgICAvLyBpbnRlcnNlY3Rpb24gcG9pbnQgZm9ybXVsYQogICAgICAgICAgICBjb25zdCBweCA9ICh1MSAqIHUyeCAtIHUzeCAqIHU0KSAvIGQ7CiAgICAgICAgICAgIGNvbnN0IHB5ID0gKHUxICogdTJ5IC0gdTN5ICogdTQpIC8gZDsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMyKHB4LCBweSk7CiAgICAgICAgfQogICAgICAgIGlzVmFsaWQoKSB7CiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiB0aGlzLl9fZGF0YSkgewogICAgICAgICAgICAgICAgaWYgKHYgPT0gSW5maW5pdHkgfHwgaXNOYU4odikpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJlcHJlc2VudHMgYSB0aHJlZSBkaW1lbnNpb25hbCBjb29yZGluYXRlLCBzdWNoIGFzIDNEIHNjZW5lIHZhbHVlcywgb3IgbWVzaCB2ZXJ0ZXggcG9zaXRpb25zLgogICAgICoKICAgICAqIE1hdGggdHlwZXMgaW50ZXJuYWxseSBzdG9yZSB2YWx1ZXMgaW4ge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Zsb2F0MzJBcnJheXxGbG9hdDMyQXJyYXl9IGFuZAogICAgICogZXhwb3NlIGdldHRlcnMgYW5kIHNldHRlcnMgZm9yIHRoZSBjb21wb25lbnQgdmFsdWVzLgogICAgICovCiAgICBjbGFzcyBWZWMzIHsKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgVmVjMy4KICAgICAgICAgKgogICAgICAgICAqIFRoZSB0eXBlIG9mIHZhbHVlcyBvZiB0aGUgYCh4LCB5LCB6KWAgY29vcmRpbmF0ZXMgY2FuIGJlIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9GbG9hdDMyQXJyYXl8RmxvYXQzMkFycmF5fSwKICAgICAgICAgKiB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvVWludDMyQXJyYXl8VWludDMyQXJyYXl9LAogICAgICAgICAqIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9JbnQzMkFycmF5fEludDMyQXJyYXl9IGFuZAogICAgICAgICAqIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lcy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jaWEvT2JqZXRvc19nbG9iYWxlcy9BcnJheUJ1ZmZlcnxBcnJheUJ1ZmZlcn0uCiAgICAgICAgICoKICAgICAgICAgKiBZb3UgY2FuIGFsc28gcGFzcyBvbmUgSlNPTiBvYmplY3QgcGFyYW1ldGVyLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHggLSBUaGUgeCB2YWx1ZS4gRGVmYXVsdCBpcyAwLgogICAgICAgICAqIEBwYXJhbSB5IC0gVGhlIHkgdmFsdWUuIERlZmF1bHQgaXMgMC4KICAgICAgICAgKiBAcGFyYW0geiAtIFRoZSB6IHZhbHVlLiBEZWZhdWx0IGlzIDAuCiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IoeCA9IDAsIHkgPSAwLCB6ID0gMCkgewogICAgICAgICAgICBpZiAoeCBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSB8fCB4IGluc3RhbmNlb2YgVWludDMyQXJyYXkpIHsKICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhID0geDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmICh4IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgZGVwcmVjYXRlZCwgcGxlYXNlIHVzZSBuZXcgVmVjMyhuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlciwgYnl0ZU9mZnNldCwgMykpYCk7CiAgICAgICAgICAgICAgICBjb25zdCBidWZmZXIgPSB4OwogICAgICAgICAgICAgICAgY29uc3QgYnl0ZU9mZnNldCA9IHk7CiAgICAgICAgICAgICAgICB0aGlzLl9fZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyLCBieXRlT2Zmc2V0LCAzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmICh0eXBlb2YgeCA9PSAnbnVtYmVyJyAmJiB0eXBlb2YgeSA9PSAnbnVtYmVyJyAmJiB0eXBlb2YgeiA9PSAnbnVtYmVyJykgewogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGEgPSBuZXcgRmxvYXQzMkFycmF5KDMpOwogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGFbMF0gPSB4OwogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGFbMV0gPSB5OwogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGFbMl0gPSB6OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKHggIT0gbnVsbCAmJiB0eXBlb2YgeCA9PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGEgPSBuZXcgRmxvYXQzMkFycmF5KDMpOwogICAgICAgICAgICAgICAgdGhpcy5mcm9tSlNPTih4KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhID0gbmV3IEZsb2F0MzJBcnJheSgzKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIGB4YCBjb21wb25lbnQuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgeCBjb21wb25lbnQuCiAgICAgICAgICovCiAgICAgICAgZ2V0IHgoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YVswXTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0dGVyIGZvciBgeGAgY29tcG9uZW50LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHZhbCAtIFRoZSB2YWwgcGFyYW0uCiAgICAgICAgICovCiAgICAgICAgc2V0IHgodmFsKSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzBdID0gdmFsOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIGB5YCBjb21wb25lbnQuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgeSBjb21wb25lbnQuCiAgICAgICAgICovCiAgICAgICAgZ2V0IHkoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YVsxXTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0dGVyIGZvciBgeWAgY29tcG9uZW50LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHZhbCAtIFRoZSB2YWwgcGFyYW0uCiAgICAgICAgICovCiAgICAgICAgc2V0IHkodmFsKSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzFdID0gdmFsOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIGB6YCBjb21wb25lbnQuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgeiBjb21wb25lbnQuCiAgICAgICAgICovCiAgICAgICAgZ2V0IHooKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YVsyXTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0dGVyIGZvciBgemAgY29tcG9uZW50LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHZhbCAtIFRoZSB2YWwgcGFyYW0uCiAgICAgICAgICovCiAgICAgICAgc2V0IHoodmFsKSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzJdID0gdmFsOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIGB4eWAgc3dpenplbC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSB4eSBjb21wb25lbnRzIGFzIGEgVmVjMi4KICAgICAgICAgKi8KICAgICAgICBnZXQgeHkoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjMih0aGlzLl9fZGF0YVswXSwgdGhpcy5fX2RhdGFbMV0pOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIGB5emAgc3dpenplbC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSB5eiBjb21wb25lbnRzIGFzIGEgVmVjMi4KICAgICAgICAgKi8KICAgICAgICBnZXQgeXooKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjMih0aGlzLl9fZGF0YVsxXSwgdGhpcy5fX2RhdGFbMl0pOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZnJvbSBzY2FsYXIgY29tcG9uZW50cy4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB4IC0gVGhlIHggY29tcG9uZW50LgogICAgICAgICAqIEBwYXJhbSB5IC0gVGhlIHkgY29tcG9uZW50LgogICAgICAgICAqIEBwYXJhbSB6IC0gVGhlIHkgY29tcG9uZW50LgogICAgICAgICAqLwogICAgICAgIHNldCh4LCB5LCB6KSB7CiAgICAgICAgICAgIHRoaXMueCA9IHg7CiAgICAgICAgICAgIHRoaXMueSA9IHkgIT09IHVuZGVmaW5lZCA/IHkgOiB4OwogICAgICAgICAgICB0aGlzLnogPSB6ICE9PSB1bmRlZmluZWQgPyB6IDogeDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0cyB0aGUgc3RhdGUgb2YgYSBWZWMzIE9iamVjdC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBmbG9hdDMyQXJyYXkgLSBUaGUgZmxvYXQzMkFycmF5IHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHNldERhdGFBcnJheShmbG9hdDMyQXJyYXkpIHsKICAgICAgICAgICAgdGhpcy5fX2RhdGEgPSBmbG9hdDMyQXJyYXk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHMgdGhlIHN0YXRlIG9mIGEgVmVjMyBPYmplY3QgZnJvbSBhbm90aGVyIFZlYzMuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgVmVjMyB0byBzZXQgZnJvbS4KICAgICAgICAgKi8KICAgICAgICBzZXRGcm9tT3RoZXIob3RoZXIpIHsKICAgICAgICAgICAgdGhpcy54ID0gb3RoZXIueDsKICAgICAgICAgICAgdGhpcy55ID0gb3RoZXIueTsKICAgICAgICAgICAgdGhpcy56ID0gb3RoZXIuejsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2hlY2tzIGlmIHRoZSBjb29yZGluYXRlcyBvZiB0aGlzIFZlYzMgYXJlIDAgMCAwLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYHRydWVgIGlmIHRoZSBjb29yZGluYXRlcyBhcmUoMCwgMCwgMCksIG90aGVyd2lzZSwgYGZhbHNlYC4KICAgICAgICAgKi8KICAgICAgICBpc051bGwoKSB7CiAgICAgICAgICAgIHJldHVybiBNYXRoLmFicyh0aGlzLngpIDwgTnVtYmVyLkVQU0lMT04gJiYgTWF0aC5hYnModGhpcy55KSA8IE51bWJlci5FUFNJTE9OICYmIE1hdGguYWJzKHRoaXMueikgPCBOdW1iZXIuRVBTSUxPTjsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2hlY2tzIGlmIHRoZSBjb29yZGluYXRlcyBvZiB0aGlzIFZlYzMgYXJlIDEgMSAxLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYHRydWVgIGlmIHRoZSBjb29yZGluYXRlcyBhcmUoMSwgMSwgMSksIG90aGVyd2lzZSwgYGZhbHNlYC4KICAgICAgICAgKi8KICAgICAgICBpczExMSgpIHsKICAgICAgICAgICAgcmV0dXJuIChNYXRoLmFicygxLjAgLSB0aGlzLngpIDwgTnVtYmVyLkVQU0lMT04gJiYKICAgICAgICAgICAgICAgIE1hdGguYWJzKDEuMCAtIHRoaXMueSkgPCBOdW1iZXIuRVBTSUxPTiAmJgogICAgICAgICAgICAgICAgTWF0aC5hYnMoMS4wIC0gdGhpcy56KSA8IE51bWJlci5FUFNJTE9OKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2hlY2tzIGlmIHRoaXMgVmVjMyBjb250YWlucyB0aGUgc2FtZSB2YWx1ZXMgYXMgdGhlIG90aGVyIFZlYzMuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgVmVjMyB0byBjb21wYXJlIHdpdGguCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIHRoZSBzYW1lLCBvdGhlcndpc2UsIGBmYWxzZWAuCiAgICAgICAgICovCiAgICAgICAgaXNFcXVhbChvdGhlcikgewogICAgICAgICAgICByZXR1cm4gdGhpcy54ID09IG90aGVyLnggJiYgdGhpcy55ID09IG90aGVyLnkgJiYgdGhpcy56ID09IG90aGVyLno7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENoZWNrcyBpZiB0aGlzIFZlYzIgaXMgZGlmZmVyZW50IGZyb20gYW5vdGhlciBWZWMyLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIFZlYzMgdG8gY29tcGFyZSB3aXRoLgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgVmVjM3MgYXJlIGRpZmZlcmVudCwgb3RoZXJ3aXNlLCBgZmFsc2VgLgogICAgICAgICAqLwogICAgICAgIG5vdEVxdWFsKG90aGVyKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnggIT0gb3RoZXIueCAmJiB0aGlzLnkgIT0gb3RoZXIueSAmJiB0aGlzLnogIT0gb3RoZXIuejsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgVmVjMiBpcyBhcHByb3hpbWF0ZWx5IHRoZSBzYW1lIGFzIG90aGVyLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIFZlYzMgdG8gY29tcGFyZSB3aXRoLgogICAgICAgICAqIEBwYXJhbSBwcmVjaXNpb24gLSBUaGUgcHJlY2lzaW9uIHRvIHdoaWNoIHRoZSB2YWx1ZXMgbXVzdCBtYXRjaC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0cnVlIG9yIGZhbHNlLgogICAgICAgICAqLwogICAgICAgIGFwcHJveEVxdWFsKG90aGVyLCBwcmVjaXNpb24gPSBOdW1iZXIuRVBTSUxPTikgewogICAgICAgICAgICByZXR1cm4gKE1hdGguYWJzKHRoaXMueCAtIG90aGVyLngpIDwgcHJlY2lzaW9uICYmCiAgICAgICAgICAgICAgICBNYXRoLmFicyh0aGlzLnkgLSBvdGhlci55KSA8IHByZWNpc2lvbiAmJgogICAgICAgICAgICAgICAgTWF0aC5hYnModGhpcy56IC0gb3RoZXIueikgPCBwcmVjaXNpb24pOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBBZGRzIG90aGVyIHRvIHRoaXMgVmVjMyBhbmQgcmV0dXJuIHRoZSByZXN1bHQgYXMgYSBuZXcgVmVjMy4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBvdGhlciBWZWMzIHRvIGFkZC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBWZWMzLgogICAgICAgICAqLwogICAgICAgIGFkZChvdGhlcikgewogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzModGhpcy54ICsgb3RoZXIueCwgdGhpcy55ICsgb3RoZXIueSwgdGhpcy56ICsgb3RoZXIueik7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEFkZHMgb3RoZXIgdG8gdGhpcyBWZWMzLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIFZlYzMgdG8gYWRkLgogICAgICAgICAqLwogICAgICAgIGFkZEluUGxhY2Uob3RoZXIpIHsKICAgICAgICAgICAgdGhpcy54ICs9IG90aGVyLng7CiAgICAgICAgICAgIHRoaXMueSArPSBvdGhlci55OwogICAgICAgICAgICB0aGlzLnogKz0gb3RoZXIuejsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU3VidHJhY3RzIG90aGVyIGZyb20gdGhpcyBWZWMzIGFuZCByZXR1cm5zIHRoZSByZXN1bHQgYXMgYSBuZXcgVmVjMy4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBvdGhlciBWZWMzIHRvIHN1YnRyYWN0LgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGEgbmV3IFZlYzMuCiAgICAgICAgICovCiAgICAgICAgc3VidHJhY3Qob3RoZXIpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMueCAtIG90aGVyLngsIHRoaXMueSAtIG90aGVyLnksIHRoaXMueiAtIG90aGVyLnopOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTdWJ0cmFjdHMgb3RoZXIgZnJvbSB0aGlzIFZlYzMuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgVmVjMyB0byBzdWJ0cmFjdC4KICAgICAgICAgKi8KICAgICAgICBzdWJ0cmFjdEluUGxhY2Uob3RoZXIpIHsKICAgICAgICAgICAgdGhpcy54IC09IG90aGVyLng7CiAgICAgICAgICAgIHRoaXMueSAtPSBvdGhlci55OwogICAgICAgICAgICB0aGlzLnogLT0gb3RoZXIuejsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogTXVsdGlwbGllcyB0d28gVmVjM3MgYW5kIHJldHVybnMgdGhlIHJlc3VsdCBhcyBhIG5ldyBWZWMzLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIFZlYzMgdG8gbXVsdGlwbHkgd2l0aC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBWZWMzLgogICAgICAgICAqLwogICAgICAgIG11bHRpcGx5KG90aGVyKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjMyh0aGlzLnggKiBvdGhlci54LCB0aGlzLnkgKiBvdGhlci55LCB0aGlzLnogKiBvdGhlci56KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogTXVsdGlwbGllcyB0d28gVmVjM3MuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgVmVjMyB0byBtdWx0aXBseSB3aXRoLgogICAgICAgICAqLwogICAgICAgIG11bHRpcGx5SW5QbGFjZShvdGhlcikgewogICAgICAgICAgICB0aGlzLnggKj0gb3RoZXIueDsKICAgICAgICAgICAgdGhpcy55ICo9IG90aGVyLnk7CiAgICAgICAgICAgIHRoaXMueiAqPSBvdGhlci56OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBEaXZpZGVzIHR3byBWZWMzcyBhbmQgcmV0dXJucyB0aGUgcmVzdWx0IGFzIGEgbmV3IFZlYzMuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gdmVjMyAtIFRoZSBvdGhlciBWZWMzIHRvIGRpdmlkZSBieS4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBWZWMzLgogICAgICAgICAqLwogICAgICAgIGRpdmlkZSh2ZWMzKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjMyh0aGlzLnggLyB2ZWMzLngsIHRoaXMueSAvIHZlYzMueSwgdGhpcy56IC8gdmVjMy56KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogRGl2aWRlcyB0d28gVmVjM3MuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gdmVjMyAtIFRoZSBvdGhlciBWZWMzIHRvIGRpdmlkZSBieS4KICAgICAgICAgKi8KICAgICAgICBkaXZpZGVJblBsYWNlKHZlYzMpIHsKICAgICAgICAgICAgdGhpcy54IC89IHZlYzMueDsKICAgICAgICAgICAgdGhpcy55IC89IHZlYzMueTsKICAgICAgICAgICAgdGhpcy56IC89IHZlYzMuejsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2NhbGVzIHRoaXMgVmVjMyBieSBzY2FsYXIgYW5kIHJldHVybnMgdGhlIHJlc3VsdCBhcyBhIG5ldyBWZWMzLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHNjYWxhciAtIFRoZSBzY2FsYXIgdmFsdWUuCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYSBuZXcgVmVjMy4KICAgICAgICAgKi8KICAgICAgICBzY2FsZShzY2FsYXIpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMueCAqIHNjYWxhciwgdGhpcy55ICogc2NhbGFyLCB0aGlzLnogKiBzY2FsYXIpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTY2FsZXMgdGhpcyBWZWMzIGJ5IHNjYWxhci4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBzY2FsYXIgLSBUaGUgc2NhbGFyIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHNjYWxlSW5QbGFjZShzY2FsYXIpIHsKICAgICAgICAgICAgdGhpcy54ICo9IHNjYWxhcjsKICAgICAgICAgICAgdGhpcy55ICo9IHNjYWxhcjsKICAgICAgICAgICAgdGhpcy56ICo9IHNjYWxhcjsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogTmVnYXRlcyB0aGlzIFZlYzMgKHggPSAteCwgeSA9IC15IGFuZCB6ID0gLXopLCBidXQgcmV0dXJucyB0aGUgcmVzdWx0IGFzIGEgbmV3IFZlYzMuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBWZWMzLgogICAgICAgICAqLwogICAgICAgIG5lZ2F0ZSgpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMzKC10aGlzLngsIC10aGlzLnksIC10aGlzLnopOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSBpbnZlcnNlIG9mIHRoaXMgVmVjMywgYnV0IHJldHVybnMuIHRoZSByZXN1bHQgYXMgYSBuZXcgVmVjMwogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYSBuZXcgVmVjMy4KICAgICAgICAgKi8KICAgICAgICBpbnZlcnNlKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzMoMS4wIC8gdGhpcy54LCAxLjAgLyB0aGlzLnksIDEuMCAvIHRoaXMueik7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENhbGN1bGF0ZXMgdGhlIHNxdWFyZWQgbGVuZ3RoIG9mIHRoaXMgVmVjMy4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBsZW5ndGguCiAgICAgICAgICovCiAgICAgICAgbGVuZ3RoU3F1YXJlZCgpIHsKICAgICAgICAgICAgY29uc3QgeCA9IHRoaXMuX19kYXRhWzBdOwogICAgICAgICAgICBjb25zdCB5ID0gdGhpcy5fX2RhdGFbMV07CiAgICAgICAgICAgIGNvbnN0IHogPSB0aGlzLl9fZGF0YVsyXTsKICAgICAgICAgICAgcmV0dXJuIHggKiB4ICsgeSAqIHkgKyB6ICogejsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2FsY3VsYXRlcyB0aGUgbGVuZ3RoIG9mIHRoaXMgVmVjMy4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBsZW5ndGguCiAgICAgICAgICovCiAgICAgICAgbGVuZ3RoKCkgewogICAgICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMubGVuZ3RoU3F1YXJlZCgpKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2FsY3VsYXRlcyB0aGUgZGlzdGFuY2UgdG8gYW5vdGhlciBWZWMzLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIFZlYzMgdG8gY2FsY3VsYXRlIHRoZSBkaXN0YW5jZSB0by4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgZGlzdGFuY2UgYmV0d2VlbiB2ZWN0b3JzLgogICAgICAgICAqLwogICAgICAgIGRpc3RhbmNlVG8ob3RoZXIpIHsKICAgICAgICAgICAgY29uc3QgeCA9IHRoaXMuX19kYXRhWzBdIC0gb3RoZXIueDsKICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMuX19kYXRhWzFdIC0gb3RoZXIueTsKICAgICAgICAgICAgY29uc3QgeiA9IHRoaXMuX19kYXRhWzJdIC0gb3RoZXIuejsKICAgICAgICAgICAgcmV0dXJuIE1hdGguc3FydCh4ICogeCArIHkgKiB5ICsgeiAqIHopOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBOb3JtYWxpemVzIHRoZSBWZWMzIGFuZCByZXR1cm5zIGl0IGFzIGEgbmV3IFZlYzMuCiAgICAgICAgICogTXVsdGlwbGllcyBjb29yZGluYXRlcyB2YWx1ZSBieSB0aGUgaW52ZXJzZSBvZiB0aGUgdmVjdG9yIGxlbmd0aC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBWZWMzIG5vcm1hbGl6ZWQuCiAgICAgICAgICovCiAgICAgICAgbm9ybWFsaXplKCkgewogICAgICAgICAgICBsZXQgbGVuID0gdGhpcy5fX2RhdGFbMF0gKiB0aGlzLl9fZGF0YVswXSArIHRoaXMuX19kYXRhWzFdICogdGhpcy5fX2RhdGFbMV0gKyB0aGlzLl9fZGF0YVsyXSAqIHRoaXMuX19kYXRhWzJdOwogICAgICAgICAgICBpZiAobGVuIDwgTnVtYmVyLkVQU0lMT04pIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVmVjMygpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFRPRE86IGV2YWx1YXRlIHVzZSBvZiBnbG1faW52c3FydCBoZXJlPwogICAgICAgICAgICBsZW4gPSAxLjAgLyBNYXRoLnNxcnQobGVuKTsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMuX19kYXRhWzBdICogbGVuLCB0aGlzLl9fZGF0YVsxXSAqIGxlbiwgdGhpcy5fX2RhdGFbMl0gKiBsZW4pOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBOb3JtYWxpemVzIHRoaXMgVmVjMyBtdWx0aXBseWluZyBjb29yZGluYXRlIHZhbHVlcyBieSB0aGUgaW52ZXJzZSBvZiB0aGUgdmVjdG9yIGxlbmd0aC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIG5vcm1hbGl6ZUluUGxhY2UoKSB7CiAgICAgICAgICAgIGxldCBsZW4gPSB0aGlzLl9fZGF0YVswXSAqIHRoaXMuX19kYXRhWzBdICsgdGhpcy5fX2RhdGFbMV0gKiB0aGlzLl9fZGF0YVsxXSArIHRoaXMuX19kYXRhWzJdICogdGhpcy5fX2RhdGFbMl07CiAgICAgICAgICAgIGlmIChsZW4gPCBOdW1iZXIuRVBTSUxPTikgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxlbiA9IE1hdGguc3FydChsZW4pOwogICAgICAgICAgICBjb25zdCB0bXAgPSAxLjAgLyBsZW47CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzBdICo9IHRtcDsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMV0gKj0gdG1wOwogICAgICAgICAgICB0aGlzLl9fZGF0YVsyXSAqPSB0bXA7CiAgICAgICAgICAgIHJldHVybiBsZW47CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBuZXcgVmVjMyB3aXRoIHRoZSBuZXcgY29vcmRpbmF0ZXMoY2FsY3VsYXRlZCB3aXRoIHRoaXMgVmVjMyBjb29yZGluYXRlcyBhbmQgdGhlIHNwZWNpZmllZCBsZW5ndGgpLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGxlbmd0aCAtIFRoZSBsZW5ndGggdmFsdWUuCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgcmVzaXplKGxlbmd0aCkgewogICAgICAgICAgICBjb25zdCBjdXJyTGVuID0gdGhpcy5fX2RhdGFbMF0gKiB0aGlzLl9fZGF0YVswXSArIHRoaXMuX19kYXRhWzFdICogdGhpcy5fX2RhdGFbMV0gKyB0aGlzLl9fZGF0YVsyXSAqIHRoaXMuX19kYXRhWzJdOwogICAgICAgICAgICBpZiAoY3VyckxlbiA8IE51bWJlci5FUFNJTE9OKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3Qgc2NsID0gbGVuZ3RoIC8gTWF0aC5zcXJ0KGN1cnJMZW4pOwogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzModGhpcy5fX2RhdGFbMF0gKiBzY2wsIHRoaXMuX19kYXRhWzFdICogc2NsLCB0aGlzLl9fZGF0YVsyXSAqIHNjbCk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIE1vZGlmaWVzIGN1cnJlbnQgY29vcmRpbmF0ZXMgdXNpbmcgdGhlIHNwZWNpZmllZCBsZW5ndGguCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gbGVuZ3RoIC0gVGhlIGxlbmd0aCB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICByZXNpemVJblBsYWNlKGxlbmd0aCkgewogICAgICAgICAgICBjb25zdCBjdXJyTGVuID0gdGhpcy5fX2RhdGFbMF0gKiB0aGlzLl9fZGF0YVswXSArIHRoaXMuX19kYXRhWzFdICogdGhpcy5fX2RhdGFbMV0gKyB0aGlzLl9fZGF0YVsyXSAqIHRoaXMuX19kYXRhWzJdOwogICAgICAgICAgICBpZiAoY3VyckxlbiA8IE51bWJlci5FUFNJTE9OKSB7CiAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3Qgc2NsID0gbGVuZ3RoIC8gTWF0aC5zcXJ0KGN1cnJMZW4pOwogICAgICAgICAgICB0aGlzLl9fZGF0YVswXSAqPSBzY2w7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzFdICo9IHNjbDsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMl0gKj0gc2NsOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDYWxjdWxhdGVzIHRoZSBkb3QgcHJvZHVjdCBvZiB0aGlzIFZlYzMgYWdhaW5zdCBhbm90aGVyIFZlYzMuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgVmVjMyB0byBjb21wYXJlIHdpdGguCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIGRvdCBwcm9kdWN0LgogICAgICAgICAqLwogICAgICAgIGRvdChvdGhlcikgewogICAgICAgICAgICByZXR1cm4gdGhpcy54ICogb3RoZXIueCArIHRoaXMueSAqIG90aGVyLnkgKyB0aGlzLnogKiBvdGhlci56OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDYWxjdWxhdGVzIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHR3byBWZWMzcyBhbmQgcmV0dXJucyB0aGUgcmVzdWx0IGFzIGEgbmV3IFZlYzMuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgVmVjMyB0byBjYWxjdWxhdGUgd2l0aC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgY3Jvc3MgcHJvZHVjdCBhcyBhIG5ldyBWZWMzLgogICAgICAgICAqLwogICAgICAgIGNyb3NzKG90aGVyKSB7CiAgICAgICAgICAgIGNvbnN0IGF4ID0gdGhpcy54OwogICAgICAgICAgICBjb25zdCBheSA9IHRoaXMueTsKICAgICAgICAgICAgY29uc3QgYXogPSB0aGlzLno7CiAgICAgICAgICAgIGNvbnN0IGJ4ID0gb3RoZXIueDsKICAgICAgICAgICAgY29uc3QgYnkgPSBvdGhlci55OwogICAgICAgICAgICBjb25zdCBieiA9IG90aGVyLno7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjMyhheSAqIGJ6IC0gYXogKiBieSwgYXogKiBieCAtIGF4ICogYnosIGF4ICogYnkgLSBheSAqIGJ4KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0cyB0aGUgYW5nbGUgYmV0d2VlbiB0aGlzIFZlYzMgYW5kIGIuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgVmVjMyB0byBjb21wYXJlIHdpdGguCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIGFuZ2xlIGluIHJhZGlhbnMuCiAgICAgICAgICovCiAgICAgICAgYW5nbGVUbyhvdGhlcikgewogICAgICAgICAgICBjb25zdCBjb3NpbmUgPSB0aGlzLmRvdChvdGhlcik7CiAgICAgICAgICAgIGlmIChjb3NpbmUgPiAxLjApIHsKICAgICAgICAgICAgICAgIHJldHVybiAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmV0dXJuIE1hdGguYWNvcyhjb3NpbmUpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFBlcmZvcm1zIGEgbGluZWFyIGludGVycG9sYXRpb24gYmV0d2VlbiB0aGlzIFZlYzMgYW5kIG90aGVyLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIFZlYzMgdG8gaW50ZXJwb2xhdGUgYmV0d2Vlbi4KICAgICAgICAgKiBAcGFyYW0gdCAtIEludGVycG9sYXRpb24gYW1vdW50IGJldHdlZW4gdGhlIHR3byBpbnB1dHMuCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYSBuZXcgVmVjMy4KICAgICAgICAgKi8KICAgICAgICBsZXJwKG90aGVyLCB0KSB7CiAgICAgICAgICAgIGNvbnN0IGF4ID0gdGhpcy54OwogICAgICAgICAgICBjb25zdCBheSA9IHRoaXMueTsKICAgICAgICAgICAgY29uc3QgYXogPSB0aGlzLno7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjMyhheCArIHQgKiAob3RoZXIueCAtIGF4KSwgYXkgKyB0ICogKG90aGVyLnkgLSBheSksIGF6ICsgdCAqIChvdGhlci56IC0gYXopKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyBhIG5ldyBWZWMzIHdob3NlIGNvbXBvbmVudCB2YWx1ZXMgYXJlIHRoZSBhYnMgb2YgdGhpcyBWZWMzcyBjb21wb25lbnQgdmFsdWVzLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYSBuZXcgVmVjMy4KICAgICAgICAgKi8KICAgICAgICBhYnMoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjMyhNYXRoLmFicyh0aGlzLngpLCBNYXRoLmFicyh0aGlzLnkpLCBNYXRoLmFicyh0aGlzLnopKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0cyB0aGUgdmVjdG9yIGEgcmFuZG9tIHZlY3RvciBvbiB0aGUgc3VyZmFjZSBvZiBhIHNwaGVyZSB3aXRoIHRoZSByYWRpdXMgb2YgdGhlIGdpdmVuIHNjYWxlIHZhbHVlLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHNjYWxlIC0gVGhlIHJhZGl1cyBvZiB0aGUgc3VyZmFjZSBzcGhlcmUuCiAgICAgICAgICogQHJldHVybiAtIFRoZSByYW5kb20gVmVjMy4KICAgICAgICAgKi8KICAgICAgICBzZXRSYW5kb21EaXIoc2NhbGUgPSAxLjApIHsKICAgICAgICAgICAgY29uc3QgciA9IE1hdGgucmFuZG9tKCkgKiAyLjAgKiBNYXRoLlBJOwogICAgICAgICAgICBjb25zdCB6ID0gTWF0aC5yYW5kb20oKSAqIDIuMCAtIDEuMDsKICAgICAgICAgICAgY29uc3QgelNjYWxlID0gTWF0aC5zcXJ0KDEuMCAtIHogKiB6KSAqIHNjYWxlOwogICAgICAgICAgICB0aGlzLl9fZGF0YVswXSA9IE1hdGguY29zKHIpICogelNjYWxlOwogICAgICAgICAgICB0aGlzLl9fZGF0YVsxXSA9IE1hdGguc2luKHIpICogelNjYWxlOwogICAgICAgICAgICB0aGlzLl9fZGF0YVsyXSA9IHogKiBzY2FsZTsKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEdlbmVyYXRlcyBhIHJhbmRvbSB2ZWN0b3IgYW55d2hlcmUgaW4gdGhlIHNwaGVyZSBkZWZpbmVkIGJ5IHRoZSBwcm92aWRlZCBzY2FsZSB2YWx1ZS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBzY2FsZSAtIFRoZSByYWRpdXMgb2YgdGhlIGJvdW5kaW5nIHNwaGVyZS4KICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJhbmRvbSBWZWMzLgogICAgICAgICAqLwogICAgICAgIHNldFJhbmRvbShzY2FsZSA9IDEuMCkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVswXSA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIHNjYWxlOwogICAgICAgICAgICB0aGlzLl9fZGF0YVsxXSA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIHNjYWxlOwogICAgICAgICAgICB0aGlzLl9fZGF0YVsyXSA9IChNYXRoLnJhbmRvbSgpIC0gMC41KSAqIHNjYWxlOwogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2xvbmVzIHRoaXMgVmVjMyBhbmQgcmV0dXJucyBhIG5ldyBWZWMzLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYSBuZXcgVmVjMy4KICAgICAgICAgKi8KICAgICAgICBjbG9uZSgpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMuX19kYXRhWzBdLCB0aGlzLl9fZGF0YVsxXSwgdGhpcy5fX2RhdGFbMl0pOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSB0eXBlIGFzIGFuIGFycmF5LiBPZnRlbiB1c2VkIHRvIHBhc3MgdHlwZXMgdG8gdGhlIEdQVS4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGFzIGFuIGFycmF5LgogICAgICAgICAqLwogICAgICAgIGFzQXJyYXkoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YTsgLy8gVE9ETzogcmV0dXJuIHR5cGUgKyBjYXN0IGlzIGEgdGVtcCBmaXgKICAgICAgICB9CiAgICAgICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAgICAgLy8gUGVyc2lzdGVuY2UKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFZlYzMgdG8gYSBzdHJpbmcgaW4gSlNPTiBmb3JtYXQuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICB0b1N0cmluZygpIHsKICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5ldy1jYXAKICAgICAgICAgICAgcmV0dXJuIFN0cmluZ0Z1bmN0aW9ucy5zdHJpbmdpZnlKU09OV2l0aEZpeGVkUHJlY2lzaW9uKHRoaXMudG9KU09OKCkpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBFbmNvZGVzIFZlYzMgQ2xhc3MgYXMgYSBKU09OIG9iamVjdCBmb3IgcGVyc2lzdGVuY2UuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIGpzb24gb2JqZWN0LgogICAgICAgICAqLwogICAgICAgIHRvSlNPTigpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHg6IHRoaXMueCwKICAgICAgICAgICAgICAgIHk6IHRoaXMueSwKICAgICAgICAgICAgICAgIHo6IHRoaXMueiwKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogRGVjb2RlcyBhIEpTT04gb2JqZWN0IHRvIHNldCB0aGUgc3RhdGUgb2YgdGhpcyBjbGFzcy4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBqIC0gVGhlIGpzb24gb2JqZWN0LgogICAgICAgICAqLwogICAgICAgIGZyb21KU09OKGopIHsKICAgICAgICAgICAgdGhpcy54ID0gai54OwogICAgICAgICAgICB0aGlzLnkgPSBqLnk7CiAgICAgICAgICAgIHRoaXMueiA9IGouejsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogTG9hZHMgdGhlIHN0YXRlIG9mIHRoZSB2YWx1ZSBmcm9tIGEgYmluYXJ5IHJlYWRlci4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgLSBUaGUgcmVhZGVyIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHJlYWRCaW5hcnkocmVhZGVyKSB7CiAgICAgICAgICAgIHRoaXMueCA9IHJlYWRlci5sb2FkRmxvYXQzMigpOwogICAgICAgICAgICB0aGlzLnkgPSByZWFkZXIubG9hZEZsb2F0MzIoKTsKICAgICAgICAgICAgdGhpcy56ID0gcmVhZGVyLmxvYWRGbG9hdDMyKCk7CiAgICAgICAgfQogICAgICAgIGlzVmFsaWQoKSB7CiAgICAgICAgICAgIGZvciAoY29uc3QgdiBvZiB0aGlzLl9fZGF0YSkgewogICAgICAgICAgICAgICAgaWYgKHYgPT0gSW5maW5pdHkgfHwgaXNOYU4odikpCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgIH0KCiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuZXctY2FwICovCiAgICAvKioKICAgICAqIFJlcHJlc2VudHMgYSBmb3VyLWRpbWVuc2lvbmFsIGNvb3JkaW5hdGUuCiAgICAgKiBNYXRoIHR5cGVzIGludGVybmFsbHkgc3RvcmUgdmFsdWVzIGluIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9GbG9hdDMyQXJyYXl8RmxvYXQzMkFycmF5fSBhbmQKICAgICAqIGV4cG9zZSBnZXR0ZXJzIGFuZCBzZXR0ZXJzIGZvciB0aGUgY29tcG9uZW50IHZhbHVlcy4KICAgICAqCiAgICAgKi8KICAgIGNsYXNzIFZlYzQgewogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBWZWM0LgogICAgICAgICAqCiAgICAgICAgICogVGhlIHR5cGUgb2YgdmFsdWVzIG9mIHRoZSBgKHgsIHksIHosIHQpYCBjb29yZGluYXRlcyBjYW4gYmUge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0Zsb2F0MzJBcnJheXxGbG9hdDMyQXJyYXl9LAogICAgICAgICAqIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9VaW50MzJBcnJheXxVaW50MzJBcnJheX0sCiAgICAgICAgICoge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL0ludDMyQXJyYXl8SW50MzJBcnJheX0gYW5kCiAgICAgICAgICoge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VzL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNpYS9PYmpldG9zX2dsb2JhbGVzL0FycmF5QnVmZmVyfEFycmF5QnVmZmVyfS4KICAgICAgICAgKgogICAgICAgICAqIFlvdSBjYW4gYWxzbyBwYXNzIG9uZSBKU09OIG9iamVjdCBwYXJhbWV0ZXIuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0geCAtIFRoZSB4IHZhbHVlLiBEZWZhdWx0IGlzIDAuCiAgICAgICAgICogQHBhcmFtIHkgLSBUaGUgeSB2YWx1ZS4gRGVmYXVsdCBpcyAwLgogICAgICAgICAqIEBwYXJhbSB6IC0gVGhlIHkgdmFsdWUuIERlZmF1bHQgaXMgMC4KICAgICAgICAgKiBAcGFyYW0gdCAtIFRoZSB0IHZhbHVlLiBEZWZhdWx0IGlzIDAuCiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IoeCA9IDAsIHkgPSAwLCB6ID0gMCwgdCA9IDApIHsKICAgICAgICAgICAgaWYgKHggaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkgfHwgeCBpbnN0YW5jZW9mIFVpbnQzMkFycmF5KSB7CiAgICAgICAgICAgICAgICB0aGlzLl9fZGF0YSA9IHg7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoeCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgbmV3IFZlYzQobmV3IEZsb2F0MzJBcnJheShidWZmZXIsIGJ5dGVPZmZzZXQsIDQpKWApOwogICAgICAgICAgICAgICAgY29uc3QgYnVmZmVyID0geDsKICAgICAgICAgICAgICAgIGNvbnN0IGJ5dGVPZmZzZXQgPSB5OwogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGEgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlciwgYnl0ZU9mZnNldCwgNCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAodHlwZW9mIHggPT0gJ251bWJlcicgJiYgdHlwZW9mIHkgPT0gJ251bWJlcicgJiYgdHlwZW9mIHogPT0gJ251bWJlcicgJiYgdHlwZW9mIHQgPT0gJ251bWJlcicpIHsKICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhID0gbmV3IEZsb2F0MzJBcnJheSg0KTsKICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhWzBdID0geDsKICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhWzFdID0geTsKICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhWzJdID0gejsKICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhWzNdID0gdDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmICh4ICE9IG51bGwgJiYgdHlwZW9mIHggPT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhID0gbmV3IEZsb2F0MzJBcnJheSg0KTsKICAgICAgICAgICAgICAgIHRoaXMuZnJvbUpTT04oeCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLl9fZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciBgeGAgdmFsdWUuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgeCB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBnZXQgeCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19kYXRhWzBdOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIGB4YCB2YWx1ZS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCB4KHZhbCkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVswXSA9IHZhbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciBgeWAgdmFsdWUuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgeSB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBnZXQgeSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19kYXRhWzFdOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIGB5YCB2YWx1ZS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCB5KHZhbCkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVsxXSA9IHZhbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciBgemAgdmFsdWUuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gdmFsIC0gVGhlIHZhbCBwYXJhbS4KICAgICAgICAgKi8KICAgICAgICBnZXQgeigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19kYXRhWzJdOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIGB6YCB2YWx1ZS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCB6KHZhbCkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVsyXSA9IHZhbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciBgdGAgdmFsdWUuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gdmFsIC0gVGhlIHZhbCBwYXJhbS4KICAgICAgICAgKi8KICAgICAgICBnZXQgdCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19kYXRhWzNdOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIGB0YCB2YWx1ZS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCB0KHZhbCkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVszXSA9IHZhbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciBgd2AgdmFsdWUuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gdmFsIC0gVGhlIHZhbCBwYXJhbS4KICAgICAgICAgKi8KICAgICAgICBnZXQgdygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19kYXRhWzNdOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIGB3YCB2YWx1ZS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCB3KHZhbCkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVszXSA9IHZhbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciBgeHl6YCBzd2l6emVsLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIHogdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0IHh5eigpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMuX19kYXRhWzBdLCB0aGlzLl9fZGF0YVsxXSwgdGhpcy5fX2RhdGFbMl0pOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZnJvbSBzY2FsYXIgY29tcG9uZW50cy4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB4IC0gVGhlIHggdmFsdWUuCiAgICAgICAgICogQHBhcmFtIHkgIC0gVGhlIHkgdmFsdWUuCiAgICAgICAgICogQHBhcmFtIHogIC0gVGhlIHkgdmFsdWUuCiAgICAgICAgICogQHBhcmFtIHQgIC0gVGhlIHQgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgc2V0KHgsIHksIHosIHQpIHsKICAgICAgICAgICAgdGhpcy54ID0geDsKICAgICAgICAgICAgdGhpcy55ID0geTsKICAgICAgICAgICAgdGhpcy56ID0gejsKICAgICAgICAgICAgdGhpcy50ID0gdDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0cyB0aGUgc3RhdGUgb2YgYSBWZWM0IE9iamVjdCBmcm9tIGFub3RoZXIgVmVjNC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBvdGhlciBWZWM0IHRvIHNldCBmcm9tLgogICAgICAgICAqLwogICAgICAgIHNldEZyb21PdGhlcihvdGhlcikgewogICAgICAgICAgICB0aGlzLnggPSBvdGhlci54OwogICAgICAgICAgICB0aGlzLnkgPSBvdGhlci55OwogICAgICAgICAgICB0aGlzLnogPSBvdGhlci56OwogICAgICAgICAgICB0aGlzLnQgPSBvdGhlci50OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDaGVja3MgaWYgdGhpcyBWZWM0IGNvbnRhaW5zIHRoZSBzYW1lIHZhbHVlcyBhcyB0aGUgb3RoZXIgVmVjNC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBvdGhlciBWZWM0IHRvIGNvbXBhcmUgd2l0aC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0cnVlIG9yIGZhbHNlLgogICAgICAgICAqLwogICAgICAgIGlzRXF1YWwob3RoZXIpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMueCA9PSBvdGhlci54ICYmIHRoaXMueSA9PSBvdGhlci55ICYmIHRoaXMueiA9PSBvdGhlci56ICYmIHRoaXMudCA9PSBvdGhlci50OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDaGVja3MgaWYgdGhpcyBWZWM0IGlzIGRpZmZlcmVudCBmcm9tIGFub3RoZXIgVmVjNC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBvdGhlciBWZWM0IHRvIGNvbXBhcmUgd2l0aC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0cnVlIG9yIGZhbHNlLgogICAgICAgICAqLwogICAgICAgIG5vdEVxdWFsKG90aGVyKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnggIT0gb3RoZXIueCAmJiB0aGlzLnkgIT0gb3RoZXIueSAmJiB0aGlzLnogIT0gb3RoZXIueiAmJiB0aGlzLnQgIT0gb3RoZXIudDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyB0cnVlIGlmIHRoaXMgVmVjNCBpcyBhcHByb3hpbWF0ZWx5IHRoZSBzYW1lIGFzIG90aGVyLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIFZlYzQgdG8gY29tcGFyZSB3aXRoLgogICAgICAgICAqIEBwYXJhbSBwcmVjaXNpb24gLSBUaGUgcHJlY2lzaW9uIHRvIHdoaWNoIHRoZSB2YWx1ZXMgbXVzdCBtYXRjaC4KICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBhcHByb3hFcXVhbChvdGhlciwgcHJlY2lzaW9uID0gTnVtYmVyLkVQU0lMT04pIHsKICAgICAgICAgICAgcmV0dXJuIChNYXRoLmFicyh0aGlzLnggLSBvdGhlci54KSA8IHByZWNpc2lvbiAmJgogICAgICAgICAgICAgICAgTWF0aC5hYnModGhpcy55IC0gb3RoZXIueSkgPCBwcmVjaXNpb24gJiYKICAgICAgICAgICAgICAgIE1hdGguYWJzKHRoaXMueiAtIG90aGVyLnopIDwgcHJlY2lzaW9uICYmCiAgICAgICAgICAgICAgICBNYXRoLmFicyh0aGlzLnQgLSBvdGhlci50KSA8IHByZWNpc2lvbik7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEFkZHMgb3RoZXIgdG8gdGhpcyBWZWM0IGFuZCByZXR1cm5zIHRoZSByZXN1bHQgYXMgYSBuZXcgVmVjNC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBvdGhlciBWZWM0IHRvIGFkZC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBWZWM0LgogICAgICAgICAqLwogICAgICAgIGFkZChvdGhlcikgewogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzQodGhpcy54ICsgb3RoZXIueCwgdGhpcy55ICsgb3RoZXIueSwgdGhpcy56ICsgb3RoZXIueiwgdGhpcy50ICsgb3RoZXIudCk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEFkZHMgb3RoZXIgdG8gdGhpcyBWZWM0IG11dGF0aW5nIHRoZSB2YWx1ZXMgb2YgdGhpcyBpbnN0YW5jZQogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIFZlYzQgdG8gYWRkLgogICAgICAgICAqLwogICAgICAgIGFkZEluUGxhY2Uob3RoZXIpIHsKICAgICAgICAgICAgdGhpcy54ICs9IG90aGVyLng7CiAgICAgICAgICAgIHRoaXMueSArPSBvdGhlci55OwogICAgICAgICAgICB0aGlzLnogKz0gb3RoZXIuejsKICAgICAgICAgICAgdGhpcy50ICs9IG90aGVyLnQ7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFN1YnRyYWN0cyBvdGhlciBmcm9tIHRoaXMgVmVjNCBhbmQgcmV0dXJucyB0aGVuIHJlc3VsdCBhcyBhIG5ldyBWZWM0LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIFZlYzQgdG8gc3VidHJhY3QuCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYSBuZXcgVmVjNC4KICAgICAgICAgKi8KICAgICAgICBzdWJ0cmFjdChvdGhlcikgewogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzQodGhpcy54IC0gb3RoZXIueCwgdGhpcy55IC0gb3RoZXIueSwgdGhpcy56IC0gb3RoZXIueiwgdGhpcy50IC0gb3RoZXIudCk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFN1YnRyYWN0cyBvdGhlciBmcm9tIHRoaXMgVmVjNCBtdXRhdGluZyB0aGUgdmFsdWVzIG9mIHRoaXMgaW5zdGFuY2UKICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBvdGhlciBWZWM0IHRvIHN1YnRyYWN0LgogICAgICAgICAqLwogICAgICAgIHN1YnRyYWN0SW5QbGFjZShvdGhlcikgewogICAgICAgICAgICB0aGlzLnggLT0gb3RoZXIueDsKICAgICAgICAgICAgdGhpcy55IC09IG90aGVyLnk7CiAgICAgICAgICAgIHRoaXMueiAtPSBvdGhlci56OwogICAgICAgICAgICB0aGlzLnQgLT0gb3RoZXIudDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogTXVsdGlwbGllcyB0d28gVmVjNHMgYW5kIHJldHVybnMgdGhlIHJlc3VsdCBhcyBhIG5ldyBWZWM0LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIFZlYzQgdG8gbXVsdGlwbHkgd2l0aC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBWZWM0LgogICAgICAgICAqLwogICAgICAgIG11bHRpcGx5KG90aGVyKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjNCh0aGlzLnggKiBvdGhlci54LCB0aGlzLnkgKiBvdGhlci55LCB0aGlzLnogKiBvdGhlci56LCB0aGlzLnQgKiBvdGhlci50KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogTXVsdGlwbGllcyB0d28gVmVjNHMgbXV0YXRpbmcgdGhlIHZhbHVlcyBvZiB0aGlzIGluc3RhbmNlCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgVmVjNCB0byBtdWx0aXBseSB3aXRoLgogICAgICAgICAqLwogICAgICAgIG11bHRpcGx5SW5QbGFjZShvdGhlcikgewogICAgICAgICAgICB0aGlzLnggKj0gb3RoZXIueDsKICAgICAgICAgICAgdGhpcy55ICo9IG90aGVyLnk7CiAgICAgICAgICAgIHRoaXMueiAqPSBvdGhlci56OwogICAgICAgICAgICB0aGlzLnQgKj0gb3RoZXIudDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogRGl2aWRlcyB0d28gVmVjNHMgYW5kIHJldHVybnMgdGhlIHJlc3VsdCBhcyBhIG5ldyBWZWM0LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIFZlYzQgdG8gZGl2aWRlIGJ5LgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGEgbmV3IFZlYzQuCiAgICAgICAgICovCiAgICAgICAgZGl2aWRlKG90aGVyKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjNCh0aGlzLnggLyBvdGhlci54LCB0aGlzLnkgLyBvdGhlci55LCB0aGlzLnogLyBvdGhlci56LCB0aGlzLnQgLyBvdGhlci50KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogRGl2aWRlcyB0d28gVmVjNHMuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgVmVjNCB0byBkaXZpZGUgYnkuCiAgICAgICAgICovCiAgICAgICAgZGl2aWRlSW5QbGFjZShvdGhlcikgewogICAgICAgICAgICB0aGlzLnggLz0gb3RoZXIueDsKICAgICAgICAgICAgdGhpcy55IC89IG90aGVyLnk7CiAgICAgICAgICAgIHRoaXMueiAvPSBvdGhlci56OwogICAgICAgICAgICB0aGlzLnQgLz0gb3RoZXIudDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2NhbGVzIHRoaXMgVmVjNCBieSBzY2FsYXIgYW5kIHJldHVybnMgdGhlIHJlc3VsdCBhcyBhIG5ldyBWZWM0LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHNjYWxhciAtIFRoZSBzY2FsYXIgdmFsdWUuCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgc2NhbGUoc2NhbGFyKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjNCh0aGlzLnggKiBzY2FsYXIsIHRoaXMueSAqIHNjYWxhciwgdGhpcy56ICogc2NhbGFyLCB0aGlzLnQgKiBzY2FsYXIpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTY2FsZXMgdGhpcyBWZWM0IGJ5IHNjYWxhci4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBzY2FsYXIgLSBUaGUgc2NhbGFyIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHNjYWxlSW5QbGFjZShzY2FsYXIpIHsKICAgICAgICAgICAgdGhpcy5zZXQodGhpcy54ICogc2NhbGFyLCB0aGlzLnkgKiBzY2FsYXIsIHRoaXMueiAqIHNjYWxhciwgdGhpcy50ICogc2NhbGFyKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2FsY3VsYXRlcyB0aGUgbGVuZ3RoIG9mIHRoaXMgVmVjNC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBsZW5ndGguCiAgICAgICAgICovCiAgICAgICAgbGVuZ3RoKCkgewogICAgICAgICAgICBjb25zdCB4ID0gdGhpcy5fX2RhdGFbMF07CiAgICAgICAgICAgIGNvbnN0IHkgPSB0aGlzLl9fZGF0YVsxXTsKICAgICAgICAgICAgY29uc3QgeiA9IHRoaXMuX19kYXRhWzJdOwogICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5fX2RhdGFbMl07CiAgICAgICAgICAgIHJldHVybiBNYXRoLnNxcnQoeCAqIHggKyB5ICogeSArIHogKiB6ICsgdCAqIHQpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDYWxjdWxhdGVzIHRoZSBzcXVhcmVkIGxlbmd0aCBvZiB0aGlzIFZlYzQuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgbGVuZ3RoLgogICAgICAgICAqLwogICAgICAgIGxlbmd0aFNxdWFyZWQoKSB7CiAgICAgICAgICAgIGNvbnN0IHggPSB0aGlzLl9fZGF0YVswXTsKICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMuX19kYXRhWzFdOwogICAgICAgICAgICBjb25zdCB6ID0gdGhpcy5fX2RhdGFbMl07CiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLl9fZGF0YVszXTsKICAgICAgICAgICAgcmV0dXJuIHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHQgKiB0OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBOb3JtYWxpemVzIHRoZSBWZWM0IGFuZCByZXR1cm5zIGl0IGFzIGEgbmV3IFZlYzQuCiAgICAgICAgICogTXVsdGlwbGllcyBjb29yZGluYXRlcyB2YWx1ZSBieSB0aGUgaW52ZXJzZSBvZiB0aGUgdmVjdG9yIGxlbmd0aC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBWZWM0IG5vcm1hbGl6ZWQuCiAgICAgICAgICovCiAgICAgICAgbm9ybWFsaXplKCkgewogICAgICAgICAgICBjb25zdCB4ID0gdGhpcy5fX2RhdGFbMF07CiAgICAgICAgICAgIGNvbnN0IHkgPSB0aGlzLl9fZGF0YVsxXTsKICAgICAgICAgICAgY29uc3QgeiA9IHRoaXMuX19kYXRhWzJdOwogICAgICAgICAgICBjb25zdCB0ID0gdGhpcy5fX2RhdGFbM107CiAgICAgICAgICAgIGxldCBsZW4gPSB4ICogeCArIHkgKiB5ICsgeiAqIHogKyB0ICogdDsKICAgICAgICAgICAgaWYgKGxlbiA8IE51bWJlci5FUFNJTE9OKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFZlYzQoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBUT0RPOiBldmFsdWF0ZSB1c2Ugb2YgZ2xtX2ludnNxcnQgaGVyZT8KICAgICAgICAgICAgbGVuID0gMSAvIE1hdGguc3FydChsZW4pOwogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzQoeCAqIGxlbiwgeSAqIGxlbiwgeiAqIGxlbik7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIE5vcm1hbGl6ZXMgdGhpcyBWZWM0IG11bHRpcGx5aW5nIGNvb3JkaW5hdGUgdmFsdWVzIGJ5IHRoZSBpbnZlcnNlIG9mIHRoZSB2ZWN0b3IgbGVuZ3RoLgogICAgICAgICAqLwogICAgICAgIG5vcm1hbGl6ZUluUGxhY2UoKSB7CiAgICAgICAgICAgIGNvbnN0IHggPSB0aGlzLl9fZGF0YVswXTsKICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMuX19kYXRhWzFdOwogICAgICAgICAgICBjb25zdCB6ID0gdGhpcy5fX2RhdGFbMl07CiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLl9fZGF0YVszXTsKICAgICAgICAgICAgbGV0IGxlbiA9IHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHQgKiB0OwogICAgICAgICAgICBpZiAobGVuIDwgTnVtYmVyLkVQU0lMT04pIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBsZW4gPSAxIC8gTWF0aC5zcXJ0KGxlbik7CiAgICAgICAgICAgIHRoaXMuc2V0KHggKiBsZW4sIHkgKiBsZW4sIHogKiBsZW4sIHQgKiBsZW4pOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDYWxjdWxhdGVzIHRoZSBkb3QgcHJvZHVjdCBvZiB0aGlzIFZlYzQgYWdhaW5zdCBhbm90aGVyIFZlYzQuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgVmVjNCB0byBjb21wYXJlIHdpdGguCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIGRvdCBwcm9kdWN0LgogICAgICAgICAqLwogICAgICAgIGRvdChvdGhlcikgewogICAgICAgICAgICByZXR1cm4gdGhpcy54ICogb3RoZXIueCArIHRoaXMueSAqIG90aGVyLnkgKyB0aGlzLnogKiBvdGhlci56ICsgdGhpcy50ICogb3RoZXIudDsgLy8gVE9ETzogb3RoZXIudCB1c2VkIHRvIGJlIGIudD8KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2FsY3VsYXRlcyB0aGUgY3Jvc3MgcHJvZHVjdCBvZiB0d28gVmVjNHMgYW5kIHJldHVybnMgdGhlIHJlc3VsdCBhcyBhIG5ldyBWZWM0LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIFZlYzQgdG8gY2FsY3VsYXRlIHdpdGguCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIGNyb3NzIHByb2R1Y3QgYXMgYSBuZXcgVmVjNC4KICAgICAgICAgKi8KICAgICAgICBjcm9zcyhvdGhlcikgewogICAgICAgICAgICBjb25zdCBheCA9IHRoaXMueDsKICAgICAgICAgICAgY29uc3QgYXkgPSB0aGlzLnk7CiAgICAgICAgICAgIGNvbnN0IGF6ID0gdGhpcy56OwogICAgICAgICAgICBjb25zdCBhdCA9IHRoaXMudDsKICAgICAgICAgICAgY29uc3QgYnggPSBvdGhlci54OwogICAgICAgICAgICBjb25zdCBieSA9IG90aGVyLnk7CiAgICAgICAgICAgIGNvbnN0IGJ6ID0gb3RoZXIuejsKICAgICAgICAgICAgY29uc3QgYnQgPSBvdGhlci50OwogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzQoYXkgKiBieiAtIGF6ICogYnksIGF6ICogYnQgLSBhdCAqIGJ6LCBhdCAqIGJ4IC0gYXggKiBidCwgYXggKiBieSAtIGF5ICogYngpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSBhbmdsZSBiZXR3ZWVuIHRoaXMgVmVjNCBhbmQgYi4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBvdGhlciBWZWM0IHRvIGNvbXBhcmUgd2l0aC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgYW5nbGUgaW4gcmFkaWFucy4KICAgICAgICAgKi8KICAgICAgICBhbmdsZVRvKG90aGVyKSB7CiAgICAgICAgICAgIGNvbnN0IHRlbXBBID0gdGhpcy5ub3JtYWxpemUoKTsKICAgICAgICAgICAgY29uc3QgdGVtcEIgPSBvdGhlci5ub3JtYWxpemUoKTsKICAgICAgICAgICAgY29uc3QgY29zaW5lID0gdGVtcEEuZG90KHRlbXBCKTsKICAgICAgICAgICAgaWYgKGNvc2luZSA+IDEuMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5hY29zKGNvc2luZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUGVyZm9ybXMgYSBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHRoaXMgVmVjNCBhbmQgb3RoZXIuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgVmVjNCB0byBpbnRlcnBvbGF0ZSBiZXR3ZWVuLgogICAgICAgICAqIEBwYXJhbSB0IC0gSW50ZXJwb2xhdGlvbiBhbW91bnQgYmV0d2VlbiB0aGUgdHdvIGlucHV0cy4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBWZWM0LgogICAgICAgICAqLwogICAgICAgIGxlcnAob3RoZXIsIHQpIHsKICAgICAgICAgICAgY29uc3QgYXggPSB0aGlzLng7CiAgICAgICAgICAgIGNvbnN0IGF5ID0gdGhpcy55OwogICAgICAgICAgICBjb25zdCBheiA9IHRoaXMuejsKICAgICAgICAgICAgY29uc3QgYXQgPSB0aGlzLnQ7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjNChheCArIHQgKiAob3RoZXIueCAtIGF4KSwgYXkgKyB0ICogKG90aGVyLnkgLSBheSksIGF6ICsgdCAqIChvdGhlci56IC0gYXopLCBhdCArIHQgKiAob3RoZXIudCAtIGF0KSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEdlbmVyYXRlcyBhIHJhbmRvbSB2ZWN0b3Igd2l0aCB0aGUgZ2l2ZW4gc2NhbGUuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gc2NhbGUgLSBMZW5ndGggb2YgdGhlIHJlc3VsdGluZyB2ZWN0b3IuIElmIG9taXR0ZWQsIGEgdW5pdCB2ZWN0b3Igd2lsbCBiZSByZXR1cm5lZC4KICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICAvLyByYW5kb20oc2NhbGUgPSAxLjApIHsKICAgICAgICAvLyAgIGNvbnN0IHIgPSBnbE1hdHJpeC5SQU5ET00oKSAqIDIuMCAqIE1hdGguUEkKICAgICAgICAvLyAgIGNvbnN0IHogPSBnbE1hdHJpeC5SQU5ET00oKSAqIDIuMCAtIDEuMAogICAgICAgIC8vICAgY29uc3QgelNjYWxlID0gTWF0aC5zcXJ0KDEuMCAtIHogKiB6KSAqIHNjYWxlCiAgICAgICAgLy8gICBvdXRbMF0gPSBNYXRoLmNvcyhyKSAqIHpTY2FsZQogICAgICAgIC8vICAgb3V0WzFdID0gTWF0aC5zaW4ocikgKiB6U2NhbGUKICAgICAgICAvLyAgIG91dFsyXSA9IHogKiBzY2FsZQogICAgICAgIC8vICAgcmV0dXJuIG91dAogICAgICAgIC8vIH0KICAgICAgICAvKioKICAgICAgICAgKiBDbG9uZXMgdGhpcyBWZWM0IGFuZCByZXR1cm5zIGEgbmV3IFZlYzQuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBWZWM0LgogICAgICAgICAqLwogICAgICAgIGNsb25lKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzQodGhpcy5fX2RhdGFbMF0sIHRoaXMuX19kYXRhWzFdLCB0aGlzLl9fZGF0YVsyXSwgdGhpcy5fX2RhdGFbM10pOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFZlYzQgaW50byBhIFZlYzMuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgdmFsdWUgYXMgYSBuZXcgVmVjMy4KICAgICAgICAgKi8KICAgICAgICB0b1ZlYzMoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjMyh0aGlzLl9fZGF0YVswXSwgdGhpcy5fX2RhdGFbMV0sIHRoaXMuX19kYXRhWzJdKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyB0aGUgdHlwZSBhcyBhbiBhcnJheS4gT2Z0ZW4gdXNlZCB0byBwYXNzIHR5cGVzIHRvIHRoZSBHUFUuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhcyBhbiBhcnJheS4KICAgICAgICAgKi8KICAgICAgICBhc0FycmF5KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX2RhdGE7CiAgICAgICAgfQogICAgICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgIC8vIFBlcnNpc3RlbmNlCiAgICAgICAgLyoqCiAgICAgICAgICogQ29udmVydHMgdGhpcyBWZWMzIHRvIGEgc3RyaW5nIGluIEpTT04gZm9ybWF0LgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgdG9TdHJpbmcoKSB7CiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuZXctY2FwCiAgICAgICAgICAgIHJldHVybiBTdHJpbmdGdW5jdGlvbnMuc3RyaW5naWZ5SlNPTldpdGhGaXhlZFByZWNpc2lvbih0aGlzLnRvSlNPTigpKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIHRvSlNPTiBtZXRob2QgZW5jb2RlcyB0aGlzIHR5cGUgYXMgYSBqc29uIG9iamVjdCBmb3IgcGVyc2lzdGVuY2UuCiAgICAgICAgICogQHJldHVybiAtIFRoZSBqc29uIG9iamVjdC4KICAgICAgICAgKi8KICAgICAgICB0b0pTT04oKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICB4OiB0aGlzLngsCiAgICAgICAgICAgICAgICB5OiB0aGlzLnksCiAgICAgICAgICAgICAgICB6OiB0aGlzLnosCiAgICAgICAgICAgICAgICB0OiB0aGlzLnQsCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBKU09OIG9iamVjdCB0byBzZXQgdGhlIHN0YXRlIG9mIHRoaXMgY2xhc3MuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gaiAtIFRoZSBqc29uIG9iamVjdC4KICAgICAgICAgKi8KICAgICAgICBmcm9tSlNPTihqKSB7CiAgICAgICAgICAgIHRoaXMueCA9IGoueDsKICAgICAgICAgICAgdGhpcy55ID0gai55OwogICAgICAgICAgICB0aGlzLnogPSBqLno7CiAgICAgICAgICAgIHRoaXMudCA9IGoudDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogTG9hZHMgdGhlIHN0YXRlIG9mIHRoZSB2YWx1ZSBmcm9tIGEgYmluYXJ5IHJlYWRlci4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgLSBUaGUgcmVhZGVyIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHJlYWRCaW5hcnkocmVhZGVyKSB7CiAgICAgICAgICAgIHRoaXMueCA9IHJlYWRlci5sb2FkRmxvYXQzMigpOwogICAgICAgICAgICB0aGlzLnkgPSByZWFkZXIubG9hZEZsb2F0MzIoKTsKICAgICAgICAgICAgdGhpcy56ID0gcmVhZGVyLmxvYWRGbG9hdDMyKCk7CiAgICAgICAgICAgIHRoaXMudCA9IHJlYWRlci5sb2FkRmxvYXQzMigpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBWZXJpZmllcyBpZiB0aGUgdmFsdWVzIHN0b3JlZCBpbiB0aGlzIE1hdGggdHlwZSBhcmUgdmFsaWQgbnVtZXJpYyB2YWx1ZXMuCiAgICAgICAgICogUmV0dXJucyBgZmFsc2VgIElmIGF0IGxlYXN0IG9uZSBvZiB0aGUgdmFsdWVzIGlzIGVpdGhlciB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2lhL09iamV0b3NfZ2xvYmFsZXMvSW5maW5pdHl8SW5maW5pdHl9IG9yCiAgICAgICAgICoge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNpYS9PYmpldG9zX2dsb2JhbGVzL05hTnxOYU59LgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIHJlc3VsdCBhcyBhIGJvb2xlYW4uCiAgICAgICAgICovCiAgICAgICAgaXNWYWxpZCgpIHsKICAgICAgICAgICAgZm9yIChjb25zdCB2IG9mIHRoaXMuX19kYXRhKSB7CiAgICAgICAgICAgICAgICBpZiAodiA9PSBJbmZpbml0eSB8fCBpc05hTih2KSkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgY29sb3IgYXMgNCBmbG9hdGluZyBwb2ludCB2YWx1ZXMuCiAgICAgKi8KICAgIGNsYXNzIENvbG9yIHsKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgYENvbG9yYCBvYmplY3Qgd2l0aCBhbiBSR0JBIHN0cnVjdHVyZS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSByIC0gVGhlIHJlZCBjaGFubmVsIG9mIGEgY29sb3IuCiAgICAgICAgICogQHBhcmFtIGcgLSBUaGUgZ3JlZW4gY2hhbm5lbCBvZiBhIGNvbG9yLgogICAgICAgICAqIEBwYXJhbSBiIC0gVGhlIGJsdWUgY2hhbm5lbCBvZiBhIGNvbG9yLgogICAgICAgICAqIEBwYXJhbSBhIC0gVGhlIGFscGhhICh0cmFuc3BhcmVuY3kpIGNoYW5uZWwgb2YgYSBjb2xvci4KICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3RvcihyID0gMCwgZyA9IDAsIGIgPSAwLCBhID0gMS4wKSB7CiAgICAgICAgICAgIGlmIChyIGluc3RhbmNlb2YgRmxvYXQzMkFycmF5KSB7CiAgICAgICAgICAgICAgICB0aGlzLl9fZGF0YSA9IHI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAociBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYGRlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgbmV3IFZlYzQobmV3IEZsb2F0MzJBcnJheShidWZmZXIsIGJ5dGVPZmZzZXQsIDQpKWApOwogICAgICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gcjsKICAgICAgICAgICAgICAgIGNvbnN0IGJ5dGVPZmZzZXQgPSBnOwogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGEgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlciwgYnl0ZU9mZnNldCwgNCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLl9fZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoNCk7CiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHIgPT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoci5zdGFydHNXaXRoKCcjJykpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRGcm9tSGV4KHIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRGcm9tQ1NTQ29sb3JOYW1lKHIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhWzBdID0gcjsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9fZGF0YVsxXSA9IGc7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2RhdGFbMl0gPSBiOwogICAgICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhWzNdID0gYTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIHJlZCBjaGFubmVsLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIHJlZCBjaGFubmVsLgogICAgICAgICAqLwogICAgICAgIGdldCByKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX2RhdGFbMF07CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHRlciBmb3IgcmVkIGNoYW5uZWwuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gdmFsIC0gVGhlIHZhbCBwYXJhbS4KICAgICAgICAgKi8KICAgICAgICBzZXQgcih2YWwpIHsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMF0gPSB2YWw7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEdldHRlciBmb3IgZ3JlZW4gY2hhbm5lbC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBncmVlbiBjaGFubmVsLgogICAgICAgICAqLwogICAgICAgIGdldCBnKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX2RhdGFbMV07CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHRlciBmb3IgZ3JlZW4gY2hhbm5lbC4KICAgICAgICAgKiBAcGFyYW0gdmFsIC0gVGhlIHZhbCBwYXJhbS4KICAgICAgICAgKi8KICAgICAgICBzZXQgZyh2YWwpIHsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMV0gPSB2YWw7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEdldHRlciBmb3IgYmx1ZSBjaGFubmVsLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIGJsdWUgY2hhbm5lbC4KICAgICAgICAgKi8KICAgICAgICBnZXQgYigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19kYXRhWzJdOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIGJsdWUgY2hhbm5lbC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCBiKHZhbCkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVsyXSA9IHZhbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciBhbHBoYSBjaGFubmVsLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIGFscGhhIGNoYW5uZWwuCiAgICAgICAgICovCiAgICAgICAgZ2V0IGEoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YVszXTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0dGVyIGZvciBhbHBoYSB2YWx1ZS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCBhKHZhbCkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVszXSA9IHZhbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0dGVyIGZyb20gc2NhbGFyIGNvbXBvbmVudHMuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gciAtIFRoZSByZWQgY2hhbm5lbC4KICAgICAgICAgKiBAcGFyYW0gZyAgLSBUaGUgZ3JlZW4gY2hhbm5lbC4KICAgICAgICAgKiBAcGFyYW0gYiAgLSBUaGUgYmx1ZSBjaGFubmVsLgogICAgICAgICAqIEBwYXJhbSBhICAtIFRoZSBhbHBoYSBjaGFubmVsLgogICAgICAgICAqLwogICAgICAgIHNldChyLCBnLCBiLCBhID0gMS4wKSB7CiAgICAgICAgICAgIHRoaXMuciA9IHI7CiAgICAgICAgICAgIHRoaXMuZyA9IGc7CiAgICAgICAgICAgIHRoaXMuYiA9IGI7CiAgICAgICAgICAgIHRoaXMuYSA9IGE7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHMgY3VycmVudCBjb2xvciBzdGF0ZSB3aXRoIGFub3RoZXIgYENvbG9yYCBvYmplY3QuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgY29sb3IgdG8gc2V0IGZyb20uCiAgICAgICAgICovCiAgICAgICAgc2V0RnJvbU90aGVyKG90aGVyKSB7CiAgICAgICAgICAgIHRoaXMuciA9IG90aGVyLnI7CiAgICAgICAgICAgIHRoaXMuZyA9IG90aGVyLmc7CiAgICAgICAgICAgIHRoaXMuYiA9IG90aGVyLmI7CiAgICAgICAgICAgIHRoaXMuYSA9IG90aGVyLmE7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHRlciBmcm9tIGEgc2NhbGFyIGFycmF5LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHZhbHMgLSBUaGUgdmFscyBwYXJhbS4KICAgICAgICAgKi8KICAgICAgICBzZXRGcm9tU2NhbGFyQXJyYXkodmFscykgewogICAgICAgICAgICB0aGlzLnIgPSB2YWxzWzBdOwogICAgICAgICAgICB0aGlzLmcgPSB2YWxzWzFdOwogICAgICAgICAgICB0aGlzLmIgPSB2YWxzWzJdOwogICAgICAgICAgICB0aGlzLmEgPSB2YWxzLmxlbmd0aCA9PSA0ID8gdmFsc1szXSA6IDEuMDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZyb20gYW4gUkdCIGFycmF5LgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0QXNSR0JBcnJheSgpIHsKICAgICAgICAgICAgcmV0dXJuIFt0aGlzLnIgKiAyNTUsIHRoaXMuZyAqIDI1NSwgdGhpcy5iICogMjU1XTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZyb20gYW4gUkdCIGRpY3QuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBnZXRBc1JHQkRpY3QoKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICByOiB0aGlzLnIgKiAyNTUsCiAgICAgICAgICAgICAgICBnOiB0aGlzLmcgKiAyNTUsCiAgICAgICAgICAgICAgICBiOiB0aGlzLmIgKiAyNTUsCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHRlciBmcm9tIGEgUkdCIHZhbHVlLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHIgLSBUaGUgcmVkIGNoYW5uZWwuCiAgICAgICAgICogQHBhcmFtIGcgIC0gVGhlIGdyZWVuIGNoYW5uZWwuCiAgICAgICAgICogQHBhcmFtIGIgIC0gVGhlIGJsdWUgY2hhbm5lbC4KICAgICAgICAgKiBAcGFyYW0gYSAgLSBUaGUgYWxwaGEgY2hhbm5lbC4KICAgICAgICAgKi8KICAgICAgICBzZXRGcm9tUkdCKHIsIGcsIGIsIGEpIHsKICAgICAgICAgICAgdGhpcy5yID0gciAvIDI1NTsKICAgICAgICAgICAgdGhpcy5nID0gZyAvIDI1NTsKICAgICAgICAgICAgdGhpcy5iID0gYiAvIDI1NTsKICAgICAgICAgICAgdGhpcy5hID0gYSA/IGEgLyAyNTUgOiAxLjA7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHRlciBmcm9tIGFuIFJHQiBhcnJheS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWxzIC0gVGhlIHZhbHMgcGFyYW0uCiAgICAgICAgICovCiAgICAgICAgc2V0RnJvbVJHQkFycmF5KHZhbHMpIHsKICAgICAgICAgICAgdGhpcy5yID0gdmFsc1swXSAvIDI1NTsKICAgICAgICAgICAgdGhpcy5nID0gdmFsc1sxXSAvIDI1NTsKICAgICAgICAgICAgdGhpcy5iID0gdmFsc1syXSAvIDI1NTsKICAgICAgICAgICAgdGhpcy5hID0gdmFscy5sZW5ndGggPT0gNCA/IHZhbHNbM10gLyAyNTUgOiAxLjA7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHRlciBmcm9tIGFuIFJHQiBkaWN0LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHZhbHMgLSBUaGUgdmFscyBwYXJhbS4KICAgICAgICAgKi8KICAgICAgICBzZXRGcm9tUkdCRGljdCh2YWxzKSB7CiAgICAgICAgICAgIHRoaXMuciA9IHZhbHMuciAvIDI1NTsKICAgICAgICAgICAgdGhpcy5nID0gdmFscy5nIC8gMjU1OwogICAgICAgICAgICB0aGlzLmIgPSB2YWxzLmIgLyAyNTU7CiAgICAgICAgICAgIHRoaXMuYSA9IHZhbHMuYSA9PSA0ID8gdmFscy5hIC8gMjU1IDogMS4wOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZnJvbSBhIGhleGFkZWNpbWFsIHZhbHVlLgogICAgICAgICAqIEUuZy4gI2ZmMDAwMAogICAgICAgICAqIEBwYXJhbSBoZXggLSBUaGUgaGV4IHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHNldEZyb21IZXgoaGV4KSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIGhleFRvUmdiKGhleCkgewogICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gL14jPyhbYS1mXGRdezJ9KShbYS1mXGRdezJ9KShbYS1mXGRdezJ9KSQvaS5leGVjKGhleCk7CiAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0CiAgICAgICAgICAgICAgICAgICAgPyB7CiAgICAgICAgICAgICAgICAgICAgICAgIHI6IHBhcnNlSW50KHJlc3VsdFsxXSwgMTYpLAogICAgICAgICAgICAgICAgICAgICAgICBnOiBwYXJzZUludChyZXN1bHRbMl0sIDE2KSwKICAgICAgICAgICAgICAgICAgICAgICAgYjogcGFyc2VJbnQocmVzdWx0WzNdLCAxNiksCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIDogbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCByZ2IgPSBoZXhUb1JnYihoZXgpOwogICAgICAgICAgICBpZiAoIXJnYikgewogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdJbnZhbGlkIGhleCBjb2RlOicgKyBoZXgpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuc2V0RnJvbVJHQihyZ2IuciwgcmdiLmcsIHJnYi5iKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0cyB0aGUgQ29sb3IgdmFsdWVzIGZyb20gYSBDU1MgY29sb3IgbmFtZS4KICAgICAgICAgKiBFLmcuICJyZWQiCiAgICAgICAgICogQHBhcmFtIG5hbWUgLSBUaGUgQ1NTIGNvbG9yIG5hbWUuCiAgICAgICAgICovCiAgICAgICAgc2V0RnJvbUNTU0NvbG9yTmFtZShuYW1lKSB7CiAgICAgICAgICAgIGNvbnN0IGNvbG91ck5hbWVUb0hleCA9IChjb2xvdXIpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGNvbG9ycyA9IHsKICAgICAgICAgICAgICAgICAgICBhbGljZWJsdWU6ICcjZjBmOGZmJywKICAgICAgICAgICAgICAgICAgICBhbnRpcXVld2hpdGU6ICcjZmFlYmQ3JywKICAgICAgICAgICAgICAgICAgICBhcXVhOiAnIzAwZmZmZicsCiAgICAgICAgICAgICAgICAgICAgYXF1YW1hcmluZTogJyM3ZmZmZDQnLAogICAgICAgICAgICAgICAgICAgIGF6dXJlOiAnI2YwZmZmZicsCiAgICAgICAgICAgICAgICAgICAgYmVpZ2U6ICcjZjVmNWRjJywKICAgICAgICAgICAgICAgICAgICBiaXNxdWU6ICcjZmZlNGM0JywKICAgICAgICAgICAgICAgICAgICBibGFjazogJyMwMDAwMDAnLAogICAgICAgICAgICAgICAgICAgIGJsYW5jaGVkYWxtb25kOiAnI2ZmZWJjZCcsCiAgICAgICAgICAgICAgICAgICAgYmx1ZTogJyMwMDAwZmYnLAogICAgICAgICAgICAgICAgICAgIGJsdWV2aW9sZXQ6ICcjOGEyYmUyJywKICAgICAgICAgICAgICAgICAgICBicm93bjogJyNhNTJhMmEnLAogICAgICAgICAgICAgICAgICAgIGJ1cmx5d29vZDogJyNkZWI4ODcnLAogICAgICAgICAgICAgICAgICAgIGNhZGV0Ymx1ZTogJyM1ZjllYTAnLAogICAgICAgICAgICAgICAgICAgIGNoYXJ0cmV1c2U6ICcjN2ZmZjAwJywKICAgICAgICAgICAgICAgICAgICBjaG9jb2xhdGU6ICcjZDI2OTFlJywKICAgICAgICAgICAgICAgICAgICBjb3JhbDogJyNmZjdmNTAnLAogICAgICAgICAgICAgICAgICAgIGNvcm5mbG93ZXJibHVlOiAnIzY0OTVlZCcsCiAgICAgICAgICAgICAgICAgICAgY29ybnNpbGs6ICcjZmZmOGRjJywKICAgICAgICAgICAgICAgICAgICBjcmltc29uOiAnI2RjMTQzYycsCiAgICAgICAgICAgICAgICAgICAgY3lhbjogJyMwMGZmZmYnLAogICAgICAgICAgICAgICAgICAgIGRhcmtibHVlOiAnIzAwMDA4YicsCiAgICAgICAgICAgICAgICAgICAgZGFya2N5YW46ICcjMDA4YjhiJywKICAgICAgICAgICAgICAgICAgICBkYXJrZ29sZGVucm9kOiAnI2I4ODYwYicsCiAgICAgICAgICAgICAgICAgICAgZGFya2dyYXk6ICcjYTlhOWE5JywKICAgICAgICAgICAgICAgICAgICBkYXJrZ3JlZW46ICcjMDA2NDAwJywKICAgICAgICAgICAgICAgICAgICBkYXJra2hha2k6ICcjYmRiNzZiJywKICAgICAgICAgICAgICAgICAgICBkYXJrbWFnZW50YTogJyM4YjAwOGInLAogICAgICAgICAgICAgICAgICAgIGRhcmtvbGl2ZWdyZWVuOiAnIzU1NmIyZicsCiAgICAgICAgICAgICAgICAgICAgZGFya29yYW5nZTogJyNmZjhjMDAnLAogICAgICAgICAgICAgICAgICAgIGRhcmtvcmNoaWQ6ICcjOTkzMmNjJywKICAgICAgICAgICAgICAgICAgICBkYXJrcmVkOiAnIzhiMDAwMCcsCiAgICAgICAgICAgICAgICAgICAgZGFya3NhbG1vbjogJyNlOTk2N2EnLAogICAgICAgICAgICAgICAgICAgIGRhcmtzZWFncmVlbjogJyM4ZmJjOGYnLAogICAgICAgICAgICAgICAgICAgIGRhcmtzbGF0ZWJsdWU6ICcjNDgzZDhiJywKICAgICAgICAgICAgICAgICAgICBkYXJrc2xhdGVncmF5OiAnIzJmNGY0ZicsCiAgICAgICAgICAgICAgICAgICAgZGFya3R1cnF1b2lzZTogJyMwMGNlZDEnLAogICAgICAgICAgICAgICAgICAgIGRhcmt2aW9sZXQ6ICcjOTQwMGQzJywKICAgICAgICAgICAgICAgICAgICBkZWVwcGluazogJyNmZjE0OTMnLAogICAgICAgICAgICAgICAgICAgIGRlZXBza3libHVlOiAnIzAwYmZmZicsCiAgICAgICAgICAgICAgICAgICAgZGltZ3JheTogJyM2OTY5NjknLAogICAgICAgICAgICAgICAgICAgIGRvZGdlcmJsdWU6ICcjMWU5MGZmJywKICAgICAgICAgICAgICAgICAgICBmaXJlYnJpY2s6ICcjYjIyMjIyJywKICAgICAgICAgICAgICAgICAgICBmbG9yYWx3aGl0ZTogJyNmZmZhZjAnLAogICAgICAgICAgICAgICAgICAgIGZvcmVzdGdyZWVuOiAnIzIyOGIyMicsCiAgICAgICAgICAgICAgICAgICAgZnVjaHNpYTogJyNmZjAwZmYnLAogICAgICAgICAgICAgICAgICAgIGdhaW5zYm9ybzogJyNkY2RjZGMnLAogICAgICAgICAgICAgICAgICAgIGdob3N0d2hpdGU6ICcjZjhmOGZmJywKICAgICAgICAgICAgICAgICAgICBnb2xkOiAnI2ZmZDcwMCcsCiAgICAgICAgICAgICAgICAgICAgZ29sZGVucm9kOiAnI2RhYTUyMCcsCiAgICAgICAgICAgICAgICAgICAgZ3JheTogJyM4MDgwODAnLAogICAgICAgICAgICAgICAgICAgIGdyZWVuOiAnIzAwODAwMCcsCiAgICAgICAgICAgICAgICAgICAgZ3JlZW55ZWxsb3c6ICcjYWRmZjJmJywKICAgICAgICAgICAgICAgICAgICBob25leWRldzogJyNmMGZmZjAnLAogICAgICAgICAgICAgICAgICAgIGhvdHBpbms6ICcjZmY2OWI0JywKICAgICAgICAgICAgICAgICAgICAnaW5kaWFucmVkICc6ICcjY2Q1YzVjJywKICAgICAgICAgICAgICAgICAgICBpbmRpZ286ICcjNGIwMDgyJywKICAgICAgICAgICAgICAgICAgICBpdm9yeTogJyNmZmZmZjAnLAogICAgICAgICAgICAgICAgICAgIGtoYWtpOiAnI2YwZTY4YycsCiAgICAgICAgICAgICAgICAgICAgbGF2ZW5kZXI6ICcjZTZlNmZhJywKICAgICAgICAgICAgICAgICAgICBsYXZlbmRlcmJsdXNoOiAnI2ZmZjBmNScsCiAgICAgICAgICAgICAgICAgICAgbGF3bmdyZWVuOiAnIzdjZmMwMCcsCiAgICAgICAgICAgICAgICAgICAgbGVtb25jaGlmZm9uOiAnI2ZmZmFjZCcsCiAgICAgICAgICAgICAgICAgICAgbGlnaHRibHVlOiAnI2FkZDhlNicsCiAgICAgICAgICAgICAgICAgICAgbGlnaHRjb3JhbDogJyNmMDgwODAnLAogICAgICAgICAgICAgICAgICAgIGxpZ2h0Y3lhbjogJyNlMGZmZmYnLAogICAgICAgICAgICAgICAgICAgIGxpZ2h0Z29sZGVucm9keWVsbG93OiAnI2ZhZmFkMicsCiAgICAgICAgICAgICAgICAgICAgbGlnaHRncmV5OiAnI2QzZDNkMycsCiAgICAgICAgICAgICAgICAgICAgbGlnaHRncmVlbjogJyM5MGVlOTAnLAogICAgICAgICAgICAgICAgICAgIGxpZ2h0cGluazogJyNmZmI2YzEnLAogICAgICAgICAgICAgICAgICAgIGxpZ2h0c2FsbW9uOiAnI2ZmYTA3YScsCiAgICAgICAgICAgICAgICAgICAgbGlnaHRzZWFncmVlbjogJyMyMGIyYWEnLAogICAgICAgICAgICAgICAgICAgIGxpZ2h0c2t5Ymx1ZTogJyM4N2NlZmEnLAogICAgICAgICAgICAgICAgICAgIGxpZ2h0c2xhdGVncmF5OiAnIzc3ODg5OScsCiAgICAgICAgICAgICAgICAgICAgbGlnaHRzdGVlbGJsdWU6ICcjYjBjNGRlJywKICAgICAgICAgICAgICAgICAgICBsaWdodHllbGxvdzogJyNmZmZmZTAnLAogICAgICAgICAgICAgICAgICAgIGxpbWU6ICcjMDBmZjAwJywKICAgICAgICAgICAgICAgICAgICBsaW1lZ3JlZW46ICcjMzJjZDMyJywKICAgICAgICAgICAgICAgICAgICBsaW5lbjogJyNmYWYwZTYnLAogICAgICAgICAgICAgICAgICAgIG1hZ2VudGE6ICcjZmYwMGZmJywKICAgICAgICAgICAgICAgICAgICBtYXJvb246ICcjODAwMDAwJywKICAgICAgICAgICAgICAgICAgICBtZWRpdW1hcXVhbWFyaW5lOiAnIzY2Y2RhYScsCiAgICAgICAgICAgICAgICAgICAgbWVkaXVtYmx1ZTogJyMwMDAwY2QnLAogICAgICAgICAgICAgICAgICAgIG1lZGl1bW9yY2hpZDogJyNiYTU1ZDMnLAogICAgICAgICAgICAgICAgICAgIG1lZGl1bXB1cnBsZTogJyM5MzcwZDgnLAogICAgICAgICAgICAgICAgICAgIG1lZGl1bXNlYWdyZWVuOiAnIzNjYjM3MScsCiAgICAgICAgICAgICAgICAgICAgbWVkaXVtc2xhdGVibHVlOiAnIzdiNjhlZScsCiAgICAgICAgICAgICAgICAgICAgbWVkaXVtc3ByaW5nZ3JlZW46ICcjMDBmYTlhJywKICAgICAgICAgICAgICAgICAgICBtZWRpdW10dXJxdW9pc2U6ICcjNDhkMWNjJywKICAgICAgICAgICAgICAgICAgICBtZWRpdW12aW9sZXRyZWQ6ICcjYzcxNTg1JywKICAgICAgICAgICAgICAgICAgICBtaWRuaWdodGJsdWU6ICcjMTkxOTcwJywKICAgICAgICAgICAgICAgICAgICBtaW50Y3JlYW06ICcjZjVmZmZhJywKICAgICAgICAgICAgICAgICAgICBtaXN0eXJvc2U6ICcjZmZlNGUxJywKICAgICAgICAgICAgICAgICAgICBtb2NjYXNpbjogJyNmZmU0YjUnLAogICAgICAgICAgICAgICAgICAgIG5hdmFqb3doaXRlOiAnI2ZmZGVhZCcsCiAgICAgICAgICAgICAgICAgICAgbmF2eTogJyMwMDAwODAnLAogICAgICAgICAgICAgICAgICAgIG9sZGxhY2U6ICcjZmRmNWU2JywKICAgICAgICAgICAgICAgICAgICBvbGl2ZTogJyM4MDgwMDAnLAogICAgICAgICAgICAgICAgICAgIG9saXZlZHJhYjogJyM2YjhlMjMnLAogICAgICAgICAgICAgICAgICAgIG9yYW5nZTogJyNmZmE1MDAnLAogICAgICAgICAgICAgICAgICAgIG9yYW5nZXJlZDogJyNmZjQ1MDAnLAogICAgICAgICAgICAgICAgICAgIG9yY2hpZDogJyNkYTcwZDYnLAogICAgICAgICAgICAgICAgICAgIHBhbGVnb2xkZW5yb2Q6ICcjZWVlOGFhJywKICAgICAgICAgICAgICAgICAgICBwYWxlZ3JlZW46ICcjOThmYjk4JywKICAgICAgICAgICAgICAgICAgICBwYWxldHVycXVvaXNlOiAnI2FmZWVlZScsCiAgICAgICAgICAgICAgICAgICAgcGFsZXZpb2xldHJlZDogJyNkODcwOTMnLAogICAgICAgICAgICAgICAgICAgIHBhcGF5YXdoaXA6ICcjZmZlZmQ1JywKICAgICAgICAgICAgICAgICAgICBwZWFjaHB1ZmY6ICcjZmZkYWI5JywKICAgICAgICAgICAgICAgICAgICBwZXJ1OiAnI2NkODUzZicsCiAgICAgICAgICAgICAgICAgICAgcGluazogJyNmZmMwY2InLAogICAgICAgICAgICAgICAgICAgIHBsdW06ICcjZGRhMGRkJywKICAgICAgICAgICAgICAgICAgICBwb3dkZXJibHVlOiAnI2IwZTBlNicsCiAgICAgICAgICAgICAgICAgICAgcHVycGxlOiAnIzgwMDA4MCcsCiAgICAgICAgICAgICAgICAgICAgcmViZWNjYXB1cnBsZTogJyM2NjMzOTknLAogICAgICAgICAgICAgICAgICAgIHJlZDogJyNmZjAwMDAnLAogICAgICAgICAgICAgICAgICAgIHJvc3licm93bjogJyNiYzhmOGYnLAogICAgICAgICAgICAgICAgICAgIHJveWFsYmx1ZTogJyM0MTY5ZTEnLAogICAgICAgICAgICAgICAgICAgIHNhZGRsZWJyb3duOiAnIzhiNDUxMycsCiAgICAgICAgICAgICAgICAgICAgc2FsbW9uOiAnI2ZhODA3MicsCiAgICAgICAgICAgICAgICAgICAgc2FuZHlicm93bjogJyNmNGE0NjAnLAogICAgICAgICAgICAgICAgICAgIHNlYWdyZWVuOiAnIzJlOGI1NycsCiAgICAgICAgICAgICAgICAgICAgc2Vhc2hlbGw6ICcjZmZmNWVlJywKICAgICAgICAgICAgICAgICAgICBzaWVubmE6ICcjYTA1MjJkJywKICAgICAgICAgICAgICAgICAgICBzaWx2ZXI6ICcjYzBjMGMwJywKICAgICAgICAgICAgICAgICAgICBza3libHVlOiAnIzg3Y2VlYicsCiAgICAgICAgICAgICAgICAgICAgc2xhdGVibHVlOiAnIzZhNWFjZCcsCiAgICAgICAgICAgICAgICAgICAgc2xhdGVncmF5OiAnIzcwODA5MCcsCiAgICAgICAgICAgICAgICAgICAgc25vdzogJyNmZmZhZmEnLAogICAgICAgICAgICAgICAgICAgIHNwcmluZ2dyZWVuOiAnIzAwZmY3ZicsCiAgICAgICAgICAgICAgICAgICAgc3RlZWxibHVlOiAnIzQ2ODJiNCcsCiAgICAgICAgICAgICAgICAgICAgdGFuOiAnI2QyYjQ4YycsCiAgICAgICAgICAgICAgICAgICAgdGVhbDogJyMwMDgwODAnLAogICAgICAgICAgICAgICAgICAgIHRoaXN0bGU6ICcjZDhiZmQ4JywKICAgICAgICAgICAgICAgICAgICB0b21hdG86ICcjZmY2MzQ3JywKICAgICAgICAgICAgICAgICAgICB0dXJxdW9pc2U6ICcjNDBlMGQwJywKICAgICAgICAgICAgICAgICAgICB2aW9sZXQ6ICcjZWU4MmVlJywKICAgICAgICAgICAgICAgICAgICB3aGVhdDogJyNmNWRlYjMnLAogICAgICAgICAgICAgICAgICAgIHdoaXRlOiAnI2ZmZmZmZicsCiAgICAgICAgICAgICAgICAgICAgd2hpdGVzbW9rZTogJyNmNWY1ZjUnLAogICAgICAgICAgICAgICAgICAgIHllbGxvdzogJyNmZmZmMDAnLAogICAgICAgICAgICAgICAgICAgIHllbGxvd2dyZWVuOiAnIzlhY2QzMicsCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yc1tjb2xvdXIudG9Mb3dlckNhc2UoKV07CiAgICAgICAgICAgICAgICAvLyAgaWYgKHR5cGVvZiBjb2xvcnNbY29sb3VyLnRvTG93ZXJDYXNlKCldICE9ICd1bmRlZmluZWQnKSByZXR1cm4gY29sb3JzW2NvbG91ci50b0xvd2VyQ2FzZSgpXQogICAgICAgICAgICAgICAgLy8gcmV0dXJuIGZhbHNlCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGlmIChuYW1lLnN0YXJ0c1dpdGgoJyMnKSkgewogICAgICAgICAgICAgICAgdGhpcy5zZXRGcm9tSGV4KG5hbWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgY29uc3QgaGV4Q29sb3IgPSBjb2xvdXJOYW1lVG9IZXgobmFtZSk7CiAgICAgICAgICAgICAgICBpZiAoaGV4Q29sb3IpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRGcm9tSGV4KGhleENvbG9yKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSBoZXhhZGVjaW1hbCB2YWx1ZSBvZiB0aGlzIGNvbG9yLCBpbmNsdWRpbmcgdGhlIGxlYWRpbmcgIiMiIGNoYXJhY3Rlci4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBoZXggdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgdG9IZXgoKSB7CiAgICAgICAgICAgIGZ1bmN0aW9uIGNvbXBvbmVudFRvSGV4KGMpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGludCA9IE1hdGgucm91bmQoYyAqIDI1NSk7CiAgICAgICAgICAgICAgICBjb25zdCBoZXggPSBpbnQudG9TdHJpbmcoMTYpOwogICAgICAgICAgICAgICAgcmV0dXJuIGhleC5sZW5ndGggPT0gMSA/ICcwJyArIGhleCA6IGhleDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gJyMnICsgY29tcG9uZW50VG9IZXgodGhpcy5yKSArIGNvbXBvbmVudFRvSGV4KHRoaXMuZykgKyBjb21wb25lbnRUb0hleCh0aGlzLmIpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDaGVja3MgaWYgdGhpcyBDb2xvciAgY29udGFpbnMgdGhlIHNhbWUgdmFsdWVzIGFzIHRoZSBvdGhlci4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBvdGhlciBDb2xvciB0byBjb21wYXJlIHdpdGguCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYHRydWVgIGlmIHRoZSB2YWx1ZXMgYXJlIHRoZSBzYW1lLCBvdGhlcndpc2UsIGBmYWxzZWAuCiAgICAgICAgICovCiAgICAgICAgaXNFcXVhbChvdGhlcikgewogICAgICAgICAgICByZXR1cm4gdGhpcy5yID09IG90aGVyLnIgJiYgdGhpcy5nID09IG90aGVyLmcgJiYgdGhpcy5iID09IG90aGVyLmIgJiYgdGhpcy5hID09IG90aGVyLmE7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGNvbG9yIGlzIE5PVCBleGFjdGx5IHRoZSBzYW1lIGFzIG90aGVyLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIGNvbG9yIHRvIGNvbXBhcmUgd2l0aC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0cnVlIG9yIGZhbHNlLgogICAgICAgICAqLwogICAgICAgIG5vdEVxdWFscyhvdGhlcikgewogICAgICAgICAgICByZXR1cm4gdGhpcy5yICE9IG90aGVyLnIgJiYgdGhpcy5nICE9IG90aGVyLmcgJiYgdGhpcy5iICE9IG90aGVyLmIgJiYgdGhpcy5hICE9IG90aGVyLmE7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIGNvbG9yIGlzIGFwcHJveGltYXRlbHkgdGhlIHNhbWUgYXMgb3RoZXIuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgY29sb3IgdG8gY29tcGFyZSB3aXRoLgogICAgICAgICAqIEBwYXJhbSBwcmVjaXNpb24gLSBUaGUgcHJlY2lzaW9uIHRvIHdoaWNoIHRoZSB2YWx1ZXMgbXVzdCBtYXRjaC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0cnVlIG9yIGZhbHNlLgogICAgICAgICAqLwogICAgICAgIGFwcHJveEVxdWFsKG90aGVyLCBwcmVjaXNpb24gPSBOdW1iZXIuRVBTSUxPTikgewogICAgICAgICAgICByZXR1cm4gKE1hdGguYWJzKHRoaXMuciAtIG90aGVyLnIpIDwgcHJlY2lzaW9uICYmCiAgICAgICAgICAgICAgICBNYXRoLmFicyh0aGlzLmcgLSBvdGhlci5nKSA8IHByZWNpc2lvbiAmJgogICAgICAgICAgICAgICAgTWF0aC5hYnModGhpcy5iIC0gb3RoZXIuYikgPCBwcmVjaXNpb24gJiYKICAgICAgICAgICAgICAgIE1hdGguYWJzKHRoaXMuYSAtIG90aGVyLmEpIDwgcHJlY2lzaW9uKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyBhIG5ldyBDb2xvciB3aGljaCBpcyB0aGlzIENvbG9yIGFkZGVkIHRvIG90aGVyLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIGNvbG9yIHRvIGFkZC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBjb2xvci4KICAgICAgICAgKi8KICAgICAgICBhZGQob3RoZXIpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcih0aGlzLnIgKyBvdGhlci5yLCB0aGlzLmcgKyBvdGhlci5nLCB0aGlzLmIgKyBvdGhlci5iLCB0aGlzLmEgKyBvdGhlci5hKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVXBkYXRlcyB0aGlzIENvbG9yIGJ5IGFkZGluZyB0aGUgdmFsdWVzIGZyb20gdGhlIG90aGVyIGNvbG9yLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIGNvbG9yIHRvIGFkZC4KICAgICAgICAgKi8KICAgICAgICBhZGRJblBsYWNlKG90aGVyKSB7CiAgICAgICAgICAgIHRoaXMuciArPSBvdGhlci5yOwogICAgICAgICAgICB0aGlzLmcgKz0gb3RoZXIuZzsKICAgICAgICAgICAgdGhpcy5iICs9IG90aGVyLmI7CiAgICAgICAgICAgIHRoaXMuYSArPSBvdGhlci5hOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIGEgbmV3IGNvbG9yIHdoaWNoIGlzIHRoaXMgY29sb3Igc3VidHJhY3RlZCBmcm9tIG90aGVyLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIGNvbG9yIHRvIHN1YnRyYWN0LgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGEgbmV3IGNvbG9yLgogICAgICAgICAqLwogICAgICAgIHN1YnRyYWN0KG90aGVyKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IodGhpcy5yIC0gb3RoZXIuciwgdGhpcy5nIC0gb3RoZXIuZywgdGhpcy5iIC0gb3RoZXIuYiwgdGhpcy5hIC0gb3RoZXIuYSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNjYWxlcyB0aGlzIGNvbG9yIGJ5IHNjYWxhciBhbmQgcmV0dXJuIHRoZSByZXN1bHQgYXMgYSBuZXcgVmVjNC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBzY2FsYXIgLSBUaGUgc2NhbGFyIHZhbHVlLgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGEgbmV3IGNvbG9yLgogICAgICAgICAqLwogICAgICAgIHNjYWxlKHNjYWxhcikgewogICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKHRoaXMuciAqIHNjYWxhciwgdGhpcy5nICogc2NhbGFyLCB0aGlzLmIgKiBzY2FsYXIsIHRoaXMuYSAqIHNjYWxhcik7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNjYWxlcyB0aGlzIGNvbG9yIGJ5IHNjYWxhci4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBzY2FsYXIgLSBUaGUgc2NhbGFyIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHNjYWxlSW5QbGFjZShzY2FsYXIpIHsKICAgICAgICAgICAgdGhpcy5yICo9IHNjYWxhcjsKICAgICAgICAgICAgdGhpcy5nICo9IHNjYWxhcjsKICAgICAgICAgICAgdGhpcy5iICo9IHNjYWxhcjsKICAgICAgICAgICAgdGhpcy5hICo9IHNjYWxhcjsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQXBwbHkgZ2FtbWEgY29ycmVjdGlvbiB0byB0aGlzIGNvbG9yCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gZ2FtbWEgLSBUaGUgZ2FtbWEgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgYXBwbHlHYW1tYShnYW1tYSkgewogICAgICAgICAgICB0aGlzLnNldChNYXRoLnBvdyh0aGlzLnIsIGdhbW1hKSwgTWF0aC5wb3codGhpcy5nLCBnYW1tYSksIE1hdGgucG93KHRoaXMuYiwgZ2FtbWEpLCB0aGlzLmEpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0byBsaW5lYXIgY29sb3Igc3BhY2UgYW5kIHJldHVybnMgYSBuZXcgY29sb3IKICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBnYW1tYSAtIFRoZSBnYW1tYSB2YWx1ZS4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBjb2xvci4KICAgICAgICAgKi8KICAgICAgICB0b0xpbmVhcihnYW1tYSA9IDIuMikgewogICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKE1hdGgucG93KHRoaXMuciwgZ2FtbWEpLCBNYXRoLnBvdyh0aGlzLmcsIGdhbW1hKSwgTWF0aC5wb3codGhpcy5iLCBnYW1tYSksIHRoaXMuYSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIHJldHVybnMgYSBuZXcgY29sb3IgdmFsdWUgdmFsdWUgaXMgbWFwcGVkIGludG8gYSBnYW1tYSBjdXJ2ZQogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGdhbW1hIC0gVGhlIGdhbW1hIHZhbHVlLgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGEgbmV3IGNvbG9yLgogICAgICAgICAqLwogICAgICAgIHRvR2FtbWEoZ2FtbWEgPSAyLjIpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihNYXRoLnBvdyh0aGlzLnIsIDEuMCAvIGdhbW1hKSwgTWF0aC5wb3codGhpcy5nLCAxLjAgLyBnYW1tYSksIE1hdGgucG93KHRoaXMuYiwgMS4wIC8gZ2FtbWEpLCB0aGlzLmEpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDYWxjdWxhdGVzIGFuZCByZXR1cm5zIHRoZSBsdW1pbmFuY2Ugb2YgdGhlIGxpbmVhciBSR0IgY29tcG9uZW50cy4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGx1bWluYW5jZSgpIHsKICAgICAgICAgICAgcmV0dXJuIDAuMjEyNiAqIHRoaXMuciArIDAuNzE1MiAqIHRoaXMuZyArIDAuMDcyMiAqIHRoaXMuYjsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUGVyZm9ybXMgYSBsaW5lYXIgaW50ZXJwb2xhdGlvbiBiZXR3ZWVuIHRoaXMgY29sb3IgYW5kIG90aGVyLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIGNvbG9yIHRvIGludGVycG9sYXRlIGJldHdlZW4uCiAgICAgICAgICogQHBhcmFtIHQgLSBJbnRlcnBvbGF0aW9uIGFtb3VudCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzLgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGEgbmV3IGNvbG9yLgogICAgICAgICAqLwogICAgICAgIGxlcnAob3RoZXIsIHQpIHsKICAgICAgICAgICAgY29uc3QgYXIgPSB0aGlzLnI7CiAgICAgICAgICAgIGNvbnN0IGFnID0gdGhpcy5nOwogICAgICAgICAgICBjb25zdCBhYiA9IHRoaXMuYjsKICAgICAgICAgICAgY29uc3QgYWEgPSB0aGlzLmE7CiAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoYXIgKyB0ICogKG90aGVyLnIgLSBhciksIGFnICsgdCAqIChvdGhlci5nIC0gYWcpLCBhYiArIHQgKiAob3RoZXIuYiAtIGFiKSwgYWEgKyB0ICogKG90aGVyLmEgLSBhYSkpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgcmFuZG9tIGNvbG9yLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGdhbW1hT2Zmc2V0IC0gVGhlIGdhbW1hIG9mZnNldC4gVmFsdWVzIGJldHdlZW4gMCBhbmQgMSBpbmNyZWFzZSB0aGUgYXZlcmFnZSBicmlnaHRuZXNzIG9mIHRoZSBnZW5lcmF0ZWQgY29sb3IuIFZhbHVlcyBiZXR3ZWVuIDAgYW5kIC0xIGRhcmtlbiB0aGUgZ2VuZXJhdGVkIGNvbG9yIHZhbHVlcy4KICAgICAgICAgKiBAcGFyYW0gcmFuZG9tQWxwaGEgLSBEZXRlcm1pbmVzIHdoZXRoZXIgdGhlIGFscGhhIGNoYW5uZWwgaXMgcmFuZG9tLiBJZiBub3QsIHRoZSBhbHBoYSB2YWx1ZXMgd2lsbCBiZSAxLjAuCiAgICAgICAgICogQHJldHVybiAtIFRoZSBuZXcgcmFuZG9tIGNvbG9yLgogICAgICAgICAqLwogICAgICAgIHN0YXRpYyByYW5kb20oZ2FtbWFPZmZzZXQgPSAwLjAsIHJhbmRvbUFscGhhID0gZmFsc2UpIHsKICAgICAgICAgICAgaWYgKGdhbW1hT2Zmc2V0ID4gMC4wKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKGdhbW1hT2Zmc2V0ICsgTWF0aC5yYW5kb20oKSAqICgxLjAgLSBnYW1tYU9mZnNldCksIGdhbW1hT2Zmc2V0ICsgTWF0aC5yYW5kb20oKSAqICgxLjAgLSBnYW1tYU9mZnNldCksIGdhbW1hT2Zmc2V0ICsgTWF0aC5yYW5kb20oKSAqICgxLjAgLSBnYW1tYU9mZnNldCksIHJhbmRvbUFscGhhID8gZ2FtbWFPZmZzZXQgKyBNYXRoLnJhbmRvbSgpICogKDEuMCAtIGdhbW1hT2Zmc2V0KSA6IDEuMCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKGdhbW1hT2Zmc2V0IDwgMC4wKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKE1hdGgucmFuZG9tKCkgKiAoMS4wICsgZ2FtbWFPZmZzZXQpLCBNYXRoLnJhbmRvbSgpICogKDEuMCArIGdhbW1hT2Zmc2V0KSwgTWF0aC5yYW5kb20oKSAqICgxLjAgKyBnYW1tYU9mZnNldCksIHJhbmRvbUFscGhhID8gTWF0aC5yYW5kb20oKSAqICgxLjAgKyBnYW1tYU9mZnNldCkgOiAxLjApOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IoTWF0aC5yYW5kb20oKSwgTWF0aC5yYW5kb20oKSwgTWF0aC5yYW5kb20oKSwgcmFuZG9tQWxwaGEgPyBNYXRoLnJhbmRvbSgpIDogMS4wKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2xvbmVzIHRoaXMgY29sb3IgYW5kIHJldHVybnMgYSBuZXcgY29sb3IuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBjb2xvci4KICAgICAgICAgKi8KICAgICAgICBjbG9uZSgpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcih0aGlzLl9fZGF0YVswXSwgdGhpcy5fX2RhdGFbMV0sIHRoaXMuX19kYXRhWzJdLCB0aGlzLl9fZGF0YVszXSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgdGhlIHR5cGUgYXMgYW4gYXJyYXkuIE9mdGVuIHVzZWQgdG8gcGFzcyB0eXBlcyB0byB0aGUgR1BVLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYXMgYW4gYXJyYXkuCiAgICAgICAgICovCiAgICAgICAgYXNBcnJheSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19kYXRhOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSB0eXBlIGFzIGEgMyBjb21wb25lbnQgYXJyYXkuIE9mdGVuIHVzZWQgdG8gcGFzcyB0eXBlcyB0byB0aGUgR1BVLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYXMgYSAzIGNvbXBvbmVudCBhcnJheS4KICAgICAgICAgKiBAcHJpdmF0ZQogICAgICAgICAqLwogICAgICAgIGFzM0NvbXBvbmVudEFycmF5KCkgewogICAgICAgICAgICByZXR1cm4gW3RoaXMuX19kYXRhWzBdLCB0aGlzLl9fZGF0YVsxXSwgdGhpcy5fX2RhdGFbMl1dOwogICAgICAgIH0KICAgICAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAgICAgLy8gUGVyc2lzdGVuY2UKICAgICAgICAvKioKICAgICAgICAgKiBUaGUgdG9KU09OIG1ldGhvZCBlbmNvZGVzIHRoaXMgdHlwZSBhcyBhIGpzb24gb2JqZWN0IGZvciBwZXJzaXN0ZW5jZS4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUaGUganNvbiBvYmplY3QuCiAgICAgICAgICovCiAgICAgICAgdG9KU09OKCkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgcjogdGhpcy5yLAogICAgICAgICAgICAgICAgZzogdGhpcy5nLAogICAgICAgICAgICAgICAgYjogdGhpcy5iLAogICAgICAgICAgICAgICAgYTogdGhpcy5hLAogICAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBUaGUgZnJvbUpTT04gbWV0aG9kIGRlY29kZXMgYSBqc29uIG9iamVjdCBmb3IgdGhpcyB0eXBlLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGogLSBUaGUganNvbiBvYmplY3QuCiAgICAgICAgICovCiAgICAgICAgZnJvbUpTT04oaikgewogICAgICAgICAgICB0aGlzLnIgPSBqLnI7CiAgICAgICAgICAgIHRoaXMuZyA9IGouZzsKICAgICAgICAgICAgdGhpcy5iID0gai5iOwogICAgICAgICAgICB0aGlzLmEgPSBqLmE7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIExvYWRzIHRoZSBzdGF0ZSBvZiB0aGUgdmFsdWUgZnJvbSBhIGJpbmFyeSByZWFkZXIuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIC0gVGhlIHJlYWRlciB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICByZWFkQmluYXJ5KHJlYWRlcikgewogICAgICAgICAgICB0aGlzLnIgPSByZWFkZXIubG9hZEZsb2F0MzIoKTsKICAgICAgICAgICAgdGhpcy5nID0gcmVhZGVyLmxvYWRGbG9hdDMyKCk7CiAgICAgICAgICAgIHRoaXMuYiA9IHJlYWRlci5sb2FkRmxvYXQzMigpOwogICAgICAgICAgICB0aGlzLmEgPSByZWFkZXIubG9hZEZsb2F0MzIoKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyB0aGUgQ1NTIHJnYmEgc3RyaW5nLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgdG9DU1NTdHJpbmcoKSB7CiAgICAgICAgICAgIHJldHVybiAoJ3JnYmEoJyArCiAgICAgICAgICAgICAgICBNYXRoLnJvdW5kKHRoaXMuciAqIDI1NSkgKwogICAgICAgICAgICAgICAgJywgJyArCiAgICAgICAgICAgICAgICBNYXRoLnJvdW5kKHRoaXMuZyAqIDI1NSkgKwogICAgICAgICAgICAgICAgJywgJyArCiAgICAgICAgICAgICAgICBNYXRoLnJvdW5kKHRoaXMuYiAqIDI1NSkgKwogICAgICAgICAgICAgICAgJywgJyArCiAgICAgICAgICAgICAgICB0aGlzLmEgKwogICAgICAgICAgICAgICAgJyknKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBDbGFzcyByZXByZXNlbnRpbmcgZXVsZXIgYW5nbGVzLiBFdWxlciBhbmdsZXMgZGVzY3JpYmUgcm90YXRpbmcgYW4gb2JqZWN0CiAgICAgKiBhcm91bmQgaXRzIHZhcmlvdXMgYXhpcyBpbiBhIHNwZWNpZmllZCBheGlzIG9yZGVyLgogICAgICoKICAgICAqLwogICAgY2xhc3MgRXVsZXJBbmdsZXMgewogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZSBhIGV1bGVyIGFuZ2xlLiBSZWNlaXZlcyB0aGUgeHl6IHZhbHVlcyBpbiByYWRpYW5zIGFuZCB0aGUgb3JkZXIgdGhhdCB0aGUgcm90YXRpb25zIGFyZSBhcHBsaWVkLgogICAgICAgICAqCiAgICAgICAgICogT3JkZXIgcGFyYW1ldGVyIHZhbHVlczogYFhZWjogMGAsIGBZWlg6IDFgLCBgWlhZOiAyYCwgYFhaWTogM2AsIGBaWVg6IDRgLCBgWVhaOiA1YAogICAgICAgICAqCiAgICAgICAgICogSXQgY291bGQgYmUgZWl0aGVyIHRoZSBgc3RyaW5nYCBvciB0aGUgYG51bWJlcmAgdmFsdWUuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0geCAtIFRoZSBhbmdsZSBvZiB0aGUgeCBheGlzIGluIGRlZ3JlZXMuIERlZmF1bHQgaXMgMC4KICAgICAgICAgKiBAcGFyYW0geSAtIFRoZSBhbmdsZSBvZiB0aGUgeSBheGlzIGluIGRlZ3JlZXMuIERlZmF1bHQgaXMgMC4KICAgICAgICAgKiBAcGFyYW0geiAtIFRoZSBhbmdsZSBvZiB0aGUgeiBheGlzIGluIGRlZ3JlZXMuIERlZmF1bHQgaXMgMC4KICAgICAgICAgKiBAcGFyYW0gb3JkZXIgLSBUaGUgb3JkZXIgaW4gd2hpY2ggdGhlIHJvdGF0aW9ucyBhcmUgYXBwbGllZC4KICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3Rvcih4ID0gMCwgeSA9IDAsIHogPSAwLCBvcmRlciA9IDApIHsKICAgICAgICAgICAgaWYgKHR5cGVvZiBvcmRlciA9PT0gJ251bWJlcicgJiYgIWlzTmFOKG9yZGVyKSkKICAgICAgICAgICAgICAgIHRoaXMub3JkZXIgPSBvcmRlcjsKICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBzd2l0Y2ggKG9yZGVyKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnWFlaJzoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcmRlciA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ1laWCc6CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3JkZXIgPSAxOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdaWFknOgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9yZGVyID0gMjsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnWFpZJzoKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vcmRlciA9IDM7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ1pZWCc6CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub3JkZXIgPSA0OwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdZWFonOgogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9yZGVyID0gNTsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIEV1bGVyIEFuZ2xlcyBPcmRlcjonICsgb3JkZXIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh4IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IHg7CiAgICAgICAgICAgICAgICBjb25zdCBieXRlT2Zmc2V0ID0geTsKICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhID0gbmV3IEZsb2F0MzJBcnJheShidWZmZXIsIGJ5dGVPZmZzZXQsIDQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGEgPSBuZXcgRmxvYXQzMkFycmF5KDMpOwogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGFbMF0gPSB4OwogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGFbMV0gPSB5OwogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGFbMl0gPSB6OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEdldHRlciBmb3IgeCBheGlzIHJvdGF0aW9uLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIHggYXhpcyByb3RhdGlvbi4KICAgICAgICAgKi8KICAgICAgICBnZXQgeCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19kYXRhWzBdOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIHggYXhpcyByb3RhdGlvbi4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCB4KHZhbCkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVswXSA9IHZhbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciB5IGF4aXMgcm90YXRpb24uCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgeSBheGlzIHJvdGF0aW9uLgogICAgICAgICAqLwogICAgICAgIGdldCB5KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX2RhdGFbMV07CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHRlciBmb3IgeSBheGlzIHJvdGF0aW9uLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHZhbCAtIFRoZSB2YWwgcGFyYW0uCiAgICAgICAgICovCiAgICAgICAgc2V0IHkodmFsKSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzFdID0gdmFsOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIHogYXhpcyByb3RhdGlvbi4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSB6IGF4aXMgcm90YXRpb24uCiAgICAgICAgICovCiAgICAgICAgZ2V0IHooKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YVsyXTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0dGVyIGZvciB6IGF4aXMgcm90YXRpb24uCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gdmFsIC0gVGhlIHZhbCBwYXJhbS4KICAgICAgICAgKi8KICAgICAgICBzZXQgeih2YWwpIHsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMl0gPSB2YWw7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHMgdGhlIEV1bGVyQW5nbGVzCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0geCAtIFRoZSB4IGF4aXMgcm90YXRpb24gaW4gcmFkaWFucy4KICAgICAgICAgKiBAcGFyYW0geSAtIFRoZSB5IGF4aXMgcm90YXRpb24gaW4gcmFkaWFucy4KICAgICAgICAgKiBAcGFyYW0geiAtIFRoZSB6IGF4aXMgcm90YXRpb24gaW4gcmFkaWFucy4KICAgICAgICAgKi8KICAgICAgICBzZXQoeCwgeSwgeikgewogICAgICAgICAgICB0aGlzLl9fZGF0YVswXSA9IHg7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzFdID0geTsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMl0gPSB6OwogICAgICAgIH0KICAgICAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgICAvLyBQZXJzaXN0ZW5jZQogICAgICAgIC8qKgogICAgICAgICAqIENvbnZlcnRzIHRoaXMgVmVjMyB0byBhIHN0cmluZyBpbiBKU09OIGZvcm1hdC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHRvU3RyaW5nKCkgewogICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbmV3LWNhcAogICAgICAgICAgICByZXR1cm4gU3RyaW5nRnVuY3Rpb25zLnN0cmluZ2lmeUpTT05XaXRoRml4ZWRQcmVjaXNpb24odGhpcy50b0pTT04oKSk7CiAgICAgICAgfQogICAgICAgIHRvSlNPTigpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHg6IHRoaXMuX19kYXRhWzBdLAogICAgICAgICAgICAgICAgeTogdGhpcy5fX2RhdGFbMV0sCiAgICAgICAgICAgICAgICB6OiB0aGlzLl9fZGF0YVsyXSwKICAgICAgICAgICAgICAgIG9yZGVyOiB0aGlzLm9yZGVyLAogICAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICBmcm9tSlNPTihqc29uKSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzBdID0ganNvbi54OwogICAgICAgICAgICB0aGlzLl9fZGF0YVsxXSA9IGpzb24ueTsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMl0gPSBqc29uLno7CiAgICAgICAgICAgIHRoaXMub3JkZXIgPSBqc29uLm9yZGVyOwogICAgICAgIH0KICAgIH0KCiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuZXctY2FwICovCiAgICAvKioKICAgICAqIEEgY2xhc3MgcmVwcmVzZW50aW5nIGEgM3gzIG1hdHJpeC4KICAgICAqIFRoaXMgbWF0cml4IGNsYXNzIGlzIGJhc2VkIG9uIEdMTSwgYW5kIGlzIGNvbHVtbiBtYWpvci4KICAgICAqCiAgICAgKi8KICAgIGNsYXNzIE1hdDMgewogICAgICAgIC8qKgogICAgICAgICAqIEluaXRpYWxpemVzIHRoZSBNYXQzIGNsYXNzIHdpdGggZ2l2ZW4gZGF0YS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBtMDAgLSBSb3cgMCwgY29sdW1uIDAuCiAgICAgICAgICogQHBhcmFtIG0wMSAtIFJvdyAwLCBjb2x1bW4gMS4KICAgICAgICAgKiBAcGFyYW0gbTAyIC0gUm93IDAsIGNvbHVtbiAyLgogICAgICAgICAqIEBwYXJhbSBtMTAgLSBSb3cgMSwgY29sdW1uIDAuCiAgICAgICAgICogQHBhcmFtIG0xMSAtIFJvdyAxLCBjb2x1bW4gMS4KICAgICAgICAgKiBAcGFyYW0gbTEyIC0gUm93IDEsIGNvbHVtbiAyLgogICAgICAgICAqIEBwYXJhbSBtMjAgLSBSb3cgMiwgY29sdW1uIDAuCiAgICAgICAgICogQHBhcmFtIG0yMSAtIFJvdyAyLCBjb2x1bW4gMS4KICAgICAgICAgKiBAcGFyYW0gbTIyIC0gUm93IDIsIGNvbHVtbiAyLgogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKG0wMCA9IDEsIG0wMSA9IDAsIG0wMiA9IDAsIG0xMCA9IDAsIG0xMSA9IDEsIG0xMiA9IDAsIG0yMCA9IDAsIG0yMSA9IDAsIG0yMiA9IDEpIHsKICAgICAgICAgICAgaWYgKG0wMCBpbnN0YW5jZW9mIFZlYzMgJiYgbTAxIGluc3RhbmNlb2YgVmVjMyAmJiBtMDIgaW5zdGFuY2VvZiBWZWMzKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9fZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoOSk7CiAgICAgICAgICAgICAgICB0aGlzLnNldChtMDAueCwgbTAwLnksIG0wMC56LCBtMDEueCwgbTAxLnksIG0wMS56LCBtMDIueCwgbTAyLnksIG0wMi56KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChtMDAgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkpIHsKICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhID0gbTAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKG0wMCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYERlcHJlY2F0ZWQsIHBsZWFzZSB1c2UgbmV3IFZlYzMobmV3IEZsb2F0MzJBcnJheShidWZmZXIsIGJ5dGVPZmZzZXQsIDkpKWApOwogICAgICAgICAgICAgICAgY29uc3QgYnVmZmVyID0gbTAwOwogICAgICAgICAgICAgICAgY29uc3QgYnl0ZU9mZnNldCA9IG0wMTsKICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhID0gbmV3IEZsb2F0MzJBcnJheShidWZmZXIsIGJ5dGVPZmZzZXQsIDkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGEgPSBuZXcgRmxvYXQzMkFycmF5KDkpOwogICAgICAgICAgICAgICAgdGhpcy5zZXQobTAwLCBtMDEsIG0wMiwgbTEwLCBtMTEsIG0xMiwgbTIwLCBtMjEsIG0yMik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgICAvLyBwcm9wZXJ0aWVzCiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciByb3cgMCwgY29sdW1uIDAuCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIG0wMCB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBnZXQgbTAwKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX2RhdGFbMF07CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHRlciBmb3Igcm93IDAsIGNvbHVtbiAwLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHZhbCAtIFRoZSB2YWwgcGFyYW0uCiAgICAgICAgICovCiAgICAgICAgc2V0IG0wMCh2YWwpIHsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMF0gPSB2YWw7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEdldHRlciBmb3Igcm93IDAsIGNvbHVtbiAxLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIG0wMSB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBnZXQgbTAxKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX2RhdGFbMV07CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHRlciBmb3Igcm93IDAsIGNvbHVtbiAxLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHZhbCAtIFRoZSB2YWwgcGFyYW0uCiAgICAgICAgICovCiAgICAgICAgc2V0IG0wMSh2YWwpIHsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMV0gPSB2YWw7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEdldHRlciBmb3Igcm93IDAsIGNvbHVtbiAyLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIG0wMiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBnZXQgbTAyKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX2RhdGFbMl07CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHRlciBmb3Igcm93IDAsIGNvbHVtbiAyLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHZhbCAtIFRoZSB2YWwgcGFyYW0uCiAgICAgICAgICovCiAgICAgICAgc2V0IG0wMih2YWwpIHsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMl0gPSB2YWw7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEdldHRlciBmb3Igcm93IDEsIGNvbHVtbiAwLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIG0xMCB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBnZXQgbTEwKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX2RhdGFbM107CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHRlciBmb3Igcm93IDEsIGNvbHVtbiAwLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHZhbCAtIFRoZSB2YWwgcGFyYW0uCiAgICAgICAgICovCiAgICAgICAgc2V0IG0xMCh2YWwpIHsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbM10gPSB2YWw7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEdldHRlciBmb3Igcm93IDEsIGNvbHVtbiAxCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgbTExIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGdldCBtMTEoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YVs0XTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0dGVyIGZvciByb3cgMSwgY29sdW1uIDEuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gdmFsIC0gVGhlIHZhbCBwYXJhbS4KICAgICAgICAgKi8KICAgICAgICBzZXQgbTExKHZhbCkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVs0XSA9IHZhbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciByb3cgMSwgY29sdW1uIDIuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgbTEyIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGdldCBtMTIoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YVs1XTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0dGVyIGZvciByb3cgMSwgY29sdW1uIDIuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gdmFsIC0gVGhlIHZhbCBwYXJhbS4KICAgICAgICAgKi8KICAgICAgICBzZXQgbTEyKHZhbCkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVs1XSA9IHZhbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciByb3cgMiwgY29sdW1uIDAuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgbTIwIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGdldCBtMjAoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YVs2XTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0dGVyIGZvciByb3cgMiwgY29sdW1uIDAuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gdmFsIC0gVGhlIHZhbCBwYXJhbS4KICAgICAgICAgKi8KICAgICAgICBzZXQgbTIwKHZhbCkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVs2XSA9IHZhbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciByb3cgMiwgY29sdW1uIDEuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgbTIxIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGdldCBtMjEoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YVs3XTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0dGVyIGZvciByb3cgMiwgY29sdW1uIDEuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gdmFsIC0gVGhlIHZhbCBwYXJhbS4KICAgICAgICAgKi8KICAgICAgICBzZXQgbTIxKHZhbCkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVs3XSA9IHZhbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciByb3cgMiwgY29sdW1uIDIuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgbTIyIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGdldCBtMjIoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YVs4XTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0dGVyIGZvciByb3cgMiwgY29sdW1uIDIuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gdmFsIC0gVGhlIHZhbCBwYXJhbS4KICAgICAgICAgKi8KICAgICAgICBzZXQgbTIyKHZhbCkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVs4XSA9IHZhbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciB0aGUgYHhgIGF4aXMuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgYHhgIGF4aXMgYXMgYSBWZWMzLgogICAgICAgICAqLwogICAgICAgIGdldCB4QXhpcygpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMzKG5ldyBGbG9hdDMyQXJyYXkodGhpcy5fX2RhdGEuYnVmZmVyLCAwLCAzKSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHRlciBmb3IgdGhlIGB4YCBheGlzLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHZlYzMgLSBUaGUgdmVjMyB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBzZXQgeEF4aXModmVjMykgewogICAgICAgICAgICB0aGlzLnhBeGlzLnNldCh2ZWMzLngsIHZlYzMueSwgdmVjMy56KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciB0aGUgYHlgIGF4aXMuCiAgICAgICAgICogKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgYHlgIGF4aXMgYXMgYSBWZWMzLgogICAgICAgICAqLwogICAgICAgIGdldCB5QXhpcygpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMzKG5ldyBGbG9hdDMyQXJyYXkodGhpcy5fX2RhdGEuYnVmZmVyLCAzICogNCwgMykpOyAvLyA0IGJ5dGVzIHBlciAzMmJpdCBmbG9hdAogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIHRoZSBgeWAgYXhpcy4KICAgICAgICAgKiBAcGFyYW0gdmVjMyAtIFRoZSB2ZWMzIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHNldCB5QXhpcyh2ZWMzKSB7CiAgICAgICAgICAgIHRoaXMueUF4aXMuc2V0KHZlYzMueCwgdmVjMy55LCB2ZWMzLnopOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIHRoZSBgemAgYXhpcy4KICAgICAgICAgKiAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBgemAgYXhpcyBhcyBhIFZlYzMuCiAgICAgICAgICovCiAgICAgICAgZ2V0IHpBeGlzKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzMobmV3IEZsb2F0MzJBcnJheSh0aGlzLl9fZGF0YS5idWZmZXIsIDYgKiA0LCAzKSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHRlciBmb3IgdGhlIGB6YCBheGlzLgogICAgICAgICAqIEBwYXJhbSB2ZWMzIC0gVGhlIHZlYzMgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgc2V0IHpBeGlzKHZlYzMpIHsKICAgICAgICAgICAgdGhpcy56QXhpcy5zZXQodmVjMy54LCB2ZWMzLnksIHZlYzMueik7CiAgICAgICAgfQogICAgICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAgICAgLy8gU2V0dGVycwogICAgICAgIC8qKgogICAgICAgICAqIFNldHMgdGhlIHN0YXRlIG9mIHRoZSBNYXQzIGNsYXNzCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gbTAwIC0gUm93IDAsIGNvbHVtbiAwLgogICAgICAgICAqIEBwYXJhbSBtMDEgLSBSb3cgMCwgY29sdW1uIDEuCiAgICAgICAgICogQHBhcmFtIG0wMiAtIFJvdyAwLCBjb2x1bW4gMi4KICAgICAgICAgKiBAcGFyYW0gbTEwIC0gUm93IDEsIGNvbHVtbiAwLgogICAgICAgICAqIEBwYXJhbSBtMTEgLSBSb3cgMSwgY29sdW1uIDEuCiAgICAgICAgICogQHBhcmFtIG0xMiAtIFJvdyAxLCBjb2x1bW4gMi4KICAgICAgICAgKiBAcGFyYW0gbTIwIC0gUm93IDIsIGNvbHVtbiAwLgogICAgICAgICAqIEBwYXJhbSBtMjEgLSBSb3cgMiwgY29sdW1uIDEuCiAgICAgICAgICogQHBhcmFtIG0yMiAtIFJvdyAyLCBjb2x1bW4gMi4KICAgICAgICAgKi8KICAgICAgICBzZXQobTAwID0gMSwgbTAxID0gMCwgbTAyID0gMCwgbTEwID0gMCwgbTExID0gMSwgbTEyID0gMCwgbTIwID0gMCwgbTIxID0gMCwgbTIyID0gMSkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVswXSA9IG0wMDsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMV0gPSBtMDE7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzJdID0gbTAyOwogICAgICAgICAgICB0aGlzLl9fZGF0YVszXSA9IG0xMDsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbNF0gPSBtMTE7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzVdID0gbTEyOwogICAgICAgICAgICB0aGlzLl9fZGF0YVs2XSA9IG0yMDsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbN10gPSBtMjE7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzhdID0gbTIyOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXRzIHN0YXRlIG9mIHRoZSBNYXQzIHdpdGggdGhlIGlkZW50aXR5ICBNYXRyaXgKICAgICAgICAgKi8KICAgICAgICBzZXRJZGVudGl0eSgpIHsKICAgICAgICAgICAgdGhpcy5zZXQoKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0cyBzdGF0ZSBvZiB0aGUgTWF0MyBmcm9tIGFub3RoZXIgTWF0MwogICAgICAgICAqCiAgICAgICAgICogTm90ZTogd29ya3Mgd2l0aCBlaXRoZXIgTWF0MyBvciBNYXQ0LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG1hdCAtIFRoZSBtYXQgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgc2V0RnJvbU1hdChtYXQpIHsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMF0gPSBtYXQubTAwOwogICAgICAgICAgICB0aGlzLl9fZGF0YVsxXSA9IG1hdC5tMDE7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzJdID0gbWF0Lm0wMjsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbM10gPSBtYXQubTEwOwogICAgICAgICAgICB0aGlzLl9fZGF0YVs0XSA9IG1hdC5tMTE7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzVdID0gbWF0Lm0xMjsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbNl0gPSBtYXQubTIwOwogICAgICAgICAgICB0aGlzLl9fZGF0YVs3XSA9IG1hdC5tMjE7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzhdID0gbWF0Lm0yMjsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2NhbGVzIGFuZCBjYWxjdWxhdGVzIHRoZSBjcm9zcyBwcm9kdWN0IG9mIHRoZSBgVmVjM2AgYW5kIHNldHMgdGhlIHJlc3VsdCBpbiB0aGUgTWF0MwogICAgICAgICAqIE5vdGU6IHRoZSByZXN1bHRpbmcgbWF0cml4ICtaIGF4aXMgaXMgYWxpZ25lZCB3aXRoIHRoZSBwcm92aWRlZCBkaXJlY3Rpb24gdmFsdWUuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gZGlyIC0gVGhlIGRpciB2YWx1ZS4KICAgICAgICAgKiBAcGFyYW0gdXAgLSBUaGUgdXAgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgc2V0RnJvbURpcmVjdGlvbkFuZFVwdmVjdG9yKGRpciwgdXApIHsKICAgICAgICAgICAgY29uc3QgekF4aXMgPSBkaXI7CiAgICAgICAgICAgIGNvbnN0IHpMZW4gPSB6QXhpcy5sZW5ndGgoKTsKICAgICAgICAgICAgaWYgKHpMZW4gPCBOdW1iZXIuRVBTSUxPTikgewogICAgICAgICAgICAgICAgdGhpcy5zZXRJZGVudGl0eSgpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHpBeGlzLnNjYWxlSW5QbGFjZSgxIC8gekxlbik7CiAgICAgICAgICAgIGNvbnN0IHhBeGlzID0gdXAuY3Jvc3MoekF4aXMpOwogICAgICAgICAgICBjb25zdCB4TGVuID0geEF4aXMubGVuZ3RoKCk7CiAgICAgICAgICAgIGlmICh4TGVuID4gTnVtYmVyLkVQU0lMT04pCiAgICAgICAgICAgICAgICB4QXhpcy5zY2FsZUluUGxhY2UoMSAvIHhMZW4pOwogICAgICAgICAgICBjb25zdCB5QXhpcyA9IHpBeGlzLmNyb3NzKHhBeGlzKTsKICAgICAgICAgICAgY29uc3QgeUxlbiA9IHlBeGlzLmxlbmd0aCgpOwogICAgICAgICAgICBpZiAoeUxlbiA+IE51bWJlci5FUFNJTE9OKQogICAgICAgICAgICAgICAgeUF4aXMuc2NhbGVJblBsYWNlKDEgLyB5TGVuKTsKICAgICAgICAgICAgdGhpcy5zZXQoeEF4aXMueCwgeEF4aXMueSwgeEF4aXMueiwgeUF4aXMueCwgeUF4aXMueSwgeUF4aXMueiwgekF4aXMueCwgekF4aXMueSwgekF4aXMueik7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEludmVydHMgYSBNYXQzIGFuZCByZXR1cm5zIHRoZSByZXN1bHQgYXMgYSBuZXcgaW5zdGFuY2UuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBNYXQzLgogICAgICAgICAqLwogICAgICAgIGludmVyc2UoKSB7CiAgICAgICAgICAgIGNvbnN0IGEwMCA9IHRoaXMuX19kYXRhWzBdOwogICAgICAgICAgICBjb25zdCBhMDEgPSB0aGlzLl9fZGF0YVsxXTsKICAgICAgICAgICAgY29uc3QgYTAyID0gdGhpcy5fX2RhdGFbMl07CiAgICAgICAgICAgIGNvbnN0IGExMCA9IHRoaXMuX19kYXRhWzNdOwogICAgICAgICAgICBjb25zdCBhMTEgPSB0aGlzLl9fZGF0YVs0XTsKICAgICAgICAgICAgY29uc3QgYTEyID0gdGhpcy5fX2RhdGFbNV07CiAgICAgICAgICAgIGNvbnN0IGEyMCA9IHRoaXMuX19kYXRhWzZdOwogICAgICAgICAgICBjb25zdCBhMjEgPSB0aGlzLl9fZGF0YVs3XTsKICAgICAgICAgICAgY29uc3QgYTIyID0gdGhpcy5fX2RhdGFbOF07CiAgICAgICAgICAgIGNvbnN0IGIwMSA9IGEyMiAqIGExMSAtIGExMiAqIGEyMTsKICAgICAgICAgICAgY29uc3QgYjExID0gLWEyMiAqIGExMCArIGExMiAqIGEyMDsKICAgICAgICAgICAgY29uc3QgYjIxID0gYTIxICogYTEwIC0gYTExICogYTIwOwogICAgICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGRldGVybWluYW50CiAgICAgICAgICAgIGxldCBkZXQgPSBhMDAgKiBiMDEgKyBhMDEgKiBiMTEgKyBhMDIgKiBiMjE7CiAgICAgICAgICAgIGlmICghZGV0KSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1VuYWJsZSB0byBpbnZlcnQgTWF0MycpOwogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBNYXQzKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGV0ID0gMS4wIC8gZGV0OwogICAgICAgICAgICByZXR1cm4gbmV3IE1hdDMoYjAxICogZGV0LCAoLWEyMiAqIGEwMSArIGEwMiAqIGEyMSkgKiBkZXQsIChhMTIgKiBhMDEgLSBhMDIgKiBhMTEpICogZGV0LCBiMTEgKiBkZXQsIChhMjIgKiBhMDAgLSBhMDIgKiBhMjApICogZGV0LCAoLWExMiAqIGEwMCArIGEwMiAqIGExMCkgKiBkZXQsIGIyMSAqIGRldCwgKC1hMjEgKiBhMDAgKyBhMDEgKiBhMjApICogZGV0LCAoYTExICogYTAwIC0gYTAxICogYTEwKSAqIGRldCk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEludmVydHMgYSBNYXQzIGluIHBsYWNlIG1vZGlmeWluZyBpdHMgdmFsdWVzLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgaW52ZXJ0SW5QbGFjZSgpIHsKICAgICAgICAgICAgY29uc3QgYTAwID0gdGhpcy5fX2RhdGFbMF07CiAgICAgICAgICAgIGNvbnN0IGEwMSA9IHRoaXMuX19kYXRhWzFdOwogICAgICAgICAgICBjb25zdCBhMDIgPSB0aGlzLl9fZGF0YVsyXTsKICAgICAgICAgICAgY29uc3QgYTEwID0gdGhpcy5fX2RhdGFbM107CiAgICAgICAgICAgIGNvbnN0IGExMSA9IHRoaXMuX19kYXRhWzRdOwogICAgICAgICAgICBjb25zdCBhMTIgPSB0aGlzLl9fZGF0YVs1XTsKICAgICAgICAgICAgY29uc3QgYTIwID0gdGhpcy5fX2RhdGFbNl07CiAgICAgICAgICAgIGNvbnN0IGEyMSA9IHRoaXMuX19kYXRhWzddOwogICAgICAgICAgICBjb25zdCBhMjIgPSB0aGlzLl9fZGF0YVs4XTsKICAgICAgICAgICAgY29uc3QgYjAxID0gYTIyICogYTExIC0gYTEyICogYTIxOwogICAgICAgICAgICBjb25zdCBiMTEgPSAtYTIyICogYTEwICsgYTEyICogYTIwOwogICAgICAgICAgICBjb25zdCBiMjEgPSBhMjEgKiBhMTAgLSBhMTEgKiBhMjA7CiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgZGV0ZXJtaW5hbnQKICAgICAgICAgICAgbGV0IGRldCA9IGEwMCAqIGIwMSArIGEwMSAqIGIxMSArIGEwMiAqIGIyMTsKICAgICAgICAgICAgaWYgKCFkZXQpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignVW5hYmxlIHRvIGludmVydCBNYXQzJyk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGV0ID0gMS4wIC8gZGV0OwogICAgICAgICAgICB0aGlzLnNldChiMDEgKiBkZXQsICgtYTIyICogYTAxICsgYTAyICogYTIxKSAqIGRldCwgKGExMiAqIGEwMSAtIGEwMiAqIGExMSkgKiBkZXQsIGIxMSAqIGRldCwgKGEyMiAqIGEwMCAtIGEwMiAqIGEyMCkgKiBkZXQsICgtYTEyICogYTAwICsgYTAyICogYTEwKSAqIGRldCwgYjIxICogZGV0LCAoLWEyMSAqIGEwMCArIGEwMSAqIGEyMCkgKiBkZXQsIChhMTEgKiBhMDAgLSBhMDEgKiBhMTApICogZGV0KTsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFRyYW5zcG9zZXMgKGV4Y2hhbmdlcyBjb2x1bW5zIHdpdGggcm93cykgdGhpcyBtYXRyaXgKICAgICAgICAgKiBhbmQgcmV0dXJucyB0aGUgcmVzdWx0IGFzIGEgbmV3IGluc3RhbmNlLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybiBhIG5ldyB0cmFuc3Bvc2VkIE1hdDMuCiAgICAgICAgICovCiAgICAgICAgdHJhbnNwb3NlKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IE1hdDModGhpcy5fX2RhdGFbMF0sIHRoaXMuX19kYXRhWzNdLCB0aGlzLl9fZGF0YVs2XSwgdGhpcy5fX2RhdGFbMV0sIHRoaXMuX19kYXRhWzRdLCB0aGlzLl9fZGF0YVs3XSwgdGhpcy5fX2RhdGFbMl0sIHRoaXMuX19kYXRhWzVdLCB0aGlzLl9fZGF0YVs4XSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFRyYW5zcG9zZXMgKGV4Y2hhbmdlcyBjb2x1bW5zIHdpdGggcm93cykgdGhpcyBtYXRyaXggbW9kaWZ5aW5nIGl0cyB2YWx1ZXMuCiAgICAgICAgICovCiAgICAgICAgdHJhbnNwb3NlSW5QbGFjZSgpIHsKICAgICAgICAgICAgLy8gSWYgd2UgYXJlIHRyYW5zcG9zaW5nIG91cnNlbHZlcyB3ZSBjYW4gc2tpcCBhIGZldyBzdGVwcyBidXQgaGF2ZSB0byBjYWNoZSBzb21lIHZhbHVlcwogICAgICAgICAgICBjb25zdCBhMDEgPSB0aGlzLl9fZGF0YVsxXTsKICAgICAgICAgICAgY29uc3QgYTAyID0gdGhpcy5fX2RhdGFbMl07CiAgICAgICAgICAgIGNvbnN0IGExMiA9IHRoaXMuX19kYXRhWzVdOwogICAgICAgICAgICB0aGlzLl9fZGF0YVsxXSA9IHRoaXMuX19kYXRhWzNdOwogICAgICAgICAgICB0aGlzLl9fZGF0YVsyXSA9IHRoaXMuX19kYXRhWzZdOwogICAgICAgICAgICB0aGlzLl9fZGF0YVszXSA9IGEwMTsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbNV0gPSB0aGlzLl9fZGF0YVs3XTsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbNl0gPSBhMDI7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzddID0gYTEyOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBUcmFuc2Zvcm1zIHRoZSBWZWMzIHdpdGggYSBNYXQzLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHZlYzMgLSBUaGUgdmVjMyB2YWx1ZS4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJuIHRoZSByZXN1bHQgYXMgYSBuZXcgVmVjMy4KICAgICAgICAgKi8KICAgICAgICB0cmFuc2Zvcm1WZWMzKHZlYzMpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMzKHRoaXMuX19kYXRhWzBdICogdmVjMy54ICsgdGhpcy5fX2RhdGFbMV0gKiB2ZWMzLnkgKyB0aGlzLl9fZGF0YVsyXSAqIHZlYzMueiwgdGhpcy5fX2RhdGFbM10gKiB2ZWMzLnggKyB0aGlzLl9fZGF0YVs0XSAqIHZlYzMueSArIHRoaXMuX19kYXRhWzVdICogdmVjMy56LCB0aGlzLl9fZGF0YVs2XSAqIHZlYzMueCArIHRoaXMuX19kYXRhWzddICogdmVjMy55ICsgdGhpcy5fX2RhdGFbOF0gKiB2ZWMzLnopOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDbG9uZXMgdGhpcyBNYXQzIHJldHVybmluZyBhIG5ldyBpbnN0YW5jZS4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGEgbmV3IE1hdDMuCiAgICAgICAgICovCiAgICAgICAgY2xvbmUoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgTWF0Myh0aGlzLl9fZGF0YVswXSwgdGhpcy5fX2RhdGFbMV0sIHRoaXMuX19kYXRhWzJdLCB0aGlzLl9fZGF0YVszXSwgdGhpcy5fX2RhdGFbNF0sIHRoaXMuX19kYXRhWzVdLCB0aGlzLl9fZGF0YVs2XSwgdGhpcy5fX2RhdGFbN10sIHRoaXMuX19kYXRhWzhdKTsKICAgICAgICB9CiAgICAgICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAgICAgLy8gUGVyc2lzdGVuY2UKICAgICAgICAvKioKICAgICAgICAgKiBMb2FkcyB0aGUgc3RhdGUgb2YgdGhlIHZhbHVlIGZyb20gYSBiaW5hcnkgcmVhZGVyLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHJlYWRlciAtIFRoZSByZWFkZXIgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgcmVhZEJpbmFyeShyZWFkZXIpIHsKICAgICAgICAgICAgdGhpcy5fX2RhdGEgPSByZWFkZXIubG9hZEZsb2F0MzJBcnJheSg5KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIHRvSlNPTiBtZXRob2QgZW5jb2RlcyB0aGlzIHR5cGUgYXMgYSBqc29uIG9iamVjdCBmb3IgcGVyc2lzdGVuY2UuCiAgICAgICAgICogQHJldHVybiB7RmxvYXQzMkFycmF5fSAtIFRoZSBqc29uIG9iamVjdC4KICAgICAgICAgKi8KICAgICAgICB0b0pTT04oKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIGZyb21KU09OIG1ldGhvZCBkZWNvZGVzIGEganNvbiBvYmplY3QgZm9yIHRoaXMgdHlwZS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBqc29uIC0gVGhlIGpzb24gcGFyYW0uCiAgICAgICAgICovCiAgICAgICAgZnJvbUpTT04oanNvbikgewogICAgICAgICAgICB0aGlzLl9fZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoanNvbik7CiAgICAgICAgfQogICAgICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgIC8vIERlYnVnZ2luZwogICAgICAgIC8qKgogICAgICAgICAqIENvbnZlcnRzIHRoaXMgVmVjMyB0byBhIHN0cmluZyBpbiBKU09OIGZvcm1hdC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHRvU3RyaW5nKCkgewogICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbmV3LWNhcAogICAgICAgICAgICByZXR1cm4gU3RyaW5nRnVuY3Rpb25zLnN0cmluZ2lmeUpTT05XaXRoRml4ZWRQcmVjaXNpb24odGhpcy50b0pTT04oKSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgY3VycmVudCBNYXRoIHR5cGUgZGF0YSBhcyBhcnJheS4gT2Z0ZW4gdXNlZCB0byBwYXNzIHR5cGVzIHRvIHRoZSBHUFUuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgcmVzdWx0IGFzIGFuIGFycmF5LgogICAgICAgICAqLwogICAgICAgIGFzQXJyYXkoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YTsKICAgICAgICB9CiAgICB9CgogICAgLyoqCiAgICAgKiBBIGNsYXNzIHJlcHJlc2VudGluZyBhIDR4NCBtYXRyaXguCiAgICAgKiBUaGlzIG1hdHJpeCBjbGFzcyBpcyBiYXNlZCBvbiBHTE0sIGFuZCBpcyBjb2x1bW4gbWFqb3IuCiAgICAgKgogICAgICovCiAgICBjbGFzcyBNYXQ0IHsKICAgICAgICAvKioKICAgICAgICAgKiBJbml0aWFsaXplcyB0aGUgTWF0MyBjbGFzcyB3aXRoIGdpdmVuIGRhdGEuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gbTAwIC0gUm93IDAsIGNvbHVtbiAwLgogICAgICAgICAqIEBwYXJhbSBtMDEgLSBSb3cgMCwgY29sdW1uIDEuCiAgICAgICAgICogQHBhcmFtIG0wMiAtIFJvdyAwLCBjb2x1bW4gMi4KICAgICAgICAgKiBAcGFyYW0gbTAzIC0gUm93IDAsIGNvbHVtbiAzLgogICAgICAgICAqIEBwYXJhbSBtMTAgLSBSb3cgMSwgY29sdW1uIDAuCiAgICAgICAgICogQHBhcmFtIG0xMSAtIFJvdyAxLCBjb2x1bW4gMS4KICAgICAgICAgKiBAcGFyYW0gbTEyIC0gUm93IDEsIGNvbHVtbiAyLgogICAgICAgICAqIEBwYXJhbSBtMTMgLSBSb3cgMSwgY29sdW1uIDMuCiAgICAgICAgICogQHBhcmFtIG0yMCAtIFJvdyAyLCBjb2x1bW4gMC4KICAgICAgICAgKiBAcGFyYW0gbTIxIC0gUm93IDIsIGNvbHVtbiAxLgogICAgICAgICAqIEBwYXJhbSBtMjIgLSBSb3cgMiwgY29sdW1uIDIuCiAgICAgICAgICogQHBhcmFtIG0yMyAtIFJvdyAyLCBjb2x1bW4gMy4KICAgICAgICAgKiBAcGFyYW0gbTMwIC0gUm93IDMsIGNvbHVtbiAwLgogICAgICAgICAqIEBwYXJhbSBtMzEgLSBSb3cgMywgY29sdW1uIDEuCiAgICAgICAgICogQHBhcmFtIG0zMiAtIFJvdyAzLCBjb2x1bW4gMi4KICAgICAgICAgKiBAcGFyYW0gbTMzIC0gUm93IDMsIGNvbHVtbiAzLgogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKG0wMCA9IDEsIG0wMSA9IDAsIG0wMiA9IDAsIG0wMyA9IDAsIG0xMCA9IDAsIG0xMSA9IDEsIG0xMiA9IDAsIG0xMyA9IDAsIG0yMCA9IDAsIG0yMSA9IDAsIG0yMiA9IDEsIG0yMyA9IDAsIG0zMCA9IDAsIG0zMSA9IDAsIG0zMiA9IDAsIG0zMyA9IDEpIHsKICAgICAgICAgICAgaWYgKG0wMCBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSkgewogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGEgPSBtMDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAobTAwIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IG0wMDsKICAgICAgICAgICAgICAgIGNvbnN0IGJ5dGVPZmZzZXQgPSBtMDE7CiAgICAgICAgICAgICAgICB0aGlzLl9fZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyLCBieXRlT2Zmc2V0LCAxNik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLl9fZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoMTYpOwogICAgICAgICAgICAgICAgdGhpcy5zZXQobTAwLCBtMDEsIG0wMiwgbTAzLCBtMTAsIG0xMSwgbTEyLCBtMTMsIG0yMCwgbTIxLCBtMjIsIG0yMywgbTMwLCBtMzEsIG0zMiwgbTMzKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgIC8vIHByb3BlcnRpZXMKICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIHJvdyAwLCBjb2x1bW4gMC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBtMDAgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0IG0wMCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19kYXRhWzBdOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIHJvdyAwLCBjb2x1bW4gMC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCBtMDAodmFsKSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzBdID0gdmFsOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIHJvdyAwLCBjb2x1bW4gMS4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBtMDEgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0IG0wMSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19kYXRhWzFdOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIHJvdyAwLCBjb2x1bW4gMS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCBtMDEodmFsKSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzFdID0gdmFsOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIHJvdyAwLCBjb2x1bW4gMi4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBtMDIgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0IG0wMigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19kYXRhWzJdOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIHJvdyAwLCBjb2x1bW4gMi4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCBtMDIodmFsKSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzJdID0gdmFsOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIHJvdyAwLCBjb2x1bW4gMy4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBtMDMgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0IG0wMygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19kYXRhWzNdOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIHJvdyAwLCBjb2x1bW4gMy4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCBtMDModmFsKSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzNdID0gdmFsOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIHJvdyAxLCBjb2x1bW4gMC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBtMTAgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0IG0xMCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19kYXRhWzRdOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIHJvdyAxLCBjb2x1bW4gMC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCBtMTAodmFsKSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzRdID0gdmFsOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIHJvdyAxLCBjb2x1bW4gMS4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBtMTEgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0IG0xMSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19kYXRhWzVdOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIHJvdyAxLCBjb2x1bW4gMS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCBtMTEodmFsKSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzVdID0gdmFsOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIHJvdyAxLCBjb2x1bW4gMi4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBtMTIgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0IG0xMigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19kYXRhWzZdOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIHJvdyAxLCBjb2x1bW4gMi4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCBtMTIodmFsKSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzZdID0gdmFsOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIHJvdyAxLCBjb2x1bW4gMy4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBtMTMgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0IG0xMygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19kYXRhWzddOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIHJvdyAxLCBjb2x1bW4gMy4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCBtMTModmFsKSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzddID0gdmFsOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIHJvdyAyLCBjb2x1bW4gMC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBtMjAgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0IG0yMCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19kYXRhWzhdOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIHJvdyAyLCBjb2x1bW4gMC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCBtMjAodmFsKSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzhdID0gdmFsOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIHJvdyAyLCBjb2x1bW4gMS4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBtMjEgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0IG0yMSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19kYXRhWzldOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIHJvdyAyLCBjb2x1bW4gMQogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHZhbCAtIFRoZSB2YWwgcGFyYW0uCiAgICAgICAgICovCiAgICAgICAgc2V0IG0yMSh2YWwpIHsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbOV0gPSB2YWw7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEdldHRlciBmb3Igcm93IDIsIGNvbHVtbiAyLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIG0yMiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBnZXQgbTIyKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX2RhdGFbMTBdOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIHJvdyAyLCBjb2x1bW4gMi4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCBtMjIodmFsKSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzEwXSA9IHZhbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciByb3cgMiwgY29sdW1uIDMuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgbTIzIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGdldCBtMjMoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YVsxMV07CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHRlciBmb3Igcm93IDIsIGNvbHVtbiAzLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHZhbCAtIFRoZSB2YWwgcGFyYW0uCiAgICAgICAgICovCiAgICAgICAgc2V0IG0yMyh2YWwpIHsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMTFdID0gdmFsOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIHJvdyAzLCBjb2x1bW4gMAogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIG0zMCB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBnZXQgbTMwKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX2RhdGFbMTJdOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIHJvdyAzLCBjb2x1bW4gMC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCBtMzAodmFsKSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzEyXSA9IHZhbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciByb3cgMywgY29sdW1uIDEuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgbTMxIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGdldCBtMzEoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YVsxM107CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHRlciBmb3Igcm93IDMsIGNvbHVtbiAxLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHZhbCAtIFRoZSB2YWwgcGFyYW0uCiAgICAgICAgICovCiAgICAgICAgc2V0IG0zMSh2YWwpIHsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMTNdID0gdmFsOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIHJvdyAzLCBjb2x1bW4gMi4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBtMzIgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0IG0zMigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19kYXRhWzE0XTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0dGVyIGZvciByb3cgMywgY29sdW1uIDIuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gdmFsIC0gVGhlIHZhbCBwYXJhbS4KICAgICAgICAgKi8KICAgICAgICBzZXQgbTMyKHZhbCkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVsxNF0gPSB2YWw7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEdldHRlciBmb3Igcm93IDMsIGNvbHVtbiAzLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIG0zMyB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBnZXQgbTMzKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX2RhdGFbMTVdOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIHJvdyAzLCBjb2x1bW4gMy4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCBtMzModmFsKSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzE1XSA9IHZhbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciB0aGUgYHhgIGF4aXMuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgYHhgIGF4aXMgYXMgYSBWZWMzLgogICAgICAgICAqLwogICAgICAgIGdldCB4QXhpcygpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMzKG5ldyBGbG9hdDMyQXJyYXkodGhpcy5fX2RhdGEuYnVmZmVyLCAwLCAzKSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHRlciBmb3IgdGhlIGB4YCBheGlzLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHZlYzMgLSBUaGUgdmVjMyB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBzZXQgeEF4aXModmVjMykgewogICAgICAgICAgICB0aGlzLnhBeGlzLnNldCh2ZWMzLngsIHZlYzMueSwgdmVjMy56KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciB0aGUgYHlgIGF4aXMuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgYHlgIGF4aXMgYXMgYSBWZWMzLgogICAgICAgICAqLwogICAgICAgIGdldCB5QXhpcygpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMzKG5ldyBGbG9hdDMyQXJyYXkodGhpcy5fX2RhdGEuYnVmZmVyLCA0ICogNCwgMykpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIHRoZSBgeWAgYXhpcy4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2ZWMzIC0gVGhlIHZlYzMgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgc2V0IHlBeGlzKHZlYzMpIHsKICAgICAgICAgICAgdGhpcy55QXhpcy5zZXQodmVjMy54LCB2ZWMzLnksIHZlYzMueik7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEdldHRlciBmb3IgdGhlIGB6YCBheGlzLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIGB6YCBheGlzIGFzIGEgVmVjMy4KICAgICAgICAgKi8KICAgICAgICBnZXQgekF4aXMoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjMyhuZXcgRmxvYXQzMkFycmF5KHRoaXMuX19kYXRhLmJ1ZmZlciwgOCAqIDQsIDMpKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0dGVyIGZvciB0aGUgYHpgIGF4aXMuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gdmVjMyAtIFRoZSB2ZWMzIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHNldCB6QXhpcyh2ZWMzKSB7CiAgICAgICAgICAgIHRoaXMuekF4aXMuc2V0KHZlYzMueCwgdmVjMy55LCB2ZWMzLnopOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIHRoZSB0cmFuc2xhdGlvbiBvZiB0aGUgbWF0cml4LiBBc3N1bWVzIHRoZSB0cmFuc2xhdGlvbiB2YWx1ZXMgYXJlIDEyLCAxMywgJiAxNC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSB0cmFuc2xhdGlvbi4KICAgICAgICAgKi8KICAgICAgICBnZXQgdHJhbnNsYXRpb24oKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjMyhuZXcgRmxvYXQzMkFycmF5KHRoaXMuX19kYXRhLmJ1ZmZlciwgMTIgKiA0LCAzKSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHRlciBmb3IgdGhlIHRyYW5zbGF0aW9uIG9mIHRoZSBtYXRyaXguIEFzc3VtZXMgdGhlIHRyYW5zbGF0aW9uIHZhbHVlcyBhcmUgMTIsIDEzLCAmIDE0LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHZlYzMgLSBUaGUgdHJhbnNsYXRpb24uCiAgICAgICAgICovCiAgICAgICAgc2V0IHRyYW5zbGF0aW9uKHZlYzMpIHsKICAgICAgICAgICAgdGhpcy50cmFuc2xhdGlvbi5zZXQodmVjMy54LCB2ZWMzLnksIHZlYzMueik7CiAgICAgICAgfQogICAgICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAgICAgLy8gU2V0dGVycwogICAgICAgIC8qKgogICAgICAgICAqIFNldHMgdGhlIHN0YXRlIG9mIHRoZSBNYXQ0IGNsYXNzCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gbTAwIC0gUm93IDAsIGNvbHVtbiAwLgogICAgICAgICAqIEBwYXJhbSBtMDEgLSBSb3cgMCwgY29sdW1uIDEuCiAgICAgICAgICogQHBhcmFtIG0wMiAtIFJvdyAwLCBjb2x1bW4gMi4KICAgICAgICAgKiBAcGFyYW0gbTAzIC0gUm93IDAsIGNvbHVtbiAzLgogICAgICAgICAqIEBwYXJhbSBtMTAgLSBSb3cgMSwgY29sdW1uIDAuCiAgICAgICAgICogQHBhcmFtIG0xMSAtIFJvdyAxLCBjb2x1bW4gMS4KICAgICAgICAgKiBAcGFyYW0gbTEyIC0gUm93IDEsIGNvbHVtbiAyLgogICAgICAgICAqIEBwYXJhbSBtMTMgLSBSb3cgMSwgY29sdW1uIDMuCiAgICAgICAgICogQHBhcmFtIG0yMCAtIFJvdyAyLCBjb2x1bW4gMC4KICAgICAgICAgKiBAcGFyYW0gbTIxIC0gUm93IDIsIGNvbHVtbiAxLgogICAgICAgICAqIEBwYXJhbSBtMjIgLSBSb3cgMiwgY29sdW1uIDIuCiAgICAgICAgICogQHBhcmFtIG0yMyAtIFJvdyAyLCBjb2x1bW4gMy4KICAgICAgICAgKiBAcGFyYW0gbTMwIC0gUm93IDMsIGNvbHVtbiAwLgogICAgICAgICAqIEBwYXJhbSBtMzEgLSBSb3cgMywgY29sdW1uIDEuCiAgICAgICAgICogQHBhcmFtIG0zMiAtIFJvdyAzLCBjb2x1bW4gMi4KICAgICAgICAgKiBAcGFyYW0gbTMzIC0gUm93IDMsIGNvbHVtbiAzLgogICAgICAgICAqLwogICAgICAgIHNldChtMDAgPSAxLCBtMDEgPSAwLCBtMDIgPSAwLCBtMDMgPSAwLCBtMTAgPSAwLCBtMTEgPSAxLCBtMTIgPSAwLCBtMTMgPSAwLCBtMjAgPSAwLCBtMjEgPSAwLCBtMjIgPSAxLCBtMjMgPSAwLCBtMzAgPSAwLCBtMzEgPSAwLCBtMzIgPSAwLCBtMzMgPSAxKSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzBdID0gbTAwOwogICAgICAgICAgICB0aGlzLl9fZGF0YVsxXSA9IG0wMTsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMl0gPSBtMDI7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzNdID0gbTAzOwogICAgICAgICAgICB0aGlzLl9fZGF0YVs0XSA9IG0xMDsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbNV0gPSBtMTE7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzZdID0gbTEyOwogICAgICAgICAgICB0aGlzLl9fZGF0YVs3XSA9IG0xMzsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbOF0gPSBtMjA7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzldID0gbTIxOwogICAgICAgICAgICB0aGlzLl9fZGF0YVsxMF0gPSBtMjI7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzExXSA9IG0yMzsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMTJdID0gbTMwOwogICAgICAgICAgICB0aGlzLl9fZGF0YVsxM10gPSBtMzE7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzE0XSA9IG0zMjsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMTVdID0gbTMzOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXRzIHN0YXRlIG9mIHRoZSBNYXQ0IHdpdGggdGhlIGlkZW50aXR5ICBNYXRyaXgKICAgICAgICAgKi8KICAgICAgICBzZXRJZGVudGl0eSgpIHsKICAgICAgICAgICAgdGhpcy5zZXQoKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0cyB0aGUgc3RhdGUgb2YgdGhlIE1hdDQgT2JqZWN0LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGZsb2F0MzJBcnJheSAtIFRoZSBmbG9hdDMyQXJyYXkgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgc2V0RGF0YUFycmF5KGZsb2F0MzJBcnJheSkgewogICAgICAgICAgICB0aGlzLl9fZGF0YSA9IGZsb2F0MzJBcnJheTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0cyBzdGF0ZSBvZiB0aGUgTWF0NCBmcm9tIGFub3RoZXIgTWF0NAogICAgICAgICAqCiAgICAgICAgICogTm90ZTogd29ya3Mgd2l0aCBlaXRoZXIgTWF0MyBvciBNYXQ0LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG1hdDQgLSBUaGUgbWF0NCB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBzZXRGcm9tTWF0NChtYXQ0KSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzBdID0gbWF0NC5tMDA7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzFdID0gbWF0NC5tMDE7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzJdID0gbWF0NC5tMDI7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzNdID0gbWF0NC5tMDM7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzRdID0gbWF0NC5tMTA7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzVdID0gbWF0NC5tMTE7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzZdID0gbWF0NC5tMTI7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzddID0gbWF0NC5tMTM7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzhdID0gbWF0NC5tMjA7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzldID0gbWF0NC5tMjE7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzEwXSA9IG1hdDQubTIyOwogICAgICAgICAgICB0aGlzLl9fZGF0YVsxMV0gPSBtYXQ0Lm0yMzsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMTJdID0gbWF0NC5tMzA7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzEzXSA9IG1hdDQubTMxOwogICAgICAgICAgICB0aGlzLl9fZGF0YVsxNF0gPSBtYXQ0Lm0zMjsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMTVdID0gbWF0NC5tMzM7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENvbnZlcnRzIGEgTWF0NCB0byBhIE1hdDMuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBNYXQzLgogICAgICAgICAqLwogICAgICAgIHRvTWF0MygpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBNYXQzKHRoaXMuX19kYXRhWzBdLCB0aGlzLl9fZGF0YVsxXSwgdGhpcy5fX2RhdGFbMl0sIHRoaXMuX19kYXRhWzRdLCB0aGlzLl9fZGF0YVs1XSwgdGhpcy5fX2RhdGFbNl0sIHRoaXMuX19kYXRhWzhdLCB0aGlzLl9fZGF0YVs5XSwgdGhpcy5fX2RhdGFbMTBdKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVHJhbnNwb3NlcyAoZXhjaGFuZ2VzIGNvbHVtbnMgd2l0aCByb3dzKSB0aGlzIG1hdHJpeC4KICAgICAgICAgKi8KICAgICAgICB0cmFuc3Bvc2VJblBsYWNlKCkgewogICAgICAgICAgICAvLyBJZiB3ZSBhcmUgdHJhbnNwb3Npbmcgb3Vyc2VsdmVzIHdlIGNhbiBza2lwIGEgZmV3IHN0ZXBzIGJ1dCBoYXZlIHRvIGNhY2hlIHNvbWUgdmFsdWVzCiAgICAgICAgICAgIGNvbnN0IGEwMSA9IHRoaXMuX19kYXRhWzFdOwogICAgICAgICAgICBjb25zdCBhMDIgPSB0aGlzLl9fZGF0YVsyXTsKICAgICAgICAgICAgY29uc3QgYTAzID0gdGhpcy5fX2RhdGFbM107CiAgICAgICAgICAgIGNvbnN0IGExMiA9IHRoaXMuX19kYXRhWzZdOwogICAgICAgICAgICBjb25zdCBhMTMgPSB0aGlzLl9fZGF0YVs3XTsKICAgICAgICAgICAgY29uc3QgYTIzID0gdGhpcy5fX2RhdGFbMTFdOwogICAgICAgICAgICB0aGlzLl9fZGF0YVsxXSA9IHRoaXMuX19kYXRhWzRdOwogICAgICAgICAgICB0aGlzLl9fZGF0YVsyXSA9IHRoaXMuX19kYXRhWzhdOwogICAgICAgICAgICB0aGlzLl9fZGF0YVszXSA9IHRoaXMuX19kYXRhWzEyXTsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbNF0gPSBhMDE7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzZdID0gdGhpcy5fX2RhdGFbOV07CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzddID0gdGhpcy5fX2RhdGFbMTNdOwogICAgICAgICAgICB0aGlzLl9fZGF0YVs4XSA9IGEwMjsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbOV0gPSBhMTI7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzExXSA9IHRoaXMuX19kYXRhWzE0XTsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMTJdID0gYTAzOwogICAgICAgICAgICB0aGlzLl9fZGF0YVsxM10gPSBhMTM7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzE0XSA9IGEyMzsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVHJhbnNwb3NlcyAoZXhjaGFuZ2VzIGNvbHVtbnMgd2l0aCByb3dzKSB0aGlzIG1hdHJpeAogICAgICAgICAqIGFuZCByZXR1cm5zIHRoZSByZXN1bHQgYXMgYSBuZXcgaW5zdGFuY2UuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJuIGEgbmV3IHRyYW5zcG9zZWQgTWF0NC4KICAgICAgICAgKi8KICAgICAgICB0cmFuc3Bvc2UoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgTWF0NCh0aGlzLl9fZGF0YVswXSwgdGhpcy5fX2RhdGFbNF0sIHRoaXMuX19kYXRhWzhdLCB0aGlzLl9fZGF0YVsxMl0sIHRoaXMuX19kYXRhWzFdLCB0aGlzLl9fZGF0YVs1XSwgdGhpcy5fX2RhdGFbOV0sIHRoaXMuX19kYXRhWzEzXSwgdGhpcy5fX2RhdGFbMl0sIHRoaXMuX19kYXRhWzZdLCB0aGlzLl9fZGF0YVsxMF0sIHRoaXMuX19kYXRhWzE0XSwgdGhpcy5fX2RhdGFbM10sIHRoaXMuX19kYXRhWzddLCB0aGlzLl9fZGF0YVsxMV0sIHRoaXMuX19kYXRhWzE1XSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEludmVydHMgYSBNYXQ0IGFuZCByZXR1cm5zIHRoZSByZXN1bHQgYXMgYSBuZXcgaW5zdGFuY2UuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBNYXQ0LgogICAgICAgICAqLwogICAgICAgIGludmVyc2UoKSB7CiAgICAgICAgICAgIGNvbnN0IGEwMCA9IHRoaXMuX19kYXRhWzBdOwogICAgICAgICAgICBjb25zdCBhMDEgPSB0aGlzLl9fZGF0YVsxXTsKICAgICAgICAgICAgY29uc3QgYTAyID0gdGhpcy5fX2RhdGFbMl07CiAgICAgICAgICAgIGNvbnN0IGEwMyA9IHRoaXMuX19kYXRhWzNdOwogICAgICAgICAgICBjb25zdCBhMTAgPSB0aGlzLl9fZGF0YVs0XTsKICAgICAgICAgICAgY29uc3QgYTExID0gdGhpcy5fX2RhdGFbNV07CiAgICAgICAgICAgIGNvbnN0IGExMiA9IHRoaXMuX19kYXRhWzZdOwogICAgICAgICAgICBjb25zdCBhMTMgPSB0aGlzLl9fZGF0YVs3XTsKICAgICAgICAgICAgY29uc3QgYTIwID0gdGhpcy5fX2RhdGFbOF07CiAgICAgICAgICAgIGNvbnN0IGEyMSA9IHRoaXMuX19kYXRhWzldOwogICAgICAgICAgICBjb25zdCBhMjIgPSB0aGlzLl9fZGF0YVsxMF07CiAgICAgICAgICAgIGNvbnN0IGEyMyA9IHRoaXMuX19kYXRhWzExXTsKICAgICAgICAgICAgY29uc3QgYTMwID0gdGhpcy5fX2RhdGFbMTJdOwogICAgICAgICAgICBjb25zdCBhMzEgPSB0aGlzLl9fZGF0YVsxM107CiAgICAgICAgICAgIGNvbnN0IGEzMiA9IHRoaXMuX19kYXRhWzE0XTsKICAgICAgICAgICAgY29uc3QgYTMzID0gdGhpcy5fX2RhdGFbMTVdOwogICAgICAgICAgICBjb25zdCBiMDAgPSBhMDAgKiBhMTEgLSBhMDEgKiBhMTA7CiAgICAgICAgICAgIGNvbnN0IGIwMSA9IGEwMCAqIGExMiAtIGEwMiAqIGExMDsKICAgICAgICAgICAgY29uc3QgYjAyID0gYTAwICogYTEzIC0gYTAzICogYTEwOwogICAgICAgICAgICBjb25zdCBiMDMgPSBhMDEgKiBhMTIgLSBhMDIgKiBhMTE7CiAgICAgICAgICAgIGNvbnN0IGIwNCA9IGEwMSAqIGExMyAtIGEwMyAqIGExMTsKICAgICAgICAgICAgY29uc3QgYjA1ID0gYTAyICogYTEzIC0gYTAzICogYTEyOwogICAgICAgICAgICBjb25zdCBiMDYgPSBhMjAgKiBhMzEgLSBhMjEgKiBhMzA7CiAgICAgICAgICAgIGNvbnN0IGIwNyA9IGEyMCAqIGEzMiAtIGEyMiAqIGEzMDsKICAgICAgICAgICAgY29uc3QgYjA4ID0gYTIwICogYTMzIC0gYTIzICogYTMwOwogICAgICAgICAgICBjb25zdCBiMDkgPSBhMjEgKiBhMzIgLSBhMjIgKiBhMzE7CiAgICAgICAgICAgIGNvbnN0IGIxMCA9IGEyMSAqIGEzMyAtIGEyMyAqIGEzMTsKICAgICAgICAgICAgY29uc3QgYjExID0gYTIyICogYTMzIC0gYTIzICogYTMyOwogICAgICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGRldGVybWluYW50CiAgICAgICAgICAgIGxldCBkZXQgPSBiMDAgKiBiMTEgLSBiMDEgKiBiMTAgKyBiMDIgKiBiMDkgKyBiMDMgKiBiMDggLSBiMDQgKiBiMDcgKyBiMDUgKiBiMDY7CiAgICAgICAgICAgIGlmICghZGV0KSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1VuYWJsZSB0byBpbnZlcnQgTWF0NCcpOwogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZGV0ID0gMS4wIC8gZGV0OwogICAgICAgICAgICByZXR1cm4gbmV3IE1hdDQoKGExMSAqIGIxMSAtIGExMiAqIGIxMCArIGExMyAqIGIwOSkgKiBkZXQsIChhMDIgKiBiMTAgLSBhMDEgKiBiMTEgLSBhMDMgKiBiMDkpICogZGV0LCAoYTMxICogYjA1IC0gYTMyICogYjA0ICsgYTMzICogYjAzKSAqIGRldCwgKGEyMiAqIGIwNCAtIGEyMSAqIGIwNSAtIGEyMyAqIGIwMykgKiBkZXQsIChhMTIgKiBiMDggLSBhMTAgKiBiMTEgLSBhMTMgKiBiMDcpICogZGV0LCAoYTAwICogYjExIC0gYTAyICogYjA4ICsgYTAzICogYjA3KSAqIGRldCwgKGEzMiAqIGIwMiAtIGEzMCAqIGIwNSAtIGEzMyAqIGIwMSkgKiBkZXQsIChhMjAgKiBiMDUgLSBhMjIgKiBiMDIgKyBhMjMgKiBiMDEpICogZGV0LCAoYTEwICogYjEwIC0gYTExICogYjA4ICsgYTEzICogYjA2KSAqIGRldCwgKGEwMSAqIGIwOCAtIGEwMCAqIGIxMCAtIGEwMyAqIGIwNikgKiBkZXQsIChhMzAgKiBiMDQgLSBhMzEgKiBiMDIgKyBhMzMgKiBiMDApICogZGV0LCAoYTIxICogYjAyIC0gYTIwICogYjA0IC0gYTIzICogYjAwKSAqIGRldCwgKGExMSAqIGIwNyAtIGExMCAqIGIwOSAtIGExMiAqIGIwNikgKiBkZXQsIChhMDAgKiBiMDkgLSBhMDEgKiBiMDcgKyBhMDIgKiBiMDYpICogZGV0LCAoYTMxICogYjAxIC0gYTMwICogYjAzIC0gYTMyICogYjAwKSAqIGRldCwgKGEyMCAqIGIwMyAtIGEyMSAqIGIwMSArIGEyMiAqIGIwMCkgKiBkZXQpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBJbnZlcnRzIGEgTWF0NC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGludmVydEluUGxhY2UoKSB7CiAgICAgICAgICAgIGNvbnN0IGEwMCA9IHRoaXMuX19kYXRhWzBdOwogICAgICAgICAgICBjb25zdCBhMDEgPSB0aGlzLl9fZGF0YVsxXTsKICAgICAgICAgICAgY29uc3QgYTAyID0gdGhpcy5fX2RhdGFbMl07CiAgICAgICAgICAgIGNvbnN0IGEwMyA9IHRoaXMuX19kYXRhWzNdOwogICAgICAgICAgICBjb25zdCBhMTAgPSB0aGlzLl9fZGF0YVs0XTsKICAgICAgICAgICAgY29uc3QgYTExID0gdGhpcy5fX2RhdGFbNV07CiAgICAgICAgICAgIGNvbnN0IGExMiA9IHRoaXMuX19kYXRhWzZdOwogICAgICAgICAgICBjb25zdCBhMTMgPSB0aGlzLl9fZGF0YVs3XTsKICAgICAgICAgICAgY29uc3QgYTIwID0gdGhpcy5fX2RhdGFbOF07CiAgICAgICAgICAgIGNvbnN0IGEyMSA9IHRoaXMuX19kYXRhWzldOwogICAgICAgICAgICBjb25zdCBhMjIgPSB0aGlzLl9fZGF0YVsxMF07CiAgICAgICAgICAgIGNvbnN0IGEyMyA9IHRoaXMuX19kYXRhWzExXTsKICAgICAgICAgICAgY29uc3QgYTMwID0gdGhpcy5fX2RhdGFbMTJdOwogICAgICAgICAgICBjb25zdCBhMzEgPSB0aGlzLl9fZGF0YVsxM107CiAgICAgICAgICAgIGNvbnN0IGEzMiA9IHRoaXMuX19kYXRhWzE0XTsKICAgICAgICAgICAgY29uc3QgYTMzID0gdGhpcy5fX2RhdGFbMTVdOwogICAgICAgICAgICBjb25zdCBiMDAgPSBhMDAgKiBhMTEgLSBhMDEgKiBhMTA7CiAgICAgICAgICAgIGNvbnN0IGIwMSA9IGEwMCAqIGExMiAtIGEwMiAqIGExMDsKICAgICAgICAgICAgY29uc3QgYjAyID0gYTAwICogYTEzIC0gYTAzICogYTEwOwogICAgICAgICAgICBjb25zdCBiMDMgPSBhMDEgKiBhMTIgLSBhMDIgKiBhMTE7CiAgICAgICAgICAgIGNvbnN0IGIwNCA9IGEwMSAqIGExMyAtIGEwMyAqIGExMTsKICAgICAgICAgICAgY29uc3QgYjA1ID0gYTAyICogYTEzIC0gYTAzICogYTEyOwogICAgICAgICAgICBjb25zdCBiMDYgPSBhMjAgKiBhMzEgLSBhMjEgKiBhMzA7CiAgICAgICAgICAgIGNvbnN0IGIwNyA9IGEyMCAqIGEzMiAtIGEyMiAqIGEzMDsKICAgICAgICAgICAgY29uc3QgYjA4ID0gYTIwICogYTMzIC0gYTIzICogYTMwOwogICAgICAgICAgICBjb25zdCBiMDkgPSBhMjEgKiBhMzIgLSBhMjIgKiBhMzE7CiAgICAgICAgICAgIGNvbnN0IGIxMCA9IGEyMSAqIGEzMyAtIGEyMyAqIGEzMTsKICAgICAgICAgICAgY29uc3QgYjExID0gYTIyICogYTMzIC0gYTIzICogYTMyOwogICAgICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGRldGVybWluYW50CiAgICAgICAgICAgIGxldCBkZXQgPSBiMDAgKiBiMTEgLSBiMDEgKiBiMTAgKyBiMDIgKiBiMDkgKyBiMDMgKiBiMDggLSBiMDQgKiBiMDcgKyBiMDUgKiBiMDY7CiAgICAgICAgICAgIGlmICghZGV0KSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1VuYWJsZSB0byBpbnZlcnQgTWF0NCcpOwogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGRldCA9IDEuMCAvIGRldDsKICAgICAgICAgICAgdGhpcy5zZXQoKGExMSAqIGIxMSAtIGExMiAqIGIxMCArIGExMyAqIGIwOSkgKiBkZXQsIChhMDIgKiBiMTAgLSBhMDEgKiBiMTEgLSBhMDMgKiBiMDkpICogZGV0LCAoYTMxICogYjA1IC0gYTMyICogYjA0ICsgYTMzICogYjAzKSAqIGRldCwgKGEyMiAqIGIwNCAtIGEyMSAqIGIwNSAtIGEyMyAqIGIwMykgKiBkZXQsIChhMTIgKiBiMDggLSBhMTAgKiBiMTEgLSBhMTMgKiBiMDcpICogZGV0LCAoYTAwICogYjExIC0gYTAyICogYjA4ICsgYTAzICogYjA3KSAqIGRldCwgKGEzMiAqIGIwMiAtIGEzMCAqIGIwNSAtIGEzMyAqIGIwMSkgKiBkZXQsIChhMjAgKiBiMDUgLSBhMjIgKiBiMDIgKyBhMjMgKiBiMDEpICogZGV0LCAoYTEwICogYjEwIC0gYTExICogYjA4ICsgYTEzICogYjA2KSAqIGRldCwgKGEwMSAqIGIwOCAtIGEwMCAqIGIxMCAtIGEwMyAqIGIwNikgKiBkZXQsIChhMzAgKiBiMDQgLSBhMzEgKiBiMDIgKyBhMzMgKiBiMDApICogZGV0LCAoYTIxICogYjAyIC0gYTIwICogYjA0IC0gYTIzICogYjAwKSAqIGRldCwgKGExMSAqIGIwNyAtIGExMCAqIGIwOSAtIGExMiAqIGIwNikgKiBkZXQsIChhMDAgKiBiMDkgLSBhMDEgKiBiMDcgKyBhMDIgKiBiMDYpICogZGV0LCAoYTMxICogYjAxIC0gYTMwICogYjAzIC0gYTMyICogYjAwKSAqIGRldCwgKGEyMCAqIGIwMyAtIGEyMSAqIGIwMSArIGEyMiAqIGIwMCkgKiBkZXQpOwogICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0cyB0aGlzIG1hdHJpeCBhcyB0aGUgaW52ZXJzZSBvZiB0aGUgZ2l2ZW4gTWF0NC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBtYXQ0IC0gVGhlIG1hdDQgdmFsdWUuCiAgICAgICAgICogQHJldHVybiAtIEluIGNhc2UgdGhlIGBkZXRlcm1pbmFudGAgY2FuJ3QgYmUgY2FsY3VsYXRlZCwgYSBgbnVsbGAgd2lsbCBiZSByZXR1cm5lZCwgb3RoZXJ3aXNlLCBub3RoaW5nIGlzIHJldHVybmVkCiAgICAgICAgICovCiAgICAgICAgc2V0SW52ZXJzZShtYXQ0KSB7CiAgICAgICAgICAgIGNvbnN0IGEwMCA9IG1hdDQuX19kYXRhWzBdOwogICAgICAgICAgICBjb25zdCBhMDEgPSBtYXQ0Ll9fZGF0YVsxXTsKICAgICAgICAgICAgY29uc3QgYTAyID0gbWF0NC5fX2RhdGFbMl07CiAgICAgICAgICAgIGNvbnN0IGEwMyA9IG1hdDQuX19kYXRhWzNdOwogICAgICAgICAgICBjb25zdCBhMTAgPSBtYXQ0Ll9fZGF0YVs0XTsKICAgICAgICAgICAgY29uc3QgYTExID0gbWF0NC5fX2RhdGFbNV07CiAgICAgICAgICAgIGNvbnN0IGExMiA9IG1hdDQuX19kYXRhWzZdOwogICAgICAgICAgICBjb25zdCBhMTMgPSBtYXQ0Ll9fZGF0YVs3XTsKICAgICAgICAgICAgY29uc3QgYTIwID0gbWF0NC5fX2RhdGFbOF07CiAgICAgICAgICAgIGNvbnN0IGEyMSA9IG1hdDQuX19kYXRhWzldOwogICAgICAgICAgICBjb25zdCBhMjIgPSBtYXQ0Ll9fZGF0YVsxMF07CiAgICAgICAgICAgIGNvbnN0IGEyMyA9IG1hdDQuX19kYXRhWzExXTsKICAgICAgICAgICAgY29uc3QgYTMwID0gbWF0NC5fX2RhdGFbMTJdOwogICAgICAgICAgICBjb25zdCBhMzEgPSBtYXQ0Ll9fZGF0YVsxM107CiAgICAgICAgICAgIGNvbnN0IGEzMiA9IG1hdDQuX19kYXRhWzE0XTsKICAgICAgICAgICAgY29uc3QgYTMzID0gbWF0NC5fX2RhdGFbMTVdOwogICAgICAgICAgICBjb25zdCBiMDAgPSBhMDAgKiBhMTEgLSBhMDEgKiBhMTA7CiAgICAgICAgICAgIGNvbnN0IGIwMSA9IGEwMCAqIGExMiAtIGEwMiAqIGExMDsKICAgICAgICAgICAgY29uc3QgYjAyID0gYTAwICogYTEzIC0gYTAzICogYTEwOwogICAgICAgICAgICBjb25zdCBiMDMgPSBhMDEgKiBhMTIgLSBhMDIgKiBhMTE7CiAgICAgICAgICAgIGNvbnN0IGIwNCA9IGEwMSAqIGExMyAtIGEwMyAqIGExMTsKICAgICAgICAgICAgY29uc3QgYjA1ID0gYTAyICogYTEzIC0gYTAzICogYTEyOwogICAgICAgICAgICBjb25zdCBiMDYgPSBhMjAgKiBhMzEgLSBhMjEgKiBhMzA7CiAgICAgICAgICAgIGNvbnN0IGIwNyA9IGEyMCAqIGEzMiAtIGEyMiAqIGEzMDsKICAgICAgICAgICAgY29uc3QgYjA4ID0gYTIwICogYTMzIC0gYTIzICogYTMwOwogICAgICAgICAgICBjb25zdCBiMDkgPSBhMjEgKiBhMzIgLSBhMjIgKiBhMzE7CiAgICAgICAgICAgIGNvbnN0IGIxMCA9IGEyMSAqIGEzMyAtIGEyMyAqIGEzMTsKICAgICAgICAgICAgY29uc3QgYjExID0gYTIyICogYTMzIC0gYTIzICogYTMyOwogICAgICAgICAgICAvLyBDYWxjdWxhdGUgdGhlIGRldGVybWluYW50CiAgICAgICAgICAgIGxldCBkZXQgPSBiMDAgKiBiMTEgLSBiMDEgKiBiMTAgKyBiMDIgKiBiMDkgKyBiMDMgKiBiMDggLSBiMDQgKiBiMDcgKyBiMDUgKiBiMDY7CiAgICAgICAgICAgIGlmICghZGV0KSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byBpbnZlcnQgTWF0NCcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGRldCA9IDEuMCAvIGRldDsKICAgICAgICAgICAgdGhpcy5zZXQoKGExMSAqIGIxMSAtIGExMiAqIGIxMCArIGExMyAqIGIwOSkgKiBkZXQsIChhMDIgKiBiMTAgLSBhMDEgKiBiMTEgLSBhMDMgKiBiMDkpICogZGV0LCAoYTMxICogYjA1IC0gYTMyICogYjA0ICsgYTMzICogYjAzKSAqIGRldCwgKGEyMiAqIGIwNCAtIGEyMSAqIGIwNSAtIGEyMyAqIGIwMykgKiBkZXQsIChhMTIgKiBiMDggLSBhMTAgKiBiMTEgLSBhMTMgKiBiMDcpICogZGV0LCAoYTAwICogYjExIC0gYTAyICogYjA4ICsgYTAzICogYjA3KSAqIGRldCwgKGEzMiAqIGIwMiAtIGEzMCAqIGIwNSAtIGEzMyAqIGIwMSkgKiBkZXQsIChhMjAgKiBiMDUgLSBhMjIgKiBiMDIgKyBhMjMgKiBiMDEpICogZGV0LCAoYTEwICogYjEwIC0gYTExICogYjA4ICsgYTEzICogYjA2KSAqIGRldCwgKGEwMSAqIGIwOCAtIGEwMCAqIGIxMCAtIGEwMyAqIGIwNikgKiBkZXQsIChhMzAgKiBiMDQgLSBhMzEgKiBiMDIgKyBhMzMgKiBiMDApICogZGV0LCAoYTIxICogYjAyIC0gYTIwICogYjA0IC0gYTIzICogYjAwKSAqIGRldCwgKGExMSAqIGIwNyAtIGExMCAqIGIwOSAtIGExMiAqIGIwNikgKiBkZXQsIChhMDAgKiBiMDkgLSBhMDEgKiBiMDcgKyBhMDIgKiBiMDYpICogZGV0LCAoYTMxICogYjAxIC0gYTMwICogYjAzIC0gYTMyICogYjAwKSAqIGRldCwgKGEyMCAqIGIwMyAtIGEyMSAqIGIwMSArIGEyMiAqIGIwMCkgKiBkZXQpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBNdWx0aXBsaWVzIHR3byBNYXQ0cyBhbmQgcmV0dXJucyB0aGUgcmVzdWx0IGFzIGEgbmV3IGluc3RhbmNlLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIE1hdDQgdG8gbXVsdGlwbHkgd2l0aC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBNYXQ0LgogICAgICAgICAqLwogICAgICAgIG11bHRpcGx5KG90aGVyKSB7CiAgICAgICAgICAgIGNvbnN0IGEwMCA9IHRoaXMuX19kYXRhWzBdOwogICAgICAgICAgICBjb25zdCBhMDEgPSB0aGlzLl9fZGF0YVsxXTsKICAgICAgICAgICAgY29uc3QgYTAyID0gdGhpcy5fX2RhdGFbMl07CiAgICAgICAgICAgIGNvbnN0IGEwMyA9IHRoaXMuX19kYXRhWzNdOwogICAgICAgICAgICBjb25zdCBhMTAgPSB0aGlzLl9fZGF0YVs0XTsKICAgICAgICAgICAgY29uc3QgYTExID0gdGhpcy5fX2RhdGFbNV07CiAgICAgICAgICAgIGNvbnN0IGExMiA9IHRoaXMuX19kYXRhWzZdOwogICAgICAgICAgICBjb25zdCBhMTMgPSB0aGlzLl9fZGF0YVs3XTsKICAgICAgICAgICAgY29uc3QgYTIwID0gdGhpcy5fX2RhdGFbOF07CiAgICAgICAgICAgIGNvbnN0IGEyMSA9IHRoaXMuX19kYXRhWzldOwogICAgICAgICAgICBjb25zdCBhMjIgPSB0aGlzLl9fZGF0YVsxMF07CiAgICAgICAgICAgIGNvbnN0IGEyMyA9IHRoaXMuX19kYXRhWzExXTsKICAgICAgICAgICAgY29uc3QgYTMwID0gdGhpcy5fX2RhdGFbMTJdOwogICAgICAgICAgICBjb25zdCBhMzEgPSB0aGlzLl9fZGF0YVsxM107CiAgICAgICAgICAgIGNvbnN0IGEzMiA9IHRoaXMuX19kYXRhWzE0XTsKICAgICAgICAgICAgY29uc3QgYTMzID0gdGhpcy5fX2RhdGFbMTVdOwogICAgICAgICAgICAvLyBDYWNoZSBvbmx5IHRoZSBjdXJyZW50IGxpbmUgb2YgdGhlIHNlY29uZCBtYXRyaXgKICAgICAgICAgICAgY29uc3QgYiA9IG90aGVyLmFzQXJyYXkoKTsKICAgICAgICAgICAgbGV0IGIwID0gYlswXTsKICAgICAgICAgICAgbGV0IGIxID0gYlsxXTsKICAgICAgICAgICAgbGV0IGIyID0gYlsyXTsKICAgICAgICAgICAgbGV0IGIzID0gYlszXTsKICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IE1hdDQoKTsKICAgICAgICAgICAgcmVzdWx0Lm0wMCA9IGIwICogYTAwICsgYjEgKiBhMTAgKyBiMiAqIGEyMCArIGIzICogYTMwOwogICAgICAgICAgICByZXN1bHQubTAxID0gYjAgKiBhMDEgKyBiMSAqIGExMSArIGIyICogYTIxICsgYjMgKiBhMzE7CiAgICAgICAgICAgIHJlc3VsdC5tMDIgPSBiMCAqIGEwMiArIGIxICogYTEyICsgYjIgKiBhMjIgKyBiMyAqIGEzMjsKICAgICAgICAgICAgcmVzdWx0Lm0wMyA9IGIwICogYTAzICsgYjEgKiBhMTMgKyBiMiAqIGEyMyArIGIzICogYTMzOwogICAgICAgICAgICBiMCA9IGJbNF07CiAgICAgICAgICAgIGIxID0gYls1XTsKICAgICAgICAgICAgYjIgPSBiWzZdOwogICAgICAgICAgICBiMyA9IGJbN107CiAgICAgICAgICAgIHJlc3VsdC5tMTAgPSBiMCAqIGEwMCArIGIxICogYTEwICsgYjIgKiBhMjAgKyBiMyAqIGEzMDsKICAgICAgICAgICAgcmVzdWx0Lm0xMSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxOwogICAgICAgICAgICByZXN1bHQubTEyID0gYjAgKiBhMDIgKyBiMSAqIGExMiArIGIyICogYTIyICsgYjMgKiBhMzI7CiAgICAgICAgICAgIHJlc3VsdC5tMTMgPSBiMCAqIGEwMyArIGIxICogYTEzICsgYjIgKiBhMjMgKyBiMyAqIGEzMzsKICAgICAgICAgICAgYjAgPSBiWzhdOwogICAgICAgICAgICBiMSA9IGJbOV07CiAgICAgICAgICAgIGIyID0gYlsxMF07CiAgICAgICAgICAgIGIzID0gYlsxMV07CiAgICAgICAgICAgIHJlc3VsdC5tMjAgPSBiMCAqIGEwMCArIGIxICogYTEwICsgYjIgKiBhMjAgKyBiMyAqIGEzMDsKICAgICAgICAgICAgcmVzdWx0Lm0yMSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxOwogICAgICAgICAgICByZXN1bHQubTIyID0gYjAgKiBhMDIgKyBiMSAqIGExMiArIGIyICogYTIyICsgYjMgKiBhMzI7CiAgICAgICAgICAgIHJlc3VsdC5tMjMgPSBiMCAqIGEwMyArIGIxICogYTEzICsgYjIgKiBhMjMgKyBiMyAqIGEzMzsKICAgICAgICAgICAgYjAgPSBiWzEyXTsKICAgICAgICAgICAgYjEgPSBiWzEzXTsKICAgICAgICAgICAgYjIgPSBiWzE0XTsKICAgICAgICAgICAgYjMgPSBiWzE1XTsKICAgICAgICAgICAgcmVzdWx0Lm0zMCA9IGIwICogYTAwICsgYjEgKiBhMTAgKyBiMiAqIGEyMCArIGIzICogYTMwOwogICAgICAgICAgICByZXN1bHQubTMxID0gYjAgKiBhMDEgKyBiMSAqIGExMSArIGIyICogYTIxICsgYjMgKiBhMzE7CiAgICAgICAgICAgIHJlc3VsdC5tMzIgPSBiMCAqIGEwMiArIGIxICogYTEyICsgYjIgKiBhMjIgKyBiMyAqIGEzMjsKICAgICAgICAgICAgcmVzdWx0Lm0zMyA9IGIwICogYTAzICsgYjEgKiBhMTMgKyBiMiAqIGEyMyArIGIzICogYTMzOwogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBNdWx0aXBsaWVzIHR3byBNYXQ0cyBpbiBwbGFjZSBleHBsaWNpdGx5IG5vdCB1c2luZyBTSU1ELgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIE1hdDQgdG8gbXVsdGlwbHkgd2l0aC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBNYXQ0LgogICAgICAgICAqLwogICAgICAgIG11bHRpcGx5SW5QbGFjZShvdGhlcikgewogICAgICAgICAgICBjb25zdCBhID0gdGhpcy5hc0FycmF5KCk7CiAgICAgICAgICAgIGNvbnN0IGEwMCA9IGFbMF07CiAgICAgICAgICAgIGNvbnN0IGEwMSA9IGFbMV07CiAgICAgICAgICAgIGNvbnN0IGEwMiA9IGFbMl07CiAgICAgICAgICAgIGNvbnN0IGEwMyA9IGFbM107CiAgICAgICAgICAgIGNvbnN0IGExMCA9IGFbNF07CiAgICAgICAgICAgIGNvbnN0IGExMSA9IGFbNV07CiAgICAgICAgICAgIGNvbnN0IGExMiA9IGFbNl07CiAgICAgICAgICAgIGNvbnN0IGExMyA9IGFbN107CiAgICAgICAgICAgIGNvbnN0IGEyMCA9IGFbOF07CiAgICAgICAgICAgIGNvbnN0IGEyMSA9IGFbOV07CiAgICAgICAgICAgIGNvbnN0IGEyMiA9IGFbMTBdOwogICAgICAgICAgICBjb25zdCBhMjMgPSBhWzExXTsKICAgICAgICAgICAgY29uc3QgYTMwID0gYVsxMl07CiAgICAgICAgICAgIGNvbnN0IGEzMSA9IGFbMTNdOwogICAgICAgICAgICBjb25zdCBhMzIgPSBhWzE0XTsKICAgICAgICAgICAgY29uc3QgYTMzID0gYVsxNV07CiAgICAgICAgICAgIC8vIENhY2hlIG9ubHkgdGhlIGN1cnJlbnQgbGluZSBvZiB0aGUgc2Vjb25kIG1hdHJpeAogICAgICAgICAgICBjb25zdCBiID0gb3RoZXIuYXNBcnJheSgpOwogICAgICAgICAgICBsZXQgYjAgPSBiWzBdOwogICAgICAgICAgICBsZXQgYjEgPSBiWzFdOwogICAgICAgICAgICBsZXQgYjIgPSBiWzJdOwogICAgICAgICAgICBsZXQgYjMgPSBiWzNdOwogICAgICAgICAgICB0aGlzLm0wMCA9IGIwICogYTAwICsgYjEgKiBhMTAgKyBiMiAqIGEyMCArIGIzICogYTMwOwogICAgICAgICAgICB0aGlzLm0wMSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxOwogICAgICAgICAgICB0aGlzLm0wMiA9IGIwICogYTAyICsgYjEgKiBhMTIgKyBiMiAqIGEyMiArIGIzICogYTMyOwogICAgICAgICAgICB0aGlzLm0wMyA9IGIwICogYTAzICsgYjEgKiBhMTMgKyBiMiAqIGEyMyArIGIzICogYTMzOwogICAgICAgICAgICBiMCA9IGJbNF07CiAgICAgICAgICAgIGIxID0gYls1XTsKICAgICAgICAgICAgYjIgPSBiWzZdOwogICAgICAgICAgICBiMyA9IGJbN107CiAgICAgICAgICAgIHRoaXMubTEwID0gYjAgKiBhMDAgKyBiMSAqIGExMCArIGIyICogYTIwICsgYjMgKiBhMzA7CiAgICAgICAgICAgIHRoaXMubTExID0gYjAgKiBhMDEgKyBiMSAqIGExMSArIGIyICogYTIxICsgYjMgKiBhMzE7CiAgICAgICAgICAgIHRoaXMubTEyID0gYjAgKiBhMDIgKyBiMSAqIGExMiArIGIyICogYTIyICsgYjMgKiBhMzI7CiAgICAgICAgICAgIHRoaXMubTEzID0gYjAgKiBhMDMgKyBiMSAqIGExMyArIGIyICogYTIzICsgYjMgKiBhMzM7CiAgICAgICAgICAgIGIwID0gYls4XTsKICAgICAgICAgICAgYjEgPSBiWzldOwogICAgICAgICAgICBiMiA9IGJbMTBdOwogICAgICAgICAgICBiMyA9IGJbMTFdOwogICAgICAgICAgICB0aGlzLm0yMCA9IGIwICogYTAwICsgYjEgKiBhMTAgKyBiMiAqIGEyMCArIGIzICogYTMwOwogICAgICAgICAgICB0aGlzLm0yMSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxOwogICAgICAgICAgICB0aGlzLm0yMiA9IGIwICogYTAyICsgYjEgKiBhMTIgKyBiMiAqIGEyMiArIGIzICogYTMyOwogICAgICAgICAgICB0aGlzLm0yMyA9IGIwICogYTAzICsgYjEgKiBhMTMgKyBiMiAqIGEyMyArIGIzICogYTMzOwogICAgICAgICAgICBiMCA9IGJbMTJdOwogICAgICAgICAgICBiMSA9IGJbMTNdOwogICAgICAgICAgICBiMiA9IGJbMTRdOwogICAgICAgICAgICBiMyA9IGJbMTVdOwogICAgICAgICAgICB0aGlzLm0zMCA9IGIwICogYTAwICsgYjEgKiBhMTAgKyBiMiAqIGEyMCArIGIzICogYTMwOwogICAgICAgICAgICB0aGlzLm0zMSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxOwogICAgICAgICAgICB0aGlzLm0zMiA9IGIwICogYTAyICsgYjEgKiBhMTIgKyBiMiAqIGEyMiArIGIzICogYTMyOwogICAgICAgICAgICB0aGlzLm0zMyA9IGIwICogYTAzICsgYjEgKiBhMTMgKyBiMiAqIGEyMyArIGIzICogYTMzOwogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUG9zdCBtdWx0aXBsaWVzIHR3byBNYXQ0cyBpbiBwbGFjZSBleHBsaWNpdGx5IG5vdCB1c2luZyBTSU1ELgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIE1hdDQgdG8gbXVsdGlwbHkgd2l0aC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgcmVzdWx0IGFzIGEgbmV3IE1hdDQuCiAgICAgICAgICovCiAgICAgICAgcG9zdE11bHRpcGx5SW5QbGFjZShvdGhlcikgewogICAgICAgICAgICBjb25zdCBhID0gb3RoZXIuYXNBcnJheSgpOwogICAgICAgICAgICBjb25zdCBhMDAgPSBhWzBdOwogICAgICAgICAgICBjb25zdCBhMDEgPSBhWzFdOwogICAgICAgICAgICBjb25zdCBhMDIgPSBhWzJdOwogICAgICAgICAgICBjb25zdCBhMDMgPSBhWzNdOwogICAgICAgICAgICBjb25zdCBhMTAgPSBhWzRdOwogICAgICAgICAgICBjb25zdCBhMTEgPSBhWzVdOwogICAgICAgICAgICBjb25zdCBhMTIgPSBhWzZdOwogICAgICAgICAgICBjb25zdCBhMTMgPSBhWzddOwogICAgICAgICAgICBjb25zdCBhMjAgPSBhWzhdOwogICAgICAgICAgICBjb25zdCBhMjEgPSBhWzldOwogICAgICAgICAgICBjb25zdCBhMjIgPSBhWzEwXTsKICAgICAgICAgICAgY29uc3QgYTIzID0gYVsxMV07CiAgICAgICAgICAgIGNvbnN0IGEzMCA9IGFbMTJdOwogICAgICAgICAgICBjb25zdCBhMzEgPSBhWzEzXTsKICAgICAgICAgICAgY29uc3QgYTMyID0gYVsxNF07CiAgICAgICAgICAgIGNvbnN0IGEzMyA9IGFbMTVdOwogICAgICAgICAgICAvLyBDYWNoZSBvbmx5IHRoZSBjdXJyZW50IGxpbmUgb2YgdGhlIHNlY29uZCBtYXRyaXgKICAgICAgICAgICAgY29uc3QgYiA9IHRoaXMuYXNBcnJheSgpOwogICAgICAgICAgICBsZXQgYjAgPSBiWzBdOwogICAgICAgICAgICBsZXQgYjEgPSBiWzFdOwogICAgICAgICAgICBsZXQgYjIgPSBiWzJdOwogICAgICAgICAgICBsZXQgYjMgPSBiWzNdOwogICAgICAgICAgICB0aGlzLm0wMCA9IGIwICogYTAwICsgYjEgKiBhMTAgKyBiMiAqIGEyMCArIGIzICogYTMwOwogICAgICAgICAgICB0aGlzLm0wMSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxOwogICAgICAgICAgICB0aGlzLm0wMiA9IGIwICogYTAyICsgYjEgKiBhMTIgKyBiMiAqIGEyMiArIGIzICogYTMyOwogICAgICAgICAgICB0aGlzLm0wMyA9IGIwICogYTAzICsgYjEgKiBhMTMgKyBiMiAqIGEyMyArIGIzICogYTMzOwogICAgICAgICAgICBiMCA9IGJbNF07CiAgICAgICAgICAgIGIxID0gYls1XTsKICAgICAgICAgICAgYjIgPSBiWzZdOwogICAgICAgICAgICBiMyA9IGJbN107CiAgICAgICAgICAgIHRoaXMubTEwID0gYjAgKiBhMDAgKyBiMSAqIGExMCArIGIyICogYTIwICsgYjMgKiBhMzA7CiAgICAgICAgICAgIHRoaXMubTExID0gYjAgKiBhMDEgKyBiMSAqIGExMSArIGIyICogYTIxICsgYjMgKiBhMzE7CiAgICAgICAgICAgIHRoaXMubTEyID0gYjAgKiBhMDIgKyBiMSAqIGExMiArIGIyICogYTIyICsgYjMgKiBhMzI7CiAgICAgICAgICAgIHRoaXMubTEzID0gYjAgKiBhMDMgKyBiMSAqIGExMyArIGIyICogYTIzICsgYjMgKiBhMzM7CiAgICAgICAgICAgIGIwID0gYls4XTsKICAgICAgICAgICAgYjEgPSBiWzldOwogICAgICAgICAgICBiMiA9IGJbMTBdOwogICAgICAgICAgICBiMyA9IGJbMTFdOwogICAgICAgICAgICB0aGlzLm0yMCA9IGIwICogYTAwICsgYjEgKiBhMTAgKyBiMiAqIGEyMCArIGIzICogYTMwOwogICAgICAgICAgICB0aGlzLm0yMSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxOwogICAgICAgICAgICB0aGlzLm0yMiA9IGIwICogYTAyICsgYjEgKiBhMTIgKyBiMiAqIGEyMiArIGIzICogYTMyOwogICAgICAgICAgICB0aGlzLm0yMyA9IGIwICogYTAzICsgYjEgKiBhMTMgKyBiMiAqIGEyMyArIGIzICogYTMzOwogICAgICAgICAgICBiMCA9IGJbMTJdOwogICAgICAgICAgICBiMSA9IGJbMTNdOwogICAgICAgICAgICBiMiA9IGJbMTRdOwogICAgICAgICAgICBiMyA9IGJbMTVdOwogICAgICAgICAgICB0aGlzLm0zMCA9IGIwICogYTAwICsgYjEgKiBhMTAgKyBiMiAqIGEyMCArIGIzICogYTMwOwogICAgICAgICAgICB0aGlzLm0zMSA9IGIwICogYTAxICsgYjEgKiBhMTEgKyBiMiAqIGEyMSArIGIzICogYTMxOwogICAgICAgICAgICB0aGlzLm0zMiA9IGIwICogYTAyICsgYjEgKiBhMTIgKyBiMiAqIGEyMiArIGIzICogYTMyOwogICAgICAgICAgICB0aGlzLm0zMyA9IGIwICogYTAzICsgYjEgKiBhMTMgKyBiMiAqIGEyMyArIGIzICogYTMzOwogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVHJhbnNsYXRlIGEgTWF0NCBieSB0aGUgZ2l2ZW4gdmVjdG9yIG5vdCB1c2luZyBTSU1ELgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHYzIC0gVGhlIGdpdmVuIHZlY3RvciB0byB0cmFuc2xhdGUgYWxvbmcuCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgdHJhbnNsYXRlSW5QbGFjZSh2MykgewogICAgICAgICAgICBjb25zdCBhID0gdGhpcy5fX2RhdGE7CiAgICAgICAgICAgIGNvbnN0IHggPSB2My54OwogICAgICAgICAgICBjb25zdCB5ID0gdjMueTsKICAgICAgICAgICAgY29uc3QgeiA9IHYzLno7CiAgICAgICAgICAgIGFbMTJdID0gYVswXSAqIHggKyBhWzRdICogeSArIGFbOF0gKiB6ICsgYVsxMl07CiAgICAgICAgICAgIGFbMTNdID0gYVsxXSAqIHggKyBhWzVdICogeSArIGFbOV0gKiB6ICsgYVsxM107CiAgICAgICAgICAgIGFbMTRdID0gYVsyXSAqIHggKyBhWzZdICogeSArIGFbMTBdICogeiArIGFbMTRdOwogICAgICAgICAgICBhWzE1XSA9IGFbM10gKiB4ICsgYVs3XSAqIHkgKyBhWzExXSAqIHogKyBhWzE1XTsKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEdlbmVyYXRlcyBhIGxvb2stYXQgbWF0cml4IHdpdGggdGhlIGdpdmVuIHBvc2l0aW9uLCBmb2NhbCBwb2ludCwgYW5kIHVwIGF4aXMuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gcG9zIC0gUG9zaXRpb24gb2YgdGhlIHZpZXdlci4KICAgICAgICAgKiBAcGFyYW0gdGFyZ2V0IC0gUG9pbnQgdGhlIHZpZXdlciBpcyBsb29raW5nIGF0LgogICAgICAgICAqIEBwYXJhbSB1cCAtIFZlYzMgcG9pbnRpbmcgdXAuCiAgICAgICAgICovCiAgICAgICAgc2V0TG9va0F0KHBvcywgdGFyZ2V0LCB1cCkgewogICAgICAgICAgICBjb25zdCB6QXhpcyA9IHBvcy5zdWJ0cmFjdCh0YXJnZXQpOwogICAgICAgICAgICBjb25zdCB6TGVuID0gekF4aXMubGVuZ3RoKCk7CiAgICAgICAgICAgIGlmICh6TGVuIDwgTnVtYmVyLkVQU0lMT04pIHsKICAgICAgICAgICAgICAgIHRoaXMuc2V0SWRlbnRpdHkoKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICB6QXhpcy5zY2FsZUluUGxhY2UoMS4wIC8gekxlbik7CiAgICAgICAgICAgIGNvbnN0IHhBeGlzID0gdXAuY3Jvc3MoekF4aXMpOwogICAgICAgICAgICBjb25zdCB4TGVuID0geEF4aXMubGVuZ3RoKCk7CiAgICAgICAgICAgIGlmICh4TGVuID4gTnVtYmVyLkVQU0lMT04pCiAgICAgICAgICAgICAgICB4QXhpcy5zY2FsZUluUGxhY2UoMS4wIC8geExlbik7CiAgICAgICAgICAgIGNvbnN0IHlBeGlzID0gekF4aXMuY3Jvc3MoeEF4aXMpOwogICAgICAgICAgICBjb25zdCB5TGVuID0geUF4aXMubGVuZ3RoKCk7CiAgICAgICAgICAgIGlmICh5TGVuID4gTnVtYmVyLkVQU0lMT04pCiAgICAgICAgICAgICAgICB5QXhpcy5zY2FsZUluUGxhY2UoMS4wIC8geUxlbik7CiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIHByZXR0aWVyL3ByZXR0aWVyKi8KICAgICAgICAgICAgdGhpcy5zZXQoeEF4aXMueCwgeEF4aXMueSwgeEF4aXMueiwgMCwgeUF4aXMueCwgeUF4aXMueSwgeUF4aXMueiwgMCwgekF4aXMueCwgekF4aXMueSwgekF4aXMueiwgMCwgcG9zLngsIHBvcy55LCBwb3MueiwgMSk7CiAgICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgcHJldHRpZXIvcHJldHRpZXIqLwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gYSBnaXZlbiBhbmdsZSBhcm91bmQgYSBnaXZlbiBheGlzLgogICAgICAgICAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOgogICAgICAgICAqCiAgICAgICAgICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7CiAgICAgICAgICogICAgIG1hdDQucm90YXRlKGRlc3QsIGRlc3QsIHJhZCwgYXhpcyk7CiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gYXhpcyAtIFRoZSBheGlzIHRvIHJvdGF0ZSBhcm91bmQuCiAgICAgICAgICogQHBhcmFtIHJhZCAtIFRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieS4KICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBzZXRSb3RhdGlvbihheGlzLCByYWQpIHsKICAgICAgICAgICAgY29uc3QgbGVuID0gYXhpcy5sZW5ndGgoKTsKICAgICAgICAgICAgaWYgKE1hdGguYWJzKGxlbikgPCBOdW1iZXIuRVBTSUxPTikgewogICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgeCA9IGF4aXMueCAvIGxlbjsKICAgICAgICAgICAgY29uc3QgeSA9IGF4aXMueSAvIGxlbjsKICAgICAgICAgICAgY29uc3QgeiA9IGF4aXMueiAvIGxlbjsKICAgICAgICAgICAgY29uc3QgcyA9IE1hdGguc2luKHJhZCk7CiAgICAgICAgICAgIGNvbnN0IGMgPSBNYXRoLmNvcyhyYWQpOwogICAgICAgICAgICBjb25zdCB0ID0gMSAtIGM7CiAgICAgICAgICAgIC8vIFBlcmZvcm0gcm90YXRpb24tc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uCiAgICAgICAgICAgIGNvbnN0IGEgPSB0aGlzLl9fZGF0YTsKICAgICAgICAgICAgYVswXSA9IHggKiB4ICogdCArIGM7CiAgICAgICAgICAgIGFbMV0gPSB5ICogeCAqIHQgKyB6ICogczsKICAgICAgICAgICAgYVsyXSA9IHogKiB4ICogdCAtIHkgKiBzOwogICAgICAgICAgICBhWzNdID0gMDsKICAgICAgICAgICAgYVs0XSA9IHggKiB5ICogdCAtIHogKiBzOwogICAgICAgICAgICBhWzVdID0geSAqIHkgKiB0ICsgYzsKICAgICAgICAgICAgYVs2XSA9IHogKiB5ICogdCArIHggKiBzOwogICAgICAgICAgICBhWzddID0gMDsKICAgICAgICAgICAgYVs4XSA9IHggKiB6ICogdCArIHkgKiBzOwogICAgICAgICAgICBhWzldID0geSAqIHogKiB0IC0geCAqIHM7CiAgICAgICAgICAgIGFbMTBdID0geiAqIHogKiB0ICsgYzsKICAgICAgICAgICAgYVsxMV0gPSAwOwogICAgICAgICAgICBhWzEyXSA9IDA7CiAgICAgICAgICAgIGFbMTNdID0gMDsKICAgICAgICAgICAgYVsxNF0gPSAwOwogICAgICAgICAgICBhWzE1XSA9IDE7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgbWF0cml4IGZyb20gdGhlIGdpdmVuIGFuZ2xlIGFyb3VuZCB0aGUgWCBheGlzLgogICAgICAgICAqIFRoaXMgaXMgZXF1aXZhbGVudCB0byAoYnV0IG11Y2ggZmFzdGVyIHRoYW4pOgogICAgICAgICAqCiAgICAgICAgICogICAgIG1hdDQuaWRlbnRpdHkoZGVzdCk7CiAgICAgICAgICogICAgIG1hdDQucm90YXRlWChkZXN0LCBkZXN0LCByYWQpOwogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHJhZCAtIFRoZSBhbmdsZSB0byByb3RhdGUgdGhlIG1hdHJpeCBieS4KICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBzZXRYUm90YXRpb24ocmFkKSB7CiAgICAgICAgICAgIGNvbnN0IHMgPSBNYXRoLnNpbihyYWQpOwogICAgICAgICAgICBjb25zdCBjID0gTWF0aC5jb3MocmFkKTsKICAgICAgICAgICAgLy8gUGVyZm9ybSBheGlzLXNwZWNpZmljIG1hdHJpeCBtdWx0aXBsaWNhdGlvbgogICAgICAgICAgICBjb25zdCBhID0gdGhpcy5fX2RhdGE7CiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIHByZXR0aWVyL3ByZXR0aWVyKi8KICAgICAgICAgICAgYVswXSA9IDE7CiAgICAgICAgICAgIGFbMV0gPSAwOwogICAgICAgICAgICBhWzJdID0gMDsKICAgICAgICAgICAgYVszXSA9IDA7CiAgICAgICAgICAgIGFbNF0gPSAwOwogICAgICAgICAgICBhWzVdID0gYzsKICAgICAgICAgICAgYVs2XSA9IHM7CiAgICAgICAgICAgIGFbN10gPSAwOwogICAgICAgICAgICBhWzhdID0gMDsKICAgICAgICAgICAgYVs5XSA9IC1zOwogICAgICAgICAgICBhWzEwXSA9IGM7CiAgICAgICAgICAgIGFbMTFdID0gMDsKICAgICAgICAgICAgYVsxMl0gPSAwOwogICAgICAgICAgICBhWzEzXSA9IDA7CiAgICAgICAgICAgIGFbMTRdID0gMDsKICAgICAgICAgICAgYVsxNV0gPSAxOwogICAgICAgICAgICAvKiBlc2xpbnQtZW5hYmxlIHByZXR0aWVyL3ByZXR0aWVyKi8KICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBtYXRyaXggZnJvbSB0aGUgZ2l2ZW4gYW5nbGUgYXJvdW5kIHRoZSBZIGF4aXMuCiAgICAgICAgICogVGhpcyBpcyBlcXVpdmFsZW50IHRvIChidXQgbXVjaCBmYXN0ZXIgdGhhbik6CiAgICAgICAgICoKICAgICAgICAgKiAgICAgbWF0NC5pZGVudGl0eShkZXN0KTsKICAgICAgICAgKiAgICAgbWF0NC5yb3RhdGVZKGRlc3QsIGRlc3QsIHJhZCk7CiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gcmFkIC0gVGhlIGFuZ2xlIHRvIHJvdGF0ZSB0aGUgbWF0cml4IGJ5LgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHNldFlSb3RhdGlvbihyYWQpIHsKICAgICAgICAgICAgY29uc3QgcyA9IE1hdGguc2luKHJhZCk7CiAgICAgICAgICAgIGNvbnN0IGMgPSBNYXRoLmNvcyhyYWQpOwogICAgICAgICAgICAvLyBQZXJmb3JtIGF4aXMtc3BlY2lmaWMgbWF0cml4IG11bHRpcGxpY2F0aW9uCiAgICAgICAgICAgIGNvbnN0IGEgPSB0aGlzLl9fZGF0YTsKICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgcHJldHRpZXIvcHJldHRpZXIqLwogICAgICAgICAgICBhWzBdID0gYzsKICAgICAgICAgICAgYVsxXSA9IDA7CiAgICAgICAgICAgIGFbMl0gPSAtczsKICAgICAgICAgICAgYVszXSA9IDA7CiAgICAgICAgICAgIGFbNF0gPSAwOwogICAgICAgICAgICBhWzVdID0gMTsKICAgICAgICAgICAgYVs2XSA9IDA7CiAgICAgICAgICAgIGFbN10gPSAwOwogICAgICAgICAgICBhWzhdID0gczsKICAgICAgICAgICAgYVs5XSA9IDA7CiAgICAgICAgICAgIGFbMTBdID0gYzsKICAgICAgICAgICAgYVsxMV0gPSAwOwogICAgICAgICAgICBhWzEyXSA9IDA7CiAgICAgICAgICAgIGFbMTNdID0gMDsKICAgICAgICAgICAgYVsxNF0gPSAwOwogICAgICAgICAgICBhWzE1XSA9IDE7CiAgICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgcHJldHRpZXIvcHJldHRpZXIqLwogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhIG1hdHJpeCBmcm9tIHRoZSBnaXZlbiBhbmdsZSBhcm91bmQgdGhlIFogYXhpcy4KICAgICAgICAgKiBUaGlzIGlzIGVxdWl2YWxlbnQgdG8gKGJ1dCBtdWNoIGZhc3RlciB0aGFuKToKICAgICAgICAgKgogICAgICAgICAqICAgICBtYXQ0LmlkZW50aXR5KGRlc3QpOwogICAgICAgICAqICAgICBtYXQ0LnJvdGF0ZVooZGVzdCwgZGVzdCwgcmFkKTsKICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSByYWQgLSBUaGUgYW5nbGUgdG8gcm90YXRlIHRoZSBtYXRyaXggYnkuCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgc2V0WlJvdGF0aW9uKHJhZCkgewogICAgICAgICAgICBjb25zdCBzID0gTWF0aC5zaW4ocmFkKTsKICAgICAgICAgICAgY29uc3QgYyA9IE1hdGguY29zKHJhZCk7CiAgICAgICAgICAgIC8vIFBlcmZvcm0gYXhpcy1zcGVjaWZpYyBtYXRyaXggbXVsdGlwbGljYXRpb24KICAgICAgICAgICAgY29uc3QgYSA9IHRoaXMuX19kYXRhOwogICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBwcmV0dGllci9wcmV0dGllciovCiAgICAgICAgICAgIGFbMF0gPSBjOwogICAgICAgICAgICBhWzFdID0gczsKICAgICAgICAgICAgYVsyXSA9IDA7CiAgICAgICAgICAgIGFbM10gPSAwOwogICAgICAgICAgICBhWzRdID0gLXM7CiAgICAgICAgICAgIGFbNV0gPSBjOwogICAgICAgICAgICBhWzZdID0gMDsKICAgICAgICAgICAgYVs3XSA9IDA7CiAgICAgICAgICAgIGFbOF0gPSAwOwogICAgICAgICAgICBhWzldID0gMDsKICAgICAgICAgICAgYVsxMF0gPSAxOwogICAgICAgICAgICBhWzExXSA9IDA7CiAgICAgICAgICAgIGFbMTJdID0gMDsKICAgICAgICAgICAgYVsxM10gPSAwOwogICAgICAgICAgICBhWzE0XSA9IDA7CiAgICAgICAgICAgIGFbMTVdID0gMTsKICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBwcmV0dGllci9wcmV0dGllciovCiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBUcmFuc2Zvcm1zIHRoZSBWZWM0IHdpdGggYSBNYXQ0LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHZlYyAtIFRoZSB2ZWMgdmFsdWUuCiAgICAgICAgICogQHJldHVybiAtIFJldHVybiB0aGUgcmVzdWx0IGFzIGEgbmV3IFZlYzQuCiAgICAgICAgICovCiAgICAgICAgdHJhbnNmb3JtVmVjNCh2ZWMpIHsKICAgICAgICAgICAgY29uc3QgYSA9IHRoaXMuX19kYXRhOwogICAgICAgICAgICBjb25zdCB4ID0gdmVjLng7CiAgICAgICAgICAgIGNvbnN0IHkgPSB2ZWMueTsKICAgICAgICAgICAgY29uc3QgeiA9IHZlYy56OwogICAgICAgICAgICBjb25zdCB3ID0gdmVjLnQ7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjNChhWzBdICogeCArIGFbNF0gKiB5ICsgYVs4XSAqIHogKyBhWzEyXSAqIHcsIGFbMV0gKiB4ICsgYVs1XSAqIHkgKyBhWzldICogeiArIGFbMTNdICogdywgYVsyXSAqIHggKyBhWzZdICogeSArIGFbMTBdICogeiArIGFbMTRdICogdywgYVszXSAqIHggKyBhWzddICogeSArIGFbMTFdICogeiArIGFbMTVdICogdyk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFRyYW5zZm9ybXMgdGhlIFZlYzMgd2l0aCBhIE1hdDQuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gdmVjIC0gVGhlIHZlYyB2YWx1ZS4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJuIHRoZSByZXN1bHQgYXMgYSBuZXcgVmVjMy4KICAgICAgICAgKi8KICAgICAgICB0cmFuc2Zvcm1WZWMzKHZlYykgewogICAgICAgICAgICBjb25zdCBhID0gdGhpcy5fX2RhdGE7CiAgICAgICAgICAgIGNvbnN0IHggPSB2ZWMueDsKICAgICAgICAgICAgY29uc3QgeSA9IHZlYy55OwogICAgICAgICAgICBjb25zdCB6ID0gdmVjLno7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjMyhhWzBdICogeCArIGFbNF0gKiB5ICsgYVs4XSAqIHogKyBhWzEyXSwgYVsxXSAqIHggKyBhWzVdICogeSArIGFbOV0gKiB6ICsgYVsxM10sIGFbMl0gKiB4ICsgYVs2XSAqIHkgKyBhWzEwXSAqIHogKyBhWzE0XSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJvdGF0ZXMgYSBnaXZlbiBgVmVjM2AgYW5kIHRoZSByZXN1bHQgaXMgcmV0dXJuZWQgYXMgYSBuZXcgYFZlYzNgLCBhcHBseWluZyBvbmx5IHRoZSB0b3AgbGVmdCBjb21wb25lbnRzIG9mIHRoZSBtYXRyaXgsIHNvIG5vdCBhcHBseWluZyBhbnkgdHJhbnNsYXRpb24uCiAgICAgICAgICogQHBhcmFtIHZlYyAtIFRoZSB2ZWMgdmFsdWUuCiAgICAgICAgICogQHJldHVybiAtIFJldHVybiB0aGUgcmVzdWx0IGFzIGEgbmV3IFZlYzMuCiAgICAgICAgICovCiAgICAgICAgcm90YXRlVmVjMyh2ZWMpIHsKICAgICAgICAgICAgY29uc3QgYSA9IHRoaXMuX19kYXRhOwogICAgICAgICAgICBjb25zdCB4ID0gdmVjLng7CiAgICAgICAgICAgIGNvbnN0IHkgPSB2ZWMueTsKICAgICAgICAgICAgY29uc3QgeiA9IHZlYy56OwogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzMoYVswXSAqIHggKyBhWzRdICogeSArIGFbOF0gKiB6LCBhWzFdICogeCArIGFbNV0gKiB5ICsgYVs5XSAqIHosIGFbMl0gKiB4ICsgYVs2XSAqIHkgKyBhWzEwXSAqIHopOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXQgdGhlIHBlcnNwZWN0aXZlIGZyb20gYSBNYXQ0LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGZvdlkgLSBUaGUgZm92WSB2YWx1ZS4KICAgICAgICAgKiBAcGFyYW0gYXNwZWN0IC0gVGhlIGFzcGVjdCB2YWx1ZS4KICAgICAgICAgKiBAcGFyYW0gbmVhciAtIFRoZSBuZWFyIHZhbHVlLgogICAgICAgICAqIEBwYXJhbSBmYXIgLSBUaGUgZmFyIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHNldFBlcnNwZWN0aXZlTWF0cml4KGZvdnksIGFzcGVjdCwgbmVhciwgZmFyKSB7CiAgICAgICAgICAgIGNvbnN0IGYgPSBNYXRoLnRhbihNYXRoLlBJICogMC41IC0gMC41ICogZm92eSk7CiAgICAgICAgICAgIGNvbnN0IHJhbmdlSW52ID0gMS4wIC8gKG5lYXIgLSBmYXIpOwogICAgICAgICAgICAvKiBlc2xpbnQtZGlzYWJsZSBwcmV0dGllci9wcmV0dGllciovCiAgICAgICAgICAgIHRoaXMuc2V0KGYgLyBhc3BlY3QsIDAsIDAsIDAsIDAsIGYsIDAsIDAsIDAsIDAsIChuZWFyICsgZmFyKSAqIHJhbmdlSW52LCAtMSwgMCwgMCwgbmVhciAqIGZhciAqIHJhbmdlSW52ICogMiwgMCk7CiAgICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgcHJldHRpZXIvcHJldHRpZXIqLwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDYWxjdWxhdGVzIHRoZSBvcnRob2dyYXBoaWMgbWF0cml4IGFuZCBzZXRzIHRoZSBzdGF0ZSBvZiB0aGUgTWF0NCBjbGFzcwogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGxlZnQgLSBUaGUgbGVmdCB2YWx1ZS4KICAgICAgICAgKiBAcGFyYW0gcmlnaHQgLSBUaGUgcmlnaHQgdmFsdWUuCiAgICAgICAgICogQHBhcmFtIGJvdHRvbSAtIFRoZSBib3R0b20gdmFsdWUuCiAgICAgICAgICogQHBhcmFtIHRvcCAtIFRoZSB0b3AgdmFsdWUuCiAgICAgICAgICogQHBhcmFtIG5lYXIgLSBUaGUgbmVhciB2YWx1ZS4KICAgICAgICAgKiBAcGFyYW0gZmFyIC0gVGhlIGZhciB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBzZXRPcnRob2dyYXBoaWNNYXRyaXgobGVmdCwgcmlnaHQsIGJvdHRvbSwgdG9wLCBuZWFyLCBmYXIpIHsKICAgICAgICAgICAgY29uc3QgbHIgPSAxIC8gKGxlZnQgLSByaWdodCk7CiAgICAgICAgICAgIGNvbnN0IGJ0ID0gMSAvIChib3R0b20gLSB0b3ApOwogICAgICAgICAgICBjb25zdCBuZiA9IDEgLyAobmVhciAtIGZhcik7CiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIHByZXR0aWVyL3ByZXR0aWVyKi8KICAgICAgICAgICAgdGhpcy5zZXQoLTIgKiBsciwgMCwgMCwgMCwgMCwgLTIgKiBidCwgMCwgMCwgMCwgMCwgMiAqIG5mLCAwLCAobGVmdCArIHJpZ2h0KSAqIGxyLCAodG9wICsgYm90dG9tKSAqIGJ0LCAoZmFyICsgbmVhcikgKiBuZiwgMSk7CiAgICAgICAgICAgIC8qIGVzbGludC1lbmFibGUgcHJldHRpZXIvcHJldHRpZXIqLwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXQgdGhlIE1hdHJpeCB0byBiZSBhIHNjYWxlIG1hdHJpeC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB4IC0gVGhlIHggdmFsdWUuCiAgICAgICAgICogQHBhcmFtIHkgLSBUaGUgeSB2YWx1ZS4KICAgICAgICAgKiBAcGFyYW0geiAtIFRoZSB6IHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHNldFNjYWxlKHgsIHksIHopIHsKICAgICAgICAgICAgLyogZXNsaW50LWRpc2FibGUgcHJldHRpZXIvcHJldHRpZXIqLwogICAgICAgICAgICBpZiAoeCBpbnN0YW5jZW9mIFZlYzMpIHsKICAgICAgICAgICAgICAgIHRoaXMuc2V0KHgueCwgMCwgMCwgMCwgMCwgeC55LCAwLCAwLCAwLCAwLCB4LnosIDAsIDAsIDAsIDAsIDEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5zZXQoeCwgMCwgMCwgMCwgMCwgeSwgMCwgMCwgMCwgMCwgeiwgMCwgMCwgMCwgMCwgMSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBwcmV0dGllci9wcmV0dGllciovCiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFRyYW5zZm9ybXMgYSAzeDQgbWF0cml4IGludG8gYSA0eDQgbWF0cml4IGFuZCBzZXQgdGhlIHJlc3VsdCB0byB0aGUgTWF0aDQgc3RhdGUuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gbTN4NCAtIFRoZSBtM3g0IHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHNldEZyb21NYXQzeDRBcnJheShtM3g0KSB7CiAgICAgICAgICAgIC8qIGVzbGludC1kaXNhYmxlIHByZXR0aWVyL3ByZXR0aWVyKi8KICAgICAgICAgICAgdGhpcy5zZXQobTN4NFswXSwgbTN4NFsxXSwgbTN4NFsyXSwgMCwgbTN4NFszXSwgbTN4NFs0XSwgbTN4NFs1XSwgMCwgbTN4NFs2XSwgbTN4NFs3XSwgbTN4NFs4XSwgMCwgbTN4NFs5XSwgbTN4NFsxMF0sIG0zeDRbMTFdLCAxKTsKICAgICAgICAgICAgLyogZXNsaW50LWVuYWJsZSBwcmV0dGllci9wcmV0dGllciovCiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENsb25lcyB0aGlzIE1hdDQgcmV0dXJuaW5nIGEgbmV3IGluc3RhbmNlLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYSBuZXcgTWF0NC4KICAgICAgICAgKi8KICAgICAgICBjbG9uZSgpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBNYXQ0KHRoaXMuX19kYXRhWzBdLCB0aGlzLl9fZGF0YVsxXSwgdGhpcy5fX2RhdGFbMl0sIHRoaXMuX19kYXRhWzNdLCB0aGlzLl9fZGF0YVs0XSwgdGhpcy5fX2RhdGFbNV0sIHRoaXMuX19kYXRhWzZdLCB0aGlzLl9fZGF0YVs3XSwgdGhpcy5fX2RhdGFbOF0sIHRoaXMuX19kYXRhWzldLCB0aGlzLl9fZGF0YVsxMF0sIHRoaXMuX19kYXRhWzExXSwgdGhpcy5fX2RhdGFbMTJdLCB0aGlzLl9fZGF0YVsxM10sIHRoaXMuX19kYXRhWzE0XSwgdGhpcy5fX2RhdGFbMTVdKTsKICAgICAgICB9CiAgICAgICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAgICAgLy8gUGVyc2lzdGVuY2UKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFZlYzMgdG8gYSBzdHJpbmcgaW4gSlNPTiBmb3JtYXQuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICB0b1N0cmluZygpIHsKICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5ldy1jYXAKICAgICAgICAgICAgcmV0dXJuIFN0cmluZ0Z1bmN0aW9ucy5zdHJpbmdpZnlKU09OV2l0aEZpeGVkUHJlY2lzaW9uKHRoaXMudG9KU09OKCkpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBUaGUgdG9KU09OIG1ldGhvZCBlbmNvZGVzIHRoaXMgdHlwZSBhcyBhIGpzb24gb2JqZWN0IGZvciBwZXJzaXN0ZW5jZS4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4ge0Zsb2F0MzJBcnJheX0gLSBUaGUganNvbiBvYmplY3QuCiAgICAgICAgICovCiAgICAgICAgdG9KU09OKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX2RhdGE7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFRoZSBmcm9tSlNPTiBtZXRob2QgZGVjb2RlcyBhIGpzb24gb2JqZWN0IGZvciB0aGlzIHR5cGUuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0ganNvbiAtIFRoZSBqc29uIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIGZyb21KU09OKGpzb24pIHsKICAgICAgICAgICAgdGhpcy5fX2RhdGEgPSBuZXcgRmxvYXQzMkFycmF5KGpzb24pOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBMb2FkcyB0aGUgc3RhdGUgb2YgdGhlIHZhbHVlIGZyb20gYSBiaW5hcnkgcmVhZGVyLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHJlYWRlciAtIFRoZSByZWFkZXIgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgcmVhZEJpbmFyeShyZWFkZXIpIHsKICAgICAgICAgICAgdGhpcy5fX2RhdGEgPSByZWFkZXIubG9hZEZsb2F0MzJBcnJheSgxNik7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgY3VycmVudCBNYXRoIHR5cGUgZGF0YSBhcyBhcnJheS4gT2Z0ZW4gdXNlZCB0byBwYXNzIHR5cGVzIHRvIHRoZSBHUFUuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgcmVzdWx0IGFzIGFuIGFycmF5LgogICAgICAgICAqLwogICAgICAgIGFzQXJyYXkoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YTsKICAgICAgICB9CiAgICB9CgogICAgLyogZXNsaW50LWRpc2FibGUgbm8tdW51c2VkLXZhcnMgKi8KICAgIC8qKgogICAgICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgcXVhdGVybmlvbi4gUXVhdGVybmlvbnMgYXJlIHVzZWQgdG8gcmVwcmVzZW50IDMgZGltZW5zaW9uYWwgcm90YXRpb25zLgogICAgICoKICAgICAqIFdoaWxlIFF1YXRlcm5pb25zIGFyZSBkaWZmaWN1bHQgdG8gdW5kZXJzdGFuZCB0aGV5IGhhdmUgaW1wb3J0YW50IG1hdGhlbWF0aWNhbCBwcm9wZXJ0aWVzIHRoYXQgbWFrZSB0aGVtIHZlcnkgdXNlZnVsIGluIDNkIGVuZ2luZXMuCiAgICAgKiBUaGV5IGNhbiBiZSBkaXJlY3RseSBtdWx0aXBsaWVkIHRvZ2V0aGVyIGluIHRoZSBzYW1lIHdhcyBhcyBtYXRyaWNlcy4KICAgICAqIFRoZXkgY2FuIGJlIGludGVycG9sYXRlZCBmcm9tIG9uZSB2YWx1ZSB0byBhbm90aGVyIHdoaWxlIG1haW50YWluaW5nIGNvbnN0YW50IGFuZ3VsYXIgdmVsb2NpdHkuCiAgICAgKiBUaGV5IGNhbiBiZSBjb252ZXJ0ZWQgdG8gb3RoZXIgbW9yZSBlYXNpbHkgdW5kZXJzdG9vZCByZXByZXNlbnRhdGlvbnMgc3VjaCBhcyBFdWxlckFuZ2xlcyBvciBNYXRyaWNlcy4KICAgICAqCgogICAgICovCiAgICBjbGFzcyBRdWF0IHsKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgcXVhdGVybmlvbi4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB4IC0gVGhlIGFuZ2xlIG9mIHRoZSB4IGF4aXMuIERlZmF1bHQgaXMgMC4KICAgICAgICAgKiBAcGFyYW0geSAtIFRoZSBhbmdsZSBvZiB0aGUgeSBheGlzLiBEZWZhdWx0IGlzIDAuCiAgICAgICAgICogQHBhcmFtIHogLSBUaGUgYW5nbGUgb2YgdGhlIHogYXhpcy4gRGVmYXVsdCBpcyAwLgogICAgICAgICAqIEBwYXJhbSB3IC0gVGhlIHcgdmFsdWUuIERlZmF1bHQgaXMgMS4KICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3Rvcih4ID0gMCwgeSA9IDAsIHogPSAwLCB3ID0gMSkgewogICAgICAgICAgICBpZiAoeCBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSkgewogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGEgPSB4OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKHggaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgewogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBkZXByZWNhdGVkLCBwbGVhc2UgdXNlIG5ldyBWZWM0KG5ldyBGbG9hdDMyQXJyYXkoYnVmZmVyLCBieXRlT2Zmc2V0LCA0KSlgKTsKICAgICAgICAgICAgICAgIGNvbnN0IGJ1ZmZlciA9IHg7CiAgICAgICAgICAgICAgICBjb25zdCBieXRlT2Zmc2V0ID0geTsKICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhID0gbmV3IEZsb2F0MzJBcnJheShidWZmZXIsIGJ5dGVPZmZzZXQsIDQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGEgPSBuZXcgRmxvYXQzMkFycmF5KDQpOwogICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB4ID09PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhWzBdID0gMDsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9fZGF0YVsxXSA9IDA7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2RhdGFbMl0gPSAwOwogICAgICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhWzNdID0gMTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmZyb21KU09OKHgpOwogICAgICAgICAgICAgICAgICAgIC8vICBmb3IgKGNvbnN0IGtleSBpbiB4KSB7CiAgICAgICAgICAgICAgICAgICAgLy8gIGlmIChBcnJheS5pc0FycmF5KHhba2V5XSkpIHRoaXNba2V5XS5jYWxsKHRoaXMsIC4uLnhba2V5XSkKICAgICAgICAgICAgICAgICAgICAvLyAgZWxzZSB0aGlzW2tleV0uY2FsbCh0aGlzLCB4W2tleV0pCiAgICAgICAgICAgICAgICAgICAgLy99CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9fZGF0YVswXSA9IHg7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2RhdGFbMV0gPSB5OwogICAgICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhWzJdID0gejsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9fZGF0YVszXSA9IHc7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciBgeGAgYXhpcyByb3RhdGlvbi4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSB4IGF4aXMgcm90YXRpb24uCiAgICAgICAgICovCiAgICAgICAgZ2V0IHgoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YVswXTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0dGVyIGZvciBgeGAgYXhpcyByb3RhdGlvbi4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCB4KHZhbCkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVswXSA9IHZhbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciBgeWAgYXhpcyByb3RhdGlvbi4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSB5IGF4aXMgcm90YXRpb24uCiAgICAgICAgICovCiAgICAgICAgZ2V0IHkoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YVsxXTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0dGVyIGZvciBgeWAgYXhpcyByb3RhdGlvbi4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCB5KHZhbCkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVsxXSA9IHZhbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciBgemAgYXhpcyByb3RhdGlvbi4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSB6IGF4aXMgcm90YXRpb24uCiAgICAgICAgICovCiAgICAgICAgZ2V0IHooKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YVsyXTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0dGVyIGZvciBgemAgYXhpcyByb3RhdGlvbi4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB2YWwgLSBUaGUgdmFsIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldCB6KHZhbCkgewogICAgICAgICAgICB0aGlzLl9fZGF0YVsyXSA9IHZhbDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciBgd2AgdmFsdWUuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgdyB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBnZXQgdygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19kYXRhWzNdOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZm9yIGB3YC4KICAgICAgICAgKiBAcGFyYW0gdmFsIC0gVGhlIHZhbCBwYXJhbS4KICAgICAgICAgKi8KICAgICAgICBzZXQgdyh2YWwpIHsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbM10gPSB2YWw7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHRlciBmcm9tIHNjYWxhciBjb21wb25lbnRzLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHggLSBUaGUgeCBheGlzIHJvdGF0aW9uLgogICAgICAgICAqIEBwYXJhbSB5ICAtIFRoZSB5IGF4aXMgcm90YXRpb24uCiAgICAgICAgICogQHBhcmFtIHogIC0gVGhlIHogYXhpcyByb3RhdGlvbi4KICAgICAgICAgKiBAcGFyYW0gdyAgLSBUaGUgdyB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBzZXQoeCwgeSwgeiwgdykgewogICAgICAgICAgICB0aGlzLl9fZGF0YVswXSA9IHg7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzFdID0geTsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMl0gPSB6OwogICAgICAgICAgICB0aGlzLl9fZGF0YVszXSA9IHc7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHMgdGhlIHN0YXRlIG9mIHRoZSBRdWF0IGNsYXNzIHVzaW5nIGEgRmxvYXQzMkFycmF5LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGZsb2F0MzJBcnJheSAtIFRoZSBmbG9hdDMyQXJyYXkgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgc2V0RGF0YUFycmF5KGZsb2F0MzJBcnJheSkgewogICAgICAgICAgICB0aGlzLl9fZGF0YSA9IGZsb2F0MzJBcnJheTsgLy8gVE9ETzogYWRkZWQgY2FzdAogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXR0ZXIgZnJvbSBhbm90aGVyIHZlY3Rvci4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBvdGhlciB2ZWN0b3IgdG8gc2V0IGZyb20uCiAgICAgICAgICovCiAgICAgICAgc2V0RnJvbU90aGVyKG90aGVyKSB7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzBdID0gb3RoZXIueDsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMV0gPSBvdGhlci55OwogICAgICAgICAgICB0aGlzLl9fZGF0YVsyXSA9IG90aGVyLno7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzNdID0gb3RoZXIudzsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0IHRoaXMgUXVhdCBmcm9tIGEgZXVsZXIgcm90YXRpb24uCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gZXVsZXJBbmdsZXMgLSBUaGUgZXVsZXIgYW5nbGVzIHJvdGF0aW9uLgogICAgICAgICAqLwogICAgICAgIHNldEZyb21FdWxlckFuZ2xlcyhldWxlckFuZ2xlcykgewogICAgICAgICAgICBjb25zdCBvcmRlcmVkID0gbmV3IFZlYzMoKTsKICAgICAgICAgICAgc3dpdGNoIChldWxlckFuZ2xlcy5vcmRlcikgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIC8vICdYWVonCiAgICAgICAgICAgICAgICAgICAgb3JkZXJlZC5zZXQoZXVsZXJBbmdsZXMueCwgLWV1bGVyQW5nbGVzLnksIGV1bGVyQW5nbGVzLnopOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgIC8vICdZWlgnCiAgICAgICAgICAgICAgICAgICAgb3JkZXJlZC5zZXQoZXVsZXJBbmdsZXMueSwgLWV1bGVyQW5nbGVzLnosIGV1bGVyQW5nbGVzLngpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgIC8vICdaWFknCiAgICAgICAgICAgICAgICAgICAgb3JkZXJlZC5zZXQoZXVsZXJBbmdsZXMueiwgLWV1bGVyQW5nbGVzLngsIGV1bGVyQW5nbGVzLnkpOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgICAgIC8vICdYWlknCiAgICAgICAgICAgICAgICAgICAgb3JkZXJlZC5zZXQoZXVsZXJBbmdsZXMueCwgZXVsZXJBbmdsZXMueiwgZXVsZXJBbmdsZXMueSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgLy8gJ1pZWCcKICAgICAgICAgICAgICAgICAgICBvcmRlcmVkLnNldChldWxlckFuZ2xlcy56LCBldWxlckFuZ2xlcy55LCBldWxlckFuZ2xlcy54KTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgICAgICAvLyAnWVhaJwogICAgICAgICAgICAgICAgICAgIG9yZGVyZWQuc2V0KGV1bGVyQW5nbGVzLnksIGV1bGVyQW5nbGVzLngsIGV1bGVyQW5nbGVzLnopOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgRXVsZXJBbmdsZXMgb3JkZXI6ICR7ZXVsZXJBbmdsZXMub3JkZXJ9YCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgdGkgPSBvcmRlcmVkLnggKiAwLjU7CiAgICAgICAgICAgIGNvbnN0IHRqID0gb3JkZXJlZC55ICogMC41OwogICAgICAgICAgICBjb25zdCB0ayA9IG9yZGVyZWQueiAqIDAuNTsKICAgICAgICAgICAgY29uc3QgY2kgPSBNYXRoLmNvcyh0aSk7CiAgICAgICAgICAgIGNvbnN0IGNqID0gTWF0aC5jb3ModGopOwogICAgICAgICAgICBjb25zdCBjayA9IE1hdGguY29zKHRrKTsKICAgICAgICAgICAgY29uc3Qgc2kgPSBNYXRoLnNpbih0aSk7CiAgICAgICAgICAgIGNvbnN0IHNqID0gTWF0aC5zaW4odGopOwogICAgICAgICAgICBjb25zdCBzayA9IE1hdGguc2luKHRrKTsKICAgICAgICAgICAgY29uc3QgY2MgPSBjaSAqIGNrOwogICAgICAgICAgICBjb25zdCBjcyA9IGNpICogc2s7CiAgICAgICAgICAgIGNvbnN0IHNjID0gc2kgKiBjazsKICAgICAgICAgICAgY29uc3Qgc3MgPSBzaSAqIHNrOwogICAgICAgICAgICBjb25zdCBhaSA9IGNqICogc2MgLSBzaiAqIGNzOwogICAgICAgICAgICBjb25zdCBhaiA9IGNqICogc3MgKyBzaiAqIGNjOwogICAgICAgICAgICBjb25zdCBhayA9IGNqICogY3MgLSBzaiAqIHNjOwogICAgICAgICAgICB0aGlzLncgPSBjaiAqIGNjICsgc2ogKiBzczsKICAgICAgICAgICAgc3dpdGNoIChldWxlckFuZ2xlcy5vcmRlcikgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIC8vICcgWFlaJwogICAgICAgICAgICAgICAgICAgIHRoaXMueCA9IGFpOwogICAgICAgICAgICAgICAgICAgIHRoaXMueSA9IC1hajsKICAgICAgICAgICAgICAgICAgICB0aGlzLnogPSBhazsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAvLyAnWVpYJwogICAgICAgICAgICAgICAgICAgIHRoaXMueCA9IGFrOwogICAgICAgICAgICAgICAgICAgIHRoaXMueSA9IGFpOwogICAgICAgICAgICAgICAgICAgIHRoaXMueiA9IC1hajsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAvLyAnWlhZJwogICAgICAgICAgICAgICAgICAgIHRoaXMueCA9IC1hajsKICAgICAgICAgICAgICAgICAgICB0aGlzLnkgPSBhazsKICAgICAgICAgICAgICAgICAgICB0aGlzLnogPSBhaTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICAgICAgICAvLyAnWFpZJwogICAgICAgICAgICAgICAgICAgIHRoaXMueCA9IGFpOwogICAgICAgICAgICAgICAgICAgIHRoaXMueSA9IGFrOwogICAgICAgICAgICAgICAgICAgIHRoaXMueiA9IGFqOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAgIC8vICdaWVgnCiAgICAgICAgICAgICAgICAgICAgdGhpcy54ID0gYWs7CiAgICAgICAgICAgICAgICAgICAgdGhpcy55ID0gYWo7CiAgICAgICAgICAgICAgICAgICAgdGhpcy56ID0gYWk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgLy8gJ1lYWicKICAgICAgICAgICAgICAgICAgICB0aGlzLnggPSBhajsKICAgICAgICAgICAgICAgICAgICB0aGlzLnkgPSBhaTsKICAgICAgICAgICAgICAgICAgICB0aGlzLnogPSBhazsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIEV1bGVyQW5nbGVzIG9yZGVyOiAke2V1bGVyQW5nbGVzLm9yZGVyfWApOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENvbnZlcnRzIFF1YXQgdG8gYW4gRXVsZXJBbmdsZXMKICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSByb3RhdGlvbk9yZGVyIC0gVGhlIG9yZGVyIGluIHdoaWNoIHRoZSByb3RhdGlvbnMgYXJlIGFwcGxpZWQuCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgdG9FdWxlckFuZ2xlcyhyb3RhdGlvbk9yZGVyKSB7CiAgICAgICAgICAgIGNvbnN0IG9yZGVyZWQgPSBuZXcgVmVjMygpOwogICAgICAgICAgICBzd2l0Y2ggKHJvdGF0aW9uT3JkZXIpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAvKiAnIFhZWicgKi8KICAgICAgICAgICAgICAgICAgICBvcmRlcmVkLnNldCh0aGlzLnosIHRoaXMueCwgdGhpcy55KTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICAvKiAnWVpYJyAqLwogICAgICAgICAgICAgICAgICAgIG9yZGVyZWQuc2V0KHRoaXMueCwgdGhpcy55LCB0aGlzLnopOwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgIC8qICdaWFknICovCiAgICAgICAgICAgICAgICAgICAgb3JkZXJlZC5zZXQodGhpcy55LCB0aGlzLnosIHRoaXMueCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgLyogJ1haWScgKi8KICAgICAgICAgICAgICAgICAgICBvcmRlcmVkLnNldCh0aGlzLnksIC10aGlzLngsIHRoaXMueik7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgICAgLyogJ1pZWCcgKi8KICAgICAgICAgICAgICAgICAgICBvcmRlcmVkLnNldCh0aGlzLngsIC10aGlzLnosIHRoaXMueSk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgICAgLyogJ1lYWicgKi8KICAgICAgICAgICAgICAgICAgICBvcmRlcmVkLnNldCh0aGlzLnosIC10aGlzLnksIHRoaXMueCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCByb3RhdGlvbiBvcmRlcjonICsgcm90YXRpb25PcmRlcik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgZXVsZXIgPSBuZXcgVmVjMygpOwogICAgICAgICAgICBjb25zdCB0ZXN0ID0gb3JkZXJlZC54ICogb3JkZXJlZC55ICsgb3JkZXJlZC56ICogdGhpcy53OwogICAgICAgICAgICBpZiAodGVzdCA+IDAuNDk5OTkpIHsKICAgICAgICAgICAgICAgIC8vIHNpbmd1bGFyaXR5IGF0IG5vcnRoIHBvbGUKICAgICAgICAgICAgICAgIGV1bGVyLnkgPSAyLjAgKiBNYXRoLmF0YW4yKG9yZGVyZWQueCwgdGhpcy53KTsKICAgICAgICAgICAgICAgIGV1bGVyLnogPSBNYXRoLlBJICogMC41OwogICAgICAgICAgICAgICAgZXVsZXIueCA9IDAuMDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmICh0ZXN0IDwgLTAuNDk5OTkpIHsKICAgICAgICAgICAgICAgIC8vIHNpbmd1bGFyaXR5IGF0IHNvdXRoIHBvbGUKICAgICAgICAgICAgICAgIGV1bGVyLnkgPSAtMi4wICogTWF0aC5hdGFuMihvcmRlcmVkLngsIHRoaXMudyk7CiAgICAgICAgICAgICAgICBldWxlci56ID0gTWF0aC5QSSAqIC0wLjU7CiAgICAgICAgICAgICAgICBldWxlci54ID0gMC4wOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgY29uc3Qgc3F4ID0gb3JkZXJlZC54ICogb3JkZXJlZC54OwogICAgICAgICAgICAgICAgY29uc3Qgc3F5ID0gb3JkZXJlZC55ICogb3JkZXJlZC55OwogICAgICAgICAgICAgICAgY29uc3Qgc3F6ID0gb3JkZXJlZC56ICogb3JkZXJlZC56OwogICAgICAgICAgICAgICAgZXVsZXIueSA9IE1hdGguYXRhbjIoMi4wICogb3JkZXJlZC55ICogdGhpcy53IC0gMi4wICogb3JkZXJlZC54ICogb3JkZXJlZC56LCAxLjAgLSAyLjAgKiBzcXkgLSAyLjAgKiBzcXopOwogICAgICAgICAgICAgICAgZXVsZXIueiA9IE1hdGguYXNpbigyLjAgKiB0ZXN0KTsKICAgICAgICAgICAgICAgIGV1bGVyLnggPSBNYXRoLmF0YW4yKDIuMCAqIG9yZGVyZWQueCAqIHRoaXMudyAtIDIuMCAqIG9yZGVyZWQueSAqIG9yZGVyZWQueiwgMS4wIC0gMi4wICogc3F4IC0gMi4wICogc3F6KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzd2l0Y2ggKHJvdGF0aW9uT3JkZXIpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICAvKiAnIFhZWicgKi8KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEV1bGVyQW5nbGVzKGV1bGVyLnksIGV1bGVyLnosIGV1bGVyLngsIHJvdGF0aW9uT3JkZXIpOwogICAgICAgICAgICAgICAgY2FzZSAxOgogICAgICAgICAgICAgICAgICAgIC8qICdZWlgnICovCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFdWxlckFuZ2xlcyhldWxlci54LCBldWxlci55LCBldWxlci56LCByb3RhdGlvbk9yZGVyKTsKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgICAvKiAnWlhZJyAqLwogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXVsZXJBbmdsZXMoZXVsZXIueiwgZXVsZXIueCwgZXVsZXIueSwgcm90YXRpb25PcmRlcik7CiAgICAgICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgICAgICAgLyogJ1haWScgKi8KICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IEV1bGVyQW5nbGVzKC1ldWxlci55LCBldWxlci54LCBldWxlci56LCByb3RhdGlvbk9yZGVyKTsKICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgICAvKiAnWllYJyAqLwogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRXVsZXJBbmdsZXMoZXVsZXIueCwgZXVsZXIueiwgLWV1bGVyLnksIHJvdGF0aW9uT3JkZXIpOwogICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICAgIC8qICdZWFonICovCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBFdWxlckFuZ2xlcyhldWxlci56LCAtZXVsZXIueSwgZXVsZXIueCwgcm90YXRpb25PcmRlcik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0IHRoaXMgUXVhdCB0byBhIHJvdGF0aW9uIGRlZmluZWQgYnkgYW4gYXhpcyBhbmQgYW4gYW5nbGUgKGluIHJhZGlhbnMpLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGF4aXMgLSBUaGUgYXhpcyBhcm91bmQgd2hpY2ggdG8gcm90YXRlLgogICAgICAgICAqIEBwYXJhbSBhbmdsZSAtIFRoZSBhbmdsZSB0byByb3RhdGUKICAgICAgICAgKi8KICAgICAgICBzZXRGcm9tQXhpc0FuZEFuZ2xlKGF4aXMsIGFuZ2xlKSB7CiAgICAgICAgICAgIGNvbnN0IGhhbGZBbmdsZSA9IGFuZ2xlIC8gMi4wOwogICAgICAgICAgICBjb25zdCB2ZWMgPSBheGlzLm5vcm1hbGl6ZSgpLnNjYWxlKE1hdGguc2luKGhhbGZBbmdsZSkpOwogICAgICAgICAgICB0aGlzLnNldCh2ZWMueCwgdmVjLnksIHZlYy56LCBNYXRoLmNvcyhoYWxmQW5nbGUpKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0cyB0aGUgc3RhdGUgb2YgdGhlIFF1YXQgdG8gbG9vayBpbiBhIHBhcnRpY3VsYXIgZGlyZWN0aW9uIGFsb25nIHRoZSB6IGF4aXMuCiAgICAgICAgICogPiBUaGUgY2FtZXJhIGxvb2tzIGRvd24gdGhlIG5lZ2F0aXZlIHogYXhpcywgc28gdG8gc2V0IGEgcm90YXRpb24gdmFsdWUKICAgICAgICAgKiA+IGZvciB0aGUgY2FtZXJhLCByZW1lbWJlciB0byBuZWdhdGUgdGhlIGRpcmVjdGlvbiB2ZWN0b3IuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gZGlyIC0gVGhlIGRpcmVjdGlvbiB2YWx1ZS4KICAgICAgICAgKiBAcGFyYW0gdXAgLSBUaGUgdXAgdmVjdG9yLgogICAgICAgICAqLwogICAgICAgIHNldEZyb21EaXJlY3Rpb25BbmRVcHZlY3RvcihkaXIsIHVwKSB7CiAgICAgICAgICAgIGNvbnN0IG1hdDMgPSBuZXcgTWF0MygpOwogICAgICAgICAgICBtYXQzLnNldEZyb21EaXJlY3Rpb25BbmRVcHZlY3RvcihkaXIsIHVwKTsKICAgICAgICAgICAgdGhpcy5zZXRGcm9tTWF0MyhtYXQzKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0cyB0aGUgc3RhdGUgb2YgdGhlIGBRdWF0YCBmcm9tIHR3byBgVmVjM2AuIFRoZSBxdWF0ZXJuaW9uIHdvdWxkIHRoZW4gcmVwcmVzZW50IHRoZSByb3RhdGlvbiBmcm9tIHYwIHRvIHYxIGluIDNkIHNwYWNlLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHYwIC0gVGhlIHYwIHVuaXQgdmVjdG9yLgogICAgICAgICAqIEBwYXJhbSB2MSAtIFRoZSB2MSB1bml0IHZlY3Rvci4KICAgICAgICAgKi8KICAgICAgICBzZXRGcm9tMlZlY3RvcnModjAsIHYxKSB7CiAgICAgICAgICAgIGNvbnN0IGMgPSB2MC5jcm9zcyh2MSk7CiAgICAgICAgICAgIGNvbnN0IGQgPSB2MC5kb3QodjEpOwogICAgICAgICAgICBjb25zdCBzID0gTWF0aC5zcXJ0KCgxICsgZCkgKiAyKTsKICAgICAgICAgICAgLy8gdGhpcy5zZXQoIHMvMiwgYy54IC8gcywgYy55IC8gcywgYy56IC8gcyApOwogICAgICAgICAgICB0aGlzLnNldChjLnggLyBzLCBjLnkgLyBzLCBjLnogLyBzLCBzIC8gMik7CiAgICAgICAgICAgIHRoaXMubm9ybWFsaXplSW5QbGFjZSgpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXQgdGhlIFF1YXQgZnJvbSBhIE1hdDMuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gbWF0MyAtIFRoZSBtYXQzIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHNldEZyb21NYXQzKG1hdDMpIHsKICAgICAgICAgICAgLy8gQWxnb3JpdGhtIGluIEtlbiBTaG9lbWFrZSdzIGFydGljbGUgaW4gMTk4NyBTSUdHUkFQSCBjb3Vyc2Ugbm90ZXMKICAgICAgICAgICAgLy8gYXJ0aWNsZSAiUXVhdGVybmlvbiBDYWxjdWx1cyBhbmQgRmFzdCBBbmltYXRpb24iLgogICAgICAgICAgICBjb25zdCBkYXRhID0gbWF0My5hc0FycmF5KCk7CiAgICAgICAgICAgIGNvbnN0IGZUcmFjZSA9IGRhdGFbMF0gKyBkYXRhWzRdICsgZGF0YVs4XTsKICAgICAgICAgICAgbGV0IGZSb290OwogICAgICAgICAgICBpZiAoZlRyYWNlID4gMC4wKSB7CiAgICAgICAgICAgICAgICAvLyB8d3wgPiAxLzIsIG1heSBhcyB3ZWxsIGNob29zZSB3ID4gMS8yCiAgICAgICAgICAgICAgICBmUm9vdCA9IE1hdGguc3FydChmVHJhY2UgKyAxKTsgLy8gMncKICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhWzNdID0gMC41ICogZlJvb3Q7CiAgICAgICAgICAgICAgICBmUm9vdCA9IDAuNSAvIGZSb290OyAvLyAxLyg0dykKICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhWzBdID0gKGRhdGFbNV0gLSBkYXRhWzddKSAqIGZSb290OwogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGFbMV0gPSAoZGF0YVs2XSAtIGRhdGFbMl0pICogZlJvb3Q7CiAgICAgICAgICAgICAgICB0aGlzLl9fZGF0YVsyXSA9IChkYXRhWzFdIC0gZGF0YVszXSkgKiBmUm9vdDsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIHx3fCA8PSAxLzIKICAgICAgICAgICAgICAgIGxldCBpID0gMDsKICAgICAgICAgICAgICAgIGlmIChkYXRhWzRdID4gZGF0YVswXSkKICAgICAgICAgICAgICAgICAgICBpID0gMTsKICAgICAgICAgICAgICAgIGlmIChkYXRhWzhdID4gZGF0YVtpICogMyArIGldKQogICAgICAgICAgICAgICAgICAgIGkgPSAyOwogICAgICAgICAgICAgICAgY29uc3QgaiA9IChpICsgMSkgJSAzOwogICAgICAgICAgICAgICAgY29uc3QgayA9IChpICsgMikgJSAzOwogICAgICAgICAgICAgICAgZlJvb3QgPSBNYXRoLnNxcnQoZGF0YVtpICogMyArIGldIC0gZGF0YVtqICogMyArIGpdIC0gZGF0YVtrICogMyArIGtdICsgMS4wKTsKICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhW2ldID0gMC41ICogZlJvb3Q7CiAgICAgICAgICAgICAgICBmUm9vdCA9IDAuNSAvIGZSb290OwogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGFbM10gPSAoZGF0YVtqICogMyArIGtdIC0gZGF0YVtrICogMyArIGpdKSAqIGZSb290OwogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGFbal0gPSAoZGF0YVtqICogMyArIGldICsgZGF0YVtpICogMyArIGpdKSAqIGZSb290OwogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGFba10gPSAoZGF0YVtrICogMyArIGldICsgZGF0YVtpICogMyArIGtdKSAqIGZSb290OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMubm9ybWFsaXplSW5QbGFjZSgpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXQgdGhlIFF1YXQgZnJvbSBhIE1hdDQuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gbWF0NCAtIFRoZSBtYXQ0IHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHNldEZyb21NYXQ0KG1hdDQpIHsKICAgICAgICAgICAgLy8gQWxnb3JpdGhtIGluIEtlbiBTaG9lbWFrZSdzIGFydGljbGUgaW4gMTk4NyBTSUdHUkFQSCBjb3Vyc2Ugbm90ZXMKICAgICAgICAgICAgLy8gYXJ0aWNsZSAiUXVhdGVybmlvbiBDYWxjdWx1cyBhbmQgRmFzdCBBbmltYXRpb24iLgogICAgICAgICAgICBjb25zdCBkYXRhID0gbWF0NC5hc0FycmF5KCk7CiAgICAgICAgICAgIGNvbnN0IGZUcmFjZSA9IGRhdGFbMF0gKyBkYXRhWzVdICsgZGF0YVsxMF07CiAgICAgICAgICAgIGxldCBmUm9vdDsKICAgICAgICAgICAgaWYgKGZUcmFjZSA+IDAuMCkgewogICAgICAgICAgICAgICAgLy8gfHd8ID4gMS8yLCBtYXkgYXMgd2VsbCBjaG9vc2UgdyA+IDEvMgogICAgICAgICAgICAgICAgZlJvb3QgPSBNYXRoLnNxcnQoZlRyYWNlICsgMSk7IC8vIDJ3CiAgICAgICAgICAgICAgICB0aGlzLl9fZGF0YVszXSA9IDAuNSAqIGZSb290OwogICAgICAgICAgICAgICAgZlJvb3QgPSAwLjUgLyBmUm9vdDsgLy8gMS8oNHcpCiAgICAgICAgICAgICAgICB0aGlzLl9fZGF0YVswXSA9IChkYXRhWzZdIC0gZGF0YVs5XSkgKiBmUm9vdDsKICAgICAgICAgICAgICAgIHRoaXMuX19kYXRhWzFdID0gKGRhdGFbOF0gLSBkYXRhWzJdKSAqIGZSb290OwogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGFbMl0gPSAoZGF0YVsxXSAtIGRhdGFbNF0pICogZlJvb3Q7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAvLyB8d3wgPD0gMS8yCiAgICAgICAgICAgICAgICBsZXQgaSA9IDA7CiAgICAgICAgICAgICAgICBpZiAoZGF0YVs1XSA+IGRhdGFbMF0pCiAgICAgICAgICAgICAgICAgICAgaSA9IDE7CiAgICAgICAgICAgICAgICBpZiAoZGF0YVsxMF0gPiBkYXRhW2kgKiA0ICsgaV0pCiAgICAgICAgICAgICAgICAgICAgaSA9IDI7CiAgICAgICAgICAgICAgICBjb25zdCBqID0gKGkgKyAxKSAlIDM7CiAgICAgICAgICAgICAgICBjb25zdCBrID0gKGkgKyAyKSAlIDM7CiAgICAgICAgICAgICAgICBmUm9vdCA9IE1hdGguc3FydChkYXRhW2kgKiA0ICsgaV0gLSBkYXRhW2ogKiA0ICsgal0gLSBkYXRhW2sgKiA0ICsga10gKyAxLjApOwogICAgICAgICAgICAgICAgdGhpcy5fX2RhdGFbaV0gPSAwLjUgKiBmUm9vdDsKICAgICAgICAgICAgICAgIGZSb290ID0gMC41IC8gZlJvb3Q7CiAgICAgICAgICAgICAgICB0aGlzLl9fZGF0YVszXSA9IChkYXRhW2ogKiA0ICsga10gLSBkYXRhW2sgKiA0ICsgal0pICogZlJvb3Q7CiAgICAgICAgICAgICAgICB0aGlzLl9fZGF0YVtqXSA9IChkYXRhW2ogKiA0ICsgaV0gKyBkYXRhW2kgKiA0ICsgal0pICogZlJvb3Q7CiAgICAgICAgICAgICAgICB0aGlzLl9fZGF0YVtrXSA9IChkYXRhW2sgKiA0ICsgaV0gKyBkYXRhW2kgKiA0ICsga10pICogZlJvb3Q7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5ub3JtYWxpemVJblBsYWNlKCk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENoZWNrcyBpZiB0aGUgYW5nbGUgb2YgdGhlIFF1YXQgaXMgbGVzcyB0aGF0IGAgTnVtYmVyLkVQU0lMT05gCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0cnVlIG9yIGZhbHNlLgogICAgICAgICAqLwogICAgICAgIGlzSWRlbnRpdHkoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldEFuZ2xlKCkgPCBOdW1iZXIuRVBTSUxPTjsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJuIHRoZSBhbmdsZSBvZiB0aGUgUXVhdC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGdldEFuZ2xlKCkgewogICAgICAgICAgICByZXR1cm4gTWF0aC5hY29zKHRoaXMudykgKiAyLjA7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENoZWNrcyBpZiB0aGlzIFF1YXQgY29udGFpbnMgdGhlIHNhbWUgdmFsdWVzIGFzIHRoZSBvdGhlciBRdWF0LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIFF1YXQgdG8gY29tcGFyZSB3aXRoLgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGB0cnVlYCBpZiBhcmUgdGhlIHNhbWUgVmVjdG9yLCBvdGhlcndpc2UsIGBmYWxzZWAuCiAgICAgICAgICovCiAgICAgICAgaXNFcXVhbChvdGhlcikgewogICAgICAgICAgICByZXR1cm4gdGhpcy54ID09IG90aGVyLnggJiYgdGhpcy55ID09IG90aGVyLnkgJiYgdGhpcy56ID09IG90aGVyLnogJiYgdGhpcy53ID09IG90aGVyLnc7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgdHJ1ZSBpZiB0aGlzIFF1YXQgaXMgTk9UIGV4YWN0bHkgdGhlIHNhbWUgb3RoZXIuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgUXVhdCB0byBjb21wYXJlIHdpdGguCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdHJ1ZSBvciBmYWxzZS4KICAgICAgICAgKi8KICAgICAgICBub3RFcXVhbHMob3RoZXIpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMueCAhPSBvdGhlci54ICYmIHRoaXMueSAhPSBvdGhlci55ICYmIHRoaXMueiAhPSBvdGhlci56ICYmIHRoaXMudyAhPSBvdGhlci53OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBRdWF0IGlzIGFwcHJveGltYXRlbHkgdGhlIHNhbWUgYXMgb3RoZXIKICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBvdGhlciBRdWF0IHRvIGNvbXBhcmUgd2l0aC4KICAgICAgICAgKiBAcGFyYW0gcHJlY2lzaW9uIC0gVGhlIHByZWNpc2lvbiB0byB3aGljaCB0aGUgdmFsdWVzIG11c3QgbWF0Y2guCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdHJ1ZSBvciBmYWxzZS4KICAgICAgICAgKi8KICAgICAgICBhcHByb3hFcXVhbChvdGhlciwgcHJlY2lzaW9uID0gTnVtYmVyLkVQU0lMT04pIHsKICAgICAgICAgICAgcmV0dXJuIChNYXRoLmFicyh0aGlzLnggLSBvdGhlci54KSA8IHByZWNpc2lvbiAmJgogICAgICAgICAgICAgICAgTWF0aC5hYnModGhpcy55IC0gb3RoZXIueSkgPCBwcmVjaXNpb24gJiYKICAgICAgICAgICAgICAgIE1hdGguYWJzKHRoaXMueiAtIG90aGVyLnopIDwgcHJlY2lzaW9uICYmCiAgICAgICAgICAgICAgICBNYXRoLmFicyh0aGlzLncgLSBvdGhlci53KSA8IHByZWNpc2lvbik7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEFkZHMgb3RoZXIgdG8gdGhpcyBRdWF0IGFuZCByZXR1cm4gdGhlIHJlc3VsdCBhcyBhIG5ldyBRdWF0LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIFF1YXQgdG8gYWRkLgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGEgbmV3IFF1YXQuCiAgICAgICAgICovCiAgICAgICAgYWRkKG90aGVyKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgUXVhdCh0aGlzLnggKyBvdGhlci54LCB0aGlzLnkgKyBvdGhlci55LCB0aGlzLnogKyBvdGhlci56LCB0aGlzLncgKyBvdGhlci53KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQWRkcyBvdGhlciB0byB0aGlzIFF1YXQuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgUXVhdCB0byBhZGQuCiAgICAgICAgICovCiAgICAgICAgYWRkSW5QbGFjZShvdGhlcikgewogICAgICAgICAgICB0aGlzLnggKz0gb3RoZXIueDsKICAgICAgICAgICAgdGhpcy55ICs9IG90aGVyLnk7CiAgICAgICAgICAgIHRoaXMueiArPSBvdGhlci56OwogICAgICAgICAgICB0aGlzLncgKz0gb3RoZXIudzsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU3VidHJhY3RzIG90aGVyIGZyb20gdGhpcyBRdWF0IGFuZCByZXR1cm5zIHRoZSByZXN1bHQgYXMgYSBuZXcgUXVhdC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBvdGhlciBRdWF0IHRvIHN1YnRyYWN0LgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGEgbmV3IFF1YXQuCiAgICAgICAgICovCiAgICAgICAgc3VidHJhY3Qob3RoZXIpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBRdWF0KHRoaXMueCAtIG90aGVyLngsIHRoaXMueSAtIG90aGVyLnksIHRoaXMueiAtIG90aGVyLnosIHRoaXMudyAtIG90aGVyLncpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTY2FsZXMgdGhpcyBRdWF0IGJ5IHNjYWxhciBhbmQgcmV0dXJucyB0aGUgcmVzdWx0IGFzIGEgbmV3IFF1YXQuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gc2NhbGFyIC0gVGhlIHNjYWxhciB2YWx1ZS4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBWZWMzLgogICAgICAgICAqLwogICAgICAgIHNjYWxlKHNjYWxhcikgewogICAgICAgICAgICByZXR1cm4gbmV3IFF1YXQodGhpcy54ICogc2NhbGFyLCB0aGlzLnkgKiBzY2FsYXIsIHRoaXMueiAqIHNjYWxhciwgdGhpcy53ICogc2NhbGFyKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2NhbGVzIHRoaXMgUXVhdCBieSBzY2FsYXIuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gc2NhbGFyIC0gVGhlIHNjYWxhciB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBzY2FsZUluUGxhY2Uoc2NhbGFyKSB7CiAgICAgICAgICAgIHRoaXMueCAqPSBzY2FsYXI7CiAgICAgICAgICAgIHRoaXMueSAqPSBzY2FsYXI7CiAgICAgICAgICAgIHRoaXMueiAqPSBzY2FsYXI7CiAgICAgICAgICAgIHRoaXMudyAqPSBzY2FsYXI7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENhbGN1bGF0ZXMgdGhlIGxlbmd0aCBvZiB0aGlzIFF1YXQuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgbGVuZ3RoLgogICAgICAgICAqLwogICAgICAgIGxlbmd0aCgpIHsKICAgICAgICAgICAgY29uc3QgeCA9IHRoaXMuX19kYXRhWzBdOwogICAgICAgICAgICBjb25zdCB5ID0gdGhpcy5fX2RhdGFbMV07CiAgICAgICAgICAgIGNvbnN0IHogPSB0aGlzLl9fZGF0YVsyXTsKICAgICAgICAgICAgY29uc3QgdyA9IHRoaXMuX19kYXRhWzNdOwogICAgICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2FsY3VsYXRlcyB0aGUgc3F1YXJlZCBsZW5ndGggb2YgdGhpcyBRdWF0LgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIGxlbmd0aC4KICAgICAgICAgKi8KICAgICAgICBsZW5ndGhTcXVhcmVkKCkgewogICAgICAgICAgICBjb25zdCB4ID0gdGhpcy5fX2RhdGFbMF07CiAgICAgICAgICAgIGNvbnN0IHkgPSB0aGlzLl9fZGF0YVsxXTsKICAgICAgICAgICAgY29uc3QgeiA9IHRoaXMuX19kYXRhWzJdOwogICAgICAgICAgICBjb25zdCB3ID0gdGhpcy5fX2RhdGFbM107CiAgICAgICAgICAgIHJldHVybiB4ICogeCArIHkgKiB5ICsgeiAqIHogKyB3ICogdzsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogTm9ybWFsaXplcyB0aGUgUXVhdCBhbmQgcmV0dXJucyBpdCBhcyBhIG5ldyBRdWF0LgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIFF1YXQgbm9ybWFsaXplZC4KICAgICAgICAgKi8KICAgICAgICBub3JtYWxpemUoKSB7CiAgICAgICAgICAgIGNvbnN0IHggPSB0aGlzLl9fZGF0YVswXTsKICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMuX19kYXRhWzFdOwogICAgICAgICAgICBjb25zdCB6ID0gdGhpcy5fX2RhdGFbMl07CiAgICAgICAgICAgIGNvbnN0IHcgPSB0aGlzLl9fZGF0YVszXTsKICAgICAgICAgICAgbGV0IGxlbiA9IHggKiB4ICsgeSAqIHkgKyB6ICogeiArIHcgKiB3OwogICAgICAgICAgICBpZiAobGVuIDwgTnVtYmVyLkVQU0lMT04pIHsKICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUXVhdCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFRPRE86IGV2YWx1YXRlIHVzZSBvZiBnbG1faW52c3FydCBoZXJlPwogICAgICAgICAgICBsZW4gPSAxIC8gTWF0aC5zcXJ0KGxlbik7CiAgICAgICAgICAgIHJldHVybiBuZXcgUXVhdCh4ICogbGVuLCB5ICogbGVuLCB6ICogbGVuLCB3ICogbGVuKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogTm9ybWFsaXplcyB0aGUgUXVhdCwgbW9kaWZ5aW5nIGl0cyB2YWx1ZXMgaW4gcGxhY2UuCiAgICAgICAgICovCiAgICAgICAgbm9ybWFsaXplSW5QbGFjZSgpIHsKICAgICAgICAgICAgY29uc3QgeCA9IHRoaXMuX19kYXRhWzBdOwogICAgICAgICAgICBjb25zdCB5ID0gdGhpcy5fX2RhdGFbMV07CiAgICAgICAgICAgIGNvbnN0IHogPSB0aGlzLl9fZGF0YVsyXTsKICAgICAgICAgICAgY29uc3QgdyA9IHRoaXMuX19kYXRhWzNdOwogICAgICAgICAgICBsZXQgbGVuID0geCAqIHggKyB5ICogeSArIHogKiB6ICsgdyAqIHc7CiAgICAgICAgICAgIGlmIChsZW4gPCBOdW1iZXIuRVBTSUxPTikgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxlbiA9IDEgLyBNYXRoLnNxcnQobGVuKTsKICAgICAgICAgICAgdGhpcy5zZXQoeCAqIGxlbiwgeSAqIGxlbiwgeiAqIGxlbiwgdyAqIGxlbik7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENhbGN1bGF0ZXMgdGhlIGRvdCBwcm9kdWN0IG9mIHRoaXMgcXVhdCBhZ2FpbnN0IGFub3RoZXIuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgUXVhdCB0byBjb21wYXJlIHdpdGguCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIGRvdCBwcm9kdWN0LgogICAgICAgICAqLwogICAgICAgIGRvdChvdGhlcikgewogICAgICAgICAgICByZXR1cm4gdGhpcy54ICogb3RoZXIueCArIHRoaXMueSAqIG90aGVyLnkgKyB0aGlzLnogKiBvdGhlci56ICsgdGhpcy53ICogb3RoZXIudzsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2FsY3VsYXRlcyB0aGUgY3Jvc3MgcHJvZHVjdCBvZiB0d28gUXVhdHMgYW5kIHJldHVybnMgdGhlIHJlc3VsdCBhcyBhIG5ldyBRdWF0LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIFF1YXQgdG8gY2FsY3VsYXRlIHdpdGguCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIGNyb3NzIHByb2R1Y3QgYXMgYSBuZXcgUXVhdC4KICAgICAgICAgKi8KICAgICAgICBjcm9zcyhvdGhlcikgewogICAgICAgICAgICBjb25zdCBheCA9IHRoaXMueDsKICAgICAgICAgICAgY29uc3QgYXkgPSB0aGlzLnk7CiAgICAgICAgICAgIGNvbnN0IGF6ID0gdGhpcy56OwogICAgICAgICAgICBjb25zdCBhdCA9IHRoaXMudzsKICAgICAgICAgICAgY29uc3QgYnggPSBvdGhlci54OwogICAgICAgICAgICBjb25zdCBieSA9IG90aGVyLnk7CiAgICAgICAgICAgIGNvbnN0IGJ6ID0gb3RoZXIuejsKICAgICAgICAgICAgY29uc3QgYnQgPSBvdGhlci53OwogICAgICAgICAgICByZXR1cm4gbmV3IFF1YXQoYXkgKiBieiAtIGF6ICogYnksIGF6ICogYnQgLSBhdCAqIGJ6LCBhdCAqIGJ4IC0gYXggKiBidCwgYXggKiBieSAtIGF5ICogYngpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSByb3RhdGlvbmFsIGNvbmp1Z2F0ZSBvZiB0aGlzIFF1YXQuCiAgICAgICAgICogQ29uanVnYXRpb24gcmVwcmVzZW50cyB0aGUgc2FtZSByb3RhdGlvbiBvZiB0aGUgUXVhdCBidXQKICAgICAgICAgKiBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uIGFyb3VuZCB0aGUgcm90YXRpb25hbCBheGlzLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIHRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgY29uanVnYXRlKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IFF1YXQoLXRoaXMueCwgLXRoaXMueSwgLXRoaXMueiwgdGhpcy53KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJuIHRoZSBpbnZlcnNlIG9mIHRoZSBgUXVhdGAKICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGEgbmV3IFF1YXQuCiAgICAgICAgICovCiAgICAgICAgaW52ZXJzZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29uanVnYXRlKCk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEFsaWducyB0aGlzIHF1YXRlcm5pb24gd2l0aCBhbm90aGVyIG9uZSBlbnN1cmluZyB0aGF0IHRoZSBkZWx0YSBiZXR3ZWVuCiAgICAgICAgICogdGhlIFF1YXQgdmFsdWVzIGlzIHRoZSBzaG9ydGVzdCBwYXRoIG92ZXIgdGhlIGh5cGVyLXNwaGVyZS4KICAgICAgICAgKgogICAgICAgICAqICBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgUXVhdCB0byBkaXZpZGUgYnkuCiAgICAgICAgICovCiAgICAgICAgYWxpZ25XaXRoKG90aGVyKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmRvdChvdGhlcikgPCAwLjApIHsKICAgICAgICAgICAgICAgIHRoaXMuc2V0KC10aGlzLngsIC10aGlzLnksIC10aGlzLnosIC10aGlzLncpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIE11bHRpcGxpZXMgdHdvIHRoaXMgcXVhdCBieSBhbm90aGVyIHJldHVybmluZyB0aGUgcmVzdWx0IGFzIGEgbmV3IFF1YXQuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gb3RoZXIgLSBUaGUgb3RoZXIgUXVhdCB0byBtdWx0aXBseS4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBRdWF0LgogICAgICAgICAqLwogICAgICAgIG11bHRpcGx5KG90aGVyKSB7CiAgICAgICAgICAgIGNvbnN0IGF4ID0gdGhpcy5fX2RhdGFbMF07CiAgICAgICAgICAgIGNvbnN0IGF5ID0gdGhpcy5fX2RhdGFbMV07CiAgICAgICAgICAgIGNvbnN0IGF6ID0gdGhpcy5fX2RhdGFbMl07CiAgICAgICAgICAgIGNvbnN0IGF3ID0gdGhpcy5fX2RhdGFbM107CiAgICAgICAgICAgIGNvbnN0IGJ4ID0gb3RoZXIuX19kYXRhWzBdOwogICAgICAgICAgICBjb25zdCBieSA9IG90aGVyLl9fZGF0YVsxXTsKICAgICAgICAgICAgY29uc3QgYnogPSBvdGhlci5fX2RhdGFbMl07CiAgICAgICAgICAgIGNvbnN0IGJ3ID0gb3RoZXIuX19kYXRhWzNdOwogICAgICAgICAgICByZXR1cm4gbmV3IFF1YXQoYXggKiBidyArIGF3ICogYnggKyBheSAqIGJ6IC0gYXogKiBieSwgYXkgKiBidyArIGF3ICogYnkgKyBheiAqIGJ4IC0gYXggKiBieiwgYXogKiBidyArIGF3ICogYnogKyBheCAqIGJ5IC0gYXkgKiBieCwgYXcgKiBidyAtIGF4ICogYnggLSBheSAqIGJ5IC0gYXogKiBieik7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIE11bHRpcGxpZXMgdGhpcyBxdWF0IGJ5IGFub3RoZXIsIG1vZGlmeWluZyBpdHMgdmFsdWVzIGluIHBsYWNlLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG90aGVyIC0gVGhlIG90aGVyIFF1YXQgdG8gbXVsdGlwbHkuCiAgICAgICAgICovCiAgICAgICAgbXVsdGlwbHlJblBsYWNlKG90aGVyKSB7CiAgICAgICAgICAgIGNvbnN0IGF4ID0gdGhpcy5fX2RhdGFbMF07CiAgICAgICAgICAgIGNvbnN0IGF5ID0gdGhpcy5fX2RhdGFbMV07CiAgICAgICAgICAgIGNvbnN0IGF6ID0gdGhpcy5fX2RhdGFbMl07CiAgICAgICAgICAgIGNvbnN0IGF3ID0gdGhpcy5fX2RhdGFbM107CiAgICAgICAgICAgIGNvbnN0IGJ4ID0gb3RoZXIuX19kYXRhWzBdOwogICAgICAgICAgICBjb25zdCBieSA9IG90aGVyLl9fZGF0YVsxXTsKICAgICAgICAgICAgY29uc3QgYnogPSBvdGhlci5fX2RhdGFbMl07CiAgICAgICAgICAgIGNvbnN0IGJ3ID0gb3RoZXIuX19kYXRhWzNdOwogICAgICAgICAgICB0aGlzLnNldChheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5LCBheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6LCBheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4LCBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUm90YXRlcyBhIHZlY3RvciBieSB0aGlzIHF1YXRlcm5pb24uCiAgICAgICAgICogRG9uJ3QgZm9yZ2V0IHRvIG5vcm1hbGl6ZSB0aGUgcXVhdGVybmlvbiB1bmxlc3MKICAgICAgICAgKiB5b3Ugd2FudCBheGlhbCB0cmFuc2xhdGlvbiBhcyB3ZWxsIGFzIHJvdGF0aW9uLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHZlYzMgLSBUaGUgdmVjMyB2YWx1ZS4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBWZWMzLgogICAgICAgICAqLwogICAgICAgIHJvdGF0ZVZlYzModmVjMykgewogICAgICAgICAgICBjb25zdCB2cSA9IG5ldyBRdWF0KHZlYzMueCwgdmVjMy55LCB2ZWMzLnosIDAuMCk7CiAgICAgICAgICAgIGNvbnN0IHBxID0gdGhpcy5tdWx0aXBseSh2cSkubXVsdGlwbHkodGhpcy5jb25qdWdhdGUoKSk7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjMyhwcS54LCBwcS55LCBwcS56KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0cyB0aGlzIHF1YXRlcm5pb24gdG8gYSByb3RhdGlvbiBieSB0aGUgZ2l2ZW4gYW5nbGUgYWJvdXQgdGhlIFggYXhpcy4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSByYWQgLSBBbmdsZSAoaW4gcmFkaWFucykgdG8gcm90YXRlLgogICAgICAgICAqLwogICAgICAgIHJvdGF0ZVgocmFkKSB7CiAgICAgICAgICAgIHJhZCAqPSAwLjU7CiAgICAgICAgICAgIGNvbnN0IGF4ID0gdGhpcy54OwogICAgICAgICAgICBjb25zdCBheSA9IHRoaXMueTsKICAgICAgICAgICAgY29uc3QgYXogPSB0aGlzLno7CiAgICAgICAgICAgIGNvbnN0IGF3ID0gdGhpcy53OwogICAgICAgICAgICBjb25zdCBieCA9IE1hdGguc2luKHJhZCk7CiAgICAgICAgICAgIGNvbnN0IGJ3ID0gTWF0aC5jb3MocmFkKTsKICAgICAgICAgICAgdGhpcy54ID0gYXggKiBidyArIGF3ICogYng7CiAgICAgICAgICAgIHRoaXMueSA9IGF5ICogYncgKyBheiAqIGJ4OwogICAgICAgICAgICB0aGlzLnogPSBheiAqIGJ3IC0gYXkgKiBieDsKICAgICAgICAgICAgdGhpcy53ID0gYXcgKiBidyAtIGF4ICogYng7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHMgdGhpcyBxdWF0ZXJuaW9uIHRvIGEgcm90YXRpb24gYnkgdGhlIGdpdmVuIGFuZ2xlIGFib3V0IHRoZSBZIGF4aXMuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gcmFkIC0gQW5nbGUgKGluIHJhZGlhbnMpIHRvIHJvdGF0ZS4KICAgICAgICAgKi8KICAgICAgICByb3RhdGVZKHJhZCkgewogICAgICAgICAgICByYWQgKj0gMC41OwogICAgICAgICAgICBjb25zdCBheCA9IHRoaXMueDsKICAgICAgICAgICAgY29uc3QgYXkgPSB0aGlzLnk7CiAgICAgICAgICAgIGNvbnN0IGF6ID0gdGhpcy56OwogICAgICAgICAgICBjb25zdCBhdyA9IHRoaXMudzsKICAgICAgICAgICAgY29uc3QgYnkgPSBNYXRoLnNpbihyYWQpOwogICAgICAgICAgICBjb25zdCBidyA9IE1hdGguY29zKHJhZCk7CiAgICAgICAgICAgIHRoaXMueCA9IGF4ICogYncgLSBheiAqIGJ5OwogICAgICAgICAgICB0aGlzLnkgPSBheSAqIGJ3ICsgYXcgKiBieTsKICAgICAgICAgICAgdGhpcy56ID0gYXogKiBidyArIGF4ICogYnk7CiAgICAgICAgICAgIHRoaXMudyA9IGF3ICogYncgLSBheSAqIGJ5OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXRzIHRoaXMgcXVhdGVybmlvbiB0byBhIHJvdGF0aW9uIGJ5IHRoZSBnaXZlbiBhbmdsZSBhYm91dCB0aGUgWiBheGlzLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHJhZCAtIEFuZ2xlIChpbiByYWRpYW5zKSB0byByb3RhdGUuCiAgICAgICAgICovCiAgICAgICAgcm90YXRlWihyYWQpIHsKICAgICAgICAgICAgcmFkICo9IDAuNTsKICAgICAgICAgICAgY29uc3QgYXggPSB0aGlzLng7CiAgICAgICAgICAgIGNvbnN0IGF5ID0gdGhpcy55OwogICAgICAgICAgICBjb25zdCBheiA9IHRoaXMuejsKICAgICAgICAgICAgY29uc3QgYXcgPSB0aGlzLnc7CiAgICAgICAgICAgIGNvbnN0IGJ6ID0gTWF0aC5zaW4ocmFkKTsKICAgICAgICAgICAgY29uc3QgYncgPSBNYXRoLmNvcyhyYWQpOwogICAgICAgICAgICB0aGlzLnggPSBheCAqIGJ3ICsgYXkgKiBiejsKICAgICAgICAgICAgdGhpcy55ID0gYXkgKiBidyAtIGF4ICogYno7CiAgICAgICAgICAgIHRoaXMueiA9IGF6ICogYncgKyBhdyAqIGJ6OwogICAgICAgICAgICB0aGlzLncgPSBhdyAqIGJ3IC0gYXogKiBiejsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ29udmVydHMgdGhpcyBRdWF0IHRvIGEgTWF0MyAoYSAzeDMgbWF0cml4KS4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUUmV0dXJucyBhIG5ldyBNYXQzLgogICAgICAgICAqLwogICAgICAgIHRvTWF0MygpIHsKICAgICAgICAgICAgY29uc3QgeCA9IHRoaXMueDsKICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMueTsKICAgICAgICAgICAgY29uc3QgeiA9IHRoaXMuejsKICAgICAgICAgICAgY29uc3QgdyA9IHRoaXMudzsKICAgICAgICAgICAgY29uc3QgeDIgPSB4ICsgeDsKICAgICAgICAgICAgY29uc3QgeTIgPSB5ICsgeTsKICAgICAgICAgICAgY29uc3QgejIgPSB6ICsgejsKICAgICAgICAgICAgY29uc3QgeHggPSB4ICogeDI7CiAgICAgICAgICAgIGNvbnN0IHl4ID0geSAqIHgyOwogICAgICAgICAgICBjb25zdCB5eSA9IHkgKiB5MjsKICAgICAgICAgICAgY29uc3QgenggPSB6ICogeDI7CiAgICAgICAgICAgIGNvbnN0IHp5ID0geiAqIHkyOwogICAgICAgICAgICBjb25zdCB6eiA9IHogKiB6MjsKICAgICAgICAgICAgY29uc3Qgd3ggPSB3ICogeDI7CiAgICAgICAgICAgIGNvbnN0IHd5ID0gdyAqIHkyOwogICAgICAgICAgICBjb25zdCB3eiA9IHcgKiB6MjsKICAgICAgICAgICAgY29uc3QgbWF0MyA9IG5ldyBNYXQzKCk7CiAgICAgICAgICAgIG1hdDMubTAwID0gMSAtIHl5IC0geno7CiAgICAgICAgICAgIG1hdDMubTEwID0geXggLSB3ejsKICAgICAgICAgICAgbWF0My5tMjAgPSB6eCArIHd5OwogICAgICAgICAgICBtYXQzLm0wMSA9IHl4ICsgd3o7CiAgICAgICAgICAgIG1hdDMubTExID0gMSAtIHh4IC0geno7CiAgICAgICAgICAgIG1hdDMubTIxID0genkgLSB3eDsKICAgICAgICAgICAgbWF0My5tMDIgPSB6eCAtIHd5OwogICAgICAgICAgICBtYXQzLm0xMiA9IHp5ICsgd3g7CiAgICAgICAgICAgIG1hdDMubTIyID0gMSAtIHh4IC0geXk7CiAgICAgICAgICAgIHJldHVybiBtYXQzOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDYWxjdWxhdGVzIGEgVmVjMyB2YWx1ZSBhbGlnbmVkIHdpdGggdGhlIFggYXhpcyBvZiB0aGlzIHF1YXRlcm5pb24uCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJlc3VsdGluZyBWZWMzIHZhbHVlCiAgICAgICAgICovCiAgICAgICAgZ2V0WGF4aXMoKSB7CiAgICAgICAgICAgIGNvbnN0IHh5ID0gdGhpcy54ICogdGhpcy55OwogICAgICAgICAgICBjb25zdCB4eiA9IHRoaXMueCAqIHRoaXMuejsKICAgICAgICAgICAgY29uc3QgeXkgPSB0aGlzLnkgKiB0aGlzLnk7CiAgICAgICAgICAgIGNvbnN0IHl3ID0gdGhpcy55ICogdGhpcy53OwogICAgICAgICAgICBjb25zdCB6eiA9IHRoaXMueiAqIHRoaXMuejsKICAgICAgICAgICAgY29uc3QgencgPSB0aGlzLnogKiB0aGlzLnc7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjMygxLjAgLSAyLjAgKiAoenogKyB5eSksIDIuMCAqICh4eSArIHp3KSwgMi4wICogKHh6IC0geXcpKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2FsY3VsYXRlcyBhIFZlYzMgdmFsdWUgYWxpZ25lZCB3aXRoIHRoZSBZIGF4aXMgb2YgdGhpcyBxdWF0ZXJuaW9uLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXN1bHRpbmcgVmVjMyB2YWx1ZQogICAgICAgICAqLwogICAgICAgIGdldFlheGlzKCkgewogICAgICAgICAgICBjb25zdCB4eCA9IHRoaXMueCAqIHRoaXMueDsKICAgICAgICAgICAgY29uc3QgeHkgPSB0aGlzLnggKiB0aGlzLnk7CiAgICAgICAgICAgIGNvbnN0IHh3ID0gdGhpcy54ICogdGhpcy53OwogICAgICAgICAgICBjb25zdCB5eiA9IHRoaXMueSAqIHRoaXMuejsKICAgICAgICAgICAgY29uc3QgenogPSB0aGlzLnogKiB0aGlzLno7CiAgICAgICAgICAgIGNvbnN0IHp3ID0gdGhpcy56ICogdGhpcy53OwogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzMoMi4wICogKHh5IC0gencpLCAxLjAgLSAyLjAgKiAoenogKyB4eCksIDIuMCAqICh5eiArIHh3KSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENhbGN1bGF0ZXMgYSBWZWMzIHZhbHVlIGFsaWduZWQgd2l0aCB0aGUgWiBheGlzIG9mIHRoaXMgcXVhdGVybmlvbi4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmVzdWx0aW5nIFZlYzMgdmFsdWUKICAgICAgICAgKi8KICAgICAgICBnZXRaYXhpcygpIHsKICAgICAgICAgICAgY29uc3QgeHggPSB0aGlzLnggKiB0aGlzLng7CiAgICAgICAgICAgIGNvbnN0IHh6ID0gdGhpcy54ICogdGhpcy56OwogICAgICAgICAgICBjb25zdCB4dyA9IHRoaXMueCAqIHRoaXMudzsKICAgICAgICAgICAgY29uc3QgeXkgPSB0aGlzLnkgKiB0aGlzLnk7CiAgICAgICAgICAgIGNvbnN0IHl6ID0gdGhpcy55ICogdGhpcy56OwogICAgICAgICAgICBjb25zdCB5dyA9IHRoaXMueSAqIHRoaXMudzsKICAgICAgICAgICAgLy8gY29uc3QgdGVtcCA9IG5ldyBWZWMzKCkKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMzKDIuMCAqICh5dyArIHh6KSwgMi4wICogKHl6IC0geHcpLCAxLjAgLSAyLjAgKiAoeXkgKyB4eCkpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZWZsZWN0cyB0aGlzIHF1YXRlcm5pb24gYWNjb3JkaW5nIHRvIHRoZSBheGlzIHByb3ZpZGVkLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGF4aXNJbmRleCAtIEFuIGludGVnZXIgd2l0aCB2YWx1ZSBvZiAwIGZvciB0aGUgWCBheGlzLCAxIGZvciB0aGUgWSBheGlzLCBhbmQgMiBmb3IgdGhlIFogYXhpcy4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBRdWF0LgogICAgICAgICAqLwogICAgICAgIG1pcnJvcihheGlzSW5kZXgpIHsKICAgICAgICAgICAgc3dpdGNoIChheGlzSW5kZXgpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFF1YXQodGhpcy56LCB0aGlzLncsIHRoaXMueCwgdGhpcy55KTsKICAgICAgICAgICAgICAgIGNhc2UgMToKICAgICAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFF1YXQoLXRoaXMudywgdGhpcy56LCB0aGlzLnksIC10aGlzLngpOwogICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgUXVhdCh0aGlzLngsIHRoaXMueSwgdGhpcy56LCAtdGhpcy53KTsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBRdWF0KHRoaXMueiwgdGhpcy53LCB0aGlzLngsIHRoaXMueSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ29udmVydHMgdGhpcyBRdWF0IHRvIGEgTWF0NCAoYSA0eDQgbWF0cml4KS4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGEgbmV3IE1hdDQuCiAgICAgICAgICovCiAgICAgICAgdG9NYXQ0KCkgewogICAgICAgICAgICBjb25zdCB4ID0gdGhpcy54OwogICAgICAgICAgICBjb25zdCB5ID0gdGhpcy55OwogICAgICAgICAgICBjb25zdCB6ID0gdGhpcy56OwogICAgICAgICAgICBjb25zdCB3ID0gdGhpcy53OwogICAgICAgICAgICBjb25zdCB4MiA9IHggKyB4OwogICAgICAgICAgICBjb25zdCB5MiA9IHkgKyB5OwogICAgICAgICAgICBjb25zdCB6MiA9IHogKyB6OwogICAgICAgICAgICBjb25zdCB4eCA9IHggKiB4MjsKICAgICAgICAgICAgY29uc3QgeXggPSB5ICogeDI7CiAgICAgICAgICAgIGNvbnN0IHl5ID0geSAqIHkyOwogICAgICAgICAgICBjb25zdCB6eCA9IHogKiB4MjsKICAgICAgICAgICAgY29uc3QgenkgPSB6ICogeTI7CiAgICAgICAgICAgIGNvbnN0IHp6ID0geiAqIHoyOwogICAgICAgICAgICBjb25zdCB3eCA9IHcgKiB4MjsKICAgICAgICAgICAgY29uc3Qgd3kgPSB3ICogeTI7CiAgICAgICAgICAgIGNvbnN0IHd6ID0gdyAqIHoyOwogICAgICAgICAgICAvLyBTZXQgdGhlIGNvbHVtbnMKICAgICAgICAgICAgY29uc3QgbWF0NCA9IG5ldyBNYXQ0KCk7CiAgICAgICAgICAgIG1hdDQubTAwID0gMSAtIHl5IC0geno7CiAgICAgICAgICAgIG1hdDQubTEwID0geXggLSB3ejsKICAgICAgICAgICAgbWF0NC5tMjAgPSB6eCArIHd5OwogICAgICAgICAgICBtYXQ0Lm0wMSA9IHl4ICsgd3o7CiAgICAgICAgICAgIG1hdDQubTExID0gMSAtIHh4IC0geno7CiAgICAgICAgICAgIG1hdDQubTIxID0genkgLSB3eDsKICAgICAgICAgICAgbWF0NC5tMDIgPSB6eCAtIHd5OwogICAgICAgICAgICBtYXQ0Lm0xMiA9IHp5ICsgd3g7CiAgICAgICAgICAgIG1hdDQubTIyID0gMSAtIHh4IC0geXk7CiAgICAgICAgICAgIHJldHVybiBtYXQ0OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBQZXJmb3JtcyBhIGxpbmVhciBpbnRlcnBvbGF0aW9uIG9mIHRoaXMgUXVhdCB0b3dhcmRzIGFub3RoZXIgUXVhdCwgcmV0dXJuaW5nIHRoZSByZXN1bHQgYXMgYSBuZXcgUXVhdC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAgLSBUaGUgb3RoZXIgUXVhdCB0byBpbnRlcnBvbGF0ZSB0b3dhcmRzLgogICAgICAgICAqIEBwYXJhbSB0IC0gSW50ZXJwb2xhdGlvbiBhbW91bnQgYmV0d2VlbiB0aGUgdHdvIGlucHV0cy4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBRdWF0LgogICAgICAgICAqLwogICAgICAgIGxlcnAob3RoZXIsIHQpIHsKICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gbmV3IFF1YXQodGhpcy54ICsgdCAqIChvdGhlci54IC0gdGhpcy54KSwgdGhpcy55ICsgdCAqIChvdGhlci55IC0gdGhpcy55KSwgdGhpcy56ICsgdCAqIChvdGhlci56IC0gdGhpcy56KSwgdGhpcy53ICsgdCAqIChvdGhlci53IC0gdGhpcy53KSk7CiAgICAgICAgICAgIHJlc3VsdC5ub3JtYWxpemVJblBsYWNlKCk7CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFBlcmZvcm1zIGEgc3BoZXJpY2FsIGxpbmVhciBpbnRlcnBvbGF0aW9uIG9mIHRoaXMgUXVhdCB0b3dhcmRzIGFub3RoZXIgUXVhdCwgcmV0dXJuaW5nIHRoZSByZXN1bHQgYXMgYSBuZXcgUXVhdC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBvdGhlciAtIFRoZSBvdGhlciBRdWF0IHRvIGludGVycG9sYXRlIHRvd2FyZHMuCiAgICAgICAgICogQHBhcmFtIHQgLSBJbnRlcnBvbGF0aW9uIGFtb3VudCBiZXR3ZWVuIHRoZSB0d28gaW5wdXRzLgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGEgbmV3IFF1YXQuCiAgICAgICAgICovCiAgICAgICAgc2xlcnAob3RoZXIsIGxhbWJkYSkgewogICAgICAgICAgICAvLy8gaHR0cHM6Ly93d3cuZ2VvbWV0cmljdG9vbHMuY29tL0RvY3VtZW50YXRpb24vRmFzdEFuZEFjY3VyYXRlU2xlcnAucGRmCiAgICAgICAgICAgIGNvbnN0IGRvdFByb2R1Y3QgPSB0aGlzLmRvdChvdGhlcik7CiAgICAgICAgICAgIGlmIChkb3RQcm9kdWN0ID4gMC45OTkpCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICAgICAgLy8gYWxnb3JpdGhtIGFkYXB0ZWQgZnJvbSBTaG9lbWFrZSdzIHBhcGVyCiAgICAgICAgICAgIC8vIGxhbWJkYSBpcyBpbiAoMCwgz4AvMl0KICAgICAgICAgICAgY29uc3QgdGhldGEgPSBNYXRoLmFjb3MoZG90UHJvZHVjdCk7CiAgICAgICAgICAgIGNvbnN0IHN0ID0gTWF0aC5zaW4odGhldGEpOwogICAgICAgICAgICBjb25zdCBzdXQgPSBNYXRoLnNpbihsYW1iZGEgKiB0aGV0YSk7CiAgICAgICAgICAgIGNvbnN0IHNvdXQgPSBNYXRoLnNpbigoMSAtIGxhbWJkYSkgKiB0aGV0YSk7CiAgICAgICAgICAgIGNvbnN0IGNvZWZmMSA9IHNvdXQgLyBzdDsKICAgICAgICAgICAgY29uc3QgY29lZmYyID0gc3V0IC8gc3Q7CiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG5ldyBRdWF0KGNvZWZmMSAqIHRoaXMueCArIGNvZWZmMiAqIG90aGVyLngsIGNvZWZmMSAqIHRoaXMueSArIGNvZWZmMiAqIG90aGVyLnksIGNvZWZmMSAqIHRoaXMueiArIGNvZWZmMiAqIG90aGVyLnosIGNvZWZmMSAqIHRoaXMudyArIGNvZWZmMiAqIG90aGVyLncpOwogICAgICAgICAgICByZXN1bHQubm9ybWFsaXplSW5QbGFjZSgpOwogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDbG9uZXMgdGhpcyBRdWF0IGFuZCByZXR1cm5zIGEgbmV3IFF1YXQuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBRdWF0LgogICAgICAgICAqLwogICAgICAgIGNsb25lKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IFF1YXQodGhpcy5fX2RhdGFbMF0sIHRoaXMuX19kYXRhWzFdLCB0aGlzLl9fZGF0YVsyXSwgdGhpcy5fX2RhdGFbM10pOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSB0eXBlIGFzIGFuIGFycmF5LiBPZnRlbiB1c2VkIHRvIHBhc3MgdHlwZXMgdG8gdGhlIEdQVS4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGFzIGFuIGFycmF5LgogICAgICAgICAqLwogICAgICAgIGFzQXJyYXkoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YTsKICAgICAgICB9CiAgICAgICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAgICAgLy8gUGVyc2lzdGVuY2UKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIFZlYzMgdG8gYSBzdHJpbmcgaW4gSlNPTiBmb3JtYXQuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICB0b1N0cmluZygpIHsKICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5ldy1jYXAKICAgICAgICAgICAgcmV0dXJuIFN0cmluZ0Z1bmN0aW9ucy5zdHJpbmdpZnlKU09OV2l0aEZpeGVkUHJlY2lzaW9uKHRoaXMudG9KU09OKCkpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBUaGUgdG9KU09OIG1ldGhvZCBlbmNvZGVzIHRoaXMgdHlwZSBhcyBhIGpzb24gb2JqZWN0IGZvciBwZXJzaXN0ZW5jZS4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUaGUganNvbiBvYmplY3QuCiAgICAgICAgICovCiAgICAgICAgdG9KU09OKCkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgeDogdGhpcy54LAogICAgICAgICAgICAgICAgeTogdGhpcy55LAogICAgICAgICAgICAgICAgejogdGhpcy56LAogICAgICAgICAgICAgICAgdzogdGhpcy53LAogICAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBUaGUgZnJvbUpTT04gbWV0aG9kIGRlY29kZXMgYSBqc29uIG9iamVjdCBmb3IgdGhpcyB0eXBlLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGogLSBUaGUganNvbiBvYmplY3QuCiAgICAgICAgICovCiAgICAgICAgZnJvbUpTT04oaikgewogICAgICAgICAgICB0aGlzLl9fZGF0YVswXSA9IGoueDsKICAgICAgICAgICAgdGhpcy5fX2RhdGFbMV0gPSBqLnk7CiAgICAgICAgICAgIHRoaXMuX19kYXRhWzJdID0gai56OwogICAgICAgICAgICB0aGlzLl9fZGF0YVszXSA9IGoudzsKICAgICAgICAgICAgdGhpcy5ub3JtYWxpemVJblBsYWNlKCk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIExvYWRzIHRoZSBzdGF0ZSBvZiB0aGUgdmFsdWUgZnJvbSBhIGJpbmFyeSByZWFkZXIuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIC0gVGhlIHJlYWRlciB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICByZWFkQmluYXJ5KHJlYWRlcikgewogICAgICAgICAgICB0aGlzLnggPSByZWFkZXIubG9hZEZsb2F0MzIoKTsKICAgICAgICAgICAgdGhpcy55ID0gcmVhZGVyLmxvYWRGbG9hdDMyKCk7CiAgICAgICAgICAgIHRoaXMueiA9IHJlYWRlci5sb2FkRmxvYXQzMigpOwogICAgICAgICAgICB0aGlzLncgPSByZWFkZXIubG9hZEZsb2F0MzIoKTsKICAgICAgICB9CiAgICB9CgogICAgLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqLwogICAgLyoqCiAgICAgKiBNYXRoIEZ1bmN0aW9ucwogICAgICovCiAgICBjbGFzcyBNYXRoRnVuY3Rpb25zIHsKICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyBSYWRpYW5zIHRvIERlZ3JlZXMKICAgICAgICAgKgogICAgICAgICAqIEBzdGF0aWMKICAgICAgICAgKiBAcGFyYW0gcmFkIC0gUmFkaWFucyB2YWx1ZQogICAgICAgICAqIEByZXR1cm4gLSBEZWdyZWVzIGVxdWl2YWxlbnQKICAgICAgICAgKi8KICAgICAgICBzdGF0aWMgcmFkVG9EZWcocmFkKSB7CiAgICAgICAgICAgIHJldHVybiByYWQgLyAoTWF0aC5QSSAvIDE4MCk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENvbnZlcnRzIERlZ3JlZXMgdG8gUmFkaWFudHMKICAgICAgICAgKgogICAgICAgICAqIEBzdGF0aWMKICAgICAgICAgKiBAcGFyYW0gZGVnIC0gRGVncmVlcyB2YWx1ZQogICAgICAgICAqIEByZXR1cm4gLSAgUmFkaWFucyBlcXVpdmFsZW50CiAgICAgICAgICovCiAgICAgICAgc3RhdGljIGRlZ1RvUmFkKGRlZykgewogICAgICAgICAgICByZXR1cm4gZGVnICogKE1hdGguUEkgLyAxODApOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBWZXJpZmllcyBpZiB0aGUgc3BlY2lmaWVkIHBhcmFtZXRlciBpcyBudW1lcmljLgogICAgICAgICAqCiAgICAgICAgICogQHN0YXRpYwogICAgICAgICAqIEBwYXJhbSBudW1iZXIgLSBOdW1iZXIgdG8gdGVzdAogICAgICAgICAqIEByZXR1cm4gLSBgdHJ1ZWAgd2hlbiBpcyBhIHZhbGlkIG51bWJlcgogICAgICAgICAqLwogICAgICAgIHN0YXRpYyBpc051bWVyaWMobnVtYmVyKSB7CiAgICAgICAgICAgIHJldHVybiAhaXNOYU4ocGFyc2VGbG9hdChudW1iZXIpKSAmJiBpc0Zpbml0ZShudW1iZXIpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZW5lcmF0ZXMgYW5kIHJldHVybnMgYSByYW5kb20gaW50ZWdlciB3aXRoaW4gdGhlIHNwZWNpZmllZCByYW5nZS4KICAgICAgICAgKgogICAgICAgICAqIEBzdGF0aWMKICAgICAgICAgKiBAcGFyYW0gbWluIC0gTG93ZXIgdmFsdWUgcmFuZG9tIGludCBjYW4gYmUuCiAgICAgICAgICogQHBhcmFtIG1heCAtIEhpZ2hlc3QgdmFsdWUgcmFuZG9tIGludCBjYW4gYmUuCiAgICAgICAgICogQHJldHVybiAtIFJhbmRvbSBudW1iZXIgaW5zaWRlIHJhbmdlLgogICAgICAgICAqLwogICAgICAgIHN0YXRpYyByYW5kb21JbnQobWluLCBtYXgpIHsKICAgICAgICAgICAgbWluID0gTWF0aC5jZWlsKG1pbik7CiAgICAgICAgICAgIG1heCA9IE1hdGguZmxvb3IobWF4KTsKICAgICAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChtYXggLSBtaW4pKSArIG1pbjsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2FsY3VsYXRlcyBhIGxpbmVhbCBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIGlucHV0cyBmb3IgdGhlIHNwZWNpZmllZCBwYXJhbWV0ZXIodCkuCiAgICAgICAgICoKICAgICAgICAgKiBAc3RhdGljCiAgICAgICAgICogQHBhcmFtIHYwIC0KICAgICAgICAgKiBAcGFyYW0gdjEgLQogICAgICAgICAqIEBwYXJhbSB0IC0KICAgICAgICAgKiBAcmV0dXJuIC0KICAgICAgICAgKi8KICAgICAgICBzdGF0aWMgbGVycCh2MCwgdjEsIHQpIHsKICAgICAgICAgICAgcmV0dXJuIHYwICsgdCAqICh2MSAtIHYwKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmVzdHJpY3RzIHRoZSBzcGVjaWZpZWQgdmFsdWUgYmV0d2VlbiB0d28gbnVtYmVycwogICAgICAgICAqCiAgICAgICAgICogQHN0YXRpYwogICAgICAgICAqIEBwYXJhbSB2YWx1ZQogICAgICAgICAqIEBwYXJhbSBtaW4KICAgICAgICAgKiBAcGFyYW0gbWF4CiAgICAgICAgICogQHJldHVybgogICAgICAgICAqLwogICAgICAgIHN0YXRpYyBjbGFtcCh2YWx1ZSwgbWluLCBtYXgpIHsKICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKE1hdGgubWF4KHZhbHVlLCBtaW4pLCBtYXgpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSBuZWFyZXN0IHBvdyBvZiB0d28gdmFsdWUgb2YgdGhlIHNwZWNpZmllZCBudW1iZXIuCiAgICAgICAgICoKICAgICAgICAgKiBAc3RhdGljCiAgICAgICAgICogQHBhcmFtIHZhbHVlIC0KICAgICAgICAgKiBAcmV0dXJuIC0KICAgICAgICAgKi8KICAgICAgICBzdGF0aWMgbmVhcmVzdFBvdzIodmFsdWUpIHsKICAgICAgICAgICAgcmV0dXJuIE1hdGgucG93KDIsIE1hdGgucm91bmQoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5sb2coMikpKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyB0aGUgbmVhcmVzdCBwb3cgb2YgdGVuIHZhbHVlIG9mIHRoZSBzcGVjaWZpZWQgbnVtYmVyLgogICAgICAgICAqCiAgICAgICAgICogQHN0YXRpYwogICAgICAgICAqIEBwYXJhbSB2YWx1ZSAtCiAgICAgICAgICogQHJldHVybiAtCiAgICAgICAgICovCiAgICAgICAgc3RhdGljIG5lYXJlc3RQb3cxMCh2YWx1ZSkgewogICAgICAgICAgICByZXR1cm4gTWF0aC5wb3coMTAsIE1hdGgucm91bmQoTWF0aC5sb2cxMCh2YWx1ZSkgLyBNYXRoLmxvZzEwKDEwKSkpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSBuZXh0IHBvdyBvZiB0d28gdmFsdWUgb2YgdGhlIHNwZWNpZmllZCBudW1iZXIuCiAgICAgICAgICoKICAgICAgICAgKiBAc3RhdGljCiAgICAgICAgICogQHBhcmFtIHZhbHVlIC0KICAgICAgICAgKiBAcmV0dXJuIC0KICAgICAgICAgKi8KICAgICAgICBzdGF0aWMgbmV4dFBvdzIodmFsdWUpIHsKICAgICAgICAgICAgaWYgKHRoaXMuZnJhY3QoTWF0aC5sb2cyKHZhbHVlKSkgPT0gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGxldCBleHAgPSAwOwogICAgICAgICAgICB3aGlsZSAodmFsdWUgPiAwKSB7CiAgICAgICAgICAgICAgICBleHArKzsKICAgICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUgPj4gMTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gMSA8PCBleHA7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgdGhlIGZyYWN0aW9uYWwgY29tcG9uZW50IG9mIGEgbnVtYmVyCiAgICAgICAgICoKICAgICAgICAgKiBAc3RhdGljCiAgICAgICAgICogQHBhcmFtIHZhbHVlIC0KICAgICAgICAgKiBAcmV0dXJuIC0KICAgICAgICAgKi8KICAgICAgICBzdGF0aWMgZnJhY3QodmFsdWUpIHsKICAgICAgICAgICAgaWYgKHZhbHVlID09IDApCiAgICAgICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICAgICAgaWYgKHZhbHVlIDwgMCkgewogICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gLTEuMCkKICAgICAgICAgICAgICAgICAgICByZXR1cm4gLXZhbHVlOwogICAgICAgICAgICAgICAgcmV0dXJuIC12YWx1ZSAlIE1hdGguZmxvb3IoLXZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodmFsdWUgPCAxLjApCiAgICAgICAgICAgICAgICByZXR1cm4gdmFsdWU7CiAgICAgICAgICAgIHJldHVybiB2YWx1ZSAlIE1hdGguZmxvb3IodmFsdWUpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBNb3ZlcyB0aGUgc3BlY2lmaWVkIHZhbHVlIGZyb20gb25lIG51bWVyaWMgZG9tYWluKHJhbmdlKSB0byBhbm90aGVyLgogICAgICAgICAqCiAgICAgICAgICogQHN0YXRpYwogICAgICAgICAqIEBwYXJhbSB2YWx1ZSAtCiAgICAgICAgICogQHBhcmFtIHN0YXJ0MSAtCiAgICAgICAgICogQHBhcmFtIGVuZDEgLQogICAgICAgICAqIEBwYXJhbSBzdGFydDIgLQogICAgICAgICAqIEBwYXJhbSBlbmQyIC0KICAgICAgICAgKiBAcmV0dXJuIC0KICAgICAgICAgKi8KICAgICAgICBzdGF0aWMgcmVtYXAodmFsdWUsIHN0YXJ0MSwgZW5kMSwgc3RhcnQyLCBlbmQyKSB7CiAgICAgICAgICAgIHJldHVybiBzdGFydDIgKyAoZW5kMiAtIHN0YXJ0MikgKiAoKHZhbHVlIC0gc3RhcnQxKSAvIChlbmQxIC0gc3RhcnQxKSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFBlcmZvcm0gSGVybWl0ZSBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHZhbHVlcwogICAgICAgICAqCiAgICAgICAgICogQHN0YXRpYwogICAgICAgICAqIEBwYXJhbSBlZGdlMCAtCiAgICAgICAgICogQHBhcmFtIGVkZ2UxIC0KICAgICAgICAgKiBAcGFyYW0geCAtCiAgICAgICAgICogQHJldHVybiAtCiAgICAgICAgICovCiAgICAgICAgc3RhdGljIHNtb290aFN0ZXAoZWRnZTAsIGVkZ2UxLCB4KSB7CiAgICAgICAgICAgIGNvbnN0IHQgPSB0aGlzLmNsYW1wKCh4IC0gZWRnZTApIC8gKGVkZ2UxIC0gZWRnZTApLCAwLjAsIDEuMCk7CiAgICAgICAgICAgIHJldHVybiB0ICogdCAqICgzLjAgLSAyLjAgKiB0KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUGVyZm9ybXMgLSBpbnRlcnBvbGF0aW9uIGJldHdlZW4gdHdvIHZhbHVlcwogICAgICAgICAqCiAgICAgICAgICogQHN0YXRpYwogICAgICAgICAqIEBwYXJhbSBlZGdlMCAtCiAgICAgICAgICogQHBhcmFtIGVkZ2UxIC0KICAgICAgICAgKiBAcGFyYW0geCAtCiAgICAgICAgICogQHJldHVybiAtCiAgICAgICAgICovCiAgICAgICAgc3RhdGljIGxpblN0ZXAoZWRnZTAsIGVkZ2UxLCB4KSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmNsYW1wKCh4IC0gZWRnZTApIC8gKGVkZ2UxIC0gZWRnZTApLCAwLjAsIDEuMCk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBGbG9hdDE2IGZyb20gdHdvIHVuc2lnbmVkIEludDgKICAgICAgICAgKgogICAgICAgICAqIEBzdGF0aWMKICAgICAgICAgKiBAcGFyYW0gYyAtIEFycmF5IHdpdGggdGhlIHR3byBVSW50OAogICAgICAgICAqIEByZXR1cm4gLSBEZWNvZGVkIEZsb2F0MTYKICAgICAgICAgKi8KICAgICAgICBzdGF0aWMgZGVjb2RlMTZCaXRGbG9hdEZyb20yeFVJbnQ4KGMpIHsKICAgICAgICAgICAgY29uc3QgaXggPSBjWzBdOyAvLyAxc3QgYnl0ZTogMSBiaXQgc2lnbmVkIG51bSwgNCBiaXRzIGV4cG9uZW50LCAzIGJpdHMgbWFudGlzc2EgKE1TQikKICAgICAgICAgICAgY29uc3QgaXkgPSBjWzFdOyAvLyAybmQgYnl0ZTogOCBiaXQgbWFudGlzc2EgKExTQikKICAgICAgICAgICAgY29uc3QgcyA9IGl4ICYgMHg4MCA/IDEgOiAtMTsgLy8gZ2V0IGJpdCA4CiAgICAgICAgICAgIGNvbnN0IGlleHAgPSAoaXggJiAweDc4KSA+PiAzOyAvLyBtYXNrIGJpdHMgNy00CiAgICAgICAgICAgIGNvbnN0IG1zYiA9IGl4ICYgMHg3OyAvLyBtYXNrIGJpdHMgMy0xCiAgICAgICAgICAgIGxldCBub3JtID0gaWV4cCA9PSAwID8gMCA6IDIwNDg7IC8vIGRpc3Rpbmd1aXNoIGJldHdlZW4gbm9ybWFsaXplZCBhbmQgc3ViLW5vcm1hbGl6ZWQgbnVtYmVycwogICAgICAgICAgICBjb25zdCBtYW50aXNzYSA9IG5vcm0gKyAobXNiIDw8IDgpICsgaXk7IC8vIGltcGxpY2l0IHByZWNlZGluZyAxIG9yIDAgYWRkZWQgaGVyZQogICAgICAgICAgICBub3JtID0gaWV4cCA9PSAwID8gMSA6IDA7IC8vIG5vcm1hbGl6YXRpb24gdG9nZ2xlCiAgICAgICAgICAgIGNvbnN0IGV4cG9uZW50ID0gTWF0aC5wb3coMiwgaWV4cCArIG5vcm0gLSAxNik7IC8vIC01IGZvciB0aGUgdGhlIGV4cG9uZW50IGJpYXMgZnJvbSAyXi01IHRvIDJeMTAgcGx1cyBhbm90aGVyIC0xMSBmb3IgdGhlIG5vcm1hbGl6ZWQgMTIgYml0IG1hbnRpc3NhCiAgICAgICAgICAgIGNvbnN0IHYgPSBzICogbWFudGlzc2EgKiBleHBvbmVudDsKICAgICAgICAgICAgcmV0dXJuIHY7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEVuY29kZXMgYW4gYXJyYXkgb2YgdHdvIHVuc2lnbmVkIEludDggdG8gYSBGbG9hdDE2CiAgICAgICAgICoKICAgICAgICAgKiBAc3RhdGljCiAgICAgICAgICogQHBhcmFtIHYgLSBGbG9hdDE2IG51bWJlcgogICAgICAgICAqIEByZXR1cm4gLSBFbmNvZGVkIFVuc2lnbmVkIEludDggYXJyYXkKICAgICAgICAgKi8KICAgICAgICBzdGF0aWMgZW5jb2RlMTZCaXRGbG9hdEludG8yeFVJbnQ4KHYpIHsKICAgICAgICAgICAgY29uc3QgYyA9IG5ldyBVaW50OEFycmF5KDIpOwogICAgICAgICAgICAvLyBjb25zdCBjID0gWzAsIDBdOwogICAgICAgICAgICBjb25zdCBzaWdudW0gPSB2ID49IDAgPyAxMjggOiAwOwogICAgICAgICAgICB2ID0gTWF0aC5hYnModik7CiAgICAgICAgICAgIGxldCBleHBvbmVudCA9IDE1OwogICAgICAgICAgICBsZXQgbGltaXQgPSAxMDI0OyAvLyBjb25zaWRlcmluZyB0aGUgYmlhcyBmcm9tIDJeLTUgdG8gMl4xMCAoPT0xMDI0KQogICAgICAgICAgICBmb3IgKGxldCBleHAgPSAxNTsgZXhwID4gMDsgZXhwLS0pIHsKICAgICAgICAgICAgICAgIGlmICh2IDwgbGltaXQpIHsKICAgICAgICAgICAgICAgICAgICBsaW1pdCAvPSAyOwogICAgICAgICAgICAgICAgICAgIGV4cG9uZW50LS07CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGV0IHJlc3Q7CiAgICAgICAgICAgIGlmIChleHBvbmVudCA9PSAwKSB7CiAgICAgICAgICAgICAgICByZXN0ID0gdiAvIGxpbWl0IC8gMjsgLy8gInN1Yi1ub3JtYWxpemUiIGltcGxpY2l0IHByZWNlZGluZyAwLgogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgcmVzdCA9ICh2IC0gbGltaXQpIC8gbGltaXQ7IC8vIG5vcm1hbGl6ZSBhY2NvcmRpbmdseSB0byBpbXBsaWNpdCBwcmVjZWRpbmcgMS4KICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBtYW50aXNzYSA9IE1hdGgucm91bmQocmVzdCAqIDIwNDgpOyAvLyAyMDQ4ID0gMl4xMSBmb3IgdGhlIChzcGxpdCkgMTEgYml0IG1hbnRpc3NhCiAgICAgICAgICAgIGNvbnN0IG1zYiA9IG1hbnRpc3NhIC8gMjU2OyAvLyB0aGUgbW9zdCBzaWduaWZpY2FudCAzIGJpdHMgZ28gaW50byB0aGUgbG93ZXIgcGFydCBvZiB0aGUgZmlyc3QgYnl0ZQogICAgICAgICAgICBjb25zdCBsc2IgPSBtYW50aXNzYSAtIG1zYiAqIDI1NjsgLy8gdGhlcmUgZ28gdGhlIG90aGVyIDggYml0IG9mIHRoZSBsb3dlciBzaWduaWZpY2FuY2UKICAgICAgICAgICAgY1swXSA9IHNpZ251bSArIGV4cG9uZW50ICogOCArIG1zYjsgLy8gY29sb3Igbm9ybWFsaXphdGlvbiBmb3IgdGV4dHVyZTJECiAgICAgICAgICAgIGNbMV0gPSBsc2I7CiAgICAgICAgICAgIGlmICh2ID49IDIwNDgpIHsKICAgICAgICAgICAgICAgIGNbMF0gPSAyNTU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGM7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFRyYW5zZm9ybXMgYSAxNiBiaXQgZmxvYXQgdG8gYW4gZW5jb2RlZCBpbnRlZ2VyLgogICAgICAgICAqCiAgICAgICAgICogQHN0YXRpYwogICAgICAgICAqIEBwYXJhbSB2IC0gRmxvYXQxNiBudW1iZXIgdG8gZW5jb2RlCiAgICAgICAgICogQHJldHVybiAtIEVuY29kZWQgbnVtYmVyCiAgICAgICAgICovCiAgICAgICAgc3RhdGljIGVuY29kZTE2Qml0RmxvYXQodikgewogICAgICAgICAgICBjb25zdCBmbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDEpOwogICAgICAgICAgICBmbG9hdDMyQXJyYXlbMF0gPSB2OwogICAgICAgICAgICBjb25zdCBpbnQzMlZpZXcgPSBuZXcgSW50MzJBcnJheShmbG9hdDMyQXJyYXkuYnVmZmVyKTsKICAgICAgICAgICAgY29uc3QgdG9VSW50MTYgPSAoeCkgPT4gewogICAgICAgICAgICAgICAgbGV0IGJpdHMgPSAoeCA+PiAxNikgJiAweDgwMDA7IC8qIEdldCB0aGUgc2lnbiAqLwogICAgICAgICAgICAgICAgbGV0IG0gPSAoeCA+PiAxMikgJiAweDA3ZmY7IC8qIEtlZXAgb25lIGV4dHJhIGJpdCBmb3Igcm91bmRpbmcgKi8KICAgICAgICAgICAgICAgIGNvbnN0IGUgPSAoeCA+PiAyMykgJiAweGZmOyAvKiBVc2luZyBpbnQgaXMgZmFzdGVyIGhlcmUgKi8KICAgICAgICAgICAgICAgIC8qIElmIHplcm8sIG9yIGRlLW5vcm1hbCwgb3IgZXhwb25lbnQgdW5kZXJmbG93cyB0b28gbXVjaCBmb3IgYSBkZS1ub3JtYWwKICAgICAgICAgICAgICAgICAqIGhhbGYsIHJldHVybiBzaWduZWQgemVyby4gKi8KICAgICAgICAgICAgICAgIGlmIChlIDwgMTAzKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJpdHM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvKiBJZiBOYU4sIHJldHVybiBOYU4uIElmIEluZiBvciBleHBvbmVudCBvdmVyZmxvdywgcmV0dXJuIEluZi4gKi8KICAgICAgICAgICAgICAgIGlmIChlID4gMTQyKSB7CiAgICAgICAgICAgICAgICAgICAgYml0cyB8PSAweDdjMDA7CiAgICAgICAgICAgICAgICAgICAgLyogSWYgZXhwb25lbnQgd2FzIDB4ZmYgYW5kIG9uZSBtYW50aXNzYSBiaXQgd2FzIHNldCwgaXQgbWVhbnMgTmFOLAogICAgICAgICAgICAgICAgICAgICAqIG5vdCBJbmYsIHNvIG1ha2Ugc3VyZSB3ZSBzZXQgb25lIG1hbnRpc3NhIGJpdCB0b28uICovCiAgICAgICAgICAgICAgICAgICAgYml0cyB8PSAoZSA9PSAyNTUgPyAwIDogMSkgJiYgeCAmIDB4MDA3ZmZmZmY7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJpdHM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvKiBJZiBleHBvbmVudCB1bmRlcmZsb3dzIGJ1dCBub3QgdG9vIG11Y2gsIHJldHVybiBhIGRlLW5vcm1hbCAqLwogICAgICAgICAgICAgICAgaWYgKGUgPCAxMTMpIHsKICAgICAgICAgICAgICAgICAgICBtIHw9IDB4MDgwMDsKICAgICAgICAgICAgICAgICAgICAvKiBFeHRyYSByb3VuZGluZyBtYXkgb3ZlcmZsb3cgYW5kIHNldCBtYW50aXNzYSB0byAwIGFuZCBleHBvbmVudAogICAgICAgICAgICAgICAgICAgICAqIHRvIDEsIHdoaWNoIGlzIE9LLiAqLwogICAgICAgICAgICAgICAgICAgIGJpdHMgfD0gKG0gPj4gKDExNCAtIGUpKSArICgobSA+PiAoMTEzIC0gZSkpICYgMSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGJpdHM7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBiaXRzIHw9ICgoZSAtIDExMikgPDwgMTApIHwgKG0gPj4gMSk7CiAgICAgICAgICAgICAgICAvKiBFeHRyYSByb3VuZGluZy4gQW4gb3ZlcmZsb3cgd2lsbCBzZXQgbWFudGlzc2EgdG8gMCBhbmQgaW5jcmVtZW50CiAgICAgICAgICAgICAgICAgKiB0aGUgZXhwb25lbnQsIHdoaWNoIGlzIE9LLiAqLwogICAgICAgICAgICAgICAgYml0cyArPSBtICYgMTsKICAgICAgICAgICAgICAgIHJldHVybiBiaXRzOwogICAgICAgICAgICB9OwogICAgICAgICAgICByZXR1cm4gdG9VSW50MTYoaW50MzJWaWV3WzBdKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQXMgb3Bwb3NpdGUgb2YgdGhlIGBlbmNvZGUxNkJpdEZsb2F0YCBtZXRob2QsIHRoaXMgdGFrZXMgYW4gZW5jb2RlZCBpbnRlZ2VyIHZhbHVlLAogICAgICAgICAqIGFuZCByZXR1cm5zIHRoZSAxNiBiaXQgZmxvYXQuCiAgICAgICAgICoKICAgICAgICAgKiBAc3RhdGljCiAgICAgICAgICogQHBhcmFtIGggLSBFbmNvZGVkIGludGVnZXIKICAgICAgICAgKiBAcmV0dXJuIC0gRGVjb2RlZCAxNiBiaXQgZmxvYXQuCiAgICAgICAgICovCiAgICAgICAgc3RhdGljIGRlY29kZTE2Qml0RmxvYXQoaCkgewogICAgICAgICAgICBjb25zdCBzID0gKGggJiAweDgwMDApID4+IDE1OwogICAgICAgICAgICBjb25zdCBlID0gKGggJiAweDdjMDApID4+IDEwOwogICAgICAgICAgICBjb25zdCBmID0gaCAmIDB4MDNmZjsKICAgICAgICAgICAgaWYgKGUgPT0gMCkgewogICAgICAgICAgICAgICAgcmV0dXJuIChzID8gLTEgOiAxKSAqIE1hdGgucG93KDIsIC0xNCkgKiAoZiAvIE1hdGgucG93KDIsIDEwKSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoZSA9PSAweDFmKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZiA/IE5hTiA6IChzID8gLTEgOiAxKSAqIEluZmluaXR5OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiAocyA/IC0xIDogMSkgKiBNYXRoLnBvdygyLCBlIC0gMTUpICogKDEgKyBmIC8gTWF0aC5wb3coMiwgMTApKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVHJhbnNmb3JtcyBhbiBhcnJheSBvZiBGbG9hdCAzMiB0byBhbiBhcnJheSBvZiB1bnNpZ25lZCBJbnQxNi4KICAgICAgICAgKgogICAgICAgICAqIEBzdGF0aWMKICAgICAgICAgKiBAcGFyYW0gZmxvYXQzMkFycmF5IC0KICAgICAgICAgKiBAcmV0dXJuIC0gVW5zaWduZWQgSW50MTYgYXJyYXkgcmVwcmVzZW50YXRpdmUgb2YgdGhlIEZsb2F0MzJBcnJheQogICAgICAgICAqLwogICAgICAgIHN0YXRpYyBjb252ZXJ0RmxvYXQzMkFycmF5VG9VSW50MTZBcnJheShmbG9hdDMyQXJyYXkpIHsKICAgICAgICAgICAgY29uc3QgdW5pdDE2cyA9IG5ldyBVaW50MTZBcnJheShmbG9hdDMyQXJyYXkubGVuZ3RoKTsKICAgICAgICAgICAgY29uc3QgaW50MzJWaWV3ID0gbmV3IEludDMyQXJyYXkoZmxvYXQzMkFycmF5LmJ1ZmZlcik7CiAgICAgICAgICAgIGNvbnN0IHRvVUludDE2ID0gKHgpID0+IHsKICAgICAgICAgICAgICAgIGxldCBiaXRzID0gKHggPj4gMTYpICYgMHg4MDAwOyAvKiBHZXQgdGhlIHNpZ24gKi8KICAgICAgICAgICAgICAgIGxldCBtID0gKHggPj4gMTIpICYgMHgwN2ZmOyAvKiBLZWVwIG9uZSBleHRyYSBiaXQgZm9yIHJvdW5kaW5nICovCiAgICAgICAgICAgICAgICBjb25zdCBlID0gKHggPj4gMjMpICYgMHhmZjsgLyogVXNpbmcgaW50IGlzIGZhc3RlciBoZXJlICovCiAgICAgICAgICAgICAgICAvKiBJZiB6ZXJvLCBvciBkZS1ub3JtYWwsIG9yIGV4cG9uZW50IHVuZGVyZmxvd3MgdG9vIG11Y2ggZm9yIGEgZGUtbm9ybWFsCiAgICAgICAgICAgICAgICAgKiBoYWxmLCByZXR1cm4gc2lnbmVkIHplcm8uICovCiAgICAgICAgICAgICAgICBpZiAoZSA8IDEwMykgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBiaXRzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLyogSWYgTmFOLCByZXR1cm4gTmFOLiBJZiBJbmYgb3IgZXhwb25lbnQgb3ZlcmZsb3csIHJldHVybiBJbmYuICovCiAgICAgICAgICAgICAgICBpZiAoZSA+IDE0MikgewogICAgICAgICAgICAgICAgICAgIGJpdHMgfD0gMHg3YzAwOwogICAgICAgICAgICAgICAgICAgIC8qIElmIGV4cG9uZW50IHdhcyAweGZmIGFuZCBvbmUgbWFudGlzc2EgYml0IHdhcyBzZXQsIGl0IG1lYW5zIE5hTiwKICAgICAgICAgICAgICAgICAgICAgKiBub3QgSW5mLCBzbyBtYWtlIHN1cmUgd2Ugc2V0IG9uZSBtYW50aXNzYSBiaXQgdG9vLiAqLwogICAgICAgICAgICAgICAgICAgIGJpdHMgfD0gKGUgPT0gMjU1ID8gMCA6IDEpICYmIHggJiAweDAwN2ZmZmZmOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBiaXRzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLyogSWYgZXhwb25lbnQgdW5kZXJmbG93cyBidXQgbm90IHRvbyBtdWNoLCByZXR1cm4gYSBkZS1ub3JtYWwgKi8KICAgICAgICAgICAgICAgIGlmIChlIDwgMTEzKSB7CiAgICAgICAgICAgICAgICAgICAgbSB8PSAweDA4MDA7CiAgICAgICAgICAgICAgICAgICAgLyogRXh0cmEgcm91bmRpbmcgbWF5IG92ZXJmbG93IGFuZCBzZXQgbWFudGlzc2EgdG8gMCBhbmQgZXhwb25lbnQKICAgICAgICAgICAgICAgICAgICAgKiB0byAxLCB3aGljaCBpcyBPSy4gKi8KICAgICAgICAgICAgICAgICAgICBiaXRzIHw9IChtID4+ICgxMTQgLSBlKSkgKyAoKG0gPj4gKDExMyAtIGUpKSAmIDEpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBiaXRzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgYml0cyB8PSAoKGUgLSAxMTIpIDw8IDEwKSB8IChtID4+IDEpOwogICAgICAgICAgICAgICAgLyogRXh0cmEgcm91bmRpbmcuIEFuIG92ZXJmbG93IHdpbGwgc2V0IG1hbnRpc3NhIHRvIDAgYW5kIGluY3JlbWVudAogICAgICAgICAgICAgICAgICogdGhlIGV4cG9uZW50LCB3aGljaCBpcyBPSy4gKi8KICAgICAgICAgICAgICAgIGJpdHMgKz0gbSAmIDE7CiAgICAgICAgICAgICAgICByZXR1cm4gYml0czsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmbG9hdDMyQXJyYXkubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHVuaXQxNnNbaV0gPSB0b1VJbnQxNihpbnQzMlZpZXdbaV0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB1bml0MTZzOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIFJlcHJlc2VudHMgYSBib3ggaW4gMkQgc3BhY2UuIE5lZWRpbmcgdHdvIFZlYzIgdmVjdG9ycyBkZXNjcmliaW5nIHRoZSBjb3JuZXJzCiAgICAgKi8KICAgIGNsYXNzIEJveDIgewogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYSBCb3gyIG9iamVjdCB1c2luZyBWZWMycy4KICAgICAgICAgKiBJbiBjYXNlIHRoZSBwYXJhbWV0ZXJzIGFyZSBub3QgcGFzc2VkIGJ5LCB0aGVpciB2YWx1ZXMgYXJlIHByZS1kZWZpbmVkOgogICAgICAgICAqCiAgICAgICAgICogcDAgaXMgYSBWZWMyIHdpdGgge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL051bWJlci9QT1NJVElWRV9JTkZJTklUWXxgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZYH0KICAgICAgICAgKgogICAgICAgICAqIHAxIGlzIGEgVmVjMiB3aXRoIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9OdW1iZXIvTkVHQVRJVkVfSU5GSU5JVFl8YE51bWJlci5ORUdBVElWRV9JTkZJTklUWWB9CiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gcDAgLSBBIHBvaW50IHJlcHJlc2VudGluZyB0aGUgY29ybmVycyBvZiBhIDJEIGJveC4KICAgICAgICAgKiBAcGFyYW0gcDEgLSBBIHBvaW50IHJlcHJlc2VudGluZyB0aGUgY29ybmVycyBvZiBhIDJEIGJveC4KICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3RvcihwMCwgcDEpIHsKICAgICAgICAgICAgaWYgKHAwIGluc3RhbmNlb2YgVmVjMikgewogICAgICAgICAgICAgICAgdGhpcy5wMCA9IHAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5wMCA9IG5ldyBWZWMyKE51bWJlci5QT1NJVElWRV9JTkZJTklUWSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocDEgaW5zdGFuY2VvZiBWZWMyKSB7CiAgICAgICAgICAgICAgICB0aGlzLnAxID0gcDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLnAxID0gbmV3IFZlYzIoTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHMgYm90aCBWZWMyIHBvaW50cwogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHAwIC0gQSBwb2ludCByZXByZXNlbnRpbmcgdGhlIGNvcm5lcnMgb2YgYSAyRCBib3guCiAgICAgICAgICogQHBhcmFtIHAxIC0gQSBwb2ludCByZXByZXNlbnRpbmcgdGhlIGNvcm5lcnMgb2YgYSAyRCBib3guCiAgICAgICAgICovCiAgICAgICAgc2V0KHAwLCBwMSkgewogICAgICAgICAgICB0aGlzLnAwID0gcDA7CiAgICAgICAgICAgIHRoaXMucDEgPSBwMTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmVzZXRzIHRoZSBib3gyIGJhY2sgdG8gYW4gdW5pbml0aWFsaXplZCBzdGF0ZS4KICAgICAgICAgKgogICAgICAgICAqIEBzZWUge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL051bWJlci9QT1NJVElWRV9JTkZJTklUWXxgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZYH0KICAgICAgICAgKiBhbmQge0BsaW5rIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0phdmFTY3JpcHQvUmVmZXJlbmNlL0dsb2JhbF9PYmplY3RzL051bWJlci9ORUdBVElWRV9JTkZJTklUWXxgTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZYH0KICAgICAgICAgKi8KICAgICAgICByZXNldCgpIHsKICAgICAgICAgICAgdGhpcy5wMC54ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOwogICAgICAgICAgICB0aGlzLnAxLnggPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7CiAgICAgICAgICAgIHRoaXMucDAueSA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsKICAgICAgICAgICAgdGhpcy5wMS55ID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIGB0cnVlYCBpZiB0aGUgYm94IGhhcyBiZWVuIGV4cGFuZGVkIHRvIGNvbnRhaW4gYSBwb2ludC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGlzVmFsaWQoKSB7CiAgICAgICAgICAgIHJldHVybiAodGhpcy5wMC54ICE9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSAmJgogICAgICAgICAgICAgICAgdGhpcy5wMS54ICE9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSAmJgogICAgICAgICAgICAgICAgdGhpcy5wMC55ICE9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSAmJgogICAgICAgICAgICAgICAgdGhpcy5wMS55ICE9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEV4cGFuZHMgdGhlIEJveDIgdG8gY29udGFpbiB0aGUgbmV3IHBvaW50LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHBvaW50IC0gQSBwb2ludCByZXByZXNlbnRzIHRoZSBjb3JuZXJzIG9mIGEgMkQgYm94LgogICAgICAgICAqLwogICAgICAgIGFkZFBvaW50KHBvaW50KSB7CiAgICAgICAgICAgIGlmICh0aGlzLnAwLnggPT0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZIHx8IHBvaW50LnggPCB0aGlzLnAwLngpCiAgICAgICAgICAgICAgICB0aGlzLnAwLnggPSBwb2ludC54OwogICAgICAgICAgICBpZiAodGhpcy5wMC55ID09IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSB8fCBwb2ludC55IDwgdGhpcy5wMC55KQogICAgICAgICAgICAgICAgdGhpcy5wMC55ID0gcG9pbnQueTsKICAgICAgICAgICAgaWYgKHRoaXMucDEueSA9PSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgfHwgcG9pbnQueCA+IHRoaXMucDEueCkKICAgICAgICAgICAgICAgIHRoaXMucDEueCA9IHBvaW50Lng7CiAgICAgICAgICAgIGlmICh0aGlzLnAxLnkgPT0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZIHx8IHBvaW50LnkgPiB0aGlzLnAxLnkpCiAgICAgICAgICAgICAgICB0aGlzLnAxLnkgPSBwb2ludC55OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSBsZW5ndGggb2YgdGhlIGRpYWdvbmFsIG9mIHRoZSBib3guCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgZGlzdGFuY2UuCiAgICAgICAgICovCiAgICAgICAgc2l6ZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucDEuZGlzdGFuY2VUbyh0aGlzLnAwKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyB0aGUgc2l6ZSBvZiBhIEJveDIgLSB0aGUgc2FtZSBhcyBzaXplKCkuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIFZlYzIuCiAgICAgICAgICovCiAgICAgICAgZGlhZ29uYWwoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnAxLnN1YnRyYWN0KHRoaXMucDApOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSBjZW50ZXIgcG9pbnQgb2YgYSBCb3gyLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYSBWZWMyLgogICAgICAgICAqLwogICAgICAgIGNlbnRlcigpIHsKICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5wMS5zdWJ0cmFjdCh0aGlzLnAwKTsKICAgICAgICAgICAgcmVzdWx0LnNjYWxlSW5QbGFjZSgwLjUpOwogICAgICAgICAgICByZXN1bHQuYWRkSW5QbGFjZSh0aGlzLnAwKTsKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2xvbmVzIHRoaXMgVmVjMiBhbmQgcmV0dXJucyBhIG5ldyBWZWMyLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYSBuZXcgVmVjMi4KICAgICAgICAgKi8KICAgICAgICBjbG9uZSgpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBCb3gyKHRoaXMucDAuY2xvbmUoKSwgdGhpcy5wMS5jbG9uZSgpKTsKICAgICAgICB9CiAgICAgICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgIC8vIFBlcnNpc3RlbmNlCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyBgQm94MmAgQ2xhc3MgYXMgYSBKU09OIG9iamVjdCBmb3IgcGVyc2lzdGVuY2UuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIGpzb24gb2JqZWN0LgogICAgICAgICAqLwogICAgICAgIHRvSlNPTigpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHAwOiB0aGlzLnAwLnRvSlNPTigpLAogICAgICAgICAgICAgICAgcDE6IHRoaXMucDEudG9KU09OKCksCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENhbGxzIGB0b0pTT05gIG1ldGhvZCBhbmQgc3RyaW5naWZpZXMgaXQuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICB0b1N0cmluZygpIHsKICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5ldy1jYXAKICAgICAgICAgICAgcmV0dXJuIFN0cmluZ0Z1bmN0aW9ucy5zdHJpbmdpZnlKU09OV2l0aEZpeGVkUHJlY2lzaW9uKHRoaXMudG9KU09OKCkpOwogICAgICAgIH0KICAgIH0KCiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuZXctY2FwICovCiAgICAvKioKICAgICAqIENsYXNzIHJlcHJlc2VudGluZyBhIG1hdGhlbWF0aWNhbCBzcGhlcmUsIGFzIG9wcG9zZWQgdG8gdGhlIFNwaGVyZSBjbGFzcyBkZXJpdmVkIGZyb20gUHJvY2VkdXJhbE1lc2guCiAgICAgKgogICAgICovCiAgICBjbGFzcyBTcGhlcmVUeXBlIHsKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGUgYSBzcGhlcmUuCiAgICAgICAgICogQHBhcmFtIHBvcyAtIFRoZSBwb3NpdGlvbiBvZiB0aGUgc3BoZXJlLgogICAgICAgICAqIEBwYXJhbSByYWRpdXMgLSBUaGUgcmFkaXVzIG9mIHRoZSBzcGhlcmUuCiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IocG9zID0gbmV3IFZlYzMoKSwgcmFkaXVzID0gMCkgewogICAgICAgICAgICBpZiAocG9zIGluc3RhbmNlb2YgVmVjMykgewogICAgICAgICAgICAgICAgdGhpcy5wb3MgPSBwb3M7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLnBvcyA9IG5ldyBWZWMzKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5yYWRpdXMgPSByYWRpdXM7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENsb25lcyB0aGlzIHNwaGVyZSBhbmQgcmV0dXJucyBhIG5ldyBzcGhlcmUuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIG5ldyBzcGhlcmUuCiAgICAgICAgICovCiAgICAgICAgY2xvbmUoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgU3BoZXJlVHlwZSh0aGlzLnBvcy5jbG9uZSgpLCB0aGlzLnJhZGl1cyk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENoZWNrcyBpZiB0aGlzIHNwaGVyZSBpbnRlcnNlY3RzIGEgYm94LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGJveCAtIFRoZSBib3ggdmFsdWUuCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgaW50ZXJzZWN0c0JveChib3gpIHsKICAgICAgICAgICAgcmV0dXJuIGJveC5pbnRlcnNlY3RzU3BoZXJlKHRoaXMpOwogICAgICAgIH0KICAgICAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgICAvLyBQZXJzaXN0ZW5jZQogICAgICAgIC8qKgogICAgICAgICAqIFRoZSB0b0pTT04gbWV0aG9kIGVuY29kZXMgdGhpcyB0eXBlIGFzIGEganNvbiBvYmplY3QgZm9yIHBlcnNpc3RlbmNlLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFRoZSBqc29uIG9iamVjdC4KICAgICAgICAgKi8KICAgICAgICB0b0pTT04oKSB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBwb3M6IHRoaXMucG9zLnRvSlNPTigpLAogICAgICAgICAgICAgICAgcmFkaXVzOiB0aGlzLnJhZGl1cywKICAgICAgICAgICAgfTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2FsbHMgYHRvSlNPTmAgbWV0aG9kIGFuZCBzdHJpbmdpZmllcyBpdC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHRvU3RyaW5nKCkgewogICAgICAgICAgICByZXR1cm4gU3RyaW5nRnVuY3Rpb25zLnN0cmluZ2lmeUpTT05XaXRoRml4ZWRQcmVjaXNpb24odGhpcy50b0pTT04oKSk7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgYm94IGluIDNEIHNwYWNlLgogICAgICogUmVwcmVzZW50cyBhIGJveCBpbiAzRCBzcGFjZSBkZWZpbmVkIGJ5IHR3byBWZWMzIHZhbHVlcyB3aGljaCBkZWZpbmUgb3Bwb3NpbmcgY29ybmVycyBvZiB0aGUgYm94LgogICAgICovCiAgICBjbGFzcyBCb3gzIHsKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgQm94MyBvYmplY3QgdXNpbmcgVmVjM3MuCiAgICAgICAgICogSW4gY2FzZSB0aGUgcGFyYW1ldGVycyBhcmUgbm90IHBhc3NlZCBieSwgdGhlaXIgdmFsdWVzIGFyZSBwcmUtZGVmaW5lZDoKICAgICAgICAgKgogICAgICAgICAqIHAwIGlzIGEgVmVjMiB3aXRoIHtAbGluayBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9OdW1iZXIvUE9TSVRJVkVfSU5GSU5JVFl8YE51bWJlci5QT1NJVElWRV9JTkZJTklUWWB9CiAgICAgICAgICoKICAgICAgICAgKiBwMSBpcyBhIFZlYzIgd2l0aCB7QGxpbmsgaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSmF2YVNjcmlwdC9SZWZlcmVuY2UvR2xvYmFsX09iamVjdHMvTnVtYmVyL05FR0FUSVZFX0lORklOSVRZfGBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFlgfQogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHAwIC0gQSBwb2ludCByZXByZXNlbnRpbmcgdGhlIGNvcm5lcnMgb2YgYSAzRCBib3guCiAgICAgICAgICogQHBhcmFtIHAxIC0gQSBwb2ludCByZXByZXNlbnRpbmcgdGhlIGNvcm5lcnMgb2YgYSAzRCBib3guCiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IocDAsIHAxKSB7CiAgICAgICAgICAgIGlmIChwMCBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSkgewogICAgICAgICAgICAgICAgdGhpcy5wMCA9IG5ldyBWZWMzKG5ldyBGbG9hdDMyQXJyYXkocDAuYnVmZmVyLCBwMC5ieXRlT2Zmc2V0LCAzKSk7CiAgICAgICAgICAgICAgICB0aGlzLnAxID0gbmV3IFZlYzMobmV3IEZsb2F0MzJBcnJheShwMC5idWZmZXIsIHAwLmJ5dGVPZmZzZXQgKyAxMiwgMykpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgaWYgKHAwIGluc3RhbmNlb2YgVmVjMykgewogICAgICAgICAgICAgICAgICAgIHRoaXMucDAgPSBwMDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMucDAgPSBuZXcgVmVjMyhOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksIE51bWJlci5QT1NJVElWRV9JTkZJTklUWSwgTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChwMSBpbnN0YW5jZW9mIFZlYzMpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnAxID0gcDE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLnAxID0gbmV3IFZlYzMoTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLCBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksIE51bWJlci5ORUdBVElWRV9JTkZJTklUWSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVyIGZvciB0aGUgbG93ZXIgKHgsIHksIHopIGJvdW5kYXJ5IG9mIHRoZSBib3guCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUgbWluaW11bSBWZWMzLgogICAgICAgICAqLwogICAgICAgIGdldCBtaW4oKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnAwOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXR0ZXIgZm9yIHRoZSB1cHBlciAoeCwgeSwgeikgYm91bmRhcnkgb2YgdGhlIGJveC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBtYXhpbXVtIFZlYzMuCiAgICAgICAgICovCiAgICAgICAgZ2V0IG1heCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucDE7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHMgYm90aCBWZWMzIHBvaW50cwogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHAwIC0gQSBwb2ludCByZXByZXNlbnRpbmcgdGhlIGNvcm5lcnMgb2YgYSAzRCBib3guCiAgICAgICAgICogQHBhcmFtIHAxIC0gQSBwb2ludCByZXByZXNlbnRpbmcgdGhlIGNvcm5lcnMgb2YgYSAzRCBib3guCiAgICAgICAgICovCiAgICAgICAgc2V0KHAwLCBwMSkgewogICAgICAgICAgICB0aGlzLnAwID0gcDA7CiAgICAgICAgICAgIHRoaXMucDEgPSBwMTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmVzZXRzIHRoZSBib3gzIGJhY2sgdG8gYW4gdW5pbml0aWFsaXplZCBzdGF0ZS4KICAgICAgICAgKi8KICAgICAgICByZXNldCgpIHsKICAgICAgICAgICAgdGhpcy5wMC54ID0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOwogICAgICAgICAgICB0aGlzLnAwLnkgPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFk7CiAgICAgICAgICAgIHRoaXMucDAueiA9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWTsKICAgICAgICAgICAgdGhpcy5wMS54ID0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZOwogICAgICAgICAgICB0aGlzLnAxLnkgPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7CiAgICAgICAgICAgIHRoaXMucDEueiA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyBgdHJ1ZWAgaWYgdGhlIGJveCBoYXMgYmVlbiBleHBhbmRlZCB0byBjb250YWluIGEgcG9pbnQuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBpc1ZhbGlkKCkgewogICAgICAgICAgICByZXR1cm4gKHRoaXMucDAueCAhPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgJiYKICAgICAgICAgICAgICAgIHRoaXMucDEueCAhPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgJiYKICAgICAgICAgICAgICAgIHRoaXMucDAueSAhPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgJiYKICAgICAgICAgICAgICAgIHRoaXMucDEueSAhPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkgJiYKICAgICAgICAgICAgICAgIHRoaXMucDAueiAhPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgJiYKICAgICAgICAgICAgICAgIHRoaXMucDEueiAhPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBFeHBhbmRzIHRoZSBCb3gzIHRvIGNvbnRhaW4gdGhlIG5ldyBwb2ludC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBwb2ludCAtIEEgcG9pbnQgcmVwcmVzZW50cyB0aGUgY29ybmVycyBvZiBhIDNEIGJveC4KICAgICAgICAgKi8KICAgICAgICBhZGRQb2ludChwb2ludCkgewogICAgICAgICAgICBpZiAocG9pbnQueCAhPSBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgJiYgcG9pbnQueCAhPSBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFkpIHsKICAgICAgICAgICAgICAgIGlmIChwb2ludC54IDwgdGhpcy5wMC54KQogICAgICAgICAgICAgICAgICAgIHRoaXMucDAueCA9IHBvaW50Lng7CiAgICAgICAgICAgICAgICBpZiAocG9pbnQueCA+IHRoaXMucDEueCkKICAgICAgICAgICAgICAgICAgICB0aGlzLnAxLnggPSBwb2ludC54OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChwb2ludC55ICE9IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSAmJiBwb2ludC55ICE9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSkgewogICAgICAgICAgICAgICAgaWYgKHBvaW50LnkgPCB0aGlzLnAwLnkpCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wMC55ID0gcG9pbnQueTsKICAgICAgICAgICAgICAgIGlmIChwb2ludC55ID4gdGhpcy5wMS55KQogICAgICAgICAgICAgICAgICAgIHRoaXMucDEueSA9IHBvaW50Lnk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHBvaW50LnogIT0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZICYmIHBvaW50LnogIT0gTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZKSB7CiAgICAgICAgICAgICAgICBpZiAocG9pbnQueiA8IHRoaXMucDAueikKICAgICAgICAgICAgICAgICAgICB0aGlzLnAwLnogPSBwb2ludC56OwogICAgICAgICAgICAgICAgaWYgKHBvaW50LnogPiB0aGlzLnAxLnopCiAgICAgICAgICAgICAgICAgICAgdGhpcy5wMS56ID0gcG9pbnQuejsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBBZGRzIGBCb3gzYCB0byB0aGlzIGBCb3gzYCwgb2YgdGhlIFhmbyBpbnN0YW5jZSBpcyBwYXNzZWQgaW4gdGhlIHBhcmFtZXRlcnMKICAgICAgICAgKiBpdCBwcm9jZWVkcyB0byBhcHBseSB0aGUgdHJhbnNmb3JtIGZvciB0aGUgVmVjMy4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBib3gzIC0gQSAzRCBib3guCiAgICAgICAgICogQHBhcmFtIHhmbyAtIEEgM0QgdHJhbnNmb3JtLgogICAgICAgICAqLwogICAgICAgIGFkZEJveDMoYm94MywgdHJhbnNmb3JtKSB7CiAgICAgICAgICAgIGlmICh0cmFuc2Zvcm0pIHsKICAgICAgICAgICAgICAgIC8vIFRyYW5zZm9ybSBlYWNoIGNvcm5lciBvZiB0aGUgQm94MyBpbnRvIHRoZSBuZXcgY29vcmRpbmF0ZSBzeXN0ZW0uCiAgICAgICAgICAgICAgICB0aGlzLmFkZFBvaW50KHRyYW5zZm9ybS50cmFuc2Zvcm1WZWMzKGJveDMucDApKTsKICAgICAgICAgICAgICAgIHRoaXMuYWRkUG9pbnQodHJhbnNmb3JtLnRyYW5zZm9ybVZlYzMobmV3IFZlYzMoYm94My5wMC54LCBib3gzLnAwLnksIGJveDMucDEueikpKTsKICAgICAgICAgICAgICAgIHRoaXMuYWRkUG9pbnQodHJhbnNmb3JtLnRyYW5zZm9ybVZlYzMobmV3IFZlYzMoYm94My5wMC54LCBib3gzLnAxLnksIGJveDMucDAueikpKTsKICAgICAgICAgICAgICAgIHRoaXMuYWRkUG9pbnQodHJhbnNmb3JtLnRyYW5zZm9ybVZlYzMobmV3IFZlYzMoYm94My5wMS54LCBib3gzLnAwLnksIGJveDMucDAueikpKTsKICAgICAgICAgICAgICAgIHRoaXMuYWRkUG9pbnQodHJhbnNmb3JtLnRyYW5zZm9ybVZlYzMobmV3IFZlYzMoYm94My5wMC54LCBib3gzLnAxLnksIGJveDMucDEueikpKTsKICAgICAgICAgICAgICAgIHRoaXMuYWRkUG9pbnQodHJhbnNmb3JtLnRyYW5zZm9ybVZlYzMobmV3IFZlYzMoYm94My5wMS54LCBib3gzLnAwLnksIGJveDMucDEueikpKTsKICAgICAgICAgICAgICAgIHRoaXMuYWRkUG9pbnQodHJhbnNmb3JtLnRyYW5zZm9ybVZlYzMobmV3IFZlYzMoYm94My5wMS54LCBib3gzLnAxLnksIGJveDMucDAueikpKTsKICAgICAgICAgICAgICAgIHRoaXMuYWRkUG9pbnQodHJhbnNmb3JtLnRyYW5zZm9ybVZlYzMoYm94My5wMSkpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5hZGRQb2ludChib3gzLnAwKTsKICAgICAgICAgICAgICAgIHRoaXMuYWRkUG9pbnQoYm94My5wMSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyB0aGUgbGVuZ3RoIG9mIHRoZSBkaWFnb25hbCBvZiB0aGUgYm94LgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIGRpc3RhbmNlLgogICAgICAgICAqLwogICAgICAgIHNpemUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnAxLmRpc3RhbmNlVG8odGhpcy5wMCk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgdGhlIGRpYWdvbmFsIHZlY3RvciBvZiB0aGUgQj1ib3ggZnJvbSBwMCB0byBwMS4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGEgQm94My4KICAgICAgICAgKi8KICAgICAgICBkaWFnb25hbCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucDEuc3VidHJhY3QodGhpcy5wMCk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgdGhlIGNlbnRlciBwb2ludCBvZiBhIEJveDMuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIFZlYzMuCiAgICAgICAgICovCiAgICAgICAgY2VudGVyKCkgewogICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLnAxLnN1YnRyYWN0KHRoaXMucDApOwogICAgICAgICAgICByZXN1bHQuc2NhbGVJblBsYWNlKDAuNSk7CiAgICAgICAgICAgIHJlc3VsdC5hZGRJblBsYWNlKHRoaXMucDApOwogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDb252ZXJ0cyB0aGlzIEJveDMgdG8gYSBNYXQ0IChhIDR4NCBtYXRyaXgpLiBUaGUgcmV0dXJuZWQgbWF0NCB3b3VsZCB0cmFuc2Zvcm0gYSB1bml0IGN1YmUgaW50byB0aGUgc2hhcGUgb2YgdGhlIEJvdW5kaW5nIGJveC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGEgbmV3IE1hdDQuCiAgICAgICAgICovCiAgICAgICAgdG9NYXQ0KCkgewogICAgICAgICAgICBjb25zdCBzY3ggPSB0aGlzLnAxLnggLSB0aGlzLnAwLng7CiAgICAgICAgICAgIGNvbnN0IHNjeSA9IHRoaXMucDEueSAtIHRoaXMucDAueTsKICAgICAgICAgICAgY29uc3Qgc2N6ID0gdGhpcy5wMS56IC0gdGhpcy5wMC56OwogICAgICAgICAgICByZXR1cm4gbmV3IE1hdDQoc2N4LCAwLCAwLCAwLCAwLCBzY3ksIDAsIDAsIDAsIDAsIHNjeiwgMCwgdGhpcy5wMC54LCB0aGlzLnAwLnksIHRoaXMucDAueiwgMS4wKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2FsY3VsYXRlcyBhbmQgcmV0dXJucyB0aGUgYm91bmRpbmcgU3BoZXJlIG9mIHRoZSBCb3gzCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBnZXRCb3VuZGluZ1NwaGVyZSgpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBTcGhlcmVUeXBlKHRoaXMuY2VudGVyKCksIHRoaXMuZGlhZ29uYWwoKS5sZW5ndGgoKSAqIDAuNSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIERldGVybWluZXMgaWYgdGhpcyBCb3gzIGludGVyc2VjdHMgYSBnaXZlbiBib3ggdmFsdWUuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gYm94IC0gVGhlIGJveCB0byBjaGVjayBmb3IgaW50ZXJzZWN0aW9uIGFnYWluc3QuCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdHJ1ZSBpZiB0aGUgc2hhcGVzIGludGVyc2VjdC4KICAgICAgICAgKi8KICAgICAgICBpbnRlcnNlY3RzQm94KGJveCkgewogICAgICAgICAgICAvLyBVc2luZyA2IHNwbGl0dGluZyBwbGFuZXMgdG8gcnVsZSBvdXQgaW50ZXJzZWN0aW9ucy4KICAgICAgICAgICAgcmV0dXJuIGJveC5tYXgueCA8IHRoaXMubWluLnggfHwKICAgICAgICAgICAgICAgIGJveC5taW4ueCA+IHRoaXMubWF4LnggfHwKICAgICAgICAgICAgICAgIGJveC5tYXgueSA8IHRoaXMubWluLnkgfHwKICAgICAgICAgICAgICAgIGJveC5taW4ueSA+IHRoaXMubWF4LnkgfHwKICAgICAgICAgICAgICAgIGJveC5tYXgueiA8IHRoaXMubWluLnogfHwKICAgICAgICAgICAgICAgIGJveC5taW4ueiA+IHRoaXMubWF4LnoKICAgICAgICAgICAgICAgID8gZmFsc2UKICAgICAgICAgICAgICAgIDogdHJ1ZTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogRGV0ZXJtaW5lcyBpZiB0aGlzIEJveDMgaW50ZXJzZWN0cyBhIHNwaGVyZS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBzcGhlcmUgLSBUaGUgc3BoZXJlIHRvIGNoZWNrIGZvciBpbnRlcnNlY3Rpb24gYWdhaW5zdC4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0cnVlIGlmIHRoZSBzaGFwZXMgaW50ZXJzZWN0LgogICAgICAgICAqLwogICAgICAgIGludGVyc2VjdHNTcGhlcmUoc3BoZXJlKSB7CiAgICAgICAgICAgIGxldCBjbG9zZXN0UG9pbnQgPSBuZXcgVmVjMygpOwogICAgICAgICAgICAvLyBGaW5kIHRoZSBwb2ludCBvbiB0aGUgQUFCQiBjbG9zZXN0IHRvIHRoZSBzcGhlcmUgY2VudGVyLgogICAgICAgICAgICAvLyB0aGlzLmNsYW1wUG9pbnQoIHNwaGVyZS5jZW50ZXIsIGNsb3Nlc3RQb2ludCApOwogICAgICAgICAgICAvLyBJZiB0aGF0IHBvaW50IGlzIGluc2lkZSB0aGUgc3BoZXJlLCB0aGUgQUFCQiBhbmQgc3BoZXJlIGludGVyc2VjdC4KICAgICAgICAgICAgcmV0dXJuIGNsb3Nlc3RQb2ludC5kaXN0YW5jZVRvKHNwaGVyZS5wb3MpIDw9IHNwaGVyZS5yYWRpdXMgKiBzcGhlcmUucmFkaXVzOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBEZXRlcm1pbmVzIGlmIHRoaXMgQm94MyBpbnRlcnNlY3RzIGEgcGxhbmUuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gcGxhbmUgLSBUaGUgcGxhbmUgdG8gY2hlY2sgZm9yIGludGVyc2VjdGlvbiBhZ2FpbnN0LgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGludGVyc2VjdHNQbGFuZShwbGFuZSkgewogICAgICAgICAgICAvLyBXZSBjb21wdXRlIHRoZSBtaW5pbXVtIGFuZCBtYXhpbXVtIGRvdCBwcm9kdWN0IHZhbHVlcy4gSWYgdGhvc2UgdmFsdWVzCiAgICAgICAgICAgIC8vIGFyZSBvbiB0aGUgc2FtZSBzaWRlIChiYWNrIG9yIGZyb250KSBvZiB0aGUgcGxhbmUsIHRoZW4gdGhlcmUgaXMgbm8gaW50ZXJzZWN0aW9uLgogICAgICAgICAgICBsZXQgbWluOwogICAgICAgICAgICBsZXQgbWF4OwogICAgICAgICAgICBpZiAocGxhbmUubm9ybWFsLnggPiAwKSB7CiAgICAgICAgICAgICAgICBtaW4gPSBwbGFuZS5ub3JtYWwueCAqIHRoaXMubWluLng7CiAgICAgICAgICAgICAgICBtYXggPSBwbGFuZS5ub3JtYWwueCAqIHRoaXMubWF4Lng7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBtaW4gPSBwbGFuZS5ub3JtYWwueCAqIHRoaXMubWF4Lng7CiAgICAgICAgICAgICAgICBtYXggPSBwbGFuZS5ub3JtYWwueCAqIHRoaXMubWluLng7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHBsYW5lLm5vcm1hbC55ID4gMCkgewogICAgICAgICAgICAgICAgbWluICs9IHBsYW5lLm5vcm1hbC55ICogdGhpcy5taW4ueTsKICAgICAgICAgICAgICAgIG1heCArPSBwbGFuZS5ub3JtYWwueSAqIHRoaXMubWF4Lnk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBtaW4gKz0gcGxhbmUubm9ybWFsLnkgKiB0aGlzLm1heC55OwogICAgICAgICAgICAgICAgbWF4ICs9IHBsYW5lLm5vcm1hbC55ICogdGhpcy5taW4ueTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAocGxhbmUubm9ybWFsLnogPiAwKSB7CiAgICAgICAgICAgICAgICBtaW4gKz0gcGxhbmUubm9ybWFsLnogKiB0aGlzLm1pbi56OwogICAgICAgICAgICAgICAgbWF4ICs9IHBsYW5lLm5vcm1hbC56ICogdGhpcy5tYXguejsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIG1pbiArPSBwbGFuZS5ub3JtYWwueiAqIHRoaXMubWF4Lno7CiAgICAgICAgICAgICAgICBtYXggKz0gcGxhbmUubm9ybWFsLnogKiB0aGlzLm1pbi56OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBtaW4gPD0gLXBsYW5lLncgJiYgbWF4ID49IC1wbGFuZS53OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDbG9uZXMgdGhpcyBCb3gzIGFuZCByZXR1cm5zIGEgbmV3IEJveDMuCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYSBuZXcgQm94My4KICAgICAgICAgKi8KICAgICAgICBjbG9uZSgpIHsKICAgICAgICAgICAgcmV0dXJuIG5ldyBCb3gzKHRoaXMucDAuY2xvbmUoKSwgdGhpcy5wMS5jbG9uZSgpKTsKICAgICAgICB9CiAgICAgICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgIC8vIFBlcnNpc3RlbmNlCiAgICAgICAgLyoqCiAgICAgICAgICogRW5jb2RlcyBgQm94M2AgQ2xhc3MgYXMgYSBKU09OIG9iamVjdCBmb3IgcGVyc2lzdGVuY2UuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIGpzb24gb2JqZWN0LgogICAgICAgICAqLwogICAgICAgIHRvSlNPTigpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIHAwOiB0aGlzLnAwLnRvSlNPTigpLAogICAgICAgICAgICAgICAgcDE6IHRoaXMucDEudG9KU09OKCksCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIERlY29kZXMgYSBKU09OIG9iamVjdCB0byBzZXQgdGhlIHN0YXRlIG9mIHRoaXMgY2xhc3MuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gaiAtIFRoZSBqc29uIG9iamVjdC4KICAgICAgICAgKi8KICAgICAgICBmcm9tSlNPTihqKSB7CiAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gdmVyaWZ5IHRoYXQgcDAgYW5kIHAxIGF4ZXMgYXJlIG51bWVyaWMsIHNvIGluIGNhc2UgdGhleSBhcmUgbm90LCB3ZSByZXN0b3JlIHRoZW0gdG8gdGhlaXIgZGVmYXVsdCB2YWx1ZXMuCiAgICAgICAgICAgIC8vIFRoaXMsIGJlY2F1c2UgJ0luZmluaXR5JyBhbmQgJy1JbmZpbml0eScgYXJlIHN0cmluZ2lmaWVkIGFzICdudWxsJy4KICAgICAgICAgICAgY29uc3QgcDAgPSB7CiAgICAgICAgICAgICAgICB4OiBNYXRoRnVuY3Rpb25zLmlzTnVtZXJpYyhqLnAwLngpID8gai5wMC54IDogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLAogICAgICAgICAgICAgICAgeTogTWF0aEZ1bmN0aW9ucy5pc051bWVyaWMoai5wMC55KSA/IGoucDAueSA6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSwKICAgICAgICAgICAgICAgIHo6IE1hdGhGdW5jdGlvbnMuaXNOdW1lcmljKGoucDAueikgPyBqLnAwLnogOiBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbnN0IHAxID0gewogICAgICAgICAgICAgICAgeDogTWF0aEZ1bmN0aW9ucy5pc051bWVyaWMoai5wMS54KSA/IGoucDEueCA6IE51bWJlci5ORUdBVElWRV9JTkZJTklUWSwKICAgICAgICAgICAgICAgIHk6IE1hdGhGdW5jdGlvbnMuaXNOdW1lcmljKGoucDEueSkgPyBqLnAxLnkgOiBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFksCiAgICAgICAgICAgICAgICB6OiBNYXRoRnVuY3Rpb25zLmlzTnVtZXJpYyhqLnAxLnopID8gai5wMS56IDogTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZLAogICAgICAgICAgICB9OwogICAgICAgICAgICB0aGlzLnAwLmZyb21KU09OKHAwKTsKICAgICAgICAgICAgdGhpcy5wMS5mcm9tSlNPTihwMSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFRoZSBzZXRGcm9tRmxvYXQzMkFycmF5IG1ldGhvZC4KICAgICAgICAgKiBAcGFyYW0gZmxvYXQzMmFycmF5IC0gVGhlIGZsb2F0MzJhcnJheSB2YWx1ZS4KICAgICAgICAgKiBAcHJpdmF0ZQogICAgICAgICAqLwogICAgICAgIHNldEZyb21GbG9hdDMyQXJyYXkoZmxvYXQzMmFycmF5KSB7CiAgICAgICAgICAgIHRoaXMucDAgPSBuZXcgVmVjMyhmbG9hdDMyYXJyYXkuYnVmZmVyLCBmbG9hdDMyYXJyYXkuYnl0ZU9mZnNldCk7CiAgICAgICAgICAgIHRoaXMucDEgPSBuZXcgVmVjMyhmbG9hdDMyYXJyYXkuYnVmZmVyLCBmbG9hdDMyYXJyYXkuYnl0ZU9mZnNldCArIDEyKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2FsbHMgYHRvSlNPTmAgbWV0aG9kIGFuZCBzdHJpbmdpZmllcyBpdC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHRvU3RyaW5nKCkgewogICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbmV3LWNhcAogICAgICAgICAgICByZXR1cm4gU3RyaW5nRnVuY3Rpb25zLnN0cmluZ2lmeUpTT05XaXRoRml4ZWRQcmVjaXNpb24odGhpcy50b0pTT04oKSk7CiAgICAgICAgfQogICAgfQoKICAgIGxldCByZWdpc3RlcmVkQ2xhc3NlcyA9IHt9OwogICAgbGV0IGNsYXNzTmFtZXMgPSB7fTsKICAgIGxldCBjbGFzc0RlZmluaXRpb25zID0gW107CiAgICAvKioKICAgICAqIFJlZ2lzdHJ5IGlzIGEgc3RhdGljIGZhY3RvcnkgdGhhdCBoYW5kbGVzIHJlZ2lzdHJhdGlvbi9yZWNvbnN0cnVjdGlvbiBvZgogICAgICogY2xhc3NlcyBiYXNlcyBvbiBCYXNlQ2xhc3MuIFJlZ2lzdGVyZWQgY2xhc3NlcyBjYW4gdGhlbiBiZSBjb25zdHJ1Y3RlZCBieSB0aGUgUmVnaXN0cnkgYnkgbmFtZS4KICAgICAqCiAgICAgKiBOb3RlOiBjbGFzc05hbWUgaXMgcmVxdWlyZWQgYmVjYXVzZSBvbiBtaW5pZmljYXRpb24gcHJvY2VzcwogICAgICogdGhlIG5hbWUgb2YgY2xhc3NlcyBjaGFuZ2UgYW5kIHdlIGNhbid0IHNpbXBseSB1c2UgJy4uLi5jb25zdHJ1Y3Rvci5uYW1lJy4KICAgICAqIFNvLCB3ZSBuZWVkIGEgd2F5IG9mIHJlbGF0aW5nIG1pbmlmaWVkIGNsYXNzIG5hbWVzIHRvIHRoZSBvbmUgc3RvcmVkIGZvciBwZXJzaXN0ZW5jeS4KICAgICAqCiAgICAgKiBpLmUuCiAgICAgKiBgYGBqYXZhc2NyaXB0CiAgICAgKiAvLyBJbXBvcnQgcmVnaXN0cnkgY2xhc3MKICAgICAqIGNsYXNzIEZvbygpIGV4dGVuZHMgQmFzZUNsYXNzIHt9CiAgICAgKgogICAgICogUmVnaXN0cnkucmVnaXN0ZXIoJ0ZvbycsIEZvbykKICAgICAqIC8vIEluIGNhc2UgJ0ZvbycgY2xhc3MgZ2V0cyBpdHMgbmFtZSBjaGFuZ2VkIHRvICdjJyBvbiBtaW5pZmljYXRpb24sCiAgICAgKiAvLyBhbmQgdGhlIHBlcnNpc3RlZCBkYXRhIHR5cGUgaXMgJ0ZvbycsIHdlIHdvdWxkIGtub3cgaG93IHRvIHJlbGF0ZSB0aGVtLgogICAgICogYGBgCiAgICAgKgogICAgICogQHN0YXRpYwogICAgICogQGNsYXNzIFJlZ2lzdHJ5CiAgICAgKi8KICAgIGNsYXNzIFJlZ2lzdHJ5IHsKICAgICAgICAvKioKICAgICAgICAgKiBSZWdpc3RlcnMgYSBuZXcgY2xhc3MgdG8gdGhlIGZhY3RvcnkuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gY2xhc3NOYW1lIC0gTmFtZSBvZiB0aGUgcmVnaXN0ZXJlZCBjbGFzcwogICAgICAgICAqIEBwYXJhbSBjbGFzc0RlZiAtIENsYXNzIHJlcHJlc2VudGF0aW9uKENsYXNzIGZ1bmN0aW9uLCB0eXBlKQogICAgICAgICAqLwogICAgICAgIHN0YXRpYyByZWdpc3RlcihjbGFzc05hbWUsIGNsYXNzRGVmKSB7CiAgICAgICAgICAgIGlmIChjbGFzc05hbWUgaW4gcmVnaXN0ZXJlZENsYXNzZXMpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybihgVGhlcmUncyBhIGNsYXNzIHJlZ2lzdGVyZWQgd2l0aCAnJHtjbGFzc05hbWV9JyBuYW1lLiBTZWNvbmQgcmVnaXN0cmF0aW9uIGZhaWxlZC5gKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBOb3RlOiBUbyBwcm92aWRlIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LCBzYW1lIGNsYXNzRGVmIGNhbiBiZSBzdG9yZWQgdW5kZXIgbXVsdGlwbGUgbmFtZXMuCiAgICAgICAgICAgIC8vIFRoYXRzIHRoZSByZWFzb24gYmVoaW5kIHVzaW5nIGluZGV4ZXMgaW5zdGVhZCBvZiB0aGUgY2xhc3NEZWYuCiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gY2xhc3NEZWZpbml0aW9ucy5sZW5ndGg7CiAgICAgICAgICAgIGNsYXNzRGVmaW5pdGlvbnMucHVzaChjbGFzc0RlZik7CiAgICAgICAgICAgIGNsYXNzTmFtZXNbaW5kZXhdID0gY2xhc3NOYW1lOwogICAgICAgICAgICByZWdpc3RlcmVkQ2xhc3Nlc1tjbGFzc05hbWVdID0gaW5kZXg7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgY2xhc3MgZGVmaW5pdGlvbiB1c2luZyB0aGUgbmFtZSBpdCB3YXMgcmVnaXN0ZXJlZCB3aXRoLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGNsYXNzTmFtZSAtIE5hbWUgb2YgdGhlIHJlZ2lzdGVyZWQgY2xhc3MKICAgICAgICAgKiBAcmV0dXJuIC0gQ2xhc3MgcmVwcmVzZW50YXRpb24oQ2xhc3MgZnVuY3Rpb24sIHR5cGUpCiAgICAgICAgICovCiAgICAgICAgc3RhdGljIGdldENsYXNzRGVmaW5pdGlvbihjbGFzc05hbWUpIHsKICAgICAgICAgICAgaWYgKCEoY2xhc3NOYW1lIGluIHJlZ2lzdGVyZWRDbGFzc2VzKSkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgJHtjbGFzc05hbWV9IGNsYXNzIGlzIG5vdCByZWdpc3RlcmVkYCk7CiAgICAgICAgICAgIHJldHVybiBjbGFzc0RlZmluaXRpb25zW3JlZ2lzdGVyZWRDbGFzc2VzW2NsYXNzTmFtZV1dOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIGNsYXNzIG5hbWUgcmVnaXN0ZXJlZCBmb3IgdGhlIGluc3RhbnRpYXRlZCBvYmplY3QuCiAgICAgICAgICogQHBhcmFtIGNsYXNzRGVmaW5pdGlvbiAtIENsYXNzIHR5cGUgZGVmaW5pdGlvbi4KICAgICAgICAgKiBAcmV0dXJuIC0gTmFtZSBvZiB0aGUgcmVnaXN0ZXJlZCBjbGFzcwogICAgICAgICAqLwogICAgICAgIHN0YXRpYyBnZXRDbGFzc05hbWUoY2xhc3NEZWZpbml0aW9uKSB7CiAgICAgICAgICAgIGNvbnN0IGNsYXNzSWQgPSBjbGFzc0RlZmluaXRpb25zLmluZGV4T2YoY2xhc3NEZWZpbml0aW9uKTsKICAgICAgICAgICAgaWYgKGNsYXNzSWQgPj0gMCAmJiBjbGFzc05hbWVzW2NsYXNzSWRdKQogICAgICAgICAgICAgICAgcmV0dXJuIGNsYXNzTmFtZXNbY2xhc3NJZF07CiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgY2xhc3MgaXMgbm90IHJlZ2lzdGVyZWRgKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIGZhY3RvcnkgZnVuY3Rpb24gdGhhdCBjb25zdHJ1Y3QgdGhlIGNsYXNzIHJlZ2lzdGVyZWQgdW5kZXIgdGhlIGdpdmVuIG5hbWUuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gY2xhc3NOYW1lIC0gTmFtZSBvZiB0aGUgcmVnaXN0ZXJlZCBjbGFzcwogICAgICAgICAqIEByZXR1cm4gLSBJbnN0YW50aWF0ZWQgb2JqZWN0IG9mIHRoZSBzcGVjaWZpZWQgY2xhc3MKICAgICAgICAgKi8KICAgICAgICBzdGF0aWMgY29uc3RydWN0Q2xhc3MoY2xhc3NOYW1lKSB7CiAgICAgICAgICAgIGNvbnN0IGNsYXNzRGVmaW5pdGlvbiA9IGNsYXNzRGVmaW5pdGlvbnNbcmVnaXN0ZXJlZENsYXNzZXNbY2xhc3NOYW1lXV07CiAgICAgICAgICAgIGlmICghY2xhc3NEZWZpbml0aW9uKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGAke2NsYXNzTmFtZX0gY2xhc3MgaXMgbm90IHJlZ2lzdGVyZWRgKTsKICAgICAgICAgICAgcmV0dXJuIG5ldyBjbGFzc0RlZmluaXRpb24oKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogRm9yIHRlc3RpbmcgcHVycG9zZSBvbmx5LCBuZXZlciBjYWxsIHRoaXMgb3V0c2lkZSBvZiB0aGUgdGVzdCBzY29wZS4KICAgICAgICAgKgogICAgICAgICAqIEBwcml2YXRlCiAgICAgICAgICovCiAgICAgICAgc3RhdGljIGZsdXNoKCkgewogICAgICAgICAgICByZWdpc3RlcmVkQ2xhc3NlcyA9IHt9OwogICAgICAgICAgICBjbGFzc05hbWVzID0ge307CiAgICAgICAgICAgIGNsYXNzRGVmaW5pdGlvbnMgPSBbXTsKICAgICAgICB9CiAgICB9CgogICAgLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqLwogICAgbGV0IGNvdW50ZXIgPSAwOwogICAgLyoqCiAgICAgKiBDbGFzcyByZXByZXNlbnRpbmcgYSBCYXNlQ2xhc3MuCiAgICAgKiBUaGUgQmFzZUNsYXNzIGlzIHRoZSBmb3VuZGF0aW9uIGNsYXNzIG9mIHRoZSBTY2VuZVRyZWUsIGFzIGFsbW9zdCBhbGwgY2xhc3NlcyBkZXJpdmUgZnJvbSBpdC4KICAgICAqLwogICAgY2xhc3MgQmFzZUNsYXNzIHsKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGUgYW4gQmFzZUNsYXNzLgogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKCkgewogICAgICAgICAgICB0aGlzLl9faWQgPSArK2NvdW50ZXI7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEV2ZXJ5IGluc3RhbmNlIG9mIGVhY2ggY2xhc3MgYmFzZWQgb24gQmFzZUNsYXNzIGlzIGFzc2lnbmVkIGEgdW5pcXVlIG51bWJlci4KICAgICAgICAgKiBUaGlzIG51bWJlciBpcyBub3QgcGVyc2lzdGVudCBpbiBiZXR3ZWVuIGRpZmZlcmVudCBsb2FkcyBvZiBhIHNjZW5lLgogICAgICAgICAqIFJldHVybnMgdGhlIHVuaXF1ZSBpZCBvZiB0aGUgb2JqZWN0LgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgSWQgb2YgdGhlIG9iamVjdC4KICAgICAgICAgKi8KICAgICAgICBnZXRJZCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19pZDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyB0aGUgdW5tYW5nbGVkIG5hbWUgb2YgdGhlIGNsYXNzLgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgbmFtZSBvZiB0aGUgY2xhc3MgZGVmaW5pdGlvbi4KICAgICAgICAgKi8KICAgICAgICBnZXRDbGFzc05hbWUoKSB7CiAgICAgICAgICAgIHJldHVybiBSZWdpc3RyeS5nZXRDbGFzc05hbWUoT2JqZWN0LmdldFByb3RvdHlwZU9mKHRoaXMpLmNvbnN0cnVjdG9yKTsKICAgICAgICB9CiAgICB9CgogICAgLyoqIENsYXNzIHJlcHJlc2VudGluZyBhIEJhc2VFdmVudC4gKi8KICAgIGNsYXNzIEJhc2VFdmVudCB7CiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlIGFuIEJhc2VFdmVudC4KICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3RvcigpIHsgfQogICAgfQoKICAgIC8qIGVzbGludC1kaXNhYmxlIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnkgKi8KICAgIC8qKgogICAgICogUHJvdmlkZXMgYW4gaW50ZXJmYWNlIGZvciBlbWl0dGluZyBldmVudHMgdW5kZXIgZ2l2ZW4gbmFtZXMsIGFuZCByZWdpc3RlcmluZyBsaXN0ZW5lcnMgdG8gdGhvc2UgZXZlbnRzLgogICAgICogVGhpcyBpcyBhIGJhc2UgY2xhc3MgZm9yIG1vc3QgY2xhc3NlcyBpbiB0aGUgU2NlbmUgVHJlZSBhbmQgUmVuZGVyZXIsIGVuYWJsaW5nIG9ic2VydmVycyB0byBsaXN0ZW4gdG8gY2hhbmdlcyB0aHJvdWdob3V0IHRoZSBzeXN0ZW0uCiAgICAgKiBUaGUgaW50ZXJmYWNlIGV4cG9zZWQgaXMgc2ltaWxhciB0byBbRXZlbnRFbWl0dGVyXShodHRwczovL25vZGVqcy5vcmcvYXBpL2V2ZW50cy5odG1sI2V2ZW50c19jbGFzc19ldmVudGVtaXR0ZXIpIGluIE5vZGUuCiAgICAgKgogICAgICogU2ltaWxhciB0byBob3cgdGhlIERPTSBldmVudCBzeXN0ZW0gaW4gdGhlIGJyb3dzZXIgd29ya3MsIGV2ZW50cyBhcmUgcmVnaXN0ZXJlZCBieSBuYW1lLgogICAgICogRXhhbXBsZTogUmVnaXN0ZXJpbmcgYSBsaXN0ZW5lciBmb3IgYSBjdXN0b20gZXZlbnQsIGFuZCB0aGVuIGVtaXR0aW5nIHRoYXQgZXZlbnQuCiAgICAgKiBgYGBqYXZhc2NyaXB0CiAgICAgKiAgY29uc3QgZWUgPSBuZXcgRXZlbnRFbWl0dGVyKCkKICAgICAqCiAgICAgKiAgY29uc3QgZXZlbnRJRCA9IGVlLm9uKCdteUV2ZW50JywgKGV2ZW50KSA9PiB7CiAgICAgKiAgICBjb25zb2xlLmxvZygnTXkgRXZlbnQgd2FzIGVtaXR0ZWQ6JywgZXZlbnQpCiAgICAgKiAgfSkKICAgICAqCiAgICAgKiAgZWUuZW1pdCgnbXlFdmVudCcsIHsgZGF0YTogNDIgfSkKICAgICAqICAvLyBXZSBubyBsb25nZXIgd2FudCB0byBsaXN0ZW4gdG8gdGhpcyBldmVudCwgc28gbGV0J3MgcmVtb3ZlIHRoZSBsaXN0ZW5lci4KICAgICAqICBlZS5yZW1vdmVMaXN0ZW5lckJ5SWQoJ215RXZlbnQnLCBldmVudElEKQogICAgICogYGBgCiAgICAgKgogICAgICoKICAgICAqLwogICAgY2xhc3MgRXZlbnRFbWl0dGVyIGV4dGVuZHMgQmFzZUNsYXNzIHsKICAgICAgICAvKioKICAgICAgICAgKiBJbml0aWFsaXplcyBhbiBlbXB0eSBgbGlzdGVuZXJzYCBtYXAgdGhhdCB3aWxsIGhvc3QgYWxsIHRoZSBldmVudHMsCiAgICAgICAgICogd2hpY2ggaW1wbGllcyB0aGF0IGl0IGRvZXNuJ3QgYWxsb3cgbXVsdGlwbGUgZXZlbnRzIHdpdGggdGhlIHNhbWUgbmFtZS4KICAgICAgICAgKgogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKCkgewogICAgICAgICAgICBzdXBlcigpOwogICAgICAgICAgICB0aGlzLmxpc3RlbmVycyA9IHt9OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBBZGRzIGEgbGlzdGVuZXIgZnVuY3Rpb24gZm9yIGEgZ2l2ZW4gZXZlbnQgbmFtZS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBldmVudE5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQuCiAgICAgICAgICogQHBhcmFtIGxpc3RlbmVyIC0gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uKGNhbGxiYWNrKS4KICAgICAgICAgKiBAcmV0dXJuIC0gdGhlIGlkIHRoYXQgY2FuIGJlIHVzZWQgdG8gcmVtb3ZlIHRoZSBsaXN0ZW5lci4KICAgICAgICAgKi8KICAgICAgICBvbihldmVudE5hbWUsIGxpc3RlbmVyKSB7CiAgICAgICAgICAgIGlmICghbGlzdGVuZXIpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTWlzc2luZyBsaXN0ZW5lci4nKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIXRoaXMubGlzdGVuZXJzW2V2ZW50TmFtZV0pIHsKICAgICAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzW2V2ZW50TmFtZV0gPSBbXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdOwogICAgICAgICAgICBpZiAobGlzdGVuZXJzLmluY2x1ZGVzKGxpc3RlbmVyKSkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBMaXN0ZW5lciAiJHtsaXN0ZW5lci5uYW1lfSIgYWxyZWFkeSBjb25uZWN0ZWQgdG8gZXZlbnQgIiR7ZXZlbnROYW1lfSIuYCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gVE9ETzogRGVwcmVjYXRlIGFsb25nc2lkZSAjYWRkTGlzdGVuZXIuCiAgICAgICAgICAgIGNvbnN0IGlkID0gbGlzdGVuZXJzLmxlbmd0aDsKICAgICAgICAgICAgbGlzdGVuZXJzW2lkXSA9IGxpc3RlbmVyOwogICAgICAgICAgICByZXR1cm4gaWQ7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNpbWlsYXIgdG8gdGhlIGBvbmAgbWV0aG9kIHdpdGggdGhlIGRpZmZlcmVuY2UgdGhhdCB3aGVuIHRoZSBldmVudCBpcyB0cmlnZ2VyZWQsCiAgICAgICAgICogaXQgaXMgYXV0b21hdGljYWxseSB1bnJlZ2lzdGVyZWQgbWVhbmluZyB0aGF0IHRoZSBldmVudCBsaXN0ZW5lciB3aWxsIGJlIHRyaWdnZXJlZCBhdCBtb3N0IG9uZSB0aW1lLgogICAgICAgICAqCiAgICAgICAgICogVXNlZnVsIGZvciBldmVudHMgdGhhdCB3ZSBleHBlY3QgdG8gdHJpZ2dlciBvbmUgdGltZSwgc3VjaCBhcyB3aGVuIGFzc2V0cyBsb2FkLgogICAgICAgICAqIGBgYGphdmFzY3JpcHQKICAgICAgICAgKiBjb25zdCBhc3NldCA9IG5ldyBBc3NldCgpOwogICAgICAgICAqIGFzc2V0Lm9uY2UoJ2xvYWRlZCcsICgpID0+IHsKICAgICAgICAgKiAgIGNvbnNvbGUubG9nKCJZYXkhIHRoZSBhc3NldCBpcyBsb2FkZWQiKQogICAgICAgICAqIH0pCiAgICAgICAgICogYGBgCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gZXZlbnROYW1lIC0gVGhlIGV2ZW50TmFtZSB2YWx1ZQogICAgICAgICAqIEBwYXJhbSBsaXN0ZW5lciAtIFRoZSBsaXN0ZW5lciB2YWx1ZQogICAgICAgICAqIEByZXR1cm4gLSB0aGUgaWQgdGhhdCBjYW4gYmUgdXNlZCB0byByZW1vdmUgdGhlIGxpc3RlbmVyLgogICAgICAgICAqLwogICAgICAgIG9uY2UoZXZlbnROYW1lLCBsaXN0ZW5lcikgewogICAgICAgICAgICBjb25zdCBjYiA9IChldmVudCkgPT4gewogICAgICAgICAgICAgICAgbGlzdGVuZXIoZXZlbnQpOwogICAgICAgICAgICAgICAgdGhpcy5vZmYoZXZlbnROYW1lLCBjYik7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJldHVybiB0aGlzLm9uKGV2ZW50TmFtZSwgY2IpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZW1vdmVzIGEgbGlzdGVuZXIgZnVuY3Rpb24gZnJvbSB0aGUgc3BlY2lmaWVkIGV2ZW50LCB1c2luZyBlaXRoZXIgdGhlIGZ1bmN0aW9uIG9yIHRoZSBpbmRleCBpZC4gRGVwZW5kcyBvbiB3aGF0IGlzIHBhc3NlZCBpbi4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBldmVudE5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgZXZlbnQuCiAgICAgICAgICogQHBhcmFtIGxpc3RlbmVyIC0gVGhlIGxpc3RlbmVyIGZ1bmN0aW9uIG9yIHRoZSBpZCBudW1iZXIuCiAgICAgICAgICovCiAgICAgICAgb2ZmKGV2ZW50TmFtZSwgbGlzdGVuZXIpIHsKICAgICAgICAgICAgaWYgKCFsaXN0ZW5lcikgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIGNhbGxiYWNrIGZ1bmN0aW9uIChsaXN0ZW5lcikuJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHR5cGVvZiBsaXN0ZW5lciA9PSAnbnVtYmVyJykgewogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdEZXByZWNhdGVkLiBVbi1yZWdpc3RlciB1c2luZyB0aGUgb3JpZ2luYWwgbGlzdGVuZXIgaW5zdGVhZC4nKTsKICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlTGlzdGVuZXJCeUlkKGV2ZW50TmFtZSwgbGlzdGVuZXIpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMubGlzdGVuZXJzW2V2ZW50TmFtZV0gfHwgW107CiAgICAgICAgICAgIGNvbnN0IGlkcyA9IFtdOwogICAgICAgICAgICBsaXN0ZW5lcnMuZm9yRWFjaCgoZSwgaSkgPT4gewogICAgICAgICAgICAgICAgaWYgKGUgPT09IGxpc3RlbmVyKSB7CiAgICAgICAgICAgICAgICAgICAgaWRzLnB1c2goaSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAoaWRzLmxlbmd0aCA9PSAwKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYExpc3RlbmVyICIke2xpc3RlbmVyLm5hbWV9IiBpcyBub3QgY29ubmVjdGVkIHRvICIke2V2ZW50TmFtZX0iIGV2ZW50YCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAvLyBOb3RlOiBkbyBub3Qgc3BsaWNlIHRoZSBhcnJheSBhcyB0aGF0IHdvdWxkIGNoYW5nZSB0aGUgaW5kZXhlcyBvZiBleGlzdGluZyBsaXN0ZW5lcnMuCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGlkIG9mIGlkcykgewogICAgICAgICAgICAgICAgICAgIGxpc3RlbmVyc1tpZF0gPSBudWxsOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIHJlbW92ZSBsaXN0ZW5lciBieSBJRCByZXR1cm5lZCBmcm9tICNvbgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGV2ZW50TmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBldmVudC4KICAgICAgICAgKiBAcGFyYW0gaWQgLSBUaGUgaWQgcmV0dXJuZWQgYnkgYWRkTGlzdGVuZXIKICAgICAgICAgKi8KICAgICAgICByZW1vdmVMaXN0ZW5lckJ5SWQoZXZlbnROYW1lLCBpZCkgewogICAgICAgICAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLmxpc3RlbmVyc1tldmVudE5hbWVdOwogICAgICAgICAgICBpZiAoIWxpc3RlbmVycykgewogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdjYWxsYmFjayA6JyArIGlkICsgJyB3YXMgbm90IGNvbm5lY3RlZCB0byB0aGlzIGV2ZW50OicgKyBldmVudE5hbWUpOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICghbGlzdGVuZXJzW2lkXSkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBJRCcpOwogICAgICAgICAgICAvLyBOb3RlOiBkbyBub3Qgc3BsaWNlIHRoZSBhcnJheSBhcyB0aGF0IHdvdWxkIGNoYW5nZSB0aGUgaW5kZXhlcyBvZiBleGlzdGluZyBsaXN0ZW5lcnMuCiAgICAgICAgICAgIGxpc3RlbmVyc1tpZF0gPSBudWxsOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBUcmlnZ2VycyBhbGwgbGlzdGVuZXIgZnVuY3Rpb25zIGluIGFuIGV2ZW50LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGV2ZW50TmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBldmVudC4KICAgICAgICAgKiBAcGFyYW0gZXZlbnQgLSBUaGUgZGF0YSB5b3Ugd2FudCB0byBwYXNzIGRvd24gdG8gYWxsIGxpc3RlbmVyIGZ1bmN0aW9ucyBhcyBwYXJhbWV0ZXIuCiAgICAgICAgICoKICAgICAgICAgKi8KICAgICAgICBlbWl0KGV2ZW50TmFtZSwgZXZlbnQgPSBuZXcgQmFzZUV2ZW50KCkpIHsKICAgICAgICAgICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy5saXN0ZW5lcnNbZXZlbnROYW1lXSB8fCBbXTsKICAgICAgICAgICAgbGlzdGVuZXJzLmZvckVhY2goKGZuKSA9PiB7CiAgICAgICAgICAgICAgICAvLyBTa2lwIGRpc2Nvbm5lY3RlZCBsaXN0ZW5lcnMuCiAgICAgICAgICAgICAgICBpZiAoZm4pIHsKICAgICAgICAgICAgICAgICAgICBmbihldmVudCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgIH0KCiAgICBjbGFzcyBQYXJhbWV0ZXJBZGRlZEV2ZW50IGV4dGVuZHMgQmFzZUV2ZW50IHsKICAgICAgICBjb25zdHJ1Y3RvcihuYW1lKSB7CiAgICAgICAgICAgIHN1cGVyKCk7CiAgICAgICAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICAgICAgfQogICAgfQoKICAgIGNsYXNzIFBhcmFtZXRlclJlbW92ZWRFdmVudCBleHRlbmRzIEJhc2VFdmVudCB7CiAgICAgICAgY29uc3RydWN0b3IobmFtZSkgewogICAgICAgICAgICBzdXBlcigpOwogICAgICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwogICAgICAgIH0KICAgIH0KCiAgICAvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnMgKi8KICAgIC8qKgogICAgICogQ2xhc3MgdGhhdCBhbGxvd3Mgb3RoZXIgY2xhc3NlcyB0byBiZSBwYXJhbWV0ZXJpemVkIGJ5IGBQYXJhbWV0ZXJgIHR5cGUgb2Ygb2JqZWN0cy4KICAgICAqIE5vdCBvbmx5IGhvc3RpbmcgcGFyYW1ldGVycywgYnV0IHRoZWlyIGV2ZW50cy4KICAgICAqCiAgICAgKiBAZXh0ZW5kcyB7RXZlbnRFbWl0dGVyfQogICAgICovCiAgICBjbGFzcyBQYXJhbWV0ZXJPd25lciBleHRlbmRzIEV2ZW50RW1pdHRlciB7CiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBQYXJhbWV0ZXJPd25lciBieSBpbml0aWFsaXppbmcgcGFyYW1ldGVyIGhvc3RpbmcgbWFwcGluZ3MgYW5kIGV2ZW50cy4KICAgICAgICAgKgogICAgICAgICAqIEV2ZXJ5IE9iamVjdCBoYXMgYSB1bmlxdWUgaWRlbnRpZmllciB3aGljaCBpcyBiYXNlZCBvbiBhIGNvdW50ZXIgdGhhdCBpcyBpbmNyZW1lbnRlZC4KICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgICAgICAgc3VwZXIoKTsKICAgICAgICAgICAgdGhpcy5wYXJhbUV2ZW50TGlzdGVuZXJJRHMgPSB7fTsKICAgICAgICAgICAgdGhpcy5wYXJhbU1hcHBpbmcgPSB7fTsKICAgICAgICAgICAgdGhpcy5wYXJhbXMgPSBbXTsKICAgICAgICAgICAgdGhpcy5kZXByZWNhdGVkUGFyYW1NYXBwaW5nID0ge307CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiBwYXJhbWV0ZXJzIGN1cnJlbnQgb2JqZWN0IGhhcy4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBBbW91bnQgb2YgcGFyYW1ldGVycyBpbiBjdXJyZW50IG9iamVjdC4KICAgICAgICAgKi8KICAgICAgICBnZXROdW1QYXJhbWV0ZXJzKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJhbXMubGVuZ3RoOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIGFsbCB0aGUgcGFyYW1ldGVycyBvZiB0aGUgb2JqZWN0LgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFBhcmFtZXRlciBMaXN0CiAgICAgICAgICovCiAgICAgICAgZ2V0UGFyYW1ldGVycygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1zOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSBpbmRleCBvZiBhIHBhcmFtZXRlciBpbiBwYXJhbWV0ZXIgbGlzdC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBwYXJhbU5hbWUgLSBOYW1lIG9mIHRoZSBwYXJhbWV0ZXIuCiAgICAgICAgICogQHJldHVybiAtIFBvc2l0aW9uIGluIHRoZSBhcnJheQogICAgICAgICAqLwogICAgICAgIGdldFBhcmFtZXRlckluZGV4KHBhcmFtTmFtZSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5wYXJhbU1hcHBpbmdbcGFyYW1OYW1lXTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyBgUGFyYW1ldGVyYCBvYmplY3QgaW4gYSBnaXZlbiBpbmRleAogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGluZGV4IC0gUG9zaXRpb24gb2YgdGhlIHBhcmFtZXRlciBpbiB0aGUgYXJyYXkKICAgICAgICAgKiBAcmV0dXJuIC0gUGFyYW1ldGVyIG9iamVjdCB2YWx1ZQogICAgICAgICAqLwogICAgICAgIGdldFBhcmFtZXRlckJ5SW5kZXgoaW5kZXgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyYW1zW2luZGV4XTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVmFsaWRhdGVzIGlmIHRoZSBzcGVjaWZpZWQgcGFyYW1ldGVyIGV4aXN0cyBpbiB0aGUgb2JqZWN0LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHBhcmFtTmFtZSAtIFRoZSBwYXJhbWV0ZXIgbmFtZS4KICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBoYXNQYXJhbWV0ZXIocGFyYW1OYW1lKSB7CiAgICAgICAgICAgIHJldHVybiBwYXJhbU5hbWUgaW4gdGhpcy5wYXJhbU1hcHBpbmc7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEFkZCBhIG1hcHBpbmcgZnJvbSBvbmUgbmFtZSB0byBhIG5ldyBwYXJhbWV0ZXIuCiAgICAgICAgICogVGhpcyBpcyB1c2VkIHRvIGhhbmRsZSBtaWdyYXRpbmcgcGFyYW1ldGVycyB0byBuZXcgbmFtZXMuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0ga2V5IC0gVGhlIHBhcmFtZXRlciBuYW1lLgogICAgICAgICAqIEBwYXJhbSBwYXJhbU5hbWUgLSBUaGUgcGFyYW1ldGVyIG5hbWUuCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgYWRkUGFyYW1ldGVyRGVwcmVjYXRpb25NYXBwaW5nKGtleSwgcGFyYW1OYW1lKSB7CiAgICAgICAgICAgIHRoaXMuZGVwcmVjYXRlZFBhcmFtTWFwcGluZ1trZXldID0gcGFyYW1OYW1lOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIGBQYXJhbWV0ZXJgIG9iamVjdCB1c2luZyB0aGUgZ2l2ZW4gbmFtZQogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHBhcmFtTmFtZSAtIFRoZSBwYXJhbWV0ZXIgbmFtZS4KICAgICAgICAgKiBAcmV0dXJuIC0gUGFyYW1ldGVyIG9iamVjdCB2YWx1ZQogICAgICAgICAqLwogICAgICAgIGdldFBhcmFtZXRlcihwYXJhbU5hbWUpIHsKICAgICAgICAgICAgbGV0IGluZGV4ID0gdGhpcy5wYXJhbU1hcHBpbmdbcGFyYW1OYW1lXTsKICAgICAgICAgICAgaWYgKGluZGV4ID09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgY29uc3QgbmV3UGFyYW1OYW1lID0gdGhpcy5kZXByZWNhdGVkUGFyYW1NYXBwaW5nW3BhcmFtTmFtZV07CiAgICAgICAgICAgICAgICBpZiAoIW5ld1BhcmFtTmFtZSkgewogICAgICAgICAgICAgICAgICAgIC8vIFRPRE86IFNob3VsZCB0aGlzIG1ldGhvZCBub3QgcmV0dXJuIG51bGw/CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgICAgICAgICAgICAgICAgLy8gdGhyb3cgRXJyb3IoYE5vIFBhcmFtZXRlciB3aXRoIHRoYXQgbmFtZSBleGlzdHM6ICR7cGFyYW1OYW1lfSBgKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBQYXJhbWV0ZXIgbmFtZSAke3BhcmFtTmFtZX0gaXMgbm93IGRlcHJlY2F0ZWQuIFBsZWFzZSB1c2UgJHtuZXdQYXJhbU5hbWV9IGluc3RlYWQuYCk7CiAgICAgICAgICAgICAgICAgICAgaW5kZXggPSB0aGlzLnBhcmFtTWFwcGluZ1tuZXdQYXJhbU5hbWVdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcmFtc1tpbmRleF07CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFRoaXMgbWV0aG9kIGNhbiBiZSBvdmVycmlkZGVuIGluIGRlcml2ZWQgY2xhc3NlcwogICAgICAgICAqIHRvIHBlcmZvcm0gZ2VuZXJhbCB1cGRhdGVzIChzZWUgR0xQYXNzIG9yIEJhc2VJdGVtKS4KICAgICAgICAgKiBAcGFyYW0gZXZlbnQgLSBUaGUgZXZlbnQgb2JqZWN0IGVtaXR0ZWQgYnkgdGhlIHBhcmFtZXRlci4KICAgICAgICAgKiBAcHJpdmF0ZQogICAgICAgICAqLwogICAgICAgIHBhcmFtZXRlclZhbHVlQ2hhbmdlZChldmVudCkgewogICAgICAgICAgICB0aGlzLmVtaXQoJ3BhcmFtZXRlclZhbHVlQ2hhbmdlZCcsIGV2ZW50KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQWRkcyBgUGFyYW1ldGVyYCBvYmplY3QgdG8gdGhlIG93bmVyJ3MgcGFyYW1ldGVyIGxpc3QuCiAgICAgICAgICoKICAgICAgICAgKiBAZW1pdHMgYHBhcmFtZXRlckFkZGVkYCB3aXRoIHRoZSBuYW1lIG9mIHRoZSBwYXJhbS4KICAgICAgICAgKiBAcGFyYW0gcGFyYW0gLSBUaGUgcGFyYW1ldGVyIHRvIGFkZC4KICAgICAgICAgKiBAcmV0dXJuIC0gV2l0aCBgb3duZXJgIGFuZCBgdmFsdWVDaGFuZ2VkYCBldmVudCBzZXQuCiAgICAgICAgICovCiAgICAgICAgYWRkUGFyYW1ldGVyKHBhcmFtKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmluc2VydFBhcmFtZXRlcihwYXJhbSwgdGhpcy5wYXJhbXMubGVuZ3RoKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQWRkcyBgUGFyYW1ldGVyYCBvYmplY3QgdG8gdGhlIG93bmVyJ3MgcGFyYW1ldGVyIGxpc3QgdXNpbmcgdGhlIGluZGV4LgogICAgICAgICAqIEl0IHJlcGxhY2VzIHRoZSBldmVudCBpbiB0aGUgc3BlY2lmaWVkIGluZGV4LgogICAgICAgICAqCiAgICAgICAgICoKICAgICAgICAgKiBAZW1pdHMgYHBhcmFtZXRlckFkZGVkYCB3aXRoIHRoZSBuYW1lIG9mIHRoZSBwYXJhbS4KICAgICAgICAgKiBAcGFyYW0gcGFyYW0gLSBUaGUgcGFyYW1ldGVyIHRvIGluc2VydC4KICAgICAgICAgKiBAcGFyYW0gaW5kZXggLSBUaGUgaW5kZXggdmFsdWUuCiAgICAgICAgICogQHJldHVybiAtIFdpdGggYG93bmVyYCBhbmQgYHZhbHVlQ2hhbmdlZGAgZXZlbnQgc2V0LgogICAgICAgICAqLwogICAgICAgIGluc2VydFBhcmFtZXRlcihwYXJhbSwgaW5kZXgpIHsKICAgICAgICAgICAgY29uc3QgbmFtZSA9IHBhcmFtLmdldE5hbWUoKTsKICAgICAgICAgICAgaWYgKHRoaXMucGFyYW1NYXBwaW5nW25hbWVdICE9IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdSZXBsYWNpbmcgUGFyYW1ldGVyOicgKyBuYW1lKTsKICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlUGFyYW1ldGVyKG5hbWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHBhcmFtLnNldE93bmVyKHRoaXMpOwogICAgICAgICAgICB0aGlzLnBhcmFtRXZlbnRMaXN0ZW5lcklEc1tuYW1lXSA9IHBhcmFtLm9uKCd2YWx1ZUNoYW5nZWQnLCAoZXZlbnQpID0+IHsKICAgICAgICAgICAgICAgIC8vIE5vdGU6IHNwcmVhZCBvcGVyYXRvcnMgY2F1c2UgZXJyb3JzIG9uIGlPUyAxMS4KICAgICAgICAgICAgICAgIGNvbnN0IG5ld0V2ZW50ID0geyBwYXJhbSB9OwogICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gZXZlbnQpCiAgICAgICAgICAgICAgICAgICAgbmV3RXZlbnRba2V5XSA9IGV2ZW50W2tleV07CiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtZXRlclZhbHVlQ2hhbmdlZChuZXdFdmVudCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLnBhcmFtcy5zcGxpY2UoaW5kZXgsIDAsIHBhcmFtKTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IGluZGV4OyBpIDwgdGhpcy5wYXJhbXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIHRoaXMucGFyYW1NYXBwaW5nW3RoaXMucGFyYW1zW2ldLmdldE5hbWUoKV0gPSBpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IGV2ZW50ID0gbmV3IFBhcmFtZXRlckFkZGVkRXZlbnQobmFtZSk7CiAgICAgICAgICAgIHRoaXMuZW1pdCgncGFyYW1ldGVyQWRkZWQnLCBldmVudCk7CiAgICAgICAgICAgIHJldHVybiBwYXJhbTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmVtb3ZlcyBgUGFyYW1ldGVyYCBmcm9tIG93bmVyLCBieSB1c2luZyBwYXJhbWV0ZXIncyBuYW1lLgogICAgICAgICAqIEBlbWl0cyBgcGFyYW1ldGVyUmVtb3ZlZGAgd2l0aCB0aGUgbmFtZSBvZiB0aGUgcGFyYW0uCiAgICAgICAgICogQHBhcmFtIG5hbWUgLSBUaGUgcGFyYW1ldGVyIG5hbWUuCiAgICAgICAgICovCiAgICAgICAgcmVtb3ZlUGFyYW1ldGVyKG5hbWUpIHsKICAgICAgICAgICAgaWYgKHRoaXMucGFyYW1NYXBwaW5nW25hbWVdID09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmFibGUgdG8gcmVtb3ZlIFBhcmFtZXRlcjonICsgbmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnBhcmFtTWFwcGluZ1tuYW1lXTsKICAgICAgICAgICAgY29uc3QgcGFyYW0gPSB0aGlzLnBhcmFtc1t0aGlzLnBhcmFtTWFwcGluZ1tuYW1lXV07CiAgICAgICAgICAgIHBhcmFtLnJlbW92ZUxpc3RlbmVyQnlJZCgndmFsdWVDaGFuZ2VkJywgdGhpcy5wYXJhbUV2ZW50TGlzdGVuZXJJRHNbbmFtZV0pOwogICAgICAgICAgICB0aGlzLnBhcmFtcy5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgICBkZWxldGUgdGhpcy5wYXJhbU1hcHBpbmdbbmFtZV07CiAgICAgICAgICAgIGZvciAobGV0IGkgPSBpbmRleDsgaSA8IHRoaXMucGFyYW1zLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICB0aGlzLnBhcmFtTWFwcGluZ1t0aGlzLnBhcmFtc1tpXS5nZXROYW1lKCldID0gaTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBldmVudCA9IG5ldyBQYXJhbWV0ZXJSZW1vdmVkRXZlbnQobmFtZSk7CiAgICAgICAgICAgIHRoaXMuZW1pdCgncGFyYW1ldGVyUmVtb3ZlZCcsIGV2ZW50KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmVwbGFjZXMgb2xkIGBQYXJhbWV0ZXJgIGJ5IHBhc3NpbmcgYSBuZXcgb25lIHdpdGggdGhlIHNhbWUgbmFtZS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBwYXJhbSAtIFRoZSBwYXJhbWV0ZXIgdG8gcmVwbGFjZS4KICAgICAgICAgKiBAcmV0dXJuIC0gYFBhcmFtZXRlcmAgd2l0aCBgdmFsdWVDaGFuZ2VkYCBldmVudCBzZXQuCiAgICAgICAgICovCiAgICAgICAgcmVwbGFjZVBhcmFtZXRlcihwYXJhbSkgewogICAgICAgICAgICBjb25zdCBuYW1lID0gcGFyYW0uZ2V0TmFtZSgpOwogICAgICAgICAgICBpZiAodGhpcy5wYXJhbU1hcHBpbmdbbmFtZV0gPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VuYWJsZSB0byByZXBsYWNlIFBhcmFtZXRlcjonICsgbmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgaW5kZXggPSB0aGlzLnBhcmFtTWFwcGluZ1tuYW1lXTsKICAgICAgICAgICAgdGhpcy5yZW1vdmVQYXJhbWV0ZXIobmFtZSk7CiAgICAgICAgICAgIHRoaXMuaW5zZXJ0UGFyYW1ldGVyKHBhcmFtLCBpbmRleCk7CiAgICAgICAgICAgIHJldHVybiBwYXJhbTsKICAgICAgICB9CiAgICAgICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgIC8vIFBlcnNpc3RlbmNlCiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIHRvSlNPTiBtZXRob2QgZW5jb2RlcyB0aGlzIHR5cGUgYXMgYSBqc29uIG9iamVjdCBmb3IgcGVyc2lzdGVuY2UuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gY29udGV4dCAtIFRoZSBjb250ZXh0IHZhbHVlLgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBqc29uIG9iamVjdC4KICAgICAgICAgKi8KICAgICAgICB0b0pTT04oY29udGV4dCkgewogICAgICAgICAgICBjb25zdCBqc29uID0gewogICAgICAgICAgICAgICAgdHlwZTogdGhpcy5nZXRDbGFzc05hbWUoKSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgY29uc3QgcGFyYW1zSlNPTiA9IHt9OwogICAgICAgICAgICBsZXQgc2F2ZWRQYXJhbXMgPSAwOwogICAgICAgICAgICBmb3IgKGNvbnN0IHBhcmFtIG9mIHRoaXMucGFyYW1zKSB7CiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbUpTT04gPSBwYXJhbS50b0pTT04oY29udGV4dCk7CiAgICAgICAgICAgICAgICBpZiAocGFyYW1KU09OKSB7CiAgICAgICAgICAgICAgICAgICAgcGFyYW1zSlNPTltwYXJhbS5nZXROYW1lKCldID0gcGFyYW1KU09OOwogICAgICAgICAgICAgICAgICAgIHNhdmVkUGFyYW1zKys7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHNhdmVkUGFyYW1zID4gMCkKICAgICAgICAgICAgICAgIGpzb24ucGFyYW1zID0gcGFyYW1zSlNPTjsKICAgICAgICAgICAgcmV0dXJuIGpzb247CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFRoZSBmcm9tSlNPTiBtZXRob2QgZGVjb2RlcyBhIGpzb24gb2JqZWN0IGZvciB0aGlzIHR5cGUuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0ganNvbiAtIFRoZSBqc29uIG9iamVjdCB0aGlzIGl0ZW0gbXVzdCBkZWNvZGUuCiAgICAgICAgICogQHBhcmFtIGNvbnRleHQgLSBUaGUgY29udGV4dCB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBmcm9tSlNPTihqc29uLCBjb250ZXh0KSB7CiAgICAgICAgICAgIGlmIChqc29uLnBhcmFtcykgewogICAgICAgICAgICAgICAgZm9yIChjb25zdCBrZXkgaW4ganNvbi5wYXJhbXMpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwaiA9IGpzb24ucGFyYW1zW2tleV07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyYW0gPSB0aGlzLmdldFBhcmFtZXRlcihrZXkpOwogICAgICAgICAgICAgICAgICAgIGlmICghcGFyYW0pCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignUGFyYW0gbm90IGZvdW5kOicgKyBrZXkpOwogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAocGoucGFyYW1QYXRoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0ID09PSBudWxsIHx8IGNvbnRleHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNvbnRleHQucmVzb2x2ZVBhdGgocGoucGFyYW1QYXRoLCAocGFyYW0pID0+IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnJlcGxhY2VQYXJhbWV0ZXIocGFyYW0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgKCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignVW5hYmxlIHRvIHJlc29sdmUgc2hhcmVkIHBhcmFtZXRlcjonICsgcGoucGFyYW1QYXRoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW0uZnJvbUpTT04ocGosIGNvbnRleHQpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFVzZXMgcGFzc2VkIGluIEJpblJlYWRlciBvYmplY3QoY29udGFpbmluZyBhbiBJbnQzMiBhcnJheSB3aXRoIGFsbCB0aGUgcGFyYW1ldGVycykgdG8gcmVjb25zdHJ1Y3QgYWxsIHBhcmFtZXRlcnMgc3RhdGUuCiAgICAgICAgICoKICAgICAgICAgKiBJbiBlYWNoIGl0ZXJhdGlvbiBvZiB0aGUgYXJyYXksIHByb3BUeXBlIGFuZCBwcm9wTmFtZSBhcmUgZXh0cmFjdGVkIGFuZAogICAgICAgICAqIHVzZWQgdG8gYnVpbGQgdGhlIHJpZ2h0IGBQYXJhbWV0ZXJgIGNsYXNzLiBUaGVuIGFsbCBvZiB0aGVtIGFyZSBhZGRlZCB0byB0aGUgb2JqZWN0LgogICAgICAgICAqCiAgICAgICAgICogQGVtaXRzIGBwYXJhbWV0ZXJBZGRlZGAgd2l0aCB0aGUgbmFtZSBvZiB0aGUgcGFyYW0uCiAgICAgICAgICogQHBhcmFtIHJlYWRlciAtIFRoZSByZWFkZXIgdmFsdWUuCiAgICAgICAgICogQHBhcmFtIGNvbnRleHQgLSBUaGUgY29udGV4dCB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICByZWFkQmluYXJ5KHJlYWRlciwgY29udGV4dCkgewogICAgICAgICAgICAvLyBUT0RPOiBtYWtlIHRoaXMgd29yawogICAgICAgICAgICBpZiAoKGNvbnRleHQgPT09IG51bGwgfHwgY29udGV4dCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY29udGV4dC52ZXJzaW9uc1snemVhLWVuZ2luZSddLmNvbXBhcmUoWzAsIDAsIDNdKSkgPj0gMCkgewogICAgICAgICAgICAgICAgY29uc3QgbnVtUHJvcHMgPSByZWFkZXIubG9hZFVJbnQzMigpOwogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1Qcm9wczsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvcFR5cGUgPSByZWFkZXIubG9hZFN0cigpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3BOYW1lID0gcmVhZGVyLmxvYWRTdHIoKTsKICAgICAgICAgICAgICAgICAgICBsZXQgcGFyYW0gPSB0aGlzLmdldFBhcmFtZXRlcihwcm9wTmFtZSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJhbSkgewogICAgICAgICAgICAgICAgICAgICAgICBwYXJhbSA9IFJlZ2lzdHJ5LmNvbnN0cnVjdENsYXNzKHByb3BUeXBlKTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFwYXJhbSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGNvbnN0cnVjdCBwcm9wOicgKyBwcm9wTmFtZSArICcgb2YgdHlwZTonICsgcHJvcFR5cGUpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW0uc2V0TmFtZShwcm9wTmFtZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUGFyYW1ldGVyKHBhcmFtKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgcGFyYW0ucmVhZEJpbmFyeShyZWFkZXIsIGNvbnRleHQpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENvbnZlcnRzIG9iamVjdCdzIEpTT04gdmFsdWUgYW5kIGNvbnZlcnRzIGl0IHRvIGEgc3RyaW5nLgogICAgICAgICAqIEBwYXJhbSBjb250ZXh0CiAgICAgICAgICogQHJldHVybiAtIFN0cmluZyBvZiBvYmplY3QncyBwYXJhbWV0ZXIgbGlzdCBzdGF0ZS4KICAgICAgICAgKi8KICAgICAgICB0b1N0cmluZyhjb250ZXh0KSB7CiAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLnRvSlNPTigpLCBudWxsLCAyKTsKICAgICAgICB9CiAgICAgICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgIC8vIENsb25lIGFuZCBEZXN0cm95CiAgICAgICAgLyoqCiAgICAgICAgICogQ29waWVzIFBhcmFtZXRlcnMgZnJvbSBhbm90aGVyIGBQYXJhbWV0ZXJPd25lcmAgdG8gY3VycmVudCBvYmplY3QuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gc3JjIC0gVGhlIFBhcmFtZXRlck93bmVyIGNvcHkgZnJvbS4KICAgICAgICAgKiBAcGFyYW0gY29udGV4dCAtIFRoZSBjb250ZXh0IHZhbHVlCiAgICAgICAgICovCiAgICAgICAgY29weUZyb20oc3JjLCBjb250ZXh0KSB7CiAgICAgICAgICAgIC8vIE5vdGU6IExvb3Agb3ZlciB0aGUgcGFyYW1ldGVycyBpbiByZXZlcnNlIG9yZGVyLAogICAgICAgICAgICAvLyB0aGlzIGlzIGJlY2F1c2Ugb2Z0ZW4sIHBhcmFtZXRlciBkZXBlbmRlbmNpZXMKICAgICAgICAgICAgLy8gYXJlIGJvdHRvbSB0byB0b3AgKGJvdHRvbSBwYXJhbXMgZGVwZW5kZW50IG9uIGhpZ2hlciBwYXJhbXMpLgogICAgICAgICAgICAvLyBUaGlzIG1lYW5zIHRoYXQgYXMgYSBwYXJhbWV0ZXIgaXMgc2V0IHdpdGggYSBuZXcgdmFsdWUKICAgICAgICAgICAgLy8gaXQgd2lsbCBkaXJ0eSB0aGUgcGFyYW1zIGJlbG93IGl0LgogICAgICAgICAgICBsZXQgaSA9IHNyYy5nZXROdW1QYXJhbWV0ZXJzKCk7CiAgICAgICAgICAgIHdoaWxlIChpLS0pIHsKICAgICAgICAgICAgICAgIGNvbnN0IHNyY1BhcmFtID0gc3JjLmdldFBhcmFtZXRlckJ5SW5kZXgoaSk7CiAgICAgICAgICAgICAgICBjb25zdCBwYXJhbSA9IHRoaXMuZ2V0UGFyYW1ldGVyKHNyY1BhcmFtLmdldE5hbWUoKSk7CiAgICAgICAgICAgICAgICBpZiAocGFyYW0pIHsKICAgICAgICAgICAgICAgICAgICAvLyBOb3RlOiB3ZSBhcmUgbm90IGNsb25pbmcgdGhlIHZhbHVlcy4KICAgICAgICAgICAgICAgICAgICBwYXJhbS5jb3B5RnJvbShzcmNQYXJhbSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFBhcmFtZXRlcihzcmNQYXJhbS5jbG9uZSgpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0KCiAgICAvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55ICovCiAgICBmdW5jdGlvbiBhcHByb3hFcXVhbChhLCBiKSB7CiAgICAgICAgcmV0dXJuICFhLnNvbWUoKHZhbHVlLCBpbmRleCkgPT4gTWF0aC5hYnMoYltpbmRleF0gLSB2YWx1ZSkgPiAwLjAwMSk7CiAgICB9CiAgICBmdW5jdGlvbiBpc0luaXRpYWxpemVkKGEpIHsKICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgaWYgKCFOdW1iZXIuaXNOYU4oYVtpXSkpCiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgY2xhc3MgQXR0cmlidXRlIGV4dGVuZHMgQmFzZUNsYXNzIHsKICAgICAgICBjb25zdHJ1Y3RvcihkYXRhVHlwZU5hbWUsIHN0cmlkZSkgewogICAgICAgICAgICBzdXBlcigpOwogICAgICAgICAgICB0aGlzLmRhdGEgPSBuZXcgRmxvYXQzMkFycmF5KDApOwogICAgICAgICAgICB0aGlzLmRhdGFUeXBlTmFtZSA9IGRhdGFUeXBlTmFtZTsKICAgICAgICAgICAgdGhpcy5zdHJpZGUgPSBzdHJpZGU7CiAgICAgICAgICAgIHRoaXMuaW5pdFJhbmdlKDApOwogICAgICAgICAgICB0aGlzLnNwbGl0cyA9IHt9OwogICAgICAgICAgICB0aGlzLnNwbGl0VmFsdWVzID0gW107CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHMgdGhlIE1lc2ggcmVmZXJlbmNlIHRvIHRoZSBWZXJ0ZXhBdHRyaWJ1dGUuIFRoaXMgaXMgbmVlZGVkIGZvciBhdHRyaWJ1dGVzCiAgICAgICAgICogYXNzaWduZWQgdG8gbWVzaGVzLCBhbmQgaXMgdXNlZCB0byBjYWxjdWxhdGUgZmFjZSB2ZXJ0ZXggaW5kaWNlcy4KICAgICAgICAgKiA+IE5vdGU6IHRoZSBtZXNoIGF1dG9tYXRpY2FsbHkgY2FsbHMgdGhpcyBtZXRob2Qgd2hlbiBhIHZlcnRleCBhdHRyaWJ1dGUgaXMgYXNzaWduZWQuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gbWVzaCAtIFRoZSBtZXNoIG9iamVjdAogICAgICAgICAqLwogICAgICAgIHNldE1lc2gobWVzaCkgewogICAgICAgICAgICB0aGlzLm1lc2ggPSBtZXNoOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSBiYWNraW5nIGFycmF5IGZvciB0aGlzIGF0dHJpYnV0ZQogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgYXNBcnJheSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyB0aGUgbmFtZSBvZiB0aGUgbWF0aCB0eXBlIHRoaXMgYXR0cmlidXRlIHN0b3Jlcy4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGdldERhdGFUeXBlTmFtZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YVR5cGVOYW1lOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSBjb3VudCBvZiBhdHRyaWJ1dGUgdmFsdWVzIGluIHRoZSBkYXRhLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0Q291bnQoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEubGVuZ3RoIC8gdGhpcy5zdHJpZGU7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHMgdGhlIGNvdW50IG9mIGF0dHJpYnV0ZSB2YWx1ZXMgaW4gdGhlIGRhdGEuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gc2l6ZSAtIFRoZSBzaXplIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHNldENvdW50KGNvdW50KSB7CiAgICAgICAgICAgIGNvbnN0IHByZXZMZW5ndGggPSB0aGlzLmRhdGEubGVuZ3RoOwogICAgICAgICAgICBjb25zdCBuZXdMZW5ndGggPSBjb3VudCAqIHRoaXMuc3RyaWRlOwogICAgICAgICAgICBpZiAobmV3TGVuZ3RoID4gcHJldkxlbmd0aCkgewogICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkobmV3TGVuZ3RoKTsKICAgICAgICAgICAgICAgIGRhdGEuc2V0KHRoaXMuZGF0YSwgMCk7CiAgICAgICAgICAgICAgICB0aGlzLmRhdGEgPSBkYXRhOwogICAgICAgICAgICAgICAgdGhpcy5pbml0UmFuZ2UocHJldkxlbmd0aCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAobmV3TGVuZ3RoIDwgcHJldkxlbmd0aCkgewogICAgICAgICAgICAgICAgdGhpcy5kYXRhID0gdGhpcy5kYXRhLnNsaWNlKDAsIG5ld0xlbmd0aCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSA7CiAgICAgICAgICAgIHRoaXMuc3BsaXRzID0ge307CiAgICAgICAgICAgIHRoaXMuc3BsaXRWYWx1ZXMgPSBbXTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogRmlsbHMgdXAgZGF0YSB2YWx1ZXMgd2l0aCBkZWZhdWx0IG9uZXMgc3RhcnRpbmcgZnJvbSB0aGUgc3BlY2lmaWVkIGluZGV4LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHN0YXJ0IC0gVGhlIHN0YXJ0IHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGluaXRSYW5nZShzdGFydCkgewogICAgICAgICAgICAvLyBJbml0aWFsaXplIHRoZSB2YWx1ZXMgdG8gaW52YWxpZCB2YWx1ZXMuCiAgICAgICAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IHRoaXMuZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdGhpcy5kYXRhW2ldID0gTnVtYmVyLk5hTjsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgZWxlbWVudHMgc3RvcmVkIGluIGVhY2ggYFRgLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0IG51bUVsZW1lbnRzKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5zdHJpZGU7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgZGF0YSB2YWx1ZSBvZiB0aGUgc3BlY2lmaWVkIGluZGV4LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGluZGV4IC0gVGhlIGluZGV4IHZhbHVlLgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGdldEZsb2F0MzJWYWx1ZShpbmRleCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5kYXRhW2luZGV4XTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0cyBkYXRhIHZhbHVlIGluIHRoZSBzcGVjaWZpZWQgaW5kZXguCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gaW5kZXggLSBUaGUgaW5kZXggdmFsdWUuCiAgICAgICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldEZsb2F0MzJWYWx1ZShpbmRleCwgdmFsdWUpIHsKICAgICAgICAgICAgdGhpcy5kYXRhW2luZGV4XSA9IHZhbHVlOwogICAgICAgIH0KICAgICAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgIC8vIEZhY2UgVmVydGV4IFZhbHVlcwogICAgICAgIC8qKgogICAgICAgICAqIFRoZSBnZXRTcGxpdHMgbWV0aG9kLgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGdldFNwbGl0cygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3BsaXRzOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSB2YWx1ZSBvZiBhIGNvcm5lciB2ZXJ0ZXggb2YgYSBmYWNlLgogICAgICAgICAqIEBwYXJhbSBmYWNlIC0gVGhlIGZhY2UgaW5kZXguCiAgICAgICAgICogQHBhcmFtIGZhY2VWZXJ0ZXggLSBUaGUgaW5kZXggb2YgdmVydGV4IHdpdGhpbiB0aGUgZmFjZS4gWzAuLi4gbnVtIGZhY2UgdmVydGljZXNdCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0RmFjZVZlcnRleFZhbHVlUmVmX2FycmF5KGZhY2UsIGZhY2VWZXJ0ZXgpIHsKICAgICAgICAgICAgY29uc3QgdmVydGV4ID0gdGhpcy5tZXNoLmdldEZhY2VWZXJ0ZXhJbmRleChmYWNlLCBmYWNlVmVydGV4KTsKICAgICAgICAgICAgaWYgKHZlcnRleCBpbiB0aGlzLnNwbGl0cyAmJiBmYWNlIGluIHRoaXMuc3BsaXRzW3ZlcnRleF0pIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLnNwbGl0VmFsdWVzW3RoaXMuc3BsaXRzW3ZlcnRleF1bZmFjZV1dOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0aGlzLmRhdGEuc3ViYXJyYXkodmVydGV4ICogdGhpcy5zdHJpZGUsICh2ZXJ0ZXggKyAxKSAqIHRoaXMuc3RyaWRlKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0cyB0aGUgdmFsdWUgb2YgYSBjb3JuZXIgdmVydGV4IG9mIGEgZmFjZS4KICAgICAgICAgKiBAcGFyYW0gZmFjZSAtIFRoZSBmYWNlIGluZGV4LgogICAgICAgICAqIEBwYXJhbSBmYWNlVmVydGV4IC0gVGhlIGluZGV4IG9mIHZlcnRleCB3aXRoaW4gdGhlIGZhY2UuIFswLi4uIG51bSBmYWNlIHZlcnRpY2VzXQogICAgICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBzZXRGYWNlVmVydGV4VmFsdWVfYXJyYXkoZmFjZSwgZmFjZVZlcnRleCwgdmFsdWUpIHsKICAgICAgICAgICAgY29uc3QgdmVydGV4ID0gdGhpcy5tZXNoLmdldEZhY2VWZXJ0ZXhJbmRleChmYWNlLCBmYWNlVmVydGV4KTsKICAgICAgICAgICAgdGhpcy5zZXRGYWNlVmVydGV4VmFsdWVfQnlWZXJ0ZXhJbmRleChmYWNlLCB2ZXJ0ZXgsIHZhbHVlKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIHNldEZhY2VWZXJ0ZXhWYWx1ZV9CeVZlcnRleEluZGV4IG1ldGhvZC4KICAgICAgICAgKiBAcGFyYW0gZmFjZSAtIFRoZSBmYWNlIGluZGV4LgogICAgICAgICAqIEBwYXJhbSB2ZXJ0ZXggLSBUaGUgdmVydGV4IHZhbHVlLgogICAgICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBzZXRGYWNlVmVydGV4VmFsdWVfQnlWZXJ0ZXhJbmRleChmYWNlLCB2ZXJ0ZXgsIHZhbHVlKSB7CiAgICAgICAgICAgIGNvbnN0IGN1cnJWYWx1ZSA9IHRoaXMuZGF0YS5zdWJhcnJheSh2ZXJ0ZXggKiB0aGlzLnN0cmlkZSwgKHZlcnRleCArIDEpICogdGhpcy5zdHJpZGUpOwogICAgICAgICAgICBpZiAoIWlzSW5pdGlhbGl6ZWQoY3VyclZhbHVlKSkgewogICAgICAgICAgICAgICAgLy8gdGhlIHZhbHVlIGlzIHVuaW5pdGlhbGl6ZWQuIEluaXRpYWxpemUgaXQuCiAgICAgICAgICAgICAgICBjdXJyVmFsdWUuc2V0KHZhbHVlKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChhcHByb3hFcXVhbChjdXJyVmFsdWUsIHZhbHVlKSkgOwogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIC8vIFRoZSBuZXcgdmFsdWUgaXMgZGlmZmVyZW50IGZyb20gdGhlIGV4aXN0aW5nIHZhbHVlCiAgICAgICAgICAgICAgICBpZiAodmVydGV4IGluIHRoaXMuc3BsaXRzKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gTm93IGNoZWNrIGlmIGFueSBleGlzdGluZyBzcGxpdHMgZm9yIHRoaXMgdmVydGV4IG1hdGNoIHRoZSB2YWx1ZSBiZWluZyBzZXQuCiAgICAgICAgICAgICAgICAgICAgLy8gaS5lLiBmb3IgZmFjZXMgYXJvdW5kIGEgdmVydGV4LCB0aGVyZSB3aWxsIG9mdGVuIGJlIGEgc2VhbSBhbG9uZyAyIGVkZ2VzCiAgICAgICAgICAgICAgICAgICAgLy8gd2hlcmUgdGhlIHZhbHVlcyBkaWZmZXIuIE9uIGVhY2ggc2lkZSBvZiB0aGUgc2VhbSwgYWxsIGZhY2VzIGNhbiB1c2UgdGhlIHNhbWUKICAgICAgICAgICAgICAgICAgICAvLyB2YWx1ZS4gV2Ugc2hvdWxkIHNlZSB0aGVuIG9ubHkgb25lIHNwbGl0IHZhbHVlIGZvciB0aGUgdmVydGV4LgogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZlcnRleFNwbGl0SWRzID0gdGhpcy5zcGxpdHNbdmVydGV4XTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZpZCBpbiB2ZXJ0ZXhTcGxpdElkcykgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGxpdElkID0gdmVydGV4U3BsaXRJZHNbZmlkXTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGFwcHJveEVxdWFsKHRoaXMuc3BsaXRWYWx1ZXNbc3BsaXRJZF0sIHZhbHVlKSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gcmUtdXNlIHRoaXMgc3BsaXQgdmFsdWUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRleFNwbGl0SWRzW2ZhY2VdID0gc3BsaXRJZDsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAvLyBJZiBhIHNwbGl0IGFscmVhZHkgZXhpc3RzIGZvciB0aGlzIGZhY2UsIHJlLXVzZSBpdC4KICAgICAgICAgICAgICAgICAgICBpZiAoZmFjZSBpbiB0aGlzLnNwbGl0c1t2ZXJ0ZXhdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc3BsaXRWYWx1ZXNbdGhpcy5zcGxpdHNbdmVydGV4XVtmYWNlXV0gPSB2YWx1ZTsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuc3BsaXRzW3ZlcnRleF0gPSB7fTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuc3BsaXRzW3ZlcnRleF1bZmFjZV0gPSB0aGlzLnNwbGl0VmFsdWVzLmxlbmd0aDsKICAgICAgICAgICAgICAgIHRoaXMuc3BsaXRWYWx1ZXMucHVzaCh2YWx1ZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIHNldFNwbGl0VmVydGV4VmFsdWUgbWV0aG9kLgogICAgICAgICAqIEBwYXJhbSB2ZXJ0ZXggLSBUaGUgdmVydGV4IHZhbHVlLgogICAgICAgICAqIEBwYXJhbSBmYWNlIC0gVGhlIGZhY2UgaW5kZXguCiAgICAgICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHNldFNwbGl0VmVydGV4VmFsdWVfYXJyYXkodmVydGV4LCBmYWNlLCB2YWx1ZSkgewogICAgICAgICAgICBpZiAoISh2ZXJ0ZXggaW4gdGhpcy5zcGxpdHMpKQogICAgICAgICAgICAgICAgdGhpcy5zcGxpdHNbdmVydGV4XSA9IHt9OwogICAgICAgICAgICBpZiAoZmFjZSBpbiB0aGlzLnNwbGl0c1t2ZXJ0ZXhdKSB7CiAgICAgICAgICAgICAgICBjb25zdCBjdXJyVmFsdWUgPSB0aGlzLnNwbGl0VmFsdWVzW3RoaXMuc3BsaXRzW3ZlcnRleF1bZmFjZV1dOwogICAgICAgICAgICAgICAgaWYgKGFwcHJveEVxdWFsKGN1cnJWYWx1ZSwgdmFsdWUpKQogICAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignRmFjZSBWZXJ0ZXggQWxyZWFkeSBTcGxpdCB3aXRoIGRpZmZlcmVudCB2YWx1ZScpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuc3BsaXRzW3ZlcnRleF1bZmFjZV0gPSB0aGlzLnNwbGl0VmFsdWVzLmxlbmd0aDsKICAgICAgICAgICAgdGhpcy5zcGxpdFZhbHVlcy5wdXNoKHZhbHVlKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIHNldFNwbGl0VmVydGV4VmFsdWVzIG1ldGhvZC4KICAgICAgICAgKiBAcGFyYW0gdmVydGV4IC0gVGhlIHZlcnRleCB2YWx1ZS4KICAgICAgICAgKiBAcGFyYW0gZmFjZUdyb3VwIC0gVGhlIGZhY2VHcm91cCB2YWx1ZS4KICAgICAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgc2V0U3BsaXRWZXJ0ZXhWYWx1ZXModmVydGV4LCBmYWNlR3JvdXAsIHZhbHVlKSB7CiAgICAgICAgICAgIGlmICghKHZlcnRleCBpbiB0aGlzLnNwbGl0cykpCiAgICAgICAgICAgICAgICB0aGlzLnNwbGl0c1t2ZXJ0ZXhdID0ge307CiAgICAgICAgICAgIGNvbnN0IHNwbGl0SW5kZXggPSB0aGlzLnNwbGl0VmFsdWVzLmxlbmd0aDsKICAgICAgICAgICAgdGhpcy5zcGxpdFZhbHVlcy5wdXNoKHZhbHVlKTsKICAgICAgICAgICAgZm9yIChjb25zdCBmYWNlIG9mIGZhY2VHcm91cCkgewogICAgICAgICAgICAgICAgLy8gaWYgKGZhY2UgaW4gdGhpcy5zcGxpdHNbdmVydGV4XSkgewogICAgICAgICAgICAgICAgLy8gICAgIGxldCBjdXJyVmFsdWUgPSB0aGlzLnNwbGl0VmFsdWVzW3RoaXMuc3BsaXRzW3ZlcnRleF1bZmFjZV1dOwogICAgICAgICAgICAgICAgLy8gICAgIGlmIChjdXJyVmFsdWUuYXBwcm94RXF1YWwodmFsdWUpKQogICAgICAgICAgICAgICAgLy8gICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAvLyAgICAgY29uc29sZS53YXJuKCJGYWNlIFZlcnRleCBBbHJlYWR5IFNwbGl0IHdpdGggZGlmZmVyZW50IHZhbHVlIik7CiAgICAgICAgICAgICAgICAvLyB9CiAgICAgICAgICAgICAgICB0aGlzLnNwbGl0c1t2ZXJ0ZXhdW2ZhY2VdID0gc3BsaXRJbmRleDsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBUaGUgZ2VuZXJhdGVTcGxpdFZhbHVlcyBtZXRob2QuCiAgICAgICAgICogQHBhcmFtIHNwbGl0SW5kaWNlcyAtIFRoZSBzcGxpdEluZGljZXMgdmFsdWUuCiAgICAgICAgICogQHBhcmFtIHNwbGl0Q291bnQgLSBUaGUgc3BsaXRDb3VudCB2YWx1ZS4KICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBnZW5lcmF0ZVNwbGl0VmFsdWVzKHNwbGl0SW5kaWNlcywgc3BsaXRDb3VudCkgewogICAgICAgICAgICBpZiAoc3BsaXRDb3VudCA9PSAwKQogICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGF0YTsKICAgICAgICAgICAgY29uc3QgbnVtVW5TcGxpdFZhbHVlcyA9IHRoaXMuZ2V0Q291bnQoKTsKICAgICAgICAgICAgY29uc3QgZGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoKG51bVVuU3BsaXRWYWx1ZXMgKyBzcGxpdENvdW50KSAqIHRoaXMuc3RyaWRlKTsKICAgICAgICAgICAgZGF0YS5zZXQodGhpcy5kYXRhKTsKICAgICAgICAgICAgLy8gTm93IGR1cGxpY2F0ZSB0aGUgc3BsaXQgdmFsdWVzIHRvIGdlbmVyYXRlIGFuIGF0dHJpYnV0ZXMgYXJyYXkKICAgICAgICAgICAgLy8gdXNpbmcgdGhlIHNoYXJlZCBzcGxpdHMgYWNyb3NzIGFsbCBhdHRyaWJ1dGVzLgogICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgZ3VhcmQtZm9yLWluCiAgICAgICAgICAgIGZvciAoY29uc3QgdmVydGV4IGluIHNwbGl0SW5kaWNlcykgewogICAgICAgICAgICAgICAgY29uc3QgZmFjZXMgPSBzcGxpdEluZGljZXNbdmVydGV4XTsKICAgICAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBndWFyZC1mb3ItaW4KICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmFjZSBpbiBmYWNlcykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRndCA9IG51bVVuU3BsaXRWYWx1ZXMgKyBmYWNlc1tmYWNlXTsKICAgICAgICAgICAgICAgICAgICBpZiAodmVydGV4IGluIHRoaXMuc3BsaXRzICYmIGZhY2UgaW4gdGhpcy5zcGxpdHNbdmVydGV4XSkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGlzIGF0dHJpYnV0ZSBoYXMgYSBzcGxpdCB2YWx1ZSBpbiBpdHMgYXJyYXkuCiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdlIG11c3QgdXNlIHRoYXQgdmFsdWUuLi4KICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3JjID0gdGhpcy5zcGxpdHNbdmVydGV4XVtmYWNlXTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zcGxpdFZhbHVlc1tzcmNdLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVt0Z3QgKiB0aGlzLnN0cmlkZSArIGluZGV4XSA9IHZhbHVlOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcHkgZWFjaCBzY2FsYXIgdmFsdWUgdG8gdGhlIG5ldyBwbGFjZSBpbiB0aGUgYXJyYXkuCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNyYyA9IHBhcnNlSW50KHZlcnRleCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGUgPSAwOyBlIDwgdGhpcy5zdHJpZGU7IGUrKykgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVt0Z3QgKiB0aGlzLnN0cmlkZSArIGVdID0gdGhpcy5kYXRhW3NyYyAqIHRoaXMuc3RyaWRlICsgZV07CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGRhdGE7CiAgICAgICAgfQogICAgICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgICAvLyBQZXJzaXN0ZW5jZQogICAgICAgIC8qKgogICAgICAgICAqIFRoZSB0b0pTT04gbWV0aG9kIGVuY29kZXMgdGhpcyB0eXBlIGFzIGEganNvbiBvYmplY3QgZm9yIHBlcnNpc3RlbmNlLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGNvbnRleHQgLSBUaGUgY29udGV4dCB2YWx1ZS4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUganNvbiBvYmplY3QuCiAgICAgICAgICovCiAgICAgICAgdG9KU09OKGNvbnRleHQpIHsKICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgIGRhdGE6IHRoaXMuZGF0YSwKICAgICAgICAgICAgICAgIGRhdGFUeXBlOiB0aGlzLmRhdGFUeXBlTmFtZSwKICAgICAgICAgICAgICAgIGxlbmd0aDogdGhpcy5kYXRhLmxlbmd0aCAvIHRoaXMuc3RyaWRlLAogICAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBUaGUgZnJvbUpTT04gbWV0aG9kIGRlY29kZXMgYSBqc29uIG9iamVjdCBmb3IgdGhpcyB0eXBlLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGogLSBUaGUganNvbiBvYmplY3QgdGhpcyBpdGVtIG11c3QgZGVjb2RlLgogICAgICAgICAqLwogICAgICAgIGZyb21KU09OKGopIHsKICAgICAgICAgICAgY29uc3QgZGF0YSA9IGouZGF0YS5tYXAoKGRhdGFFbGVtZW50KSA9PiBNYXRoRnVuY3Rpb25zLmlzTnVtZXJpYyhkYXRhRWxlbWVudCkgPyBkYXRhRWxlbWVudCA6IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSk7CiAgICAgICAgICAgIHRoaXMuZGF0YSA9IEZsb2F0MzJBcnJheS5mcm9tKGRhdGEpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBUaGUgbG9hZFNwbGl0VmFsdWVzIG1ldGhvZC4KICAgICAgICAgKiBAcGFyYW0gcmVhZGVyIC0gVGhlIHJlYWRlciB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBsb2FkU3BsaXRWYWx1ZXMocmVhZGVyKSB7CiAgICAgICAgICAgIGNvbnN0IHNwbGl0SW5kaWNlcyA9IHJlYWRlci5sb2FkVUludDMyQXJyYXkoKTsKICAgICAgICAgICAgaWYgKHNwbGl0SW5kaWNlcy5sZW5ndGggPT0gMCkKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgbGV0IG9mZnNldCA9IDA7CiAgICAgICAgICAgIGxldCBudW1TcGxpdFZhbHVlcyA9IDA7CiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7CiAgICAgICAgICAgICAgICBjb25zdCB2ZXJ0ZXhJZCA9IHNwbGl0SW5kaWNlc1tvZmZzZXQrK107CiAgICAgICAgICAgICAgICBjb25zdCBudW1TcGxpdHMgPSBzcGxpdEluZGljZXNbb2Zmc2V0KytdOwogICAgICAgICAgICAgICAgY29uc3Qgc3BsaXRzID0ge307CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVNwbGl0czsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFjZUlkID0gc3BsaXRJbmRpY2VzW29mZnNldCsrXTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzcGxpdElkID0gc3BsaXRJbmRpY2VzW29mZnNldCsrXTsKICAgICAgICAgICAgICAgICAgICBzcGxpdHNbZmFjZUlkXSA9IHNwbGl0SWQ7CiAgICAgICAgICAgICAgICAgICAgaWYgKHNwbGl0SWQgPj0gbnVtU3BsaXRWYWx1ZXMpCiAgICAgICAgICAgICAgICAgICAgICAgIG51bVNwbGl0VmFsdWVzID0gc3BsaXRJZCArIDE7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLnNwbGl0c1t2ZXJ0ZXhJZF0gPSBzcGxpdHM7CiAgICAgICAgICAgICAgICBpZiAob2Zmc2V0ID49IHNwbGl0SW5kaWNlcy5sZW5ndGgpCiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgZGltID0gdGhpcy5zdHJpZGU7CiAgICAgICAgICAgIGNvbnN0IHNwbGl0VmFsdWVzID0gcmVhZGVyLmxvYWRGbG9hdDMyQXJyYXkobnVtU3BsaXRWYWx1ZXMgKiBkaW0pOwogICAgICAgICAgICB0aGlzLnNwbGl0VmFsdWVzID0gW107CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtU3BsaXRWYWx1ZXM7IGkrKykgewogICAgICAgICAgICAgICAgY29uc3QgdmFsID0gc3BsaXRWYWx1ZXMuc2xpY2UoaSAqIGRpbSwgaSAqIGRpbSArIGRpbSk7CiAgICAgICAgICAgICAgICB0aGlzLnNwbGl0VmFsdWVzLnB1c2godmFsKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSBzdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgdGhlIG9iamVjdCdzIHN0YXRlLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgdG9TdHJpbmcoKSB7CiAgICAgICAgICAgIHJldHVybiBKU09OLnN0cmluZ2lmeSh0aGlzLnRvSlNPTigpLCBudWxsLCAyKTsKICAgICAgICB9CiAgICAgICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgIC8vIE1lbW9yeQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgdmVydGV4IGF0dHJpYnV0ZXMgYnVmZmVycyBhbmQgaXRzIGNvdW50LgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2VuQnVmZmVyKCkgewogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgdmFsdWVzOiB0aGlzLmRhdGEsCiAgICAgICAgICAgICAgICBjb3VudDogdGhpcy5nZXRDb3VudCgpLAogICAgICAgICAgICAgICAgZGF0YVR5cGU6IHRoaXMuZGF0YVR5cGVOYW1lLAogICAgICAgICAgICAgICAgbm9ybWFsaXplZDogdGhpcy5ub3JtYWxpemVkLAogICAgICAgICAgICB9OwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIENsYXNzIHJlcHJlc2VudGluZyBhbiBhdHRyaWJ1dGUuCiAgICAgKi8KICAgIGNsYXNzIFZlYzNBdHRyaWJ1dGUgZXh0ZW5kcyBBdHRyaWJ1dGUgewogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZSBhIFZlYzJBdHRyaWJ1dGUuCiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgICAgIHN1cGVyKCdWZWMzJywgMyk7CiAgICAgICAgICAgIHRoaXMubm9ybWFsaXplZCA9IGZhbHNlOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSBWZWMzIHZhbHVlIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguCiAgICAgICAgICoKICAgICAgICAgKiA+IE5vdGU6ICdSZWYnIG1lYW5zIHRoYXQgdGhlIHZhbHVlIGNvbnRhaW5zIGEgcmVmZXJlbmNlIHRvIHRoZSBkYXRhIGluIHRoZSBhdHRyaWJ1dGUuCiAgICAgICAgICogPiBUaGUgY29tcG9uZW50cyBvZiB0aGUgdmFsdWUgY2FuIGJlIGNoYW5nZWQgY2F1c2luZyB0aGUgYXR0cmlidXRlcyBkYXRhIGlzIGNoYW5nZWQuCiAgICAgICAgICogPiBObyBuZWVkIHRvIGNhbGwgJ3NldFZhbHVlJy4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBpbmRleCAtIFRoZSBpbmRleCB2YWx1ZS4KICAgICAgICAgKiBAcmV0dXJucyBWZWMzIC0gVGhlIHZhbHVlIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguCiAgICAgICAgICovCiAgICAgICAgZ2V0VmFsdWVSZWYoaW5kZXgpIHsKICAgICAgICAgICAgaWYgKGluZGV4ID49IHRoaXMuZGF0YS5sZW5ndGggLyB0aGlzLnN0cmlkZSkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB2ZXJ0ZXggaW5kZXg6JyArIGluZGV4ICsgJy4gTnVtIFZlcnRpY2VzOicgKyB0aGlzLmRhdGEubGVuZ3RoIC8gMyk7CiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IGluZGV4ICogdGhpcy5zdHJpZGU7CiAgICAgICAgICAgIGNvbnN0IHZhbHVlRGF0YSA9IHRoaXMuZGF0YS5zdWJhcnJheShvZmZzZXQsIG9mZnNldCArIHRoaXMuc3RyaWRlKTsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMzKHZhbHVlRGF0YSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgYSBjb3B5IG9mIHRoZSBWZWMzIHZhbHVlIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gaW5kZXggLSBUaGUgaW5kZXggdmFsdWUuCiAgICAgICAgICogQHJldHVybiBWZWMzIC0gVGhlIHZhbHVlIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguCiAgICAgICAgICovCiAgICAgICAgZ2V0VmFsdWUoaW5kZXgpIHsKICAgICAgICAgICAgaWYgKGluZGV4ID49IHRoaXMuZGF0YS5sZW5ndGggLyB0aGlzLnN0cmlkZSkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB2ZXJ0ZXggaW5kZXg6JyArIGluZGV4ICsgJy4gTnVtIFZlcnRpY2VzOicgKyB0aGlzLmRhdGEubGVuZ3RoIC8gMyk7CiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IGluZGV4ICogdGhpcy5zdHJpZGU7CiAgICAgICAgICAgIGNvbnN0IHZhbHVlRGF0YSA9IHRoaXMuZGF0YS5zbGljZShvZmZzZXQsIG9mZnNldCArIHRoaXMuc3RyaWRlKTsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMzKHZhbHVlRGF0YSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHMgVmVjMyBhdCB0aGUgc3BlY2lmaWVkIGluZGV4LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGluZGV4IC0gVGhlIGluZGV4IHZhbHVlLgogICAgICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSBwYXJhbS4KICAgICAgICAgKi8KICAgICAgICBzZXRWYWx1ZShpbmRleCwgdmFsdWUpIHsKICAgICAgICAgICAgaWYgKGluZGV4ID49IHRoaXMuZGF0YS5sZW5ndGggLyB0aGlzLnN0cmlkZSkKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCB2ZXJ0ZXggaW5kZXg6JyArIGluZGV4ICsgJy4gTnVtIFZlcnRpY2VzOicgKyB0aGlzLmRhdGEubGVuZ3RoIC8gMyk7CiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IGluZGV4ICogdGhpcy5zdHJpZGU7CiAgICAgICAgICAgIHRoaXMuZGF0YS5zZXQodmFsdWUuYXNBcnJheSgpLCBvZmZzZXQpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBHZXRzIHRoZSB2YWx1ZSBvZiBhIGNvcm5lciB2ZXJ0ZXggb2YgYSBmYWNlLgogICAgICAgICAqID4gTm90ZTogJ1JlZicgbWVhbnMgdGhhdCB0aGUgdmFsdWUgY29udGFpbnMgYSByZWZlcmVuY2UgdG8gdGhlIGRhdGEgaW4gdGhlIGF0dHJpYnV0ZS4KICAgICAgICAgKiA+IFRoZSBjb21wb25lbnRzIG9mIHRoZSB2YWx1ZSBjYW4gYmUgY2hhbmdlZCBjYXVzaW5nIHRoZSBhdHRyaWJ1dGVzIGRhdGEgaXMgY2hhbmdlZC4KICAgICAgICAgKiA+IE5vIG5lZWQgdG8gY2FsbCAnc2V0RmFjZVZlcnRleFZhbHVlJy4KICAgICAgICAgKiBAcGFyYW0gZmFjZSAtIFRoZSBmYWNlIGluZGV4LgogICAgICAgICAqIEBwYXJhbSBmYWNlVmVydGV4IC0gVGhlIGluZGV4IG9mIHZlcnRleCB3aXRoaW4gdGhlIGZhY2UuIFswLi4uIG51bSBmYWNlIHZlcnRpY2VzXQogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGdldEZhY2VWZXJ0ZXhWYWx1ZVJlZihmYWNlLCBmYWNlVmVydGV4KSB7CiAgICAgICAgICAgIGNvbnN0IGFycmF5ID0gdGhpcy5nZXRGYWNlVmVydGV4VmFsdWVSZWZfYXJyYXkoZmFjZSwgZmFjZVZlcnRleCk7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjMyhhcnJheSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHMgdGhlIHZhbHVlIG9mIGEgY29ybmVyIHZlcnRleCBvZiBhIGZhY2UuCiAgICAgICAgICogQHBhcmFtIGZhY2UgLSBUaGUgZmFjZSBpbmRleC4KICAgICAgICAgKiBAcGFyYW0gZmFjZVZlcnRleCAtIFRoZSBpbmRleCBvZiB2ZXJ0ZXggd2l0aGluIHRoZSBmYWNlLiBbMC4uLiBudW0gZmFjZSB2ZXJ0aWNlc10KICAgICAgICAgKiBAcGFyYW0gdmFsdWUgLSBUaGUgdmFsdWUgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgc2V0RmFjZVZlcnRleFZhbHVlKGZhY2UsIGZhY2VWZXJ0ZXgsIHZhbHVlKSB7CiAgICAgICAgICAgIHRoaXMuc2V0RmFjZVZlcnRleFZhbHVlX2FycmF5KGZhY2UsIGZhY2VWZXJ0ZXgsIHZhbHVlLmFzQXJyYXkoKSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFRoZSBzZXRTcGxpdFZlcnRleFZhbHVlIG1ldGhvZC4KICAgICAgICAgKiBAcGFyYW0gdmVydGV4IC0gVGhlIHZlcnRleCB2YWx1ZS4KICAgICAgICAgKiBAcGFyYW0gZmFjZSAtIFRoZSBmYWNlIGluZGV4LgogICAgICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBzZXRTcGxpdFZlcnRleFZhbHVlKHZlcnRleCwgZmFjZSwgdmFsdWUpIHsKICAgICAgICAgICAgdGhpcy5zZXRTcGxpdFZlcnRleFZhbHVlX2FycmF5KHZlcnRleCwgZmFjZSwgdmFsdWUuYXNBcnJheSgpKTsKICAgICAgICB9CiAgICB9CiAgICBSZWdpc3RyeS5yZWdpc3RlcignVmVjM0F0dHJpYnV0ZScsIFZlYzNBdHRyaWJ1dGUpOwoKICAgIC8qKgogICAgICogQ2xhc3MgcmVwcmVzZW50aW5nIGFuIGF0dHJpYnV0ZS4KICAgICAqLwogICAgY2xhc3MgVmVjMkF0dHJpYnV0ZSBleHRlbmRzIEF0dHJpYnV0ZSB7CiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlIGEgVmVjMkF0dHJpYnV0ZS4KICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgICAgICAgc3VwZXIoJ1ZlYzInLCAyKTsKICAgICAgICAgICAgdGhpcy5ub3JtYWxpemVkID0gZmFsc2U7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgdGhlIFZlYzIgdmFsdWUgYXQgdGhlIHNwZWNpZmllZCBpbmRleC4KICAgICAgICAgKgogICAgICAgICAqID4gTm90ZTogJ1JlZicgbWVhbnMgdGhhdCB0aGUgdmFsdWUgY29udGFpbnMgYSByZWZlcmVuY2UgdG8gdGhlIGRhdGEgaW4gdGhlIGF0dHJpYnV0ZS4KICAgICAgICAgKiA+IFRoZSBjb21wb25lbnRzIG9mIHRoZSB2YWx1ZSBjYW4gYmUgY2hhbmdlZCBjYXVzaW5nIHRoZSBhdHRyaWJ1dGVzIGRhdGEgaXMgY2hhbmdlZC4KICAgICAgICAgKiA+IE5vIG5lZWQgdG8gY2FsbCAnc2V0VmFsdWUnLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGluZGV4IC0gVGhlIGluZGV4IHZhbHVlLgogICAgICAgICAqIEByZXR1cm5zIFZlYzIgLSBUaGUgdmFsdWUgYXQgdGhlIHNwZWNpZmllZCBpbmRleC4KICAgICAgICAgKi8KICAgICAgICBnZXRWYWx1ZVJlZihpbmRleCkgewogICAgICAgICAgICBpZiAoaW5kZXggPj0gdGhpcy5kYXRhLmxlbmd0aCAvIHRoaXMuc3RyaWRlKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHZlcnRleCBpbmRleDonICsgaW5kZXggKyAnLiBOdW0gVmVydGljZXM6JyArIHRoaXMuZGF0YS5sZW5ndGggLyAzKTsKICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gaW5kZXggKiB0aGlzLnN0cmlkZTsKICAgICAgICAgICAgY29uc3QgdmFsdWVEYXRhID0gdGhpcy5kYXRhLnN1YmFycmF5KG9mZnNldCwgb2Zmc2V0ICsgdGhpcy5zdHJpZGUpOwogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzIodmFsdWVEYXRhKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyB0aGUgVmVjMiBmcm9tIHRoZSBzcGVjaWZpZWQgaW5kZXguCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gaW5kZXggLSBUaGUgaW5kZXggdmFsdWUuCiAgICAgICAgICogQHJldHVybiBWZWMyIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBnZXRWYWx1ZShpbmRleCkgewogICAgICAgICAgICBpZiAoaW5kZXggPj0gdGhpcy5kYXRhLmxlbmd0aCAvIHRoaXMuc3RyaWRlKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHZlcnRleCBpbmRleDonICsgaW5kZXggKyAnLiBOdW0gVmVydGljZXM6JyArIHRoaXMuZGF0YS5sZW5ndGggLyAzKTsKICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gaW5kZXggKiB0aGlzLnN0cmlkZTsKICAgICAgICAgICAgY29uc3QgdmFsdWVEYXRhID0gdGhpcy5kYXRhLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgdGhpcy5zdHJpZGUpOwogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzIodmFsdWVEYXRhKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0cyBWZWMyIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gaW5kZXggLSBUaGUgaW5kZXggdmFsdWUuCiAgICAgICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHBhcmFtLgogICAgICAgICAqLwogICAgICAgIHNldFZhbHVlKGluZGV4LCB2YWx1ZSkgewogICAgICAgICAgICBpZiAoaW5kZXggPj0gdGhpcy5kYXRhLmxlbmd0aCAvIHRoaXMuc3RyaWRlKQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHZlcnRleCBpbmRleDonICsgaW5kZXggKyAnLiBOdW0gVmVydGljZXM6JyArIHRoaXMuZGF0YS5sZW5ndGggLyAzKTsKICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gaW5kZXggKiB0aGlzLnN0cmlkZTsKICAgICAgICAgICAgdGhpcy5kYXRhLnNldCh2YWx1ZS5hc0FycmF5KCksIG9mZnNldCk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEdldHMgdGhlIHZhbHVlIG9mIGEgY29ybmVyIHZlcnRleCBvZiBhIGZhY2UuCiAgICAgICAgICogPiBOb3RlOiAnUmVmJyBtZWFucyB0aGF0IHRoZSB2YWx1ZSBjb250YWlucyBhIHJlZmVyZW5jZSB0byB0aGUgZGF0YSBpbiB0aGUgYXR0cmlidXRlLgogICAgICAgICAqID4gVGhlIGNvbXBvbmVudHMgb2YgdGhlIHZhbHVlIGNhbiBiZSBjaGFuZ2VkIGNhdXNpbmcgdGhlIGF0dHJpYnV0ZXMgZGF0YSBpcyBjaGFuZ2VkLgogICAgICAgICAqID4gTm8gbmVlZCB0byBjYWxsICdzZXRGYWNlVmVydGV4VmFsdWUnLgogICAgICAgICAqIEBwYXJhbSBmYWNlIC0gVGhlIGZhY2UgaW5kZXguCiAgICAgICAgICogQHBhcmFtIGZhY2VWZXJ0ZXggLSBUaGUgaW5kZXggb2YgdmVydGV4IHdpdGhpbiB0aGUgZmFjZS4gWzAuLi4gbnVtIGZhY2UgdmVydGljZXNdCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0RmFjZVZlcnRleFZhbHVlUmVmKGZhY2UsIGZhY2VWZXJ0ZXgpIHsKICAgICAgICAgICAgY29uc3QgYXJyYXkgPSB0aGlzLmdldEZhY2VWZXJ0ZXhWYWx1ZVJlZl9hcnJheShmYWNlLCBmYWNlVmVydGV4KTsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMyKGFycmF5KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0cyB0aGUgdmFsdWUgb2YgYSBjb3JuZXIgdmVydGV4IG9mIGEgZmFjZS4KICAgICAgICAgKiBAcGFyYW0gZmFjZSAtIFRoZSBmYWNlIGluZGV4LgogICAgICAgICAqIEBwYXJhbSBmYWNlVmVydGV4IC0gVGhlIGluZGV4IG9mIHZlcnRleCB3aXRoaW4gdGhlIGZhY2UuIFswLi4uIG51bSBmYWNlIHZlcnRpY2VzXQogICAgICAgICAqIEBwYXJhbSB2YWx1ZSAtIFRoZSB2YWx1ZSB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBzZXRGYWNlVmVydGV4VmFsdWUoZmFjZSwgZmFjZVZlcnRleCwgdmFsdWUpIHsKICAgICAgICAgICAgdGhpcy5zZXRGYWNlVmVydGV4VmFsdWVfYXJyYXkoZmFjZSwgZmFjZVZlcnRleCwgdmFsdWUuYXNBcnJheSgpKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIHNldFNwbGl0VmVydGV4VmFsdWUgbWV0aG9kLgogICAgICAgICAqIEBwYXJhbSB2ZXJ0ZXggLSBUaGUgdmVydGV4IHZhbHVlLgogICAgICAgICAqIEBwYXJhbSBmYWNlIC0gVGhlIGZhY2UgaW5kZXguCiAgICAgICAgICogQHBhcmFtIHZhbHVlIC0gVGhlIHZhbHVlIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHNldFNwbGl0VmVydGV4VmFsdWUodmVydGV4LCBmYWNlLCB2YWx1ZSkgewogICAgICAgICAgICB0aGlzLnNldFNwbGl0VmVydGV4VmFsdWVfYXJyYXkodmVydGV4LCBmYWNlLCB2YWx1ZS5hc0FycmF5KCkpOwogICAgICAgIH0KICAgIH0KICAgIFJlZ2lzdHJ5LnJlZ2lzdGVyKCdWZWMyQXR0cmlidXRlJywgVmVjMkF0dHJpYnV0ZSk7CgogICAgLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueSAqLwogICAgY29uc3QgcGFyc2U4Qml0UG9zaXRpb25zQXJyYXkgPSAocmFuZ2UsIG9mZnNldCwgc2NsVmVjLCBwb3NpdGlvbnNfcXVhbnRpemVkLCBwb3NpdGlvbnNBdHRyKSA9PiB7CiAgICAgICAgZm9yIChsZXQgaSA9IHJhbmdlWzBdOyBpIDwgcmFuZ2VbMV07IGkrKykgewogICAgICAgICAgICBjb25zdCBwb3MgPSBuZXcgVmVjMyhwb3NpdGlvbnNfcXVhbnRpemVkW2kgKiAzICsgMF0gLyAyNTUuMCwgcG9zaXRpb25zX3F1YW50aXplZFtpICogMyArIDFdIC8gMjU1LjAsIHBvc2l0aW9uc19xdWFudGl6ZWRbaSAqIDMgKyAyXSAvIDI1NS4wKTsKICAgICAgICAgICAgcG9zLm11bHRpcGx5SW5QbGFjZShzY2xWZWMpOwogICAgICAgICAgICBwb3MuYWRkSW5QbGFjZShvZmZzZXQpOwogICAgICAgICAgICBwb3NpdGlvbnNBdHRyLnNldFZhbHVlKGksIHBvcyk7CiAgICAgICAgfQogICAgfTsKICAgIGNvbnN0IHBhcnNlMTZCaXRQb3NpdGlvbnNBcnJheSA9IChyYW5nZSwgb2Zmc2V0LCBzY2xWZWMsIHBvc2l0aW9uc19xdWFudGl6ZWQsIHBvc2l0aW9uc0F0dHIpID0+IHsKICAgICAgICBmb3IgKGxldCBpID0gcmFuZ2VbMF07IGkgPCByYW5nZVsxXTsgaSsrKSB7CiAgICAgICAgICAgIGNvbnN0IHBvcyA9IG5ldyBWZWMzKHBvc2l0aW9uc19xdWFudGl6ZWRbaSAqIDMgKyAwXSAvIDY1NTM1LjAsIHBvc2l0aW9uc19xdWFudGl6ZWRbaSAqIDMgKyAxXSAvIDY1NTM1LjAsIHBvc2l0aW9uc19xdWFudGl6ZWRbaSAqIDMgKyAyXSAvIDY1NTM1LjApOwogICAgICAgICAgICBwb3MubXVsdGlwbHlJblBsYWNlKHNjbFZlYyk7CiAgICAgICAgICAgIHBvcy5hZGRJblBsYWNlKG9mZnNldCk7CiAgICAgICAgICAgIHBvc2l0aW9uc0F0dHIuc2V0VmFsdWUoaSwgcG9zKTsKICAgICAgICB9CiAgICB9OwogICAgY29uc3QgcGFyc2U4Qml0Tm9ybWFsc0FycmF5ID0gKHJhbmdlLCBvZmZzZXQsIHNjbFZlYywgbm9ybWFsc19xdWFudGl6ZWQsIG5vcm1hbHNBdHRyKSA9PiB7CiAgICAgICAgaWYgKHNjbFZlYy5pc051bGwoKSkKICAgICAgICAgICAgc2NsVmVjLnNldCgxLCAxLCAxKTsKICAgICAgICBmb3IgKGxldCBpID0gcmFuZ2VbMF07IGkgPCByYW5nZVsxXTsgaSsrKSB7CiAgICAgICAgICAgIGNvbnN0IG5vcm1hbCA9IG5ldyBWZWMzKG5vcm1hbHNfcXVhbnRpemVkW2kgKiAzICsgMF0gLyAyNTUuMCwgbm9ybWFsc19xdWFudGl6ZWRbaSAqIDMgKyAxXSAvIDI1NS4wLCBub3JtYWxzX3F1YW50aXplZFtpICogMyArIDJdIC8gMjU1LjApOwogICAgICAgICAgICBub3JtYWwubXVsdGlwbHlJblBsYWNlKHNjbFZlYyk7CiAgICAgICAgICAgIG5vcm1hbC5hZGRJblBsYWNlKG9mZnNldCk7CiAgICAgICAgICAgIG5vcm1hbC5ub3JtYWxpemVJblBsYWNlKCk7CiAgICAgICAgICAgIG5vcm1hbHNBdHRyLnNldFZhbHVlKGksIG5vcm1hbCk7CiAgICAgICAgfQogICAgfTsKICAgIGNvbnN0IHBhcnNlOEJpdFRleHR1cmVDb29yZHNBcnJheSA9IChyYW5nZSwgb2Zmc2V0LCBzY2xWZWMsIHRleENvb3Jkc19xdWFudGl6ZWQsIHRleENvb3Jkc0F0dHIpID0+IHsKICAgICAgICAvLyBpZiAoc2NsVmVjLmlzTnVsbCgpKQogICAgICAgIC8vICAgICBzY2xWZWMuc2V0KDEsIDEsIDEpOwogICAgICAgIGZvciAobGV0IGkgPSByYW5nZVswXTsgaSA8IHJhbmdlWzFdOyBpKyspIHsKICAgICAgICAgICAgY29uc3QgdGV4dHVyZUNvb3JkID0gbmV3IFZlYzIodGV4Q29vcmRzX3F1YW50aXplZFtpICogMiArIDBdIC8gMjU1LjAsIHRleENvb3Jkc19xdWFudGl6ZWRbaSAqIDIgKyAxXSAvIDI1NS4wKTsKICAgICAgICAgICAgdGV4dHVyZUNvb3JkLm11bHRpcGx5SW5QbGFjZShzY2xWZWMpOwogICAgICAgICAgICB0ZXh0dXJlQ29vcmQuYWRkSW5QbGFjZShvZmZzZXQpOwogICAgICAgICAgICB0ZXhDb29yZHNBdHRyLnNldFZhbHVlKGksIHRleHR1cmVDb29yZCk7CiAgICAgICAgfQogICAgfTsKICAgIGNvbnN0IHBhcnNlMTZCaXRUZXh0dXJlQ29vcmRzQXJyYXkgPSAocmFuZ2UsIG9mZnNldCwgc2NsVmVjLCB0ZXhDb29yZHNfcXVhbnRpemVkLCB0ZXhDb29yZHNBdHRyKSA9PiB7CiAgICAgICAgLy8gaWYgKHNjbFZlYy5pc051bGwoKSkKICAgICAgICAvLyAgICAgc2NsVmVjLnNldCgxLCAxLCAxKTsKICAgICAgICBmb3IgKGxldCBpID0gcmFuZ2VbMF07IGkgPCByYW5nZVsxXTsgaSsrKSB7CiAgICAgICAgICAgIGNvbnN0IHRleHR1cmVDb29yZCA9IG5ldyBWZWMyKHRleENvb3Jkc19xdWFudGl6ZWRbaSAqIDIgKyAwXSAvIDY1NTM1LjAsIHRleENvb3Jkc19xdWFudGl6ZWRbaSAqIDIgKyAxXSAvIDY1NTM1LjApOwogICAgICAgICAgICB0ZXh0dXJlQ29vcmQubXVsdGlwbHlJblBsYWNlKHNjbFZlYyk7CiAgICAgICAgICAgIHRleHR1cmVDb29yZC5hZGRJblBsYWNlKG9mZnNldCk7CiAgICAgICAgICAgIHRleENvb3Jkc0F0dHIuc2V0VmFsdWUoaSwgdGV4dHVyZUNvb3JkKTsKICAgICAgICB9CiAgICB9OwogICAgLyoqCiAgICAgKiBSZXByZXNlbnRzIGEgYmFzZSBjbGFzcyBmb3IgM0QgZ2VvbWV0cnkgaXRlbXMuCiAgICAgKgogICAgICogKipFdmVudHMqKgogICAgICogKiAqKmJvdW5kaW5nQm94Q2hhbmdlZDoqKiBUcmlnZ2VyZWQgd2hlbiB0aGUgYm91bmRpbmcgYm94IGNoYW5nZXMuCiAgICAgKiAqICoqZ2VvbURhdGFDaGFuZ2VkOioqIEVtaXR0ZWQgd2hlbiB0aGUgZ2VvbWV0cnkgYXR0cmlidXRlcyBoYXZlIGNoYW5nZWQuIFRoZSB0b3BvbG9neSBkaWQgbm90IGNoYW5nZS4gVGhlIFJlbmRlcmVyIHdpbGwgdXBsb2FkIHRoZSBuZXcgYXR0cmlidXRlcyB0byB0aGUgR1BVLgogICAgICogKiAqKmdlb21EYXRhVG9wb2xvZ3lDaGFuZ2VkOioqIEVtaXR0ZWQgd2hlbiB0aGUgZ2VvbWV0cnkgYXR0cmlidXRlcyBhbmQgdG9wb2xvZ3kgaGF2ZSBjaGFuZ2VkLiAgVGhlIFJlbmRlcmVyIHdpbGwgdXBsb2FkIHRoZSBuZXcgYXR0cmlidXRlcyBhbmQgdG9wb2xvZ3kgdG8gdGhlIEdQVS4KICAgICAqCiAgICAgKiBAZXh0ZW5kcyBQYXJhbWV0ZXJPd25lcgogICAgICovCiAgICBjbGFzcyBCYXNlR2VvbSBleHRlbmRzIFBhcmFtZXRlck93bmVyIHsKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGUgYSBiYXNlIGdlb20uCiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgICAgIHN1cGVyKCk7CiAgICAgICAgICAgIHRoaXMuX19ib3VuZGluZ0JveCA9IG5ldyBCb3gzKCk7CiAgICAgICAgICAgIHRoaXMuX19ib3VuZGluZ0JveERpcnR5ID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5fX21ldGFEYXRhID0gbmV3IE1hcCgpOwogICAgICAgICAgICB0aGlzLl9fbmFtZSA9ICcnOwogICAgICAgICAgICB0aGlzLl9fbnVtVmVydGljZXMgPSAwOwogICAgICAgICAgICB0aGlzLl9fdmVydGV4QXR0cmlidXRlcyA9IG5ldyBNYXAoKTsKICAgICAgICAgICAgdGhpcy5kZWJ1Z0NvbG9yID0gbmV3IENvbG9yKDEsIDAsIDAsIDEpOwogICAgICAgICAgICB0aGlzLm5hbWUgPSAnJzsKICAgICAgICAgICAgdGhpcy5hZGRWZXJ0ZXhBdHRyaWJ1dGUoJ3Bvc2l0aW9ucycsIG5ldyBWZWMzQXR0cmlidXRlKCkpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBUaGUgY2xlYXIgbWV0aG9kLgogICAgICAgICAqLwogICAgICAgIGNsZWFyKCkgewogICAgICAgICAgICB0aGlzLnNldE51bVZlcnRpY2VzKDApOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBFc3RhYmxpc2hlcyBhIG5hbWUgZm9yIHRoZSBnZW9tZXRyeS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBuYW1lIC0gVGhlIGRlYnVnIG5hbWUgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgc2V0RGVidWdOYW1lKG5hbWUpIHsKICAgICAgICAgICAgdGhpcy5uYW1lID0gbmFtZTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQWRkcyBhIG5ldyB2ZXJ0ZXggYXR0cmlidXRlIHRvIHRoZSBnZW9tZXRyeS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIHZlcnRleCBhdHRyaWJ1dGUuCiAgICAgICAgICogQHBhcmFtIGRhdGFUeXBlIC0gVGhlIGRhdGFUeXBlIHZhbHVlLiAvLyBUT0RPOiBpcyBhbnkgb2sgdnMuIEF0dHJWYWx1ZSB8IG51bWJlci4gVW5zdXJlIGFib3V0IGhvdyBkYXRhVHlwZSBpcyB1c2VkCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYW4gYXR0cmlidXRlLgogICAgICAgICAqLwogICAgICAgIGFkZFZlcnRleEF0dHJpYnV0ZShuYW1lLCBhdHRyKSB7CiAgICAgICAgICAgIGF0dHIuc2V0Q291bnQodGhpcy5fX251bVZlcnRpY2VzKTsKICAgICAgICAgICAgdGhpcy5fX3ZlcnRleEF0dHJpYnV0ZXMuc2V0KG5hbWUsIGF0dHIpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDaGVja3MgaWYgdGhlIHRoZSBnZW9tZXRyeSBoYXMgYW4gYXR0cmlidXRlIHdpdGggdGhlIHNwZWNpZmllZCBuYW1lLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdmVydGV4IGF0dHJpYnV0ZS4KICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBoYXNWZXJ0ZXhBdHRyaWJ1dGUobmFtZSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX3ZlcnRleEF0dHJpYnV0ZXMuaGFzKG5hbWUpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHZlcnRleCBhdHRyaWJ1dGUgd2l0aCB0aGUgc3BlY2lmaWVkIG5hbWUuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSB2ZXJ0ZXggYXR0cmlidXRlLgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGdldFZlcnRleEF0dHJpYnV0ZShuYW1lKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fdmVydGV4QXR0cmlidXRlcy5nZXQobmFtZSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgYWxsIHZlcnRleCBhdHRyaWJ1dGVzIGluIGFuIG9iamVjdCB3aXRoIHRoZWlyIG5hbWVzLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0VmVydGV4QXR0cmlidXRlcygpIHsKICAgICAgICAgICAgY29uc3QgdmVydGV4QXR0cmlidXRlcyA9IHt9OwogICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIGF0dHJdIG9mIHRoaXMuX192ZXJ0ZXhBdHRyaWJ1dGVzLmVudHJpZXMoKSkKICAgICAgICAgICAgICAgIHZlcnRleEF0dHJpYnV0ZXNba2V5XSA9IGF0dHI7CiAgICAgICAgICAgIHJldHVybiB2ZXJ0ZXhBdHRyaWJ1dGVzOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zICdwb3NpdGlvbnMnIHZlcnRleCBhdHRyaWJ1dGUuCiAgICAgICAgICovCiAgICAgICAgZ2V0IHBvc2l0aW9ucygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX192ZXJ0ZXhBdHRyaWJ1dGVzLmdldCgncG9zaXRpb25zJyk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgdGhlIG51bWJlciBvZiB2ZXJ0ZXggYXR0cmlidXRlcy4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIG51bVZlcnRpY2VzKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX251bVZlcnRpY2VzOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgdmVydGV4IGF0dHJpYnV0ZXMuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBnZXROdW1WZXJ0aWNlcygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19udW1WZXJ0aWNlczsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0cyB0aGUgbnVtYmVyIG9mIHZlcnRpY2VzIHRoZSBnZW9tZXRyeSBoYXMuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gY291bnQgLSBUaGUgY291bnQgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgc2V0TnVtVmVydGljZXMoY291bnQpIHsKICAgICAgICAgICAgdGhpcy5fX251bVZlcnRpY2VzID0gY291bnQ7CiAgICAgICAgICAgIC8vIFJlc2l6ZXMgZWFjaCBvZiB0aGUgdmVydGV4IGF0dHJpYnV0ZXMgdG8gbWF0Y2ggdGhlIG5ldyBjb3VudC4KICAgICAgICAgICAgdGhpcy5fX3ZlcnRleEF0dHJpYnV0ZXMuZm9yRWFjaCgoYXR0cikgPT4gYXR0ci5zZXRDb3VudCh0aGlzLl9fbnVtVmVydGljZXMpKTsKICAgICAgICAgICAgdGhpcy5zZXRCb3VuZGluZ0JveERpcnR5KCk7CiAgICAgICAgfQogICAgICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgICAvLyBCb3VuZGluZ0JveAogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgdGhlIGJvdW5kaW5nIGJveCBmb3IgZ2VvbWV0cnkuCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0Qm91bmRpbmdCb3goKSB7CiAgICAgICAgICAgIGlmICh0aGlzLl9fYm91bmRpbmdCb3hEaXJ0eSkKICAgICAgICAgICAgICAgIHRoaXMudXBkYXRlQm91bmRpbmdCb3goKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19ib3VuZGluZ0JveDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIHNldEJvdW5kaW5nQm94RGlydHkgbWV0aG9kLgogICAgICAgICAqLwogICAgICAgIHNldEJvdW5kaW5nQm94RGlydHkoKSB7CiAgICAgICAgICAgIHRoaXMuX19ib3VuZGluZ0JveERpcnR5ID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5lbWl0KCdib3VuZGluZ0JveENoYW5nZWQnKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIHVwZGF0ZUJvdW5kaW5nQm94IG1ldGhvZC4KICAgICAgICAgKi8KICAgICAgICB1cGRhdGVCb3VuZGluZ0JveCgpIHsKICAgICAgICAgICAgY29uc3QgcG9zaXRpb25zID0gdGhpcy5wb3NpdGlvbnM7CiAgICAgICAgICAgIGNvbnN0IGJib3ggPSBuZXcgQm94MygpOwogICAgICAgICAgICBpZiAocG9zaXRpb25zKSB7CiAgICAgICAgICAgICAgICBjb25zdCBudW1WZXJ0cyA9IHBvc2l0aW9ucy5nZXRDb3VudCgpOwogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBudW1WZXJ0czsgaSsrKQogICAgICAgICAgICAgICAgICAgIGJib3guYWRkUG9pbnQocG9zaXRpb25zLmdldFZhbHVlUmVmKGkpKTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLl9fYm91bmRpbmdCb3ggPSBiYm94OwogICAgICAgICAgICB0aGlzLl9fYm91bmRpbmdCb3hEaXJ0eSA9IGZhbHNlOwogICAgICAgIH0KICAgICAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAgICAgLy8gTWV0YWRhdGEKICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIG1ldGFkYXRhIHZhbHVlIG9mIHRoZSBzcGVjaWZpZWQgbmFtZS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5IHZhbHVlLgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGdldE1ldGFkYXRhKGtleSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX21ldGFEYXRhLmdldChrZXkpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBWZXJpZmllcyBpZiBnZW9tZXRyeSdzIG1ldGFkYXRhIGNvbnRhaW5zIGEgdmFsdWUgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5IHZhbHVlLgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGhhc01ldGFkYXRhKGtleSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX21ldGFEYXRhLmhhcyhrZXkpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBTZXRzIG1ldGFkYXRhIHZhbHVlIHRvIHRoZSBnZW9tZXRyeS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5IHZhbHVlLgogICAgICAgICAqIEBwYXJhbSBtZXRhRGF0YSAtIFRoZSBtZXRhRGF0YSB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBzZXRNZXRhZGF0YShrZXksIG1ldGFEYXRhKSB7CiAgICAgICAgICAgIHRoaXMuX19tZXRhRGF0YS5zZXQoa2V5LCBtZXRhRGF0YSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJlbW92ZXMgbWV0YWRhdGEgdmFsdWUgZnJvbSB0aGUgZ2VvbWV0cnkgd2l0aCB0aGUgc3BlY2lmaWVkIGtleS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBrZXkgLSBUaGUga2V5IHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGRlbGV0ZU1ldGFkYXRhKGtleSkgewogICAgICAgICAgICB0aGlzLl9fbWV0YURhdGEuZGVsZXRlKGtleSk7CiAgICAgICAgfQogICAgICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgICAvLyBNZW1vcnkKICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHZlcnRleCBhdHRyaWJ1dGVzIGJ1ZmZlcnMgYW5kIGl0cyBjb3VudC4KICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBnZW5CdWZmZXJzKG9wdHMpIHsKICAgICAgICAgICAgY29uc3QgYXR0ckJ1ZmZlcnMgPSB7fTsKICAgICAgICAgICAgZm9yIChjb25zdCBbYXR0ck5hbWUsIGF0dHJdIG9mIHRoaXMuX192ZXJ0ZXhBdHRyaWJ1dGVzKSB7CiAgICAgICAgICAgICAgICBhdHRyQnVmZmVyc1thdHRyTmFtZV0gPSBhdHRyLmdlbkJ1ZmZlcigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBudW1WZXJ0aWNlczogdGhpcy5udW1WZXJ0aWNlcygpLAogICAgICAgICAgICAgICAgYXR0ckJ1ZmZlcnMsCiAgICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgICAvLyBQZXJzaXN0ZW5jZQogICAgICAgIC8qKgogICAgICAgICAqIFNldHMgc3RhdGUgb2YgY3VycmVudCBHZW9tZXRyeShJbmNsdWRpbmcgVmVydGljZXMgYW5kIEJvdW5kaW5nIEJveCkgdXNpbmcgYSBiaW5hcnkgcmVhZGVyIG9iamVjdC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgLSBUaGUgcmVhZGVyIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGxvYWRCYXNlR2VvbUJpbmFyeShyZWFkZXIsIGNvbnRleHQpIHsKICAgICAgICAgICAgdGhpcy5uYW1lID0gcmVhZGVyLmxvYWRTdHIoKTsKICAgICAgICAgICAgY29uc3QgZmxhZ3MgPSByZWFkZXIubG9hZFVJbnQ4KCk7CiAgICAgICAgICAgIHRoaXMuZGVidWdDb2xvciA9IHJlYWRlci5sb2FkUkdCRmxvYXQzMkNvbG9yKCk7CiAgICAgICAgICAgIGNvbnN0IG51bVZlcnRzID0gcmVhZGVyLmxvYWRVSW50MzIoKTsKICAgICAgICAgICAgdGhpcy5fX2JvdW5kaW5nQm94LnNldChyZWFkZXIubG9hZEZsb2F0MzJWZWMzKCksIHJlYWRlci5sb2FkRmxvYXQzMlZlYzMoKSk7CiAgICAgICAgICAgIHRoaXMuc2V0TnVtVmVydGljZXMobnVtVmVydHMpOwogICAgICAgICAgICBjb25zdCBwb3NpdGlvbnNBdHRyID0gdGhpcy5wb3NpdGlvbnM7CiAgICAgICAgICAgIGxldCBub3JtYWxzQXR0cjsKICAgICAgICAgICAgbGV0IHRleENvb3Jkc0F0dHI7CiAgICAgICAgICAgIGlmIChmbGFncyAmICgxIDw8IDEpKSB7CiAgICAgICAgICAgICAgICBub3JtYWxzQXR0ciA9IHRoaXMuZ2V0VmVydGV4QXR0cmlidXRlKCdub3JtYWxzJyk7CiAgICAgICAgICAgICAgICBpZiAoIW5vcm1hbHNBdHRyKSB7CiAgICAgICAgICAgICAgICAgICAgbm9ybWFsc0F0dHIgPSBuZXcgVmVjM0F0dHJpYnV0ZSgpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkVmVydGV4QXR0cmlidXRlKCdub3JtYWxzJywgbm9ybWFsc0F0dHIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChmbGFncyAmICgxIDw8IDIpKSB7CiAgICAgICAgICAgICAgICB0ZXhDb29yZHNBdHRyID0gdGhpcy5nZXRWZXJ0ZXhBdHRyaWJ1dGUoJ3RleENvb3JkcycpOwogICAgICAgICAgICAgICAgaWYgKCF0ZXhDb29yZHNBdHRyKSB7CiAgICAgICAgICAgICAgICAgICAgdGV4Q29vcmRzQXR0ciA9IG5ldyBWZWMyQXR0cmlidXRlKCk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRWZXJ0ZXhBdHRyaWJ1dGUoJ3RleENvb3JkcycsIHRleENvb3Jkc0F0dHIpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IG51bUNsdXN0ZXJzID0gcmVhZGVyLmxvYWRVSW50MzIoKTsKICAgICAgICAgICAgaWYgKG51bUNsdXN0ZXJzID09IDEpIHsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBib3gzID0gdGhpcy5fX2JvdW5kaW5nQm94OwogICAgICAgICAgICAgICAgICAgIC8vIEZyb20gMy45LjEsIHZlcnRleCBkYXRhIGlzIGEgbWl4IG9mIDE2Yml0IGFuZCA4IGJpdCBxdWFuaXRpemF0aW9uCiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQudmVyc2lvbnNbJ3plYS1lbmdpbmUnXS5jb21wYXJlKFszLCA5LCAxXSkgPj0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwb3NpdGlvbnNfcXVhbnRpemVkID0gcmVhZGVyLmxvYWRVSW50MTZBcnJheShudW1WZXJ0cyAqIDMpOwogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZTE2Qml0UG9zaXRpb25zQXJyYXkoWzAsIG51bVZlcnRzXSwgYm94My5wMCwgYm94My5kaWFnb25hbCgpLCBwb3NpdGlvbnNfcXVhbnRpemVkLCBwb3NpdGlvbnNBdHRyKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9uc19xdWFudGl6ZWQgPSByZWFkZXIubG9hZFVJbnQ4QXJyYXkobnVtVmVydHMgKiAzKTsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2U4Qml0UG9zaXRpb25zQXJyYXkoWzAsIG51bVZlcnRzXSwgYm94My5wMCwgYm94My5kaWFnb25hbCgpLCBwb3NpdGlvbnNfcXVhbnRpemVkLCBwb3NpdGlvbnNBdHRyKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAobm9ybWFsc0F0dHIpIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBib3gzID0gbmV3IEJveDMocmVhZGVyLmxvYWRGbG9hdDMyVmVjMygpLCByZWFkZXIubG9hZEZsb2F0MzJWZWMzKCkpOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vcm1hbHNfcXVhbnRpemVkID0gcmVhZGVyLmxvYWRVSW50OEFycmF5KG51bVZlcnRzICogMyk7CiAgICAgICAgICAgICAgICAgICAgcGFyc2U4Qml0Tm9ybWFsc0FycmF5KFswLCBudW1WZXJ0c10sIGJveDMucDAsIGJveDMuZGlhZ29uYWwoKSwgbm9ybWFsc19xdWFudGl6ZWQsIG5vcm1hbHNBdHRyKTsKICAgICAgICAgICAgICAgICAgICBub3JtYWxzQXR0ci5sb2FkU3BsaXRWYWx1ZXMocmVhZGVyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh0ZXhDb29yZHNBdHRyKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgYm94MiA9IG5ldyBCb3gyKHJlYWRlci5sb2FkRmxvYXQzMlZlYzIoKSwgcmVhZGVyLmxvYWRGbG9hdDMyVmVjMigpKTsKICAgICAgICAgICAgICAgICAgICAvLyBGcm9tIDMuOS4xLCB2ZXJ0ZXggZGF0YSBpcyBhIG1peCBvZiAxNmJpdCBhbmQgOCBiaXQgcXVhbml0aXphdGlvbgogICAgICAgICAgICAgICAgICAgIGlmIChjb250ZXh0LnZlcnNpb25zWyd6ZWEtZW5naW5lJ10uY29tcGFyZShbMywgOSwgMV0pID49IDApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4Q29vcmRzX3F1YW50aXplZCA9IHJlYWRlci5sb2FkVUludDE2QXJyYXkobnVtVmVydHMgKiAyKTsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2UxNkJpdFRleHR1cmVDb29yZHNBcnJheShbMCwgbnVtVmVydHNdLCBib3gyLnAwLCBib3gyLmRpYWdvbmFsKCksIHRleENvb3Jkc19xdWFudGl6ZWQsIHRleENvb3Jkc0F0dHIpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdGV4Q29vcmRzX3F1YW50aXplZCA9IHJlYWRlci5sb2FkVUludDhBcnJheShudW1WZXJ0cyAqIDIpOwogICAgICAgICAgICAgICAgICAgICAgICBwYXJzZThCaXRUZXh0dXJlQ29vcmRzQXJyYXkoWzAsIG51bVZlcnRzXSwgYm94Mi5wMCwgYm94Mi5kaWFnb25hbCgpLCB0ZXhDb29yZHNfcXVhbnRpemVkLCB0ZXhDb29yZHNBdHRyKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgdGV4Q29vcmRzQXR0ci5sb2FkU3BsaXRWYWx1ZXMocmVhZGVyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGNvbnN0IGNsdXN0ZXJzID0gW107CiAgICAgICAgICAgICAgICBsZXQgb2Zmc2V0ID0gMDsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtQ2x1c3RlcnM7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gcmVhZGVyLmxvYWRVSW50MzIoKTsKICAgICAgICAgICAgICAgICAgICBjb25zdCBjbHVzdGVyRGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgcmFuZ2U6IFtvZmZzZXQsIG9mZnNldCArIGNvdW50XSwKICAgICAgICAgICAgICAgICAgICAgICAgYmJveDogbmV3IEJveDMocmVhZGVyLmxvYWRGbG9hdDMyVmVjMygpLCByZWFkZXIubG9hZEZsb2F0MzJWZWMzKCkpLAogICAgICAgICAgICAgICAgICAgICAgICBub3JtYWxzUmFuZ2U6IG5ldyBCb3gzKCksCiAgICAgICAgICAgICAgICAgICAgICAgIHRleENvb3Jkc1JhbmdlOiBuZXcgQm94MigpLAogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgaWYgKG5vcm1hbHNBdHRyKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNsdXN0ZXJEYXRhLm5vcm1hbHNSYW5nZS5zZXQocmVhZGVyLmxvYWRGbG9hdDMyVmVjMygpLCByZWFkZXIubG9hZEZsb2F0MzJWZWMzKCkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAodGV4Q29vcmRzQXR0cikgewogICAgICAgICAgICAgICAgICAgICAgICBjbHVzdGVyRGF0YS50ZXhDb29yZHNSYW5nZS5zZXQocmVhZGVyLmxvYWRGbG9hdDMyVmVjMigpLCByZWFkZXIubG9hZEZsb2F0MzJWZWMyKCkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjbHVzdGVycy5wdXNoKGNsdXN0ZXJEYXRhKTsKICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gY291bnQ7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAvLyBGcm9tIDMuOS4xLCB2ZXJ0ZXggZGF0YSBpcyBhIG1peCBvZiAxNmJpdCBhbmQgOCBiaXQgcXVhbml0aXphdGlvbgogICAgICAgICAgICAgICAgbGV0IHBvc2l0aW9uc19xdWFudGl6ZWQ7CiAgICAgICAgICAgICAgICBpZiAoY29udGV4dC52ZXJzaW9uc1snemVhLWVuZ2luZSddLmNvbXBhcmUoWzMsIDksIDFdKSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb25zX3F1YW50aXplZCA9IHJlYWRlci5sb2FkVUludDE2QXJyYXkobnVtVmVydHMgKiAzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uc19xdWFudGl6ZWQgPSByZWFkZXIubG9hZFVJbnQ4QXJyYXkobnVtVmVydHMgKiAzKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGxldCBub3JtYWxzX3F1YW50aXplZCA9IG51bGw7CiAgICAgICAgICAgICAgICBsZXQgdGV4Q29vcmRzX3F1YW50aXplZCA9IG51bGw7CiAgICAgICAgICAgICAgICBpZiAobm9ybWFsc0F0dHIpIHsKICAgICAgICAgICAgICAgICAgICBub3JtYWxzX3F1YW50aXplZCA9IHJlYWRlci5sb2FkVUludDhBcnJheShudW1WZXJ0cyAqIDMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHRleENvb3Jkc0F0dHIpIHsKICAgICAgICAgICAgICAgICAgICB0ZXhDb29yZHNfcXVhbnRpemVkID0gcmVhZGVyLmxvYWRVSW50OEFycmF5KG51bVZlcnRzICogMik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNsdXN0ZXJzOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJveDMgPSBjbHVzdGVyc1tpXS5iYm94OwogICAgICAgICAgICAgICAgICAgICAgICAvLyBGcm9tIDMuOS4xLCB2ZXJ0ZXggZGF0YSBpcyBhIG1peCBvZiAxNmJpdCBhbmQgOCBiaXQgcXVhbml0aXphdGlvbgogICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGV4dC52ZXJzaW9uc1snemVhLWVuZ2luZSddLmNvbXBhcmUoWzMsIDksIDFdKSA+PSAwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZTE2Qml0UG9zaXRpb25zQXJyYXkoY2x1c3RlcnNbaV0ucmFuZ2UsIGJveDMucDAsIGJveDMuZGlhZ29uYWwoKSwgcG9zaXRpb25zX3F1YW50aXplZCwgcG9zaXRpb25zQXR0cik7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJzZThCaXRQb3NpdGlvbnNBcnJheShjbHVzdGVyc1tpXS5yYW5nZSwgYm94My5wMCwgYm94My5kaWFnb25hbCgpLCBwb3NpdGlvbnNfcXVhbnRpemVkLCBwb3NpdGlvbnNBdHRyKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAobm9ybWFsc19xdWFudGl6ZWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYm94MyA9IGNsdXN0ZXJzW2ldLm5vcm1hbHNSYW5nZTsKICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2U4Qml0Tm9ybWFsc0FycmF5KGNsdXN0ZXJzW2ldLnJhbmdlLCBib3gzLnAwLCBib3gzLmRpYWdvbmFsKCksIG5vcm1hbHNfcXVhbnRpemVkLCBub3JtYWxzQXR0cik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICh0ZXhDb29yZHNfcXVhbnRpemVkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGJveDIgPSBjbHVzdGVyc1tpXS50ZXhDb29yZHNSYW5nZTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRleHQudmVyc2lvbnNbJ3plYS1lbmdpbmUnXS5jb21wYXJlKFszLCA5LCAxXSkgPj0gMCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2UxNkJpdFRleHR1cmVDb29yZHNBcnJheShbMCwgbnVtVmVydHNdLCBib3gyLnAwLCBib3gyLmRpYWdvbmFsKCksIHRleENvb3Jkc19xdWFudGl6ZWQsIHRleENvb3Jkc0F0dHIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyc2U4Qml0VGV4dHVyZUNvb3Jkc0FycmF5KGNsdXN0ZXJzW2ldLnJhbmdlLCBib3gyLnAwLCBib3gyLmRpYWdvbmFsKCksIHRleENvb3Jkc19xdWFudGl6ZWQsIHRleENvb3Jkc0F0dHIpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKG5vcm1hbHNBdHRyKSB7CiAgICAgICAgICAgICAgICAgICAgbm9ybWFsc0F0dHIubG9hZFNwbGl0VmFsdWVzKHJlYWRlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAodGV4Q29vcmRzQXR0cikgewogICAgICAgICAgICAgICAgICAgIHRleENvb3Jkc0F0dHIubG9hZFNwbGl0VmFsdWVzKHJlYWRlcik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIHRvSlNPTiBtZXRob2QgZW5jb2RlcyB0aGlzIHR5cGUgYXMgYSBqc29uIG9iamVjdCBmb3IgcGVyc2lzdGVuY2UuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gY29udGV4dCAtIFRoZSBjb250ZXh0IHZhbHVlLgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBqc29uIG9iamVjdC4KICAgICAgICAgKi8KICAgICAgICB0b0pTT04oY29udGV4dCkgewogICAgICAgICAgICBjb25zdCBqc29uID0gc3VwZXIudG9KU09OKGNvbnRleHQpOwogICAgICAgICAgICBpZiAoIWNvbnRleHQgfHwgIWNvbnRleHQuc2tpcFRvcG9sb2d5KSB7CiAgICAgICAgICAgICAgICBqc29uLm51bVZlcnRpY2VzID0gdGhpcy5fX251bVZlcnRpY2VzIHx8IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgdmVydGV4QXR0cmlidXRlcyA9IHt9OwogICAgICAgICAgICBmb3IgKGNvbnN0IFtrZXksIGF0dHJdIG9mIHRoaXMuX192ZXJ0ZXhBdHRyaWJ1dGVzLmVudHJpZXMoKSkgewogICAgICAgICAgICAgICAgaWYgKCFjb250ZXh0IHx8ICEoJ3NraXBBdHRyaWJ1dGVzJyBpbiBjb250ZXh0KSB8fCAhY29udGV4dC5za2lwQXR0cmlidXRlcy5pbmNsdWRlcyhrZXkpKQogICAgICAgICAgICAgICAgICAgIHZlcnRleEF0dHJpYnV0ZXNba2V5XSA9IGF0dHIudG9KU09OKGNvbnRleHQpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGpzb24udmVydGV4QXR0cmlidXRlcyA9IHZlcnRleEF0dHJpYnV0ZXM7CiAgICAgICAgICAgIHJldHVybiBqc29uOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBUaGUgZnJvbUpTT04gbWV0aG9kIGRlY29kZXMgYSBqc29uIG9iamVjdCBmb3IgdGhpcyB0eXBlLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGpzb24gLSBUaGUganNvbiBvYmplY3QgdGhpcyBpdGVtIG11c3QgZGVjb2RlLgogICAgICAgICAqIEBwYXJhbSBjb250ZXh0IC0gVGhlIGNvbnRleHQgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZnJvbUpTT04oanNvbiwgY29udGV4dCkgewogICAgICAgICAgICB0aGlzLmNsZWFyKCk7CiAgICAgICAgICAgIHN1cGVyLmZyb21KU09OKGpzb24sIGNvbnRleHQpOwogICAgICAgICAgICB0aGlzLnNldE51bVZlcnRpY2VzKGpzb24ubnVtVmVydGljZXMpOwogICAgICAgICAgICBmb3IgKGNvbnN0IG5hbWUgaW4ganNvbi52ZXJ0ZXhBdHRyaWJ1dGVzKSB7CiAgICAgICAgICAgICAgICBsZXQgYXR0ciA9IHRoaXMuX192ZXJ0ZXhBdHRyaWJ1dGVzLmdldChuYW1lKTsKICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJKU09OID0ganNvbi52ZXJ0ZXhBdHRyaWJ1dGVzW25hbWVdOwogICAgICAgICAgICAgICAgaWYgKGF0dHIpIHsKICAgICAgICAgICAgICAgICAgICBhdHRyLmZyb21KU09OKGF0dHJKU09OKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignYXR0ciB1bmRlZmluZWQsIGNhbm5vdCBleGVjdXRlIGZyb21KU09OKCknKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmVtaXQoJ2dlb21EYXRhVG9wb2xvZ3lDaGFuZ2VkJyk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgZ2VvbWV0cnkgZGF0YSB2YWx1ZSBpbiBqc29uIGZvcm1hdC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHRvU3RyaW5nKCkgewogICAgICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodGhpcy50b0pTT04oKSwgbnVsbCwgMik7CiAgICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogQ2xhc3MgcmVwcmVzZW50aW5nIGEgcG9pbnQgcHJpbWl0aXZlIGRyYXdpbmcgdHlwZSwgZXZlcnkgdmVydGV4IHNwZWNpZmllZCBpcyBhIHBvaW50LgogICAgICoKICAgICAqIGBgYAogICAgICogY29uc3QgcG9pbnRzID0gbmV3IFBvaW50cygpCiAgICAgKiBgYGAKICAgICAqCiAgICAgKiAqICoqRXZlbnRzKioKICAgICAqICogKipib3VuZGluZ0JveENoYW5nZWQ6KiogVHJpZ2dlcmVkIHdoZW4gdGhlIGJvdW5kaW5nIGJveCBjaGFuZ2VzLgogICAgICoKICAgICAqIEBleHRlbmRzIEJhc2VHZW9tCiAgICAgKi8KICAgIGNsYXNzIFBvaW50cyBleHRlbmRzIEJhc2VHZW9tIHsKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGUgcG9pbnRzLgogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKCkgewogICAgICAgICAgICBzdXBlcigpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBUaGUgY2xlYXIgbWV0aG9kLgogICAgICAgICAqLwogICAgICAgIGNsZWFyKCkgewogICAgICAgICAgICB0aGlzLnNldE51bVZlcnRpY2VzKDApOwogICAgICAgICAgICB0aGlzLmVtaXQoJ2dlb21EYXRhVG9wb2xvZ3lDaGFuZ2VkJyk7CiAgICAgICAgfQogICAgICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgICAvLyBQZXJzaXN0ZW5jZQogICAgICAgIC8qKgogICAgICAgICAqIFNldHMgc3RhdGUgb2YgY3VycmVudCBnZW9tZXRyeShJbmNsdWRpbmcgbGluZSBzZWdtZW50cykgdXNpbmcgYSBiaW5hcnkgcmVhZGVyIG9iamVjdC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgLSBUaGUgcmVhZGVyIHZhbHVlLgogICAgICAgICAqIEBwYXJhbSBjb250ZXh0IC0gVGhlIGNvbnRleHQgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgcmVhZEJpbmFyeShyZWFkZXIsIGNvbnRleHQpIHsKICAgICAgICAgICAgc3VwZXIubG9hZEJhc2VHZW9tQmluYXJ5KHJlYWRlciwgY29udGV4dCk7CiAgICAgICAgICAgIC8vIHRoaXMuY29tcHV0ZVZlcnRleE5vcm1hbHMoKTsKICAgICAgICAgICAgdGhpcy5lbWl0KCdnZW9tRGF0YUNoYW5nZWQnKTsKICAgICAgICB9CiAgICB9CiAgICBSZWdpc3RyeS5yZWdpc3RlcignUG9pbnRzJywgUG9pbnRzKTsKCiAgICAvKiBlc2xpbnQtZGlzYWJsZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdW51c2VkLXZhcnMgKi8KICAgIC8qKgogICAgICoKICAgICAqIENsYXNzIHJlcHJlc2VudGluZyBsaW5lcyBwcmltaXRpdmUgZHJhd2luZyB0eXBlLCBjb25uZWN0aW5nIHZlcnRpY2VzIHVzaW5nIHRoZSBzcGVjaWZpZWQgaW5kaWNlcy4KICAgICAqIGkuZS4gV2UgaGF2ZSA0IHBvaW50cyh2ZXJ0aWNlcykgYnV0IHdlIGRvbid0IGtub3cgaG93IHRoZXkgY29ubmVjdCB0byBlYWNoIG90aGVyLAogICAgICogYW5kIHRoYXQncyB3aHkgd2UgbmVlZCBpbmRpY2VzKE51bWJlcnMgaW5kaWNhdGluZyB3aGljaCB2ZXJ0ZXggY29ubmVjdHMgdG8gd2hpY2gpLgogICAgICogSW4gdGhpcyBjYXNlIGlmIHdlIHNheSB0aGF0IGBpbmRpY2VzYCBpcyBgWzAsMSwyLDNdYCwgaXQgd291bGQgY29ubmVjdCB0aGUgZmlyc3QgdmVydGV4IHRvIHRoZSBzZWNvbmQsCiAgICAgKiBhbmQgdGhlIHRoaXJkIHRvIHRoZSBmb3VydGguCiAgICAgKgogICAgICogYGBgCiAgICAgKiBjb25zdCBsaW5lcyA9IG5ldyBMaW5lcygpCiAgICAgKiBgYGAKICAgICAqCiAgICAgKiAqKkV2ZW50cyoqCiAgICAgKiAqICoqZ2VvbURhdGFDaGFuZ2VkOioqIFRyaWdnZXJlZCB3aGVuIHRoZSBkYXRhIHZhbHVlIG9mIHRoZSBnZW9tZXRyeSBpcyBzZXQoVGhpcyBpbmNsdWRlcyByZWFkaW5nIGJpbmFyeSkKICAgICAqCiAgICAgKiBAZXh0ZW5kcyBCYXNlR2VvbQogICAgICovCiAgICBjbGFzcyBMaW5lcyBleHRlbmRzIEJhc2VHZW9tIHsKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGUgbGluZXMuCiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IoKSB7CiAgICAgICAgICAgIHN1cGVyKCk7CiAgICAgICAgICAgIHRoaXMuX19pbmRpY2VzID0gbmV3IFVpbnQzMkFycmF5KCk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFRoZSBjbGVhciBtZXRob2QuCiAgICAgICAgICovCiAgICAgICAgY2xlYXIoKSB7CiAgICAgICAgICAgIHRoaXMuc2V0TnVtU2VnbWVudHMoMCk7CiAgICAgICAgICAgIHRoaXMuc2V0TnVtVmVydGljZXMoMCk7CiAgICAgICAgICAgIHRoaXMuZW1pdCgnZ2VvbURhdGFUb3BvbG9neUNoYW5nZWQnKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyB0aGUgc3BlY2lmaWVkIGluZGljZXMoVmVydGV4IGNvbm5lY3RvcnMpCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIGluZGljZXMgaW5kZXggYXJyYXkuCiAgICAgICAgICovCiAgICAgICAgZ2V0SW5kaWNlcygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX19pbmRpY2VzOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgbGluZSBzZWdtZW50cy4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygc2VnbWVudHMuCiAgICAgICAgICovCiAgICAgICAgZ2V0TnVtU2VnbWVudHMoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9faW5kaWNlcy5sZW5ndGggLyAyOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSBudW1iZXIgb2YgbGluZSBzZWdtZW50cy4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIHRoZSBudW1iZXIgb2Ygc2VnbWVudHMuCiAgICAgICAgICovCiAgICAgICAgZ2V0TnVtTGluZVNlZ21lbnRzKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX2luZGljZXMubGVuZ3RoIC8gMjsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0cyB0aGUgbnVtYmVyIG9mIGxpbmUgc2VnbWVudHMgaW4gdGhlIGxpbmVzIGdlb21ldHJ5LgogICAgICAgICAqICoqSW1wb3J0YW50OioqIEl0IHJlc2V0cyBpbmRpY2VzIHZhbHVlcy4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBudW1PZlNlZ21lbnRzIC0gVGhlIGNvdW50IHZhbHVlLgogICAgICAgICAqLwogICAgICAgIHNldE51bVNlZ21lbnRzKG51bU9mU2VnbWVudHMpIHsKICAgICAgICAgICAgaWYgKG51bU9mU2VnbWVudHMgPiB0aGlzLmdldE51bVNlZ21lbnRzKCkpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGluZGljZXMgPSBuZXcgVWludDMyQXJyYXkobnVtT2ZTZWdtZW50cyAqIDIpOwogICAgICAgICAgICAgICAgaW5kaWNlcy5zZXQodGhpcy5fX2luZGljZXMpOwogICAgICAgICAgICAgICAgdGhpcy5fX2luZGljZXMgPSBpbmRpY2VzOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5fX2luZGljZXMgPSB0aGlzLl9faW5kaWNlcy5zbGljZSgwLCBudW1PZlNlZ21lbnRzICogMik7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogU2V0cyBzZWdtZW50IHZhbHVlcyBpbiB0aGUgc3BlY2lmaWVkIGluZGV4LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGluZGV4IC0gVGhlIGluZGV4IHZhbHVlLgogICAgICAgICAqIEBwYXJhbSBwMCAtIFRoZSBwMCB2YWx1ZS4KICAgICAgICAgKiBAcGFyYW0gcDEgLSBUaGUgcDEgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgc2V0U2VnbWVudFZlcnRleEluZGljZXMoaW5kZXgsIHAwLCBwMSkgewogICAgICAgICAgICBpZiAoaW5kZXggPj0gdGhpcy5fX2luZGljZXMubGVuZ3RoIC8gMikKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBsaW5lIGluZGV4OicgKyBpbmRleCArICcuIE51bSBTZWdtZW50czonICsgdGhpcy5fX2luZGljZXMubGVuZ3RoIC8gMik7CiAgICAgICAgICAgIHRoaXMuX19pbmRpY2VzW2luZGV4ICogMiArIDBdID0gcDA7CiAgICAgICAgICAgIHRoaXMuX19pbmRpY2VzW2luZGV4ICogMiArIDFdID0gcDE7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFRoZSBnZXRTZWdtZW50VmVydGV4SW5kZXggbWV0aG9kLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGxpbmUgLSBUaGUgbGluZSB2YWx1ZS4KICAgICAgICAgKiBAcGFyYW0gbGluZVZlcnRleCAtIFRoZSBsaW5lVmVydGV4IHZhbHVlLgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqIEBwcml2YXRlCiAgICAgICAgICovCiAgICAgICAgZ2V0U2VnbWVudFZlcnRleEluZGV4KGxpbmUsIGxpbmVWZXJ0ZXgpIHsKICAgICAgICAgICAgY29uc3QgbnVtU2VnbWVudHMgPSB0aGlzLmdldE51bVNlZ21lbnRzKCk7CiAgICAgICAgICAgIGlmIChsaW5lIDwgbnVtU2VnbWVudHMpCiAgICAgICAgICAgICAgICByZXR1cm4gdGhpcy5fX2luZGljZXNbbGluZSAqIDIgKyBsaW5lVmVydGV4XTsKICAgICAgICAgICAgcmV0dXJuIC0xOwogICAgICAgIH0KICAgICAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAgICAgLy8gTWVtb3J5CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyB2ZXJ0ZXggYXR0cmlidXRlcyBidWZmZXJzIGFuZCBpdHMgY291bnQuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBnZW5CdWZmZXJzKG9wdHMpIHsKICAgICAgICAgICAgY29uc3QgYnVmZmVycyA9IHN1cGVyLmdlbkJ1ZmZlcnMoKTsKICAgICAgICAgICAgbGV0IGluZGljZXM7CiAgICAgICAgICAgIGlmIChidWZmZXJzLm51bVZlcnRpY2VzIDwgTWF0aC5wb3coMiwgOCkpIHsKICAgICAgICAgICAgICAgIGluZGljZXMgPSBuZXcgVWludDhBcnJheSh0aGlzLl9faW5kaWNlcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoYnVmZmVycy5udW1WZXJ0aWNlcyA8IE1hdGgucG93KDIsIDE2KSkgewogICAgICAgICAgICAgICAgaW5kaWNlcyA9IG5ldyBVaW50MTZBcnJheSh0aGlzLl9faW5kaWNlcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBpbmRpY2VzID0gdGhpcy5fX2luZGljZXM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYnVmZmVycy5pbmRpY2VzID0gaW5kaWNlczsKICAgICAgICAgICAgcmV0dXJuIGJ1ZmZlcnM7CiAgICAgICAgfQogICAgICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgICAvLyBQZXJzaXN0ZW5jZQogICAgICAgIC8qKgogICAgICAgICAqIFNldHMgc3RhdGUgb2YgY3VycmVudCBnZW9tZXRyeShJbmNsdWRpbmcgbGluZSBzZWdtZW50cykgdXNpbmcgYSBiaW5hcnkgcmVhZGVyIG9iamVjdC4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgLSBUaGUgcmVhZGVyIHZhbHVlLgogICAgICAgICAqIEBwYXJhbSBjb250ZXh0IC0gVGhlIGNvbnRleHQgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgcmVhZEJpbmFyeShyZWFkZXIsIGNvbnRleHQpIHsKICAgICAgICAgICAgc3VwZXIubG9hZEJhc2VHZW9tQmluYXJ5KHJlYWRlciwgY29udGV4dCk7CiAgICAgICAgICAgIHRoaXMuc2V0TnVtU2VnbWVudHMocmVhZGVyLmxvYWRVSW50MzIoKSk7CiAgICAgICAgICAgIGNvbnN0IGJ5dGVzID0gcmVhZGVyLmxvYWRVSW50OCgpOwogICAgICAgICAgICBpZiAoYnl0ZXMgPT0gMSkKICAgICAgICAgICAgICAgIHRoaXMuX19pbmRpY2VzID0gcmVhZGVyLmxvYWRVSW50OEFycmF5KCk7CiAgICAgICAgICAgIGVsc2UgaWYgKGJ5dGVzID09IDIpCiAgICAgICAgICAgICAgICB0aGlzLl9faW5kaWNlcyA9IHJlYWRlci5sb2FkVUludDE2QXJyYXkoKTsKICAgICAgICAgICAgZWxzZSBpZiAoYnl0ZXMgPT0gNCkKICAgICAgICAgICAgICAgIHRoaXMuX19pbmRpY2VzID0gcmVhZGVyLmxvYWRVSW50MzJBcnJheSgpOwogICAgICAgICAgICB0aGlzLmVtaXQoJ2dlb21EYXRhQ2hhbmdlZCcpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBUaGUgdG9KU09OIG1ldGhvZCBlbmNvZGVzIHRoaXMgdHlwZSBhcyBhIGpzb24gb2JqZWN0IGZvciBwZXJzaXN0ZW5jZS4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSBjb250ZXh0IC0gVGhlIGNvbnRleHQgdmFsdWUuCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIGpzb24gb2JqZWN0LgogICAgICAgICAqLwogICAgICAgIHRvSlNPTihjb250ZXh0KSB7CiAgICAgICAgICAgIGNvbnN0IGogPSBzdXBlci50b0pTT04oY29udGV4dCk7CiAgICAgICAgICAgIGlmICghY29udGV4dCB8fCAhY29udGV4dC5za2lwVG9wb2xvZ3kpCiAgICAgICAgICAgICAgICBqLmluZGljZXMgPSBBcnJheS5mcm9tKHRoaXMuX19pbmRpY2VzKTsKICAgICAgICAgICAgcmV0dXJuIGo7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFRoZSBmcm9tSlNPTiBtZXRob2QgZGVjb2RlcyBhIGpzb24gb2JqZWN0IGZvciB0aGlzIHR5cGUuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gaiAtIFRoZSBqc29uIG9iamVjdCB0aGlzIGl0ZW0gbXVzdCBkZWNvZGUuCiAgICAgICAgICogQHBhcmFtIGNvbnRleHQgLSBUaGUgY29udGV4dCB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBmcm9tSlNPTihqLCBjb250ZXh0KSB7CiAgICAgICAgICAgIHN1cGVyLmZyb21KU09OKGosIGNvbnRleHQpOwogICAgICAgICAgICBpZiAoai5pbmRpY2VzKQogICAgICAgICAgICAgICAgdGhpcy5fX2luZGljZXMgPSBVaW50MzJBcnJheS5mcm9tKGouaW5kaWNlcyk7CiAgICAgICAgfQogICAgfQogICAgUmVnaXN0cnkucmVnaXN0ZXIoJ0xpbmVzJywgTGluZXMpOwoKICAgIC8qIGVzbGludC1kaXNhYmxlIHByZWZlci1yZXN0LXBhcmFtcyAqLwogICAgLyoqCiAgICAgKiBUaGUgTWVzaCBjbGFzcyBwcm92aWRlcyBhIGZsZXhpYmxlIGFuZCBmYXN0IHBvbHlnb24gbWVzaCByZXByZXNlbnRhdGlvbi4gSXQgc3VwcG9ydHMgcG9seWdvbnMgb2YgYXJiaXRyYXJ5IGNvbXBsZXhpdHksCiAgICAgKiBmcm9tIGJhc2ljIHRyaWFuZ2xlcyBhbmQgcXVhZHMgdG8gcGVudGFnb25zIG1vcmUuCiAgICAgKiBJdCBzdXBwb3J0cyBzdG9yaW5nIHBlciBmYWNlIGF0dHJpYnV0ZXMsIGFuZCBwZXIgZWRnZSBhdHRyaWJ1dGVzLgogICAgICogVGhlIE1lc2ggY2xhc3MgaGFuZGxlcyBjb252ZXJ0aW5nIGl0cyBpbnRlcm5hbCByZXByZXNlbnRhdGlvbiBvZiBwb2x5Z29ucyBpbnRvIGEgc2ltcGxlciB0cmlhbmdsZXMgcmVwcmVzZW50YXRpb24gZm9yIHJlbmRlcmluZy4KICAgICAqCiAgICAgKiBgYGAKICAgICAqIGNvbnN0IG1lc2ggPSBuZXcgTWVzaCgpCiAgICAgKiBgYGAKICAgICAqCiAgICAgKiAqKkV2ZW50cyoqCiAgICAgKiAqICoqZ2VvbURhdGFUb3BvbG9neUNoYW5nZWQ6KiogVHJpZ2dlcmVkIHdoZW4gdGhlIHRvcG9sb2d5IG9mIHRoZSBtZXNoIGhhcyBiZWVuIGNoYW5nZWQuCiAgICAgKiAqICoqZ2VvbURhdGFDaGFuZ2VkOioqIFRyaWdnZXJlZCB3aGVuIHRoZSB2ZXJ0aWNlcyBvZiB0aGUgbWVzaCBoYXZlIGNoYW5nZWQsIGJ1dCBub3QgbmVjZXNzYXJpbHkgdGhlIHRvcG9sb2d5LgogICAgICoKICAgICAqIEBleHRlbmRzIEJhc2VHZW9tCiAgICAgKi8KICAgIGNsYXNzIE1lc2ggZXh0ZW5kcyBCYXNlR2VvbSB7CiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBNZXNoLgogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKCkgewogICAgICAgICAgICBzdXBlcigpOwogICAgICAgICAgICB0aGlzLmVkZ2VGYWNlcyA9IFtdOwogICAgICAgICAgICB0aGlzLmZhY2VFZGdlcyA9IFtbXV07CiAgICAgICAgICAgIHRoaXMuZmFjZUNvdW50cyA9IFtdOwogICAgICAgICAgICB0aGlzLl9fZmFjZVZlcnRleEluZGljZXMgPSBuZXcgVWludDMyQXJyYXkoKTsKICAgICAgICAgICAgdGhpcy5fX2xvZ1RvcG9sb2d5V2FybmluZ3MgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5fX2VkZ2VBdHRyaWJ1dGVzID0gbmV3IE1hcCgpOwogICAgICAgICAgICB0aGlzLl9fZmFjZUF0dHJpYnV0ZXMgPSBuZXcgTWFwKCk7CiAgICAgICAgICAgIHRoaXMubnVtRWRnZXMgPSAwOwogICAgICAgICAgICB0aGlzLmVkZ2VWZXJ0cyA9IFtdOwogICAgICAgICAgICB0aGlzLnZlcnRleEVkZ2VzID0gW107CiAgICAgICAgICAgIHRoaXMuZWRnZUFuZ2xlcyA9IG5ldyBGbG9hdDMyQXJyYXkoKTsKICAgICAgICAgICAgdGhpcy5lZGdlVmVjcyA9IFtdOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBUaGUgY2xlYXIgbWV0aG9kLgogICAgICAgICAqLwogICAgICAgIGNsZWFyKCkgewogICAgICAgICAgICBzdXBlci5jbGVhcigpOwogICAgICAgICAgICAvL3RoaXMuaW5pdCgpCiAgICAgICAgICAgIC8vdGhpcy5zZXROdW1WZXJ0aWNlcygwKQogICAgICAgICAgICAvLyBjbGVhciBlZGdlIGFuZCBmYWNlIG5vcm1hbHMuCiAgICAgICAgICAgIHRoaXMuZWRnZVZlcnRzID0gW107CiAgICAgICAgICAgIHRoaXMudmVydGV4RWRnZXMgPSBbXTsKICAgICAgICAgICAgdGhpcy5udW1FZGdlcyA9IDA7CiAgICAgICAgICAgIHRoaXMuZWRnZUFuZ2xlcyA9IG5ldyBGbG9hdDMyQXJyYXkoKTsKICAgICAgICAgICAgdGhpcy5lbWl0KCdnZW9tRGF0YVRvcG9sb2d5Q2hhbmdlZCcpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBBZGRzIGEgbmV3IHZlcnRleCBhdHRyaWJ1dGUgdG8gdGhlIGdlb21ldHJ5LgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgdmVydGV4IGF0dHJpYnV0ZS4KICAgICAgICAgKiBAcGFyYW0gYXR0ciAtIFRoZSBhdHRyaWJ1dGUgdG8gYWRkIHRvIHRoZSBnZW9tZXRyeQogICAgICAgICAqLwogICAgICAgIGFkZFZlcnRleEF0dHJpYnV0ZShuYW1lLCBhdHRyKSB7CiAgICAgICAgICAgIHN1cGVyLmFkZFZlcnRleEF0dHJpYnV0ZShuYW1lLCBhdHRyKTsKICAgICAgICAgICAgYXR0ci5zZXRNZXNoKHRoaXMpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBUaGUgZ2V0RmFjZUNvdW50cyBtZXRob2QuCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0RmFjZUNvdW50cygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmFjZUNvdW50czsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIGdldE51bUZhY2VzIG1ldGhvZC4KICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBnZXROdW1GYWNlcygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmFjZUNvdW50cy5sZW5ndGggPT0gMCA/IDAgOiB0aGlzLmZhY2VDb3VudHMucmVkdWNlKChudW1GYWNlcywgZmMpID0+IChudW1GYWNlcyArPSBmYykpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBUaGUgZ2V0TnVtVHJpYW5nbGVzIG1ldGhvZC4KICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9IC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBnZXROdW1UcmlhbmdsZXMoKSB7CiAgICAgICAgICAgIGxldCBudW1UcmlhbmdsZXMgPSAwOwogICAgICAgICAgICBsZXQgbnVtVHJpc1BlckZhY2UgPSAxOwogICAgICAgICAgICBmb3IgKGNvbnN0IGZjIG9mIHRoaXMuZmFjZUNvdW50cykgewogICAgICAgICAgICAgICAgbnVtVHJpYW5nbGVzICs9IGZjICogbnVtVHJpc1BlckZhY2U7CiAgICAgICAgICAgICAgICBudW1UcmlzUGVyRmFjZSsrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudW1UcmlhbmdsZXM7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHMgdGhlIG51bWJlciBvZiBmYWNlcyBvbiB0aGUgbWVzaCB1c2luZyBhbiBhcnJheSBzcGVjaWZ5aW5nIHRoZSBjb3VudHMgcGVyIHBvbHlnb24gc2l6ZS4KICAgICAgICAgKiBUaGUgZmlyc3QgaXRlbSBpbiB0aGUgYXJyYXkgc3BlY2lmaWVzIHRoZSBudW1iZXIgb2YgdHJpYW5nbGVzLCB0aGUgc2Vjb25kLCB0aGUgbnVtYmVyIG9mIHF1YWRzLCB0aGUgM3JkLCB0aGUgbnVtYmVyIG9mIDUgc2lkZWQgcG9seWdvbnMgZXRjLi4KICAgICAgICAgKiBlLmcuIHRvIHNwZWNpZnkgMiB0cmlhbmdsZXMsIGFuZCA3IHF1YWRzLCB3ZSB3b3VsZCBwYXNzIFsyLCA3XQogICAgICAgICAqIEBwYXJhbSBmYWNlQ291bnRzIC0gVGhlIGZhY2VDb3VudHMgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgc2V0RmFjZUNvdW50cyhmYWNlQ291bnRzKSB7CiAgICAgICAgICAgIC8vIGxldCBudW1GYWNlcyA9IDAKICAgICAgICAgICAgbGV0IG51bUZhY2VzVmVydGljZXMgPSAwOwogICAgICAgICAgICBsZXQgbnVtVmVydHNQZXJGYWNlID0gMzsKICAgICAgICAgICAgZm9yIChjb25zdCBmYyBvZiBmYWNlQ291bnRzKSB7CiAgICAgICAgICAgICAgICAvLyBudW1GYWNlcyArPSBmYwogICAgICAgICAgICAgICAgbnVtRmFjZXNWZXJ0aWNlcyArPSBmYyAqIG51bVZlcnRzUGVyRmFjZTsKICAgICAgICAgICAgICAgIG51bVZlcnRzUGVyRmFjZSsrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IHByZXZOdW1GYWNlcyA9IHRoaXMuZ2V0TnVtRmFjZXMoKTsKICAgICAgICAgICAgaWYgKHByZXZOdW1GYWNlcyA9PSAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9fZmFjZVZlcnRleEluZGljZXMgPSBuZXcgVWludDMyQXJyYXkobnVtRmFjZXNWZXJ0aWNlcyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBjb25zdCBmYWNlVmVydGV4SW5kaWNlcyA9IG5ldyBVaW50MzJBcnJheShudW1GYWNlc1ZlcnRpY2VzKTsKICAgICAgICAgICAgICAgIC8vIE5vdyB3ZSBwcmVzZXJ2ZSB0aGUgZXhpc3RpbmcgaW5kaWNlcyBpZiB0aGV5IGZpdCB3aXRoaW4gdGhlIG5ldyBmYWNlVmVydGV4SW5kaWNlcyBhcnJheS4KICAgICAgICAgICAgICAgIGxldCBzdGFydFNyYyA9IDA7CiAgICAgICAgICAgICAgICBsZXQgc3RhcnRUZ3QgPSAwOwogICAgICAgICAgICAgICAgbnVtRmFjZXNWZXJ0aWNlcyA9IDA7CiAgICAgICAgICAgICAgICBudW1WZXJ0c1BlckZhY2UgPSAzOwogICAgICAgICAgICAgICAgZmFjZUNvdW50cy5mb3JFYWNoKChmYywgaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBlbmRTcmMgPSBzdGFydFNyYyArIE1hdGgubWluKGZjLCB0aGlzLmZhY2VDb3VudHNbaW5kZXhdKSAqIG51bVZlcnRzUGVyRmFjZTsKICAgICAgICAgICAgICAgICAgICBmYWNlVmVydGV4SW5kaWNlcy5zZXQodGhpcy5fX2ZhY2VWZXJ0ZXhJbmRpY2VzLnNsaWNlKHN0YXJ0U3JjLCBlbmRTcmMpLCBzdGFydFRndCk7CiAgICAgICAgICAgICAgICAgICAgc3RhcnRTcmMgKz0gdGhpcy5mYWNlQ291bnRzW2luZGV4XSAqIG51bVZlcnRzUGVyRmFjZTsKICAgICAgICAgICAgICAgICAgICBzdGFydFRndCArPSBmYyAqIG51bVZlcnRzUGVyRmFjZTsKICAgICAgICAgICAgICAgICAgICBudW1WZXJ0c1BlckZhY2UrKzsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgdGhpcy5fX2ZhY2VWZXJ0ZXhJbmRpY2VzID0gZmFjZVZlcnRleEluZGljZXM7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy5mYWNlQ291bnRzID0gZmFjZUNvdW50czsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHZlcnRpY2VzIGluZGV4ZWQgYnkgdGhpcyBmYWNlCiAgICAgICAgICogQHBhcmFtIGZhY2VJbmRleCAtIFRoZSBmYWNlSW5kZXggdmFsdWUuCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0RmFjZVZlcnRleENvdW50KGZhY2VJbmRleCkgewogICAgICAgICAgICBsZXQgaWR4ID0gMDsKICAgICAgICAgICAgbGV0IGNvdW50ID0gMDsKICAgICAgICAgICAgdGhpcy5mYWNlQ291bnRzLnNvbWUoKGZjLCBpbmRleCkgPT4gewogICAgICAgICAgICAgICAgaWR4ICs9IGZjOwogICAgICAgICAgICAgICAgaWYgKGlkeCA+IGZhY2VJbmRleCkgewogICAgICAgICAgICAgICAgICAgIGNvdW50ID0gaW5kZXggKyAzOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgcmV0dXJuIGNvdW50OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSBvZmZzZXQgb2YgdGhlIGZhY2UgaW5kaWNlcyB3aXRoaW4gdGhlIGVudGlyZSBpbmRleCBhcnJheS4KICAgICAgICAgKiBAcGFyYW0gZmFjZUluZGV4IC0gVGhlIGZhY2VJbmRleCB2YWx1ZS4KICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBnZXRGYWNlVmVydGV4T2Zmc2V0KGZhY2VJbmRleCkgewogICAgICAgICAgICBsZXQgaWR4ID0gMDsKICAgICAgICAgICAgbGV0IG9mZnNldCA9IDA7CiAgICAgICAgICAgIHRoaXMuZmFjZUNvdW50cy5zb21lKChmYywgaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgIGlmIChpZHggKyBmYyA+IGZhY2VJbmRleCkgewogICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAoZmFjZUluZGV4IC0gaWR4KSAqIChpbmRleCArIDMpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWR4ICs9IGZjOwogICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGZjICogKGluZGV4ICsgMyk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gb2Zmc2V0OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBUaGUgc2V0RmFjZVZlcnRleEluZGljZXMgbWV0aG9kLgogICAgICAgICAqIEBwYXJhbSBmYWNlSW5kZXggLSBUaGUgZmFjZUluZGV4IHZhbHVlLgogICAgICAgICAqIEBwYXJhbSB2ZXJ0ZXhJbmRpY2VzIC0gVGhlIGFycmF5IG9mIHZlcnRleCBpbmRpY2VzIGZvciB0aGlzIGZhY2UgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgc2V0RmFjZVZlcnRleEluZGljZXMoZmFjZUluZGV4LCB2ZXJ0ZXhJbmRpY2VzKSB7CiAgICAgICAgICAgIGNvbnN0IGZhY2VWZXJ0ZXhDb3VudCA9IHRoaXMuZ2V0RmFjZVZlcnRleENvdW50KGZhY2VJbmRleCk7CiAgICAgICAgICAgIGlmICh2ZXJ0ZXhJbmRpY2VzLmxlbmd0aCAhPSBmYWNlVmVydGV4Q291bnQpIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihgSW52YWxpZCBpbmRpY2VzIGZvciBmYWNlOiR7ZmFjZUluZGV4fSB2ZXJ0ZXhJbmRpY2VzOiR7dmVydGV4SW5kaWNlc30uIEV4cGVjdGVkICR7ZmFjZVZlcnRleENvdW50fSBpbmRpY2VzYCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5nZXRGYWNlVmVydGV4T2Zmc2V0KGZhY2VJbmRleCk7CiAgICAgICAgICAgIHRoaXMuX19mYWNlVmVydGV4SW5kaWNlcy5zZXQodmVydGV4SW5kaWNlcywgb2Zmc2V0KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQWRkcyBhIG5ldyBmYWNlIHRvIHRoZSBtZXNoCiAgICAgICAgICogQHBhcmFtIHZlcnRleEluZGljZXMgLSBUaGUgdmVydGV4IGluZGljZXMgb2YgdGhlIGZhY2UuCiAgICAgICAgICogQHJldHVybiAtIFRoZSBpbmRleCBvZiB0aGUgZmFjZSBpbiB0aGUgbWVzaC4KICAgICAgICAgKi8KICAgICAgICBhZGRGYWNlKHZlcnRleEluZGljZXMpIHsKICAgICAgICAgICAgY29uc3QgZmFjZUNvdW50cyA9IFsuLi50aGlzLmZhY2VDb3VudHNdOwogICAgICAgICAgICBpZiAoZmFjZUNvdW50cy5sZW5ndGggPD0gdmVydGV4SW5kaWNlcy5sZW5ndGggLSAzKSB7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gZmFjZUNvdW50cy5sZW5ndGg7IGkgPCB2ZXJ0ZXhJbmRpY2VzLmxlbmd0aCAtIDM7IGkrKykKICAgICAgICAgICAgICAgICAgICBmYWNlQ291bnRzW2ldID0gMDsKICAgICAgICAgICAgICAgIGZhY2VDb3VudHNbdmVydGV4SW5kaWNlcy5sZW5ndGggLSAzXSA9IDE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICBmYWNlQ291bnRzW3ZlcnRleEluZGljZXMubGVuZ3RoIC0gM10rKzsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnNldEZhY2VDb3VudHMoZmFjZUNvdW50cyk7CiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSB0aGUgb2Zmc2V0IGluIHRoZSBmYWNlVmVydGV4SW5kaWNlcyBvZiB0aGlzIG5ldyBmYWNlLgogICAgICAgICAgICBsZXQgZmFjZUluZGV4ID0gMDsKICAgICAgICAgICAgbGV0IG9mZnNldCA9IDA7CiAgICAgICAgICAgIHRoaXMuZmFjZUNvdW50cy5zb21lKChmYywgaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgIGlmIChpbmRleCArIDMgPT0gdmVydGV4SW5kaWNlcy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICBmYWNlSW5kZXggKz0gZmMgLSAxOwogICAgICAgICAgICAgICAgICAgIG9mZnNldCArPSAoZmMgLSAxKSAqIChpbmRleCArIDMpOwogICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZmFjZUluZGV4ICs9IGZjOwogICAgICAgICAgICAgICAgb2Zmc2V0ICs9IGZjICogKGluZGV4ICsgMyk7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB0aGlzLl9fZmFjZVZlcnRleEluZGljZXMuc2V0KHZlcnRleEluZGljZXMsIG9mZnNldCk7CiAgICAgICAgICAgIHJldHVybiBmYWNlSW5kZXg7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgdGhlIHZlcnRleCBpbmRpY2VzIG9mIHRoZSBzcGVjaWZpZWQgZmFjZS4KICAgICAgICAgKiBAcGFyYW0gZmFjZUluZGV4IC0gVGhlIGluZGV4IG9mIHRoZSBzcGVjaWZpZWQgZmFjZQogICAgICAgICAqIEByZXR1cm4gLSBBbiBhcnJheSBvZiBpbmRpY2VzIGludG8gdGhlIHZlcnRleCBhdHRyaWJ1dGVzCiAgICAgICAgICovCiAgICAgICAgZ2V0RmFjZVZlcnRleEluZGljZXMoZmFjZUluZGV4KSB7CiAgICAgICAgICAgIGNvbnN0IHZlcnRleEluZGljZXMgPSBbXTsKICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gdGhpcy5nZXRGYWNlVmVydGV4T2Zmc2V0KGZhY2VJbmRleCk7CiAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gdGhpcy5nZXRGYWNlVmVydGV4Q291bnQoZmFjZUluZGV4KTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7CiAgICAgICAgICAgICAgICB2ZXJ0ZXhJbmRpY2VzLnB1c2godGhpcy5fX2ZhY2VWZXJ0ZXhJbmRpY2VzW29mZnNldCArIGldKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdmVydGV4SW5kaWNlczsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyBhIHNpbmdsZSB2ZXJ0ZXggaW5kZXggZm9yIGEgZ2l2ZW4gZmFjZSBhbmQgZmFjZVZlcnRleC4KICAgICAgICAgKiBAcGFyYW0gZmFjZUluZGV4IC0gVGhlIGZhY2VJbmRleCB2YWx1ZS4KICAgICAgICAgKiBAcGFyYW0gZmFjZVZlcnRleCAtIFRoZSBmYWNlIHZlcnRleCBpcyB0aGUgaW5kZXggd2l0aGluIHRoZSBmYWNlLiBTbyB0aGUgZmlyc3QgdmVydGV4IGluZGV4IGlzIDAuCiAgICAgICAgICogQHJldHVybiAtIFRoZSB2ZXJ0ZXggaW5kZXgKICAgICAgICAgKi8KICAgICAgICBnZXRGYWNlVmVydGV4SW5kZXgoZmFjZUluZGV4LCBmYWNlVmVydGV4KSB7CiAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IHRoaXMuZ2V0RmFjZVZlcnRleE9mZnNldChmYWNlSW5kZXgpOwogICAgICAgICAgICByZXR1cm4gdGhpcy5fX2ZhY2VWZXJ0ZXhJbmRpY2VzW29mZnNldCArIGZhY2VWZXJ0ZXhdOwogICAgICAgIH0KICAgICAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgICAvLyBGYWNlIEF0dHJpYnV0ZXMKICAgICAgICAvKioKICAgICAgICAgKiBUaGUgYWRkRmFjZUF0dHJpYnV0ZSBtZXRob2QuCiAgICAgICAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgZmFjZSBhdHRyaWJ1dGUgdG8gYWRkLgogICAgICAgICAqIEBwYXJhbSBhdHRyIC0gVGhlIGF0dHIgdmFsdWUKICAgICAgICAgKi8KICAgICAgICBhZGRGYWNlQXR0cmlidXRlKG5hbWUsIGF0dHIpIHsKICAgICAgICAgICAgYXR0ci5zZXRDb3VudCh0aGlzLmdldE51bUZhY2VzKCkpOwogICAgICAgICAgICB0aGlzLl9fZmFjZUF0dHJpYnV0ZXMuc2V0KG5hbWUsIGF0dHIpOwogICAgICAgICAgICByZXR1cm4gYXR0cjsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIGhhc0ZhY2VBdHRyaWJ1dGUgbWV0aG9kLgogICAgICAgICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGZhY2UgYXR0cmlidXRlLgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGhhc0ZhY2VBdHRyaWJ1dGUobmFtZSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX2ZhY2VBdHRyaWJ1dGVzLmhhcyhuYW1lKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIGdldEZhY2VBdHRyaWJ1dGUgbWV0aG9kLgogICAgICAgICAqIEBwYXJhbSBuYW1lIC0gVGhlIG5hbWUgb2YgdGhlIGZhY2UgYXR0cmlidXRlLgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGdldEZhY2VBdHRyaWJ1dGUobmFtZSkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX2ZhY2VBdHRyaWJ1dGVzLmdldChuYW1lKTsKICAgICAgICB9CiAgICAgICAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgIC8vIEVkZ2UgQXR0cmlidXRlcwogICAgICAgIC8qKgogICAgICAgICAqIFRoZSBhZGRFZGdlQXR0cmlidXRlIG1ldGhvZC4KICAgICAgICAgKiBAcGFyYW0gbmFtZSAtIFRoZSBuYW1lIG9mIHRoZSBlZGdlIGF0dHJpYnV0ZSB0byBhZGQuCiAgICAgICAgICogQHBhcmFtIGF0dHIgLSBUaGUgYXR0ciB2YWx1ZQogICAgICAgICAqLwogICAgICAgIGFkZEVkZ2VBdHRyaWJ1dGUobmFtZSwgYXR0cikgewogICAgICAgICAgICBhdHRyLnNldENvdW50KHRoaXMubnVtRWRnZXMpOwogICAgICAgICAgICB0aGlzLl9fZWRnZUF0dHJpYnV0ZXMuc2V0KG5hbWUsIGF0dHIpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBUaGUgaGFzRWRnZUF0dHJpYnV0ZSBtZXRob2QuCiAgICAgICAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgZWRnZSBhdHRyaWJ1dGUuCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgaGFzRWRnZUF0dHJpYnV0ZShuYW1lKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZWRnZUF0dHJpYnV0ZXMuaGFzKG5hbWUpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBUaGUgZ2V0RWRnZUF0dHJpYnV0ZSBtZXRob2QuCiAgICAgICAgICogQHBhcmFtIG5hbWUgLSBUaGUgbmFtZSBvZiB0aGUgZWRnZSBhdHRyaWJ1dGUuCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2V0RWRnZUF0dHJpYnV0ZShuYW1lKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZWRnZUF0dHJpYnV0ZXMuZ2V0KG5hbWUpOwogICAgICAgIH0KICAgICAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgICAvKioKICAgICAgICAgKiBUaGUgZ2VuVG9wb2xvZ3lJbmZvIG1ldGhvZC4KICAgICAgICAgKi8KICAgICAgICBnZW5Ub3BvbG9neUluZm8oKSB7CiAgICAgICAgICAgIGxldCBjb25uZWN0ZWRWZXJ0aWNlcyA9IHt9OyAvLyBhY2NlbGVyYXRpb24gc3RydWN0dXJlLgogICAgICAgICAgICB0aGlzLnZlcnRleEVkZ2VzID0gW107IC8vIDJkIGFycmF5IG9mIHZlcnRleCB0byBlZGdlcy4KICAgICAgICAgICAgLy8gdGhpcy52ZXJ0ZXhGYWNlcyA9IFtdOyAvLyAyZCBhcnJheSBvZiB2ZXJ0ZXggdG8gZmFjZXMuCiAgICAgICAgICAgIHRoaXMuZWRnZUZhY2VzID0gW107IC8vIGZsYXQgYXJyYXkgb2YgMiBmYWNlIGluZGljZXMgcGVyIGVkZ2UKICAgICAgICAgICAgdGhpcy5lZGdlVmVydHMgPSBbXTsgLy8gZmxhdCBhcnJheSBvZiAyIHZlcnQgaW5kaWNlcyBwZXIgZWRnZQogICAgICAgICAgICB0aGlzLmZhY2VFZGdlcyA9IFtdOyAvLyB0aGUgZWRnZXMgYm9yZGVyaW5nIGVhY2ggZmFjZS4KICAgICAgICAgICAgdGhpcy5udW1FZGdlcyA9IDA7CiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9ucyA9IHRoaXMucG9zaXRpb25zOwogICAgICAgICAgICBjb25zdCBnZXRFZGdlSW5kZXggPSAodjAsIHYxKSA9PiB7CiAgICAgICAgICAgICAgICBsZXQgdG1wMCA9IHYwOwogICAgICAgICAgICAgICAgbGV0IHRtcDEgPSB2MTsKICAgICAgICAgICAgICAgIGlmICh0bXAxIDwgdG1wMCkgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHRtcCA9IHRtcDA7CiAgICAgICAgICAgICAgICAgICAgdG1wMCA9IHRtcDE7CiAgICAgICAgICAgICAgICAgICAgdG1wMSA9IHRtcDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNvbnN0IGtleSA9IHRtcDAgKyAnPicgKyB0bXAxOwogICAgICAgICAgICAgICAgaWYgKGtleSBpbiBjb25uZWN0ZWRWZXJ0aWNlcykgewogICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGtleSArICc6JyArIGNvbm5lY3RlZFZlcnRpY2VzW2tleV0gKyAiIGZhY2U6IiArICggdjAgPCB2MSA/IDAgOiAxKSApOwogICAgICAgICAgICAgICAgICAgIHJldHVybiBjb25uZWN0ZWRWZXJ0aWNlc1trZXldOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgY29uc3QgcDAgPSBwb3NpdGlvbnMuZ2V0VmFsdWVSZWYodG1wMCk7CiAgICAgICAgICAgICAgICBjb25zdCBwMSA9IHBvc2l0aW9ucy5nZXRWYWx1ZVJlZih0bXAxKTsKICAgICAgICAgICAgICAgIGNvbnN0IGVkZ2VWZWMgPSBwMS5zdWJ0cmFjdChwMCk7CiAgICAgICAgICAgICAgICBjb25zdCBlZGdlSW5kZXggPSB0aGlzLmVkZ2VGYWNlcy5sZW5ndGggLyAyOwogICAgICAgICAgICAgICAgY29uc3QgZWRnZURhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgZWRnZUluZGV4OiBlZGdlSW5kZXgsCiAgICAgICAgICAgICAgICAgICAgZWRnZVZlYzogZWRnZVZlYywKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICBjb25uZWN0ZWRWZXJ0aWNlc1trZXldID0gZWRnZURhdGE7CiAgICAgICAgICAgICAgICB0aGlzLmVkZ2VGYWNlcy5wdXNoKC0xKTsKICAgICAgICAgICAgICAgIHRoaXMuZWRnZUZhY2VzLnB1c2goLTEpOwogICAgICAgICAgICAgICAgdGhpcy5lZGdlVmVydHMucHVzaCh0bXAwKTsKICAgICAgICAgICAgICAgIHRoaXMuZWRnZVZlcnRzLnB1c2godG1wMSk7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhrZXkgKyAnOicgKyBjb25uZWN0ZWRWZXJ0aWNlc1trZXldICsgIiBmYWNlOiIgKyAoIHYwIDwgdjEgPyAwIDogMSkpOwogICAgICAgICAgICAgICAgdGhpcy5udW1FZGdlcysrOwogICAgICAgICAgICAgICAgcmV0dXJuIGVkZ2VEYXRhOwogICAgICAgICAgICB9OwogICAgICAgICAgICBjb25zdCBhZGRFZGdlID0gKHYwLCB2MSwgZmFjZUluZGV4KSA9PiB7CiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnYWRkRWRnZTonICsgdjAgKyAiIDoiICsgdjEgKyAiIGZhY2VJbmRleDoiICsgZmFjZUluZGV4ICk7CiAgICAgICAgICAgICAgICBjb25zdCBlZGdlRGF0YSA9IGdldEVkZ2VJbmRleCh2MCwgdjEpOwogICAgICAgICAgICAgICAgY29uc3QgZWRnZUluZGV4ID0gZWRnZURhdGEuZWRnZUluZGV4OwogICAgICAgICAgICAgICAgaWYgKHYxIDwgdjApIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBlZGdlRmFjZUluZGV4ID0gZWRnZUluZGV4ICogMiArIDA7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuX19sb2dUb3BvbG9neVdhcm5pbmdzICYmIHRoaXMuZWRnZUZhY2VzW2VkZ2VGYWNlSW5kZXhdICE9IC0xKQogICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0VkZ2UgcG9seSAwIGFscmVhZHkgc2V0LiBNZXNoIGlzIG5vbi1tYW5pZm9sZC4nKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLmVkZ2VGYWNlc1tlZGdlRmFjZUluZGV4XSA9IGZhY2VJbmRleDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IGVkZ2VGYWNlSW5kZXggPSBlZGdlSW5kZXggKiAyICsgMTsKICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5fX2xvZ1RvcG9sb2d5V2FybmluZ3MgJiYgdGhpcy5lZGdlRmFjZXNbZWRnZUZhY2VJbmRleF0gIT0gLTEpCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignRWRnZSBwb2x5IDEgYWxyZWFkeSBzZXQuIE1lc2ggaXMgbm9uLW1hbmlmb2xkLicpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuZWRnZUZhY2VzW2VkZ2VGYWNlSW5kZXhdID0gZmFjZUluZGV4OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKCEoZmFjZUluZGV4IGluIHRoaXMuZmFjZUVkZ2VzKSkKICAgICAgICAgICAgICAgICAgICB0aGlzLmZhY2VFZGdlc1tmYWNlSW5kZXhdID0gW107CiAgICAgICAgICAgICAgICB0aGlzLmZhY2VFZGdlc1tmYWNlSW5kZXhdLnB1c2goZWRnZUluZGV4KTsKICAgICAgICAgICAgICAgIC8vIFB1c2ggdGhlIGVkZ2UgaW5kZXggb250byBib3RoIHZlcnRleCBlZGdlIGxpc3RzLgogICAgICAgICAgICAgICAgLy8gV2UgdXNlIFNldHMgdG8gYXZvaWQgYWRkaW5nIHRoZSBzYW1lIGVkZ2UgMnggdG8gdGhlIHNhbWUgdmVydGV4LgogICAgICAgICAgICAgICAgaWYgKHRoaXMudmVydGV4RWRnZXNbdjBdID09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMudmVydGV4RWRnZXNbdjBdID0gbmV3IFNldCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKHRoaXMudmVydGV4RWRnZXNbdjFdID09IHVuZGVmaW5lZCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMudmVydGV4RWRnZXNbdjFdID0gbmV3IFNldCgpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy52ZXJ0ZXhFZGdlc1t2MF0uYWRkKGVkZ2VJbmRleCk7CiAgICAgICAgICAgICAgICB0aGlzLnZlcnRleEVkZ2VzW3YxXS5hZGQoZWRnZUluZGV4KTsKICAgICAgICAgICAgICAgIC8vIGlmICh0aGlzLnZlcnRleEZhY2VzW3YwXSA9PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgICAgIC8vICAgICB0aGlzLnZlcnRleEZhY2VzW3YwXSA9IFtdOwogICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgLy8gdGhpcy52ZXJ0ZXhGYWNlc1t2MF0ucHVzaChmYWNlSW5kZXgpOwogICAgICAgICAgICB9OwogICAgICAgICAgICBjb25zdCBudW1GYWNlcyA9IHRoaXMuZ2V0TnVtRmFjZXMoKTsKICAgICAgICAgICAgZm9yIChsZXQgZmFjZUluZGV4ID0gMDsgZmFjZUluZGV4IDwgbnVtRmFjZXM7IGZhY2VJbmRleCsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCBmYWNlVmVydHMgPSB0aGlzLmdldEZhY2VWZXJ0ZXhJbmRpY2VzKGZhY2VJbmRleCk7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGZhY2VWZXJ0cy5sZW5ndGg7IGorKykgewogICAgICAgICAgICAgICAgICAgIGNvbnN0IHYwID0gZmFjZVZlcnRzW2pdOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHYxID0gZmFjZVZlcnRzWyhqICsgMSkgJSBmYWNlVmVydHMubGVuZ3RoXTsKICAgICAgICAgICAgICAgICAgICBhZGRFZGdlKHYwLCB2MSwgZmFjZUluZGV4KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDb21wdXRlcyBhIG5vcm1hbCB2YWx1ZSBwZXIgZmFjZSBieSBhdmVyYWdpbmcgdGhlIHRyaWFuZ2xlIG5vcm1hbHMgb2YgdGhlIGZhY2UuCiAgICAgICAgICovCiAgICAgICAgY29tcHV0ZUZhY2VOb3JtYWxzKCkgewogICAgICAgICAgICBjb25zdCBwb3NpdGlvbnMgPSB0aGlzLnBvc2l0aW9uczsKICAgICAgICAgICAgY29uc3QgZmFjZU5vcm1hbHMgPSBuZXcgVmVjM0F0dHJpYnV0ZSgpOwogICAgICAgICAgICB0aGlzLmFkZEZhY2VBdHRyaWJ1dGUoJ25vcm1hbHMnLCBmYWNlTm9ybWFscyk7CiAgICAgICAgICAgIGNvbnN0IG51bUZhY2VzID0gdGhpcy5nZXROdW1GYWNlcygpOwogICAgICAgICAgICBmb3IgKGxldCBmYWNlSW5kZXggPSAwOyBmYWNlSW5kZXggPCBudW1GYWNlczsgZmFjZUluZGV4KyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IGZhY2VWZXJ0cyA9IHRoaXMuZ2V0RmFjZVZlcnRleEluZGljZXMoZmFjZUluZGV4KTsKICAgICAgICAgICAgICAgIGNvbnN0IHAwID0gcG9zaXRpb25zLmdldFZhbHVlUmVmKGZhY2VWZXJ0c1swXSk7CiAgICAgICAgICAgICAgICBjb25zdCBwMSA9IHBvc2l0aW9ucy5nZXRWYWx1ZVJlZihmYWNlVmVydHNbMV0pOwogICAgICAgICAgICAgICAgbGV0IHByZXYgPSBwMTsKICAgICAgICAgICAgICAgIGNvbnN0IGZhY2VOb3JtYWwgPSBuZXcgVmVjMygpOwogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDI7IGogPCBmYWNlVmVydHMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBwbiA9IHBvc2l0aW9ucy5nZXRWYWx1ZVJlZihmYWNlVmVydHNbal0pOwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHYwID0gcHJldi5zdWJ0cmFjdChwMCk7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgdjEgPSBwbi5zdWJ0cmFjdChwMCk7CiAgICAgICAgICAgICAgICAgICAgZmFjZU5vcm1hbC5hZGRJblBsYWNlKHYwLmNyb3NzKHYxKS5ub3JtYWxpemUoKSk7CiAgICAgICAgICAgICAgICAgICAgcHJldiA9IHBuOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGZhY2VOb3JtYWwubGVuZ3RoU3F1YXJlZCgpIDwgTnVtYmVyLkVQU0lMT04pIDsKICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIGZhY2VOb3JtYWxzLnNldFZhbHVlKGZhY2VJbmRleCwgZmFjZU5vcm1hbC5ub3JtYWxpemUoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2FsY3VsYXRlcyB0aGUgYW5nbGVzIGF0IGVhY2ggZWRnZSBiZXR3ZWVuIHRoZSBhZGpvaW5pbmcgZmFjZXMKICAgICAgICAgKi8KICAgICAgICBjYWxjdWxhdGVFZGdlQW5nbGVzKCkgewogICAgICAgICAgICBpZiAodGhpcy52ZXJ0ZXhFZGdlcy5sZW5ndGggPT0gMCkKICAgICAgICAgICAgICAgIHRoaXMuZ2VuVG9wb2xvZ3lJbmZvKCk7CiAgICAgICAgICAgIHRoaXMuY29tcHV0ZUZhY2VOb3JtYWxzKCk7CiAgICAgICAgICAgIGNvbnN0IHBvc2l0aW9ucyA9IHRoaXMucG9zaXRpb25zOwogICAgICAgICAgICBjb25zdCBmYWNlTm9ybWFscyA9IHRoaXMuZ2V0RmFjZUF0dHJpYnV0ZSgnbm9ybWFscycpOwogICAgICAgICAgICB0aGlzLmVkZ2VWZWNzID0gW107CiAgICAgICAgICAgIHRoaXMuZWRnZUFuZ2xlcyA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5udW1FZGdlcyk7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5lZGdlRmFjZXMubGVuZ3RoOyBpICs9IDIpIHsKICAgICAgICAgICAgICAgIGNvbnN0IHYwID0gdGhpcy5lZGdlVmVydHNbaV07CiAgICAgICAgICAgICAgICBjb25zdCB2MSA9IHRoaXMuZWRnZVZlcnRzW2kgKyAxXTsKICAgICAgICAgICAgICAgIGNvbnN0IGVkZ2VWZWMgPSBwb3NpdGlvbnMuZ2V0VmFsdWVSZWYodjEpLnN1YnRyYWN0KHBvc2l0aW9ucy5nZXRWYWx1ZVJlZih2MCkpOwogICAgICAgICAgICAgICAgZWRnZVZlYy5ub3JtYWxpemVJblBsYWNlKCk7CiAgICAgICAgICAgICAgICB0aGlzLmVkZ2VWZWNzLnB1c2goZWRnZVZlYyk7CiAgICAgICAgICAgICAgICBjb25zdCBwMCA9IHRoaXMuZWRnZUZhY2VzW2ldOwogICAgICAgICAgICAgICAgY29uc3QgcDEgPSB0aGlzLmVkZ2VGYWNlc1tpICsgMV07CiAgICAgICAgICAgICAgICBpZiAocDAgPT0gLTEgfHwgcDEgPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAvLyBGbGFnIHRoZSBlZGdlIGFzIGEgYm9yZGVyIGVkZ2UuLi4uCiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGdlQW5nbGVzW2kgLyAyXSA9IE1hdGguUEkgKiAyLjA7CiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBjb25zdCBuMCA9IGZhY2VOb3JtYWxzLmdldFZhbHVlUmVmKHAwKTsKICAgICAgICAgICAgICAgIGNvbnN0IG4xID0gZmFjZU5vcm1hbHMuZ2V0VmFsdWVSZWYocDEpOwogICAgICAgICAgICAgICAgdGhpcy5lZGdlQW5nbGVzW2kgLyAyXSA9IG4wLmFuZ2xlVG8objEpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENvbXB1dGUgdmVydGV4IG5vcm1hbHMuCiAgICAgICAgICogQHBhcmFtIGhhcmRBbmdsZSAtIFRoZSBoYXJkQW5nbGUgdmFsdWUgaW4gcmFkaWFucy4KICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBjb21wdXRlVmVydGV4Tm9ybWFscyhoYXJkQW5nbGUgPSAxLjAgLyogcmFkaWFucyAqLykgewogICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUVkZ2VBbmdsZXMoKTsKICAgICAgICAgICAgY29uc3QgZmFjZU5vcm1hbHMgPSB0aGlzLmdldEZhY2VBdHRyaWJ1dGUoJ25vcm1hbHMnKTsKICAgICAgICAgICAgY29uc3Qgbm9ybWFsc0F0dHIgPSBuZXcgVmVjM0F0dHJpYnV0ZSgpOwogICAgICAgICAgICB0aGlzLmFkZFZlcnRleEF0dHJpYnV0ZSgnbm9ybWFscycsIG5vcm1hbHNBdHRyKTsKICAgICAgICAgICAgLy8gdGhlc2UgbWV0aG9kcyBhcmUgZmFzdGVyIHZlcnNpb25zIHRoYW4gdXNpbmcgdGhlIG1ldGhvZHMKICAgICAgICAgICAgLy8gcHJvdmlkZWQgb24gdGhlIGF0dHJpYnV0ZXMuIFdlIGNhY2hlIHZhbHVlcyBhbmQgdXNlIGhhcmQgY29kZWQgY29uc3RhbnRzLgogICAgICAgICAgICAvLyBjb25zdCBmYWNlTm9ybWFsc0J1ZmZlciA9IGZhY2VOb3JtYWxzLmRhdGEuYnVmZmVyCiAgICAgICAgICAgIGNvbnN0IGdldEZhY2VOb3JtYWwgPSAoaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgIHJldHVybiBmYWNlTm9ybWFscy5nZXRWYWx1ZVJlZihpbmRleCk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbnN0IHNldFZlcnRleE5vcm1hbCA9IChpbmRleCwgdmFsdWUpID0+IHsKICAgICAgICAgICAgICAgIG5vcm1hbHNBdHRyLnNldFZhbHVlKGluZGV4LCB2YWx1ZSk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGNvbnN0IGdldENvbm5lY3RlZEVkZ2VWZWNzID0gKGZhY2VJbmRleCwgdmVydGV4SW5kZXgpID0+IHsKICAgICAgICAgICAgICAgIGxldCBlMDsKICAgICAgICAgICAgICAgIGxldCBlMTsKICAgICAgICAgICAgICAgIGNvbnN0IGZhY2VFZGdlcyA9IHRoaXMuZmFjZUVkZ2VzW2ZhY2VJbmRleF07CiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgZmFjZUVkZ2VzKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuZWRnZVZlcnRzW2UgKiAyXSA9PSB2ZXJ0ZXhJbmRleCkgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWUwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZTAgPSB0aGlzLmVkZ2VWZWNzW2VdOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlMSA9IHRoaXMuZWRnZVZlY3NbZV07CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuZWRnZVZlcnRzW2UgKiAyICsgMV0gPT0gdmVydGV4SW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlMCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUwID0gdGhpcy5lZGdlVmVjc1tlXTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgZTEgPSB0aGlzLmVkZ2VWZWNzW2VdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHJldHVybiBbZTAsIGUxXTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnZlcnRleEVkZ2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAvLyBJZiB0aGlzIGZhY2UgaW5kZXhpbmcgZG9lc24ndCBzdGFydCBhdCAwLCB0aGVuIHRoZSB2ZXJ0ZXhFZGdlcyBkb24ndCBlaXRoZXIuCiAgICAgICAgICAgICAgICBpZiAodGhpcy52ZXJ0ZXhFZGdlc1tpXSA9PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgICAgICBjb25zdCBlZGdlcyA9IHRoaXMudmVydGV4RWRnZXNbaV07CiAgICAgICAgICAgICAgICAvLyBHcm91cHMgb2YgZmFjZXMgaGF2aW5nIGEgc21vb3RoIG5vcm1hbCBhdCB0aGUgY3VycmVudCB2ZXJ0ZXguCiAgICAgICAgICAgICAgICBjb25zdCBmYWNlR3JvdXBzID0gW107CiAgICAgICAgICAgICAgICBjb25zdCBhZGRGYWNlVG9Hcm91cCA9IChmYWNlKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgbGV0IGluR3JvdXAgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZhY2VHcm91cCBvZiBmYWNlR3JvdXBzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGluR3JvdXAgPSBmYWNlR3JvdXAuaW5jbHVkZXMoZmFjZSk7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbkdyb3VwKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmICghaW5Hcm91cCkKICAgICAgICAgICAgICAgICAgICAgICAgZmFjZUdyb3Vwcy5wdXNoKFtmYWNlXSk7CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgZm9yIChjb25zdCBlIG9mIGVkZ2VzKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZjAgPSB0aGlzLmVkZ2VGYWNlc1tlICogMl07CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZjEgPSB0aGlzLmVkZ2VGYWNlc1tlICogMiArIDFdOwogICAgICAgICAgICAgICAgICAgIGlmIChmMCAhPSAtMSAmJiBmMSAhPSAtMSAmJiB0aGlzLmVkZ2VBbmdsZXNbZV0gPCBoYXJkQW5nbGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKGYwICE9IC0xICYmIGYxID09IC0xICYmIHRoaXMuZWRnZUFuZ2xlc1tlXSA8IGhhcmRBbmdsZSkgewogICAgICAgICAgICAgICAgICAgICAgICBsZXQgZjBncm91cEluZGV4ID0gLTE7CiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBmMWdyb3VwSW5kZXggPSAtMTsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChsZXQgZ3JvdXBJbmRleCA9IDA7IGdyb3VwSW5kZXggPCBmYWNlR3JvdXBzLmxlbmd0aDsgZ3JvdXBJbmRleCsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZjBncm91cEluZGV4ID09IC0xICYmIGZhY2VHcm91cHNbZ3JvdXBJbmRleF0uaW5jbHVkZXMoZjApKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYwZ3JvdXBJbmRleCA9IGdyb3VwSW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZjFncm91cEluZGV4ID09IC0xICYmIGZhY2VHcm91cHNbZ3JvdXBJbmRleF0uaW5jbHVkZXMoZjEpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYxZ3JvdXBJbmRleCA9IGdyb3VwSW5kZXg7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGYwZ3JvdXBJbmRleCA9PSAtMSAmJiBmMWdyb3VwSW5kZXggPT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhY2VHcm91cHMucHVzaChbZjAsIGYxXSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoZjBncm91cEluZGV4ICE9IC0xICYmIGYxZ3JvdXBJbmRleCAhPSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGYwZ3JvdXBJbmRleCAhPSBmMWdyb3VwSW5kZXgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNZXJnZSB0aGUgMiBncm91cHMgdGhhdCB0aGUgc21vb3RoIGVkZ2Ugam9pbnMuCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFjZUdyb3Vwc1tmMGdyb3VwSW5kZXhdID0gZmFjZUdyb3Vwc1tmMGdyb3VwSW5kZXhdLmNvbmNhdChmYWNlR3JvdXBzW2YxZ3JvdXBJbmRleF0pOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhY2VHcm91cHMuc3BsaWNlKGYxZ3JvdXBJbmRleCwgMSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZjBncm91cEluZGV4ID09IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFjZUdyb3Vwc1tmMWdyb3VwSW5kZXhdLnB1c2goZjApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGYxZ3JvdXBJbmRleCA9PSAtMSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZhY2VHcm91cHNbZjBncm91cEluZGV4XS5wdXNoKGYxKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBpcyBhIGhhcmQgZWRnZSBvciBhIGJvcmRlciBlZGdlLi4uIEFkZCBmYWNlcyBzZXBhcmF0ZWx5IGdyb3VwLgogICAgICAgICAgICAgICAgICAgIGlmIChmMCAhPSAtMSkKICAgICAgICAgICAgICAgICAgICAgICAgYWRkRmFjZVRvR3JvdXAoZjApOwogICAgICAgICAgICAgICAgICAgIGlmIChmMSAhPSAtMSkKICAgICAgICAgICAgICAgICAgICAgICAgYWRkRmFjZVRvR3JvdXAoZjEpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLy8gU29ydCB0aGUgZ3JvdXBzIHRvIGhhdmUgdGhlIGJpZ2dlc3QgZ3JvdXAgZmlyc3QuCiAgICAgICAgICAgICAgICBmYWNlR3JvdXBzLnNvcnQoKGEsIGIpID0+IChhLmxlbmd0aCA8IGIubGVuZ3RoID8gMSA6IGEubGVuZ3RoID4gYi5sZW5ndGggPyAtMSA6IDApKTsKICAgICAgICAgICAgICAgIGxldCBmaXJzdFZlcnRleCA9IHRydWU7CiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZhY2VHcm91cCBvZiBmYWNlR3JvdXBzKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm9ybWFsID0gbmV3IFZlYzMoKTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZhY2VJbmRleCBvZiBmYWNlR3JvdXApIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZmFjZUVkZ2VzID0gZ2V0Q29ubmVjdGVkRWRnZVZlY3MoZmFjZUluZGV4LCBpKTsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHdlaWdodDsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZhY2VFZGdlc1swXSAmJiBmYWNlRWRnZXNbMV0pIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodCA9IGZhY2VFZGdlc1swXS5hbmdsZVRvKGZhY2VFZGdlc1sxXSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3JtYWwuYWRkSW5QbGFjZShnZXRGYWNlTm9ybWFsKGZhY2VJbmRleCkuc2NhbGUod2VpZ2h0KSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ3ZhcmlhYmxlIHdlaWdodCBpcyB1bmRlZmluZWQgYmVjYXVzZSBmYWNlRWRnZXNbMF0gb3IgZmFjZUVkZ2VzWzFdIGlzIHVuZGVmaW5lZCcpOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlmIChpID09IDEpCiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZygiRmFjZU5vcm1hbDoiICsgZmFjZUluZGV4ICsgIjoiICsgZ2V0RmFjZU5vcm1hbChmYWNlSW5kZXgpLnRvU3RyaW5nKCkpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBub3JtYWwubm9ybWFsaXplSW5QbGFjZSgpOwogICAgICAgICAgICAgICAgICAgIGlmIChmaXJzdFZlcnRleCkgewogICAgICAgICAgICAgICAgICAgICAgICBzZXRWZXJ0ZXhOb3JtYWwoaSwgbm9ybWFsKTsKICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RWZXJ0ZXggPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vcm1hbHNBdHRyLnNldFNwbGl0VmVydGV4VmFsdWVzKGksIGZhY2VHcm91cCwgbm9ybWFsLmFzQXJyYXkoKSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBub3JtYWxzQXR0cjsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIGNvbXB1dGVIYXJkRWRnZXNJbmRpY2VzIG1ldGhvZC4KICAgICAgICAgKiBAcGFyYW0gaGFyZEFuZ2xlIC0gVGhlIGhhcmRBbmdsZSB2YWx1ZSBpbiByYWRpYW5zLgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGNvbXB1dGVIYXJkRWRnZXNJbmRpY2VzKGhhcmRBbmdsZSA9IDEuMCkgewogICAgICAgICAgICBpZiAodGhpcy5lZGdlVmVydHMubGVuZ3RoID09IDApCiAgICAgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZUVkZ2VBbmdsZXMoKTsKICAgICAgICAgICAgY29uc3QgaGFyZEVkZ2VzID0gW107CiAgICAgICAgICAgIGNvbnN0IGFkZEVkZ2UgPSAoaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgIGhhcmRFZGdlcy5wdXNoKHRoaXMuZWRnZVZlcnRzW2luZGV4XSk7CiAgICAgICAgICAgICAgICBoYXJkRWRnZXMucHVzaCh0aGlzLmVkZ2VWZXJ0c1tpbmRleCArIDFdKTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmVkZ2VBbmdsZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLmVkZ2VBbmdsZXNbaV0gPiBoYXJkQW5nbGUpIHsKICAgICAgICAgICAgICAgICAgICBhZGRFZGdlKGkgKiAyKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gVWludDMyQXJyYXkuZnJvbShoYXJkRWRnZXMpOwogICAgICAgIH0KICAgICAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAgICAgLy8gUmVuZGVyaW5nCiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIGdlbkJ1ZmZlcnMgbWV0aG9kLgogICAgICAgICAqIEBwYXJhbSBvcHRzIC0gVGhlIG9wdHMgdmFsdWUuCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgZ2VuQnVmZmVycyhvcHRzKSB7CiAgICAgICAgICAgIC8vIENvbXB1dGUgdGhlIG5vcm1hbHMgb24gZGVtYW5kLgogICAgICAgICAgICAvLyBpZiAoISgnbm9ybWFscycgaW4gdGhpcy5fX3ZlcnRleEF0dHJpYnV0ZXMpKSB7CiAgICAgICAgICAgIC8vICAgICAvLyB0aGlzLl9fZ2VvbS5jb21wdXRlVmVydGV4Tm9ybWFscygpOwogICAgICAgICAgICAvLyAgICAgdGhpcy5hZGRWZXJ0ZXhBdHRyaWJ1dGUoIm5vcm1hbHMiLCBWZWMzLCAwLjApOwogICAgICAgICAgICAvLyB9CiAgICAgICAgICAgIGNvbnN0IHNwbGl0SW5kaWNlcyA9IHt9OwogICAgICAgICAgICBsZXQgc3BsaXRDb3VudCA9IDA7CiAgICAgICAgICAgIGZvciAoY29uc3QgWywgYXR0cl0gb2YgdGhpcy5fX3ZlcnRleEF0dHJpYnV0ZXMpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGF0dHJTcGxpdHMgPSBhdHRyLmdldFNwbGl0cygpOwogICAgICAgICAgICAgICAgZm9yIChjb25zdCBwb2x5Z29uIGluIGF0dHJTcGxpdHMpIHsKICAgICAgICAgICAgICAgICAgICBpZiAoIShwb2x5Z29uIGluIHNwbGl0SW5kaWNlcykpCiAgICAgICAgICAgICAgICAgICAgICAgIHNwbGl0SW5kaWNlc1twb2x5Z29uXSA9IHt9OwogICAgICAgICAgICAgICAgICAgIGNvbnN0IHZlcnRpY2VzID0gYXR0clNwbGl0c1twb2x5Z29uXTsKICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IHYgaW4gdmVydGljZXMpIHsKICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgdmVydGV4ID0gcGFyc2VJbnQodik7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghKHZlcnRleCBpbiBzcGxpdEluZGljZXNbcG9seWdvbl0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxpdEluZGljZXNbcG9seWdvbl1bdmVydGV4XSA9IHNwbGl0Q291bnQ7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzcGxpdENvdW50Kys7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgcG9zaXRpb25zID0gdGhpcy5wb3NpdGlvbnM7CiAgICAgICAgICAgIGNvbnN0IG51bVVuU3BsaXRWZXJ0aWNlcyA9IHBvc2l0aW9ucy5nZXRDb3VudCgpOwogICAgICAgICAgICBjb25zdCB0b3RhbE51bVZlcnRpY2VzID0gbnVtVW5TcGxpdFZlcnRpY2VzICsgc3BsaXRDb3VudDsKICAgICAgICAgICAgbGV0IGluZGljZXM7CiAgICAgICAgICAgIGlmICghb3B0cyB8fCBvcHRzLmluY2x1ZGVJbmRpY2VzICE9IGZhbHNlKSB7CiAgICAgICAgICAgICAgICBpbmRpY2VzID0gdGhpcy5nZW5lcmF0ZVRyaWFuZ3VsYXRlZEluZGljZXModG90YWxOdW1WZXJ0aWNlcywgbnVtVW5TcGxpdFZlcnRpY2VzLCBzcGxpdEluZGljZXMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIGxldCBtYXhJbmRleDsKICAgICAgICAgICAgLy8gaWYgKGRlYnVnQXR0clZhbHVlcykKICAgICAgICAgICAgLy8gICAgIG1heEluZGV4ID0gTWF0aC5tYXgoLi4uaW5kaWNlcyk7CiAgICAgICAgICAgIGNvbnN0IGF0dHJCdWZmZXJzID0ge307CiAgICAgICAgICAgIGZvciAoY29uc3QgW2F0dHJOYW1lLCBhdHRyXSBvZiB0aGlzLl9fdmVydGV4QXR0cmlidXRlcykgewogICAgICAgICAgICAgICAgbGV0IHZhbHVlczsKICAgICAgICAgICAgICAgIGlmIChzcGxpdENvdW50ID09IDApCiAgICAgICAgICAgICAgICAgICAgdmFsdWVzID0gYXR0ci5hc0FycmF5KCk7CiAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgdmFsdWVzID0gYXR0ci5nZW5lcmF0ZVNwbGl0VmFsdWVzKHNwbGl0SW5kaWNlcywgc3BsaXRDb3VudCk7CiAgICAgICAgICAgICAgICBjb25zdCBkaW1lbnNpb24gPSBhdHRyLnN0cmlkZTsKICAgICAgICAgICAgICAgIGNvbnN0IGNvdW50ID0gdmFsdWVzLmxlbmd0aCAvIGRpbWVuc2lvbjsKICAgICAgICAgICAgICAgIC8vIGlmIChkZWJ1Z0F0dHJWYWx1ZXMpIHsKICAgICAgICAgICAgICAgIC8vICAgICBpZiAoY291bnQgPD0gbWF4SW5kZXgpCiAgICAgICAgICAgICAgICAvLyAgICAgICAgIGNvbnNvbGUud2FybigiSW52YWxpZCBpbmRleGluZy4gQXR0ciB2YWx1ZSBpcyBpbnN1ZmZpY2llbnQgZm9yIGluZGV4aW5nOiIgKyBhdHRyTmFtZSArICIuIE1heCBJbmRleDoiICsgbWF4SW5kZXggKyAiIEF0dHIgU2l6ZToiICsgY291bnQpOwogICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgYXR0ckJ1ZmZlcnNbYXR0ck5hbWVdID0gewogICAgICAgICAgICAgICAgICAgIHZhbHVlczogdmFsdWVzLAogICAgICAgICAgICAgICAgICAgIGNvdW50OiBjb3VudCwKICAgICAgICAgICAgICAgICAgICBkaW1lbnNpb246IGRpbWVuc2lvbiwKICAgICAgICAgICAgICAgICAgICBub3JtYWxpemVkOiBhdHRyTmFtZSA9PSAnbm9ybWFscycsCiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6IGF0dHIuZ2V0RGF0YVR5cGVOYW1lKCksCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHsKICAgICAgICAgICAgICAgIG51bVZlcnRpY2VzOiB0aGlzLm51bVZlcnRpY2VzKCksCiAgICAgICAgICAgICAgICBudW1SZW5kZXJWZXJ0czogdG90YWxOdW1WZXJ0aWNlcywKICAgICAgICAgICAgICAgIGluZGljZXMsCiAgICAgICAgICAgICAgICBhdHRyQnVmZmVycywKICAgICAgICAgICAgfTsKICAgICAgICAgICAgLyogRGlzYWJsZWQgZHVyaW5nIFRTIG1pZ3JhdGlvbi4KICAgICAgICAgICAgaWYgKG9wdHMgJiYgb3B0cy5pbmNsdWRlVmVydGV4TmVpZ2hib3JzKSB7CiAgICAgICAgICAgICAgaWYgKHRoaXMudmVydGV4RWRnZXMgPT0gdW5kZWZpbmVkKSB0aGlzLmdlblRvcG9sb2d5SW5mbygpCiAgICAgICAgCiAgICAgICAgICAgICAgbGV0IGNvdW50ID0gMAogICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy52ZXJ0ZXhFZGdlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgLy8gSWYgdGhpcyBmYWNlIGluZGV4aW5nIGRvZXNuJ3Qgc3RhcnQgYXQgMCwgdGhlbiB0aGUgdmVydGV4RWRnZXMgZG9uJ3QgZWl0aGVyLgogICAgICAgICAgICAgICAgaWYgKHRoaXMudmVydGV4RWRnZXNbaV0pIGNvdW50ICs9IHRoaXMudmVydGV4RWRnZXNbaV0uc2l6ZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyBUaGUgYXJyYXkgd2lsbCBiZSBzdHJ1Y3R1cmVkIGFzIGEgc3RhcnQrb2Zmc2V0IGZvciBlYWNoIHZlcnRleCwgZm9sbG93ZWQKICAgICAgICAgICAgICAvLyBieSBhIDJkIGFycmF5IG9mIG5laWdoYm9yIGluZGljZXMuCiAgICAgICAgICAgICAgY29uc3QgdmVydGV4TmVpZ2hib3JzID0gbmV3IFVpbnQzMkFycmF5KHRoaXMudmVydGV4RWRnZXMubGVuZ3RoICogMiArIGNvdW50KQogICAgICAgICAgICAgIGNvbnN0IHNvcnRGYW5FZGdlcyA9IChmYW5FZGdlczogYW55KSA9PiB7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGZhbkVkZ2VzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICAgIGNvbnN0IGZlQSA9IGZhbkVkZ2VzW2ldCiAgICAgICAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgaTsgaisrKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmVCID0gZmFuRWRnZXNbal0KICAgICAgICAgICAgICAgICAgICBpZiAoZmVBWzBdICE9IC0xICYmIGZlQVswXSA9PSBmZUJbMV0pIHsKICAgICAgICAgICAgICAgICAgICAgIC8vICBtb3ZlIGZlQSBhZnRlciBmZUI7CiAgICAgICAgICAgICAgICAgICAgICBpZiAoaSAhPSBqICsgMSkgewogICAgICAgICAgICAgICAgICAgICAgICBmYW5FZGdlcy5zcGxpY2UoaSwgMSkKICAgICAgICAgICAgICAgICAgICAgICAgZmFuRWRnZXMuc3BsaWNlKGogKyAxLCAwLCBmZUEpCiAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZiAoZmVBWzFdICE9IC0xICYmIGZlQVsxXSA9PSBmZUJbMF0pIHsKICAgICAgICAgICAgICAgICAgICAgIC8vICBtb3ZlIGZlQSBiZWZvcmUgZmVCOwogICAgICAgICAgICAgICAgICAgICAgZmFuRWRnZXMuc3BsaWNlKGksIDEpCiAgICAgICAgICAgICAgICAgICAgICBmYW5FZGdlcy5zcGxpY2UoaiwgMCwgZmVBKQogICAgICAgICAgICAgICAgICAgICAgYnJlYWsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY29uc3QgY2hlY2tGYW5FZGdlcyA9IChmYW5FZGdlczogYW55KSA9PiB7CiAgICAgICAgICAgICAgICAvLyBub3cgY2hlY2sgdGhhdCB0aGUgZmFjZXMgYWxsIGJ1aWxkIGEgZmFuLiBNYXliZSBzdGFydGluZyBhbmQgZW5kaW5nIHdpdGggLTEKICAgICAgICAgICAgICAgIGlmIChmYW5FZGdlc1swXVswXSA9PSAtMSB8fCBmYW5FZGdlc1tmYW5FZGdlcy5sZW5ndGggLSAxXVsxXSA9PSAtMSkgewogICAgICAgICAgICAgICAgICBpZiAoZmFuRWRnZXNbMF1bMF0gIT0gLTEgfHwgZmFuRWRnZXNbZmFuRWRnZXMubGVuZ3RoIC0gMV1bMV0gIT0gLTEpIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0lmIGZhbiBzdGFydHMgd2l0aCAtMSwgaXQgbXVzdCBhbHNvIGVuZCB3aXRoIC0xJykKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmYW5FZGdlcy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICBjb25zdCBmZSA9IGZhbkVkZ2VzW2ldCiAgICAgICAgICAgICAgICAgIGlmIChmZVswXSA9PSAtMSB8fCBmZVsxXSA9PSAtMSkgewogICAgICAgICAgICAgICAgICAgIGlmIChpICE9IDAgJiYgaSAhPSBmYW5FZGdlcy5sZW5ndGggLSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJy0xIG9ubHkgYWxsb3dlZCBhdCB0aGUgYmVnaW5uaW5nIGFuZCBlbmQgb2YgYSBmYW4uJykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKGZlWzBdICE9IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgbGV0IHByZXYgPSBpIC0gMQogICAgICAgICAgICAgICAgICAgIGlmIChwcmV2IDwgMCkgcHJldiArPSBmYW5FZGdlcy5sZW5ndGgKICAgICAgICAgICAgICAgICAgICBpZiAoZmVbMF0gIT0gZmFuRWRnZXNbcHJldl1bMV0pIHsKICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFjZXMgYXJlIG5vdCBzZXF1ZW50aWFsJykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgaWYgKGZlWzFdICE9IC0xKSB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV4dCA9IChpICsgMSkgJSBmYW5FZGdlcy5sZW5ndGgKICAgICAgICAgICAgICAgICAgICBpZiAoZmVbMV0gIT0gZmFuRWRnZXNbbmV4dF1bMF0pIHsKICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFjZXMgYXJlIG5vdCBzZXF1ZW50aWFsJykKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgCiAgICAgICAgICAgICAgLy8gUG9wdWxhdGUgdGhlIHN0YXJ0IGFuZCBvZmZzZXQgdmFsdWVzLgogICAgICAgICAgICAgIGxldCBvZmZzZXQgPSB0aGlzLnZlcnRleEVkZ2VzLmxlbmd0aCAqIDIKICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMudmVydGV4RWRnZXMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGlmICh0aGlzLnZlcnRleEVkZ2VzW2ldID09IHVuZGVmaW5lZCkgY29udGludWUKICAgICAgICAgICAgICAgIGNvbnN0IGVkZ2VzID0gdGhpcy52ZXJ0ZXhFZGdlc1tpXQogICAgICAgIAogICAgICAgICAgICAgICAgLy8gQnVpbGQgYSBzb3J0ZWQgbGlzdCBvZiBmYWNlcyBiYXNlZCBvbiBhIGZhbiBhcm91bmQKICAgICAgICAgICAgICAgIC8vIHRoZSB2ZXJ0ZXguCiAgICAgICAgICAgICAgICBjb25zdCBmYW5FZGdlcyA9IFtdCiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGUgb2YgZWRnZXMpIHsKICAgICAgICAgICAgICAgICAgY29uc3QgdjAgPSB0aGlzLmVkZ2VWZXJ0c1tlICogMl0KICAgICAgICAgICAgICAgICAgY29uc3QgdjEgPSB0aGlzLmVkZ2VWZXJ0c1tlICogMiArIDFdCiAgICAgICAgICAgICAgICAgIGxldCBmMCA9IHRoaXMuZWRnZUZhY2VzW2UgKiAyXQogICAgICAgICAgICAgICAgICBsZXQgZjEgPSB0aGlzLmVkZ2VGYWNlc1tlICogMiArIDFdCiAgICAgICAgICAgICAgICAgIGxldCBuZWlnVmVydAogICAgICAgICAgICAgICAgICBpZiAodjAgPT0gaSkgewogICAgICAgICAgICAgICAgICAgIG5laWdWZXJ0ID0gdjEKICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh2MSA9PSBpKSB7CiAgICAgICAgICAgICAgICAgICAgbmVpZ1ZlcnQgPSB2MAogICAgICAgICAgICAgICAgICAgIC8vIHN3YXAgdGhlIGZhY2VzCiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG1wID0gZjAKICAgICAgICAgICAgICAgICAgICBmMCA9IGYxCiAgICAgICAgICAgICAgICAgICAgZjEgPSB0bXAKICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgdG9wb2xvZ3knKQogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgIGZhbkVkZ2VzLnB1c2goW2YwLCBmMSwgbmVpZ1ZlcnRdKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgc29ydEZhbkVkZ2VzKGZhbkVkZ2VzKQogICAgICAgICAgICAgICAgY2hlY2tGYW5FZGdlcyhmYW5FZGdlcykKICAgICAgICAgICAgICAgIGNvbnN0IGNsb3NlZCA9IGZhbkVkZ2VzWzBdWzBdICE9IC0xIHx8IGZhbkVkZ2VzW2ZhbkVkZ2VzLmxlbmd0aCAtIDFdWzFdICE9IC0xCiAgICAgICAgICAgICAgICBsZXQgZmxhZ3MgPSAwCiAgICAgICAgICAgICAgICBpZiAoY2xvc2VkKSBmbGFncyArPSAxCiAgICAgICAgICAgICAgICB2ZXJ0ZXhOZWlnaGJvcnNbaSAqIDJdID0gb2Zmc2V0CiAgICAgICAgICAgICAgICB2ZXJ0ZXhOZWlnaGJvcnNbaSAqIDIgKyAxXSA9IGVkZ2VzLnNpemUgKyAoZmxhZ3MgPDwgOCkKICAgICAgICAgICAgICAgIGZvciAoY29uc3QgZmUgb2YgZmFuRWRnZXMpIHsKICAgICAgICAgICAgICAgICAgdmVydGV4TmVpZ2hib3JzW29mZnNldF0gPSBmZVsyXQogICAgICAgICAgICAgICAgICBvZmZzZXQrKwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICA7KHJlc3VsdCBhcyBhbnkpLnZlcnRleE5laWdoYm9ycyA9IHZlcnRleE5laWdoYm9ycwogICAgICAgICAgICB9CiAgICAgICAgICAgICovCiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENvbXB1dGUgdGhlIG51bWJlciBvZiB0cmlhbmdsZXMuIEZvciBoaWdoZXIgZGVncmVlIHBvbHlnb25zLCB0aGV5IGFyZSBkaXZpZGVkIGludG8gbXVsdGlwbGUgdHJpYW5nbGVzIGZvciByZW5kZXJpbmcuCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdGhlIG51bWJlciBvZiB0cmlhbmdsZXMuCiAgICAgICAgICovCiAgICAgICAgY29tcHV0ZU51bVRyaWFuZ2xlcygpIHsKICAgICAgICAgICAgbGV0IG51bVZlcnRzUGVyRmFjZSA9IDM7CiAgICAgICAgICAgIGxldCB0cmlzQ291bnQgPSAwOwogICAgICAgICAgICBmb3IgKGNvbnN0IGZjIG9mIHRoaXMuZmFjZUNvdW50cykgewogICAgICAgICAgICAgICAgdHJpc0NvdW50ICs9IGZjICogKG51bVZlcnRzUGVyRmFjZSAtIDIpOwogICAgICAgICAgICAgICAgbnVtVmVydHNQZXJGYWNlKys7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRyaXNDb3VudDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVG8gcHJlcGFyZSBkYXRhIGZvciByZW5kZXJpbmcsIHRoZSBpbmRpY2VzIGZvciB0aGUgcG9seWdvbnMgaXMgdXNlZCB0byBjb21wdXRlIGEgbmV3IGluZGV4IGJ1ZmZlciBiYXNlZCBvbgogICAgICAgICAqIG9ubHkgdHJpYW5nbGVzLiBUaGlzIGlzIHVzZWQgZHVyaW5nIHJlbmRlcmluZyBhbmQgdGhlIHJlc3VsdGluZyBpbmRpY2VzIHVwbG9hZGVkIG90IHRoZSBHUFUgIGJ5IEdMTWVzaCBjbGFzcy4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSB0b3RhbE51bVZlcnRpY2VzIC0gVGhlIHRvdGFsIG51bWJlciBvZiB2ZXJ0aWNlcy4KICAgICAgICAgKiBAcGFyYW0gbnVtVW5TcGxpdFZlcnRpY2VzIC0gVGhlIHRvdGFsIG51bWJlciBvZiB1bi1zcGxpdCB2ZXJ0aWNlcy4KICAgICAgICAgKiBAcGFyYW0gc3BsaXRJbmRpY2VzIC0gVGhlIHNwbGl0SW5kaWNlcyB2YWx1ZS4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIHR5cGVkIGFycmF5IGNvbnRhaW5pbmcgdGhlIHRyaWFuZ3VsYXRlZCBpbmRpY2VzLgogICAgICAgICAqLwogICAgICAgIGdlbmVyYXRlVHJpYW5ndWxhdGVkSW5kaWNlcyh0b3RhbE51bVZlcnRpY2VzLCBudW1VblNwbGl0VmVydGljZXMsIHNwbGl0SW5kaWNlcykgewogICAgICAgICAgICBjb25zdCB0cmlzQ291bnQgPSB0aGlzLmNvbXB1dGVOdW1UcmlhbmdsZXMoKTsKICAgICAgICAgICAgbGV0IHRyaWFuZ3VsYXRlZEluZGljZXM7CiAgICAgICAgICAgIGlmICh0b3RhbE51bVZlcnRpY2VzIDwgTWF0aC5wb3coMiwgOCkpCiAgICAgICAgICAgICAgICB0cmlhbmd1bGF0ZWRJbmRpY2VzID0gbmV3IFVpbnQ4QXJyYXkodHJpc0NvdW50ICogMyk7CiAgICAgICAgICAgIGVsc2UgaWYgKHRvdGFsTnVtVmVydGljZXMgPCBNYXRoLnBvdygyLCAxNikpCiAgICAgICAgICAgICAgICB0cmlhbmd1bGF0ZWRJbmRpY2VzID0gbmV3IFVpbnQxNkFycmF5KHRyaXNDb3VudCAqIDMpOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB0cmlhbmd1bGF0ZWRJbmRpY2VzID0gbmV3IFVpbnQzMkFycmF5KHRyaXNDb3VudCAqIDMpOwogICAgICAgICAgICBsZXQgdHJpYW5nbGVWZXJ0ZXggPSAwOwogICAgICAgICAgICBjb25zdCBhZGRUcmlhbmdsZVZlcnRleEluZGV4ID0gZnVuY3Rpb24gKHZlcnRleCwgZmFjZUluZGV4KSB7CiAgICAgICAgICAgICAgICBpZiAodmVydGV4IGluIHNwbGl0SW5kaWNlcyAmJiBmYWNlSW5kZXggaW4gc3BsaXRJbmRpY2VzW3ZlcnRleF0pCiAgICAgICAgICAgICAgICAgICAgdmVydGV4ID0gbnVtVW5TcGxpdFZlcnRpY2VzICsgc3BsaXRJbmRpY2VzW3ZlcnRleF1bZmFjZUluZGV4XTsKICAgICAgICAgICAgICAgIHRyaWFuZ3VsYXRlZEluZGljZXNbdHJpYW5nbGVWZXJ0ZXhdID0gdmVydGV4OwogICAgICAgICAgICAgICAgdHJpYW5nbGVWZXJ0ZXgrKzsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgY29uc3QgbnVtRmFjZXMgPSB0aGlzLmdldE51bUZhY2VzKCk7CiAgICAgICAgICAgIGZvciAobGV0IGZhY2VJbmRleCA9IDA7IGZhY2VJbmRleCA8IG51bUZhY2VzOyBmYWNlSW5kZXgrKykgewogICAgICAgICAgICAgICAgY29uc3QgZmFjZVZlcnRzID0gdGhpcy5nZXRGYWNlVmVydGV4SW5kaWNlcyhmYWNlSW5kZXgpOwogICAgICAgICAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCBmYWNlVmVydHMubGVuZ3RoOyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBpZiAoaiA+PSAzKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvciBlYWNoIGFkZGl0aW9uYWwgdHJpYW5nbGUsIHdlIGhhdmUgdG8gYWRkIDIgaW5kaWNlcy4KICAgICAgICAgICAgICAgICAgICAgICAgYWRkVHJpYW5nbGVWZXJ0ZXhJbmRleChmYWNlVmVydHNbMF0sIGZhY2VJbmRleCk7CiAgICAgICAgICAgICAgICAgICAgICAgIGFkZFRyaWFuZ2xlVmVydGV4SW5kZXgoZmFjZVZlcnRzW2ogLSAxXSwgZmFjZUluZGV4KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgYWRkVHJpYW5nbGVWZXJ0ZXhJbmRleChmYWNlVmVydHNbal0sIGZhY2VJbmRleCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHRyaWFuZ3VsYXRlZEluZGljZXM7CiAgICAgICAgfQogICAgICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgICAvLyBQZXJzaXN0ZW5jZQogICAgICAgIC8qKgogICAgICAgICAqIFJlc3RvcmVzIG1lc2ggcHJvcGVydGllcyBmcm9tIGEgYmluYXJ5IHJlYWRlci4KICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSByZWFkZXIgLSBUaGUgcmVhZGVyIHZhbHVlLgogICAgICAgICAqIEBwYXJhbSBjb250ZXh0IC0gVGhlIGNvbnRleHQgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgcmVhZEJpbmFyeShyZWFkZXIsIGNvbnRleHQpIHsKICAgICAgICAgICAgc3VwZXIubG9hZEJhc2VHZW9tQmluYXJ5KHJlYWRlciwgY29udGV4dCk7CiAgICAgICAgICAgIHRoaXMuc2V0RmFjZUNvdW50cyhBcnJheS5mcm9tKHJlYWRlci5sb2FkVUludDMyQXJyYXkoKSkpOwogICAgICAgICAgICBjb25zdCBudW1GYWNlcyA9IHRoaXMuZ2V0TnVtRmFjZXMoKTsKICAgICAgICAgICAgLy8gTm90ZTogd2UgY2FuIHJlbW92ZSB0aGlzLiBXZSBjYW4gaW5mZXIgdGhpcyBmcm9tIHRoZSBhYm92ZSBmYWNlQ291bnRzIGFycmF5LgogICAgICAgICAgICBjb25zdCBmYWNlVmVydGV4Q291bnRzID0gcmVhZGVyLmxvYWRVSW50OEFycmF5KG51bUZhY2VzKTsKICAgICAgICAgICAgY29uc3Qgb2Zmc2V0UmFuZ2UgPSByZWFkZXIubG9hZFNJbnQzMlZlYzIoKTsKICAgICAgICAgICAgY29uc3QgYnl0ZXMgPSByZWFkZXIubG9hZFVJbnQ4KCk7CiAgICAgICAgICAgIGxldCBmYWNlVmVydGV4SW5kZXhEZWx0YXM7CiAgICAgICAgICAgIGlmIChieXRlcyA9PSAxKQogICAgICAgICAgICAgICAgZmFjZVZlcnRleEluZGV4RGVsdGFzID0gcmVhZGVyLmxvYWRVSW50OEFycmF5KCk7CiAgICAgICAgICAgIGVsc2UgaWYgKGJ5dGVzID09IDIpCiAgICAgICAgICAgICAgICBmYWNlVmVydGV4SW5kZXhEZWx0YXMgPSByZWFkZXIubG9hZFVJbnQxNkFycmF5KCk7CiAgICAgICAgICAgIGVsc2UgaWYgKGJ5dGVzID09IDQpCiAgICAgICAgICAgICAgICBmYWNlVmVydGV4SW5kZXhEZWx0YXMgPSByZWFkZXIubG9hZFVJbnQzMkFycmF5KCk7CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ2ZhY2VWZXJ0ZXhJbmRleERlbHRhcyB1bmRlZmluZWQnKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgICAgICAgLy8gTm90ZTogVGhlIE1lc2ggY29tcHJlc3Npb24gc3lzdGVtIG5lZWRzIGEgdGhvcm91Z2ggcmV2aWV3LgogICAgICAgICAgICAvLyBUaGUgQysrIGNsYXNzZXMgYXJlIG5vdCBzdG9yaW5nIGZhY2UgaW5kaWNlcyBpbiBhIHNvcnRlZCBtYW5uZXIuCiAgICAgICAgICAgIC8vIFNvIHF1YWRzIHByZWNlZGUgdHJpYW5nbGVzIGluIHRoZSBpbmRleGluZywgd2hpY2ggaXNuJ3Qgc3VwcG9zZWQgdG8gaGFwcGVuLgogICAgICAgICAgICAvLyBXZSBzaG91bGQgZm9yY2UgdGhlIEMrKyBjb2RlIHRvIHN0b3JlIHF1YWRzIGFuZCB0cmlhbmdsZXMgaW4gb3JkZXIuCiAgICAgICAgICAgIC8vIGUuZy4gaW1wbGVtZW50IHRoZSAnYWRkRmFjZScgbWV0aG9kIGluIEMrKyBzbyBpdCBhdXRvbWF0aWNhbGx5IGRvZXMgdGhpcy4KICAgICAgICAgICAgbGV0IG51bUZhY2VWZXJ0cyA9IDM7CiAgICAgICAgICAgIGxldCBvZmZzZXQgPSAwOwogICAgICAgICAgICBjb25zdCBmYWNlT2Zmc2V0c0J5Q291bnQgPSB0aGlzLmZhY2VDb3VudHMubWFwKChmYywgaW5kZXgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IG9mZnNldDsKICAgICAgICAgICAgICAgIG9mZnNldCArPSBmYyAqIG51bUZhY2VWZXJ0czsKICAgICAgICAgICAgICAgIG51bUZhY2VWZXJ0cysrOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGxldCBzcmNPZmZzZXQgPSAwOwogICAgICAgICAgICBsZXQgcHJldkNvdW50ID0gMDsKICAgICAgICAgICAgY29uc3QgZmFjZU9mZnNldHMgPSBbXTsKICAgICAgICAgICAgZm9yIChsZXQgZmFjZUluZGV4ID0gMDsgZmFjZUluZGV4IDwgbnVtRmFjZXM7IGZhY2VJbmRleCsrKSB7CiAgICAgICAgICAgICAgICBjb25zdCBmYyA9IGZhY2VWZXJ0ZXhDb3VudHNbZmFjZUluZGV4XTsKICAgICAgICAgICAgICAgIGNvbnN0IG9mZnNldCA9IGZhY2VPZmZzZXRzQnlDb3VudFtmY107CiAgICAgICAgICAgICAgICBjb25zdCBjb3VudCA9IGZjICsgMzsKICAgICAgICAgICAgICAgIGZhY2VPZmZzZXRzW2ZhY2VJbmRleF0gPSBvZmZzZXQ7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGNvdW50OyBqKyspIHsKICAgICAgICAgICAgICAgICAgICBjb25zdCBzcmNGYWNlVmVydGV4ID0gc3JjT2Zmc2V0ICsgajsKICAgICAgICAgICAgICAgICAgICBjb25zdCBmYWNlVmVydGV4ID0gb2Zmc2V0ICsgajsKICAgICAgICAgICAgICAgICAgICBjb25zdCBkZWx0YSA9IGZhY2VWZXJ0ZXhJbmRleERlbHRhc1tzcmNGYWNlVmVydGV4XSArIG9mZnNldFJhbmdlLng7CiAgICAgICAgICAgICAgICAgICAgaWYgKGZhY2VJbmRleCA9PSAwKQogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9fZmFjZVZlcnRleEluZGljZXNbZmFjZVZlcnRleF0gPSBkZWx0YTsKICAgICAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHByZXZGYWNlVmVydGV4ID0gZmFjZU9mZnNldHNbZmFjZUluZGV4IC0gMV07CiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZGYWNlVmVydGV4ICs9IGogPCBwcmV2Q291bnQgPyBqIDogcHJldkNvdW50IC0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2ZhY2VWZXJ0ZXhJbmRpY2VzW2ZhY2VWZXJ0ZXhdID0gdGhpcy5fX2ZhY2VWZXJ0ZXhJbmRpY2VzW3ByZXZGYWNlVmVydGV4XSArIGRlbHRhOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHNyY09mZnNldCArPSBjb3VudDsKICAgICAgICAgICAgICAgIGZhY2VPZmZzZXRzQnlDb3VudFtmY10gKz0gY291bnQ7CiAgICAgICAgICAgICAgICBwcmV2Q291bnQgPSBjb3VudDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoIXRoaXMuaGFzVmVydGV4QXR0cmlidXRlKCdub3JtYWxzJykpIHsKICAgICAgICAgICAgICAgIHRoaXMuY29tcHV0ZVZlcnRleE5vcm1hbHMoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyB0aGlzLmNvbXB1dGVWZXJ0ZXhOb3JtYWxzKCk7CiAgICAgICAgICAgIHRoaXMuZW1pdCgnZ2VvbURhdGFDaGFuZ2VkJyk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFRoZSB0b0pTT04gbWV0aG9kIGVuY29kZXMgdGhpcyB0eXBlIGFzIGEganNvbiBvYmplY3QgZm9yIHBlcnNpc3RlbmNlLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIGNvbnRleHQgLSBUaGUgY29udGV4dCB2YWx1ZS4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyB0aGUganNvbiBvYmplY3QuCiAgICAgICAgICovCiAgICAgICAgdG9KU09OKGNvbnRleHQpIHsKICAgICAgICAgICAgY29uc3QgaiA9IHN1cGVyLnRvSlNPTihjb250ZXh0KTsKICAgICAgICAgICAgaWYgKCFjb250ZXh0IHx8ICFjb250ZXh0LnNraXBUb3BvbG9neSkgewogICAgICAgICAgICAgICAgai5mYWNlQ291bnRzID0gQXJyYXkuZnJvbSh0aGlzLmZhY2VDb3VudHMpOwogICAgICAgICAgICAgICAgai5mYWNlVmVydGV4SW5kaWNlcyA9IEFycmF5LmZyb20odGhpcy5fX2ZhY2VWZXJ0ZXhJbmRpY2VzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gajsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogVGhlIGZyb21KU09OIG1ldGhvZCBkZWNvZGVzIGEganNvbiBvYmplY3QgZm9yIHRoaXMgdHlwZS4KICAgICAgICAgKgogICAgICAgICAqIGUuZy4gdG8gbG9hZCBkYXRhIGludG8gdGhlIG1lc2ggY2xhc3MsIHByb3ZpZGUgYSBqc29uIHN0cnVjdHVyZSBzaW1pbGFyIHRvIHRoZSBmb2xsb3dpbmcuCiAgICAgICAgICogTm90ZTogZmFjZUNvdW50cyBpcyBhbiBhcnJheSBvZiBjb3VudCB2YWx1ZXMsIHN0YXJ0aW5nIHdpdGggdGhlIG51bWJlciBvZiB0cmlhbmdsZXMsIHRoZW4gdGhlIG51bWJlciBvZiBxdWFkcy4gU2VlICNzZXRGYWNlQ291bnRzCiAgICAgICAgICogVGhlIGZhY2VWZXJ0ZXhJbmRpY2VzIGFycmF5IHNob3VsZCBhbHNvIGJlIHNvcnRlZCB0byBjb250YWluIGFsbCB0aGUgdHJpYW5nbGVzIGZpcnN0LCBmb2xsb3dlZCBieSB0aGUgcXVhZHMsIGFuZCB0aGVuIHRoZSBwZW50YWdvbnMgZXRjLi4KICAgICAgICAgKiBgYGBqc29uCiAgICAgICAgICogLy8gVGhpcyBjb2RlIHdpbGwgZGVmaW5lIGEgbWVzaCBtYWRlIHVwIG9mIDIgdHJpYW5nbGVzIGFuZCB0aGVuIGEgcXVhZC4KICAgICAgICAgKiBjb25zdCBtZXNoID0gbmV3IE1lc2goKQogICAgICAgICAqIG1lc2guZnJvbUpTT04oewogICAgICAgICAqICAgZmFjZUNvdW50czpbMiwgMV0sCiAgICAgICAgICogICBmYWNlVmVydGV4SW5kaWNlczogWzAsIDEsIDIsIDAsIDIsIDMsIDMsIDIsIDQsIDVdLAogICAgICAgICAqICAgbnVtVmVydGljZXM6IDYsCiAgICAgICAgICogICB2ZXJ0ZXhBdHRyaWJ1dGVzOiB7CiAgICAgICAgICogICAgIHBvc2l0aW9uczogewogICAgICAgICAqICAgICAgIGRhdGFUeXBlOiAnVmVjMycKICAgICAgICAgKiAgICAgICBkZWZhdWx0U2NhbGFyVmFsdWU6IDAuMCwKICAgICAgICAgKiAgICAgICBkYXRhOiBbMCwwLDAsIDAsIDEsIDAsIDEsIDEsIDAsIDEsIDAsIDAsIDIsIDEsIDAsIDIsIDAsIDBdCiAgICAgICAgICogICAgIH0KICAgICAgICAgKiAgIH0KICAgICAgICAgKiB9CiAgICAgICAgICogYGBgCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gaiAtIFRoZSBqc29uIG9iamVjdCB0aGlzIGl0ZW0gbXVzdCBkZWNvZGUuCiAgICAgICAgICogQHBhcmFtIGNvbnRleHQgLSBUaGUgY29udGV4dCB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBmcm9tSlNPTihqLCBjb250ZXh0KSB7CiAgICAgICAgICAgIHN1cGVyLmZyb21KU09OKGosIGNvbnRleHQpOwogICAgICAgICAgICBpZiAoai5mYWNlQ291bnRzKQogICAgICAgICAgICAgICAgdGhpcy5mYWNlQ291bnRzID0gai5mYWNlQ291bnRzOwogICAgICAgICAgICBpZiAoai5mYWNlVmVydGV4SW5kaWNlcykKICAgICAgICAgICAgICAgIHRoaXMuX19mYWNlVmVydGV4SW5kaWNlcyA9IFVpbnQzMkFycmF5LmZyb20oai5mYWNlVmVydGV4SW5kaWNlcyk7CiAgICAgICAgfQogICAgfQogICAgUmVnaXN0cnkucmVnaXN0ZXIoJ01lc2gnLCBNZXNoKTsKCiAgICAvKiBlc2xpbnQtZGlzYWJsZSBuby11bnVzZWQtdmFycyAqLwogICAgLyoqCiAgICAgKiBSZWFkcyBiaW5hcnkgZGF0YSBpbiBhIHNwZWNpZmljIGVuY29kaW5nLiBVc2VkIGluIGxvYWRpbmcgYmluYXJ5IGRhdGEgc3VjaCBhcyB6Y2FkIGZpbGVzLgogICAgICovCiAgICBjbGFzcyBCaW5SZWFkZXIgewogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZSBhIGJpbiByZWFkZXIuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gZGF0YSAtIFRoZSBkYXRhIGJ1ZmZlci4KICAgICAgICAgKiBAcGFyYW0gYnl0ZU9mZnNldCAtIFRoZSBieXRlIG9mZnNldCB2YWx1ZSB0byBzdGFydCByZWFkaW5nIHRoZSBidWZmZXIuCiAgICAgICAgICogQHBhcmFtIGlzTW9iaWxlRGV2aWNlIC0gVGhlIGlzTW9iaWxlRGV2aWNlIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGNvbnN0cnVjdG9yKGRhdGEsIGJ5dGVPZmZzZXQgPSAwLCBpc01vYmlsZURldmljZSA9IHRydWUpIHsKICAgICAgICAgICAgdGhpcy5fX2RhdGEgPSBkYXRhOwogICAgICAgICAgICB0aGlzLl9fYnl0ZU9mZnNldCA9IGJ5dGVPZmZzZXQ7CiAgICAgICAgICAgIHRoaXMuX19kYXRhVmlldyA9IG5ldyBEYXRhVmlldyh0aGlzLl9fZGF0YSk7CiAgICAgICAgICAgIHRoaXMuX19pc01vYmlsZURldmljZSA9IGlzTW9iaWxlRGV2aWNlOwogICAgICAgICAgICB0aGlzLnV0ZjhkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgc3RhdGUgb2Ygd2hldGhlciBvciBub3QgdGhlIGBCaW5SZWFkZXJgIG9iamVjdCB3YXMgaW5zdGFudGlhdGVkIGZyb20gYSBtb2JpbGUgZGV2aWNlLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgdHJ1ZSBpcyBhIG1vYmlsZSBkZXZpY2UgaXMgZGV0ZWN0ZWQuCiAgICAgICAgICovCiAgICAgICAgZ2V0IGlzTW9iaWxlRGV2aWNlKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX2lzTW9iaWxlRGV2aWNlOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSBkYXRhIGJ1ZmZlciB3ZSdyZSByZWFkaW5nIGZyb20uCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIGRhdGEgYnVmZmVyIHdlIGFyZSByZWFkaW5nIGZyb20sCiAgICAgICAgICovCiAgICAgICAgZ2V0IGRhdGEoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyB0aGUgbGVuZ3RoIG9mIHRoZSBidWZmZXIuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHRvdGFsIGxlbmd0aCBvZiB0aGUgYnVmZmVyCiAgICAgICAgICovCiAgICAgICAgZ2V0IGJ5dGVMZW5ndGgoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YVZpZXcuYnl0ZUxlbmd0aDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyByZW1haW5pbmcgbGVuZ3RoIG9mIHRoZSBidWZmZXIgdG8gcmVhZC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmVtYWluaW5nIGxlbmd0aCBvZiB0aGUgYnVmZmVyIHRvIHJlYWQuCiAgICAgICAgICovCiAgICAgICAgZ2V0IHJlbWFpbmluZ0J5dGVMZW5ndGgoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9fZGF0YVZpZXcuYnl0ZUxlbmd0aCAtIHRoaXMuX19ieXRlT2Zmc2V0OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIGN1cnJlbnQgYnl0ZSBvZmZzZXQgaW4gdGhlIGJ1ZmZlci4KICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIGN1cnJlbnQgb2Zmc2V0IGluIHRoZSBiaW5hcnkgYnVmZmVyCiAgICAgICAgICovCiAgICAgICAgcG9zKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fX2J5dGVPZmZzZXQ7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFNldHMgdGhlIGJ5dGUgb2Zmc2V0IHZhbHVlLgogICAgICAgICAqIEBwYXJhbSBieXRlT2Zmc2V0IC0gVGhlIGJ5dGVPZmZzZXQgcGFyYW0uCiAgICAgICAgICovCiAgICAgICAgc2VlayhieXRlT2Zmc2V0KSB7CiAgICAgICAgICAgIHRoaXMuX19ieXRlT2Zmc2V0ID0gYnl0ZU9mZnNldDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQWRkcyBvZmZzZXQgYnl0ZXMgdG8gY3VycmVudCBvZmZzZXQgdmFsdWUuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gYnl0ZU9mZnNldCAtIFRoZSBieXRlIE9mZnNldCBhbW91bnQuCiAgICAgICAgICovCiAgICAgICAgYWR2YW5jZShieXRlT2Zmc2V0KSB7CiAgICAgICAgICAgIHRoaXMuX19ieXRlT2Zmc2V0ICs9IGJ5dGVPZmZzZXQ7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgdGhlIHVuc2lnbmVkIFVpbnQ4IHZhbHVlIGF0IGN1cnJlbnQgYnl0ZSBvZmZzZXQgcG9zaXRpb24sCiAgICAgICAgICogYW5kIGFkZHMgb25lIGJ5dGUgdG8gdGhlIG9mZnNldC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGxvYWRVSW50OCgpIHsKICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fX2RhdGFWaWV3LmdldFVpbnQ4KHRoaXMuX19ieXRlT2Zmc2V0KTsKICAgICAgICAgICAgdGhpcy5fX2J5dGVPZmZzZXQgKz0gMTsKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyB0aGUgdW5zaWduZWQgVWludDE2IHZhbHVlIGF0IGN1cnJlbnQgYnl0ZSBvZmZzZXQgcG9zaXRpb24sCiAgICAgICAgICogYW5kIGFkZHMgdHdvIGJ5dGVzIHRvIHRoZSBvZmZzZXQuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBsb2FkVUludDE2KCkgewogICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLl9fZGF0YVZpZXcuZ2V0VWludDE2KHRoaXMuX19ieXRlT2Zmc2V0LCB0cnVlKTsKICAgICAgICAgICAgdGhpcy5fX2J5dGVPZmZzZXQgKz0gMjsKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyB0aGUgdW5zaWduZWQgVWludDMyIHZhbHVlIGF0IGN1cnJlbnQgYnl0ZSBvZmZzZXQgcG9zaXRpb24sCiAgICAgICAgICogYW5kIGFkZHMgZm91ciBieXRlcyB0byB0aGUgb2Zmc2V0LgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgbG9hZFVJbnQzMigpIHsKICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gdGhpcy5fX2RhdGFWaWV3LmdldFVpbnQzMih0aGlzLl9fYnl0ZU9mZnNldCwgdHJ1ZSk7CiAgICAgICAgICAgIHRoaXMuX19ieXRlT2Zmc2V0ICs9IDQ7CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgdGhlIHNpZ25lZCBJbnQzMiB2YWx1ZSBhdCBjdXJyZW50IGJ5dGUgb2Zmc2V0IHBvc2l0aW9uLAogICAgICAgICAqIGFuZCBhZGRzIGZvdXIgYnl0ZXMgdG8gdGhlIG9mZnNldC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGxvYWRTSW50MzIoKSB7CiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX19kYXRhVmlldy5nZXRJbnQzMih0aGlzLl9fYnl0ZU9mZnNldCwgdHJ1ZSk7CiAgICAgICAgICAgIHRoaXMuX19ieXRlT2Zmc2V0ICs9IDQ7CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgdGhlIEZsb2F0MTYgdmFsdWUgYXQgY3VycmVudCBieXRlIG9mZnNldCBwb3NpdGlvbiwKICAgICAgICAgKiBhbmQgYWRkcyBmb3VyIGJ5dGVzIHRvIHRoZSBvZmZzZXQuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBsb2FkRmxvYXQxNigpIHsKICAgICAgICAgICAgY29uc3QgdWludDE2ID0gdGhpcy5sb2FkVUludDE2KCk7CiAgICAgICAgICAgIHJldHVybiBNYXRoRnVuY3Rpb25zLmRlY29kZTE2Qml0RmxvYXQodWludDE2KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyB0aGUgRmxvYXQxNiB2YWx1ZSBhdCBjdXJyZW50IGJ5dGUgb2Zmc2V0IHBvc2l0aW9uLAogICAgICAgICAqIGFuZCBhZGRzIHR3byBieXRlcyB0byB0aGUgb2Zmc2V0LgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgbG9hZFVGbG9hdDE2KCkgewogICAgICAgICAgICBjb25zdCByZXN1bHQgPSB0aGlzLmxvYWRGbG9hdDE2KCk7CiAgICAgICAgICAgIGlmIChyZXN1bHQgPCAwLjApIHsKICAgICAgICAgICAgICAgIHJldHVybiAyMDQ4LjAgLSByZXN1bHQ7IC8vIE5vdGU6IHN1YnRyYWN0IGEgbmVnYXRpdmUgbnVtYmVyIHRvIGFkZCBpdC4KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmV0dXJucyBhIHNpbmdsZSBzaWduZWQgRmxvYXQxNiB2YWx1ZSBhdCBjdXJyZW50IGJ5dGUgb2Zmc2V0IHBvc2l0aW9uIGZyb20gMiB1bnNpZ25lZCBJbnQ4IHZhbHVlcywKICAgICAgICAgKiBhbmQgYWRkcyB0d28gYnl0ZXMgdG8gdGhlIG9mZnNldC4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGxvYWRGbG9hdDE2RnJvbTJ4VUludDgoKSB7CiAgICAgICAgICAgIHRocm93IEVycm9yKCdsb2FkRmxvYXQxNkZyb20yeFVJbnQ4IG5vdCBpbXBsZW1lbnRlZCEnKTsKICAgICAgICAgICAgLy8gY29uc3QgcmVzdWx0ID0gdGhpcy5fX2RhdGFWaWV3LmdldEZsb2F0MTYodGhpcy5fX2J5dGVPZmZzZXQsIHRydWUpCiAgICAgICAgICAgIC8vIGNvbnN0IHVpbnQ4cyA9IHRoaXMubG9hZFVJbnQ4QXJyYXkoMik7CiAgICAgICAgICAgIC8vIHJldHVybiBNYXRoLmRlY29kZTE2Qml0RmxvYXQodWludDhzKTsKICAgICAgICAgICAgLy8gdGhpcy5fX2J5dGVPZmZzZXQgKz0gMgogICAgICAgICAgICAvLyByZXR1cm4gcmVzdWx0CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIExvYWRzIGFuZCByZXR1cm5zIGEgc2luZ2xlIFNpZ25lZCBpbnRlZ2VyIHZhbHVlIGZyb20gMiBVbnNpZ25lZCBGbG9hdDE2IHZhbHVlcy4KICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBsb2FkVUludDMyRnJvbTJ4VUZsb2F0MTYoKSB7CiAgICAgICAgICAgIGNvbnN0IHBhcnRBID0gdGhpcy5sb2FkVUZsb2F0MTYoKTsKICAgICAgICAgICAgY29uc3QgcGFydEIgPSB0aGlzLmxvYWRVRmxvYXQxNigpOwogICAgICAgICAgICByZXR1cm4gcGFydEEgKyBwYXJ0QiAqIDQwOTY7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIExvYWRzIGFuZCByZXR1cm5zIGEgc2luZ2xlIFNpZ25lZCBpbnRlZ2VyIHZhbHVlIGZyb20gMiBzaWduZWQgRmxvYXQxNiB2YWx1ZXMuCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgbG9hZFNJbnQzMkZyb20yeEZsb2F0MTYoKSB7CiAgICAgICAgICAgIGNvbnN0IHBhcnRBID0gdGhpcy5sb2FkRmxvYXQxNigpOwogICAgICAgICAgICBjb25zdCBwYXJ0QiA9IHRoaXMubG9hZEZsb2F0MTYoKTsKICAgICAgICAgICAgcmV0dXJuIHBhcnRBICsgcGFydEIgKiAyMDQ4OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIHRoZSBGbG9hdDMyIHZhbHVlIGF0IGN1cnJlbnQgYnl0ZSBvZmZzZXQgcG9zaXRpb24sCiAgICAgICAgICogYW5kIGFkZHMgZm91ciBieXRlcyB0byB0aGUgb2Zmc2V0LgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgbG9hZEZsb2F0MzIoKSB7CiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHRoaXMuX19kYXRhVmlldy5nZXRGbG9hdDMyKHRoaXMuX19ieXRlT2Zmc2V0LCB0cnVlKTsKICAgICAgICAgICAgdGhpcy5fX2J5dGVPZmZzZXQgKz0gNDsKICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmVhZHMgYnVmZmVyIGFuZCByZXR1cm4gYW4gdW5zaWduZWQgSW50OCBhcnJheSB3aXRoIHRoZSBzcGVjaWZpZWQgc2l6ZSwKICAgICAgICAgKiBzdGFydGluZyBmcm9tIGN1cnJlbnQgYnl0ZSBvZmZzZXQuCiAgICAgICAgICogQnl0ZSBvZmZzZXQgaXMgaW5jcmVhc2VkIGJ5IHRoZSBzcGVjaWZpZWQgYnl0ZSBzaXplLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHNpemUgLSBUaGUgc2l6ZSBwYXJhbS4KICAgICAgICAgKiBAcGFyYW0gY2xvbmUgLSBUaGUgY2xvbmUgcGFyYW0uCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgbG9hZFVJbnQ4QXJyYXkoc2l6ZSwgY2xvbmUgPSBmYWxzZSkgewogICAgICAgICAgICBpZiAoc2l6ZSA9PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgICBzaXplID0gdGhpcy5sb2FkVUludDMyKCk7CiAgICAgICAgICAgIGxldCByZXN1bHQ7CiAgICAgICAgICAgIGlmIChjbG9uZSkgewogICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5fX2RhdGEuc2xpY2UodGhpcy5fX2J5dGVPZmZzZXQsIHRoaXMuX19ieXRlT2Zmc2V0ICsgc2l6ZSkpOwogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggIT0gc2l6ZSkKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnYnJva2VuJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgVWludDhBcnJheSh0aGlzLl9fZGF0YSwgdGhpcy5fX2J5dGVPZmZzZXQsIHNpemUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuX19ieXRlT2Zmc2V0ICs9IHNpemU7CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJlYWRzIGJ1ZmZlciBhbmQgcmV0dXJuIGFuIHVuc2lnbmVkIEludDE2IGFycmF5IHdpdGggdGhlIHNwZWNpZmllZCBzaXplLAogICAgICAgICAqIHN0YXJ0aW5nIGZyb20gY3VycmVudCBieXRlIG9mZnNldC4KICAgICAgICAgKiBCeXRlIG9mZnNldCBpcyBpbmNyZWFzZWQgYnkgdGhlIHNwZWNpZmllZCBieXRlIHNpemUgeCAyLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHNpemUgLSBUaGUgc2l6ZSBwYXJhbS4KICAgICAgICAgKiBAcGFyYW0gY2xvbmUgLSBUaGUgY2xvbmUgcGFyYW0uCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgbG9hZFVJbnQxNkFycmF5KHNpemUsIGNsb25lID0gZmFsc2UpIHsKICAgICAgICAgICAgaWYgKHNpemUgPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgICAgc2l6ZSA9IHRoaXMubG9hZFVJbnQzMigpOwogICAgICAgICAgICBpZiAoc2l6ZSA9PSAwKQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBVaW50MTZBcnJheSgpOwogICAgICAgICAgICB0aGlzLnJlYWRQYWQoMik7CiAgICAgICAgICAgIGxldCByZXN1bHQ7CiAgICAgICAgICAgIGlmICh0aGlzLl9faXNNb2JpbGVEZXZpY2UpIHsKICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBVaW50MTZBcnJheShzaXplKTsKICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2l6ZTsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0W2ldID0gdGhpcy5fX2RhdGFWaWV3LmdldFVpbnQxNih0aGlzLl9fYnl0ZU9mZnNldCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2J5dGVPZmZzZXQgKz0gMjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGlmIChjbG9uZSkgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBVaW50MTZBcnJheSh0aGlzLl9fZGF0YS5zbGljZSh0aGlzLl9fYnl0ZU9mZnNldCwgdGhpcy5fX2J5dGVPZmZzZXQgKyBzaXplICogMikpOwogICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoICE9IHNpemUpCiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdicm9rZW4nKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBVaW50MTZBcnJheSh0aGlzLl9fZGF0YSwgdGhpcy5fX2J5dGVPZmZzZXQsIHNpemUpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgdGhpcy5fX2J5dGVPZmZzZXQgKz0gc2l6ZSAqIDI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogUmVhZHMgYnVmZmVyIGFuZCByZXR1cm4gYW4gdW5zaWduZWQgSW50MzIgYXJyYXkgd2l0aCB0aGUgc3BlY2lmaWVkIHNpemUsCiAgICAgICAgICogc3RhcnRpbmcgZnJvbSBjdXJyZW50IGJ5dGUgb2Zmc2V0LgogICAgICAgICAqIEJ5dGUgb2Zmc2V0IGlzIGluY3JlYXNlZCBieSB0aGUgc3BlY2lmaWVkIGJ5dGUgc2l6ZSB4IDQuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gc2l6ZSAtIFRoZSBzaXplIHBhcmFtLgogICAgICAgICAqIEBwYXJhbSBjbG9uZSAtIFRoZSBjbG9uZSBwYXJhbS4KICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBsb2FkVUludDMyQXJyYXkoc2l6ZSwgY2xvbmUgPSBmYWxzZSkgewogICAgICAgICAgICBpZiAoc2l6ZSA9PSB1bmRlZmluZWQpCiAgICAgICAgICAgICAgICBzaXplID0gdGhpcy5sb2FkVUludDMyKCk7CiAgICAgICAgICAgIGlmIChzaXplID09IDApCiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFVpbnQzMkFycmF5KCk7CiAgICAgICAgICAgIHRoaXMucmVhZFBhZCg0KTsKICAgICAgICAgICAgbGV0IHJlc3VsdDsKICAgICAgICAgICAgaWYgKHRoaXMuX19pc01vYmlsZURldmljZSkgewogICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFVpbnQzMkFycmF5KHNpemUpOwogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICByZXN1bHRbaV0gPSB0aGlzLl9fZGF0YVZpZXcuZ2V0VWludDMyKHRoaXMuX19ieXRlT2Zmc2V0LCB0cnVlKTsKICAgICAgICAgICAgICAgICAgICB0aGlzLl9fYnl0ZU9mZnNldCArPSA0OwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgaWYgKGNsb25lKSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFVpbnQzMkFycmF5KHRoaXMuX19kYXRhLnNsaWNlKHRoaXMuX19ieXRlT2Zmc2V0LCB0aGlzLl9fYnl0ZU9mZnNldCArIHNpemUgKiA0KSk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggIT0gc2l6ZSkKICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2Jyb2tlbicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gbmV3IFVpbnQzMkFycmF5KHRoaXMuX19kYXRhLCB0aGlzLl9fYnl0ZU9mZnNldCwgc2l6ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB0aGlzLl9fYnl0ZU9mZnNldCArPSBzaXplICogNDsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZWFkcyBidWZmZXIgYW5kIHJldHVybiBhIEZsb2F0MzIgYXJyYXkgd2l0aCB0aGUgc3BlY2lmaWVkIHNpemUsCiAgICAgICAgICogc3RhcnRpbmcgZnJvbSBjdXJyZW50IGJ5dGUgb2Zmc2V0LgogICAgICAgICAqIEJ5dGUgb2Zmc2V0IGlzIGluY3JlYXNlZCBieSB0aGUgc3BlY2lmaWVkIGJ5dGUgc2l6ZSB4IDQuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gc2l6ZSAtIFRoZSBzaXplIHBhcmFtLgogICAgICAgICAqIEBwYXJhbSBjbG9uZSAtIFRoZSBjbG9uZSBwYXJhbS4KICAgICAgICAgKiBAcmV0dXJuIC0gVGhlIHJldHVybiB2YWx1ZS4KICAgICAgICAgKi8KICAgICAgICBsb2FkRmxvYXQzMkFycmF5KHNpemUsIGNsb25lID0gZmFsc2UpIHsKICAgICAgICAgICAgaWYgKHNpemUgPT0gdW5kZWZpbmVkKQogICAgICAgICAgICAgICAgc2l6ZSA9IHRoaXMubG9hZFVJbnQzMigpOwogICAgICAgICAgICBpZiAoc2l6ZSA9PSAwKQogICAgICAgICAgICAgICAgcmV0dXJuIG5ldyBGbG9hdDMyQXJyYXkoKTsKICAgICAgICAgICAgdGhpcy5yZWFkUGFkKDQpOwogICAgICAgICAgICBsZXQgcmVzdWx0OwogICAgICAgICAgICBpZiAodGhpcy5fX2lzTW9iaWxlRGV2aWNlKSB7CiAgICAgICAgICAgICAgICByZXN1bHQgPSBuZXcgRmxvYXQzMkFycmF5KHNpemUpOwogICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKICAgICAgICAgICAgICAgICAgICByZXN1bHRbaV0gPSB0aGlzLl9fZGF0YVZpZXcuZ2V0RmxvYXQzMih0aGlzLl9fYnl0ZU9mZnNldCwgdHJ1ZSk7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2J5dGVPZmZzZXQgKz0gNDsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIGlmIChjbG9uZSkgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5fX2RhdGEuc2xpY2UodGhpcy5fX2J5dGVPZmZzZXQsIHRoaXMuX19ieXRlT2Zmc2V0ICsgc2l6ZSAqIDQpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IG5ldyBGbG9hdDMyQXJyYXkodGhpcy5fX2RhdGEsIHRoaXMuX19ieXRlT2Zmc2V0LCBzaXplKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIHRoaXMuX19ieXRlT2Zmc2V0ICs9IHNpemUgKiA0OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIFJldHVybnMgbmV4dCBzdHJpbmcuCiAgICAgICAgICogRmlyc3QgbG9va3MgZm9yIHRoZSBzdHJpbmcgbGVuZ3RoIGRlc2NyaXB0aW9uIGluIHRoZSBuZXh0IGZvdXIgYnl0ZXMgaW4gdGhlIGJ1ZmZlcihTdGFydGluZyBmcm9tIGJ5dGUgb2Zmc2V0KS4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBUaGUgcmV0dXJuIHZhbHVlLgogICAgICAgICAqLwogICAgICAgIGxvYWRTdHIoKSB7CiAgICAgICAgICAgIGNvbnN0IG51bUNoYXJzID0gdGhpcy5sb2FkVUludDMyKCk7CiAgICAgICAgICAgIGNvbnN0IGNoYXJzID0gbmV3IFVpbnQ4QXJyYXkodGhpcy5fX2RhdGEsIHRoaXMuX19ieXRlT2Zmc2V0LCBudW1DaGFycyk7CiAgICAgICAgICAgIHRoaXMuX19ieXRlT2Zmc2V0ICs9IG51bUNoYXJzOwogICAgICAgICAgICByZXR1cm4gdGhpcy51dGY4ZGVjb2Rlci5kZWNvZGUoY2hhcnMpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBSZXR1cm5zIGFuIGFycmF5IG9mIHN0cmluZ3MuCiAgICAgICAgICogRmlyc3QgcmVhZGluZyB0aGUgc2l6ZSBvZiB0aGUgYXJyYXkgdGhlbiByZWFkaW5nIGVhY2ggc3RyaW5nLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFRoZSByZXR1cm4gdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgbG9hZFN0ckFycmF5KCkgewogICAgICAgICAgICBjb25zdCBzaXplID0gdGhpcy5sb2FkVUludDMyKCk7CiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IFtdOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNpemU7IGkrKykgewogICAgICAgICAgICAgICAgcmVzdWx0W2ldID0gdGhpcy5sb2FkU3RyKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIGBWZWMyYCBvYmplY3Qgd2l0aCB0aGUgbmV4dCB0d28gc2lnbmVkIEludDMyIHZhbHVlcyBpbiB0aGUgYnVmZmVyLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYSBWZWMyLgogICAgICAgICAqLwogICAgICAgIGxvYWRTSW50MzJWZWMyKCkgewogICAgICAgICAgICBjb25zdCB4ID0gdGhpcy5sb2FkU0ludDMyKCk7CiAgICAgICAgICAgIGNvbnN0IHkgPSB0aGlzLmxvYWRTSW50MzIoKTsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMyKHgsIHkpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgYFZlYzJgIG9iamVjdCB3aXRoIHRoZSBuZXh0IHR3byB1bnNpZ25lZCBJbnQzMiB2YWx1ZXMgaW4gdGhlIGJ1ZmZlci4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIFZlYzIuCiAgICAgICAgICovCiAgICAgICAgbG9hZFVJbnQzMlZlYzIoKSB7CiAgICAgICAgICAgIGNvbnN0IHggPSB0aGlzLmxvYWRVSW50MzIoKTsKICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMubG9hZFVJbnQzMigpOwogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzIoeCwgeSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBgVmVjMmAgb2JqZWN0IHdpdGggdGhlIG5leHQgdHdvIEZsb2F0MTYgdmFsdWVzIGluIHRoZSBidWZmZXIuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIFZlYzIuCiAgICAgICAgICovCiAgICAgICAgbG9hZEZsb2F0MTZWZWMyKCkgewogICAgICAgICAgICBjb25zdCB4ID0gdGhpcy5sb2FkRmxvYXQxNigpOwogICAgICAgICAgICBjb25zdCB5ID0gdGhpcy5sb2FkRmxvYXQxNigpOwogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzIoeCwgeSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBgVmVjMmAgb2JqZWN0IHdpdGggdGhlIG5leHQgdHdvIEZsb2F0MzIgdmFsdWVzIGluIHRoZSBidWZmZXIuCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYSBWZWMyLgogICAgICAgICAqLwogICAgICAgIGxvYWRGbG9hdDMyVmVjMigpIHsKICAgICAgICAgICAgY29uc3QgeCA9IHRoaXMubG9hZEZsb2F0MzIoKTsKICAgICAgICAgICAgY29uc3QgeSA9IHRoaXMubG9hZEZsb2F0MzIoKTsKICAgICAgICAgICAgcmV0dXJuIG5ldyBWZWMyKHgsIHkpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgYFZlYzNgIG9iamVjdCB3aXRoIHRoZSBuZXh0IHRocmVlIEZsb2F0MTYgdmFsdWVzIGluIHRoZSBidWZmZXIuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIFZlYzMuCiAgICAgICAgICovCiAgICAgICAgbG9hZEZsb2F0MTZWZWMzKCkgewogICAgICAgICAgICBjb25zdCB4ID0gdGhpcy5sb2FkRmxvYXQxNigpOwogICAgICAgICAgICBjb25zdCB5ID0gdGhpcy5sb2FkRmxvYXQxNigpOwogICAgICAgICAgICBjb25zdCB6ID0gdGhpcy5sb2FkRmxvYXQxNigpOwogICAgICAgICAgICByZXR1cm4gbmV3IFZlYzMoeCwgeSwgeik7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBgVmVjM2Agb2JqZWN0IHdpdGggdGhlIG5leHQgdGhyZWUgRmxvYXQzMiB2YWx1ZXMgaW4gdGhlIGJ1ZmZlci4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGEgVmVjMy4KICAgICAgICAgKi8KICAgICAgICBsb2FkRmxvYXQzMlZlYzMoKSB7CiAgICAgICAgICAgIGNvbnN0IHggPSB0aGlzLmxvYWRGbG9hdDMyKCk7CiAgICAgICAgICAgIGNvbnN0IHkgPSB0aGlzLmxvYWRGbG9hdDMyKCk7CiAgICAgICAgICAgIGNvbnN0IHogPSB0aGlzLmxvYWRGbG9hdDMyKCk7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjMyh4LCB5LCB6KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIGBRdWF0YCBvYmplY3Qgd2l0aCB0aGUgbmV4dCBmb3VyIEZsb2F0MTYgdmFsdWVzIGluIHRoZSBidWZmZXIuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIFF1YXQuCiAgICAgICAgICovCiAgICAgICAgbG9hZEZsb2F0MTZRdWF0KCkgewogICAgICAgICAgICBjb25zdCB4ID0gdGhpcy5sb2FkRmxvYXQxNigpOwogICAgICAgICAgICBjb25zdCB5ID0gdGhpcy5sb2FkRmxvYXQxNigpOwogICAgICAgICAgICBjb25zdCB6ID0gdGhpcy5sb2FkRmxvYXQxNigpOwogICAgICAgICAgICBjb25zdCB3ID0gdGhpcy5sb2FkRmxvYXQxNigpOwogICAgICAgICAgICByZXR1cm4gbmV3IFF1YXQoeCwgeSwgeiwgdyk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBgUXVhdGAgb2JqZWN0IHdpdGggdGhlIG5leHQgZm91ciBGbG9hdDMyIHZhbHVlcyBpbiB0aGUgYnVmZmVyLgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGEgUXVhdC4KICAgICAgICAgKi8KICAgICAgICBsb2FkRmxvYXQzMlF1YXQoKSB7CiAgICAgICAgICAgIGNvbnN0IHggPSB0aGlzLmxvYWRGbG9hdDMyKCk7CiAgICAgICAgICAgIGNvbnN0IHkgPSB0aGlzLmxvYWRGbG9hdDMyKCk7CiAgICAgICAgICAgIGNvbnN0IHogPSB0aGlzLmxvYWRGbG9hdDMyKCk7CiAgICAgICAgICAgIGNvbnN0IHcgPSB0aGlzLmxvYWRGbG9hdDMyKCk7CiAgICAgICAgICAgIHJldHVybiBuZXcgUXVhdCh4LCB5LCB6LCB3KTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIGBDb2xvcmAgb2JqZWN0IHdpdGggdGhlIG5leHQgdGhyZWUgRmxvYXQzMiB2YWx1ZXMgaW4gdGhlIGJ1ZmZlci4KICAgICAgICAgKgogICAgICAgICAqIEByZXR1cm4gLSBSZXR1cm5zIGEgQ29sb3IuCiAgICAgICAgICovCiAgICAgICAgbG9hZFJHQkZsb2F0MzJDb2xvcigpIHsKICAgICAgICAgICAgY29uc3QgciA9IHRoaXMubG9hZEZsb2F0MzIoKTsKICAgICAgICAgICAgY29uc3QgZyA9IHRoaXMubG9hZEZsb2F0MzIoKTsKICAgICAgICAgICAgY29uc3QgYiA9IHRoaXMubG9hZEZsb2F0MzIoKTsKICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihyLCBnLCBiKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIFJHQkEgYENvbG9yYCBvYmplY3Qgd2l0aCB0aGUgbmV4dCBmb3VyIEZsb2F0MzIgdmFsdWVzIGluIHRoZSBidWZmZXIuCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYSBDb2xvci4KICAgICAgICAgKi8KICAgICAgICBsb2FkUkdCQUZsb2F0MzJDb2xvcigpIHsKICAgICAgICAgICAgY29uc3QgciA9IHRoaXMubG9hZEZsb2F0MzIoKTsKICAgICAgICAgICAgY29uc3QgZyA9IHRoaXMubG9hZEZsb2F0MzIoKTsKICAgICAgICAgICAgY29uc3QgYiA9IHRoaXMubG9hZEZsb2F0MzIoKTsKICAgICAgICAgICAgY29uc3QgYSA9IHRoaXMubG9hZEZsb2F0MzIoKTsKICAgICAgICAgICAgcmV0dXJuIG5ldyBDb2xvcihyLCBnLCBiLCBhKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIGBDb2xvcmAgb2JqZWN0IHdpdGggdGhlIG5leHQgdGhyZWUgdW5zaWduZWQgSW50OCB2YWx1ZXMgaW4gdGhlIGJ1ZmZlci4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIENvbG9yLgogICAgICAgICAqLwogICAgICAgIGxvYWRSR0JVSW50OENvbG9yKCkgewogICAgICAgICAgICBjb25zdCByID0gdGhpcy5sb2FkVUludDgoKTsKICAgICAgICAgICAgY29uc3QgZyA9IHRoaXMubG9hZFVJbnQ4KCk7CiAgICAgICAgICAgIGNvbnN0IGIgPSB0aGlzLmxvYWRVSW50OCgpOwogICAgICAgICAgICByZXR1cm4gbmV3IENvbG9yKHIgLyAyNTUsIGcgLyAyNTUsIGIgLyAyNTUpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGFuZCByZXR1cm5zIGEgUkdCQSBgQ29sb3JgIG9iamVjdCB3aXRoIHRoZSBuZXh0IGZvdXIgdW5zaWduZWQgSW50OCB2YWx1ZXMgaW4gdGhlIGJ1ZmZlci4KICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIENvbG9yLgogICAgICAgICAqLwogICAgICAgIGxvYWRSR0JBVUludDhDb2xvcigpIHsKICAgICAgICAgICAgY29uc3QgciA9IHRoaXMubG9hZFVJbnQ4KCk7CiAgICAgICAgICAgIGNvbnN0IGcgPSB0aGlzLmxvYWRVSW50OCgpOwogICAgICAgICAgICBjb25zdCBiID0gdGhpcy5sb2FkVUludDgoKTsKICAgICAgICAgICAgY29uc3QgYSA9IHRoaXMubG9hZFVJbnQ4KCk7CiAgICAgICAgICAgIHJldHVybiBuZXcgQ29sb3IociAvIDI1NSwgZyAvIDI1NSwgYiAvIDI1NSwgYSAvIDI1NSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENyZWF0ZXMgYW5kIHJldHVybnMgYSBgQm94MmAgb2JqZWN0IHdpdGggdGhlIG5leHQgZm91ciBGbG9hdDMyIHZhbHVlcyBpbiB0aGUgYnVmZmVyLgogICAgICAgICAqIE5leHQgZm91ciBiZWNhdXNlIGl0IGNyZWF0ZXMgdHdvIFZlYzIuCiAgICAgICAgICoKICAgICAgICAgKiBAcmV0dXJuIC0gUmV0dXJucyBhIEJveDIuCiAgICAgICAgICovCiAgICAgICAgbG9hZEJveDIoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgQm94Mih0aGlzLmxvYWRGbG9hdDMyVmVjMigpLCB0aGlzLmxvYWRGbG9hdDMyVmVjMigpKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlcyBhbmQgcmV0dXJucyBhIGBCb3gyYCBvYmplY3Qgd2l0aCB0aGUgbmV4dCBzaXggRmxvYXQzMiB2YWx1ZXMgaW4gdGhlIGJ1ZmZlci4KICAgICAgICAgKiBOZXh0IGZvdXIgYmVjYXVzZSBpdCBjcmVhdGVzIHR3byBWZWMzLgogICAgICAgICAqCiAgICAgICAgICogQHJldHVybiAtIFJldHVybnMgYSBCb3gzLgogICAgICAgICAqLwogICAgICAgIGxvYWRCb3gzKCkgewogICAgICAgICAgICByZXR1cm4gbmV3IEJveDModGhpcy5sb2FkRmxvYXQzMlZlYzMoKSwgdGhpcy5sb2FkRmxvYXQzMlZlYzMoKSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEdpdmVuIGEgc3RyaWRlZSB2YWx1ZSwgYWR2YW5jZSB0aGUgcG9pbnRlciB0byB0aGUgZW5kIG9mIHRoZSBjdXJyZW50IHN0cmlkZS4KICAgICAgICAgKiBAcGFyYW0gc3RyaWRlIC0gVGhlIHN0cmlkZSBwYXJhbS4KICAgICAgICAgKi8KICAgICAgICByZWFkUGFkKHN0cmlkZSkgewogICAgICAgICAgICBjb25zdCBwYWQgPSB0aGlzLl9fYnl0ZU9mZnNldCAlIHN0cmlkZTsKICAgICAgICAgICAgaWYgKHBhZCAhPSAwKQogICAgICAgICAgICAgICAgdGhpcy5fX2J5dGVPZmZzZXQgKz0gc3RyaWRlIC0gcGFkOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIENsYXNzIGRlc2lnbmVkIHRvIHN0b3JlIHZlcnNpb24gZGF0YS4gV2lkZWx5IHVzZWQgaW4gdGhlIHplYSBlbmdpbmUgZm9yIGJhY2t3YXJkcyBjb21wYXRpYmlsaXR5LgogICAgICovCiAgICBjbGFzcyBWZXJzaW9uIHsKICAgICAgICAvKioKICAgICAgICAgKiBDcmVhdGVzIGEgdmVyc2lvbi4KICAgICAgICAgKiBUaGUgdmVyc2lvbiBzdHJpbmcgc2hvdWxkIGhhdmUgdGhlIGZvbGxvd2luZyBzdHJ1Y3R1cmU6CiAgICAgICAgICogbWFqb3IsIG1pbm9yIGFuZCBwYXRjaCBzZXBhcmF0ZWQgYnkgYSBkb3QoYC5gKSBhbmQgcGFydHMgc2VwYXJhdGVkIGJ5IGEgZGFzaChgLWApLgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtIHZlcnNpb25TdHIgLSBUaGUgdmVyc2lvbiBzdHJpbmcgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgY29uc3RydWN0b3IodmVyc2lvblN0ciA9ICcnKSB7CiAgICAgICAgICAgIHRoaXMuYnJhbmNoID0gJyc7CiAgICAgICAgICAgIGlmICh2ZXJzaW9uU3RyKSB7CiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IHZlcnNpb25TdHIuc3BsaXQoJy0nKTsKICAgICAgICAgICAgICAgIGNvbnN0IG51bWJlcnMgPSBwYXJ0c1swXS5zcGxpdCgnLicpOwogICAgICAgICAgICAgICAgdGhpcy5tYWpvciA9IHBhcnNlSW50KG51bWJlcnNbMF0pOwogICAgICAgICAgICAgICAgdGhpcy5taW5vciA9IHBhcnNlSW50KG51bWJlcnNbMV0pOwogICAgICAgICAgICAgICAgdGhpcy5wYXRjaCA9IHBhcnNlSW50KG51bWJlcnNbMl0pOwogICAgICAgICAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PSAyKQogICAgICAgICAgICAgICAgICAgIHRoaXMuYnJhbmNoID0gcGFydHNbMV07CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLm1ham9yID0gMDsKICAgICAgICAgICAgICAgIHRoaXMubWlub3IgPSAwOwogICAgICAgICAgICAgICAgdGhpcy5wYXRjaCA9IDA7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ29tcGFyZSBhIHZlcnNpb24gb2JqZWN0IGFnYWluc3QgYSB2ZXJzaW9uIG51bWJlcnMgYXJyYXkuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gbnVtYmVycyAtIEFuIGFycmF5IGNvbnRhaW5pbmcgMyB2ZXJzaW9uIG51bWJlcnMuIFtNYWpvciwgTWlub3IsIFBhdGNoXQogICAgICAgICAqIEByZXR1cm4gLSByZXR1cm4gcG9zaXRpdmU6IHYxID4gdjIsIHplcm86djEgPT0gdjIsIG5lZ2F0aXZlOiB2MSA8IHYyCiAgICAgICAgICovCiAgICAgICAgY29tcGFyZShudW1iZXJzKSB7CiAgICAgICAgICAgIC8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzY4MzI1OTYvaG93LXRvLWNvbXBhcmUtc29mdHdhcmUtdmVyc2lvbi1udW1iZXItdXNpbmctanMtb25seS1udW1iZXIKICAgICAgICAgICAgLy8gMm5kIGFuc3dlci4KICAgICAgICAgICAgY29uc3QgdjEgPSBbdGhpcy5tYWpvciwgdGhpcy5taW5vciwgdGhpcy5wYXRjaF07CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgMzsgaSsrKSB7CiAgICAgICAgICAgICAgICBpZiAodjFbaV0gIT09IG51bWJlcnNbaV0pCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHYxW2ldIC0gbnVtYmVyc1tpXTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gMDsKICAgICAgICB9CiAgICAgICAgdG9TdHJpbmcoKSB7CiAgICAgICAgICAgIHJldHVybiBgdiR7dGhpcy5tYWpvcn0uJHt0aGlzLm1pbm9yfS4ke3RoaXMucGF0Y2h9YCArICh0aGlzLmJyYW5jaCAhPSAnJyA/IGAtJHt0aGlzLmJyYW5jaH1gIDogJycpOwogICAgICAgIH0KICAgIH0KCiAgICAvKioKICAgICAqIEBwcml2YXRlCiAgICAgKiBAZXh0ZW5kcyBCYXNlR2VvbQogICAgICovCiAgICBjbGFzcyBDb21wb3VuZEdlb21Mb2FkZXIgZXh0ZW5kcyBCYXNlR2VvbSB7CiAgICAgICAgLyoqCiAgICAgICAgICogQ3JlYXRlIHBvaW50cy4KICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3RvcigpIHsKICAgICAgICAgICAgc3VwZXIoKTsKICAgICAgICAgICAgdGhpcy5udW1TdWJHZW9tcyA9IDA7CiAgICAgICAgICAgIHRoaXMuaW5kaWNlcyA9IG5ldyBVaW50OEFycmF5KDApOwogICAgICAgICAgICB0aGlzLm9mZnNldHMgPSB7fTsKICAgICAgICAgICAgdGhpcy5jb3VudHMgPSB7fTsKICAgICAgICAgICAgLy8gRm9yIGVhY2ggdHlwZSBvZiBnZW9tIChUUklBTkdMRVMsIExJTkVTKQogICAgICAgICAgICAvLyBBIG1hdGVyaWFsIGlkLCBhbmQgZWFjaCBzdGFydCBhbmQgZW5kIG9mIHRoZSBibG9jawogICAgICAgICAgICB0aGlzLm1hdGVyaWFsU3ViR2VvbXMgPSB7fTsKICAgICAgICAgICAgdGhpcy5zdWJHZW9tT2Zmc2V0cyA9IHt9OwogICAgICAgICAgICB0aGlzLnN1Ykdlb21Db3VudHMgPSB7fTsKICAgICAgICAgICAgdGhpcy5tYXRlcmlhbExpYnJhcnlJbmRpY2VzID0gbmV3IFVpbnQzMkFycmF5KDApOwogICAgICAgICAgICB0aGlzLnN1Ykdlb21NYXRlcmlhbEluZGljZXMgPSBuZXcgVWludDhBcnJheSgwKTsKICAgICAgICB9CiAgICAgICAgZ2VuQnVmZmVycygpIHsKICAgICAgICAgICAgY29uc3QgYXR0ckJ1ZmZlcnMgPSB7fTsKICAgICAgICAgICAgZm9yIChjb25zdCBbYXR0ck5hbWUsIGF0dHJdIG9mIHRoaXMuX192ZXJ0ZXhBdHRyaWJ1dGVzKSB7CiAgICAgICAgICAgICAgICBhdHRyQnVmZmVyc1thdHRyTmFtZV0gPSBhdHRyLmdlbkJ1ZmZlcigpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IG51bVZlcnRpY2VzID0gdGhpcy5udW1WZXJ0aWNlcygpOwogICAgICAgICAgICBjb25zdCByZXN1bHQgPSB7CiAgICAgICAgICAgICAgICBudW1WZXJ0aWNlcywKICAgICAgICAgICAgICAgIG51bVJlbmRlclZlcnRzOiBudW1WZXJ0aWNlcywKICAgICAgICAgICAgICAgIGluZGljZXM6IHRoaXMuaW5kaWNlcywKICAgICAgICAgICAgICAgIGF0dHJCdWZmZXJzLAogICAgICAgICAgICAgICAgb2Zmc2V0czogdGhpcy5vZmZzZXRzLAogICAgICAgICAgICAgICAgY291bnRzOiB0aGlzLmNvdW50cywKICAgICAgICAgICAgICAgIHN1Ykdlb21PZmZzZXRzOiB0aGlzLnN1Ykdlb21PZmZzZXRzLAogICAgICAgICAgICAgICAgc3ViR2VvbUNvdW50czogdGhpcy5zdWJHZW9tQ291bnRzLAogICAgICAgICAgICAgICAgbWF0ZXJpYWxMaWJyYXJ5SW5kaWNlczogdGhpcy5tYXRlcmlhbExpYnJhcnlJbmRpY2VzLAogICAgICAgICAgICAgICAgc3ViR2VvbU1hdGVyaWFsSW5kaWNlczogdGhpcy5zdWJHZW9tTWF0ZXJpYWxJbmRpY2VzLAogICAgICAgICAgICAgICAgbWF0ZXJpYWxTdWJHZW9tczogdGhpcy5tYXRlcmlhbFN1Ykdlb21zLAogICAgICAgICAgICB9OwogICAgICAgICAgICByZXR1cm4gcmVzdWx0OwogICAgICAgIH0KICAgICAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vCiAgICAgICAgLy8gUGVyc2lzdGVuY2UKICAgICAgICAvKioKICAgICAgICAgKiBTZXRzIHN0YXRlIG9mIGN1cnJlbnQgZ2VvbWV0cnkoSW5jbHVkaW5nIGxpbmUgc2VnbWVudHMpIHVzaW5nIGEgYmluYXJ5IHJlYWRlciBvYmplY3QuCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0ge0JpblJlYWRlcn0gcmVhZGVyIC0gVGhlIHJlYWRlciB2YWx1ZS4KICAgICAgICAgKiBAcGFyYW0ge1JlY29yZDxzdHJpbmcsIHVua25vd24+fSBjb250ZXh0IC0gVGhlIGNvbnRleHQgdmFsdWUuCiAgICAgICAgICovCiAgICAgICAgcmVhZEJpbmFyeShyZWFkZXIsIGNvbnRleHQpIHsKICAgICAgICAgICAgc3VwZXIubG9hZEJhc2VHZW9tQmluYXJ5KHJlYWRlciwgY29udGV4dCk7CiAgICAgICAgICAgIGNvbnN0IGdlb21Db3VudHNCeVR5cGUgPSByZWFkZXIubG9hZFVJbnQzMkFycmF5KDMpOwogICAgICAgICAgICB0aGlzLm9mZnNldHNbJ1RSSUFOR0xFUyddID0gMDsKICAgICAgICAgICAgdGhpcy5jb3VudHNbJ1RSSUFOR0xFUyddID0gZ2VvbUNvdW50c0J5VHlwZVswXTsKICAgICAgICAgICAgdGhpcy5vZmZzZXRzWydMSU5FUyddID0gZ2VvbUNvdW50c0J5VHlwZVswXTsKICAgICAgICAgICAgdGhpcy5jb3VudHNbJ0xJTkVTJ10gPSBnZW9tQ291bnRzQnlUeXBlWzFdOwogICAgICAgICAgICB0aGlzLm9mZnNldHNbJ1BPSU5UUyddID0gZ2VvbUNvdW50c0J5VHlwZVswXSArIGdlb21Db3VudHNCeVR5cGVbMV07CiAgICAgICAgICAgIHRoaXMuY291bnRzWydQT0lOVFMnXSA9IGdlb21Db3VudHNCeVR5cGVbMl07CiAgICAgICAgICAgIGNvbnN0IGJ5dGVzID0gcmVhZGVyLmxvYWRVSW50OCgpOwogICAgICAgICAgICBpZiAoYnl0ZXMgPT0gMSkKICAgICAgICAgICAgICAgIHRoaXMuaW5kaWNlcyA9IHJlYWRlci5sb2FkVUludDhBcnJheSh1bmRlZmluZWQsIHRydWUpOwogICAgICAgICAgICBlbHNlIGlmIChieXRlcyA9PSAyKQogICAgICAgICAgICAgICAgdGhpcy5pbmRpY2VzID0gcmVhZGVyLmxvYWRVSW50MTZBcnJheSh1bmRlZmluZWQsIHRydWUpOwogICAgICAgICAgICBlbHNlIGlmIChieXRlcyA9PSA0KQogICAgICAgICAgICAgICAgdGhpcy5pbmRpY2VzID0gcmVhZGVyLmxvYWRVSW50MzJBcnJheSh1bmRlZmluZWQsIHRydWUpOwogICAgICAgICAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgICAgICAgLy8gVFJJQU5HTEVTIHN1Ymdlb21zCiAgICAgICAgICAgIGNvbnN0IGJ5dGVzTWVzaFN1Ykdlb21zID0gcmVhZGVyLmxvYWRVSW50OCgpOwogICAgICAgICAgICBsZXQgc3ViR2VvbUNvdW50c01lc2g7CiAgICAgICAgICAgIGlmIChieXRlc01lc2hTdWJHZW9tcyA9PSAxKQogICAgICAgICAgICAgICAgc3ViR2VvbUNvdW50c01lc2ggPSByZWFkZXIubG9hZFVJbnQ4QXJyYXkoKTsKICAgICAgICAgICAgZWxzZSBpZiAoYnl0ZXNNZXNoU3ViR2VvbXMgPT0gMikKICAgICAgICAgICAgICAgIHN1Ykdlb21Db3VudHNNZXNoID0gcmVhZGVyLmxvYWRVSW50MTZBcnJheSgpOwogICAgICAgICAgICBlbHNlIGlmIChieXRlc01lc2hTdWJHZW9tcyA9PSA0KQogICAgICAgICAgICAgICAgc3ViR2VvbUNvdW50c01lc2ggPSByZWFkZXIubG9hZFVJbnQzMkFycmF5KCk7CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ3N1Ykdlb21PZmZzZXRzIHVuZGVmaW5lZCcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IHN1Ykdlb21PZmZzZXRzTWVzaCA9IG5ldyBVaW50MzJBcnJheShzdWJHZW9tQ291bnRzTWVzaC5sZW5ndGgpOwogICAgICAgICAgICBsZXQgb2Zmc2V0ID0gMDsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzdWJHZW9tQ291bnRzTWVzaC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgc3ViR2VvbU9mZnNldHNNZXNoW2ldID0gb2Zmc2V0OwogICAgICAgICAgICAgICAgb2Zmc2V0ICs9IHN1Ykdlb21Db3VudHNNZXNoW2ldOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMuc3ViR2VvbU9mZnNldHNbJ1RSSUFOR0xFUyddID0gc3ViR2VvbU9mZnNldHNNZXNoOwogICAgICAgICAgICB0aGlzLnN1Ykdlb21Db3VudHNbJ1RSSUFOR0xFUyddID0gc3ViR2VvbUNvdW50c01lc2g7CiAgICAgICAgICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgICAgICAvLyBMSU5FUyBzdWJnZW9tcwogICAgICAgICAgICBjb25zdCBieXRlc0xpbmVzU3ViR2VvbXMgPSByZWFkZXIubG9hZFVJbnQ4KCk7CiAgICAgICAgICAgIGxldCBzdWJHZW9tQ291bnRzTGluZXM7CiAgICAgICAgICAgIGlmIChieXRlc0xpbmVzU3ViR2VvbXMgPT0gMSkKICAgICAgICAgICAgICAgIHN1Ykdlb21Db3VudHNMaW5lcyA9IHJlYWRlci5sb2FkVUludDhBcnJheSgpOwogICAgICAgICAgICBlbHNlIGlmIChieXRlc0xpbmVzU3ViR2VvbXMgPT0gMikKICAgICAgICAgICAgICAgIHN1Ykdlb21Db3VudHNMaW5lcyA9IHJlYWRlci5sb2FkVUludDE2QXJyYXkoKTsKICAgICAgICAgICAgZWxzZSBpZiAoYnl0ZXNMaW5lc1N1Ykdlb21zID09IDQpCiAgICAgICAgICAgICAgICBzdWJHZW9tQ291bnRzTGluZXMgPSByZWFkZXIubG9hZFVJbnQzMkFycmF5KCk7CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdGhyb3cgRXJyb3IoJ3N1Ykdlb21PZmZzZXRzIHVuZGVmaW5lZCcpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGNvbnN0IHN1Ykdlb21PZmZzZXRzTGluZXMgPSBuZXcgVWludDMyQXJyYXkoc3ViR2VvbUNvdW50c0xpbmVzLmxlbmd0aCk7CiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc3ViR2VvbUNvdW50c0xpbmVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICBzdWJHZW9tT2Zmc2V0c0xpbmVzW2ldID0gb2Zmc2V0OwogICAgICAgICAgICAgICAgb2Zmc2V0ICs9IHN1Ykdlb21Db3VudHNMaW5lc1tpXTsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnN1Ykdlb21PZmZzZXRzWydMSU5FUyddID0gc3ViR2VvbU9mZnNldHNMaW5lczsKICAgICAgICAgICAgdGhpcy5zdWJHZW9tQ291bnRzWydMSU5FUyddID0gc3ViR2VvbUNvdW50c0xpbmVzOwogICAgICAgICAgICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAgICAgICAgICAgLy8gUE9JTlRTIHN1Ymdlb21zCiAgICAgICAgICAgIGNvbnN0IG51bVBvaW50c1N1Ykdlb21zID0gcmVhZGVyLmxvYWRVSW50MzIoKTsKICAgICAgICAgICAgY29uc3Qgc3ViR2VvbU9mZnNldHNQb2ludHMgPSBuZXcgVWludDMyQXJyYXkobnVtUG9pbnRzU3ViR2VvbXMpOwogICAgICAgICAgICBjb25zdCBzdWJHZW9tQ291bnRzUG9pbnRzID0gbmV3IFVpbnQ4QXJyYXkobnVtUG9pbnRzU3ViR2VvbXMpOwogICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG51bVBvaW50c1N1Ykdlb21zOyBpKyspIHsKICAgICAgICAgICAgICAgIHN1Ykdlb21PZmZzZXRzUG9pbnRzW2ldID0gb2Zmc2V0OwogICAgICAgICAgICAgICAgc3ViR2VvbUNvdW50c1BvaW50c1tpXSA9IDE7CiAgICAgICAgICAgICAgICBvZmZzZXQrKzsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLnN1Ykdlb21PZmZzZXRzWydQT0lOVFMnXSA9IHN1Ykdlb21PZmZzZXRzUG9pbnRzOwogICAgICAgICAgICB0aGlzLnN1Ykdlb21Db3VudHNbJ1BPSU5UUyddID0gc3ViR2VvbUNvdW50c1BvaW50czsKICAgICAgICAgICAgaWYgKGNvbnRleHQudmVyc2lvbnNbJ3plYS1lbmdpbmUnXS5jb21wYXJlKFszLCAxMSwgMF0pID4gMCkgewogICAgICAgICAgICAgICAgLy8gUG9pbnRzIHN1Yi1nZW9tcyB3ZXJlIG5vdCBiZWluZyBleHBvcnRlZCBiZWZvcmUgdGhpcyByZWxlYXNlLgogICAgICAgICAgICAgICAgdGhpcy5udW1TdWJHZW9tcyA9IHN1Ykdlb21Db3VudHNNZXNoLmxlbmd0aCArIHN1Ykdlb21Db3VudHNMaW5lcy5sZW5ndGggKyBudW1Qb2ludHNTdWJHZW9tczsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMubnVtU3ViR2VvbXMgPSBzdWJHZW9tQ291bnRzTWVzaC5sZW5ndGggKyBzdWJHZW9tQ291bnRzTGluZXMubGVuZ3RoOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgICAgICAvLyBNYXRlcmlhbHMKICAgICAgICAgICAgY29uc3QgbnVtTWF0ZXJpYWxzID0gcmVhZGVyLmxvYWRVSW50MzIoKTsKICAgICAgICAgICAgaWYgKG51bU1hdGVyaWFscyA+IDApIHsKICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxMaWJyYXJ5SW5kaWNlcyA9IHJlYWRlci5sb2FkVUludDMyQXJyYXkobnVtTWF0ZXJpYWxzKTsKICAgICAgICAgICAgICAgIHRoaXMuc3ViR2VvbU1hdGVyaWFsSW5kaWNlcyA9IHJlYWRlci5sb2FkVUludDhBcnJheSh0aGlzLm51bVN1Ykdlb21zKTsKICAgICAgICAgICAgICAgIC8vIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogICAgICAgICAgICAgICAgLy8gTWF0ZXJpYWwgR3JvdXBzCiAgICAgICAgICAgICAgICBsZXQgb2Zmc2V0ID0gMDsKICAgICAgICAgICAgICAgIGxldCBjdXJyTWF0ZXJpYWwgPSAtOTk7CiAgICAgICAgICAgICAgICBsZXQgY3Vyck1hdGVyaWFsU3ViR2VvbSA9IG51bGw7CiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubnVtU3ViR2VvbXM7IGkrKykgewogICAgICAgICAgICAgICAgICAgIGxldCBrZXk7CiAgICAgICAgICAgICAgICAgICAgbGV0IHN1Ykdlb21PZmZzZXQgPSAwOwogICAgICAgICAgICAgICAgICAgIGlmIChpIDwgdGhpcy5zdWJHZW9tQ291bnRzLlRSSUFOR0xFUy5sZW5ndGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLm1hdGVyaWFsU3ViR2VvbXMuVFJJQU5HTEVTKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbFN1Ykdlb21zLlRSSUFOR0xFUyA9IFtdOwogICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSAnVFJJQU5HTEVTJzsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoaSA8IHRoaXMuc3ViR2VvbUNvdW50cy5UUklBTkdMRVMubGVuZ3RoICsgdGhpcy5zdWJHZW9tQ291bnRzLkxJTkVTLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICBzdWJHZW9tT2Zmc2V0ID0gdGhpcy5zdWJHZW9tQ291bnRzLlRSSUFOR0xFUy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGtleSA9ICdMSU5FUyc7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghdGhpcy5tYXRlcmlhbFN1Ykdlb21zLkxJTkVTKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbFN1Ykdlb21zLkxJTkVTID0gW107CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBzdWJHZW9tT2Zmc2V0ID0gdGhpcy5zdWJHZW9tQ291bnRzLlRSSUFOR0xFUy5sZW5ndGggKyB0aGlzLnN1Ykdlb21Db3VudHMuTElORVMubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgICBrZXkgPSAnUE9JTlRTJzsKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLm1hdGVyaWFsU3ViR2VvbXMuUE9JTlRTKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbFN1Ykdlb21zLlBPSU5UUyA9IFtdOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXRlcmlhbElkID0gdGhpcy5zdWJHZW9tTWF0ZXJpYWxJbmRpY2VzW2ldOwogICAgICAgICAgICAgICAgICAgIGlmIChjdXJyTWF0ZXJpYWwgIT0gbWF0ZXJpYWxJZCkgewogICAgICAgICAgICAgICAgICAgICAgICBjdXJyTWF0ZXJpYWwgPSBtYXRlcmlhbElkOwogICAgICAgICAgICAgICAgICAgICAgICAvLyBOb3RlOiBzdWJHZW9tTWF0ZXJpYWxJbmRpY2VzIGlzIFVpbnQ4QXJyYXksIGFuZCAwIG1lYW5zIG5vIGN1c3RvbQogICAgICAgICAgICAgICAgICAgICAgICAvLyBtYXRlcmlhbCBpcyBhc3NpZ25lZCB0byB0aGUgc3ViR2VvbS4KICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3VidHJhY3QgMSB0byBnZXQgdGhlIGFjdHVhbCBtYXRlcmlhbCBpZC4KICAgICAgICAgICAgICAgICAgICAgICAgY3Vyck1hdGVyaWFsU3ViR2VvbSA9IHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGVyaWFsSWQ6IG1hdGVyaWFsSWQgLSAxLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IDAsCiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoOyBpIDwgdGhpcy5udW1TdWJHZW9tczsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3Vyck1hdGVyaWFsICE9IHRoaXMuc3ViR2VvbU1hdGVyaWFsSW5kaWNlc1tpXSkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2hlbiB3ZSBnZXQgdG8gdGhlIGVuZCBvZyB0aGlzIGdlb20gdHlwZSAoZS5nIC5UUklBTkdMRVMpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzdGFydCBhIG5ldyBzdWJnZW9tLgogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkgLSBzdWJHZW9tT2Zmc2V0ID09IHRoaXMuc3ViR2VvbUNvdW50c1trZXldLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvcmNlIHRoZSBtYXRlcmlhbCBpbmRleCB0byBiZSByZXNldCBvbiBsaW5lIDE2MiBhYm92ZS4KICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyTWF0ZXJpYWwgPSAtOTk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyTWF0ZXJpYWxTdWJHZW9tLmNvdW50ICs9IHRoaXMuc3ViR2VvbUNvdW50c1trZXldW2kgLSBzdWJHZW9tT2Zmc2V0XTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgKz0gY3Vyck1hdGVyaWFsU3ViR2VvbS5jb3VudDsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbFN1Ykdlb21zW2tleV0ucHVzaChjdXJyTWF0ZXJpYWxTdWJHZW9tKTsKICAgICAgICAgICAgICAgICAgICAgICAgaS0tOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxTdWJHZW9tc1snVFJJQU5HTEVTJ10gPSBbCiAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICBtYXRlcmlhbElkOiAtMSwKICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0OiAwLAogICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogZ2VvbUNvdW50c0J5VHlwZVswXSwKICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgICAgIGlmIChnZW9tQ291bnRzQnlUeXBlWzFdID4gMCkgewogICAgICAgICAgICAgICAgICAgIHRoaXMubWF0ZXJpYWxTdWJHZW9tc1snTElORVMnXSA9IFsKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxJZDogLTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IGdlb21Db3VudHNCeVR5cGVbMF0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb3VudDogZ2VvbUNvdW50c0J5VHlwZVsxXSwKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBdOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgaWYgKGdlb21Db3VudHNCeVR5cGVbMl0gPiAwKSB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5tYXRlcmlhbFN1Ykdlb21zWydQT0lOVFMnXSA9IFsKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0ZXJpYWxJZDogLTEsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQ6IGdlb21Db3VudHNCeVR5cGVbMF0gKyBnZW9tQ291bnRzQnlUeXBlWzFdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgY291bnQ6IGdlb21Db3VudHNCeVR5cGVbMl0sCiAgICAgICAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgICAgXTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmVtaXQoJ2dlb21EYXRhQ2hhbmdlZCcsIHt9KTsKICAgICAgICB9CiAgICB9CgogICAgLyogZXNsaW50LWRpc2FibGUgZ3VhcmQtZm9yLWluICovCiAgICAvLyBrZXksIHRvYywgZ2VvbUluZGV4T2Zmc2V0LCBnZW9tc1JhbmdlLCBpc01vYmlsZURldmljZSwgYnVmZmVyU2xpY2UsIGdlbkJ1ZmZlcnNPcHRzLCBjb250ZXh0CiAgICBjb25zdCBwYXJzZUdlb21zQmluYXJ5ID0gKGRhdGEsIGNhbGxiYWNrKSA9PiB7CiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGd1YXJkLWZvci1pbgogICAgICAgIGZvciAoY29uc3Qga2V5IGluIGRhdGEuY29udGV4dC52ZXJzaW9ucykgewogICAgICAgICAgICBjb25zdCB2ID0gZGF0YS5jb250ZXh0LnZlcnNpb25zW2tleV07CiAgICAgICAgICAgIGNvbnN0IHZlcnNpb24gPSBuZXcgVmVyc2lvbignJyk7CiAgICAgICAgICAgIHZlcnNpb24ubWFqb3IgPSB2Lm1ham9yOwogICAgICAgICAgICB2ZXJzaW9uLm1pbm9yID0gdi5taW5vcjsKICAgICAgICAgICAgdmVyc2lvbi5wYXRjaCA9IHYucGF0Y2g7CiAgICAgICAgICAgIHZlcnNpb24uYnJhbmNoID0gdi5icmFuY2g7CiAgICAgICAgICAgIGRhdGEuY29udGV4dC52ZXJzaW9uc1trZXldID0gdmVyc2lvbjsKICAgICAgICB9CiAgICAgICAgY29uc3QgZ2VvbURhdGFzID0gW107CiAgICAgICAgY29uc3QgYnl0ZU9mZnNldCA9IGRhdGEuYnl0ZU9mZnNldDsKICAgICAgICAvLyBjb25zb2xlLmxvZygnYnl0ZU9mZnNldDonICsgYnl0ZU9mZnNldCkKICAgICAgICBjb25zdCB0cmFuc2ZlcmFibGVzID0gW107CiAgICAgICAgZm9yIChsZXQgaSA9IGRhdGEuZ2VvbXNSYW5nZVswXTsgaSA8IGRhdGEuZ2VvbXNSYW5nZVsxXTsgaSsrKSB7CiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IG5ldyBCaW5SZWFkZXIoZGF0YS5idWZmZXJTbGljZSwgZGF0YS50b2NbaV0gLSBieXRlT2Zmc2V0LCBkYXRhLmlzTW9iaWxlRGV2aWNlKTsKICAgICAgICAgICAgY29uc3QgY2xhc3NOYW1lID0gcmVhZGVyLmxvYWRTdHIoKTsKICAgICAgICAgICAgY29uc3QgcG9zID0gcmVhZGVyLnBvcygpOwogICAgICAgICAgICAvLyBjb25zdCBuYW1lID0gcmVhZGVyLmxvYWRTdHIoKQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygKICAgICAgICAgICAgLy8gICBpICsKICAgICAgICAgICAgLy8gICAgICc6JyArCiAgICAgICAgICAgIC8vICAgICBieXRlT2Zmc2V0ICsKICAgICAgICAgICAgLy8gICAgICcgY2xhc3NOYW1lOicgKwogICAgICAgICAgICAvLyAgICAgY2xhc3NOYW1lICsKICAgICAgICAgICAgLy8gICAgICcgbmFtZTonICsKICAgICAgICAgICAgLy8gICAgIG5hbWUgLyogKyAiIHBvczoiICsgKGRhdGEudG9jW2ldIC0gYnl0ZU9mZnNldCkgKyAiIGJ1ZmZlclNsaWNlLmJ5dGVMZW5ndGg6IiArICBidWZmZXJTbGljZS5ieXRlTGVuZ3RoKi8KICAgICAgICAgICAgLy8gKQogICAgICAgICAgICBsZXQgZ2VvbTsKICAgICAgICAgICAgc3dpdGNoIChjbGFzc05hbWUpIHsKICAgICAgICAgICAgICAgIGNhc2UgJ1BvaW50cyc6CiAgICAgICAgICAgICAgICAgICAgZ2VvbSA9IG5ldyBQb2ludHMoKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ0xpbmVzJzoKICAgICAgICAgICAgICAgICAgICBnZW9tID0gbmV3IExpbmVzKCk7CiAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICBjYXNlICdNZXNoJzoKICAgICAgICAgICAgICAgICAgICBnZW9tID0gbmV3IE1lc2goKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgJ0NvbXBvdW5kR2VvbSc6CiAgICAgICAgICAgICAgICAgICAgZ2VvbSA9IG5ldyBDb21wb3VuZEdlb21Mb2FkZXIoKTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbnN1cHBvcnRlZCBHZW9tIHR5cGU6JyArIGNsYXNzTmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHJlYWRlci5zZWVrKHBvcyk7IC8vIFJlc2V0IHRoZSBwb2ludGVyIHRvIHRoZSBzdGFydCBvZiB0aGUgaXRlbSBkYXRhLgogICAgICAgICAgICAgICAgZ2VvbS5yZWFkQmluYXJ5KHJlYWRlciwgZGF0YS5jb250ZXh0KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBsb2FkaW5nOicgKyBnZW9tLm5hbWUgKyAnXG46JyArIGUpOwogICAgICAgICAgICAgICAgZ2VvbURhdGFzLnB1c2goe30pOwogICAgICAgICAgICAgICAgY29udGludWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc3QgZ2VvbUJ1ZmZlcnMgPSBnZW9tLmdlbkJ1ZmZlcnMoZGF0YS5nZW5CdWZmZXJzT3B0cyk7CiAgICAgICAgICAgIGlmIChnZW9tQnVmZmVycy5pbmRpY2VzKQogICAgICAgICAgICAgICAgdHJhbnNmZXJhYmxlcy5wdXNoKGdlb21CdWZmZXJzLmluZGljZXMuYnVmZmVyKTsKICAgICAgICAgICAgZm9yIChjb25zdCBhdHRyTmFtZSBpbiBnZW9tQnVmZmVycy5hdHRyQnVmZmVycykgewogICAgICAgICAgICAgICAgLy8gTm90ZTogVGhlIHR5cGUgdmFsdWUgYXNzaWduZWQgdG8gdGhlIGF0dHJpYnV0ZSBjYW4KICAgICAgICAgICAgICAgIC8vIG5vdCBiZSB0cmFuc2ZlcnJlZCBiYWNrIHRvIHRoZSBtYWluIHRocmVhZC4gQ29udmVydCB0bwogICAgICAgICAgICAgICAgLy8gdGhlIHR5cGUgbmFtZSBoZXJlIGFuZCBzZW5kIGJhY2sgYXMgYSBzdHJpbmcuCiAgICAgICAgICAgICAgICBjb25zdCBhdHRyRGF0YSA9IGdlb21CdWZmZXJzLmF0dHJCdWZmZXJzW2F0dHJOYW1lXTsKICAgICAgICAgICAgICAgIHRyYW5zZmVyYWJsZXMucHVzaChhdHRyRGF0YS52YWx1ZXMuYnVmZmVyKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoZ2VvbUJ1ZmZlcnMudmVydGV4TmVpZ2hib3JzKSB7CiAgICAgICAgICAgICAgICB0cmFuc2ZlcmFibGVzLnB1c2goZ2VvbUJ1ZmZlcnMudmVydGV4TmVpZ2hib3JzLmJ1ZmZlcik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgLy8gVHJhbnNmZXIgdGhlIGJib3ggcG9pbnQgYnVmZmVycy4KICAgICAgICAgICAgY29uc3QgYmJveCA9IGdlb20uZ2V0Qm91bmRpbmdCb3goKTsKICAgICAgICAgICAgdHJhbnNmZXJhYmxlcy5wdXNoKGJib3gucDAuX19kYXRhLmJ1ZmZlcik7CiAgICAgICAgICAgIHRyYW5zZmVyYWJsZXMucHVzaChiYm94LnAxLl9fZGF0YS5idWZmZXIpOwogICAgICAgICAgICBnZW9tRGF0YXMucHVzaCh7CiAgICAgICAgICAgICAgICBuYW1lOiBnZW9tLm5hbWUsCiAgICAgICAgICAgICAgICB0eXBlOiBjbGFzc05hbWUsCiAgICAgICAgICAgICAgICBnZW9tQnVmZmVycywKICAgICAgICAgICAgICAgIGJib3gsCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBjYWxsYmFjayh7CiAgICAgICAgICAgIGdlb21MaWJyYXJ5SWQ6IGRhdGEuZ2VvbUxpYnJhcnlJZCwKICAgICAgICAgICAgZ2VvbUZpbGVJRDogZGF0YS5nZW9tRmlsZUlELAogICAgICAgICAgICBnZW9tSW5kZXhPZmZzZXQ6IGRhdGEuZ2VvbUluZGV4T2Zmc2V0LAogICAgICAgICAgICBnZW9tc1JhbmdlOiBkYXRhLmdlb21zUmFuZ2UsCiAgICAgICAgICAgIGdlb21EYXRhcywKICAgICAgICB9LCB0cmFuc2ZlcmFibGVzKTsKICAgIH07CgogICAgY29uc3QgaGFuZGxlTWVzc2FnZSA9IGZ1bmN0aW9uIChzcmNEYXRhLCBwb3N0TWVzc2FnZSkgewogICAgICBwYXJzZUdlb21zQmluYXJ5KHNyY0RhdGEsIChyZXN1bHREYXRhLCB0cmFuc2ZlcmFibGVzKSA9PiB7CiAgICAgICAgcmVzdWx0RGF0YS50YXNrSWQgPSBzcmNEYXRhLnRhc2tJZDsKICAgICAgICBwb3N0TWVzc2FnZShyZXN1bHREYXRhLCB0cmFuc2ZlcmFibGVzKTsKICAgICAgfSk7CiAgICB9OwoKICAgIHNlbGYub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgIGlmICghZXZlbnQuZGF0YSkgewogICAgICAgIC8vIE5vdGU6IHdlIHNlZSB0aGlzIG9jY3VyIHdoZW4gbG9hZGluZyBvbmUgbGFyZ2UgYXNzZXQgbWFueSB0aW1lcy4KICAgICAgICAvLyBMaWtlIHdoZW4gbG9hZGluZyB0aGUgcG9ydGFmaWwuCiAgICAgICAgLy8gSXQgbWF5IGJlIGR1ZSB0byBtZW1vcnkgaXNzdWVzLCBidXQgaXRzIG5vdCBjbGVhci4KICAgICAgICBjb25zb2xlLndhcm4oJ0dlb21MaWJyYXJ5IHdvcmtlci5wb3N0TWVzc2FnZSBmYWlsZWQuIGRhdGEgd2FzIGxvc3Qgb24gdGhlIHdheSB0byB0aGUgd2ViIHdvcmtlci4nKTsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgICBoYW5kbGVNZXNzYWdlKGV2ZW50LmRhdGEsIHNlbGYucG9zdE1lc3NhZ2UpOwogICAgfTsKCiAgICBleHBvcnRzLmhhbmRsZU1lc3NhZ2UgPSBoYW5kbGVNZXNzYWdlOwoKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7CgogICAgcmV0dXJuIGV4cG9ydHM7Cgp9KSh7fSk7Cgo=",null,!1);class Qd extends ha{constructor(){super(!0)}constructWorker(){const e=new Bd;return Promise.resolve(e)}}const Fn=new Qd;let Un=0;class Vd extends Xe{constructor(e){super();this.listenerIDs={},this.streamInfos={},this.genBuffersOpts={},this.numGeoms=-1,this.geoms=[],this.basePath="",this.loadedCount=0,this.assetItem=e,Un++}isLoaded(){return this.loadedCount==this.numGeoms}loadGeomFile(e,g=!1){return g&&ee.incrementWorkload(1),new Promise(t=>{const I=this.basePath+e+".zgeoms";ee.loadFile("archive",I,!1).then(l=>{const C=l[Object.keys(l)[0]],n=this.on("streamFileParsed",F=>{F.geomFileID==I&&(g&&ee.incrementWorkDone(1),this.removeListenerById("streamFileParsed",n),t())});this.readBinaryBuffer(I,C.buffer,this.loadContext)})})}loadGeomFilesStream(e,g,t){const I=e.numGeomsPerFile.length;ee.incrementWorkload(I),this.numGeoms=e.numGeoms,this.basePath=g,this.loadContext=t;for(let l=0;l<I;l++)this.loadGeomFile(l,!1)}setGenBufferOption(e,g){this.genBuffersOpts[e]=g}setNumGeoms(e){this.numGeoms=e}getNumGeoms(){return this.numGeoms}getGeom(e){return e>=this.geoms.length?null:this.geoms[e]}readBinaryBuffer(e,g,t){const I=new RI(g,0,_e.isMobileDevice),l=I.loadUInt32(),C=I.loadUInt32();if(this.streamInfos[e]={total:l,done:0},l==0){const a=new $i(e,0);this.emit("streamFileParsed",a);return}this.numGeoms==-1&&(this.numGeoms=l);const n=I.loadUInt32Array(l),F=g.byteLength>2e7;if(Un>1&&!F){const a=[0,l],U=0;Fn.addTask({geomFileID:e,toc:n,byteOffset:U,geomIndexOffset:C,geomsRange:a,isMobileDevice:I.isMobileDevice,bufferSlice:g,genBuffersOpts:this.genBuffersOpts,context:{versions:t.versions}},[g]).then(d=>{this.__receiveGeomDatas(d)})}else{let U=0;for(;U<l;){const d=n[U];let s=0,o=U;for(;o<l&&s<2e6;)o++,s=n[o]-d;let A,B;o>=l?(A=[U,l],B=g.byteLength):(A=[U,o],B=n[A[1]]);const Q=U==0&&o==l,r=Q?0:n[A[0]],R=Q?g:g.slice(d,B);U=o,Fn.addTask({geomFileID:e,toc:n,byteOffset:r,geomIndexOffset:C,geomsRange:A,isMobileDevice:I.isMobileDevice,bufferSlice:R,genBuffersOpts:this.genBuffersOpts,context:{versions:t.versions}},[R]).then(V=>{this.__receiveGeomDatas(V)})}}}__receiveGeomDatas(e){const{geomFileID:g,geomDatas:t,geomIndexOffset:I,geomsRange:l}=e,C=I+l[0],n=[C,I+l[1]];for(let d=0;d<t.length;d++){const s=t[d];if(!s.type)continue;let o;switch(s.type){case"Points":o=new ct(s);break;case"Lines":o=new Gg(s);break;case"Mesh":case"Plane":case"Sphere":case"Cone":o=new Kg(s);break;case"CompoundGeom":o=new hI(s,this.assetItem.getMaterialLibrary());break;default:throw new Error("Unsupported Geom type:")}this.geoms[C+d]=o}const F=new nU(n);this.emit("rangeLoaded",F);const a=n[1]-n[0],U=this.streamInfos[g];if(U.done+=a,U.done==U.total){const d=new $i(g,U.done);this.emit("streamFileParsed",d)}return this.loadedCount+=a,this.loadedCount==this.numGeoms&&this.emit("loaded"),this.loadedCount==this.numGeoms}toJSON(){return{numGeoms:this.geoms.length}}toString(){return JSON.stringify(this.toJSON(),null,2)}loadMetadata(e,g){const t=new RI(e.buffer,0,_e.isMobileDevice),I=t.loadUInt32Array();for(let l=0;l<I.length;l++)try{const C=this.geoms[l];C||console.warn("Error loading metadata for geom that was not yet loaded: ",l),C instanceof hI&&(t.seek(I[l]),C.loadMetadata(t,g))}catch{console.warn("Error loading geom metadata: ",l)}}}class rd extends Xe{constructor(e="MaterialLibrary"){super();this.__images={},this.materials=[],this.__materialsMap={},this.name="",this.__name=e}clear(){this.__images={},this.materials=[],this.__materialsMap={}}getPath(){return[this.__name]}resolvePath(e,g=0){return null}getNumMaterials(){return this.materials.length}getMaterials(){return this.materials}getMaterialNames(){const e=[];return this.materials.forEach(g=>{e.push(g.getName())}),e}hasMaterial(e){return e in this.__materialsMap}addMaterial(e){e.setOwner(this),this.__materialsMap[e.getName()]=this.materials.length,this.materials.push(e)}getMaterial(e,g=!0){const t=this.__materialsMap[e];if(t==null&&g)throw new Error("Material:"+e+" not found in library:"+this.getMaterialNames());return this.materials[t]}hasImage(e){return e in this.__images}addImage(e){e.setOwner(this),this.__images[e.getName()]=e}getImage(e,g=!0){const t=this.__images[e];if(!t&&g)throw new Error("Image:"+e+" not found in library:"+this.getImageNames());return t}getImageNames(){const e=[];for(const g in this.__images)e.push(g);return e}load(e){const g=new XMLHttpRequest;g.open("GET",e,!0),g.ontimeout=()=>{throw new Error("The request for "+e+" timed out.")},g.onload=()=>{g.readyState===4&&(g.status===200?this.fromJSON(JSON.parse(g.responseText)):console.warn(g.statusText))},g.send(null)}toJSON(e={}){return{numMaterials:this.getNumMaterials()}}fromJSON(e,g={}){for(const t in e.textures){const I=new qg(t);I.fromJSON(e.textures[t]),this.__images[t]=I}for(const t in e.materials){const I=new Ve(t);I.fromJSON(e.materials[t]),this.addMaterial(I)}}readBinary(e,g){this.name=e.loadStr();const t=e.loadUInt32();for(let l=0;l<t;l++){const C=e.loadStr(),n=S.constructClass(C);n.readBinary(e,g),this.__images[n.getName()]=n}const I=e.loadUInt32();if(I>0){const l=e.loadUInt32Array(I);for(let C=0;C<I;C++){const n=e.loadStr();let F;switch(n){case"StandardMaterial":case"TransparentMaterial":case"StandardSurfaceShader":F=S.constructClass("StandardSurfaceMaterial");break;case"SimpleSurfaceShader":case"SimpleSurfaceMaterial":F=S.constructClass("SimpleSurfaceMaterial");break;case"PointsShader":case"PointsMaterial":F=S.constructClass("PointsMaterial");break;case"FatPointsShader":case"FatPointsMaterial":F=S.constructClass("FatPointsMaterial");break;case"LinesShader":case"LinesMaterial":F=S.constructClass("LinesMaterial");break;default:F=new Ve("");break}e.seek(l[C]),F.readBinary(e,g),this.materials[C]=F,this.__materialsMap[F.getName()]=C}}this.emit("loaded")}toString(){return JSON.stringify(this.toJSON(),null,2)}}const dn=i=>{switch(i.toLowerCase()){case"millimeters":return .001;case"centimeters":return .01;case"decimeters":return .1;case"meters":return 1;case"kilometers":return 1e3;case"inches":return .0254;case"feet":return .3048;case"miles":return 1609.34}return 1};class dt extends H{constructor(e=""){super(e);this.geomLibrary=new Vd(this),this.materialLibrary=new rd,this.loaded=!1,this.unitsScale=1,this.units="meters"}load(e){return Promise.reject(`This method is not implemented for this Asset Item: ${e}`)}isLoaded(){return this.loaded}getEngineDataVersion(){return this.engineDataVersion}getGeometryLibrary(){return this.geomLibrary}getMaterialLibrary(){return this.materialLibrary}getUnitsConversion(){return this.unitsScale}readBinary(e,g){g.assetItem=this,g.numTreeItems=0,g.units||(g.units="meters"),g.numGeomItems=0,g.versions["zea-engine"]||(g.versions["zea-engine"]=new rI(e.loadStr())),this.engineDataVersion=g.versions["zea-engine"];const t=()=>{this.units=e.loadStr(),this.addParameter(new Zg("FileUnits",this.units));const n=dn(this.units),F=dn(g.units);this.unitsScale=n/F,g.units=this.units;const a=this.localXfoParam,U=a.value;U.sc.scaleInPlace(this.unitsScale),a.value=U};g.versions["zea-engine"].compare([0,0,6])>0&&t();let I;const l={};g.addGeomToLayer=(n,F)=>{if(!l[F]){I||(I=new H("Layers"),this.addChild(I,!1));const a=new wI(F);I.addChild(a,!1),l[F]=a}l[F].addItem(n)};const C=[];g.resolvePath=(n,F,a)=>{if(!n)throw new Error("Path not specified");try{const U=this.resolvePath(n);F(U)}catch{C.push(()=>{try{const d=this.resolvePath(n);F(d)}catch(d){if(a)a(d);else throw d}})}},g.addPLCB=n=>C.push(n),this.materialLibrary.readBinary(e,g),super.readBinary(e,g),g.versions["zea-engine"].compare([0,0,5])>=0&&g.versions["zea-engine"].compare([0,0,7])<0&&t();for(const n of C)n();this.loaded=!0}toJSON(e={}){return e.makeRelative=t=>{const I=this.getPath(),l=t.slice(0,I.length);for(let n=0;n<l.length-1;n++)if(l[n]!=I[n])return console.warn("Param Path is not relative to the asset. May not be able to be resolved at load time:"+t),t;const C=t.slice(I.length-1);return C[0]=".",C},e.assetItem=this,super.toJSON(e)}fromJSON(e,g={}){g||(g={}),g.assetItem=this,g.numTreeItems=0,g.numGeomItems=0,g.version==null&&(g.version=0),g.assetItem=this;const t=[];g.resolvePath=(I,l)=>{if(!I)throw new Error("Path not specified");const C=this.resolvePath(I);C?l(C):t.push(()=>{const n=this.resolvePath(I);n?l(n):console.warn("Path unable to be resolved:"+I)})},g.addPLCB=I=>t.push(I),super.fromJSON(e,g);for(const I of t)I()}clone(e){const g=new dt;return g.copyFrom(this,e),g}copyFrom(e,g){this.geomLibrary=e.geomLibrary,this.materialLibrary=e.materialLibrary,this.loaded=e.loaded,e.loaded||e.once("loaded",t=>{const I=e.localXfoParam.value,l=this.localXfoParam.value;l.sc=I.sc.clone(),this.localXfoParam.value=l,e.getChildren().forEach(C=>{C&&C!=dt&&this.addChild(C.clone(g),!1,!1)}),this.loaded=!0,this.emit("loaded",t)}),super.copyFrom(e,g)}}S.register("AssetItem",dt);class st extends Xe{constructor(e){super();this.units="meters",this.versions={},this.sdk="",this.url="",this.folder="",this.camera=null,this.assetItem=null,this.resources=null,this.xrefs={},this.xrefLoadCallback=null,this.numTreeItems=0,this.numGeomItems=0,this.postLoadCallbacks=[],this.asyncCount=0,e&&(this.units=e.units,this.xrefs=e.xrefs,this.resources=e.resources,this.xrefs=e.xrefs,this.xrefLoadCallback=e.xrefLoadCallback)}incrementAsync(){this.asyncCount++}decrementAsync(){this.asyncCount--,this.asyncCount==0&&this.emit("done")}resolvePath(e,g,t){try{const I=this.assetItem.resolvePath(e);g(I)}catch{this.postLoadCallbacks.push(()=>{try{const l=this.assetItem.resolvePath(e);g(l)}catch(l){if(t)t(l);else throw new Error(l.message)}})}}addPLCB(e){this.postLoadCallbacks.push(e)}clone(){return new st(this)}}class cI extends H{constructor(e,g){super(e);this.imageParam=new TI("Image"),this.pixelsPerMeterParam=new k("PixelsPerMeter",1e3),this.alphaParam=new k("Alpha",1),this.colorParam=new Fg("Color",new E(1,1,1)),this.alignedToCameraParam=new Je("AlignedToCamera",!1),this.drawOnTopParam=new Je("DrawOnTop",!1),this.fixedSizeOnscreenParam=new Je("FixedSizeOnscreen",!1),this.pivotParam=new XI("Pivot",new f(.5,0));const t=this.addParameter(this.imageParam);g&&(t.value=g),this.addParameter(this.pixelsPerMeterParam),this.addParameter(this.alphaParam),this.addParameter(this.colorParam),this.addParameter(this.alignedToCameraParam),this.addParameter(this.drawOnTopParam),this.addParameter(this.fixedSizeOnscreenParam),this.addParameter(this.pivotParam)}}S.register("BillboardItem",cI);class Ja extends H{constructor(e="Camera"){super(e);this.isOrthographicParam=new k("isOrthographic",0),this.fovParam=new k("fov",1),this.nearParam=new k("near",.1),this.farParam=new k("far",1e3),this.focalDistanceParam=new k("focalDistance",5),this.viewHeight=0,this.__orthoIntervalId=-1,this.__focusIntervalId=-1,this.addParameter(this.isOrthographicParam),this.addParameter(this.fovParam),this.addParameter(this.nearParam),this.addParameter(this.farParam),this.addParameter(this.focalDistanceParam);const g=t=>{this.emit("projectionParamChanged",t)};this.isOrthographicParam.on("valueChanged",g),this.fovParam.on("valueChanged",g),this.nearParam.on("valueChanged",g),this.farParam.on("valueChanged",g),this.setPositionAndTarget(new b(3,3,1.75),new b(0,0,1)),this.setLensFocalLength("28mm"),this.adjustNearAndFarPlanesToFocalDist=!0,this.nearDistFactor=.01,this.farDistFactor=100,this.frameOnBoundingSphere=!1}getNear(){return this.nearParam.value}setNear(e){this.nearParam.value=e}getFar(){return this.farParam.value}setFar(e){this.farParam.value=e}getFov(){return this.fovParam.value}setFov(e){this.fovParam.value=e}getFrustumHeight(){return this.viewHeight}setFrustumHeight(e){this.viewHeight=e,this.emit("projectionParamChanged")}setLensFocalLength(e){const g={"10mm":100.4,"11mm":95,"12mm":90,"14mm":81.2,"15mm":77.3,"17mm":70.4,"18mm":67.4,"19mm":64.6,"20mm":61.9,"24mm":53.1,"28mm":46.4,"30mm":43.6,"35mm":37.8,"45mm":29.9,"50mm":27,"55mm":24.6,"60mm":22.6,"70mm":19.5,"75mm":18.2,"80mm":17.1,"85mm":16.1,"90mm":15.2,"100mm":13.7,"105mm":13,"120mm":11.4,"125mm":11,"135mm":10.2,"150mm":9.1,"170mm":8.1,"180mm":7.6,"210mm":6.5,"300mm":4.6,"400mm":3.4,"500mm":2.7,"600mm":2.3,"800mm":1.7};if(!(e in g)){console.warn("Camera lense focal length not supported:"+e);return}this.fovParam.value=q.degToRad(g[e])}getFocalDistance(){return this.focalDistanceParam.value}setFocalDistance(e){e<1e-4&&console.error("Never set focal distance to zero"),this.focalDistanceParam.value=e,this.adjustNearAndFarPlanesToFocalDist&&(this.nearParam.value=e*this.nearDistFactor,this.farParam.value=e*this.farDistFactor)}isOrthographic(){return this.isOrthographicParam.value==1}setIsOrthographic(e,g=0){if(this.__orthoIntervalId&&clearInterval(this.__orthoIntervalId),e>.5){const t=this.fovParam.value,I=this.focalDistanceParam.value;this.viewHeight=Math.sin(t*.5)*I*2}if(g==0)this.isOrthographicParam.value=e;else{const t=Math.round(g/20);let I=0;const l=this.isOrthographicParam.value,C=()=>{const n=q.lerp(l,e,I/t);this.isOrthographicParam.value=n,I++,I<=t?this.__orthoIntervalId=window.setTimeout(C,20):(this.__orthoIntervalId=-1,this.emit("movementFinished"))};C()}}setPositionAndTarget(e,g){this.setFocalDistance(e.distanceTo(g));const t=new v;t.setLookAt(e,g,new b(0,0,1)),this.globalXfoParam.value=t,this.emit("movementFinished")}getTargetPosition(){const e=this.focalDistanceParam.value,g=this.globalXfoParam.value,t=g.ori.getZaxis();return t.scaleInPlace(-e),t.addInPlace(g.tr),t}frameView(e,g){const t=this.focalDistanceParam.value,I=this.fovParam.value,l=this.globalXfoParam.value.clone(),C=e.getWidth()/e.getHeight(),n=Math.atan(Math.tan(I*.5)*C)*2;let F=t;if(this.frameOnBoundingSphere){const a=new gg;for(const B of g)a.addBox3(B.boundingBoxParam.value);if(!a.isValid()){console.warn("Bounding box not valid.");return}const d=l.ori.getZaxis().scale(-t),s=l.tr.add(d),A=a.center().subtract(s);l.tr.addInPlace(A),F=a.size()/Math.tan(I)}else{const a=[];if(g.forEach(r=>{r.traverse(R=>{if(!(R instanceof H)||R.disableBoundingBox)return!1;if(R instanceof ge){const V=R.geomParam.value;if(V){const h=V.getBoundingBox();if(h.isValid()){const m=R.geomMatParam.value;a.push(m.transformVec3(h.p0)),a.push(m.transformVec3(new b(h.p0.x,h.p0.y,h.p1.z))),a.push(m.transformVec3(new b(h.p0.x,h.p1.y,h.p0.z))),a.push(m.transformVec3(new b(h.p1.x,h.p0.y,h.p0.z))),a.push(m.transformVec3(new b(h.p0.x,h.p1.y,h.p1.z))),a.push(m.transformVec3(new b(h.p1.x,h.p0.y,h.p1.z))),a.push(m.transformVec3(new b(h.p1.x,h.p1.y,h.p0.z))),a.push(m.transformVec3(h.p1));return}}}if(R.getNumChildren()==0){const V=R.boundingBoxParam.value;if(V.isValid()){a.push(new b(V.p0.x,V.p0.y,V.p0.z)),a.push(new b(V.p0.x,V.p0.y,V.p1.z)),a.push(new b(V.p0.x,V.p1.y,V.p0.z)),a.push(new b(V.p1.x,V.p0.y,V.p0.z)),a.push(new b(V.p0.x,V.p1.y,V.p1.z)),a.push(new b(V.p1.x,V.p0.y,V.p1.z)),a.push(new b(V.p1.x,V.p1.y,V.p0.z)),a.push(new b(V.p1.x,V.p1.y,V.p1.z));return}}})}),a.length==0)return;const U=this.isOrthographic()?0:n/2,d=this.isOrthographic()?0:I/2,s={};s.XPos=new b(Math.cos(U),0,Math.sin(U)),s.XNeg=new b(-Math.cos(U),0,Math.sin(U)),s.YPos=new b(0,Math.cos(d),Math.sin(d)),s.YNeg=new b(0,-Math.cos(d),Math.sin(d)),s.ZPos=new b(0,0,1),s.ZNeg=new b(0,0,-1);const o={},A={};for(const r in s)o[r]=l.ori.rotateVec3(s[r]),A[r]=Number.NEGATIVE_INFINITY;const B=new b;a.forEach((r,R)=>{if(!Number.isFinite(r.x)||!Number.isFinite(r.y)||!Number.isFinite(r.z))return;const V=r.subtract(l.tr);for(const h in s){const m=V.dot(o[h]);m>A[h]&&m!=Number.POSITIVE_INFINITY&&(A[h]=m)}B.addInPlace(r)});for(const r in A)if(A[r]==Number.POSITIVE_INFINITY)return;B.scaleInPlace(1/a.length);let Q=0;if(this.isOrthographic()){const r=new b((-A.XNeg+A.XPos)*.5,(-A.YNeg+A.YPos)*.5,(-A.ZNeg+A.ZPos)*.5),R=A.ZNeg+A.ZPos;Q=R*2,r.z=-A.ZNeg+Q,l.tr.addInPlace(l.ori.rotateVec3(r)),F=R*2;const V=A.XPos+A.XNeg,h=A.YPos+A.YNeg;this.viewHeight=Math.max(h,V/C);const m=.1;this.viewHeight+=this.viewHeight*m}else{const r=n/2,R=I/2,V=new f(Math.cos(r)*A.XPos,Math.sin(r)*A.XPos),h=V.add(new f(Math.sin(r),-Math.cos(r))),m=new f(-Math.cos(r)*A.XNeg,Math.sin(r)*A.XNeg),Z=m.add(new f(-Math.sin(r),-Math.cos(r))),c=f.intersectionOfLines(V,h,m,Z),W=new f(Math.cos(R)*A.YPos,Math.sin(R)*A.YPos),u=W.add(new f(Math.sin(R),-Math.cos(R))),J=new f(-Math.cos(R)*A.YNeg,Math.sin(R)*A.YNeg),N=J.add(new f(-Math.sin(R),-Math.cos(R))),X=f.intersectionOfLines(W,u,J,N);if(c===null||X===null){console.warn("xP or yP === null");return}Q=Math.max(c.y,X.y);const y=new b(c.x,X.x,Q);l.tr.addInPlace(l.ori.rotateVec3(y)),F=B.distanceTo(l.tr);const _=F*.1;l.tr.addInPlace(l.ori.rotateVec3(new b(0,0,_))),Q+=_}if(this.adjustNearAndFarPlanesToFocalDist){A.ZPos-=Q,A.ZNeg+=Q;const r=A.ZNeg*this.nearDistFactor,R=-A.ZPos*this.farDistFactor;this.nearParam.value=r,this.farParam.value=R}}this.setFocalDistance(F),this.globalXfoParam.value=l,this.emit("movementFinished")}updateProjectionMatrix(e,g){const t=this.isOrthographicParam.value,I=this.fovParam.value,l=this.nearParam.value,C=this.farParam.value,n=new Ee;if(t>0){const F=this.viewHeight*.5,a=-F,U=F,d=F*-g,s=F*g;n.setOrthographicMatrix(d,s,a,U,l,C)}t<1&&e.setPerspectiveMatrix(I,g,l,C),t==1?e.setFromMat4(n):t>0&&e.set(q.lerp(e.m00,n.m00,t),q.lerp(e.m01,n.m01,t),q.lerp(e.m02,n.m02,t),q.lerp(e.m03,n.m03,t),q.lerp(e.m10,n.m10,t),q.lerp(e.m11,n.m11,t),q.lerp(e.m12,n.m12,t),q.lerp(e.m13,n.m13,t),q.lerp(e.m20,n.m20,t),q.lerp(e.m21,n.m21,t),q.lerp(e.m22,n.m22,t),q.lerp(e.m23,n.m23,t),q.lerp(e.m30,n.m30,t),q.lerp(e.m31,n.m31,t),q.lerp(e.m32,n.m32,t),q.lerp(e.m33,n.m33,t))}}S.register("Camera",Ja);class Rd extends ag{constructor(e,g){super();this.bindXfo=new v,this.invBindXfo=new v,this.groupGlobalXfo=new Pg("GroupGlobalXfo"),this.groupTransformXfo=new Yl("GroupTransformXfo"),this.groupGlobalXfo.setParam(e),this.groupTransformXfo.setParam(g),this.addInput(this.groupGlobalXfo),this.addOutput(this.groupTransformXfo)}setBindXfo(e){this.bindXfo=e,this.invBindXfo=e.inverse(),this.setDirty()}evaluate(){if(this.invBindXfo){const e=this.groupGlobalXfo.getValue();this.groupTransformXfo.setClean(e.multiply(this.invBindXfo))}else this.groupTransformXfo.setClean(new v)}}class hd extends ag{constructor(e,g){super();this.groupTransformXfo=new Pg("GroupTransformXfo"),this.memberGlobalXfo=new Yl("MemberGlobalXfo",Mt.OP_READ_WRITE),this.groupTransformXfo.setParam(e),this.memberGlobalXfo.setParam(g),this.addInput(this.groupTransformXfo),this.addOutput(this.memberGlobalXfo),this._enabled=!0}disable(){this._enabled=!1,this.setDirty()}enable(){this._enabled=!0,this.setDirty()}evaluate(){const e=this.memberGlobalXfo.getValue();if(this._enabled){const g=this.groupTransformXfo.getValue();this.memberGlobalXfo.setClean(g.multiply(e))}else this.memberGlobalXfo.setClean(e)}}const Nt={disabled:0,manual:1,first:2,average:3,globalOri:4};class at extends Pl{constructor(e=""){super(e);this.initialXfoModeParam=new OC("InitialXfoMode",Nt.average,["manual","first","average","global"]),this.groupTransformParam=new cg("GroupTransform",new v),this.calculatingGroupXfo=!1,this.memberXfoOps=[],this.addParameter(this.initialXfoModeParam),this.initialXfoModeParam.on("valueChanged",()=>{this.calcGroupXfo()}),this.addParameter(this.groupTransformParam),this.groupTransformOp=new Rd(this.globalXfoParam,this.groupTransformParam)}static get INITIAL_XFO_MODES(){return Nt}updateHighlight(){setTimeout(()=>{let e=!1,g;this.isSelected()&&(e=!0,g=this.getHighlight(),g.a=.2);const t="kinematicGroupItemHighlight"+this.getId();Array.from(this.itemsParam.value).forEach(I=>{I instanceof H&&(e?I.addHighlight(t,g,!0):I.removeHighlight(t,!0))})},1)}setSelected(e){super.setSelected(e),this.updateHighlight()}calcGroupXfo(){const e=Array.from(this.itemsParam.value);if(e.length==0)return;this.calculatingGroupXfo=!0,this.memberXfoOps.forEach(I=>I.disable());const g=this.initialXfoModeParam.value;let t;if(g==Nt.manual)t=this.globalXfoParam.value;else if(g==Nt.first&&e[0]instanceof H)t=e[0].globalXfoParam.value;else if(g==Nt.average){t=new v,t.ori.set(0,0,0,0);let I=0;e.forEach((l,C)=>{if(l instanceof H){const n=l.globalXfoParam.value;t.tr.addInPlace(n.tr),t.ori.addInPlace(n.ori),I++}}),t.tr.scaleInPlace(1/I),t.ori.normalizeInPlace()}else if(g==Nt.globalOri){t=new v;let I=0;e.forEach((l,C)=>{if(l instanceof H){const n=l.globalXfoParam.value;t.tr.addInPlace(n.tr),I++}}),t.tr.scaleInPlace(1/I)}else throw new Error("Invalid GROUP_XFO_MODES.");this.globalXfoParam.value=t,this.groupTransformOp.setBindXfo(t),this.memberXfoOps.forEach(I=>I.enable()),this.calculatingGroupXfo=!1}bindItem(e,g){if(super.bindItem(e,g),e instanceof H){if(this.isSelected()){const t=this.getHighlight();t.a=.2;const I="kinematicGroupItemHighlight"+this.getId();e.addHighlight(I,t,!0)}{const t=e.globalXfoParam,I=new hd(this.groupTransformParam,t);this.memberXfoOps.splice(g,0,I),this.__itemsEventHandlers[g]||(this.__itemsEventHandlers[g]={});const l=this.__itemsEventHandlers[g];l["BoundingBox.valueChanged"]=e.boundingBoxParam.on("valueChanged",C=>{this.setBoundingBoxDirty()})}}}unbindItem(e,g){if(super.unbindItem(e,g),e instanceof H){if(this.isSelected()){const t="kinematicGroupItemHighlight"+this.getId();e.removeHighlight(t,!0)}this.memberXfoOps[g].detach(),this.memberXfoOps.splice(g,1),this.setBoundingBoxDirty()}}addItem(e,g=!0){super.addItem(e,g),g&&this.calcGroupXfo()}removeItem(e,g=!0){super.removeItem(e,g),g&&this.calcGroupXfo()}setItems(e){super.setItems(e),this.calcGroupXfo()}clearItems(e=!0){super.clearItems(e),this.memberXfoOps=[],e&&this.calcGroupXfo()}loadDone(){this.calculatingGroupXfo=!0,this.calcGroupXfo(),this.calculatingGroupXfo=!1}clone(e){const g=new at;return g.copyFrom(this,e),g}}S.register("KinematicGroup",at);class di extends Pl{constructor(e){super(e);this.materialParam=new YI("Material"),this.__backupMaterials={},this.addParameter(this.materialParam),this.materialParam.on("valueChanged",()=>{this.updateMaterial()})}updateHighlight(){this.__updateHighlightHelper()}__updateHighlightHelper(){let e=!1,g;this.isSelected()&&(g=this.getHighlight(),e=!0,g.a=.2);const t="kinematicGroupItemHighlight"+this.getId();Array.from(this.itemsParam.value).forEach(I=>{I instanceof H&&(e?I.addHighlight(t,g,!0):I.removeHighlight(t,!0))})}setSelected(e){super.setSelected(e),this.updateHighlight()}updateOpacity(){super.updateOpacity(),Array.from(this.itemsParam.value).forEach(e=>{e instanceof H&&(e.opacityParam.value=this.opacity)})}updateMaterial(){this.updateMaterialHelper()}updateMaterialHelper(){const e=this.materialParam.value;Array.from(this.itemsParam.value).forEach(g=>{g.traverse(t=>{if(t instanceof Lg){const l=t.materialParam;if(e){const C=l.value;C!=e&&(!C||C.getShaderName()!="LinesShader")&&(this.__backupMaterials[l.getId()]=C,l.value=e)}else this.__backupMaterials[l.getId()]&&(l.value=this.__backupMaterials[l.getId()])}})})}bindItem(e,g){if(super.bindItem(e,g),!(e instanceof H))return;if(this.isSelected()){const I=this.getHighlight();I.a=.2;const l="materialGroupItemHighlight"+this.getId();e.addHighlight(l,I,!0)}const t=this.materialParam.value;t&&e.traverse(I=>{if(I instanceof Lg){const C=I.materialParam;if(t){const n=C.value;n!=t&&(!n||n.getShaderName()!="LinesShader")&&(this.__backupMaterials[C.getId()]=n,C.value=t)}}},!0),e.opacityParam.value=this.opacity}unbindItem(e,g){if(super.unbindItem(e,g),e instanceof H&&this.isSelected()){const t="materialGroupItemHighlight"+this.getId();e.removeHighlight(t,!0)}}clone(e){const g=new di(this.__name+"clone");return g.copyFrom(this,e),g}}S.register("MaterialGroup",di);class cd extends ag{constructor(e,g){super();this.groupGlobalXfo=new Pg("GroupGlobalXfo"),this.cuttingPlane=new MU("CuttingPlane"),this.groupGlobalXfo.setParam(e),this.cuttingPlane.setParam(g),this.addInput(this.groupGlobalXfo),this.addOutput(this.cuttingPlane)}evaluate(){const e=this.groupGlobalXfo.getValue(),g=e.ori.getZaxis(),t=e.tr.dot(g);this.cuttingPlane.setClean(new Be(g.x,g.y,g.z,-t))}}class si extends Pl{constructor(e=""){super(e);this.cutAwayEnabledParam=new Je("CutAwayEnabled",!1),this.cutPlaneParam=new wt("CutPlane",new Be(1,0,0)),this.addParameter(this.cutAwayEnabledParam),this.addParameter(this.cutPlaneParam),this.cutPlaneOp=new cd(this.globalXfoParam,this.cutPlaneParam),this.cutAwayEnabledParam.on("valueChanged",C=>{this.updateCutaway(C)}),this.cutPlaneParam.on("valueChanged",C=>{this.updateCutaway(C)});const g=new Ve("plane","FlatSurfaceShader");g.getParameter("BaseColor").value=new E(1,1,1,.2);const t=new ge("PlaneGeom",new Dt(1,1),g);t.setSelectable(!1),this.addChild(t);const I=new Ve("border","LinesShader");I.getParameter("BaseColor").value=new E(1,0,0,1);const l=new ge("BorderGeom",new ti(1,1),I);l.setSelectable(!1),this.addChild(l)}updateCutaway(e){const g=this.cutAwayEnabledParam.value,t=this.cutPlaneParam.value,I=t.xyz,l=t.w;e instanceof Lg?(e.setCutawayEnabled(g),e.setCutVector(I),e.setCutDist(l)):Array.from(this.itemsParam.value).forEach(C=>{C.traverse(n=>{n instanceof Lg&&(n.setCutawayEnabled(g),n.setCutVector(I),n.setCutDist(l))},!0)})}bindItem(e,g){if(!(e instanceof H))return;this.cutAwayEnabledParam.value&&this.updateCutaway(e);const I=new gg;Array.from(this.itemsParam.value).forEach(l=>{l instanceof H&&I.addBox3(l.boundingBoxParam.value)});{const l=I.p1.x-I.p0.x,C=I.p1.y-I.p0.y,n=new v;n.sc.set(l,C,1),this.getChild(0).localXfoParam.value=n,this.getChild(1).localXfoParam.value=n}}unbindItem(e,g){e instanceof H&&e.traverse(t=>{t instanceof Lg&&t.setCutawayEnabled(!1)},!0)}clone(e){const g=new si;return g.copyFrom(this,e),g}}S.register("CuttingPlane",si);class ot extends dt{constructor(e){super(e);this.cadfileVersion=new rI("0,0,0"),this.metadataLoaded=!1}clone(e){const g=new ot;return g.copyFrom(this,e),g}getVersion(){return this.cadfileVersion}readRootLevelBinary(e,g){g.versions={},g.versions["zea-cad"]=new rI(e.loadStr()),g.sdk=e.loadStr(),this.cadfileVersion=g.versions["zea-cad"],super.readBinary(e,g)}load(e,g=new st){return this.loadPromise?this.loadPromise:(this.loadPromise=new Promise((t,I)=>{const l=e.lastIndexOf("/")>-1?e.substring(0,e.lastIndexOf("/"))+"/":"",C=e.lastIndexOf("/")>-1?e.substring(e.lastIndexOf("/")+1):"",n=C.substring(0,C.lastIndexOf("."));this.url=e,g=g.clone(),g.assetItem=this,g.url=e,g.folder=l,g.xrefs={},g.on("done",()=>{this.loaded=!0,t(),this.emit("loaded")}),g.incrementAsync(),ee.incrementWorkload(1),this.geomLibrary.once("loaded",()=>{ee.incrementWorkDone(1)}),ee.loadFile("archive",e).then(F=>{if(!(F.tree2||F.tree)){console.error("Corrupt zcad file. Missing 'tree':",e),ee.incrementWorkDone(1),g.decrementAsync();return}const a=new RI((F.tree2||F.tree).buffer,0,_e.isMobileDevice),U=this.getName();if(this.readRootLevelBinary(a,g),U!=""&&this.setName(U),g.versions["zea-cad"]=this.getVersion(),g.versions["zea-engine"]=this.getEngineDataVersion(),F.geoms)this.geomLibrary.readBinaryBuffer(C,F.geoms.buffer,g),F.geomsdata&&(this.geomLibrary.loadMetadata(F.geomsdata,g),this.metadataLoaded=!0);else if(F["geomLibrary.json"]){const d=JSON.parse(new TextDecoder("utf-8").decode(F["geomLibrary.json"])),s=l+n;d.numGeomFiles==0?(console.error("Corrupt zcad file. Missing 'geoms':",e),ee.incrementWorkDone(1)):this.geomLibrary.loadGeomFilesStream(d,s,g)}else ee.incrementWorkDone(1);g.decrementAsync()},F=>{g.decrementAsync(),ee.incrementWorkDone(1),this.emit("error",F),I(F)})}),this.loadPromise)}loadMetadata(e=""){return this.metadataLoaded?Promise.resolve():this.metadataLoadPromise?this.metadataLoadPromise:(this.metadataLoadPromise=new Promise((g,t)=>{if(this.metadataLoaded&&g(),e==""){const I=this.url;e=I.substring(0,I.lastIndexOf("."))+".zmetadata"}console.log(e),ee.incrementWorkload(),ee.loadFile("archive",e).then(I=>{const l=new st;l.versions["zea-cad"]=this.getVersion(),l.versions["zea-engine"]=this.getEngineDataVersion(),this.geomLibrary.loadMetadata(I.geomsdata,l),ee.incrementWorkDone(1),this.metadataLoaded=!0,g()},I=>{ee.incrementWorkDone(1),this.emit("error",I),t(I)})}),this.metadataLoadPromise)}}S.register("CADAsset",ot);class oi extends H{constructor(e){super(e)}clone(e){const g=new oi;return g.copyFrom(this,e),g}}S.register("CADAssembly",oi);class jl extends H{constructor(e){super(e)}clone(e){const g=new jl;return g.copyFrom(this,e),g}}S.register("CADPart",jl);class At extends ge{constructor(e){super(e);this.shattered=!1}setShatterState(e){this.shattered!=e&&(this.shattered=e,this.emit("shatterStateChanged",new YC(e)))}clone(e){const g=new At;return g.copyFrom(this,e),g}readBinary(e,g){if(g.versions["zea-engine"].compare([3,9,0])<0){if(Lg.prototype.readBinary.call(this,e,g),e.loadSInt32(),g.versions["zea-cad"].compare([0,0,4])<0){const t=e.loadStr();let l=g.assetItem.getMaterialLibrary().getMaterial(t,!1);l||(l=new Ve(t,"SimpleSurfaceShader"),l.getParameter("BaseColor").setValue(E.random(.25)),g.assetItem.getMaterialLibrary().addMaterial(l)),this.materialParam.setValue(l)}if(g.versions["zea-cad"].compare([0,0,2])>=0&&g.versions["zea-cad"].compare([0,0,4])<0){this.__layers=e.loadStrArray();for(const t of this.__layers)g.addGeomToLayer(this,t)}}else super.readBinary(e,g)}}S.register("CADBody",At);const Zd=new Hl(1,1,1);let II=null;class sn extends ge{addHighlight(e,g,t=!1){}removeHighlight(e,g=!1){}}class xg extends H{constructor(e){super(e);this.materialMapping={}}clone(e){const g=new xg;return g.copyFrom(this,e),g}setSelected(e){super.setSelected(e),e?this.activate():this.deactivate()}activate(){}deactivate(){}addHighlight(e,g,t=!1){if(super.addHighlight(e,g,!1),t){const C=g.clone();C.a=1;const n={};this.traverse(F=>{if(F instanceof sn)return!1;if(F instanceof ge){const a=F.materialParam.value;if(this.materialMapping[F.getId()]=a,!(a.getId()in n)){const U=a.clone();if(U.hasParameter("BaseColor")){const d=U.getParameter("BaseColor");d instanceof ye&&(d.colorSpace=Bg.Gamma),d.setValue(C)}if(U.hasParameter("EdgeColor")){const d=U.getParameter("EdgeColor");d instanceof ye&&(d.colorSpace=Bg.Gamma),d.setValue(C)}U.hasParameter("Overlay")&&U.getParameter("Overlay").setValue(.85),U.__isOpaque=!1,F.materialParam.value=U,n[a.getId()]=U}F.materialParam.value=n[a.getId()]}})}const l=this.getOwner().getOwner().getOwner();if(l){const C={},n={},F=this.getParameter("LinkedEntities");if(F){F.getValue().forEach((U,d)=>{if(U=="")return;const s=U.split(", "),o=s.pop();try{const A=l.resolvePath(s);if(A&&A instanceof At)if(A.getNumChildren()==0)A.setShatterState(!0),C[A.getId()]||(C[A.getId()]=A,n[A.getId()]=[]),n[A.getId()].push(o);else{const B=A.getChildByName(o);B&&B.addHighlight(e,g,!0)}else console.log("linkedEntity.addHighlight(name, color, true):",s)}catch(A){console.log(d+":"+A.message)}});for(let U in C){const d=C[U],s=n[U];d.addHighlight(e+":"+s.toString(),g,!0)}}}}removeHighlight(e,g=!1){super.removeHighlight(e,!1),g&&this.traverse(l=>{l instanceof ge&&l.getId()in this.materialMapping&&(l.materialParam.value=this.materialMapping[l.getId()],delete this.materialMapping[l.getId()])});const I=this.getOwner().getOwner().getOwner();if(I){const l={},C={},n=this.getParameter("LinkedEntities");if(n){n.getValue().forEach(a=>{if(a=="")return;const U=a.split(", "),d=U.pop();try{const s=I.resolvePath(U);if(s&&s instanceof At)if(s.getNumChildren()==0)s.setShatterState(!1),l[s.getId()]||(l[s.getId()]=s,C[s.getId()]=[]),C[s.getId()].push(d);else{const o=s.getChildByName(d);o&&o.removeHighlight(e,!0)}else console.log("linkedEntity.addHighlight(name, color, true):failed")}catch(s){console.log(s.message)}});for(let a in l){const U=l[a],d=C[a];U.removeHighlight(e+":"+d.toString(),!0)}}}}readBinary(e,g){super.readBinary(e,g),this.traverse(t=>{if(t instanceof ge){const I=t.materialParam.value;I.getShaderName()=="StandardSurfaceShader"&&I.setShaderName("FlatSurfaceShader"),t.__opacity=.99}}),g.assetItem.getGeometryLibrary().once("loaded",()=>{this.traverse(t=>{if(t.getName().startsWith("Text")){const I=[];return t.traverse(l=>{if(l instanceof ge){const n=l.geomParam.value.getBoundingBox();II||(II=new xI("plane"),II.baseColorParam.value=new E(1,1,0,.001),II.overlayParam.value=-.001);const F=new sn("plane",Zd,II),a=l.localXfoParam.value.multiply(l.geomOffsetXfoParam.value);a.tr.addInPlace(n.center()),a.sc.multiplyInPlace(n.diagonal()),F.localXfoParam.value=a,I.push(F)}},!1),I.forEach(l=>t.addChild(l,!1)),!1}},!1)})}}S.register("PMIItem",xg);class Rl extends xg{constructor(e){super(e);this.camera=null}clone(e){const g=new Rl;return g.copyFrom(this,e),g}activate(){super.activate();let e=[];this.hasParameter("GraphicalElements")&&(e=this.getParameter("GraphicalElements").getValue());const t=(()=>{let C=this;for(;C&&!(C instanceof ot);)C=C.getParentItem();return C instanceof ot?C:null})(),I=this.getParentItem().getParentItem(),l=I.getParentItem();if(l){const C=[];I.traverse(n=>{n instanceof Rl||n instanceof xg&&C.push(n)}),C.forEach(n=>{const F=e.includes(n.getName());n.setVisible(F)})}if(this.camera){const C=this.localXfoParam.value.clone(),n=this.getParameter("TargetPoint").getValue().clone(),F=this.getParameter("CameraType").getValue();C.tr.scaleInPlace(t.unitsScale),n.scaleInPlace(t.unitsScale);const a=C.tr.distanceTo(n);if(C.sc.set(1,1,1),this.camera.globalXfoParam.value=C,this.camera.setFocalDistance(a),F=="Camera_Orthographic"&&(this.camera.setIsOrthographic(1,0),this.hasParameter("CameraZoom")&&t)){const U=this.getParameter("CameraZoom").getValue(),d=1/U*t.unitsScale*2;this.camera.setFrustumHeight(d)}}if(this.hasParameter("ClippingPlaneOrigin")){const C=this.getParameter("ClippingPlaneOrigin").getValue(),n=this.getParameter("ClippingPlaneNormal").getValue(),F=!0,a=-C.dot(n)*t.unitsScale;l.traverse(U=>{if(U instanceof xg)return!1;U instanceof ge&&(U.setCutawayEnabled(F),U.setCutVector(n),U.setCutDist(a))})}else l.traverse(C=>{if(C instanceof xg)return!1;C instanceof ge&&C.setCutawayEnabled(!1)})}deactivate(){super.deactivate()}readBinary(e,g){super.readBinary(e,g),g.camera&&(this.camera=g.camera)}}S.register("PMIView",Rl);class Ai extends ot{constructor(e){super(e)}clone(e){const g=new Ai;return g.copyFrom(this,e),g}readBinary(e,g){e.loadStr();const t=e.loadStr();this.setName(t);let I=e.loadStr();const l=new v;if(g.versions["zea-cad"].compare([3,6,2])>0?(l.tr=e.loadFloat32Vec3(),l.ori=e.loadFloat32Quat(),this.localXfoParam.value=l):t==""&&this.setName(I),g.incrementAsync(),g.xrefs[I]){const C=g.xrefs[I],n=()=>{this.copyFrom(C),this.setName(t),this.localXfoParam.value=l,this.loaded=!0,this.emit("loaded"),g.decrementAsync()};C.loaded?n():C.on("loaded",n)}else{let C;g.resources?g.resources[I]?C=g.resources[I]:(I.includes("/")?I=I.slice(I.lastIndexOf("/")+1):I.includes("\\")&&(I=I.slice(I.lastIndexOf("\\")+1)),g.resources[I]?C=g.resources[I]:g.xrefLoadCallback&&(C=g.xrefLoadCallback.call(g,I,this))):g.xrefLoadCallback?C=g.xrefLoadCallback.call(g,I,this):(I.includes("/")?I=I.slice(I.lastIndexOf("/")+1):I.includes("\\")&&(I=I.slice(I.lastIndexOf("\\")+1)),C=g.folder+I+".zcad"),C?(g.xrefs[I]=this,this.load(C,new st(g)).then(()=>{g.decrementAsync()},()=>{g.decrementAsync()})):(g.decrementAsync(),console.warn(`While Loading ${this.getPath()} unable to resolve ${I}`))}}}S.register("XRef",Ai);const dg={OPAQUE:1<<0,TRANSPARENT:1<<1,OVERLAY:1<<2};class Ga extends xt{constructor(){super();this.enabled=!0,this.passIndex=-1,this.__gl=null,this.renderer=null,this.__renderer=null,this.enabledParam=new Je("Enabled",!0),this.enabled=!0,this.passIndex=0,this.addParameter(this.enabledParam),this.enabledParam.on("valueChanged",()=>this.enabled=this.enabledParam.value)}parameterValueChanged(e){super.parameterValueChanged(e),this.renderer&&this.renderer.requestRedraw()}init(e,g){if(g==null)throw new Error("Missing constructor argument.");this.__gl=e.gl,this.renderer=e,this.__renderer=e,this.passIndex=g}setPassIndex(e){this.passIndex=e}getPassType(){return dg.OPAQUE}itemAddedToScene(e,g){throw Error(`${this.constructor.name} must implement itemAddedToScene and itemRemovedFromScene`)}itemRemovedFromScene(e,g){throw Error(`${this.constructor.name} must implement itemAddedToScene and itemRemovedFromScene`)}startPresenting(){}stopPresenting(){}draw(e){throw Error("draw not implemented on GLPass")}drawHighlightedGeoms(e){}drawGeomData(e){}getGeomItemAndDist(e){throw Error("getGeomItemAndDist not implemented on GLPass")}}class ua extends H{constructor(e=5,g=50,t=new E("#DCDCDC")){super("GridTree");this.disableBoundingBox=!0,this.setSelectable(!1);const I=new Ve("gridMaterial","LinesShader");I.getParameter("BaseColor").value=t,I.getParameter("Overlay").value=0,I.getParameter("StippleValue").value=0,I.getParameter("OccludedStippleValue").value=1;const l=new Wa(e,e,g,g,!0),C=new ge("GridItem",l,I);C.setSelectable(!1),this.addChild(C,!1);const n=new sg;n.setNumVertices(2),n.setNumSegments(1),n.setSegmentVertexIndices(0,0,1);const F=n.getVertexAttribute("positions");F.getValueRef(0).set(e*-.5,0,0),F.getValueRef(1).set(e*.5,0,0);const a=new Ve("gridXAxisMaterial","LinesShader");a.getParameter("BaseColor").value=new E(t.luminance(),0,0),a.getParameter("Overlay").value=0,a.getParameter("StippleValue").value=0,a.getParameter("OccludedStippleValue").value=1;const U=new ge("xAxisLine",n,a);U.setSelectable(!1),this.addChild(U,!1);const d=new Ve("gridYAxisMaterial","LinesShader");d.getParameter("BaseColor").value=new E(0,t.luminance(),0),d.getParameter("Overlay").value=0,d.getParameter("StippleValue").value=0,d.getParameter("OccludedStippleValue").value=1;const s=new ge("yAxisLine",n,d);s.setSelectable(!1);const o=new v;o.ori.setFromAxisAndAngle(new b(0,0,1),Math.PI*.5),s.geomOffsetXfoParam.value=o,this.addChild(s,!1)}_cleanBoundingBox(){return new gg}}S.register("GridTreeItem",ua);const md=new E("#DCDCDC");class Wd{constructor(){this.envMapParam=new TI("EnvMap"),this.displayEnvMapParam=new Je("Display EnvMap",!1),this.envMapLODParam=new k("EnvMapLOD",0),this.root=new H("root")}getRoot(){return this.root}getResourceLoader(){return ee}setEnvMap(e){this.envMapParam.value=e}setupGrid(e=5,g=50,t=md){const I=new ua(e,g,t);return this.root.addChild(I,!1),I}}class Sa extends dt{constructor(e){super(e);this.geomLibrary.on("loaded",()=>{this.emit("geomsLoaded")})}readBinary(e,g){g.versions["zea-engine"]||(g.versions["zea-mesh"]=new rI(e.loadStr()));const t=e.loadUInt32();return super.readBinary(e,g),g.versions["zea-engine"].compare([2,1,0])<0&&e.loadFloat32Vec2(),this.geomLibrary.setNumGeoms(e.loadUInt32()),t}load(e,g=new st){return new Promise((t,I)=>{const l=e.lastIndexOf("/")>-1?e.substring(0,e.lastIndexOf("/"))+"/":"",C=e.lastIndexOf("/")>-1?e.substring(e.lastIndexOf("/")+1):"",n=C.substring(0,C.lastIndexOf("."));let F=0;g.assetItem=this,g.url=e,g.folder=l,ee.incrementWorkload(1),this.geomLibrary.on("loaded",()=>{ee.incrementWorkDone(1)}),ee.loadFile("archive",e).then(a=>{let U;if(a.tree2)U=new RI(a.tree2.buffer,0,_e.isMobileDevice);else{const d=a.tree?a.tree:a[Object.keys(a)[0]];U=new RI(d.buffer,0,_e.isMobileDevice),g.versions["zea-engine"]=new rI}if(F=this.readBinary(U,g),this.loaded=!0,this.emit("loaded"),F==0&&a.geoms)this.geomLibrary.readBinaryBuffer(C,a.geoms.buffer,g);else{const d=l+n,s={numGeomsPerFile:F,numGeoms:this.geomLibrary.getNumGeoms()};this.geomLibrary.loadGeomFilesStream(s,d,g)}t()},a=>{this.emit("error",a),I(a)})})}}S.register("VLAAsset",Sa);class bd extends dt{constructor(e){super(e);this.splitObjects=new Je("splitObjects",!1),this.splitGroupsIntoObjects=new Je("splitGroupsIntoObjects",!1),this.loadMtlFile=new Je("loadMtlFile",!0),this.unitsConversion=new k("unitsConversion",1),this.defaultShader=new Zg("defaultShader",""),this.splitObjectsParam=new Je("splitObjects",!1),this.splitGroupsIntoObjectsParam=new Je("splitGroupsIntoObjects",!1),this.loadMtlFileParam=new Je("loadMtlFile",!0),this.unitsConversionParam=new k("unitsConversion",1),this.defaultShaderParam=new Zg("defaultShader",""),this.addParameter(this.splitObjectsParam),this.addParameter(this.splitGroupsIntoObjectsParam),this.addParameter(this.loadMtlFileParam),this.addParameter(this.unitsConversionParam),this.addParameter(this.defaultShaderParam)}load(e){return this.loaded=!1,new Promise((g,t)=>{const I=e.substring(0,e.lastIndexOf("/"))+"/",l=B=>{const Q=B.split(`
`),r=/\s+/;let R;const V=function(m){if(m.length==3)return new E(parseFloat(m[0]),parseFloat(m[1]),parseFloat(m[2]));throw new Error("Unable to parse a color from the following parts:"+m.join("_"))},h=(m,Z)=>{const c=new qg(m);return c.load(I+Z),c};for(let m=0;m<Q.length;m++){let Z=Q[m].trim();if(Z.startsWith("#"))continue;Z.includes("#")&&(Z=Z.substring(0,Z.indexOf("#")).trim());const c=Z.split(r),W=c.shift(),u=c.join(" ");switch(W){case"newmtl":R=new Ve(u),R.setShaderName("StandardSurfaceShader"),this.materialLibrary.addMaterial(R);break;case"Kd":{const p=R.getParameter("BaseColor");p.value=V(c),p instanceof ye&&p.colorSpace==Bg.Linear;break}case"map_Kd":{const p=R.getParameter("BaseColor");p instanceof ye&&p.setImage(h("map_Kd",c[0]));break}case"Ks":const J=(parseFloat(c[0])+parseFloat(c[1])+parseFloat(c[2]))/3;R.getParameter("Roughness").value=1-J,R.getParameter("Reflectance").value=J;break;case"map_Ks":const N=R.getParameter("Roughness");N instanceof Oe&&N.setImage(h("map_Ks",c[0])),R.getParameter("Reflectance").value=.2;break;case"d":const X=parseFloat(u);X<1&&(R.setShaderName("TransparentSurfaceShader"),R.getParameter("Opacity").value=X);break;case"map_d":R.getParameter("alpha").value=parseFloat(c[0]);break;case"map_bump":const y=R.getParameter("Normal");y instanceof ye&&y.setImage(h("normal",c[0]));break}}},C=B=>new Promise(Q=>{MC(B,r=>{ee.incrementWorkDone(1),l(r),ee.incrementWorkDone(1),Q()})}),n=[],F=[],a=[],U={},d=B=>VI(this,void 0,void 0,function*(){const Q=B.split(`
`),r=/\s+/;let R,V,h=0;const m=W=>{if(W in U){let u=1;for(;W+String(u)in U;)u++;W=W+String(u)}R={verticesRemapping:{},texCoordsRemapping:{},normalsRemapping:{},vertexIndices:[],texCoordIndices:[],normalIndices:[],numVertices:0,numTexCoords:0,numNormals:0,faceCounts:[],material:V},U[W]=R,h++};m("geom");const Z=this.splitGroupsIntoObjectsParam.value,c=!1;for(let W=0;W<Q.length&&!c;W++){let u=Q[W].trim();if(u.startsWith("#"))continue;u.includes("#")&&(u=u.substring(0,u.indexOf("#")).trim());const J=u.split(r),N=J.shift(),X=J.join(" ");switch(N){case"":case"s":continue;case"mtllib":if(!this.loadMtlFileParam.value)continue;ee.incrementWorkload(2);const y=I+X;y&&(yield C(y));break;case"o":m(X);break;case"usemtl":V=X,m(X+Object.keys(U).length);break;case"g":Z&&m(X?J.join("_"):"Group"+h);break;case"v":n.push(J.map(p=>parseFloat(p)));break;case"vt":a.push(J.map(p=>parseFloat(p)));break;case"vn":F.push(J.map(p=>parseFloat(p)));break;case"f":{const p=[],_=[],ae=[];for(let ne=0,K=J.length;ne<K;ne++){const te=J[ne].split("/").map(Ce=>parseInt(Ce)-1),j=te[0];let se=R.verticesRemapping[j];if(se==null&&(se=R.numVertices,R.verticesRemapping[j]=se,R.numVertices++),p.push(se),te.length>1&&!isNaN(te[1])){const Ce=te[1];_.push(Ce)}if(te.length>2&&!isNaN(te[2])){const Ce=te[2];ae.push(Ce)}}R.vertexIndices.push(p),ae.length>0&&R.normalIndices.push(ae),_.length>0&&R.texCoordIndices.push(_),R.faceCounts[p.length-3]==null&&(R.faceCounts[p.length-3]=[]),R.faceCounts[p.length-3]++;break}default:console.warn("Unhandled line:"+u)}}}),s=()=>{for(const B in U)U[B].numVertices!=0&&o(B,U[B]);this.emit("loaded"),this.getGeometryLibrary().emit("loaded"),this.emit("geomsLoaded"),g()},o=(B,Q)=>{for(let J=0;J<Q.faceCounts.length;J++)Q.faceCounts[J]==null&&(Q.faceCounts[J]=0);const r=Q.numVertices,R=new ht;R.setDebugName(B),R.setFaceCounts(Q.faceCounts),R.setNumVertices(r);const V=R.getVertexAttribute("positions"),h=this.unitsConversionParam.value;for(const J in Q.verticesRemapping){const N=Number.parseInt(J),X=Q.verticesRemapping[N];V.getValueRef(X).set(n[N][0]*h,n[N][1]*h,n[N][2]*h)}let m,Z;Q.normalIndices.length>0&&(m=new Qg,R.addVertexAttribute("normals",m)),Q.texCoordIndices.length>0&&(Z=new Sg,R.addVertexAttribute("texCoords",Z));const c=Array(Q.faceCounts.length).fill(0);for(let J=0;J<Q.vertexIndices.length;J++){const N=Q.vertexIndices[J];let X=0;for(let y=0;y<N.length-3;++y)Q.faceCounts[y]&&(X+=Q.faceCounts[y]);if(X+=c[N.length-3],c[N.length-3]++,R.setFaceVertexIndices(X,N),m){const y=Q.normalIndices[J];for(let p=0;p<y.length;p++){const _=new b(F[y[p]][0],F[y[p]][1],F[y[p]][2]);m.setFaceVertexValue(X,p,_)}}if(Z&&Q.texCoordIndices.length==Q.vertexIndices.length){const y=Q.texCoordIndices[J];for(let p=0;p<y.length;p++){const _=new f(a[y[p]][0],a[y[p]][1]);Z.setFaceVertexValue(X,p,_)}}}const W=new ge(B,R),u=R.getBoundingBox().center();{const J=u.negate(),N=R.getVertexAttribute("positions");for(let X=0;X<N.getCount();X++)N.getValueRef(X).addInPlace(J);R.setBoundingBoxDirty()}if(W.localXfoParam.value=new v(u),Q.material!=null&&this.materialLibrary.hasMaterial(Q.material))W.materialParam.value=this.materialLibrary.getMaterial(Q.material);else{const J=this.defaultShaderParam.value,N=new Ve(B+" mat");N.setShaderName(J!=""?J:"StandardSurfaceShader"),this.materialLibrary.addMaterial(N),W.materialParam.value=N}this.addChild(W,!1)};(()=>{ee.incrementWorkload(2),MC(e,B=>{ee.incrementWorkDone(1),d(B).then(()=>{s(),ee.incrementWorkDone(1)})},B=>{this.emit("error",B),t(B)})})()})}}class Na extends xt{constructor(){super();this.__activated=!1}activateTool(){if(this.__activated)throw new Error("Tool already activate");this.__activated=!0,this.emit("activatedChanged",{activated:this.__activated})}deactivateTool(){this.__activated=!1,this.emit("activatedChanged",{activated:this.__activated})}onPointerDown(e){}onPointerMove(e){}onPointerUp(e){}onPointerDoublePress(e){}onPointerEnter(e){}onPointerLeave(e){}onWheel(e){}onKeyDown(e){}onKeyUp(e){}onTouchCancel(e){}}const ze={pan:0,dolly:1,focussing:2,look:3,turntable:4,tumbler:5,trackball:6};class Jd extends Na{constructor(e){super();this.orbitAroundCursor=!1,this.zoomTowardGeomUnderCursor=!1,this.aimFocusOnTouchTap=2,this.aimFocusOnMouseClick=2,this.enabledWASDWalkMode=!1,this.defaultManipulationState=ze.turntable,this.pointerDown=!1,this.dragging=0,this.keyboardMovement=!1,this.keysPressed=[],this.velocity=new b,this.prevVelocityIntegrationTime=-1,this.ongoingTouches={},this.mouseWheelMovementDist=0,this.mouseWheelZoomCount=0,this.mouseWheelZoomId=-1,this.orbitRateParam=new k("OrbitRate",_e.isMobileDevice?.5:1),this.dollySpeedParam=new k("DollySpeed",.02),this.mouseWheelDollySpeedParam=new k("MouseWheelDollySpeed",.1),this.walkSpeedParam=new k("WalkSpeed",5),this.walkModeCollisionDetection=new Je("WalkModeCollisionDetection",!1),this.appData=e,this.defaultManipulationState=ze.turntable,this.manipulationState=this.defaultManipulationState,this.addParameter(this.orbitRateParam),this.addParameter(this.dollySpeedParam),this.addParameter(this.mouseWheelDollySpeedParam),this.addParameter(this.walkSpeedParam),this.addParameter(this.walkModeCollisionDetection)}activateTool(){super.activateTool(),this.appData&&this.appData.renderer&&(this.prevCursor=this.appData.renderer.getGLCanvas().style.cursor,this.appData.renderer.getGLCanvas().style.cursor="cursor")}deactivateTool(){super.deactivateTool(),this.appData&&this.appData.renderer&&(this.appData.renderer.getGLCanvas().style.cursor=this.prevCursor)}setDefaultManipulationMode(e){if(typeof e=="string"?this.defaultManipulationState=ze[e]:this.defaultManipulationState=e,!Object.values(ze).includes(this.defaultManipulationState))throw new Error("Invalid Camera Manipulation Mode. Must be one of "+Object.keys(ze))}look(e,g){const{viewport:t}=e,I=t.getCamera(),l=this.orbitRateParam.value,C=I.globalXfoParam.value,n=new de;n.rotateZ(g.x/t.getWidth()*Math.PI*l),C.ori=n.multiply(C.ori);const F=new de;F.rotateX(g.y/t.getHeight()*Math.PI*l),C.ori.multiplyInPlace(F),I.globalXfoParam.value=C}turntable(e,g){const{viewport:t}=e,I=t.getCamera(),l=this.orbitRateParam.value,C=I.globalXfoParam.value,n=C.ori.inverse().rotateVec3(C.tr.subtract(this.orbitTarget)),F=new de;F.rotateZ(g.x/t.getWidth()*2*Math.PI*-l),C.ori=F.multiply(C.ori);const a=new de;a.rotateX(g.y/t.getHeight()*Math.PI*-l),C.ori.multiplyInPlace(a),C.tr=this.orbitTarget.add(C.ori.rotateVec3(n)),I.globalXfoParam.value=C}tumbler(e,g){const{viewport:t}=e,I=t.getCamera(),l=this.orbitRateParam.value,C=I.globalXfoParam.value,n=C.ori.getXaxis(),F=C.ori.getYaxis(),a=C.ori.getZaxis(),d=n.scale(-g.x).add(F.scale(g.y)).cross(a);d.normalizeInPlace();const s=g.length(),o=C.ori.inverse().rotateVec3(C.tr.subtract(this.orbitTarget)),A=new de;A.setFromAxisAndAngle(d,s/t.getWidth()*Math.PI*-l),C.ori=A.multiply(C.ori),C.tr=this.orbitTarget.add(C.ori.rotateVec3(o)),I.globalXfoParam.value=C}trackball(e,g){const{viewport:t}=e,I=t.getCamera(),l=this.orbitRateParam.value,C=I.globalXfoParam.value,n=C.ori.getXaxis(),F=C.ori.getYaxis(),a=C.ori.getZaxis(),d=n.scale(-g.x).add(F.scale(g.y)).cross(a);d.normalizeInPlace();const s=g.length(),o=C.ori.inverse().rotateVec3(C.tr.subtract(this.orbitTarget)),A=new de;A.setFromAxisAndAngle(d,s/t.getWidth()*Math.PI*-l),C.ori=A.multiply(C.ori),C.tr=this.orbitTarget.add(C.ori.rotateVec3(o)),I.globalXfoParam.value=C}pan(e,g){const{viewport:t}=e,I=t.getCamera(),l=new v,C=new b(1,0,0),n=new b(0,1,0);if(I.isOrthographic()){const a=I.getFrustumHeight(),U=a*(t.getWidth()/t.getHeight());l.tr=C.scale(-(g.x/t.getWidth())*U),l.tr.addInPlace(n.scale(g.y/t.getHeight()*a))}else{const a=I.getFocalDistance(),U=I.getFov(),d=2*a*Math.tan(.5*U),s=d*(t.getWidth()/t.getHeight());l.tr=C.scale(-(g.x/t.getWidth())*s),l.tr.addInPlace(n.scale(g.y/t.getHeight()*d))}const F=I.globalXfoParam.value;I.globalXfoParam.value=F.multiply(l)}dolly(e,g){const{viewport:t}=e,I=t.getCamera(),l=I.getFocalDistance(),C=()=>{const F=g.y*this.dollySpeedParam.value*l,a=new v;a.tr.set(0,0,F);const U=I.globalXfoParam.value;I.globalXfoParam.value=U.multiply(a)},n=()=>{const F=g.y*this.dollySpeedParam.value,a=I.getFrustumHeight(),U=a*F;I.setFrustumHeight(a+U)};I.isOrthographic()?n():C()}initDrag(e){const{pointerPos:g}=e;e.setCapture(this),this.pointerDown=!0;const I=e.viewport.getCamera(),l=I.globalXfoParam.value;if(this.orbitAroundCursor)if(e.intersectionData!=null&&this.orbitAroundCursor){this.orbitTarget=e.intersectionData.intersectionPos;const C=l.inverse().transformVec3(e.intersectionData.intersectionPos);I.setFocalDistance(-C.z)}else e.pointerRay?this.orbitTarget=e.pointerRay.pointAtDist(I.getFocalDistance()):this.orbitTarget=l.tr.add(l.ori.getZaxis().scale(-I.getFocalDistance()));else this.orbitTarget=l.tr.add(l.ori.getZaxis().scale(-I.getFocalDistance()));this.prevPointerPos=g,this.dragging=1}endDrag(e){e.getCapture()==this&&e.releaseCapture(),this.dragging=0,this.pointerDown=!1}aimFocus(e,g,t=-1,I=400){this.focusIntervalId&&clearInterval(this.focusIntervalId);const l=Math.round(I/20),C=this.manipulationState;let n=0;const F=()=>{const a=e.globalXfoParam.value,U=e.getFocalDistance(),d=g.subtract(a.tr),s=d.normalizeInPlace(),o=a.clone();if(C==ze.turntable||C==ze.look){{const Q=a.ori.getZaxis().clone();Q.z=0;const r=d.negate();r.z=0;const R=new de;R.setFrom2Vectors(Q,r),o.ori=R.multiply(o.ori)}{const Q=a.ori.getXaxis().clone(),r=a.ori.getZaxis().clone(),R=d.negate();R.subtractInPlace(Q.scale(R.dot(Q))),R.normalizeInPlace();const V=new de;r.cross(R).dot(Q)>0?V.rotateX(r.angleTo(R)):V.rotateX(-r.angleTo(R)),o.ori=o.ori.multiply(V)}{const Q=o.ori.getXaxis().clone(),r=Q.clone();r.z=0,r.normalizeInPlace();const R=new de;R.setFrom2Vectors(Q,r),o.ori=R.multiply(o.ori)}}else{const Q=a.ori.getZaxis().clone(),r=d.negate(),R=new de;R.setFrom2Vectors(Q,r),o.ori=R.multiply(o.ori)}const A=Math.pow(n/l,2),B=a.clone();if(B.ori=a.ori.lerp(o.ori,A),t>0){const Q=d.scale(s-t);B.tr.addInPlace(Q.scale(A))}e.setFocalDistance(U+(s-U)*A),e.globalXfoParam.value=B,n++,n<=l?this.focusIntervalId=setTimeout(F,20):(this.focusIntervalId=void 0,this.emit("movementFinished"),e.emit("movementFinished"))};F()}orientPointOfView(e,g,t,I=0,l=400){this.focusIntervalId&&clearInterval(this.focusIntervalId);const C=Math.round(l/20);let n=0;const F=()=>{const a=e.globalXfoParam.value,U=e.getTargetPosition(),d=Math.pow(n/C,2),s=g.subtract(a.tr),o=s.normalizeInPlace(),A=s.scale(o-I),B=a.tr.add(A.scale(d)),Q=U.lerp(t,d);e.setPositionAndTarget(B,Q),n++,n<=C?this.focusIntervalId=setTimeout(F,20):(this.focusIntervalId=void 0,this.emit("movementFinished"),e.emit("movementFinished"))};F()}onPointerDoublePress(e){const g=t=>{const l=e.viewport.getCamera(),n=l.globalXfoParam.value.tr.add(t.dir.scale(e.intersectionData.dist));this.aimFocus(l,n),e.aimTarget=n,e.aimDistance=e.intersectionData.dist,this.emit("aimingFocus",e),l.emit("aimingFocus",e),e.stopPropagation()};if(e.intersectionData&&this.aimFocusOnMouseClick){if(e.pointerType===ve.mouse&&this.aimFocusOnMouseClick==2){const t=e;g(t.pointerRay),t.preventDefault()}e.pointerType===ve.touch&&this.aimFocusOnTouchTap==2&&g(e.pointerRay)}}onPointerDown(e){if(e.pointerType===ve.mouse){this.dragging==1&&this.endDrag(e),this.initDrag(e);const g=e;g.button==2?this.manipulationState=ze.pan:g.ctrlKey&&g.altKey?this.manipulationState=ze.dolly:g.ctrlKey||g.button==2?this.manipulationState=ze.look:this.manipulationState=this.defaultManipulationState,g.preventDefault()}else e.pointerType===ve.touch&&this._onTouchStart(e);e.stopPropagation()}onPointerMove(e){this.dragging!=0&&(e.pointerType===ve.mouse&&this._onMouseMove(e),e.pointerType===ve.touch&&this._onTouchMove(e),this.dragging=2,e.stopPropagation())}_onMouseMove(e){if(!this.pointerDown)return;const g=e.pointerPos,t=g.subtract(this.prevPointerPos);switch(this.manipulationState){case ze.turntable:this.turntable(e,t);break;case ze.tumbler:this.tumbler(e,t);break;case ze.trackball:this.trackball(e,t);break;case ze.look:this.look(e,t);break;case ze.pan:this.pan(e,g.subtract(this.prevPointerPos));break;case ze.dolly:this.dolly(e,t);break}this.prevPointerPos=g,e.preventDefault()}_onTouchMove(e){const g=e.touches;if(g.length==1){const t=g[0],I=new f(t.clientX,t.clientY),l=this.ongoingTouches[t.identifier];if(!l)return;const C=I.subtract(l.pos);switch(this.defaultManipulationState){case ze.look:C.scaleInPlace(6),this.look(e,C);break;case ze.turntable:this.turntable(e,C);break;case ze.tumbler:this.tumbler(e,C);break;case ze.trackball:this.trackball(e,C);break}l.pos=I}else if(g.length==2){const t=g[0],I=this.ongoingTouches[t.identifier],l=g[1],C=this.ongoingTouches[l.identifier];if(!I||!C)return;const n=new f(t.clientX,t.clientY),F=new f(l.clientX,l.clientY),a=C.pos.subtract(I.pos).length(),U=F.subtract(n).length(),d=a-U,s=n.subtract(I.pos),o=F.subtract(C.pos),A=s.add(o);A.scaleInPlace(.5);const B=d*.002,{viewport:Q}=e,r=Q.getCamera(),R=r.getFocalDistance(),V=r.getFov(),h=new b(1,0,0),m=new b(0,1,0),Z=2*R*Math.tan(.5*V),c=Z*(Q.getWidth()/Q.getHeight()),W=new v;W.tr=h.scale(-(A.x/Q.getWidth())*c),W.tr.addInPlace(m.scale(A.y/Q.getHeight()*Z));const u=B*R;switch(r.setFocalDistance(R+u),W.tr.z+=u,this.defaultManipulationState){case ze.tumbler:case ze.trackball:const N=C.pos.subtract(I.pos),X=F.subtract(n);let y=N.normalize().angleTo(X.normalize());N.cross(X)<0&&(y=-y);const p=new de;p.rotateZ(y),W.ori.multiplyInPlace(p);break}const J=r.globalXfoParam.value;r.globalXfoParam.value=J.multiply(W),I.pos=n,C.pos=F}}onPointerUp(e){if(this.dragging==1){if(this.endDrag(e),e.intersectionData&&(e.pointerType===ve.mouse&&this.aimFocusOnMouseClick==1||e.pointerType===ve.touch&&this.aimFocusOnTouchTap==1)){const t=e.viewport.getCamera(),I=t.globalXfoParam.value,l=(e.pointerType===ve.mouse,e.pointerRay),C=I.tr.add(l.dir.scale(e.intersectionData.dist));this.aimFocus(t,C),e.aimTarget=C,e.aimDistance=e.intersectionData.dist,this.emit("aimingFocus",e),t.emit("aimingFocus",e),e.stopPropagation(),e.pointerType===ve.mouse&&e.preventDefault()}}else if(this.dragging==2){if(e.pointerType===ve.mouse)this.endDrag(e),this.emit("movementFinished"),e.viewport.getCamera().emit("movementFinished");else if(e.pointerType===ve.touch){const g=e,{changedTouches:t,touches:I}=g;for(let l=0;l<t.length;l++)this.__endTouch(t[l]);Object.keys(this.ongoingTouches).length==0?this.endDrag(e):I.length||(this.endDrag(e),this.ongoingTouches={}),g.preventDefault()}e.stopPropagation()}}onPointerLeave(e){this.keysPressed.length>0&&(this.keysPressed=[],this.velocity.set(0,0,0),this.keyboardMovement=!1)}onWheel(e){const t=e.viewport.getCamera(),I=this.mouseWheelDollySpeedParam.value,l=e.shiftKey?.1:.5,C=t.globalXfoParam.value;let n;if(!t.isOrthographic())if(this.zoomTowardGeomUnderCursor)if(e.intersectionData!=null){n=C.tr.subtract(e.intersectionData.intersectionPos),n.normalizeInPlace();const o=C.inverse().transformVec3(e.intersectionData.intersectionPos);t.setFocalDistance(-o.z)}else{const o=e.pointerRay.pointAtDist(t.getFocalDistance());n=C.tr.subtract(o),n.normalizeInPlace()}else n=t.globalXfoParam.value.ori.getZaxis();const F=6,a=e.deltaY<0?-1:1,U=()=>{const o=t.getFocalDistance(),A=o*this.mouseWheelMovementDist;C.tr.addInPlace(n.scale(A)),t.setFocalDistance(o+A),t.globalXfoParam.value=C,this.mouseWheelZoomCount++,this.mouseWheelZoomCount<F?this.mouseWheelZoomId=window.setTimeout(U,10):(this.mouseWheelZoomId=-1,this.emit("movementFinished"),t.emit("movementFinished"))},d=()=>{const o=50*this.mouseWheelMovementDist;new v().tr.set(0,0,o),C.tr.addInPlace(n.scale(o)),t.globalXfoParam.value=C},s=()=>{const o=t.getFrustumHeight(),A=o*this.mouseWheelMovementDist;if(t.setFrustumHeight(o+A),e.intersectionData&&this.zoomTowardGeomUnderCursor){const B=C.tr.subtract(e.intersectionData.intersectionPos),Q=C.ori.getZaxis();B.subtractInPlace(Q.scale(B.dot(Q))),C.tr.addInPlace(B.scale(A/(o+A))),t.globalXfoParam.value=C}this.mouseWheelZoomCount++,this.mouseWheelZoomCount<F?this.mouseWheelZoomId=window.setTimeout(s,10):(this.mouseWheelZoomId=-1,this.emit("movementFinished"),t.emit("movementFinished"))};this.mouseWheelZoomId>0?(this.mouseWheelMovementDist+=a*I*l*.5/F,this.mouseWheelZoomCount=0):(this.mouseWheelMovementDist=a*I*l/F,this.mouseWheelZoomCount=0,t.isOrthographic()?s():e.ctrlKey?d():U()),e.preventDefault(),e.stopPropagation()}integrateVelocityChange(e){const{viewport:g}=e,t=g.getCamera(),I=performance.now();if(this.prevVelocityIntegrationTime>0){const l=(I-this.prevVelocityIntegrationTime)/1e3,C=this.walkSpeedParam.value;if(C>0){const n=new v;n.tr=this.velocity.normalize().scale(C*l);const a=t.globalXfoParam.value.multiply(n);if(this.walkModeCollisionDetection.value){const A=new v(a.tr),B=new Ag(a.tr,new b(0,0,-1)),Q=g.getRenderer().raycastCluster(A,B,1.5,.5,dg.OPAQUE);if(Q.length>0){let r=0;Q.forEach(R=>{r+=R.dist}),r/=Q.length,a.tr=B.start.add(B.dir.scale(r-1.5))}}t.globalXfoParam.value=a}}this.prevVelocityIntegrationTime=I}onKeyDown(e){if(!this.enabledWASDWalkMode)return;const g=e.key.toLowerCase();if(!this.keysPressed.includes(g)){switch(g){case"w":this.velocity.z-=1;break;case"s":this.velocity.z+=1;break;case"a":this.velocity.x-=1;break;case"d":this.velocity.x+=1;break;default:return}if(e.stopPropagation(),this.keysPressed.push(g),!this.keyboardMovement){this.keyboardMovement=!0,this.prevVelocityIntegrationTime=performance.now();const t=()=>{this.integrateVelocityChange(e),this.keyboardMovement&&window.requestAnimationFrame(t)};window.requestAnimationFrame(t)}}}onKeyUp(e){const g=e.key.toLowerCase();if(!this.keysPressed.includes(g))return;switch(g){case"w":this.velocity.z+=1;break;case"s":this.velocity.z-=1;break;case"a":this.velocity.x+=1;break;case"d":this.velocity.x-=1;break;default:return}e.stopPropagation();const t=this.keysPressed.indexOf(g);this.keysPressed.splice(t,1),this.keysPressed.length==0&&(this.keyboardMovement=!1)}__startTouch(e){this.ongoingTouches[e.identifier]={identifier:e.identifier,pos:new f(e.clientX,e.clientY)}}__endTouch(e){delete this.ongoingTouches[e.identifier]}_onTouchStart(e){const g=e.changedTouches;for(let t=0;t<g.length;t++)this.__startTouch(g[t]);this.initDrag(e)}onTouchEnd(e){e.preventDefault(),e.stopPropagation();const g=e.changedTouches;for(let t=0;t<g.length;t++)this.__endTouch(g[t]);Object.keys(this.ongoingTouches).length==0&&this.endDrag(e)}onTouchCancel(e){e.preventDefault();const g=e.touches;for(let t=0;t<g.length;t++)this.__endTouch(g[t]);Object.keys(this.ongoingTouches).length==0&&this.endDrag(e)}static get MANIPULATION_MODES(){return ze}}const Gd=function(i,e){let g=null;if(e.webglContextType!=null)try{g=i.getContext(e.webglContextType,e),g.name=e.webglContextType}catch{}else{const t=["webgl2","webgl"];for(let I=0;I<t.length;I++){const l=t[I];try{g=i.getContext(l,e),g.name=l}catch{}if(g)break}}if(!g)throw new Error("WebGL not supported on your system");return g.sizeInBytes=function(t){switch(t){case this.BYTE:case this.UNSIGNED_BYTE:return 1;case this.SHORT:case this.UNSIGNED_SHORT:return 2;case this.INT:case this.UNSIGNED_INT:case this.FLOAT:return 4;default:throw new Error("unknown type")}},g.name=="webgl2"?(g.floatTexturesSupported=!0,g.__ext_float_linear=g.getExtension("OES_texture_float_linear"),g.__ext_texture_half_float_linear=g.getExtension("OES_texture_half_float_linear"),g.__ext_color_buffer_float=g.getExtension("EXT_color_buffer_float")):(g.__ext_float=g.getExtension("OES_texture_float"),g.__ext_float?(g.floatTexturesSupported=!0,g.__ext_float_linear=g.getExtension("OES_texture_float_linear")):console.warn("OES_texture_float is not available"),g.__ext_half_float=g.getExtension("OES_texture_half_float"),g.__ext_half_float&&(g.HALF_FLOAT=g.__ext_half_float.HALF_FLOAT_OES,g.floatTexturesSupported=!0,g.__ext_texture_half_float_linear=g.getExtension("OES_texture_half_float_linear")),g.__ext_color_buffer_float=g.getExtension("EXT_color_buffer_float"),g.__ext_std_derivatives=g.getExtension("OES_standard_derivatives"),g.__ext_Inst=g.getExtension("ANGLE_instanced_arrays"),g.__ext_Inst&&(g.vertexAttribDivisor=g.__ext_Inst.vertexAttribDivisorANGLE.bind(g.__ext_Inst),g.drawArraysInstanced=g.__ext_Inst.drawArraysInstancedANGLE.bind(g.__ext_Inst),g.drawElementsInstanced=g.__ext_Inst.drawElementsInstancedANGLE.bind(g.__ext_Inst)),g.__ext_VAO=g.getExtension("OES_vertex_array_object"),g.__ext_VAO&&(g.createVertexArray=g.__ext_VAO.createVertexArrayOES.bind(g.__ext_VAO),g.deleteVertexArray=g.__ext_VAO.deleteVertexArrayOES.bind(g.__ext_VAO),g.bindVertexArray=g.__ext_VAO.bindVertexArrayOES.bind(g.__ext_VAO)),g.__ext_element_index_uint=g.getExtension("OES_element_index_uint"),g.__ext_WEBGL_depth_texture=g.getExtension("WEBGL_depth_texture"),g.__ext_WEBGL_depth_texture&&(g.UNSIGNED_INT_24_8=g.__ext_WEBGL_depth_texture.UNSIGNED_INT_24_8_WEBGL),g.DRAW_FRAMEBUFFER=g.FRAMEBUFFER),g.__ext_frag_depth=g.getExtension("EXT_frag_depth"),g.setupInstancedQuad=function(){const t=new Float32Array([0,1,2,3]),I=new Uint16Array([0,1,2,2,1,3]);this.__quadVertexIdsBuffer=this.createBuffer(),this.bindBuffer(this.ARRAY_BUFFER,this.__quadVertexIdsBuffer),this.bufferData(this.ARRAY_BUFFER,t,this.STATIC_DRAW),this.__quadIndexBuffer=this.createBuffer(),this.bindBuffer(this.ELEMENT_ARRAY_BUFFER,this.__quadIndexBuffer),this.bufferData(this.ELEMENT_ARRAY_BUFFER,I,this.STATIC_DRAW),this.__quadattrbuffers={vertexIDs:{buffer:this.__quadVertexIdsBuffer,dataType:"Float32",dimension:1,count:t.length,shared:!0}}},g.drawQuad=function(){this.drawElements(this.TRIANGLES,6,this.UNSIGNED_SHORT,0)},g},pa=function(i,e){if(!e.width||!e.height){if(!e.width)throw new Error("Invalid texture params. 'width' not provided");if(!e.height)throw new Error("Invalid texture params. 'height' not provided")}const g=i.getParameter(i.MAX_TEXTURE_SIZE);if(e.width<=0||e.width>g||e.height<=0||e.height>g)throw new Error("GLTextureParams: Invalid texture size. width:"+e.width+" height:"+e.height+" maxSize:"+g);const t={width:e.width,height:e.height},I=C=>isNaN(C)?i[C]:C,l=(C,n)=>{C in e?t[C]=I(e[C]):n&&(t[C]=I(n))};if(l("format"),l("internalFormat",t.format),l("type",i.UNSIGNED_BYTE),l("minFilter",e.filter?e.filter:i.LINEAR),l("magFilter",e.filter?e.filter:i.LINEAR),l("wrapS",e.wrapS?e.wrapS:i.CLAMP_TO_EDGE),l("wrapT",e.wrapT?e.wrapT:i.CLAMP_TO_EDGE),l("flipY",!1),l("mipMapped",!1),l("depthInternalFormat"),l("depthFormat"),l("depthType"),e.createDepthTexture&&(i.name!="webgl2"&&!i.__ext_WEBGL_depth_texture?t.depthType=i.UNSIGNED_SHORT:(i.name=="webgl2",t.depthFormat=i.DEPTH_COMPONENT,t.depthType=i.UNSIGNED_INT)),t.format==i.FLOAT)if(i.name=="webgl2")t.filter==i.LINEAR&&!i.__ext_float_linear&&(console.warn("Floating point texture filtering not supported on result device"),t.filter=i.NEAREST);else if(i.__ext_float)t.filter==i.LINEAR&&!i.__ext_float_linear&&(console.warn("Floating point texture filtering not supported on result device"),t.filter=i.NEAREST);else if(i.__ext_half_float)t.format=i.HALF_FLOAT,t.filter==i.LINEAR&&!i.__ext_texture_half_float_linear&&(console.warn("Half Float texture filtering not supported on result device"),t.filter=i.NEAREST);else throw new Error("OES_texture_half_float is not available");else if(t.format==i.HALF_FLOAT){if(i.name!="webgl2"){if(i.__ext_half_float)t.filter==i.LINEAR&&!i.__ext_texture_half_float_linear&&(console.warn("Half Float texture filtering not supported on result device"),t.filter=i.NEAREST);else throw new Error("OES_texture_half_float is not available");if(t.channels==i.RGB)throw new Error("OES_texture_half_float onlysupports RGBA textures")}}else if(t.format=="sRGB"&&!i.__ext_sRGB)throw new Error("EXT_sRGB is not available");return t.format!=null&&i.name=="webgl2"&&t.internalFormat==t.format&&(t.type==i.FLOAT?t.format==i.RED?t.internalFormat=i.R32F:t.format==i.RG?t.internalFormat=i.RG32F:t.format==i.RGB?t.internalFormat=i.RGB32F:t.format==i.RGBA&&(t.internalFormat=i.RGBA32F):t.type==i.HALF_FLOAT?t.format==i.RED?t.internalFormat=i.R16F:t.format==i.RGB?t.internalFormat=i.RGB16F:t.format==i.RGBA&&(t.internalFormat=i.RGBA16F):t.type==i.UNSIGNED_BYTE&&(t.format==i.RED&&(t.internalFormat=i.R8),t.format==i.RGB?t.internalFormat=i.RGB8:t.format==i.RGBA&&(t.internalFormat=i.RGBA8))),t.depthFormat!=null&&(i.name=="webgl2"?t.depthType==i.UNSIGNED_SHORT?t.depthInternalFormat=i.DEPTH_COMPONENT16:t.depthType==i.UNSIGNED_INT&&(t.depthInternalFormat=i.DEPTH_COMPONENT24):t.depthInternalFormat=t.depthFormat),t};class Te extends Va{constructor(e,g){super();if(this.__image=null,this.__internalFormat=0,this.__type=0,this.__format=0,this.__wrapParam=0,this.params={},this.__minFilter=0,this.__magFilter=0,this.__wrapS=0,this.__wrapT=0,this.__flipY=!1,this.__mipMapped=!1,this.invert=!1,this.alphaFromLuminance=!1,this.__gltex=null,this.__typeParam="",this.__formatParam="",this.__gl=e,this.ready=!1,this.width=0,this.height=0,this.textureType=1,this.textureDesc=[0,0,0,0],this.__loaded=!1,this.__bound=!1,g!=null)if(g instanceof ug){this.__image=g;const t=()=>{const I=this.__image.getParams(),l=I.width,C=I.height,n=I.data;this.bufferData(n,l,C)};this.__image.on("updated",t),this.__image.isLoaded()?this.configure(this.__image.getParams()):this.__image.on("loaded",()=>{this.configure(this.__image.getParams())})}else this.configure(g)}isLoaded(){return this.__loaded}getImage(){return this.__image}getInternalFormat(){return this.__internalFormat}getType(){return this.__type}getFormat(){return this.__format}getWrap(){return this.__wrapParam}getMipMapped(){return this.__mipMapped}configure(e){const g=this.__gl,t=pa(g,e);this.params=t,this.__format=t.format,this.__internalFormat=t.internalFormat,this.__type=t.type,this.__minFilter=t.minFilter,this.__magFilter=t.magFilter,this.__wrapS=t.wrapS,this.__wrapT=t.wrapT,this.__flipY="flipY"in e?e.flipY:!1,this.__mipMapped="mipMapped"in e?e.mipMapped:!1,this.invert="invert"in e?e.invert:!1,this.alphaFromLuminance="alphaFromLuminance"in e?e.alphaFromLuminance:!1,this.textureType=1,this.textureDesc[0]=this.width,this.textureDesc[1]=this.height,this.textureType==1&&this.__format==g.RGBA&&(this.textureType=2),this.__gltex&&g.deleteTexture(this.__gltex),this.__gltex=g.createTexture(),this.__updateGLTexParams();const I=t.width,l=t.height,C=e.data;C?this.bufferData(C,I,l,!1,!1):this.resize(I,l,!1,!1),this.__loaded||(this.emit("ready"),this.__loaded=!0)}__updateGLTexParams(){const e=this.__gl;e.bindTexture(e.TEXTURE_2D,this.__gltex),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,this.__minFilter),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,this.__magFilter),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,this.__wrapS),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,this.__wrapT)}bufferData(e,g=-1,t=-1,I=!0,l=!0){const C=this.__gl;if(e!=null){if(e instanceof WebGLTexture)this.__gltex=e;else if(e instanceof HTMLImageElement||e instanceof ImageData||e instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof HTMLVideoElement)I&&C.bindTexture(C.TEXTURE_2D,this.__gltex),C.texImage2D(C.TEXTURE_2D,0,this.__internalFormat,this.__format,this.__type,e),this.width=e.width,this.height=e.height;else{g==-1&&(g=this.width),t==-1&&(t=this.height);const n=g*t;let F;switch(this.__format){case C.RED:case C.RED_INTEGER:case C.ALPHA:case C.LUMINANCE:case C.LUMINANCE_ALPHA:F=1;break;case C.RG:F=2,C.pixelStorei(C.UNPACK_ALIGNMENT,2);break;case C.RGB:F=3;break;case C.RGBA:F=4;break;default:console.warn("Reaching default case: numChannels:=1"),F=1;break}e.length!=n*F&&console.warn("Invalid data for Image width:"+g+" height:"+t+" format:"+this.__formatParam+" type:"+this.__typeParam+" Data Length:"+e.length+" Expected:"+n*F);let a=e;this.__type==C.HALF_FLOAT&&e instanceof Float32Array&&(a=q.convertFloat32ArrayToUInt16Array(e)),I&&C.bindTexture(C.TEXTURE_2D,this.__gltex),C.name=="webgl2"?C.texImage2D(C.TEXTURE_2D,0,this.__internalFormat,g,t,0,this.__format,this.__type,a,0):C.texImage2D(C.TEXTURE_2D,0,this.__internalFormat,g,t,0,this.__format,this.__type,a),this.width=g,this.height=t}this.__mipMapped&&C.generateMipmap(C.TEXTURE_2D)}else I&&C.bindTexture(C.TEXTURE_2D,this.__gltex),C.texImage2D(C.TEXTURE_2D,0,this.__internalFormat,this.width,this.height,0,this.__format,this.__type,null),this.width=g,this.height=t;l&&this.emit("updated")}clear(){const e=this.__gl,g=this.width*this.height;let t;switch(this.__format){case e.RED:case e.RED_INTEGER:case e.ALPHA:case e.LUMINANCE:case e.LUMINANCE_ALPHA:t=1;break;case e.RG:t=2;break;case e.RGB:t=3;break;case e.RGBA:t=4;break;default:throw new Error("Invalid Format")}let I;switch(this.__type){case e.UNSIGNED_BYTE:I=new Uint8Array(g*t);break;case e.HALF_FLOAT:I=new Uint16Array(g*t);break;case e.FLOAT:I=new Float32Array(g*t);break;default:throw new Error("Invalid Type")}e.name=="webgl2"?e.texImage2D(e.TEXTURE_2D,0,this.__internalFormat,this.width,this.height,0,this.__format,this.__type,I,0):e.texImage2D(e.TEXTURE_2D,0,this.__internalFormat,this.width,this.height,0,this.__format,this.__type,I)}resize(e,g,t=!1,I=!0){const l=this.__gl;if(this.width!=e||this.height!=g){const n=l.getParameter(l.MAX_TEXTURE_SIZE);if(e<0||e>n||g<0||g>n)throw new Error("gl-texture2d: Invalid texture size. width:"+e+" height:"+g+" maxSize:"+n);if(t){const F=l.createTexture();l.bindTexture(l.TEXTURE_2D,F),l.texImage2D(l.TEXTURE_2D,0,this.__internalFormat,e,g,0,this.__format,this.__type,null);const a=l.createFramebuffer();l.bindFramebuffer(l.FRAMEBUFFER,a),l.framebufferTexture2D(l.FRAMEBUFFER,l.COLOR_ATTACHMENT0,l.TEXTURE_2D,this.__gltex,0),l.bindTexture(l.TEXTURE_2D,F),l.copyTexImage2D(l.TEXTURE_2D,0,this.__internalFormat,0,0,this.width,this.height,0),l.bindFramebuffer(l.FRAMEBUFFER,null),l.deleteFramebuffer(a),this.__gl.deleteTexture(this.__gltex),this.__gltex=F,this.__updateGLTexParams()}else this.width>0&&this.height>0,l.bindTexture(l.TEXTURE_2D,this.__gltex),l.texImage2D(l.TEXTURE_2D,0,this.__internalFormat,e,g,0,this.__format,this.__type,null);if(this.width=e,this.height=g,I){const F=new Hg(e,g);this.emit("resized",F)}}}populate(e,g,t,I=0,l=0,C=!0){const n=this.__gl;C&&n.bindTexture(n.TEXTURE_2D,this.__gltex),n.texSubImage2D(n.TEXTURE_2D,0,I,l,g,t,this.__format,this.__type,e)}getSize(){return[this.width,this.height]}get glTex(){return this.__gltex}getTexHdl(){return this.__gltex}preBind(e,g){return{textureTypeUnif:g[e.name+"Type"],textureDescUnif:g[e.name+"Desc"]}}bindToUniform(e,g,t){if(!this.__loaded)return!1;if(!this.__gltex)throw new Error("Unable to bind non-initialized or deleted texture.");const I=e.boundTextures++,l=this.__gl;return l.activeTexture(l.TEXTURE0+I),l.bindTexture(l.TEXTURE_2D,this.__gltex),l.uniform1i(g.location,I),t&&(t.textureTypeUnif&&l.uniform1i(t.textureTypeUnif.location,this.textureType),t.textureDescUnif&&l.uniform4fv(t.textureDescUnif.location,this.textureDesc)),!0}destroy(){super.destroy(),this.__gl.deleteTexture(this.__gltex),this.__gltex=null}static getCachedGLTexture2D(e){return on[e.getId()]}static setCachedGLTexture2D(e,g){on[e.getId()]=g}}const on={},ud={bool:"Boolean",int:"SInt32",uint:"UInt32",float:"Float32",ivec2:"Vec2",ivec3:"Vec3",ivec4:"Vec4",vec2:"Vec2",vec3:"Vec3",vec4:"Vec4",color:"Color",mat3:"Mat3",mat4:"Mat4",sampler2D:"BaseImage",samplerCube:"BaseImage"},hg=8;let lI=ud;const Sd=/\s+/;class Nd{constructor(){this.__shaderModules={},this.materialTemplates={}}setShaderModule(e,g){if(!(e in this.__shaderModules)){this.__shaderModules[e]=g;return}}getShaderModule(e){return this.__shaderModules[e]}getShaderModuleNames(){const e=[];for(const g in this.__shaderModules)e.push(g);return e}parseAttr(e,g,t,I){if(!(e[1]in lI))throw new Error(`Error while parsing 
Type not recognized:`+e[1]);const l=e[2].slice(0,e[2].length-1);t.attributes[l]={type:lI[e[1]],instanced:g},e[1]=="color"&&(e[1]="vec4",e.join(" "))}handleImport(e,g,t,I,l){if(t in this.__shaderModules){const C=this.__shaderModules[t];if(!C)throw Error("snippet not loaded or does not exists!");const n=this.parseShaderHelper(g,C,I,l);I.push(t),e.glsl=e.glsl+n.glsl,e.numLines+=n.numLines,e.uniforms=Object.assign(Object.assign({},e.uniforms),n.uniforms),e.attributes=Object.assign(Object.assign({},e.attributes),n.attributes)}else console.log("shaderName: "+g),console.log("SNIPPET NOT FOUND: "+t)}parseShader(e,g){return this.parseShaderHelper(e,g,[],0)}parseShaderHelper(e,g,t,I){const l=(F,a)=>{F.glsl=F.glsl+a+`
`,F.numLines++};t.push(e);const C={glsl:"",numLines:0,uniforms:{},attributes:{}};g=g.toString();const n=g.split(`
`);for(let F=0;F<n.length;F++){let a=n[F];const U=a.trim(),d=U.split(Sd);switch(d[0]){case"<%include":case"import":{const o=U.split(/'|"|`/)[1].split("/").pop();t.includes(o)||this.handleImport(C,e,o,t,I);break}case"attribute":{this.parseAttr(d,!1,C,a),l(C,a);break}case"instancedattribute":{this.parseAttr(d,!0,C,a),d[0]="attribute",a=d.join(" "),l(C,a);break}case"uniform":{let o=1;d.length==4&&(o=2);const A=d[o];if(!(A in lI))throw new Error("Error while parsing :"+e+` 
Type not recognized:`+d[1]);const B=d[o+1].slice(0,d[o+1].length-1);B.includes("[")?C.uniforms[B.substring(0,B.indexOf("["))]=lI[A]:C.uniforms[B]=lI[A],C.uniforms[B]=="struct"&&console.log(d),d[1]=="color"&&(d[1]="vec4",a=d.join(" ")),l(C,a);break}default:{l(C,a);break}}}return C}}const ue=new Nd;let pd=0;class Pe extends jg{constructor(e,g){super(g);e&&(this.__gl=e),this.__shaderStagesGLSL={},this.__shaderStages={},this.__shaderProgramHdls={},this.__gltextures={},this.__id=pd++}setGLContext(e){this.__gl=e}setShaderStage(e,g){this.__shaderStagesGLSL[e]=g,this.clearProgramsCache()}getShaderStage(e){return this.__shaderStagesGLSL[e]}clearProgramsCache(){const e=this.__gl;for(const g in this.__shaderProgramHdls){const t=this.__shaderProgramHdls[g];for(const I in t.shaderHdls)e.deleteShader(t.shaderHdls[I]);e.deleteProgram(t.shaderProgramHdl)}}static isOpaque(){return!0}static isOverlay(){return!1}__compileShaderStage(e,g,t,I){const l=this.__gl;if(I||(I=l.shaderopts),I){if(I.repl)for(const F in I.repl)e=tg.replaceAll(e,F,I.repl[F]);I.directives&&(e=I.directives.join(`
`)+`
`+e)}let C;l.name=="webgl2"&&(e=tg.replaceAll(e,"attribute","in"),t=="vertexShader"?e=tg.replaceAll(e,"varying","out"):e=tg.replaceAll(e,"varying","in"),e=tg.replaceAll(e,"texture2D","texture"),C=`#version 300 es
`,e=C+e);const n=l.createShader(g);if(!n)throw Error("shaderHdl not defined");if(l.shaderSource(n,e),l.compileShader(n),!l.getShaderParameter(n,l.COMPILE_STATUS)){console.log("Errors in :"+this.constructor.name);const F=l.getShaderInfoLog(n).split(`
`),a={};for(let s=0;s<F.length;s++){if(F[s].startsWith("'")){F[s-1]=F[s-1]+F[s],delete F[s],s--;continue}const o=F[s].split(":");if(o.length>=2){const A=parseInt(o[2]);isNaN(A)||(a[A]?a[A].push(F[s]):a[A]=[F[s]])}}const U=[],d=e.split(`
`);for(const s in a){const o=Number.parseInt(s)-1;for(let B=Math.max(0,o-4);B<o;B++)U.push((o+1+" ").padStart(3)+d[B]);U.push((o+1+">").padStart(3)+d[o]);for(let B=o+1;B<Math.min(d.length-1,o+5);B++)U.push((o+1+" ").padStart(3)+d[B]);const A=a[s];for(const B of A)U.push(B)}throw new Error(`An error occurred compiling the shader 
=================
`+this.constructor.name+"."+t+`: 

`+U.join(`
`))}return n}__createProgram(e){const g=this.__gl;this.__shaderCompilationAttempted=!0;const t=g.createProgram();if(!t)throw Error("shaderProgramHdl not defined");const I={};this.__shaderStages.VERTEX_SHADER||(this.__shaderStages.VERTEX_SHADER=ue.parseShader("VERTEX_SHADER",this.__shaderStagesGLSL.VERTEX_SHADER));const l=this.__shaderStages.VERTEX_SHADER.glsl;if(l!=null){const F=this.__compileShaderStage(l,g.VERTEX_SHADER,"vertexShader",e);if(!F)return!1;g.attachShader(t,F),I[g.VERTEX_SHADER]=F}this.__shaderStages.FRAGMENT_SHADER||(this.__shaderStages.FRAGMENT_SHADER=ue.parseShader("FRAGMENT_SHADER",this.__shaderStagesGLSL.FRAGMENT_SHADER));const C=this.__shaderStages.FRAGMENT_SHADER.glsl;if(C!=null){const F=Object.assign({},g.shaderopts,e);F.frag&&(F.defines=F.frag.defines+F.defines);const a=this.__compileShaderStage(C,g.FRAGMENT_SHADER,"fragmentShader",F);if(!a)return!1;g.attachShader(t,a),I[g.FRAGMENT_SHADER]=a}if(g.linkProgram(t),!g.getProgramParameter(t,g.LINK_STATUS)){const F=g.getProgramInfoLog(t);if(!F)throw Error("info not defined");if(F.includes("D3D shader compilation failed")){const a=g.getExtension("WEBGL_debug_shaders");if(a){const U=a.getTranslatedShaderSource(I[g.VERTEX_SHADER]);console.log(U)}}throw console.log("vertexShaderGLSL:"+l),console.log("fragmentShaderGLSL:"+C),new Error("Unable to link the shader program:"+this.constructor.name+`
==================
`+F)}const n=this.__extractAttributeAndUniformLocations(t,e);return n.shaderHdls=I,n.shaderProgramHdl=t,n}__extractAttributeAndUniformLocations(e,g){const t=this.__gl,I=this.getAttributes(),l={attrs:{},unifs:{}};for(const n in I){const F=t.getAttribLocation(e,n);if(F==null){console.warn("Shader attribute not found:"+n);continue}const a=I[n];l.attrs[n]={name:n,location:F,type:a.type,instanced:a.instanced}}const C=this.getUniforms();for(let n in C){const F=C[n];if(g&&g.repl)for(const U in g.repl)n=n.replace(U,g.repl[U]);const a=t.getUniformLocation(e,n);a!=null&&(l.unifs[n]={name:n,location:a,type:F})}return l}getAttributes(){const e={};for(const g in this.__shaderStages){const t=this.__shaderStages[g];for(const I in t.attributes)e[I]=t.attributes[I]}return e}getUniforms(){const e={};for(const g in this.__shaderStages){const t=this.__shaderStages[g];for(const I in t.uniforms)e[I]=t.uniforms[I]}return e}isCompiledForTarget(e){const g=e||this.getId();return this.__shaderProgramHdls[g]!=null}compileForTarget(e,g){const t=e||this.getId();let I=this.__shaderProgramHdls[t];return I||(I=this.__createProgram(g||{}),I.shaderkey=t,this.__shaderProgramHdls[t]=I,I)}compile(){this.compileForTarget()}bind(e,g){const t=this.__gl;if(e.glShader!=this){const I=this.compileForTarget(g,e.shaderopts);if(!I)return console.warn(this.constructor.name+" is not compiled for "+g),!1;const l=I.shaderProgramHdl;t.useProgram(l),e.glShader=this,e.shaderkey=I.shaderkey,e.unifs=I.unifs,e.attrs=I.attrs,e.boundTextures=0,e.glGeom=void 0,e.bindRendererUnifs&&e.bindRendererUnifs(I.unifs)}return e.supportsInstancing=!0,!0}unbind(e){return e.glShader=null,e.shaderkey="",e.unifs={},e.attrs={},!0}getGeomDataShaderName(){return""}getSelectedShaderName(){return""}static supportsInstancing(){return!0}static getPackedMaterialData(e){return new Float32Array(4)}static getMaterialTemplate(){throw new Error("Shader does not provide a material template.")}destroy(){const e=this.__gl;for(const g in this.__shaderProgramHdls){const t=this.__shaderProgramHdls[g];e.deleteProgram(t.shaderProgramHdl)}this.__shaderProgramHdls={}}}class Bi{constructor(e,g,t=!1){this.colorTextureResizeEventId=-1,this.__depthTexture=null,this.__fbo=null,this.__prevBoundFbo=null,_e.isIOSDevice&&e.name=="webgl"&&(g.getType()==e.FLOAT||g.getType()==e.HALF_FLOAT)&&console.error("IOS devices are unable to render to float textures."),this.__gl=e,this.__colorTexture=g,this.__createDepthTexture=t,this.__clearColor=new E(0,0,0,0),this.__colorTexture&&(this.colorTextureResizeEventId=this.__colorTexture.on("resized",I=>{this.resize(this.__colorTexture.width,this.__colorTexture.height,!1)})),this.setup()}textureResized(e){this.resize(this.__colorTexture.width,this.__colorTexture.height,!1)}setClearColor(e){this.__clearColor=e}getWidth(){return this.__colorTexture.width}getHeight(){return this.__colorTexture.height}getSize(){return[this.__colorTexture.width,this.__colorTexture.height]}getColorTexture(){return this.__colorTexture}getDepthTextureGL(){return this.__depthTexture}get width(){return this.__colorTexture.width}get height(){return this.__colorTexture.height}get size(){return[this.__colorTexture.width,this.__colorTexture.height]}get colorTexture(){return this.__colorTexture}setColorTexture(e){const g=this.__gl;this.__colorTexture=e,g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,this.__colorTexture.glTex,0)}get depthTextureGL(){return this.__depthTexture}setup(){const e=this.__gl;if(this.__fbo=e.createFramebuffer(),e.name=="webgl2"?e.bindFramebuffer(e.DRAW_FRAMEBUFFER,this.__fbo):e.bindFramebuffer(e.FRAMEBUFFER,this.__fbo),this.__colorTexture&&(e.name=="webgl2"?e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.__colorTexture.glTex,0):e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.__colorTexture.glTex,0)),this.__createDepthTexture)if(e.name!="webgl2"&&!e.__ext_WEBGL_depth_texture){const g=e.createRenderbuffer();e.bindRenderbuffer(e.RENDERBUFFER,g),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,this.width,this.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,g)}else e.activeTexture(e.TEXTURE0),this.__depthTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.__depthTexture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.name=="webgl2"?(e.texImage2D(e.TEXTURE_2D,0,e.DEPTH_COMPONENT24,this.width,this.height,0,e.DEPTH_COMPONENT,e.UNSIGNED_INT,null),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,this.__depthTexture,0)):(e.texImage2D(e.TEXTURE_2D,0,e.DEPTH_COMPONENT,this.width,this.height,0,e.DEPTH_COMPONENT,e.UNSIGNED_INT,null),e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,this.__depthTexture,0));hl(e,this.width,this.height),e.name=="webgl2"?e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null):e.bindFramebuffer(e.FRAMEBUFFER,null)}resize(e,g,t){const I=this.__gl;t&&this.__colorTexture.resize(e,g,!1,!1),I.name=="webgl2"?I.bindFramebuffer(I.DRAW_FRAMEBUFFER,this.__fbo):I.bindFramebuffer(I.FRAMEBUFFER,this.__fbo),I.framebufferTexture2D(I.FRAMEBUFFER,I.COLOR_ATTACHMENT0,I.TEXTURE_2D,this.__colorTexture.glTex,0),this.__depthTexture&&(I.activeTexture(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,this.__depthTexture),I.name=="webgl2"?I.texImage2D(I.TEXTURE_2D,0,I.DEPTH_COMPONENT24,this.width,this.height,0,I.DEPTH_COMPONENT,I.UNSIGNED_INT,null):I.texImage2D(I.TEXTURE_2D,0,I.DEPTH_COMPONENT,this.width,this.height,0,I.DEPTH_COMPONENT,I.UNSIGNED_INT,null)),hl(I,this.width,this.height)}bindForWriting(e){e&&(this.__prevBoundFbo=e.boundRendertarget,e.boundRendertarget=this.__fbo);const g=this.__gl;g.name=="webgl2"?g.bindFramebuffer(g.DRAW_FRAMEBUFFER,this.__fbo):g.bindFramebuffer(g.FRAMEBUFFER,this.__fbo),g.viewport(0,0,this.width,this.height)}unbindForWriting(e){e&&(e.boundRendertarget=this.__prevBoundFbo);const g=this.__gl;g.name=="webgl2"?g.bindFramebuffer(g.DRAW_FRAMEBUFFER,this.__prevBoundFbo):g.bindFramebuffer(g.FRAMEBUFFER,this.__prevBoundFbo)}bind(e){this.bindForWriting(e)}unbind(e){if(e)this.unbindForWriting(e);else{const g=this.__gl;g.bindFramebuffer(g.FRAMEBUFFER,null)}}bindForReading(e){const g=this.__gl;g.name=="webgl2"?g.bindFramebuffer(g.READ_FRAMEBUFFER,this.__fbo):g.bindFramebuffer(g.FRAMEBUFFER,this.__fbo)}unbindForReading(){const e=this.__gl;e.name=="webgl2"?e.bindFramebuffer(e.READ_FRAMEBUFFER,null):e.bindFramebuffer(e.FRAMEBUFFER,null)}clear(){const e=this.__gl;e.colorMask(!0,!0,!0,!0);const g=this.__clearColor.asArray();e.clearColor(g[0],g[1],g[2],g[3]),this.__createDepthTexture?e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT):e.clear(e.COLOR_BUFFER_BIT)}bindAndClear(e){this.bind(e),this.clear()}destroy(){const e=this.__gl;e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteFramebuffer(this.__fbo),this.__fbo=null,this.__colorTexture.removeListenerById("resized",this.colorTextureResizeEventId)}}function hl(i,e,g){let t;if(i.name=="webgl2"?t=i.checkFramebufferStatus(i.DRAW_FRAMEBUFFER):t=i.checkFramebufferStatus(i.FRAMEBUFFER),t!==i.FRAMEBUFFER_COMPLETE)switch(i.bindTexture(i.TEXTURE_2D,null),i.name=="webgl2"?i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null):i.bindFramebuffer(i.FRAMEBUFFER,null),console.warn("Error creating Fbo width:",e,", height:",g),t){case i.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:throw new Error("The attachment types are mismatched or not all framebuffer attachment points are framebuffer attachment complete.");case i.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:throw new Error("There is no attachment.");case i.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:throw new Error("Height and width of the attachment are not the same.");case i.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:throw new Error("The format of the attachment is not supported or if depth and stencil attachments are not the same renderbuffer.");case 36061:throw new Error("The framebuffer is unsupported");default:throw new Error("Incomplete Frambuffer")}}class ZI extends Xe{constructor(e,g){super();this.params={},this.flipY=!1,this.width=0,this.height=0,this.__gl=e,this.textureTargets=[],this.depthTexture=null,this.textureDesc=[0,0,0,0],this.clearColor=new E(0,0,0,0),this.colorMask=[!0,!0,!0,!0],g&&this.configure(g)}configure(e){const g=this.__gl,t=pa(g,e);this.textureTargets.forEach(l=>{g.deleteTexture(l)}),this.textureTargets=[],this.depthTexture&&(g.deleteTexture(this.depthTexture),this.depthTexture=null),this.frameBuffer&&g.deleteFramebuffer(this.frameBuffer),this.params=t,this.type=t.type,this.format=t.format,this.internalFormat=t.internalFormat,this.minFilter=t.minFilter?t.minFilter:t.filter,this.minFilter=t.magFilter?t.magFilter:t.filter,this.wrap=t.wrap,this.flipY=t.flipY,this.width=t.width,this.height=t.height,this.textureType=1,this.textureDesc[0]=this.width,this.textureDesc[1]=this.height;const I=e.numColorChannels!=null?e.numColorChannels:t.format!=null?1:0;for(let l=0;l<I;l++){g.activeTexture(g.TEXTURE0+1);const C=g.createTexture();g.bindTexture(g.TEXTURE_2D,C),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,t.wrapS),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,t.wrapT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,t.minFilter),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,t.magFilter),g.texImage2D(g.TEXTURE_2D,0,this.internalFormat,t.width,t.height,0,this.format,this.type,null),this.textureTargets.push(C)}if(t.depthFormat){if(g.name=="webgl"&&!g.__ext_WEBGL_depth_texture)throw new Error("Depth textures not support on this device");g.activeTexture(g.TEXTURE0),this.depthTexture=g.createTexture(),g.bindTexture(g.TEXTURE_2D,this.depthTexture),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,t.wrapS),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,t.wrapT),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,t.minFilter),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,t.magFilter),g.texImage2D(g.TEXTURE_2D,0,t.depthInternalFormat,t.width,t.height,0,t.depthFormat,t.depthType,null)}if(this.frameBuffer=g.createFramebuffer(),this.bindForWriting(),this.textureTargets.length>0){this.textureTargets.length>1&&g.name=="webgl"&&g.drawBuffers;const l=[];for(let C=0;C<this.textureTargets.length;C++)g.framebufferTexture2D(g.DRAW_FRAMEBUFFER,g.COLOR_ATTACHMENT0+C,g.TEXTURE_2D,this.textureTargets[C],0),l.push(g.COLOR_ATTACHMENT0+C);this.textureTargets.length>1&&g.drawBuffers(l)}this.depthTexture&&g.framebufferTexture2D(g.DRAW_FRAMEBUFFER,g.DEPTH_ATTACHMENT,g.TEXTURE_2D,this.depthTexture,0),this.checkFramebuffer()}checkFramebuffer(){this.bindForWriting();const e=this.__gl,g=e.checkFramebufferStatus(e.DRAW_FRAMEBUFFER);if(g!=e.FRAMEBUFFER_COMPLETE)switch(g){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:throw new Error("The attachment types are mismatched or not all framebuffer attachment points are framebuffer attachment complete.");case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:throw new Error("There is no attachment.");case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:throw new Error("Height and width of the attachment are not the same.");case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:throw new Error("The format of the attachment is not supported or if depth and stencil attachments are not the same renderbuffer.");case 36061:throw new Error("The framebuffer is unsupported");default:throw new Error("Incomplete Frambuffer")}this.unbindForWriting()}bindForWriting(e,g=!1){e&&(this.__prevBoundFbo=e.boundRendertarget,e.boundRendertarget=this.frameBuffer);const t=this.__gl;t.name=="webgl2"?t.bindFramebuffer(t.DRAW_FRAMEBUFFER,this.frameBuffer):t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.viewport(0,0,this.width,this.height),g&&this.clear()}unbindForWriting(e){e&&(e.boundRendertarget=this.__prevBoundFbo);const g=this.__gl;g.bindFramebuffer(g.name=="webgl2"?g.DRAW_FRAMEBUFFER:g.FRAMEBUFFER,this.__prevBoundFbo),this.__prevBoundFbo=null}clear(e=!0){const g=this.__gl,t=this.colorMask;g.colorMask(t[0],t[1],t[2],t[3]);const I=this.clearColor.asArray();g.clearColor(I[0],I[1],I[2],I[3]);let l=0;this.textureTargets.length>0&&(l|=g.COLOR_BUFFER_BIT),this.depthTexture&&(l|=g.DEPTH_BUFFER_BIT),g.clear(l)}bindForReading(){const e=this.__gl;e.name=="webgl2"?e.bindFramebuffer(e.READ_FRAMEBUFFER,this.frameBuffer):e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer)}unbindForReading(){const e=this.__gl;e.name=="webgl2"?e.bindFramebuffer(e.READ_FRAMEBUFFER,null):e.bindFramebuffer(e.FRAMEBUFFER,null)}bindColorTexture(e,g,t=0){const I=this.__gl,l=e.boundTextures++;return I.uniform1i(g.location,l),I.activeTexture(I.TEXTURE0+l),I.bindTexture(I.TEXTURE_2D,this.textureTargets[t]),!0}bindDepthTexture(e,g){const t=this.__gl,I=e.boundTextures++;return t.uniform1i(g.location,I),t.activeTexture(t.TEXTURE0+I),t.bindTexture(t.TEXTURE_2D,this.depthTexture),!0}unbind(e){this.unbindForWriting(e)}resize(e,g,t=!1){const I=this.__gl;if(this.width!=e||this.height!=g){const C=I.getParameter(I.MAX_TEXTURE_SIZE);if(e<0||e>C||g<0||g>C)throw new Error(`GLRenderTarget: Invalid texture size. width: ${e} height: ${g} maxSize: ${C}`);t&&this.bindForReading();const n=this.params;for(let F=0;F<this.textureTargets.length;F++){const a=I.createTexture();I.bindTexture(I.TEXTURE_2D,a),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,n.wrapS),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,n.wrapT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,n.minFilter),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,n.magFilter),I.texImage2D(I.TEXTURE_2D,0,this.internalFormat,e,g,0,this.format,this.type,null),t&&I.copyTexImage2D(I.TEXTURE_2D,0,this.internalFormat,0,0,Math.min(e,this.width),Math.min(g,this.height),0),I.deleteTexture(this.textureTargets[F]),this.textureTargets[F]=a}if(n.depthFormat){if(I.name=="webgl"&&!I.__ext_WEBGL_depth_texture)throw new Error("Depth textures not support on this device");I.activeTexture(I.TEXTURE0);const F=I.createTexture();I.bindTexture(I.TEXTURE_2D,F),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_S,n.wrapS),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_WRAP_T,n.wrapT),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MIN_FILTER,n.minFilter),I.texParameteri(I.TEXTURE_2D,I.TEXTURE_MAG_FILTER,n.magFilter),I.texImage2D(I.TEXTURE_2D,0,n.depthInternalFormat,e,g,0,n.depthFormat,n.depthType,null),t&&I.copyTexImage2D(I.TEXTURE_2D,0,this.internalFormat,0,0,Math.min(e,this.width),Math.min(g,this.height),0),I.deleteTexture(this.depthTexture),this.depthTexture=F}if(t&&this.unbindForReading(),this.width=e,this.height=g,this.frameBuffer&&I.deleteFramebuffer(this.frameBuffer),this.frameBuffer=I.createFramebuffer(),this.bindForWriting(),this.textureTargets.length>0){this.textureTargets.length>1&&I.name=="webgl"&&I.drawBuffers;const F=[];for(let a=0;a<this.textureTargets.length;a++)I.framebufferTexture2D(I.DRAW_FRAMEBUFFER,I.COLOR_ATTACHMENT0+a,I.TEXTURE_2D,this.textureTargets[a],0),F.push(I.COLOR_ATTACHMENT0+a);this.textureTargets.length>1&&I.drawBuffers(F)}this.depthTexture&&I.framebufferTexture2D(I.DRAW_FRAMEBUFFER,I.DEPTH_ATTACHMENT,I.TEXTURE_2D,this.depthTexture,0),this.checkFramebuffer()}}bindToUniform(e,g,t){const I=e.boundTextures++,l=this.__gl.TEXTURE0+I,C=this.__gl;return C.activeTexture(l),C.bindTexture(C.TEXTURE_2D,this.textureTargets[0]),C.uniform1i(g.location,I),t&&(t.textureTypeUnif&&C.uniform1i(t.textureTypeUnif.location,this.textureType),t.textureDescUnif&&this.__gl.uniform4fv(t.textureDescUnif.location,this.textureDesc)),!0}destroy(){const e=this.__gl;this.textureTargets.forEach(g=>{e.deleteTexture(g)}),this.textureTargets=[],this.depthTexture&&(e.deleteTexture(this.depthTexture),this.depthTexture=null),this.frameBuffer&&e.deleteFramebuffer(this.frameBuffer)}}var yd=`#define GLSLIFY 1
  
#ifdef ENABLE_ES3
vec3 computeViewNormal(vec3 viewPos) {
  vec3 fdx = dFdx(viewPos);
  vec3 fdy = dFdy(viewPos);
  return normalize(cross(fdx, fdy));
}
#else 
vec3 computeViewNormal(vec3 viewPos) {
  return vec3(0.0, 0.0, 0.0);
}
#endif
`,Xd=`#define GLSLIFY 1
import 'GLSLUtils.glsl'
vec3 calcFatLinesViewPos(int vertexID, mat4 modelViewMatrix, inout vec3 viewNormal, inout vec2 texCoord, inout vec3 pos) {

  int seqentialIndex_0 = int(mod(segmentIndices.x, 2.));
  int seqentialIndex_1 = int(mod(segmentIndices.y, 2.));
  int index_0 = int(segmentIndices.x) / 2;
  int index_1 = int(segmentIndices.y) / 2;

  vec3 viewPos;
  vec4 data_0 = fetchTexel(positionsTexture, positionsTextureSize, index_0);
  vec4 data_1 = fetchTexel(positionsTexture, positionsTextureSize, index_1);

  // During XR sessions, there is a scaling applied to the view matrix
  // which causes a distortion to the line width. We extract that scale here
  // and use to correct the distortion.
  // See also: FatPointsShader
  vec3 viewZ = modelViewMatrix[2].xyz;
  float viewScale = length(viewZ);

  vec4 pos_0 = modelViewMatrix * vec4(data_0.xyz, 1.0);
  vec4 pos_1 = modelViewMatrix * vec4(data_1.xyz, 1.0);
  // Note: multiply the per-vertex line thickness with the line thickness uniform value;
  float lineThickness_0 = LineThickness * data_0.w * viewScale;
  float lineThickness_1 = LineThickness * data_1.w * viewScale;

  if (vertexID < 2) {
    pos = data_0.xyz;
    viewPos = pos_0.xyz;
  }
  else {
    pos = data_1.xyz;
    viewPos = pos_1.xyz;
  }
  if (pos_1 != pos_0) {
    vec3 segmentDir = normalize(pos_1.xyz - pos_0.xyz);
    vec3 viewVector = normalize(viewPos);

    if (vertexID < 2) {
      vec3 segmentStartDir = segmentDir;
      if (seqentialIndex_0 != 0) {
        //if index_0 == 0, get the last index in the line as previous
        int index_prev = (index_0 > 0) ? (index_0-1) : (positionsTextureSize-1);
        vec4 data_prev = fetchTexel(positionsTexture, positionsTextureSize, index_prev);
        vec4 pos_prev = modelViewMatrix * vec4(data_prev.xyz, 1.0);
        segmentStartDir = normalize(segmentDir + normalize(pos_0.xyz - pos_prev.xyz));
        // segmentStartDir = segmentDir;
      }
      // vec3 startBiTangent = normalize(cross(segmentStartDir, viewVector));
      // viewNormal = normalize(cross(segmentStartDir, startBiTangent));
      vec3 startBiTangent = normalize(vec3(-segmentStartDir.y, segmentStartDir.x, 0.0));
      viewNormal = normalize(-viewVector);
      // Move the endpoints to overlap a bit more.
      //viewPos -= vec3(segmentStartDir * lineThickness_0 * 0.25);
      if (mod(vertexIDs, 2.0) == 0.0) {
        viewPos += vec3(startBiTangent * lineThickness_0);
        texCoord.x = 1.0;
      }
      else {
        viewPos -= vec3(startBiTangent * lineThickness_0);
        texCoord.x = 0.0;
      }
      texCoord.y = 0.0;
    }
    else {
      vec3 segmentEndDir = segmentDir;
      if (seqentialIndex_1 != 0) {
        //if index_1 == numPoints-1, get the first index in the line as next
        int index_next = (index_1 < (positionsTextureSize-1)) ? (index_1+1) : 0;
        vec4 data_next = fetchTexel(positionsTexture, positionsTextureSize, index_next);
        vec4 pos_next = modelViewMatrix * vec4(data_next.xyz, 1.0);
        segmentEndDir = normalize(segmentDir + normalize(pos_next.xyz - pos_1.xyz));
        // segmentEndDir = segmentDir;
      }
      // vec3 endBiTangent = normalize(cross(segmentEndDir, viewVector));
      // viewNormal = normalize(cross(segmentEndDir, endBiTangent));
      vec3 endBiTangent = normalize(vec3(-segmentEndDir.y, segmentEndDir.x, 0.0));
      viewNormal = normalize(-viewVector);
      // Move the endpoints to overlap a bit more.
      //viewPos += vec3(segmentEndDir * lineThickness_1 * 0.25);
      if (mod(vertexIDs, 2.0) == 0.0) {
        viewPos += vec3(endBiTangent * lineThickness_1);
        texCoord.x = 1.0;
      }
      else {
        viewPos -= vec3(endBiTangent * lineThickness_1);
        texCoord.x = 0.0;
      }
      texCoord.y = 1.0;
    }

    // Move the line towards the viewer by the line thickness.
    // this is to avoid depth issues when lines are rendered over meshes. 
    viewPos.z += (lineThickness_0 + lineThickness_1) * 0.5;
  }

  return viewPos;
}

`,kd=`#define GLSLIFY 1
#define PI 3.141592653589793
#define TwoPI (2.0 * PI)
#define HalfPI (0.5 * PI)

`,fd=`#define GLSLIFY 1

#ifdef ENVMAP_CUBE

uniform samplerCube envMap;

vec4 sampleEnvMap(vec3 dir) {
  return texture(envMap, dir);
}

#else 

uniform sampler2D   envMap;

import 'envmap-octahedral.glsl'

vec4 sampleEnvMap(vec3 dir) {
  vec2 uv = dirToSphOctUv(dir);
  vec4 texel = texture2D(envMap, vec2(uv.x, 1.0 - uv.y));
  return vec4(texel.rgb/texel.a, 1.0); // TODO: Check this line. Do we need it?
}

#endif 

vec3 cubeFaceUvToDir(float u, float v, int faceId) {

  // normalize into [-1, 1] range
  float n_u = 2.0 * u - 1.0;
  float n_v = 2.0 * v - 1.0;

  vec3 dir;
  switch (faceId)
  {
  case 0: //TEXTURE_CUBE_MAP_POSITIVE_X:
    dir.x = 1.0f;
    dir.y = n_v;
    dir.z = -n_u;
    break;
  case 1: //TEXTURE_CUBE_MAP_NEGATIVE_X:
    dir.x = -1.0f;
    dir.y = n_v;
    dir.z = n_u;
    break;
  case 3: //TEXTURE_CUBE_MAP_POSITIVE_Y:
    dir.x = n_u;
    dir.y = 1.0f;
    dir.z = -n_v;
    break;
  case 2: //TEXTURE_CUBE_MAP_NEGATIVE_Y:
    dir.x = n_u;
    dir.y = -1.0f;
    dir.z = n_v;
    break;
  case 4: //TEXTURE_CUBE_MAP_POSITIVE_Z:
    dir.x = n_u;
    dir.y = n_v;
    dir.z = 1.0f;
    break;
  case 5: //TEXTURE_CUBE_MAP_NEGATIVE_Z:
    dir.x = -n_u;
    dir.y = n_v;
    dir.z = -1.0f;
    break;
  }
  return normalize(dir);
}

`,Ed=`#define GLSLIFY 1
const int GEOMITEM_FLAG_CUTAWAY = 1; // 1<<0;
const int GEOMITEM_INVISIBLE_IN_GEOMDATA = 2; // 1<<1;
const int GEOMITEM_TRANSPARENT = 4; // 1<<1;

uniform color cutColor;

#ifdef ENABLE_FLOAT_TEXTURES
  vec4 getCutaway(int id) {
    return fetchTexel(instancesTexture, instancesTextureSize, (id * pixelsPerItem) + 5);
  }

#else

  uniform vec4 cutawayData;

  vec4 getCutaway(int id) {
    return cutawayData;
  }

#endif

#define RAY_EPS 0.0000001
struct Ray {
  vec3 start;
  vec3 dir;
};

float intersectRayPlane(Ray ray, Ray plane) {
  vec3 w = ray.start - plane.start;
  float D = dot(plane.dir, ray.dir);
  float N = dot(-plane.dir, w);

  if (abs(D) < RAY_EPS) {
    // segment is parallel to plane
    if (N == 0.0)
      return -1.0; // segment lies in plane
    else
      return -1.0; // no intersection
  }
  // they are not parallel
  // compute intersect param
  float sI = N / D;
  if (sI < -RAY_EPS) {
    return -1.0; // no intersection
  }
  return sI;
}

bool cutaway(vec3 worldPos, vec3 planeNormal, float planeDist) {

  vec3 planePos = planeNormal * planeDist;
  vec3 planeDir = worldPos + planePos;
  float planeOffset = dot(planeDir, planeNormal);
  if (planeOffset > 0.0) {
    return true;
  }
  return false;
}
`,Td=`#define GLSLIFY 1
import 'GLSLUtils.glsl'

vec3 getDebugColor(float id) {
  int sel = int(round(mod(round(id), 16.0)));
  
  if (sel==0)
    return vec3(0.0, 1.0, 1.0);
  else if (sel==1)
    return vec3(0.0, 1.0, 0.0);
  else if (sel==2)
    return vec3(1.0, 0.0, 1.0);
  else if (sel==3)
    return vec3(0.75, 0.75, 0.0);
  else if (sel==4)
    return vec3(0.0, 0.75, 0.75);
  else if (sel==5)
    return vec3(0.75, 0.0, 0.75);
  else if (sel==6)
    return vec3(0.45, 0.95, 0.0);
  else if (sel==7)
    return vec3(0.0, 0.45, 0.95);
  else if (sel==8)
    return vec3(0.95, 0.0, 0.45);
  else if (sel==9)
    return vec3(0.95, 0.45, 0.0);
  else if (sel==10)
    return vec3(0.0, 0.95, 0.45);
  else if (sel==11)
    return vec3(0.45, 0.0, 0.95);
  else if (sel==12)
    return vec3(0.45, 0.45, 0.95);
  else if (sel==13)
    return vec3(0.0, 0.0, 0.45);
  else if (sel==14)
    return vec3(0.0, 0.45, 0.45);
  else if (sel==15)
    return vec3(0.45, 0.0, 0.45);
  else return vec3(0.2, 0.2, 0.2);
}

`,ya=`#define GLSLIFY 1

#ifdef ENABLE_MULTI_DRAW

#ifdef EMULATE_MULTI_DRAW

uniform int geomItemId;
int getGeomItemId() {
  return geomItemId;
}

vec4 getDrawItemIds() {
  return vec4(float(geomItemId), 0.0, -1.0, -1.0);
}

#else // EMULATE_MULTI_DRAW

uniform sampler2D drawIdsTexture;

int getGeomItemId() {
  ivec2 drawIdsTextureSize = textureSize(drawIdsTexture, 0);
  ivec2 drawIdsArrayCoords = ivec2(gl_DrawID % drawIdsTextureSize.x, gl_DrawID / drawIdsTextureSize.x);
  return int(texelFetch(drawIdsTexture, drawIdsArrayCoords, 0).r + 0.5);
}

vec4 getDrawItemIds() {
  ivec2 drawIdsTextureSize = textureSize(drawIdsTexture, 0);
  ivec2 drawIdsArrayCoords = ivec2(gl_DrawID % drawIdsTextureSize.x, gl_DrawID / drawIdsTextureSize.x);
  vec4 color = texelFetch(drawIdsTexture, drawIdsArrayCoords, 0);
  // Note: a 0 value in the texture means no sub-geom index is being rendered.
  // subtract off 1 to get the true sub-geom index.
  return vec4(color.r, color.g - 1.0, color.b, color.a);
}

#endif // EMULATE_MULTI_DRAW

#else // ENABLE_MULTI_DRAW

uniform int geomItemId;

#ifdef ENABLE_FLOAT_TEXTURES

attribute float instancedIds;    // instanced attribute..
uniform int instancedDraw;

int getGeomItemId() {
  if (instancedDraw == 0) {
    return geomItemId;
  }
  else {
    return int(instancedIds);
  }
}

vec4 getDrawItemIds() {
  if (instancedDraw == 0) {
    return vec4(float(geomItemId), 0.0, -1.0, -1.0);
  }
  else {
    return vec4(float(instancedIds), 0.0, -1.0, -1.0);
  }
}

#else

int getGeomItemId() {
  return geomItemId;
}

vec4 getDrawItemIds() {
    return vec4(float(geomItemId), 0.0, -1.0, -1.0);
}

#endif // ENABLE_FLOAT_TEXTURES
#endif // ENABLE_MULTI_DRAW

// For backwards compatibility with older plugins (UX.HandleShader)
int getDrawItemId() {
  return getGeomItemId();
}
`,Yd=`#define GLSLIFY 1

const int TRIANGLES = 0;
const int LINES = 1;
const int POINTS = 2;`,vd=`#define GLSLIFY 1
import 'GLSLUtils.glsl'

#ifdef ENABLE_FLOAT_TEXTURES

uniform sampler2D instancesTexture;
uniform highp int instancesTextureSize;

// See also: src\\Renderer\\GLSLConstants.js
// const pixelsPerGLGeomItem = 8
const int pixelsPerItem = 8;

vec4 getInstanceData(int id) {
  return fetchTexel(instancesTexture, instancesTextureSize, (id * pixelsPerItem) + 0);
}

#else

uniform vec4 drawItemData;

vec4 getInstanceData(int id) {
  return drawItemData;
}

#endif

`,Md=`#define GLSLIFY 1

vec2 dualfisheyeUVsFromDir(vec3 dir) {
  vec2 result;
  float angle = 0.465;
  if (dir.x < 0.0) {
    result = vec2(((dir.z * -angle) + 0.5) * 0.5, (dir.y * angle) + 0.5);
  }
  else {
    result = vec2( 0.5 + ((dir.z * angle) + 0.5) * 0.5, (dir.y * angle) + 0.5);
  }
  return result;
}

`,Hd=`#define GLSLIFY 1 
import 'constants.glsl'

vec2 latLongUVsFromDir(vec3 dir) {
  // Math function taken from...
  // http://gl.ict.usc.edu/Data/HighResProbes/
  // Note: Scaling from u=[0,2], v=[0,1] to u=[0,1], v=[0,1]
  float phi = acos(dir.z);
  float theta = atan(dir.x, dir.y);
  return vec2((1.0 + theta / PI) / 2.0, phi / PI);
}

// Note: when u == 0.5 z = 1.0
vec3 dirFromLatLongUVs(float u, float v) {
  // http://gl.ict.usc.edu/Data/HighResProbes/
  float theta = PI*((u * 2.0) - 1.0);
  float phi = PI*v;
  return vec3(sin(phi)*sin(theta), sin(phi)*cos(theta), cos(phi));
}

vec3 dirFromPolar(vec2 polar) {
  float u = polar.x / (PI * 2.0);
  float v = polar.y / PI;
  return dirFromLatLongUVs(u, v);
}

`,xd=`#define GLSLIFY 1
import 'constants.glsl'
import 'GLSLUtils.glsl'
#define sectorize(value) step(0.0, (value))*2.0-1.0
#define sum(value) dot(clamp((value), 1.0, 1.0), (value))

vec2 dirToSphOctUv(vec3 normal) {
  normal = normalize(normal);
  vec3 aNorm = abs(normal);
  vec3 sNorm = sectorize(normal);
  
  vec2 dir = aNorm.xy;
  float orient = atan(dir.x, max(dir.y,0.0000000000000001))/HalfPI;

  dir = vec2(aNorm.z, length(aNorm.xy));
  float pitch = atan(dir.y, dir.x)/HalfPI;

  vec2 uv = vec2(sNorm.x*orient, sNorm.y*(1.0-orient))*pitch;

  if (normal.z < 0.0) {
    uv = sNorm.xy - abs(uv.ts)*sNorm.xy;
  }
  vec2 res = uv*0.5+0.5;
  // Flip-v
  // return res;
  return vec2(res.x, 1.0 - res.y);
}

vec3 sphOctUvToDir(vec2 uv) {
  uv = uv*2.0-1.0;
  // Flip-v
  uv.y = -uv.y;
  vec2 suv = sectorize(uv);
  float sabsuv = sum(abs(uv));
  float pitch = sabsuv*HalfPI;

  if (pitch <= 0.0) {
    return vec3(0.0, 0.0, 1.0);
  }
  if (abs(pitch - PI) < 0.000001) {
    return vec3(0.0, 0.0, -1.0);
  }
  if (sabsuv > 1.0) {
    uv = (1.0-abs(uv.ts))*suv;
  }

  float orient = (abs(uv.s)/sabsuv)*HalfPI;
  float sOrient = sin(orient);
  float cOrient = cos(orient);
  float sPitch = sin(pitch);
  float cPitch = cos(pitch);

  return vec3(
    sOrient*suv.s*sPitch,
    cOrient*suv.t*sPitch,
    cPitch
  );
}

`,wd=`#define GLSLIFY 1
    
/////////////////////////////////////////////////////////////////
// http://concord-consortium.github.io/lab/experiments/webgl-gpgpu/script.js
float shift_right(float v, float amt) {
  v = floor(v) + 0.5;
  return floor(v / exp2(amt));
}
float shift_left(float v, float amt) {
  return floor(v * exp2(amt) + 0.5);
}

float mask_last(float v, float bits) {
  return mod(v, shift_left(1.0, bits));
}
float extract_bits(float num, float from, float to) {
  from = floor(from + 0.5);
  to = floor(to + 0.5);
  return mask_last(shift_right(num, from), to - from);
}

/////////////////////////////////////////////////////////////////
// https://stackoverflow.com/questions/18453302/how-do-you-pack-one-32bit-int-into-4-8bit-ints-in-glsl-webgl

const vec4 bitEnc = vec4(1.,255.,65025.,16581375.);
const vec4 bitDec = 1./bitEnc;
vec4 EncodeFloatRGBA (float v) {
  vec4 enc = bitEnc * v;
  enc = fract(enc);
  enc -= enc.yzww * vec2(1./255., 0.).xxxy;
  return enc;
}
float DecodeFloatRGBA (vec4 v) {
  return dot(v, bitDec);
}

/////////////////////////////////////////////////////////////////
// https://gist.github.com/Flexi23/1713774
// 
vec2 encode16BitFloatInto2xUInt8(float v) {
  vec2 c = vec2(0.);

  int signum = (v >= 0.) ? 128 : 0;
  v = abs(v);
  int exponent = 15;
  float limit = 1024.; // considering the bias from 2^-5 to 2^10 (==1024)
  for(int exp = 15; exp > 0; exp--) {
    if ( v < limit) {
      limit /= 2.;
      exponent--;
    }
  }

  float rest;
  if (exponent == 0) {
    rest = v / limit / 2.;      // "subnormalize" implicite preceding 0. 
  } 
  else {
    rest = (v - limit)/limit;   // normalize accordingly to implicite preceding 1.
  }

  int mantissa = int(rest * 2048.);   // 2048 = 2^11 for the (split) 11 bit mantissa
  int msb = mantissa / 256;           // the most significant 3 bits go into the lower part of the first byte
  int lsb = mantissa - msb * 256;     // there go the other 8 bit of the lower significance

  c.x = float(signum + exponent * 8 + msb) / 255.;    // color normalization for texture2D
  c.y = float(lsb) / 255.;

  if (v >= 2048.) {
    c.y = 1.;
  }

  return c;
}

float decode16BitFloatFrom2xUInt8(vec2 c) {
  float v = 0.;

  int ix = int(c.x*255.); // 1st byte: 1 bit signum, 4 bits exponent, 3 bits mantissa (MSB)
  int iy = int(c.y*255.); // 2nd byte: 8 bit mantissa (LSB)

  int s = (c.x >= 0.5) ? 1 : -1;
  ix = (s > 0) ? ix - 128 : ix;   // remove the signum bit from exponent
  int iexp = ix / 8;              // cut off the last 3 bits of the mantissa to select the 4 exponent bits
  int msb = ix - iexp * 8;        // subtract the exponent bits to select the 3 most significant bits of the mantissa

  int norm = (iexp == 0) ? 0 : 2048;          // distinguish between normalized and subnormalized numbers
  int mantissa = norm + msb * 256 + iy;       // implicite preceding 1 or 0 added here
  norm = (iexp == 0) ? 1 : 0;                 // normalization toggle
  float exponent = pow( 2., float(iexp + norm) - 16.); // -5 for the the exponent bias from 2^-5 to 2^10 plus another -11 for the normalized 12 bit mantissa 
  v = float( s * mantissa ) * exponent;

  return v;
}

// TODO : Encoding Float32 to 4x UInt8
// http://concord-consortium.github.io/lab/experiments/webgl-gpgpu/script.js
// http://ultraist.hatenablog.com/entry/20110608/1307539319

`,Dd=`#define GLSLIFY 1

int ftoi(float val) {
  return int(floor(val + 0.5));
}
ivec2 ftoi(vec2 v2) {
  return ivec2(ftoi(v2.x), ftoi(v2.y));
}
ivec3 ftoi(vec3 v4) {
  return ivec3(ftoi(v4.x), ftoi(v4.y), ftoi(v4.z));
}
ivec4 ftoi(vec4 v4) {
  return ivec4(ftoi(v4.x), ftoi(v4.y), ftoi(v4.z), ftoi(v4.w));
}

#ifdef ENABLE_ES3

int imod(int x, int y) {
  return x % y;
}

void setFlag(inout int flags, int flag) {
  flags |= flag;
}

void clearFlag(inout int flags, int flag) {
  flags &= ~flag;
}

bool testFlag(int flags, int flag) {
  return (flags & flag) != 0;
}

// private function: Mangle me...
ivec2 _pixelIndexToUV(int index, int textureWidth) {
  return ivec2(index % textureWidth, index / textureWidth);
}

vec4 fetchTexel(sampler2D texture, int textureWidth, int index) {
  return texelFetch(texture, _pixelIndexToUV(index, textureWidth), 0);
}

vec4 fetchTexel(sampler2D texture, ivec2 textureSize, ivec2 texCoord) {
  return texelFetch(texture, texCoord, 0);
}

vec4 fetchTexel(sampler2D texture, ivec2 textureSize, int index) {
    return texelFetch(texture, _pixelIndexToUV(index, textureSize.x), 0);
}

#else

// TODO: integrate: https://gist.github.com/mattatz/70b96f8c57d4ba1ad2cd

int max(int a, int b) {
  return a > b ? a : b;
}
int min(int a, int b) {
  return a < b ? a : b;
}

float round(float val) {
  return floor(val + 0.4);
}

int imod(int x, int y) {
  return x-y*(x/y);
}

void setFlag(inout int flags, int flag) {
  flags += flag;
}
void clearFlag(inout int flags, int flag) {
  flags -= flag;
}

bool testFlag(int flags, int flag) {
  return imod(flags / flag, 2) != 0;
}

// private function: Mangle me...
vec2 _pixelIndexToUV(int index, int textureSize) {
  float flTexSize = float(textureSize);
  float x = (float(imod(index, textureSize))+0.5)/flTexSize;
  float y = (floor(float(index / textureSize))+0.5)/flTexSize;
  return vec2(x, y);
}

vec4 fetchTexel(sampler2D texture, int textureSize, int index) {
  vec2 texCoord = _pixelIndexToUV(index, textureSize);
  return texture2D(texture, texCoord);
}

vec4 fetchTexel(sampler2D texture, ivec2 textureSize, ivec2 texCoord) {
  vec2 ftextureSize = vec2(textureSize);
  return texture2D(texture, (vec2(texCoord) + 0.5) / ftextureSize);
}

#endif // ENABLE_ES3

int uvToPixelIndex(vec2 uv, int textureSize) {
  return int(uv.x * float(textureSize)) + (int(floor(uv.y * float(textureSize))) * textureSize);
}

`,Kd=`#define GLSLIFY 1
float RadicalInverse_VdC(uint bits) 
{
  bits = (bits << 16u) | (bits >> 16u);
  bits = ((bits & 0x55555555u) << 1u) | ((bits & 0xAAAAAAAAu) >> 1u);
  bits = ((bits & 0x33333333u) << 2u) | ((bits & 0xCCCCCCCCu) >> 2u);
  bits = ((bits & 0x0F0F0F0Fu) << 4u) | ((bits & 0xF0F0F0F0u) >> 4u);
  bits = ((bits & 0x00FF00FFu) << 8u) | ((bits & 0xFF00FF00u) >> 8u);
  return float(bits) * 2.3283064365386963e-10; // / 0x100000000
}
// ----------------------------------------------------------------------------
vec2 Hammersley(uint i, uint N)
{
  return vec2(float(i)/float(N), RadicalInverse_VdC(i));
} 
`,Ld=`#define GLSLIFY 1
import 'constants.glsl'

vec3 ImportanceSampleGGX(vec2 Xi, vec3 N, float roughness)
{
  float a = roughness*roughness;

  float phi = 2.0 * PI * Xi.x;
  float cosTheta = sqrt((1.0 - Xi.y) / (1.0 + (a*a - 1.0) * Xi.y));
  float sinTheta = sqrt(1.0 - cosTheta*cosTheta);

  // from spherical coordinates to cartesian coordinates
  vec3 H = vec3(cos(phi) * sinTheta, sin(phi) * sinTheta, cosTheta);

  // from tangent-space vector to world-space sample vector
  vec3 up        = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
  vec3 tangent   = normalize(cross(up, N));
  vec3 bitangent = cross(N, tangent);

  vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;
  return normalize(sampleVec);
} 
`,zd=`#define GLSLIFY 1
import 'GLSLUtils.glsl'
import 'gamma.glsl'

#ifdef ENABLE_MULTI_DRAW
 
uniform sampler2D materialsTexture;
uniform highp ivec2 materialsTextureSize;

vec4 getMaterialValue(vec2 materialCoords, int valueIndex) {
  int index = ftoi(materialCoords.x) + valueIndex;
  ivec2 texelCoords = ivec2(imod(index, materialsTextureSize.x), index / materialsTextureSize.x);
  
  return fetchTexel(materialsTexture, materialsTextureSize, texelCoords);
}

#else // ENABLE_MULTI_DRAW

////////////////////////
// Material Param Helpers.

vec4 getColorParamValue(vec4 value, sampler2D tex, int texType, vec2 texCoord) {
  if (texType == 0) {
    return value;
  }
  else if (texType == 1 || texType == 2) {
    // Note: we assume textures are always in gamma space, and must be converted
    // to linear. I cann't find evidence that 8-bit textures can be in linear space.
    // TODO: Use SRGB textures.
    return toLinear(texture2D(tex, texCoord));
  }
  else if (texType == 3) {
    // Float HDR Texture. We assume these textures are in linear space.
    return texture2D(tex, texCoord);
  }
  else
    return value;
}

float luminanceFromRGB(vec3 rgb) {
  return 0.2126*rgb.r + 0.7152*rgb.g + 0.0722*rgb.b;
}

float getLuminanceParamValue(float value, sampler2D tex, int texType, vec2 texCoord) {
  if (texType == 0)
    return value;
  else
    return luminanceFromRGB(texture2D(tex, texCoord).rgb);
}

#endif // ENABLE_MULTI_DRAW
`,_d=`#define GLSLIFY 1
#ifdef ENABLE_FLOAT_TEXTURES
import 'GLSLUtils.glsl'
import 'transpose.glsl'
mat4 getMatrix(sampler2D texture, int textureSize, int index) {
  // Unpack 3 x 4 matrix columns into a 4 x 4 matrix.
  vec4 col0 = fetchTexel(texture, textureSize, (index * pixelsPerItem) + 1);
  vec4 col1 = fetchTexel(texture, textureSize, (index * pixelsPerItem) + 2);
  vec4 col2 = fetchTexel(texture, textureSize, (index * pixelsPerItem) + 3);
  mat4 result = transpose(mat4(col0, col1, col2, vec4(0.0, 0.0, 0.0, 1.0)));
  return result;
}

mat4 getModelMatrix(int id) {
  return getMatrix(instancesTexture, instancesTextureSize, id);
}

#else

uniform mat4 modelMatrix;

mat4 getModelMatrix(int id) {
  return modelMatrix;
}

#endif

`,Od=`#define GLSLIFY 1
import 'GLSLUtils.glsl'
const int ENVMAP_FLAG_HEADLIGHT =  1; // 1<<0;

struct MaterialParams {
  vec3 baseColor;
  float ambientOcclusion;
  float metallic;
  float roughness;
  float reflectance;
  float opacity;
  float emission;
};

#ifndef ENABLE_PBR

vec4 pbrSurfaceRadiance(in MaterialParams material, vec3 normal, in vec3 viewVector) {
  vec3 irradiance = vec3(dot(normal, viewVector));
  float ao = material.ambientOcclusion; 
  return vec4(material.baseColor * ao * irradiance + (material.emission * material.baseColor), material.opacity);

  // return vec4(material.baseColor * ao * irradiance , material.opacity);
}

#else

uniform int envMapFlags;
uniform samplerCube irradianceMap;
uniform samplerCube prefilterMap;
uniform sampler2D brdfLUT;

vec3 sampleIrradiance(vec3 dir) {
  return texture(irradianceMap, dir).rgb;
}

vec3 fresnelSchlickRoughness(float cosTheta, vec3 F0, float roughness) {
  return F0 + (max(vec3(1.0 - roughness), F0) - F0) * pow(max(1.0 - cosTheta, 0.0), 5.0);
}

float luminance(vec3 color) {
  return 0.2126 * color.r + 0.7152 * color.g + 0.0722 * color.b;
}

vec4 pbrSurfaceRadiance(in MaterialParams material, vec3 normal, in vec3 viewVector) {
  if (envMapFlags == -1) {
    vec3 irradiance = vec3(dot(normal, viewVector));
    float ao = material.ambientOcclusion; 
    return vec4(material.baseColor * ao * irradiance + (material.emission * material.baseColor), material.opacity);
  }

  vec3 N = normal;
  vec3 V = viewVector;
  vec3 R = reflect(-V, N);
  float roughness = material.roughness * material.roughness;
  vec3 diffuseColor = (1.0 - material.metallic) * material.baseColor;

  // Note: The specular reflectance of metallic surfaces is chromatic
  // https://google.github.io/filament/Filament.html#listing_fnormal
  vec3 F0 = 0.16 * material.reflectance * material.reflectance * (1.0 - material.metallic) + material.baseColor * material.metallic;

  float NdotV = dot(N, V);

  vec3 F = fresnelSchlickRoughness(max(NdotV, 0.0), F0, roughness);

  vec3 kS = F;
  vec3 kD = 1.0 - kS;
  kD *= 1.0 - material.metallic;
  float ao = material.ambientOcclusion; 
  
  vec3 irradiance;
  vec3 irradianceSampleDir = normal;
  
  bool headLightMode = testFlag(envMapFlags, ENVMAP_FLAG_HEADLIGHT);
  if (headLightMode) {
    irradianceSampleDir = viewVector;
  }
  irradiance = sampleIrradiance(irradianceSampleDir);
  // vec3 irradiance = shGetIrradianceAt(shCoefficients, N);
  vec3 diffuse    = irradiance * diffuseColor;
  
  const float MAX_REFLECTION_LOD = 4.0;
  vec3 prefilteredColor = textureLod(prefilterMap, R,  roughness * MAX_REFLECTION_LOD).rgb;   
  vec2 envBRDF  = texture(brdfLUT, vec2(max(NdotV, 0.0), roughness)).rg;
  vec3 specular = prefilteredColor * (F * envBRDF.x + envBRDF.y);
  
  vec3 radiance = (kD * diffuse + specular) * ao;
  
  // Now handle semi-transparent objects. We need to be able to linearly interpolate
  // opacity to make objects disappear, so we need a continuous change.
  float opacity = material.opacity;
  vec4 transparent = vec4((radiance * opacity) + specular, opacity + luminance(specular) + luminance(F));
  vec4 result = mix(transparent, vec4(radiance, 1.0), opacity);

  // Add emission on as the final component.
  // Note: emission allows a material to blend off its specular component, 
  // which can also be used to make an object completely disappear if also transparent.
  return mix(result, vec4(material.baseColor, opacity), material.emission);
}

#endif // ENABLE_PBR
`,Pd=`#define GLSLIFY 1
uniform vec3 shCoeffs[9];

vec3 sampleSHCoeffs(vec3 dir) {
  // dir is assumed to have unit length
  float x = dir.x, y = dir.y, z = dir.z;
  // band 0
  vec3 result = shCoeffs[ 0 ] * 0.886227;
  // band 1
  result += shCoeffs[ 1 ] * 2.0 * 0.511664 * y;
  result += shCoeffs[ 2 ] * 2.0 * 0.511664 * z;
  result += shCoeffs[ 3 ] * 2.0 * 0.511664 * x;
  // band 2
  result += shCoeffs[ 4 ] * 2.0 * 0.429043 * x * y;
  result += shCoeffs[ 5 ] * 2.0 * 0.429043 * y * z;
  result += shCoeffs[ 6 ] * ( 0.743125 * z * z - 0.247708 );
  result += shCoeffs[ 7 ] * 2.0 * 0.429043 * x * z;
  result += shCoeffs[ 8 ] * 0.429043 * ( x * x - y * y );
  return result;
}
`,jd=`#define GLSLIFY 1
const float gamma_const = 2.2;

float toLinear(float v) {
  return pow(v, gamma_const);
}

vec2 toLinear(vec2 v) {
  return pow(v, vec2(gamma_const));
}

vec3 toLinear(vec3 v) {
  return pow(v, vec3(gamma_const));
}

vec4 toLinear(vec4 v) {
  return vec4(toLinear(v.rgb), v.a);
}

float toGamma(float v) {
  return pow(v, 1.0 / gamma_const);
}

vec2 toGamma(vec2 v) {
  return pow(v, vec2(1.0 / gamma_const));
}

vec3 toGamma(vec3 v) {
  return pow(v, vec3(1.0 / gamma_const));
}

vec4 toGamma(vec4 v) {
  return vec4(toGamma(v.rgb), v.a);
}

float toGamma(float v, float gamma) {
  return pow(v, 1.0 / gamma);
}

vec2 toGamma(vec2 v, float gamma) {
  return pow(v, vec2(1.0 / gamma));
}

vec3 toGamma(vec3 v, float gamma) {
  return pow(v, vec3(1.0 / gamma));
}

vec4 toGamma(vec4 v, float gamma) {
  return vec4(toGamma(v.rgb, gamma), v.a);
}

`,qd=`#define GLSLIFY 1

#ifndef ENABLE_ES3

float inverse(float m) {
  return 1.0 / m;
}

mat2 inverse(mat2 m) {
  return mat2(m[1][1],-m[0][1],
             -m[1][0], m[0][0]) / (m[0][0]*m[1][1] - m[0][1]*m[1][0]);
}

mat3 inverse(mat3 m) {
  float a00 = m[0][0], a01 = m[0][1], a02 = m[0][2];
  float a10 = m[1][0], a11 = m[1][1], a12 = m[1][2];
  float a20 = m[2][0], a21 = m[2][1], a22 = m[2][2];

  float b01 = a22 * a11 - a12 * a21;
  float b11 = -a22 * a10 + a12 * a20;
  float b21 = a21 * a10 - a11 * a20;

  float det = a00 * b01 + a01 * b11 + a02 * b21;

  return mat3(b01, (-a22 * a01 + a02 * a21), (a12 * a01 - a02 * a11),
              b11, (a22 * a00 - a02 * a20), (-a12 * a00 + a02 * a10),
              b21, (-a21 * a00 + a01 * a20), (a11 * a00 - a01 * a10)) / det;
}

mat4 inverse(mat4 m) {
  float
      a00 = m[0][0], a01 = m[0][1], a02 = m[0][2], a03 = m[0][3],
      a10 = m[1][0], a11 = m[1][1], a12 = m[1][2], a13 = m[1][3],
      a20 = m[2][0], a21 = m[2][1], a22 = m[2][2], a23 = m[2][3],
      a30 = m[3][0], a31 = m[3][1], a32 = m[3][2], a33 = m[3][3],

      b00 = a00 * a11 - a01 * a10,
      b01 = a00 * a12 - a02 * a10,
      b02 = a00 * a13 - a03 * a10,
      b03 = a01 * a12 - a02 * a11,
      b04 = a01 * a13 - a03 * a11,
      b05 = a02 * a13 - a03 * a12,
      b06 = a20 * a31 - a21 * a30,
      b07 = a20 * a32 - a22 * a30,
      b08 = a20 * a33 - a23 * a30,
      b09 = a21 * a32 - a22 * a31,
      b10 = a21 * a33 - a23 * a31,
      b11 = a22 * a33 - a23 * a32,

      det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;

  return mat4(
      a11 * b11 - a12 * b10 + a13 * b09,
      a02 * b10 - a01 * b11 - a03 * b09,
      a31 * b05 - a32 * b04 + a33 * b03,
      a22 * b04 - a21 * b05 - a23 * b03,
      a12 * b08 - a10 * b11 - a13 * b07,
      a00 * b11 - a02 * b08 + a03 * b07,
      a32 * b02 - a30 * b05 - a33 * b01,
      a20 * b05 - a22 * b02 + a23 * b01,
      a10 * b10 - a11 * b08 + a13 * b06,
      a01 * b08 - a00 * b10 - a03 * b06,
      a30 * b04 - a31 * b02 + a33 * b00,
      a21 * b02 - a20 * b04 - a23 * b00,
      a11 * b07 - a10 * b09 - a12 * b06,
      a00 * b09 - a01 * b07 + a02 * b06,
      a31 * b01 - a30 * b03 - a32 * b00,
      a20 * b03 - a21 * b01 + a22 * b00) / det;
}

#endif

`,$d=`#define GLSLIFY 1

#ifndef ENABLE_ES3

float transpose(float m) {
  return m;
}

mat2 transpose(mat2 m) {
  return mat2(m[0][0], m[1][0],
              m[0][1], m[1][1]);
}

mat3 transpose(mat3 m) {
  return mat3(m[0][0], m[1][0], m[2][0],
              m[0][1], m[1][1], m[2][1],
              m[0][2], m[1][2], m[2][2]);
}

mat4 transpose(mat4 m) {
  return mat4(m[0][0], m[1][0], m[2][0], m[3][0],
              m[0][1], m[1][1], m[2][1], m[3][1],
              m[0][2], m[1][2], m[2][2], m[3][2],
              m[0][3], m[1][3], m[2][3], m[3][3]);
}

#endif

`,es=`#define GLSLIFY 1
attribute float vertexIDs;

vec2 getQuadVertexPositionFromID() {
  int vertexID = int(vertexIDs);
  if (vertexID == 0)
    return vec2(-0.5, -0.5);
  else if (vertexID == 1)
    return vec2(0.5, -0.5);
  else if (vertexID == 2)
    return vec2(-0.5, 0.5);
  else if (vertexID == 3)
    return vec2(0.5, 0.5);
  return vec2(0,0);
}
`,gs=`#define GLSLIFY 1

vec3 decodeHDR(const in vec3 ldrPixel, const in float cdmAlpha) {
  float avg = (cdmAlpha * 16.0 - 8.0);
  float scl = 1.0;
  vec3 color;
  color.x = (tan((ldrPixel.x-0.5)*1.5)/scl)+avg;
  color.y = (tan((ldrPixel.y-0.5)*1.5)/scl)+avg;
  color.z = (tan((ldrPixel.z-0.5)*1.5)/scl)+avg;

  // convert from logarithmic curve to linear curve.
  // subtract the epsilon that was added during encoding.
  const float eps = 0.001;
  color.x = pow(10.0, color.x) - eps;
  color.y = pow(10.0, color.y) - eps;
  color.z = pow(10.0, color.z) - eps;
  return color;
}

vec3 decodeHDR(sampler2D ldrSampler, sampler2D cdmSampler, vec2 texCoord) {
#ifdef ENABLE_ES3
  float cdm = texture2D(cdmSampler, texCoord).r;
#else
  float cdm = texture2D(cdmSampler, texCoord).a;
#endif
  return decodeHDR(texture2D(ldrSampler, texCoord).rgb, cdm);
}

`,ts=`#define GLSLIFY 1
  uniform int floatGeomBuffer;
  uniform int passId;
  uniform int occlusionCulling;

  import 'GLSLBits.glsl'
  
  vec4 setFragColor_geomData(vec3 v_viewPos, int floatGeomBuffer, int passId, float geomItemId, float elemItemId, int isOrthographic){
    vec4 fragColor;

    float viewDist;
    if (isOrthographic > 0) {
      viewDist = abs(v_viewPos.z);
    } else {
      viewDist = length(v_viewPos);
    }
    if (floatGeomBuffer != 0) {
      fragColor.r = float(passId); 
      fragColor.g = float(geomItemId);
      fragColor.b = elemItemId;
      fragColor.a = viewDist;
    }
    else {
      ///////////////////////////////////
      // UInt8 buffer
      fragColor.r = mod(geomItemId, 256.) / 255.;
      fragColor.g = (floor(geomItemId / 256.) + float(passId) * 32.) / 255.;

      // encode the dist as a 16 bit float
      vec2 float16bits = encode16BitFloatInto2xUInt8(viewDist);
      fragColor.b = float16bits.x;
      fragColor.a = float16bits.y;
    }

#ifdef ENABLE_ES3
    if (occlusionCulling != 0) {
      // Calculate a simple stochastic transparency to reduce the cost of the reduction shader.
      // We only need one pixel to be visible to consider the geometry visible, so here we 
      // keep only one in 7x7 (49) pixels. This signficatly reduces the cost of reducing the scene
      // to the reduction data buffer.
      // Note: this is not a stochastic transparency, as we are simply setting black pixels to 
      // reduce the number of reduction points for this geometry. The black pixels (not discarded)
      // still occlude other geometries, but during reduction count to nothing.
      int x = int(gl_FragCoord.x * 1000.0);
      int y = int(gl_FragCoord.y * 1000.0);
      if (x % 7 != 0 || y % 7 != 0) {
        fragColor = vec4(0.0, 0.0, 0.0, 1.0);
      };
    }
#endif // ENABLE_ES3

    return fragColor;
  }

  // Note: the older code imported drawItemId.glsl and newer code is importing geomItemId.glsl
  // This code keeps compatibility with the older shaders.
  vec4 setFragColor_geomData(vec3 v_viewPos, int floatGeomBuffer, int passId, float geomItemId, int isOrthographic){
    return setFragColor_geomData(v_viewPos, floatGeomBuffer, passId, geomItemId, -1.0, isOrthographic);
  }`,Is=`#define GLSLIFY 1
import 'GLSLUtils.glsl'
import 'drawItemTexture.glsl'

#ifdef ENABLE_FLOAT_TEXTURES
vec4 getHighlightColor(int id) {
  return fetchTexel(instancesTexture, instancesTextureSize, (id * pixelsPerItem) + 4);
}
#else

uniform vec4 highlightColor;

vec4 getHighlightColor(int id) {
    return highlightColor;
}

#endif

vec4 setFragColor_highlight(float v_geomItemId){
  vec4 fragColor; 
  int geomItemId = int(v_geomItemId + 0.5);
  fragColor = getHighlightColor(geomItemId);
  return fragColor;
}
`,ls=`#define GLSLIFY 1
// Note: On mobile, I can't seem to pass around a stuct containing sampler2D.
// I have to unpack the struct and pass its members. :(
// struct ImageAtlas {
//     sampler2D layout;
//     sampler2D image;
//     vec4 desc;
// };

import 'GLSLUtils.glsl'

vec4 getSubImageLayout(int index, in sampler2D atlasLayout, in vec4 atlasDesc){
    return fetchTexel(atlasLayout, int(floor(atlasDesc.z+0.5)), index);
}
vec2 calcSubImageTexCoords(vec2 texCoord, int index, in sampler2D atlasLayout, in vec4 atlasDesc){
    vec4 layoutData = fetchTexel(atlasLayout, int(floor(atlasDesc.z+0.5)), index);
    // The following line is a hack to fix artifacts in our PBR lighting
    // We were seeing loads of lighting garbage on some sufaces that were orthogonal
    // to the world. The UV coordinates would have been landing right on the edges
    // of our subimages and were often sampling outside the image. This couuld
    // have been because of filtering, or an error in the uv coords. 
    texCoord = clamp(texCoord, vec2(0.01, 0.01), vec2(0.99, 0.99));
    vec2 subimageTexel = texCoord * layoutData.zw;
    // subimageTexel = clamp(subimageTexel, vec2(0.0, 0.0), vec2(1.0, 1.0));
    return subimageTexel + layoutData.xy;
}
vec4 sampleSubImage(vec2 texCoord, int index, in sampler2D atlasLayout, in sampler2D atlasImage, in vec4 atlasDesc){
    vec4 layoutData = fetchTexel(atlasLayout, int(floor(atlasDesc.z+0.5)), index);
    vec2 atlasCoords = calcSubImageTexCoords(texCoord, index, atlasLayout, atlasDesc);
    return texture2D(atlasImage, atlasCoords);
}`;ue.setShaderModule("imageAtlas.glsl",ls);ue.setShaderModule("surfaceGeomData.glsl",ts);ue.setShaderModule("surfaceHighlight.glsl",Is);ue.setShaderModule("computeViewNormal.glsl",yd);ue.setShaderModule("calcFatLinesViewPos.glsl",Xd);ue.setShaderModule("constants.glsl",kd);ue.setShaderModule("convolve-helpers.glsl",fd);ue.setShaderModule("cutaways.glsl",Ed);ue.setShaderModule("debugColors.glsl",Td);ue.setShaderModule("drawItemId.glsl",ya);ue.setShaderModule("geomItemId.glsl",ya);ue.setShaderModule("geomType.glsl",Yd);ue.setShaderModule("drawItemTexture.glsl",vd);ue.setShaderModule("envmap-dualfisheye.glsl",Md);ue.setShaderModule("envmap-equirect.glsl",Hd);ue.setShaderModule("envmap-octahedral.glsl",xd);ue.setShaderModule("GLSLBits.glsl",wd);ue.setShaderModule("GLSLUtils.glsl",Dd);ue.setShaderModule("Hammersley.glsl",Kd);ue.setShaderModule("ImportanceSampleGGX.glsl",Ld);ue.setShaderModule("materialparams.glsl",zd);ue.setShaderModule("modelMatrix.glsl",_d);ue.setShaderModule("PBRSurfaceRadiance.glsl",Od);ue.setShaderModule("SHCoeffs.glsl",Pd);ue.setShaderModule("gamma.glsl",jd);ue.setShaderModule("inverse.glsl",qd);ue.setShaderModule("transpose.glsl",$d);ue.setShaderModule("quadVertexFromID.glsl",es);ue.setShaderModule("unpackHDR.glsl",gs);var Cs=` 
precision highp float;
#define GLSLIFY 1

varying vec2 v_texCoord;
uniform sampler2D ldrSampler;
uniform sampler2D cdmSampler;
uniform vec4 srcRegion; // pos, and size of the source region

import 'unpackHDR.glsl'

#ifdef ENABLE_ES3
  out vec4 fragColor;
#endif
void main(void) {

#ifndef ENABLE_ES3
  vec4 fragColor;
#endif

  vec2 srcUv = srcRegion.xy + (v_texCoord * srcRegion.zw);

  fragColor = vec4(decodeHDR(ldrSampler, cdmSampler, srcUv), 1.0);

#ifndef ENABLE_ES3
  gl_FragColor = fragColor;
#endif
}

`,is=`
precision highp float;
#define GLSLIFY 1

import 'quadVertexFromID.glsl'

/* VS Outputs */
varying vec2 v_texCoord;
 
void main()
{
  vec2 position = getQuadVertexPositionFromID();
  v_texCoord = position+0.5;
  gl_Position = vec4(position*2.0, 0.0, 1.0);
}
`;class ns extends Pe{constructor(e){super(e,"UnpackHDRShader");this.setShaderStage("VERTEX_SHADER",is),this.setShaderStage("FRAGMENT_SHADER",Cs)}}const Qi=(i,e)=>{let g,t,I;switch(e){case"UInt8":g=1,t=4,I=i.UNSIGNED_BYTE;break;case"SInt8":g=1,t=4,I=i.BYTE;break;case"UInt16":g=1,t=4,I=i.UNSIGNED_SHORT;break;case"SInt16":g=1,t=4,I=i.SHORT;break;case"UInt32":g=1,t=4,I=i.UNSIGNED_INT;break;case"SInt32":g=1,t=4,I=i.INT;break;case"Float32":g=1,t=4,I=i.FLOAT;break;case"Vec2":g=2,t=4,I=i.FLOAT;break;case"Vec3":g=3,t=4,I=i.FLOAT;break;case"Vec4":case"Color":g=4,t=4,I=i.FLOAT;break;case"RGBA":g=4,t=1,I=i.UNSIGNED_BYTE;break;default:throw"Unhandled Type"}return{dimension:g,elementSize:t,dataType:I}};class Xa{}class as extends Xa{constructor(e,g,t,I){super();this.gl=e,this.shaderAttrs=g,this.glattrbuffers=t,this.indexBuffer=I}bind(e){const g=this.gl;for(const t in this.shaderAttrs){if(t=="instancedIds")continue;const I=this.shaderAttrs[t],l=I.location;if(l==-1)continue;const C=this.glattrbuffers[t];if(!C){g.disableVertexAttribArray(l);continue}const n=Qi(this.gl,C.dataType),F=n.dimension*n.elementSize,a=C.offset!=null?C.offset*n.dimension*n.elementSize:0,U=C.normalized==!0,d=I.instanced;g.enableVertexAttribArray(l),g.bindBuffer(g.ARRAY_BUFFER,C.buffer),g.vertexAttribPointer(l,n.dimension,n.dataType,U,F,a),g.vertexAttribDivisor&&(d==!0?g.vertexAttribDivisor(l,1):g.vertexAttribDivisor(l,0))}return g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,this.indexBuffer),!0}unbind(){const e=this.gl;for(const g in this.shaderAttrs){const t=this.shaderAttrs[g],I=t.location;I==-1&&e.enableVertexAttribArray(I),t.instanced&&e.vertexAttribDivisor(I,0)}e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}destroy(){}}class Fs extends Xa{constructor(e,g,t,I){super();this.gl=e,this.vao=e.createVertexArray(),e.bindVertexArray(this.vao);for(const l in g){if(l=="instancedIds")continue;const C=g[l],n=C.location;if(n==-1)continue;let F=t[l];if(!F&&(l.endsWith("Next")&&(F=t[l.substring(0,l.length-4)],C.offset=1),!F)){e.disableVertexAttribArray(n);continue}const a=Qi(e,F.dataType),U=a.dimension*a.elementSize,d=C.offset!=null?C.offset*a.dimension*a.elementSize:0,s=F.normalized==!0,o=C.instanced;e.enableVertexAttribArray(n),e.bindBuffer(e.ARRAY_BUFFER,F.buffer),e.vertexAttribPointer(n,a.dimension,a.dataType,s,U,d),e.vertexAttribDivisor&&(o==!0?e.vertexAttribDivisor(n,1):e.vertexAttribDivisor(n,0))}this.indexBuffer=I,this.indexBuffer&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.indexBuffer)}bind(e){const g=this.gl;return g.bindVertexArray(this.vao),this.indexBuffer&&g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,this.indexBuffer),!0}unbind(){const e=this.gl;e.bindVertexArray(null),this.indexBuffer&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)}destroy(){const e=this.gl;this.indexBuffer&&(e.bindVertexArray(this.vao),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null)),e.deleteVertexArray(this.vao)}}function og(i,e,g,t){return i.createVertexArray==null?new as(i,e,g,t):new Fs(i,e,g,t)}class DI extends Te{constructor(e,g){super(e);this.listenerIDs={},this.fbo=null,this.srcLDRTex=null,this.srcCDMTex=null,this.unpackHDRShader=null,this.shaderBinding=null,this.hdrImage=g;const t=()=>{this.__unpackHDRImage(this.hdrImage.getParams())};this.listenerIDs.updated=this.hdrImage.on("updated",t),this.hdrImage.isLoaded()?t():this.listenerIDs.loaded=this.hdrImage.on("loaded",t)}getImage(){return this.hdrImage}__unpackHDRImage(e){const g=this.__gl,t=e.data.ldr,I=e.data.cdm;if(this.fbo)this.srcLDRTex.bufferData(t),this.srcCDMTex.bufferData(I);else{this.configure({format:"RGBA",type:"FLOAT",width:t.width,height:t.height,filter:"LINEAR",wrap:"CLAMP_TO_EDGE"}),this.fbo=new Bi(this.__gl,this),this.fbo.setClearColor(new E(0,0,0,0)),this.srcLDRTex=new Te(this.__gl,{format:"RGB",type:"UNSIGNED_BYTE",width:t.width,height:t.height,filter:"NEAREST",mipMapped:!1,wrap:"CLAMP_TO_EDGE",data:t}),this.srcCDMTex=new Te(this.__gl,{format:g.name=="webgl2"?"RED":"ALPHA",type:"UNSIGNED_BYTE",width:t.width,height:t.height,filter:"NEAREST",mipMapped:!1,wrap:"CLAMP_TO_EDGE",data:I}),this.unpackHDRShader=new ns(this.__gl);const n=this.unpackHDRShader.compileForTarget("GLHDRImage",{directives:["#define ENABLE_ES3"]});this.shaderBinding=og(this.__gl,n.attrs,g.__quadattrbuffers,g.__quadIndexBuffer)}this.fbo.bindAndClear();const l={};this.unpackHDRShader.bind(l,"GLHDRImage"),this.shaderBinding.bind(l);const C=l.unifs;this.srcLDRTex.bindToUniform(l,C.ldrSampler),this.srcCDMTex.bindToUniform(l,C.cdmSampler),g.uniform4fv(C.srcRegion.location,[0,0,1,1]),g.drawQuad(),this.fbo.unbind(),this.emit("updated")}bindToUniform(e,g,t){return super.bindToUniform(e,g,t)}destroy(){super.destroy(),this.fbo&&(this.fbo.destroy(),this.srcLDRTex.destroy(),this.srcCDMTex.destroy()),this.unpackHDRShader&&this.unpackHDRShader.destroy(),this.shaderBinding&&this.shaderBinding.destroy(),"loaded"in this.listenerIDs&&this.hdrImage.removeListenerById("loaded",this.listenerIDs.loaded),this.hdrImage.removeListenerById("updated",this.listenerIDs.updated)}}var Us=`
precision highp float;
#define GLSLIFY 1

varying vec2 v_texCoord;

import 'GLSLUtils.glsl'
import 'Hammersley.glsl'
import 'ImportanceSampleGGX.glsl'

float GeometrySchlickGGX(float NdotV, float roughness)
{
  float a = roughness;
  float k = (a * a) / 2.0;

  float nom   = NdotV;
  float denom = NdotV * (1.0 - k) + k;

  return nom / denom;
}
// ----------------------------------------------------------------------------
float GeometrySmith(vec3 N, vec3 V, vec3 L, float roughness)
{
  float NdotV = max(dot(N, V), 0.0);
  float NdotL = max(dot(N, L), 0.0);
  float ggx2 = GeometrySchlickGGX(NdotV, roughness);
  float ggx1 = GeometrySchlickGGX(NdotL, roughness);

  return ggx1 * ggx2;
}

vec2 IntegrateBRDF(float NdotV, float roughness)
{
  vec3 V;
  V.x = sqrt(1.0 - NdotV*NdotV);
  V.y = 0.0;
  V.z = NdotV;

  float A = 0.0;
  float B = 0.0;

  vec3 N = vec3(0.0, 0.0, 1.0);

  for(uint i = 0u; i < SAMPLE_COUNT; ++i)
  {
    vec2 Xi = Hammersley(i, SAMPLE_COUNT);
    vec3 H  = ImportanceSampleGGX(Xi, N, roughness);
    vec3 L  = normalize(2.0 * dot(V, H) * H - V);

    float NdotL = max(L.z, 0.0);
    float NdotH = max(H.z, 0.0);
    float VdotH = max(dot(V, H), 0.0);

    if (NdotL > 0.0)
    {
      float G = GeometrySmith(N, V, L, roughness);
      float G_Vis = (G * VdotH) / (NdotH * NdotV);
      float Fc = pow(1.0 - VdotH, 5.0);

      A += (1.0 - Fc) * G_Vis;
      B += Fc * G_Vis;
    }
  }
  A /= float(SAMPLE_COUNT);
  B /= float(SAMPLE_COUNT);
  return vec2(A, B);
}

out vec2 fragColor;
void main(void) {
  vec2 integratedBRDF = IntegrateBRDF(v_texCoord.x, v_texCoord.y);
  fragColor = integratedBRDF;
}

`,ds=`
precision highp float;
#define GLSLIFY 1

import 'quadVertexFromID.glsl'

/* VS Outputs */
varying vec2 v_texCoord;
 
void main()
{
  vec2 position = getQuadVertexPositionFromID();
  v_texCoord = position+0.5;
  gl_Position = vec4(position*2.0, 0.0, 1.0);
}
`;class ss extends Pe{constructor(e){super(e,"PreComputeBRDFShader");this.setShaderStage("VERTEX_SHADER",ds),this.setShaderStage("FRAGMENT_SHADER",Us)}}var os=`
precision highp float;
#define GLSLIFY 1
import 'constants.glsl'
import 'convolve-helpers.glsl'

uniform float roughness;
uniform int faceId;
varying vec2 v_texCoord;

out vec4 fragColor;
void main(void) {

  vec3 N = cubeFaceUvToDir(v_texCoord.x, v_texCoord.y, faceId);   

  vec3 irradiance = vec3(0.0);

  vec3 up        = abs(N.z) < 0.999 ? vec3(0.0, 0.0, 1.0) : vec3(1.0, 0.0, 0.0);
  vec3 tangent   = normalize(cross(up, N));
  vec3 bitangent = cross(N, tangent);

  float nrSamples = 0.0; 
  for(float phi = 0.0; phi < 2.0 * PI; phi += SAMPLE_DELTA)
  {
    for(float theta = 0.0; theta < 0.5 * PI; theta += SAMPLE_DELTA)
    {
      // spherical to cartesian (in tangent space)
      // from spherical coordinates to cartesian coordinates
      vec3 H = vec3(cos(phi) * sin(theta), sin(phi) * sin(theta), cos(theta));
      // tangent space to world
      vec3 sampleVec = tangent * H.x + bitangent * H.y + N * H.z;

      irradiance += sampleEnvMap(normalize(sampleVec)).rgb * cos(theta) * sin(theta);
      nrSamples++;
    }
  }
  irradiance = PI * irradiance * (1.0 / float(nrSamples));

  fragColor = vec4(irradiance, 1.0);
}
`,As=`
precision highp float;
#define GLSLIFY 1

import 'quadVertexFromID.glsl'

/* VS Outputs */
varying vec2 v_texCoord;
 
void main()
{
  vec2 position = getQuadVertexPositionFromID();
  v_texCoord = position+0.5;
  gl_Position = vec4(position*2.0, 0.0, 1.0);
}
`;class Bs extends Pe{constructor(e){super(e,"ConvolveIrradianceShader");this.setShaderStage("VERTEX_SHADER",As),this.setShaderStage("FRAGMENT_SHADER",os)}}var Qs=`
precision highp float;
#define GLSLIFY 1

import 'quadVertexFromID.glsl'

/* VS Outputs */
varying vec2 v_texCoord;
 
void main()
{
  vec2 position = getQuadVertexPositionFromID();
  v_texCoord = position+0.5;
  gl_Position = vec4(position*2.0, 0.0, 1.0);
}
`,Vs=`precision highp float;
#define GLSLIFY 1

import 'GLSLUtils.glsl'
import 'ImportanceSampleGGX.glsl'
import 'convolve-helpers.glsl'
import 'Hammersley.glsl'
  
  
uniform float roughness;
uniform int faceId;
varying vec2 v_texCoord;

out vec4 fragColor;
void main(void) {

  vec3 N = cubeFaceUvToDir(v_texCoord.x, v_texCoord.y, faceId);   

  vec3 R = N;
  vec3 V = R;

  float totalWeight = 0.0;   
  vec3 prefilteredColor = vec3(0.0);     
  for(uint i = 0u; i < SAMPLE_COUNT; ++i)
  {
    vec2 Xi = Hammersley(i, SAMPLE_COUNT);
    vec3 H  = ImportanceSampleGGX(Xi, N, roughness);
    vec3 L  = normalize(2.0 * dot(V, H) * H - V);

    float NdotL = max(dot(N, L), 0.0);
    if (NdotL > 0.0)
    {
      prefilteredColor += sampleEnvMap(L).rgb * NdotL;
      totalWeight      += NdotL;
    }
  }
  prefilteredColor = prefilteredColor / totalWeight;

  fragColor = vec4(prefilteredColor, 1.0);
}
`;class rs extends Pe{constructor(e){super(e,"ConvolveSpecularShader");this.setShaderStage("VERTEX_SHADER",Qs),this.setShaderStage("FRAGMENT_SHADER",Vs)}}class Rs extends Xe{constructor(e,g){super();this.__gl=e;const t=e;this.maxFragmentShaderTextureUnits=e.getParameter(this.__gl.MAX_TEXTURE_IMAGE_UNITS),t.__quadVertexIdsBuffer||t.setupInstancedQuad(),this.textureType=1,this.textureDesc=[0,0,0,0],this.__convolved=!1,this.__fbos=[]}convolveProbe(e){const g=this.__gl,t={};t.shaderopts={directives:["#define ENABLE_ES3","#define ENABLE_FLOAT_TEXTURES"]},_e.deviceCategory=="Low"?(t.shaderopts.directives.push("#define SAMPLE_DELTA 0.1"),t.shaderopts.directives.push("#define SAMPLE_COUNT 64u")):_e.deviceCategory=="Medium"?(t.shaderopts.directives.push("#define SAMPLE_DELTA 0.08"),t.shaderopts.directives.push("#define SAMPLE_COUNT 256u")):(t.shaderopts.directives.push("#define SAMPLE_DELTA 0.025"),t.shaderopts.directives.push("#define SAMPLE_COUNT 1024u")),this.brdfLUTTexture=g.createTexture(),g.bindTexture(g.TEXTURE_2D,this.brdfLUTTexture),g.texImage2D(g.TEXTURE_2D,0,g.RG16F,512,512,0,g.RG,g.FLOAT,null),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);const I=new ss(this.__gl),l=I.compileForTarget("GLProbe",t.shaderopts),C=og(this.__gl,l.attrs,g.__quadattrbuffers,g.__quadIndexBuffer),n=g.createFramebuffer();g.bindFramebuffer(g.DRAW_FRAMEBUFFER,n),g.framebufferTexture2D(g.DRAW_FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,this.brdfLUTTexture,0),I.bind(t),C.bind(t),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT),g.viewport(0,0,512,512),g.drawQuad(),g.bindFramebuffer(g.DRAW_FRAMEBUFFER,null),g.deleteFramebuffer(n),I.unbind(t),I.destroy();{const F=new Bs(this.__gl),a=F.compileForTarget("GLProbe",t.shaderopts),U=og(this.__gl,a.attrs,g.__quadattrbuffers,g.__quadIndexBuffer);F.bind(t,"GLProbe"),U.bind(t);const d=t.unifs;e.bindToUniform(t,d.envMap);const s=64;this.irradianceCubeTex=g.createTexture(),g.bindTexture(g.TEXTURE_CUBE_MAP,this.irradianceCubeTex),g.texParameteri(g.TEXTURE_CUBE_MAP,g.TEXTURE_MAG_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_CUBE_MAP,g.TEXTURE_MIN_FILTER,g.LINEAR_MIPMAP_LINEAR),g.texParameteri(g.TEXTURE_CUBE_MAP,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_CUBE_MAP,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_CUBE_MAP,g.TEXTURE_WRAP_R,g.CLAMP_TO_EDGE);for(let A=0;A<6;A++)g.texImage2D(g.TEXTURE_CUBE_MAP_POSITIVE_X+A,0,g.RGBA32F,s,s,0,g.RGBA,g.FLOAT,null);const o=g.createFramebuffer();g.bindFramebuffer(g.DRAW_FRAMEBUFFER,o);for(let A=0;A<6;++A)g.uniform1i(d.faceId.location,A),g.framebufferTexture2D(g.DRAW_FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_CUBE_MAP_POSITIVE_X+A,this.irradianceCubeTex,0),g.viewport(0,0,s,s),g.clearColor(1,0,0,1),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT),g.drawQuad();g.bindFramebuffer(g.DRAW_FRAMEBUFFER,null),g.deleteFramebuffer(o),g.generateMipmap(g.TEXTURE_CUBE_MAP)}{const F=new rs(this.__gl),a=F.compileForTarget("GLProbe",t.shaderopts),U=og(this.__gl,a.attrs,g.__quadattrbuffers,g.__quadIndexBuffer);F.bind(t,"GLProbe"),U.bind(t);const d=t.unifs;e.bindToUniform(t,d.envMap),this.specularCubetex=g.createTexture(),g.bindTexture(g.TEXTURE_CUBE_MAP,this.specularCubetex),g.texParameteri(g.TEXTURE_CUBE_MAP,g.TEXTURE_MAG_FILTER,g.LINEAR),g.texParameteri(g.TEXTURE_CUBE_MAP,g.TEXTURE_MIN_FILTER,g.LINEAR_MIPMAP_LINEAR),g.texParameteri(g.TEXTURE_CUBE_MAP,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_CUBE_MAP,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_CUBE_MAP,g.TEXTURE_WRAP_R,g.CLAMP_TO_EDGE);const s=256;for(let A=0;A<6;A++)g.texImage2D(g.TEXTURE_CUBE_MAP_POSITIVE_X+A,0,g.RGBA32F,s,s,0,g.RGBA,g.FLOAT,null);g.generateMipmap(g.TEXTURE_CUBE_MAP);const o=5;for(let A=0;A<o;++A){const B=s*Math.pow(.5,A),Q=s*Math.pow(.5,A),r=g.createFramebuffer();g.bindFramebuffer(g.DRAW_FRAMEBUFFER,r),g.viewport(0,0,B,Q);const R=A/(o-1);g.uniform1f(d.roughness.location,R);for(let V=0;V<6;++V)g.uniform1i(d.faceId.location,V),g.framebufferTexture2D(g.DRAW_FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_CUBE_MAP_POSITIVE_X+V,this.specularCubetex,A),g.drawQuad();g.bindFramebuffer(g.DRAW_FRAMEBUFFER,null),g.deleteFramebuffer(r)}F.destroy()}this.__convolved=!0}bind(e){const g=this.__gl,{irradianceMap:t,prefilterMap:I,brdfLUT:l,envMapFlags:C}=e.unifs;if(!this.__convolved)return t&&g.uniform1i(t.location,this.maxFragmentShaderTextureUnits-1),I&&g.uniform1i(I.location,this.maxFragmentShaderTextureUnits-1),C&&g.uniform1i(C.location,-1),!1;if(l){const n=e.boundTextures++;g.activeTexture(this.__gl.TEXTURE0+n),g.bindTexture(g.TEXTURE_2D,this.brdfLUTTexture),g.uniform1i(l.location,n)}if(t){const n=e.boundTextures++,F=this.__gl.TEXTURE0+n;g.activeTexture(F),g.bindTexture(g.TEXTURE_CUBE_MAP,this.irradianceCubeTex),g.uniform1i(t.location,n)}if(I){const n=e.boundTextures++,F=this.__gl.TEXTURE0+n;g.activeTexture(F),g.bindTexture(g.TEXTURE_CUBE_MAP,this.specularCubetex),g.uniform1i(I.location,n)}return C&&g.uniform1i(C.location,0),!0}destroy(){}}var hs=`
precision highp float;
#define GLSLIFY 1

import 'GLSLUtils.glsl'
import 'gamma.glsl'
import 'constants.glsl'

uniform float focus;
uniform float exposure;

/* VS Outputs */
varying vec3 v_worldDir;
varying vec2 v_texCoord;

#define ENABLE_INLINE_GAMMACORRECTION

#define ENV_MAP_LATLONG 0
#define ENV_MAP_OCT 1
#define ENV_MAP_CUBE 2
#define ENV_MAP_irradianceMap 8
#define ENV_MAP_prefilterMap 3
#define ENV_MAP_STEREO_LATLONG 4
#define ENV_MAP_DUALFISHEYE 5
#define ENV_MAP_SH 6
#define ENV_MAP_BRDF_LUT 7

#define ENV_MAPTYPE ENV_MAP_OCT

#if (ENV_MAPTYPE == ENV_MAP_LATLONG)  

import 'envmap-equirect.glsl'

uniform sampler2D backgroundImage;

vec4 sampleEnvMap(vec3 dir) {
  vec2 uv = latLongUVsFromDir(normalize(dir));
  vec4 texel = texture2D(backgroundImage, uv) * exposure;
  return vec4(texel.rgb/texel.a, 1.0);
}

#elif (ENV_MAPTYPE == ENV_MAP_OCT)  

import 'envmap-octahedral.glsl'

uniform sampler2D   envMap;

vec4 sampleEnvMap(vec3 dir) {
  vec2 uv = dirToSphOctUv(normalize(dir));
  if (false) {
    vec4 texel = texture2D(envMap, uv);
    return vec4(texel.rgb/texel.a, 1.0);
  }
  else {
    return texture2D(envMap, uv) * exposure;
  }
}

#elif (ENV_MAPTYPE == ENV_MAP_CUBE)

uniform samplerCube cubeMap;

vec4 sampleEnvMap(vec3 dir) {
  return texture(cubeMap, dir, 0.0);// * exposure;
  // return textureLod(cubeMap, dir, exposure);
}

#elif (ENV_MAPTYPE == ENV_MAP_irradianceMap)

uniform samplerCube irradianceMap;

vec4 sampleEnvMap(vec3 dir) {
  return textureLod(irradianceMap, dir, exposure);
}

#elif (ENV_MAPTYPE == ENV_MAP_prefilterMap)

uniform samplerCube prefilterMap;

vec4 sampleEnvMap(vec3 dir) {
  return textureLod(prefilterMap, dir, exposure);
}

#elif (ENV_MAPTYPE == ENV_MAP_STEREO_LATLONG)  

import 'envmap-equirect.glsl'
uniform int eye;// L = 0, R = 1;
uniform sampler2D backgroundImage;

vec4 sampleEnvMap(vec3 dir) {
  vec2 uv = latLongUVsFromDir(normalize(v_worldDir));
  uv.y *= 0.5;
  if (eye == 1) {
    uv.y += 0.5;
  }
  vec4 texel = texture2D(backgroundImage, uv) * exposure;
  fragColor = vec4(texel.rgb/texel.a, 1.0);
}

#elif (ENV_MAPTYPE == ENV_MAP_DUALFISHEYE)

import 'envmap-dualfisheye.glsl'

vec4 sampleEnvMap(vec3 dir) {
  vec2 uv = dualfisheyeUVsFromDir(dir);
  return texture2D(backgroundImage, uv) * exposure;
}

#elif (ENV_MAPTYPE == ENV_MAP_SH)

import 'SHCoeffs.glsl'

vec4 sampleEnvMap(vec3 dir) {
	return vec4(sampleSHCoeffs(dir) * exposure, 1.0);
}

#elif (ENV_MAPTYPE == ENV_MAP_BRDF_LUT)

uniform sampler2D brdfLUT;

vec4 sampleEnvMap(vec3 dir) {
  return texture2D(brdfLUT, v_texCoord);
}
#endif

#ifdef ENABLE_ES3
  out vec4 fragColor;
#endif

void main(void) {
#ifndef ENABLE_ES3
  vec4 fragColor;
#endif

  fragColor = sampleEnvMap(normalize(v_worldDir));

#ifdef ENABLE_INLINE_GAMMACORRECTION
  fragColor.rgb = toGamma(fragColor.rgb);
#endif

#ifndef ENABLE_ES3
  gl_FragColor = fragColor;
#endif
}
`,cs=`
precision highp float;
#define GLSLIFY 1

import 'quadVertexFromID.glsl'

uniform mat4 projectionMatrix;
uniform mat4 viewMatrix;

import 'inverse.glsl'
import 'transpose.glsl'

/* VS Outputs */
varying vec3 v_worldDir;
varying vec2 v_texCoord;
 
void main()
{
  vec2 position = getQuadVertexPositionFromID() * 2.0;
  v_texCoord = position * 0.5 + 0.5;

  mat4 inverseProjection = inverse(projectionMatrix);
  mat3 inverseModelview = transpose(mat3(viewMatrix));

  // transform from the normalized device coordinates back to the view space
  vec3 unprojected = (inverseProjection * vec4(position, 0, 1)).xyz;

  // transfrom from the view space back to the world space
  // and use it as a sampling vector
  v_worldDir = inverseModelview * unprojected;

  gl_Position = vec4(position, 0, 1);
}
`;class ka extends Pe{constructor(e){super(e,"EnvMapShader");this.setShaderStage("VERTEX_SHADER",cs),this.setShaderStage("FRAGMENT_SHADER",hs)}}class Zs extends Rs{constructor(e,g){super(e.gl,"EnvMap");this.__srcGLTex=null,this.__envMapShader=null,this.__envMapShaderBinding=null,this.__renderer=e,this.__envMap=g,this.__backgroundFocus=0,this.__envMap.isLoaded()?this.init():this.__envMap.once("loaded",t=>{this.init()})}init(){const e=this.__renderer.gl;e.__quadVertexIdsBuffer||e.setupInstancedQuad(),this.__srcGLTex=new DI(e,this.__envMap),this.__envMapShader=new ka(e);const g=this.__envMapShader.compileForTarget("GLEnvMap",{directives:["#define ENABLE_ES3"]});this.__envMapShaderBinding=og(e,g.attrs,e.__quadattrbuffers,e.__quadIndexBuffer);const t=this.__envMap.headlightModeParam,I=()=>{t.value?this.textureDesc[3]|=1:this.textureDesc[3]&=-2};I(),t.on("valueChanged",()=>{I(),this.emit("updated")}),this.convolveProbe(this.__srcGLTex),this.emit("updated")}getEnvMap(){return this.__envMap}getBackgroundFocus(){return this.__backgroundFocus}setBackgroundFocus(e){this.__backgroundFocus=e,this.__renderer.requestRedraw()}draw(e){if(this.__envMap.isLoaded()){const g=this.__gl;{this.__envMapShader.bind(e,"GLEnvMap");const t=e.unifs,{envMap:I,focus:l,exposure:C}=e.unifs;I&&this.__srcGLTex.bindToUniform(e,I),l&&g.uniform1f(l.location,this.__backgroundFocus),C&&g.uniform1f(C.location,e.exposure),this.__envMapShaderBinding.bind(e),g.depthMask(!1),e.bindViewports(t,()=>{g.drawQuad()})}}}destroy(){super.destroy(),this.__srcGLTex&&this.__srcGLTex.destroy()}}function cl(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var gl=typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{},ms=typeof gl=="object"&&gl&&gl.Object===Object&&gl,Ws=ms,bs=typeof self=="object"&&self&&self.Object===Object&&self,Js=Ws||bs||Function("return this")(),fa=Js,Gs=function(){return fa.Date.now()},VC=Gs,us=/\s/;function Ss(i){for(var e=i.length;e--&&us.test(i.charAt(e)););return e}var Ns=/^\s+/;function ps(i){return i&&i.slice(0,Ss(i)+1).replace(Ns,"")}var ys=fa.Symbol,Zl=ys,Ea=Object.prototype,Xs=Ea.hasOwnProperty,ks=Ea.toString,CI=Zl?Zl.toStringTag:void 0;function fs(i){var e=Xs.call(i,CI),g=i[CI];try{i[CI]=void 0;var t=!0}catch{}var I=ks.call(i);return t&&(e?i[CI]=g:delete i[CI]),I}var Es=Object.prototype,Ts=Es.toString;function Ys(i){return Ts.call(i)}var vs="[object Null]",Ms="[object Undefined]",An=Zl?Zl.toStringTag:void 0;function Hs(i){return i==null?i===void 0?Ms:vs:An&&An in Object(i)?fs(i):Ys(i)}function xs(i){return i!=null&&typeof i=="object"}var ws="[object Symbol]";function Ds(i){return typeof i=="symbol"||xs(i)&&Hs(i)==ws}var Bn=0/0,Ks=/^[-+]0x[0-9a-f]+$/i,Ls=/^0b[01]+$/i,zs=/^0o[0-7]+$/i,_s=parseInt;function Qn(i){if(typeof i=="number")return i;if(Ds(i))return Bn;if(cl(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=cl(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=ps(i);var g=Ls.test(i);return g||zs.test(i)?_s(i.slice(2),g?2:8):Ks.test(i)?Bn:+i}var Os="Expected a function",Ps=Math.max,js=Math.min;function qs(i,e,g){var t,I,l,C,n,F,a=0,U=!1,d=!1,s=!0;if(typeof i!="function")throw new TypeError(Os);e=Qn(e)||0,cl(g)&&(U=!!g.leading,d="maxWait"in g,l=d?Ps(Qn(g.maxWait)||0,e):l,s="trailing"in g?!!g.trailing:s);function o(Z){var c=t,W=I;return t=I=void 0,a=Z,C=i.apply(W,c),C}function A(Z){return a=Z,n=setTimeout(r,e),U?o(Z):C}function B(Z){var c=Z-F,W=Z-a,u=e-c;return d?js(u,l-W):u}function Q(Z){var c=Z-F,W=Z-a;return F===void 0||c>=e||c<0||d&&W>=l}function r(){var Z=VC();if(Q(Z))return R(Z);n=setTimeout(r,B(Z))}function R(Z){return n=void 0,s&&t?o(Z):(t=I=void 0,C)}function V(){n!==void 0&&clearTimeout(n),a=0,t=F=I=n=void 0}function h(){return n===void 0?C:R(VC())}function m(){var Z=VC(),c=Q(Z);if(t=arguments,I=this,F=Z,c){if(n===void 0)return A(F);if(d)return clearTimeout(n),n=setTimeout(r,e),o(F)}return n===void 0&&(n=setTimeout(r,e)),C}return m.cancel=V,m.flush=h,m}var $s="Expected a function";function eo(i,e,g){var t=!0,I=!0;if(typeof i!="function")throw new TypeError($s);return cl(g)&&(t="leading"in g?!!g.leading:t,I="trailing"in g?!!g.trailing:I),qs(i,e,{leading:t,maxWait:e,trailing:I})}var go=`
precision highp float;
#define GLSLIFY 1

uniform sampler2D image;

varying vec2 v_texCoord;

#ifdef ENABLE_ES3
  out vec4 fragColor;
#endif
void main(void) {
#ifndef ENABLE_ES3
  vec4 fragColor;
#endif
  fragColor = texture2D(image, v_texCoord);

#ifndef ENABLE_ES3
  gl_FragColor = fragColor;
#endif
}
`,to=`
precision highp float;
#define GLSLIFY 1

import 'quadVertexFromID.glsl'

uniform vec2 pos;
uniform vec2 size;

/* VS Outputs */
varying vec2 v_texCoord;
 
void main()
{
  vec2 position = getQuadVertexPositionFromID();
  v_texCoord = position+0.5;
  gl_Position = vec4(vec2(-1.0, -1.0) + (pos * 2.0) + (v_texCoord * abs(size) * 2.0), 0.0, 1.0);
  if (size.x < 0.0)
    v_texCoord.x = 1.0 - v_texCoord.x;
  if (size.y < 0.0)
    v_texCoord.y = 1.0 - v_texCoord.y;
}
`;class Io extends Pe{constructor(e){super(e,"ScreenQuadShader");this.setShaderStage("VERTEX_SHADER",to),this.setShaderStage("FRAGMENT_SHADER",go)}}class lo{constructor(e,g){this.__gl=e,this.__pos=[0,0],this.__size=[1,1],this.flipY=!0,this.__glshader=new Io(e),e.__quadVertexIdsBuffer||e.setupInstancedQuad();const t=this.__glshader.compileForTarget("GLScreenQuad",g);this.__quadBinding=og(this.__gl,t.attrs,e.__quadattrbuffers,e.__quadIndexBuffer),this.ready=!0}bind(e,g,t,I){const l=e.unifs;g&&g.bindToUniform(e,e.unifs.image);const C=this.__gl;{const n=l.pos;if(n){let F=t?t instanceof f?t.asArray():t:this.__pos;C.uniform2fv(n.location,F)}}{const n=l.size;if(n){let F=I?I instanceof f?I.asArray():I:this.__size;C.uniform2fv(n.location,F)}}this.__quadBinding.bind(e)}bindShader(e){return this.__glshader.bind(e,"GLScreenQuad")}draw(e,g,t,I){this.bind(e,g,t,I);const l=this.__gl;l.drawElements(l.TRIANGLES,6,l.UNSIGNED_SHORT,0)}}class Vi extends Va{constructor(e,g){super();this.genBufferOpts={},this.__indexBuffer=null,this.__gl=e,this.__geom=g,this.__glattrbuffers={},this.__shaderBindings={},this.buffersDirty=!0;const t=l=>{this.dirtyBuffers(l)};this.__geom.on("geomDataChanged",t);const I=l=>{this.clearBuffers(),this.dirtyBuffers(l)};this.__geom.on("geomDataTopologyChanged",I)}getGeom(){return this.__geom}dirtyBuffers(e){this.genBufferOpts=e,this.buffersDirty=!0,this.emit("updated")}genBuffers(e){}updateBuffers(e){this.genBuffers(e),this.buffersDirty=!1}bind(e){if(this.__destroyed)throw new Error("Error binding a destroyed geom");this.buffersDirty&&this.updateBuffers();let g=this.__shaderBindings[e.shaderkey];if(!g){const t=this.__gl;g=og(t,e.attrs,this.__glattrbuffers,this.__indexBuffer),this.__shaderBindings[e.shaderkey]=g}g.bind(e)}unbind(e){const g=this.__shaderBindings[e.shaderkey];g&&g.unbind(e)}draw(e){throw new Error("Not implemented. Implement this method in a derived class.")}drawInstanced(e,g){throw new Error("Not implemented. Implement this method in a derived class.")}bindAndDraw(e){this.bind(e),this.draw(e)}clearBuffers(){const e=this.__gl;for(const g in this.__glattrbuffers){const t=this.__glattrbuffers[g];t.shared||e.deleteBuffer(t.buffer)}this.__glattrbuffers={};for(const g in this.__shaderBindings)this.__shaderBindings[g].destroy();this.__shaderBindings={}}destroy(){this.__geom.deleteMetadata("glgeom"),this.clearBuffers(),this.__destroyed=!0,this.emit("destructing")}}class ql extends Vi{constructor(e,g){super(e,g);this.__numTriIndices=0,this.__indexDataType=0,this.__numVertices=0,this.__numTriangles=0,this.__numRenderVerts=0}genBuffers(){super.genBuffers();const e=this.__gl,g=this.__geom.genBuffers(),t=g.indices;this.__numTriIndices=g.indices.length,t instanceof Uint8Array&&(this.__indexDataType=this.__gl.UNSIGNED_BYTE),t instanceof Uint16Array&&(this.__indexDataType=this.__gl.UNSIGNED_SHORT),t instanceof Uint32Array&&(this.__indexDataType=this.__gl.UNSIGNED_INT),this.__numVertices=this.__geom.getNumVertices(),this.__numTriangles=t.length/3,this.__numRenderVerts=g.numRenderVerts,this.__indexBuffer&&e.deleteBuffer(this.__indexBuffer),this.__indexBuffer=e.createBuffer(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.__indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,g.indices,e.STATIC_DRAW);for(const I in g.attrBuffers){const l=g.attrBuffers[I];this.__glattrbuffers[I]&&this.__glattrbuffers[I].buffer&&e.deleteBuffer(this.__glattrbuffers[I].buffer);const C=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,C),e.bufferData(e.ARRAY_BUFFER,l.values,e.STATIC_DRAW),this.__glattrbuffers[I]={buffer:C,dataType:l.dataType,normalized:l.normalized},I=="textureCoords"&&(this.__glattrbuffers.texCoords=this.__glattrbuffers.textureCoords)}}updateBuffers(e){const g=this.__gl;if(this.__numVertices!=this.__geom.getNumVertices()){this.genBuffers();return}const t=this.__geom.genBuffers({includeIndices:!1});for(const I in t.attrBuffers){const l=t.attrBuffers[I],C=this.__glattrbuffers[I];g.bindBuffer(g.ARRAY_BUFFER,C.buffer),g.bufferData(g.ARRAY_BUFFER,l.values,g.STATIC_DRAW)}this.buffersDirty=!1}clearBuffers(){this.__gl.deleteBuffer(this.__indexBuffer),this.__indexBuffer=null,super.clearBuffers()}draw(e){this.__gl.drawElements(this.__gl.TRIANGLES,this.__numTriIndices,this.__indexDataType,0)}drawInstanced(e,g){this.__gl.drawElementsInstanced(this.__gl.TRIANGLES,this.__numTriIndices,this.__indexDataType,0,g)}destroy(){super.destroy(),this.__gl.deleteBuffer(this.__indexBuffer),this.__indexBuffer=null}}const lg={MSAA_RENDERBUFFER:0,COLORBUFFER:1,DEPTHBUFFER:2};class Ta extends xt{constructor(e){super();this.__fbo=null,this.offscreenBuffer=null,this.depthTexture=null,this.__backgroundTexture=null,this.__backgroundGLTexture=null,this.offscreenBufferFbo=null,this.__width=0,this.__height=0,this.__canvasWidth=0,this.__canvasHeight=0,this.fb=null,this.depthBuffer=null,this.EXT_frag_depth=null,this.depthRange=[0,0],this.backgroundColorParam=new Fg("BackgroundColor",new E("#eeeeee")),this.doubleClickTimeParam=new k("DoubleClickTimeMS",200),this.renderer=e,this.__renderer=e,this.addParameter(this.doubleClickTimeParam);const g=this.__renderer.gl;this.__gl=g,this.quad=new ql(g,new Dt(1,1)),g.name=="webgl2"&&(this.offscreenBuffer=new Te(g,{type:"UNSIGNED_BYTE",format:"RGBA",filter:"LINEAR",width:4,height:4}),this.depthTexture=new Te(g,{type:g.UNSIGNED_INT_24_8,format:g.DEPTH_STENCIL,internalFormat:g.name=="webgl2"?g.DEPTH24_STENCIL8:g.DEPTH_COMPONENT,filter:g.NEAREST,wrap:g.CLAMP_TO_EDGE,width:4,height:4})),this.highlightedGeomsBuffer=new Te(g,{type:"UNSIGNED_BYTE",format:"RGBA",filter:"NEAREST",width:4,height:4}),this.highlightedGeomsBufferFbo=new Bi(g,this.highlightedGeomsBuffer,!0),this.highlightedGeomsBufferFbo.setClearColor(new E(0,0,0,0));const t=()=>{const I=this.backgroundColorParam.value;I instanceof ug?I instanceof ni?(this.__backgroundTexture=I,this.__backgroundGLTexture=new DI(g,I)):(this.__backgroundTexture=I,this.__backgroundGLTexture=new Te(g,I)):I instanceof E?(this.__backgroundGLTexture&&(this.__backgroundGLTexture.destroy(),this.__backgroundGLTexture=null,this.__backgroundTexture=null),this.offscreenBufferFbo&&this.offscreenBufferFbo.setClearColor(new E(I.asArray()))):console.warn("Invalid background:"+I),this.emit("updated")};t(),this.backgroundColorParam.on("valueChanged",t)}getRenderer(){return this.renderer}getWidth(){return this.__width}getHeight(){return this.__height}resize(e,g){if(this.__canvasWidth==e&&this.__canvasHeight==g)return;this.__canvasWidth=e,this.__canvasHeight=g,this.__width=e,this.__height=g,this.resizeRenderTargets(e,g);const t=new Hg(this.__width,this.__height);this.emit("resized",t)}resizeRenderTargets(e,g){const t=this.__renderer.gl;if(this.renderer.outlineThickness>0&&t.name=="webgl2"){this.fb&&(t.deleteFramebuffer(this.fb[lg.MSAA_RENDERBUFFER]),t.deleteFramebuffer(this.fb[lg.COLORBUFFER]),t.deleteFramebuffer(this.fb[lg.DEPTHBUFFER]),this.colorRenderbuffer&&t.deleteRenderbuffer(this.colorRenderbuffer),this.depthBuffer&&t.deleteRenderbuffer(this.depthBuffer)),this.offscreenBuffer.resize(e,g),this.depthTexture.resize(e,g),this.fb=[],this.fb[lg.MSAA_RENDERBUFFER]=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.fb[lg.MSAA_RENDERBUFFER]),this.colorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.colorRenderbuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,4,t.RGBA8,e,g),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,this.colorRenderbuffer),this.depthBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.depthBuffer),t.renderbufferStorageMultisample(t.RENDERBUFFER,4,t.DEPTH24_STENCIL8,e,g),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,this.depthBuffer),this.fb[lg.COLORBUFFER]=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.fb[lg.COLORBUFFER]),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.offscreenBuffer.glTex,0),t.bindFramebuffer(t.FRAMEBUFFER,null),this.fb[lg.DEPTHBUFFER]=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.fb[lg.DEPTHBUFFER]),t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,this.depthTexture.glTex,0),t.bindFramebuffer(t.FRAMEBUFFER,null);const I=t.checkFramebufferStatus(t.name=="webgl2"?t.DRAW_FRAMEBUFFER:t.FRAMEBUFFER);if(I!==t.FRAMEBUFFER_COMPLETE)switch(I){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:throw new Error("The attachment types are mismatched or not all framebuffer attachment points are framebuffer attachment complete.");case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:throw new Error("There is no attachment.");case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:throw new Error("Height and width of the attachment are not the same.");case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:throw new Error("The format of the attachment is not supported or if depth and stencil attachments are not the same renderbuffer.");case 36061:throw new Error("The framebuffer is unsupported");default:throw new Error("Incomplete Frambuffer")}}this.highlightedGeomsBuffer&&this.highlightedGeomsBuffer.resize(e,g)}draw(e){const g=this.__renderer.gl,t=e.boundRendertarget;if(this.renderer.outlineThickness>0&&g.name=="webgl2"){this.fb||this.resizeRenderTargets(this.__width,this.__height);const l=this.fb[lg.MSAA_RENDERBUFFER];g.bindFramebuffer(g.name=="webgl2"?g.DRAW_FRAMEBUFFER:g.FRAMEBUFFER,l),e.boundRendertarget=l}else e.boundRendertarget||g.bindFramebuffer(g.FRAMEBUFFER,null);g.viewport(0,0,this.__width,this.__height);const I=this.backgroundColorParam.value.asArray();if(g.clearColor(I[0],I[1],I[2],I[3]),g.colorMask(!0,!0,!0,!1),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT),g.enable(g.DEPTH_TEST),this.__renderer.drawScene(e),this.drawHighlights(e),this.fb&&g.name=="webgl2"){const l=g;l.bindFramebuffer(l.READ_FRAMEBUFFER,this.fb[lg.MSAA_RENDERBUFFER]),l.bindFramebuffer(l.DRAW_FRAMEBUFFER,this.fb[lg.COLORBUFFER]),l.clearBufferfv(l.COLOR,0,[0,0,0,0]),l.blitFramebuffer(0,0,this.__width,this.__height,0,0,this.__width,this.__height,l.COLOR_BUFFER_BIT,l.LINEAR),g.bindFramebuffer(g.DRAW_FRAMEBUFFER,t),e.boundRendertarget=t,g.viewport(0,0,this.__width,this.__height),g.disable(g.DEPTH_TEST);const C=this.__renderer.screenQuad;C.bindShader(e),C.draw(e,this.offscreenBuffer)}this.renderer.emit("redrawOccurred")}drawSilhouettes(e){const g=this.__renderer.gl;if(this.renderer.outlineThickness==0||g.name!="webgl2"||!this.fb)return;const t=g;if(t.bindFramebuffer(t.READ_FRAMEBUFFER,this.fb[lg.MSAA_RENDERBUFFER]),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,this.fb[lg.DEPTHBUFFER]),t.clearBufferfv(t.COLOR,0,[1,1,1,1]),t.blitFramebuffer(0,0,this.__width,this.__height,0,0,this.__width,this.__height,t.DEPTH_BUFFER_BIT,t.NEAREST),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,this.fb[lg.MSAA_RENDERBUFFER]),e.boundRendertarget=this.fb[lg.MSAA_RENDERBUFFER],t.viewport(0,0,this.__width,this.__height),this.renderer.outlineThickness==0)return;t.enable(t.BLEND),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA),t.disable(t.DEPTH_TEST),t.depthMask(!1),this.renderer.silhouetteShader.bind(e);const I=e.unifs;this.depthTexture.bindToUniform(e,I.depthTexture),t.uniform2f(I.screenSize.location,this.__width,this.__height),t.uniform1f(I.outlineThickness.location,this.renderer.outlineThickness);const l=this.renderer.outlineColor.asArray();t.uniform4f(I.outlineColor.location,l[0],l[1],l[2],l[3]),t.uniform1f(I.outlineSensitivity.location,this.renderer.outlineSensitivity),t.uniform1f(I.outlineDepthBias.location,this.renderer.outlineDepthBias),t.uniform2f(I.depthRange.location,this.depthRange[0],this.depthRange[1]),this.quad.bindAndDraw(e),t.enable(t.DEPTH_TEST),t.depthMask(!0)}drawHighlights(e){if(this.highlightedGeomsBufferFbo){const g=this.__renderer.gl;this.highlightedGeomsBufferFbo.bindForWriting(e),this.highlightedGeomsBufferFbo.clear(),g.disable(g.CULL_FACE),g.disable(g.BLEND),g.enable(g.DEPTH_TEST),g.depthFunc(g.LESS),g.depthMask(!0),e.glShader=null,this.__renderer.drawHighlightedGeoms(e),this.highlightedGeomsBufferFbo.unbindForWriting(e),g.viewport(0,0,this.__width,this.__height);{this.renderer.highlightsShader.bind(e),g.enable(g.BLEND),g.blendEquation(g.FUNC_ADD),g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA);const t=e.unifs;g.uniform1f(t.outlineThickness.location,this.renderer.highlightOutlineThickness),this.highlightedGeomsBuffer.bindToUniform(e,t.highlightDataTexture),g.uniform2f(t.highlightDataTextureSize.location,e.region[2],e.region[3]),this.quad.bindAndDraw(e),g.disable(g.BLEND)}g.enable(g.CULL_FACE)}}getManipulator(){return this.manipulator}setManipulator(e){this.manipulator!=e&&(this.manipulator&&this.manipulator.deactivateTool&&this.manipulator.deactivateTool(),this.manipulator=e,this.manipulator.activateTool&&this.manipulator.activateTool())}onPointerDown(e){console.warn("@GLBaseViewport#onPointerDown - Implement me!")}onPointerUp(e){console.warn("@GLBaseViewport#onPointerUp - Implement me!")}onPointerMove(e){console.warn("@GLBaseViewport#onPointerMove - Implement me!")}onPointerEnter(e){console.warn("@GLBaseViewport#onPointerEnter - Implement me!")}onPointerLeave(e){console.warn("@GLBaseViewport#onPointerLeave - Implement me!")}onMouseLeave(e){}onKeyDown(e){}onKeyUp(e){}}class Co extends Ta{constructor(e,g,t,I){super(e);this.__geomDataBufferSizeFactor=1,this.debugGeomDataBuffer=!1,this.debugOcclusionBuffer=!1,this.debugReductionBuffer=!1,this.debugHighlightedGeomsBuffer=!1,this.__x=0,this.__y=0,this.region=[0,0,0,0],this.__cameraXfo=new v,this.__cameraMat=new Ee,this.__viewMat=new Ee,this.__geomDataBufferInvalid=!0,this.__screenPos=null,this.__name=g,this.__projectionMatrix=new Ee,this.__frustumDim=new f,this.__bl=new f(0,0),this.__tr=new f(1,1),this.__prevDownTime=0;const l=this.__renderer.gl;this.__geomDataBuffer=new Te(l,{type:e.floatGeomBuffer?"FLOAT":"UNSIGNED_BYTE",format:"RGBA",filter:"NEAREST",width:t<=1?1:Math.floor(t/this.__geomDataBufferSizeFactor),height:I<=1?1:Math.floor(I/this.__geomDataBufferSizeFactor)}),this.__geomDataBufferFbo=new Bi(l,this.__geomDataBuffer,!0),this.__geomDataBufferFbo.setClearColor(new E(0,0,0,0)),this.__camera=new Ja("DefaultCamera"),this.setCamera(this.__camera),this.setManipulator(new Jd({renderer:e})),this.resize(t,I)}getBl(){return this.__bl}setBl(e){this.__bl.x=e,this.__bl.y=e,this.resize(this.__canvasWidth,this.__canvasHeight)}getTr(){return this.__tr}setTr(e){this.__tr.x=e,this.__tr.y=e,this.resize(this.__canvasWidth,this.__canvasHeight)}getPosX(){return this.__x}getPosY(){return this.__y}resize(e,g){if(this.__canvasWidth==e&&this.__canvasHeight==g)return;this.__canvasWidth=e,this.__canvasHeight=g,this.__x=e*this.__bl.x,this.__y=e*this.__bl.y,this.__width=e*this.__tr.x-e*this.__bl.x,this.__height=g*this.__tr.y-g*this.__bl.y,this.region=[this.__x,this.__y,this.__width,this.__height],this.__camera&&this.__updateProjectionMatrix(),this.resizeRenderTargets(this.__width,this.__height);const t=new Hg(this.__width,this.__height);this.emit("resized",t)}resizeRenderTargets(e,g){super.resizeRenderTargets(e,g),this.__geomDataBufferFbo&&(this.__geomDataBuffer.resize(Math.floor(this.__width/this.__geomDataBufferSizeFactor),Math.floor(this.__height/this.__geomDataBufferSizeFactor)),this.renderGeomDataFbo())}getCamera(){return this.__camera}setCamera(e){this.__camera=e,this.depthRange=[this.__camera.getNear(),this.__camera.getFar()];const g=e.globalXfoParam,t=()=>{this.__cameraXfo=g.value,this.__cameraMat=this.__cameraXfo.toMat4(),this.__viewMat=this.__cameraMat.inverse()};t(),g.on("valueChanged",()=>{t(),this.invalidateGeomDataBuffer(),this.emit("updated");const I=new zC("CameraAndPointer",this.__cameraXfo);this.emit("viewChanged",I)}),this.__camera.on("projectionParamChanged",()=>{this.__updateProjectionMatrix(),this.depthRange=[this.__camera.getNear(),this.__camera.getFar()],this.emit("updated")}),this.__updateProjectionMatrix()}__updateProjectionMatrix(){const e=this.__width/this.__height;this.__camera.updateProjectionMatrix(this.__projectionMatrix,e);const g=Math.tan(this.__camera.getFov()/2)*this.__camera.getNear()*2,t=g*e;this.__frustumDim.set(t,g)}getProjectionMatrix(){return this.__projectionMatrix}getViewMatrix(){return this.__viewMat}frameView(e){this.__width>0&&this.__height>0?this.__camera.frameView(this,e):this.once("resized",()=>this.frameView())}calcScreenPosFromWorldPos(e){const t=this.__projectionMatrix.multiply(this.__viewMat).transformVec4(new Be(e.x,e.y,e.z,1));return t.x/=t.w,t.y/=t.w,new f((t.x*.5+.5)*this.__width,(t.y*-.5+.5)*this.__height)}calcRayFromScreenPos(e){const g=this.__canvasHeight*(1-this.__tr.y);let t=(e.x-this.__x)/this.__width,I=(e.y-g)/this.__height;t=t*2-1,I=I*2-1;const l=this.__cameraMat,C=this.__projectionMatrix.inverse();if(C==null)return console.warn(`Unable to generate Ray from screen pos:${e.toString()} in region ${this.region}`),new Ag;let n,F;if(this.__camera.isOrthographic()){const a=C.transformVec3(new b(t,-I,-1));a.z=0,n=l.transformVec3(a),F=new b(0,0,-1)}else n=l.translation,F=C.transformVec3(new b(t,-I,-1));return F=l.rotateVec3(F).normalize(),new Ag(n,F)}renderGeomDataFbo(){if(this.__geomDataBufferFbo){const e={};this.initRenderState(e),e.geomDataFbo=this.__geomDataBufferFbo,this.__geomDataBufferFbo.bindAndClear(e),this.__renderer.drawSceneGeomData(e),this.__geomDataBufferInvalid=!1,this.__geomDataBufferFbo.unbind()}}invalidateGeomDataBuffer(){this.__geomDataBufferInvalid=!0}getGeomDataAtPos(e,g){if(this.__geomDataBufferFbo){if(this.__geomDataBufferInvalid&&(this.renderGeomDataFbo(),this.__screenPos=null),e===this.__screenPos)return this.__intersectionData;this.__screenPos=e,this.__intersectionData=null;const t=this.__renderer.gl;t.finish(),this.__geomDataBufferFbo.bindForReading();const I=this.__geomDataBufferFbo.width,l=this.__geomDataBufferFbo.height,C=Math.floor(e.x*(I/this.__width)),n=Math.floor(e.y*(l/this.__height));let F,a;if(this.__renderer.floatGeomBuffer){if(a=new Float32Array(4),t.readPixels(C,l-n-1,1,1,t.RGBA,t.FLOAT,a),a[3]==0)return null;F=Math.round(a[0])&64-1}else{if(a=new Uint8Array(4),t.readPixels(C,l-n-1,1,1,t.RGBA,t.UNSIGNED_BYTE,a),t.bindFramebuffer(t.FRAMEBUFFER,null),a[0]==0&&a[1]==0)return;F=Math.floor(a[1]/32)}this.__geomDataBufferFbo.unbind();const U=this.__renderer.getPass(F);if(!U)return console.warn("Geom data buffer returns invalid pass id:",F),null;const d=U.getGeomItemAndDist(a);if(d){if(!d.geomItem.isSelectable())return null;g||(g=this.calcRayFromScreenPos(e));const s=g.start.add(g.dir.scale(d.dist));this.__intersectionData=new tU(e,g,s,a,d)}return this.__intersectionData}return null}getGeomItemsInRect(e,g){var t;if(this.__geomDataBufferFbo){const I=this.__renderer.gl;I.finish();const l=this.__geomDataBufferFbo.width,C=this.__geomDataBufferFbo.height,n=l/this.__width,F=C/this.__height,a=Math.round(e.x*n),U=Math.round(e.y*F),d=Math.round(g.x*n),s=Math.round(g.y*F),o=Math.round(C-s),A=Math.round(a),B=Math.round(d-a),Q=Math.round(s-U),r=B*Q;this.__geomDataBufferFbo.bindForReading();let R;this.__renderer.floatGeomBuffer?(R=new Float32Array(4*r),I.readPixels(A,o,B,Q,I.RGBA,I.FLOAT,R)):(R=new Uint8Array(4*r),I.readPixels(A,o,B,Q,I.RGBA,I.UNSIGNED_BYTE,R)),I.bindFramebuffer(I.FRAMEBUFFER,null);const V=new Set;for(let h=0;h<r;h++){let m;const Z=R.subarray(h*4,(h+1)*4);if(this.__renderer.floatGeomBuffer){if(Z[3]==0)continue;m=Math.round(Z[0])}else{if(Z[0]==0&&Z[1]==0)continue;m=Math.floor(Z[1]/64)}const c=(t=this.__renderer.getPass(m))===null||t===void 0?void 0:t.getGeomItemAndDist(Z);if(c){if(!c.geomItem.isSelectable())continue;V.add(c.geomItem)}}return V}return new Set}__getPointerPos(e,g){return new f(e-this.getPosX(),g-this.getPosY())}prepareUIEvent(e){e.viewport=this}onPointerDown(e){if(this.prepareUIEvent(e),e.pointerType===ve.mouse){const t=e;t.pointerPos=this.__getPointerPos(t.rendererX,t.rendererY),t.pointerRay=this.calcRayFromScreenPos(t.pointerPos),t.intersectionData=this.getGeomDataAtPos(t.pointerPos,t.pointerRay)}else if(e.pointerType===ve.touch){const t=e;if(t.touches.length==1){const I=t.touches[0];t.pointerPos=this.__getPointerPos(I.rendererX,I.rendererY),t.pointerRay=this.calcRayFromScreenPos(t.pointerPos),t.intersectionData=this.getGeomDataAtPos(t.pointerPos,t.pointerRay)}}const g=Date.now();if(g-this.__prevDownTime<this.doubleClickTimeParam.value){if(this.manipulator&&(this.manipulator.onPointerDoublePress(e),!e.propagating)||(this.emit("pointerDoublePressed",e),!e.propagating))return}else this.__prevDownTime=g;e.getCapture()&&(e.getCapture().onPointerDown(e),!e.propagating)||e.intersectionData!=null&&(e.intersectionData.geomItem.onPointerDown(e),!e.propagating)||(this.emit("pointerDown",e),!!e.propagating&&this.manipulator&&(this.manipulator.onPointerDown(e),e.propagating))}onPointerUp(e){if(this.prepareUIEvent(e),e.pointerType===ve.mouse){const g=e;g.pointerPos=this.__getPointerPos(g.rendererX,g.rendererY),g.pointerRay=this.calcRayFromScreenPos(g.pointerPos),g.intersectionData=this.getGeomDataAtPos(g.pointerPos,g.pointerRay)}else if(e.pointerType===ve.touch){const g=e;if(g.touches.length==0&&g.changedTouches.length==1){const t=g.changedTouches[0];g.pointerPos=this.__getPointerPos(t.rendererX,t.rendererY),g.pointerRay=this.calcRayFromScreenPos(g.pointerPos),g.intersectionData=this.getGeomDataAtPos(g.pointerPos,g.pointerRay)}}e.getCapture()&&(e.getCapture().onPointerUp(e),!e.propagating)||e.intersectionData!=null&&(e.intersectionData.geomItem.onPointerUp(e),!e.propagating)||(this.emit("pointerUp",e),!!e.propagating&&this.manipulator&&(this.manipulator.onPointerUp(e),e.propagating))}onPointerMove(e){if(this.prepareUIEvent(e),e.pointerType===ve.mouse){const g=e,t=this.__getPointerPos(g.rendererX,g.rendererY);g.pointerPos=t,g.pointerRay=this.calcRayFromScreenPos(t)}else if(e.pointerType===ve.touch){const g=e;for(let t=0;t<g.touches.length;t++){const I=g.touches[t];I.touchPos=this.__getPointerPos(I.rendererX,I.rendererY),I.touchRay=this.calcRayFromScreenPos(I.touchPos)}g.pointerPos=g.touches[0].touchPos,g.pointerRay=g.touches[0].touchRay}if(!(e.getCapture()&&(e.getCapture().onPointerMove(e),!e.propagating))){if(e.intersectionData=this.getGeomDataAtPos(e.pointerPos,e.pointerRay),e.intersectionData){if(e.intersectionData.geomItem!=this.pointerOverItem){if(this.pointerOverItem&&(e.leftGeometry=this.pointerOverItem,this.pointerOverItem.onPointerLeave(e),e.propagating&&this.emit("pointerLeaveGeom",e)),e.propagating=!0,this.pointerOverItem=e.intersectionData.geomItem,this.pointerOverItem.onPointerEnter(e),!e.propagating)return;this.emit("pointerOverGeom",e)}if(e.propagating=!0,e.intersectionData.geomItem.onPointerMove(e),!e.propagating)return}else if(this.pointerOverItem){if(e.leftGeometry=this.pointerOverItem,this.pointerOverItem.onPointerLeave(e),this.pointerOverItem=null,!e.propagating)return;this.emit("pointerLeaveGeom",e)}this.emit("pointerMove",e),!!e.propagating&&this.manipulator&&(this.manipulator.onPointerMove(e),e.propagating)}}onPointerEnter(e){this.prepareUIEvent(e),this.emit("pointerEnter",e),!!e.propagating&&this.manipulator&&this.manipulator.onPointerEnter&&(this.manipulator.onPointerEnter(e),e.propagating)}onPointerLeave(e){this.prepareUIEvent(e),this.emit("pointerLeave",e),!!e.propagating&&this.manipulator&&this.manipulator.onPointerLeave&&(this.manipulator.onPointerLeave(e),e.propagating)}onKeyDown(e){this.prepareUIEvent(e),!(this.manipulator&&(this.manipulator.onKeyDown(e),!e.propagating))&&this.emit("keyDown",e)}onKeyUp(e){this.prepareUIEvent(e),!(this.manipulator&&(this.manipulator.onKeyUp(e),!e.propagating))&&this.emit("keyUp",e)}onWheel(e){if(this.prepareUIEvent(e),e.pointerPos=this.__getPointerPos(e.rendererX,e.rendererY),e.pointerRay=this.calcRayFromScreenPos(e.pointerPos),e.intersectionData=this.getGeomDataAtPos(e.pointerPos,e.pointerRay),!(e.intersectionData!=null&&(e.intersectionData.geomItem.onWheel(e),!e.propagating))){if(this.manipulator){this.manipulator.onWheel(e);return}this.emit("mouseWheel",e)}}onTouchCancel(e){this.prepareUIEvent(e),!(e.getCapture()&&(e.getCapture().onTouchCancel(e),!e.propagating))&&(this.manipulator&&(this.manipulator.onTouchCancel(e),!e.propagating)||this.emit("touchCancel",e))}initRenderState(e){e.viewXfo=this.__cameraXfo,e.viewScale=1,e.region=this.region,e.cameraMatrix=this.__cameraMat,e.viewport=this,e.viewports=[{region:this.region,viewMatrix:this.__viewMat,projectionMatrix:this.__projectionMatrix,viewportFrustumSize:this.__frustumDim,isOrthographic:this.__camera.isOrthographic(),fovY:this.__camera.getFov()}]}draw(){const e={};if(this.initRenderState(e),super.draw(e),this.debugGeomDataBuffer){this.renderGeomDataFbo();const g={},t=this.__renderer.screenQuad;t.bindShader(g),t.draw(g,this.__geomDataBuffer,new f(0,0),new f(1,1))}if(this.debugHighlightedGeomsBuffer){const g={},t=this.__renderer.screenQuad;t.bindShader(g);const I=this.__renderer.gl;I.enable(I.BLEND),I.blendEquation(I.FUNC_ADD),I.blendFunc(I.SRC_ALPHA,I.ONE_MINUS_SRC_ALPHA),t.draw(g,this.highlightedGeomsBuffer,new f(0,0),new f(1,1)),I.disable(I.BLEND)}if(this.debugOcclusionBuffer){const g=this.__renderer.glGeomItemLibrary.occlusionDataBuffer,t=this.__renderer.screenQuad;t.bindShader(e);const I=e.unifs.image;g.bindColorTexture(e,I);const l=this.__renderer.gl;l.enable(l.BLEND),l.blendEquation(l.FUNC_ADD),l.blendFunc(l.SRC_ALPHA,l.ONE_MINUS_SRC_ALPHA),t.draw(e,null,new f(0,0),new f(1,1)),l.disable(l.BLEND)}if(this.debugReductionBuffer){const g=this.__renderer.glGeomItemLibrary.reductionDataBuffer,t=this.__renderer.screenQuad;t.bindShader(e);const I=e.unifs.image;g.bindColorTexture(e,I);const l=this.__renderer.gl;l.enable(l.BLEND),l.blendEquation(l.FUNC_ADD),l.blendFunc(l.SRC_ALPHA,l.ONE_MINUS_SRC_ALPHA),t.draw(e,null,new f(0,0),new f(1,1)),l.disable(l.BLEND)}}}class io{constructor(e,g){this.__xrvp=e,this.__treeItem=new H("XRHead"),g.addChild(this.__treeItem),this.__mat4=new Ee,this.__localXfo=new v}setVisible(e){if(e&&!this.hmdGeomItem){const g=this.__xrvp.getAsset();if(!g)return;const t=g.getChildByName("HMD");if(!t)return;this.hmdGeomItem=t.clone({assetItem:g}),this.hmdGeomItem&&(this.hmdGeomItem.localXfoParam.value=new v(new b(0,-.035,-.03),new de(0,1,0,Math.PI),new b(.001,.001,.001)),this.__treeItem.addChild(this.hmdGeomItem,!1))}this.hmdGeomItem&&(this.hmdGeomItem.visibleParam.value=e)}update(e){this.__mat4.setDataArray(e.transform.matrix),this.__localXfo.setFromMat4(this.__mat4),this.__treeItem.localXfoParam.value=this.__localXfo}getTreeItem(){return this.__treeItem}getXfo(){return this.__localXfo}}class no extends Xe{constructor(e,g,t){super();if(this.pressedButtons=[],this.raycastTick=5,this.raycastArea=.005,this.raycastDist=.04,this.pointerRay=new Ag,this.raycastAreaCache=0,this.raycastDistCache=0,this.rayCastRenderTargetProjMatrix=new Ee,this.capturedItem=null,this.xrvp=e,this.inputSource=g,this.id=t,this.buttonPressed=!1,this.inputSource.gamepad.buttons.forEach((I,l)=>{l!=0&&(this.pressedButtons[l]=I.pressed)}),this.mat4=new Ee,this.xfo=new v,this.treeItem=new H("XRController:"+g.handedness+t),!_e.isMobileDevice){this.tipItem=new H("Tip");const I=new v;if(I.tr.set(0,-.05,-.13),this.tipItem.localXfoParam.value=I,this.treeItem.addChild(this.tipItem,!1),e.getTreeItem().addChild(this.treeItem),g.targetRayMode=="tracked-pointer"){switch(g.profiles[0]){case"htc-vive":localStorage.setItem("ZeaEngine_XRDevice","Vive");break;case"oculus-touch":case"oculus-touch-v2":case"oculus-touch-v3":localStorage.setItem("ZeaEngine_XRDevice","Oculus");break}e.loadHMDResources().then(l=>{if(!l)return;const C=new v;C.ori.setFromAxisAndAngle(new b(0,1,0),Math.PI),C.sc.set(.001,.001,.001);let n;if(g.profiles[0]=="htc-vive")n=l.getChildByName("Controller"),C.tr.set(0,-.035,-.085);else switch(g.handedness){case"left":n=l.getChildByName("LeftController"),C.tr.set(0,-.035,-.085),C.sc.scaleInPlace(.85);break;case"right":n=l.getChildByName("RightController"),C.tr.set(0,-.035,-.085),C.sc.scaleInPlace(.85);break;case"none":case"left-right":case"left-right-none":n=l.getChildByName("Controller");break}if(n){const F=n.clone({assetItem:l});F.localXfoParam.value=C,this.treeItem.addChild(F,!1)}})}}this.tick=0}getHandedness(){return this.inputSource.handedness}getId(){return this.id}getTreeItem(){return this.treeItem}getTipItem(){return this.tipItem}getTipXfo(){return this.tipItem.globalXfoParam.value}getTouchPadValue(){return this.touchpadValue}isButtonPressed(){return this.buttonPressed}getControllerStageLocalXfo(){return this.xfo}getControllerTipStageLocalXfo(){return this.xfo.multiply(this.tipItem.localXfoParam.value)}updatePose(e,g,t){const I=g.getPose(t.gripSpace,e);if(!(!I||!I.transform)){if(this.mat4.setDataArray(I.transform.matrix),this.xfo.setFromMat4(this.mat4),this.treeItem.localXfoParam.value=this.xfo,this.hitTested=!1,this.raycastDist>0&&this.raycastTick>0&&this.tick%this.raycastTick==0){const l=this.getGeomItemAtTip();if(l!=null){const C=new it(this.xrvp,this,0,this.buttonPressed?1:0);C.intersectionData=l,C.pointerRay=this.pointerRay,l.geomItem!=this.pointerOverItem&&(this.pointerOverItem&&(C.leftGeometry=this.pointerOverItem,this.pointerOverItem.onPointerLeave(C),C.propagating&&this.xrvp.emit("pointerLeaveGeom",C)),C.propagating=!0,this.pointerOverItem=l.geomItem,this.pointerOverItem.onPointerEnter(C),C.propagating&&this.xrvp.emit("pointerOverGeom",C)),l.geomItem.onPointerMove(C)}else if(this.pointerOverItem){const C=new it(this.xrvp,this,0,this.buttonPressed?1:0);C.pointerRay=this.pointerRay,C.leftGeometry=this.pointerOverItem,this.pointerOverItem.onPointerLeave(C),this.pointerOverItem=null}}this.inputSource.gamepad.buttons.forEach((l,C)=>{if(C!=0){if(l.pressed&&!this.pressedButtons[C]){this.pressedButtons[C]=!0;const n=new it(this.xrvp,this,C,1);n.intersectionData=this.getGeomItemAtTip(),n.pointerRay=this.pointerRay,this.emit("buttonPressed",n)}else if(!l.pressed&&this.pressedButtons[C]){this.pressedButtons[C]=!1;const n=new it(this.xrvp,this,C,0);this.emit("buttonReleased",n)}}}),this.tick++}}getGeomItemAtTip(){if(this.hitTested)return this.intersectionData;if(this.hitTested=!0,this.raycastDist==0)return null;const e=this.xrvp.getRenderer(),g=this.tipItem.globalXfoParam.value.clone();g.sc.set(1,1,1),this.pointerRay.start=g.tr,this.pointerRay.dir=g.ori.getZaxis().negate();const t=this.raycastDist*this.xrvp.stageScale,I=this.raycastArea*this.xrvp.stageScale;return(t!=this.raycastDistCache||I!=this.raycastAreaCache)&&(this.rayCastRenderTargetProjMatrix.setOrthographicMatrix(I*-.5,I*.5,I*-.5,I*.5,0,t),this.raycastDistCache=t,this.raycastAreaCache=I),this.intersectionData=e.raycastWithProjection(g,this.rayCastRenderTargetProjMatrix,this.pointerRay),this.intersectionData}}class ao extends Na{constructor(e){super();this.listenerIDs={},this.__controllerTriggersHeld=[],this.xrvp=e,this.vrControllerToolTip=new Kt(.02*.75),this.vrControllerToolTipMat=new Ve("Cross","FlatSurfaceShader"),this.vrControllerToolTipMat.getParameter("BaseColor").value=new E("#03E3AC"),this.listenerIDs={}}addIconToController(e){const g=new ge("HandleToolTip",this.vrControllerToolTip,this.vrControllerToolTipMat);g.setSelectable(!1),e.getTipItem().removeAllChildren(),e.getTipItem().addChild(g,!1)}activateTool(){super.activateTool();for(const e of this.xrvp.getControllers())this.addIconToController(e);this.listenerIDs.controllerAdded=this.xrvp.on("controllerAdded",e=>{this.addIconToController(e.controller)})}deactivateTool(){super.deactivateTool();for(const e of this.xrvp.getControllers())e.getTipItem().removeAllChildren();this.xrvp.removeListenerById("controllerAdded",this.listenerIDs.controllerAdded)}__initMoveStage(){if(this.__controllerTriggersHeld.length==1)this.__grabPos=this.__controllerTriggersHeld[0].getControllerTipStageLocalXfo().tr.clone(),this.stageXfo__GrabStart=this.xrvp.getXfo().clone(),this.__invOri=this.stageXfo__GrabStart.ori.inverse();else if(this.__controllerTriggersHeld.length==2){const e=this.__controllerTriggersHeld[0].getControllerTipStageLocalXfo().tr,g=this.__controllerTriggersHeld[1].getControllerTipStageLocalXfo().tr;this.__grabDir=g.subtract(e),this.__grabPos=e.lerp(g,.5),this.__grabDir.y=0,this.__grabDist=this.__grabDir.length(),this.__grabDir.scaleInPlace(1/this.__grabDist),this.stageXfo__GrabStart=this.xrvp.getXfo().clone(),this.__grab_to_stage=this.__grabPos.subtract(this.stageXfo__GrabStart.tr)}}onVRControllerButtonDown(e){if(e.button!=0)return;this.__controllerTriggersHeld.indexOf(e.controller)==-1&&(this.__controllerTriggersHeld.push(e.controller),this.__initMoveStage(),e.stopPropagation())}onVRControllerButtonUp(e){if(e.button!=0)return;const g=this.__controllerTriggersHeld.indexOf(e.controller);g!=-1&&(this.__controllerTriggersHeld.splice(g,1),this.__initMoveStage(),e.stopPropagation())}onVRControllerDoubleClicked(e){console.log("onVRControllerDoubleClicked:",this.__controllerTriggersHeld.length);const g=this.xrvp.getXfo().clone();g.sc.set(1,1,1),this.xrvp.setXfo(g)}onVRPoseChanged(e){if(this.__controllerTriggersHeld.length==1){const g=this.__controllerTriggersHeld[0].getControllerTipStageLocalXfo().tr,t=new v;t.tr=this.__grabPos.subtract(g);const I=this.stageXfo__GrabStart.multiply(t);this.xrvp.setXfo(I)}else if(this.__controllerTriggersHeld.length==2){const g=this.__controllerTriggersHeld[0].getControllerTipStageLocalXfo().tr,t=this.__controllerTriggersHeld[1].getControllerTipStageLocalXfo().tr,I=g.lerp(t,.5),l=t.subtract(g);l.y=0;const C=l.length();if(C<1e-4)return;l.scaleInPlace(1/C);const n=new v,F=Math.max(Math.min(this.__grabDist/C,10),.1);n.sc.set(F,F,F);let a=this.__grabDir.angleTo(l);this.__grabDir.cross(l).y>0&&(a=-a),n.ori.rotateY(a);const U=n.ori.rotateVec3(this.__grabPos);n.tr.addInPlace(this.__grabPos.subtract(U));const d=this.__grabPos.scale(1-F);n.tr.addInPlace(n.ori.rotateVec3(d));const s=this.__grabPos.subtract(I).scale(F);n.tr.addInPlace(n.ori.rotateVec3(s));const o=this.stageXfo__GrabStart.multiply(n);this.xrvp.setXfo(o)}}onPointerDown(e){e.pointerType===ve.xr&&this.onVRControllerButtonDown(e)}onPointerMove(e){e.pointerType===ve.xr&&this.onVRPoseChanged(e)}onPointerUp(e){e.pointerType===ve.xr&&this.onVRControllerButtonUp(e)}onPointerDoublePress(e){e.pointerType===ve.xr&&this.onVRControllerDoubleClicked(e)}}class Fo extends Ta{constructor(e){super(e);this.viewXfo=new v,this.stageXfo=new v,this.invStageMatrix=new Ee,this.session=null,this.hmd="",this.region=[],this.projectionMatrices=[],this.viewMatrices=[],this.cameraMatrices=[],this.doubleClickTimeParam.value=300,this.__projectionMatricesUpdated=!1,this.__stageTreeItem=new H("VRStage"),this.__stageTreeItem.setVisible(!1),this.__renderer.addTreeItem(this.__stageTreeItem),this.__xrhead=new io(this,this.__stageTreeItem),this.controllersMap={},this.controllers=[],this.controllerPointerDownTime=[],this.spectatorMode=!1,this.tick=0;const g=new v;g.ori.setFromAxisAndAngle(new b(1,0,0),Math.PI*.5),this.setXfo(g),this.setManipulator(new ao(this))}getRenderer(){return this.renderer}getAsset(){return this.__vrAsset}getTreeItem(){return this.__stageTreeItem}getVRHead(){return this.__xrhead}getXfo(){return this.stageXfo}setXfo(e){this.stageXfo=e,this.__stageTreeItem.globalXfoParam.value=e,this.invStageMatrix=e.inverse().toMat4(),this.stageScale=e.sc.x}getControllers(){return this.controllers}getHMDName(){return this.hmd}isPresenting(){return this.session!=null}setSpectatorMode(e){if(!e){const g=this.__renderer.gl;g.bindFramebuffer(g.FRAMEBUFFER,null),g.viewport(0,0,g.drawingBufferWidth,g.drawingBufferHeight);let t=this.backgroundColorParam.value.asArray();g.clearColor(t[0],t[1],t[2],t[3]),g.colorMask(!0,!0,!0,!0),g.clear(g.COLOR_BUFFER_BIT|g.DEPTH_BUFFER_BIT)}this.spectatorMode=e}__startSession(){const e=(g,t)=>{this.session&&(this.session.requestAnimationFrame(e),this.drawXRFrame(t))};this.session.requestAnimationFrame(e)}loadHMDResources(){if(_e.isMobileDevice)return Promise.resolve(null);let e=localStorage.getItem("ZeaEngine_XRDevice");if(e||(e="Oculus",localStorage.setItem("ZeaEngine_XRDevice",e)),this.hmd!=e)this.hmdAssetPromise=void 0;else if(this.hmdAssetPromise)return this.hmdAssetPromise;return this.hmd=e,this.hmdAssetPromise=new Promise((g,t)=>{{let I;switch(e){case"Vive":I="ZeaEngine/Vive.vla";break;case"Oculus":I="ZeaEngine/Oculus.vla";break;default:I="ZeaEngine/Vive.vla";break}if(!ee.commonResources[I]){const C=new Sa(I);C.load(ee.systemUrls[I]),ee.commonResources[I]=C}this.__vrAsset=ee.getCommonResource(I);const l=()=>{const C=this.__vrAsset.getMaterialLibrary(),n=C.getMaterialNames();for(const F of n){const a=C.getMaterial(F,!1);a&&a.setShaderName("SimpleSurfaceShader")}this.__vrAsset.traverse(F=>{F.setSelectable(!1)}),g(this.__vrAsset)};this.__vrAsset.isLoaded()?l():this.__vrAsset.once("loaded",l)}}),this.hmdAssetPromise}startPresenting(){return new Promise((e,g)=>{this.spectatorMode||this.setSpectatorMode(!1),(()=>{navigator.xr.requestSession("immersive-vr",{requiredFeatures:["local-floor"],optionalFeatures:["bounded-floor"]}).then(I=>{const l=this.__renderer.getViewport();if(l){const o=l.getCamera().globalXfoParam.value,A=new v;A.tr=o.tr.clone(),A.tr.z-=1.3;const B=o.ori.getZaxis();B.z=0,B.normalizeInPlace(),A.ori.setFromDirectionAndUpvector(B,new b(0,0,1)),this.setXfo(A)}I.addEventListener("end",s=>{this.__stageTreeItem.setVisible(!1),this.session=null,this.emit("presentingChanged",new YC(!1))});const C=s=>{const o=this.controllersMap[s.inputSource.handedness];o&&(o.buttonPressed=!0,this.onPointerDown(new it(this,o,0,1)))},n=s=>{const o=this.controllersMap[s.inputSource.handedness];o&&(o.buttonPressed=!1,this.onPointerUp(new it(this,o,0,0)))},F=s=>{console.log("creating controller:",s.handedness,s.profiles);const o=this.controllers.length,A=new no(this,s,o);this.controllersMap[s.handedness]=A,this.controllers[o]=A;const B=new IU(A);return this.emit("controllerAdded",B),A},a=s=>{for(const o of s.added)o.profiles.length!=0&&F(o)};I.addEventListener("selectstart",C),I.addEventListener("selectend",n),I.addEventListener("inputsourceschange",a),this.session=I;const U=new XRWebGLLayer(I,this.__gl);I.updateRenderState({baseLayer:U}),this.__width=U.framebufferWidth,this.__height=U.framebufferHeight,this.region=[0,0,this.__width,this.__height],this.depthRange=[I.renderState.depthNear,I.renderState.depthFar],this.resizeRenderTargets(this.__width,this.__height);const d=s=>{this.__refSpace=s,this.__stageTreeItem.setVisible(!0),this.emit("presentingChanged",new YC(!0)),this.loadHMDResources().then(()=>{this.__startSession(),e()})};I.requestReferenceSpace(_e.isMobileDevice?"local":"bounded-floor").catch(s=>{console.log("Falling back to local-floor reference space"),I.requestReferenceSpace("local-floor").then(d)}).then(s=>{d(s)}).catch(s=>{console.warn(s.message),g(new Error("Unable to start XR Session:"+s.message))})}).catch(I=>{console.warn(I.message)})})()})}stopPresenting(){!this.session||this.session.end()}togglePresenting(){this.session?this.stopPresenting():this.startPresenting()}updateControllers(e){const g=this.session.inputSources;for(let t=0;t<g.length;t++){const I=g[t];if(I.profiles.length==0)return;if(!this.controllers[t]){console.warn("Missing controller");continue}this.controllers[t].updatePose(this.__refSpace,e,I)}}initCullingRenderState(e){e.viewXfo=this.viewXfo,e.viewScale=1,e.region=this.region,e.cameraMatrix=e.viewXfo.toMat4(),e.viewport=this,e.viewports=[{region:this.region,viewMatrix:e.cameraMatrix.inverse(),isOrthographic:!1}]}drawXRFrame(e){const g=e.session,t=g.renderState.baseLayer,I=e.getViewerPose(this.__refSpace);if(!I)return;this.__xrhead.update(I);const l=this.__xrhead.getTreeItem().globalXfoParam.value;this.viewXfo=l;const C=I.views;if(!this.__projectionMatricesUpdated){this.projectionMatrices=[],this.viewMatrices=[],this.cameraMatrices=[];for(let s=0;s<C.length;s++){const o=C[s],A=new Ee;A.setDataArray(o.projectionMatrix),this.projectionMatrices[s]=A,this.viewMatrices[s]=new Ee,this.cameraMatrices[s]=new Ee}this.__projectionMatricesUpdated=!0}const n=this.__renderer.gl;n.bindFramebuffer(n.FRAMEBUFFER,t.framebuffer);let F=this.backgroundColorParam.value.asArray();n.clearColor(F[0],F[1],F[2],F[3]),n.colorMask(!0,!0,!0,!0),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT),this.depthRange=[g.renderState.depthNear,g.renderState.depthFar];const a={};a.boundRendertarget=t.framebuffer,a.region=this.region,a.viewport=this,a.vrviewport=this,a.viewports=[];for(let s=0;s<C.length;s++){const o=C[s];this.viewMatrices[s].setDataArray(o.transform.inverse.matrix),this.viewMatrices[s].multiplyInPlace(this.invStageMatrix);const A=t.getViewport(o);a.viewports.push({viewMatrix:this.viewMatrices[s],projectionMatrix:this.projectionMatrices[s],region:[A.x,A.y,A.width,A.height],isOrthographic:!1})}a.viewXfo=l,a.viewScale=1/this.stageScale,a.cameraMatrix=a.viewXfo.toMat4(),a.region=this.region,a.vrPresenting=!0,this.draw(a);const U=new AU(this,l,this.controllers);this.updateControllers(e),U.getCapture()&&U.getCapture().onPointerMove(U),this.manipulator&&U.propagating&&this.manipulator.onPointerMove(U);const d=new oU(a.viewXfo);if(d.hmd=this.hmd,d.controllers=this.controllers,d.viewport=this,d.vrviewport=this,this.emit("viewChanged",d),this.spectatorMode&&!_e.isMobileDevice&&this.tick%5==0){const s=this.__renderer.getViewport();s&&(this.__xrhead.setVisible(!0),s.draw(),this.__xrhead.setVisible(!1))}this.tick++}onPointerDown(e){e.intersectionData=e.controller.getGeomItemAtTip(),e.pointerRay=e.controller.pointerRay;const g=Date.now();g-this.controllerPointerDownTime[e.controller.id]<this.doubleClickTimeParam.value&&(this.emit("pointerDoublePressed",e),!e.propagating||this.manipulator&&(this.manipulator.onPointerDoublePress(e),!e.propagating))||(this.controllerPointerDownTime[e.controller.id]=g,!(e.getCapture()&&(e.getCapture().onPointerDown(e),!e.propagating))&&(e.intersectionData!=null&&(e.intersectionData.geomItem.onPointerDown(e),!e.propagating)||(this.emit("pointerDown",e),!!e.propagating&&this.manipulator&&this.manipulator.onPointerDown(e))))}onPointerUp(e){this.controllerPointerDownTime[e.controller.id]=0,e.pointerRay=e.controller.pointerRay,!(e.getCapture()&&(e.getCapture().onPointerUp(e),!e.propagating))&&(e.intersectionData=e.controller.getGeomItemAtTip(),!(e.intersectionData!=null&&(e.intersectionData.geomItem.onPointerUp(e),!e.propagating))&&(this.emit("pointerUp",e),!!e.propagating&&this.manipulator&&(this.manipulator.onPointerUp(e),e.propagating)))}}class $l extends LC{constructor(e){super();this.dirty=!1,this.unif=e}bind(e){}unbind(e){}destroy(){}}class Uo extends $l{constructor(e,g,t,I,l){super(I);this.gltexture=null,this.textureType=-1;const C=t.getName();switch(this.param=t,this.unif=I,this.textureUnif=l[C+"Tex"],this.textureTypeUnif=l[C+"TexType"],this.uniform1i=e.uniform1i.bind(e),this.unif.type){case"Boolean":this.uniformXX=e.uniform1i.bind(e);break;case"UInt32":e.name=="webgl2"?this.uniformXX=e.uniform1ui.bind(e):this.uniformXX=e.uniform1i.bind(e);break;case"SInt32":this.uniformXX=e.uniform1i.bind(e);break;case"Float32":this.uniformXX=e.uniform1f.bind(e);break}this.bind=this.bindValue;const n=U=>{let d=Te.getCachedGLTexture2D(U);const s=1;d||(U.type==="FLOAT"?d=new DI(e,U):d=new Te(e,U),Te.setCachedGLTexture2D(U,d)),this.texBinding=d.preBind(this.textureUnif,l),d.on("updated",()=>{g.emit("updated")}),this.gltexture=d,this.gltexture.addRef(this),this.textureType=s,this.bind=this.bindTexture,g.emit("updated")};let F,a;if(this.update=()=>{try{F||(typeof t.value=="boolean"?this.val=t.value?1:0:this.val=t.value)}catch{}g.emit("updated")},t instanceof Oe){const U=s=>{s.isLoaded()?n(s):a=s.on("loaded",()=>{n(F)}),F=s},d=()=>{Te.getCachedGLTexture2D(F).removeRef(this),this.texBinding=null,this.gltexture=null,this.textureType=-1,this.bind=this.bindValue,a&&F.removeListenerById("loaded",a),F=null,a=null,g.emit("updated")};t.getImage()&&U(t.getImage()),t.on("textureConnected",()=>{U(t.getImage())}),t.on("textureDisconnected",()=>{d()})}this.dirty=!0,t.on("valueChanged",()=>{this.dirty=!0,g.emit("updated")})}bindValue(e){this.dirty&&(this.update(),this.dirty=!1),this.unif&&this.uniformXX(this.unif.location,this.val),this.textureTypeUnif&&this.uniform1i(this.textureTypeUnif.location,0)}bindTexture(e){this.dirty&&(this.update(),this.dirty=!1),this.gltexture.bindToUniform(e,this.textureUnif,this.texBinding)}}class so extends $l{constructor(e,g,t,I){super(I);switch(this.param=t,this.unif.type){case"Vec2":this.uniformXX=e.uniform2fv.bind(e);break;case"Vec3":this.uniformXX=e.uniform3fv.bind(e);break;case"Vec4":this.uniformXX=e.uniform4fv.bind(e);break}this.dirty=!0,t.on("valueChanged",()=>{this.dirty=!0,g.emit("updated")})}bind(e){this.dirty&&(this.values=this.param.value.asArray(),this.dirty=!1),this.uniformXX(this.unif.location,this.values)}unbind(){}destroy(){}}class oo extends $l{constructor(e,g,t,I){super(I);switch(this.values=new Float32Array(0),this.param=t,this.unif.type){case"Mat3":this.uniformMatrixXXX=e.uniformMatrix3fv.bind(e);break;case"Mat4":this.uniformMatrixXXX=e.uniformMatrix4fv.bind(e);break}this.dirty=!0,t.on("valueChanged",()=>{this.dirty=!0,g.emit("updated")})}bind(e){this.dirty&&(this.values=this.param.value.asArray(),this.dirty=!1),this.uniformMatrixXXX(this.unif.location,!1,this.values)}unbind(){}destroy(){}}class Vn extends $l{constructor(e,g,t,I,l){super(I);const C=t.getName();this.param=t,this.textureUnif=l[C+"Tex"],this.textureTypeUnif=l[C+"TexType"],this.values=Float32Array.from([0,0,0,0]),this.bind=this.bindValue;const n=s=>{F=s;let o=Te.getCachedGLTexture2D(s);const A=1;o||(s.type==="FLOAT"?o=new DI(e,s):o=new Te(e,s),Te.setCachedGLTexture2D(s,o)),this.texBinding=o.preBind(this.textureUnif,l),o.on("updated",()=>{g.emit("updated")}),this.gltexture=o,this.gltexture.addRef(this),this.textureType=A,this.bind=this.bindTexture,g.emit("updated")};let F,a;const U=s=>{s.isLoaded()?n(s):a=s.once("loaded",()=>{n(s)})},d=()=>{this.gltexture.removeRef(this),this.gltexture=null,this.texBinding=null,this.textureType=null,a&&F.removeListenerById("loaded",a),this.bind=this.bindValue,F=null,a=null,g.emit("updated")};this.update=()=>{try{F||this.unif&&(t instanceof ye&&t.colorSpace==Bg.Gamma?this.values=t.value.toLinear().asArray():this.values=t.value.asArray())}catch{}g.emit("updated")},t instanceof ye&&(t.getImage()&&U(t.getImage()),t.on("textureConnected",()=>{U(t.getImage())}),t.on("textureDisconnected",()=>{d()})),this.dirty=!0,t.on("valueChanged",()=>{this.dirty=!0}),this.uniform1i=e.uniform1i.bind(e),this.uniform4fv=e.uniform4fv.bind(e)}bindValue(e){!this.unif||(this.dirty&&(this.update(),this.dirty=!1),this.unif&&this.uniform4fv(this.unif.location,this.values),this.textureTypeUnif&&this.uniform1i(this.textureTypeUnif.location,0))}bindTexture(e){this.dirty&&(this.update(),this.dirty=!1),this.gltexture.bindToUniform(e,this.textureUnif,this.texBinding)}}const tl={};class Ao{constructor(e,g,t,I){this.uniformBindings=[];const l=n=>{const F=n.getName(),a=t[F];if(a==null){if(t[F+"Tex"]){this.uniformBindings.push(new Vn(e,g,n,a,t));return}if(I){const d=g.getMaterial().getShaderName();tl[d]||(tl[d]={}),tl[d][F]||(console.warn("Material:"+g.getMaterial().getName(),"with Shader ",d,"Param has no unif",F),tl[d][F]=!0)}return}switch(a.type){case"Boolean":case"UInt32":case"SInt32":case"Float32":this.uniformBindings.push(new Uo(e,g,n,a,t));break;case"Vec2":case"Vec3":case"Vec4":this.uniformBindings.push(new so(e,g,n,a));break;case"Color":this.uniformBindings.push(new Vn(e,g,n,a,t));break;case"Mat4":this.uniformBindings.push(new oo(e,g,n,a));break;default:console.warn("Param :"+F+" has unhandled data type:"+a.type);return}},C=g.getMaterial().getParameters();for(const n of C)l(n)}bind(e){for(const g of this.uniformBindings)g.bind(e);return!0}unbind(e){for(const g of this.uniformBindings)g.unbind(e)}destroy(){for(const e of this.uniformBindings)e.destroy()}}class Bo extends Xe{constructor(e,g,t){super();this.__gl=e,this.__material=g,this.__glshader=t,this.__shaderBindings={},g.on("parameterValueChanged",()=>this.emit("updated"))}getMaterial(){return this.__material}getGLShader(){return this.__glshader}bind(e,g){this.__boundTexturesBeforeMaterial=e.boundTextures;let t=this.__shaderBindings[e.shaderkey];if(!t){const I=this.__gl;t=new Ao(I,this,e.unifs,g),this.__shaderBindings[e.shaderkey]=t}t.bind(e)}unbind(e){e.boundTextures=this.__boundTexturesBeforeMaterial}}class Qo extends Xe{constructor(e){super();this.materials=[],this.materialIndices={},this.glMaterials={},this.refCounts=[],this.freeIndices=[],this.materialsAllocator=new vt,this.renderer=e,this.materials=[],this.refCounts=[],this.materialIndices={},this.glMaterials={},this.freeIndices=[],this.dirtyIndices=new Set,this.materialsAllocator=new vt,this.materialsAllocator.on("dataReallocated",g=>{const t=g.id;this.dirtyIndices.add(t)})}addMaterial(e){let g=this.materialIndices[e.getId()];if(g!=null)return this.refCounts[g]++,g;this.freeIndices.length?g=this.freeIndices.pop():g=this.materials.length,this.materials[g]=e,this.refCounts[g]=1,this.materialIndices[e.getId()]=g;const t=e.getShaderClass().getPackedMaterialData(e);this.materialsAllocator.allocate(g,t.length/4);const I=()=>{this.dirtyIndices.add(g),this.emit("updated")};return e.on("parameterValueChanged",I),this.dirtyIndices.add(g),g}getGLMaterial(e){if(this.glMaterials[e.getId()])return this.glMaterials[e.getId()];const g=this.renderer.getOrCreateShader(e.getShaderName()),t=this.renderer.gl,I=new Bo(t,e,g);return I.on("updated",()=>{this.renderer.requestRedraw()}),e.setMetadata("glMaterial",I),this.glMaterials[e.getId()]=I,I}getMaterialAllocation(e){const g=this.materialIndices[e.getId()];if(g!=null)return this.materialsAllocator.getAllocation(g)}removeMaterial(e){const g=this.materialIndices[e.getId()];this.refCounts[g]--,!(this.refCounts[g]>0)&&(this.freeIndices.push(g),this.materialsAllocator.deallocate(g),this.materials[g]=null,delete this.materialIndices[e.getId()],this.dirtyIndices.has(g)&&this.dirtyIndices.delete(g))}uploadMaterials(e){const g=this.renderer.__gl,t=q.nextPow2(Math.ceil(Math.sqrt(this.materialsAllocator.reservedSpace))),I=e.boundTextures++;if(g.activeTexture(g.TEXTURE0+I),!this.materialsTexture)this.materialsTexture=new Te(this.renderer.__gl,{format:"RGBA",type:"FLOAT",width:t,height:t,filter:"NEAREST",wrap:"CLAMP_TO_EDGE",mipMapped:!1}),this.materialsTexture.clear();else if(this.materialsTexture.width<t){this.materialsTexture.resize(t,t);for(let n=0;n<this.materials.length;n++)this.materialsAllocator.getAllocation(n)&&this.dirtyIndices.add(n)}const l=this.materialsTexture,C=this.materialsTexture.width;g.bindTexture(g.TEXTURE_2D,l.glTex),this.dirtyIndices.forEach(n=>{const F=this.materialsAllocator.getAllocation(n),a=this.materials[n],U=a.getShaderClass().getPackedMaterialData(a),d=0,s=F.start%C,o=1,A=Math.ceil((s+F.size)/C);let B=0,Q=F.size,r=s;for(let R=0;R<A;R++){let V;r+Q>C?(V=C-r,r=0):V=Q;const h=(F.start+B)%C,m=Math.floor((F.start+B)/C),Z=U.subarray(B*4,(B+V)*4);g.texSubImage2D(g.TEXTURE_2D,d,h,m,V,o,l.__format,l.__type,Z),B+=V,Q-=V}}),this.dirtyIndices=new Set,g.bindTexture(g.TEXTURE_2D,null),e.boundTextures--}update(e){this.dirtyItemIndices.length>0&&this.uploadMaterials(e),e.drawItemsTexture=this.glGeomItemsTexture}bind(e){if(this.dirtyIndices.size>0&&this.uploadMaterials(e),!this.materialsTexture)return!1;const{materialsTexture:g,materialsTextureSize:t}=e.unifs;return g&&(this.materialsTexture.bindToUniform(e,g),t&&this.renderer.gl.uniform2i(t.location,this.materialsTexture.width,this.materialsTexture.height)),!0}}class Vo extends Vi{constructor(e,g){super(e,g);this.__numVertices=9,this.__vboState=-1,this.genBuffers()}genBuffers(e){super.genBuffers(e);const g=this.__gl,t=this.__geom.genBuffers();for(const I in t.attrBuffers){const l=t.attrBuffers[I],C=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,C),g.bufferData(g.ARRAY_BUFFER,l.values,g.STATIC_DRAW),this.__glattrbuffers[I]={buffer:C,dataType:l.dataType,normalized:l.normalized}}this.__numVertices=t.numVertices,this.__vboState=2}updateBuffers(e){const g=this.__gl,t=this.__geom.genBuffers(),I=t.numVertices!=this.__numVertices;for(const l in t.attrBuffers){const C=t.attrBuffers[l],n=this.__glattrbuffers[l];I&&(g.deleteBuffer(n.buffer),n.buffer=g.createBuffer()),g.bindBuffer(g.ARRAY_BUFFER,n.buffer),g.bufferData(g.ARRAY_BUFFER,C.values,g.STATIC_DRAW)}this.__numVertices=t.numVertices}bind(e){if(e.unifs.PointSize){const g=this.__gl;let t=this.__shaderBindings[e.shaderkey];if(!t){g.__quadVertexIdsBuffer||g.setupInstancedQuad();const I=Object.assign(this.__glattrbuffers,g.__quadattrbuffers);t=og(this.__gl,e.attrs,I,g.__quadIndexBuffer),this.__shaderBindings[e.shaderkey]=t}return t.bind(e),!0}else return super.bind(e),!0}draw(e){const g=this.__gl;e.unifs.PointSize?g.drawElementsInstanced(g.TRIANGLES,6,g.UNSIGNED_SHORT,0,this.__numVertices):g.drawArrays(g.POINTS,0,this.__numVertices)}drawInstanced(e,g){this.__gl.drawArraysInstanced(this.__gl.POINTS,0,this.__numVertices,g)}}class Ya extends Vi{constructor(e,g){super(e,g);this.__numSegIndices=0,this.__numVertices=0,this.__fatBuffersNeedUpload=!1,this.fatBuffers=null,this.__buffersNeedUpload=!1,this.__indexDataType=0,this.__numSegIndices=0,this.__numVertices=0,this.__fatBuffersNeedUpload=!0}dirtyBuffers(e){super.dirtyBuffers(e),this.__fatBuffersNeedUpload=!0,this.emit("updated")}clearBuffers(){const e=this.__gl;if(e.deleteBuffer(this.__indexBuffer),this.__indexBuffer=null,this.fatBuffers&&this.fatBuffers.positionsTexture){this.fatBuffers.positionsTexture&&(this.fatBuffers.positionsTexture.destroy(),this.fatBuffers.positionsTexture=null);const g=this.fatBuffers.glattrbuffers.segmentIndices;g.buffer&&(e.deleteBuffer(g.buffer),this.fatBuffers.glattrbuffers.segmentIndices=null)}super.clearBuffers()}genFatBuffers(e){const g=this.__gl,t=this.__geom.genBuffers(),I=t.indices,l=t.numVertices!=this.__numVertices;g.__quadVertexIdsBuffer||g.setupInstancedQuad(),this.fatBuffers||(this.fatBuffers={drawCount:0,positionsTexture:null,glattrbuffers:{}},this.fatBuffers.glattrbuffers.vertexIDs=g.__quadattrbuffers.vertexIDs);const C=e.boundTextures++;g.activeTexture(this.__gl.TEXTURE0+C),this.fatBuffers.drawCount=I.length/2;const n=this.__geom.getVertexAttributes(),F=n.positions,a=n.lineThickness,U=4,d=new Float32Array(F.getCount()*U);for(let o=0;o<F.getCount();o++)new b(new Float32Array(d.buffer,o*U*4,3)).setFromOther(F.getValueRef(o)),a?d[o*4+3]=a.getFloat32Value(o):d[o*4+3]=1;l&&this.fatBuffers.positionsTexture&&(this.fatBuffers.positionsTexture.destroy(),this.fatBuffers.positionsTexture=null),this.fatBuffers.positionsTexture?this.fatBuffers.positionsTexture.bufferData(d,F.getCount(),1):this.fatBuffers.positionsTexture=new Te(this.__gl,{format:"RGBA",type:"FLOAT",width:F.getCount(),height:1,filter:"NEAREST",wrap:"CLAMP_TO_EDGE",data:d,mipMapped:!1});const s=()=>{const o=new Float32Array(I.length);for(let A=0;A<I.length;A++){let B;A%2==0?B=A>0?I[A]==I[A-1]:I[A]==I[I.length-1]:B=A<I.length-1?I[A]==I[A+1]:I[A]==I[0],o[A]=(B?1:0)+I[A]*2}return o};if(this.fatBuffers.glattrbuffers.segmentIndices)(!this.genBufferOpts||this.genBufferOpts&&this.genBufferOpts.topologyChanged)&&(g.bindBuffer(g.ARRAY_BUFFER,this.fatBuffers.glattrbuffers.segmentIndices.buffer),g.bufferData(g.ARRAY_BUFFER,s(),g.STATIC_DRAW));else{const o=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,o),g.bufferData(g.ARRAY_BUFFER,s(),g.STATIC_DRAW),this.fatBuffers.glattrbuffers.segmentIndices={buffer:o,dimension:2,dataType:"Vec2"}}this.__numSegIndices=I.length,this.__numVertices=t.numVertices,g.bindTexture(g.TEXTURE_2D,null),e.boundTextures--,this.__fatBuffersNeedUpload=!1}genBuffers(e){const g=this.__gl,t=this.__geom.genBuffers(),I=t.indices,l=t.numVertices!=this.__numVertices;{this.__indexBuffer?(!this.genBufferOpts||this.genBufferOpts&&this.genBufferOpts.topologyChanged)&&(this.__numSegIndices!=I.length&&(g.deleteBuffer(this.__indexBuffer),this.__indexBuffer=g.createBuffer()),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,this.__indexBuffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,I,g.STATIC_DRAW),this.__numSegIndices=I.length):(this.__indexBuffer=g.createBuffer(),g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,this.__indexBuffer),g.bufferData(g.ELEMENT_ARRAY_BUFFER,I,g.STATIC_DRAW));for(const C in t.attrBuffers){const n=t.attrBuffers[C];if(this.__glattrbuffers[C]){const F=this.__glattrbuffers[C];l&&(g.deleteBuffer(F.buffer),F.buffer=g.createBuffer()),g.bindBuffer(g.ARRAY_BUFFER,F.buffer),g.bufferData(g.ARRAY_BUFFER,n.values,g.STATIC_DRAW)}else{const F=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,F),g.bufferData(g.ARRAY_BUFFER,n.values,g.STATIC_DRAW),this.__glattrbuffers[C]={buffer:F,dataType:n.dataType,normalized:n.normalized}}}this.__numSegIndices=I.length,this.__numVertices=t.numVertices,this.__buffersNeedUpload=!1}I instanceof Uint8Array&&(this.__indexDataType=this.__gl.UNSIGNED_BYTE),I instanceof Uint16Array&&(this.__indexDataType=this.__gl.UNSIGNED_SHORT),I instanceof Uint32Array&&(this.__indexDataType=this.__gl.UNSIGNED_INT)}bind(e){const g=this.__gl,t=e.unifs;if(t.LineThickness&&g.floatTexturesSupported){this.__fatBuffersNeedUpload&&this.genFatBuffers(e);const I=this.fatBuffers;let l=this.__shaderBindings[e.shaderkey];return l||(l=og(this.__gl,e.attrs,I.glattrbuffers,g.__quadIndexBuffer),this.__shaderBindings[e.shaderkey]=l),l.bind(e),t.positionsTexture&&(I.positionsTexture.bindToUniform(e,t.positionsTexture),g.uniform1i(t.positionsTextureSize.location,I.positionsTexture.width)),!0}else return super.bind(e),!0}drawPoints(){this.__gl.drawArrays(this.__gl.POINTS,0,this.__geom.numVertices())}draw(e){const g=this.__gl;e.unifs.LineThickness&&g.floatTexturesSupported?g.drawElementsInstanced(g.TRIANGLES,6,g.UNSIGNED_SHORT,0,this.fatBuffers.drawCount):g.drawElements(this.__gl.LINES,this.__numSegIndices,this.__indexDataType,0)}drawInstanced(e,g){const t=this.__gl,{occluded:I}=e.unifs;I&&t.uniform1i(I.location,0),t.drawElementsInstanced(this.__gl.LINES,this.__numSegIndices,this.__indexDataType,0,g),I&&(t.uniform1i(I.location,1),t.depthFunc(t.GREATER),t.drawElementsInstanced(this.__gl.LINES,this.__numSegIndices,this.__indexDataType,0,g),t.depthFunc(t.LEQUAL))}}const Il=(i,e)=>{const g=new Int32Array(e);return g.set(i),g};class ro extends Xe{constructor(e){super();this.indexBuffer=null,this.__destroyed=!1,this.renderer=e,this.__gl=e.gl,this.shaderAttrSpec={},this.freeGeomIndices=[],this.geoms=[],this.geomRefCounts=[],this.geomsDict={},this.glGeomsDict={},this.geomBuffersTmp=[],this.glattrbuffers={},this.shaderBindings={},this.bufferNeedsRealloc=!1,this.attributesAllocator=new vt,this.dirtyGeomIndices=new Set,this.attributesAllocator.on("resized",()=>{this.bufferNeedsRealloc=!0}),this.attributesAllocator.on("dataReallocated",g=>{const t=g.id,I=g.allocation;this.dirtyGeomIndices.add(t),this.geomVertexOffsets[t]=I.start,this.geomVertexCounts[t]=I.size}),this.geomVertexCounts=new Int32Array(1),this.geomVertexOffsets=new Int32Array(1),this.indicesCounts=new Int32Array(1),this.indicesOffsets=new Int32Array(1),this.freeGeomIndices.push(0),this.numIndices=0,this.indicesAllocator=new vt,this.indicesAllocator.on("resized",()=>{this.bufferNeedsRealloc=!0}),this.indicesAllocator.on("dataReallocated",g=>{const t=g.id;this.dirtyGeomIndices.add(t)})}constructGLGeom(e){let g=this.glGeomsDict[e.getId()];if(g!=null)return g;const t=this.__gl;if(e instanceof ht||e instanceof Kg)g=new ql(t,e);else if(e instanceof sg||e instanceof Gg)g=new Ya(t,e);else if(e instanceof Rt||e instanceof ct)g=new Vo(t,e);else throw new Error("Unsupported geom type:"+e.constructor.name);return this.glGeomsDict[e.getId()]=g,g.on("updated",()=>{this.renderer.requestRedraw()}),g.addRef(this),g}addGeom(e){let g=this.geomsDict[e.getId()];if(g!=null)return this.geomRefCounts[g]++,g;if(this.freeGeomIndices.length==0){const l=this.geomVertexCounts.length,C=l*2;this.geomVertexCounts=Il(this.geomVertexCounts,C),this.geomVertexOffsets=Il(this.geomVertexOffsets,C),this.indicesCounts=Il(this.indicesCounts,C),this.indicesOffsets=Il(this.indicesOffsets,C);for(let n=C-1;n>=l;n--)this.freeGeomIndices.push(n)}g=this.freeGeomIndices.pop(),this.geoms[g]=e,this.geomRefCounts[g]=1,this.geomsDict[e.getId()]=g,this.dirtyGeomIndices.add(g),this.geomVertexCounts[g]=0,this.geomVertexOffsets[g]=0,this.indicesCounts[g]=0,this.indicesOffsets[g]=0;const t=()=>{this.dirtyGeomIndices.add(g),this.emit("updated")},I=()=>{this.dirtyGeomIndices.add(g),this.emit("updated")};return e.on("geomDataChanged",t),e.on("geomDataTopologyChanged",I),g}removeGeom(e){const g=this.geomsDict[e.getId()];this.geomRefCounts[g]--,!(this.geomRefCounts[g]>0)&&(this.attributesAllocator.getAllocation(g)&&this.attributesAllocator.deallocate(g),this.indicesAllocator.getAllocation(g)&&this.indicesAllocator.deallocate(g),this.dirtyGeomIndices.has(g)&&this.dirtyGeomIndices.delete(g),this.geomVertexCounts[g]=0,this.geomVertexOffsets[g]=0,this.geoms[g]=null,this.freeGeomIndices.push(g),delete this.geomsDict[e.getId()],delete this.geomBuffersTmp[g],this.indicesCounts[g]=0,this.indicesOffsets[g]=0)}getGeom(e){return this.geoms[e]}getGeomOffsetAndCount(e){return[this.indicesOffsets[e],this.indicesCounts[e]]}getGeomBuffers(e){return this.geomBuffersTmp[e]}allocateBuffers(e){const g=this.geoms[e];if(!g)return;const t=g.genBuffers(),I=t.numRenderVerts?t.numRenderVerts:t.numVertices;if(this.geomVertexCounts[e]!=I)if(I==0)this.attributesAllocator.deallocate(e),this.geomVertexOffsets[e]=0,this.geomVertexCounts[e]=0;else{const l=this.attributesAllocator.allocate(e,I);this.geomVertexOffsets[e]=l.start,this.geomVertexCounts[e]=l.size}for(const l in t.attrBuffers)if(!this.shaderAttrSpec[l]){const C=t.attrBuffers[l],n=Qi(this.__gl,C.dataType);this.shaderAttrSpec[l]={dataType:C.dataType,normalized:C.normalized,dimension:n.dimension,elementSize:n.elementSize}}if(t.indices){const l=t.indices.length;if(this.indicesCounts[e]!=l)if(l==0)this.indicesAllocator.deallocate(e),this.indicesOffsets[e]=0,this.indicesCounts[e]=0;else{const C=this.indicesAllocator.allocate(e,l),n=4;this.indicesOffsets[e]=C.start*n,this.indicesCounts[e]=C.size}}else this.indicesOffsets[e]=this.geomVertexOffsets[e],this.indicesCounts[e]=this.geomVertexCounts[e];this.geomBuffersTmp[e]=t}genBuffers(){const e=this.attributesAllocator.reservedSpace,g=this.__gl;for(const I in this.shaderAttrSpec){const l=this.shaderAttrSpec[I],C=e*l.dimension;l.numValues=C,this.glattrbuffers[I]&&this.glattrbuffers[I].buffer&&g.deleteBuffer(this.glattrbuffers[I].buffer);const n=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,n);const F=C*l.elementSize;g.bufferData(g.ARRAY_BUFFER,F,g.STATIC_DRAW),this.glattrbuffers[I]={buffer:n,dataType:l.dataType,normalized:l.normalized,length:C,dimension:l.dimension},I=="textureCoords"&&(this.glattrbuffers.texCoords=this.glattrbuffers.textureCoords)}const t=this.indicesAllocator.reservedSpace;if(this.numIndices!=t){const I=this.__gl;this.indexBuffer&&I.deleteBuffer(this.indexBuffer),this.indexBuffer=I.createBuffer(),I.bindBuffer(I.ELEMENT_ARRAY_BUFFER,this.indexBuffer);const l=this.indicesAllocator.reservedSpace,n=l*4;I.bufferData(I.ELEMENT_ARRAY_BUFFER,n,I.STATIC_DRAW),this.numIndices=l}}uploadBuffers(e){const g=this.__gl;let t=this.geomBuffersTmp[e];if(!t){const n=this.geoms[e];if(!n)return;t=n.genBuffers(),this.geomBuffersTmp[e]=t}const I=this.geomVertexCounts[e],l=t.numRenderVerts?t.numRenderVerts:t.numVertices;if(I!=l)throw new Error("Invalid allocation for this geom");if(l==0){const n=new ji(e);this.emit("geomDataChanged",n);return}for(const n in t.attrBuffers){const F=this.shaderAttrSpec[n],a=t.attrBuffers[n],U=this.glattrbuffers[n];if(!a||!U)continue;g.bindBuffer(g.ARRAY_BUFFER,U.buffer);const d=F.elementSize,s=this.geomVertexOffsets[e]*d*F.dimension;g.bufferSubData(g.ARRAY_BUFFER,s,a.values)}if(g.bindBuffer(g.ARRAY_BUFFER,null),t.indices&&t.indices.length>0){const n=t.indices,F=this.indicesAllocator.getAllocation(e);if(F.size!=n.length)throw new Error("Invalid allocation for this geom");const a=this.attributesAllocator.getAllocation(e),U=new Uint32Array(F.size);for(let A=0;A<n.length;A++)U[A]=t.indices[A]+a.start;const d=this.__gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,this.indexBuffer);const s=4,o=F.start*s;d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,o,U),d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,null)}let C=new ji(e);this.emit("geomDataChanged",C)}cleanGeomBuffers(){if(new Set(this.dirtyGeomIndices).forEach(g=>{this.allocateBuffers(g)}),this.bufferNeedsRealloc){for(const g in this.shaderBindings)this.shaderBindings[g].destroy();this.shaderBindings={};for(let g=0;g<this.geoms.length;g++)this.geoms[g]&&this.dirtyGeomIndices.add(g);this.genBuffers(),this.bufferNeedsRealloc=!1}this.dirtyGeomIndices.forEach(g=>{this.uploadBuffers(g)}),this.dirtyGeomIndices=new Set}bind(e){this.dirtyGeomIndices.size>0&&this.cleanGeomBuffers();let g=this.shaderBindings[e.shaderkey];if(g)g.bind(e);else{const t=this.__gl;g=og(t,e.attrs,this.glattrbuffers,this.indexBuffer),this.shaderBindings[e.shaderkey]=g}return!0}unbind(e){const g=this.shaderBindings[e.shaderkey];g&&g.unbind(e)}clearBuffers(){const e=this.__gl;for(const g in this.glattrbuffers){const t=this.glattrbuffers[g];t.shared||e.deleteBuffer(t.buffer)}this.glattrbuffers={},this.indexBuffer&&(e.deleteBuffer(this.indexBuffer),this.indexBuffer=null);for(const g in this.shaderBindings)this.shaderBindings[g].destroy();this.shaderBindings={}}destroy(){this.clearBuffers(),this.__destroyed=!0,this.emit("destructing")}}const ft={GEOMITEM_FLAG_CUTAWAY:1,GEOMITEM_INVISIBLE_IN_GEOMDATA:2,GEOMITEM_TRANSPARENT:4};class Ro extends Xe{constructor(e,g,t,I,l,C=!1){super();if(this.listenerIDs={},this.shattered=!1,this.culled=!1,this.cutDataChanged=!1,this.cutData=[],this.geomMatrixDirty=!1,this.gl=e,this.geomItem=g,this.geomItemId=t,this.geomId=I,this.materialId=l,this.supportInstancing=C,this.visible=this.geomItem.isVisible(),this.listenerIDs.visibilityChanged=this.geomItem.on("visibilityChanged",n=>{const F=!this.culled&&this.visible;this.visible=n.visible;const a=!this.culled&&this.visible;F!=a&&this.emit("visibilityChanged",new vC(a))}),g instanceof At&&(this.shattered=g.shattered),this.listenerIDs.shatterStateChanged=this.geomItem.on("shatterStateChanged",n=>{this.shattered=n.state,this.emit("shatterStateChanged",n)}),!this.supportInstancing){this.cutDataChanged=!1,this.cutData=[0,0,0,0];const n=0;let F=0;this.geomItem.isCutawayEnabled()&&(F|=ft.GEOMITEM_FLAG_CUTAWAY),g.isSelectable()||(F|=ft.GEOMITEM_INVISIBLE_IN_GEOMDATA),g.materialParam.value.isOpaque()||(F|=ft.GEOMITEM_TRANSPARENT),this.geomData=[F,n,0,0],this.geomMatrixDirty=!0,this.listenerIDs["GeomMat.valueChanged"]=this.geomItem.geomMatParam.on("valueChanged",()=>{this.geomMatrixDirty=!0,this.emit("updated")}),this.listenerIDs.cutAwayChanged=this.geomItem.on("cutAwayChanged",()=>{this.cutDataChanged=!0,this.emit("updated")});const a=U=>{U.isOpaqueStateChanged&&(this.geomData[0],U.isOpaque,this.geomData[0],this.emit("updated"))};this.listenerIDs.opacityChanged=this.geomItem.on("opacityChanged",a),this.listenerIDs["material:opacityChanged"]=this.geomItem.materialParam.on("opacityChanged",a)}}getGeomItem(){return this.geomItem}isVisible(){return!this.culled&&this.visible}getGeomItemId(){return this.geomItemId}setCulled(e){const g=!this.culled&&this.visible;this.culled=e;const t=!this.culled&&this.visible;g!=t&&this.emit("visibilityChanged",new vC(t))}bind(e){const g=this.gl,t=e.unifs;if(!this.supportInstancing){const l=t.modelMatrix;l&&(this.geomMatrixDirty&&(this.modelMatrixArray=this.geomItem.geomMatParam.value.asArray()),g.uniformMatrix4fv(l.location,!1,this.modelMatrixArray));const C=t.drawItemData;C&&g.uniform4fv(C.location,this.geomData);const n=t.cutawayData;if(n){if(this.cutDataChanged&&this.geomItem.isCutawayEnabled()){const F=this.geomItem.getCutVector(),a=this.geomItem.getCutDist();this.cutData=[F.x,F.y,F.z,a]}g.uniform4fv(n.location,this.cutData)}}const I=t.geomItemId;return I&&g.uniform1i(I.location,this.geomItemId),!0}destroy(){this.geomItem.removeListenerById("visibilityChanged",this.listenerIDs.visibilityChanged),this.supportInstancing||(this.geomItem.geomMatParam.removeListenerById("valueChanged",this.listenerIDs["GeomMat.valueChanged"]),this.geomItem.removeListenerById("cutAwayChanged",this.listenerIDs.cutAwayChanged))}}class ho extends Pe{constructor(e){super(e,"ReductionShader");this.setShaderStage("VERTEX_SHADER",`

precision highp float;

uniform int reductionTextureWidth;
uniform sampler2D geomDataTexture;

ivec2 texelCoordFromVertexId(){
  ivec2 texSize = textureSize(geomDataTexture, 0);
  return ivec2(
    gl_VertexID % texSize.x, 
    gl_VertexID / texSize.x
    );
}

vec2 pointPositionFromGeomItemId(int geomItemId){
  vec2 result = vec2(
    (float(geomItemId % reductionTextureWidth) + 0.5) / float(reductionTextureWidth), 
    (float(geomItemId / reductionTextureWidth) + 0.5) / float(reductionTextureWidth)
    );
  return vec2(-1.0, -1.0) + (result * 2.0);
}

void main()
{
  // Get the texel coordinate in the source geomdata buffer.
  // there is one point for every pixel in the geomdata texture.
  ivec2 texelCoord = texelCoordFromVertexId();
  int geomItemId = int(texelFetch(geomDataTexture, texelCoord, 0).g + 0.5);

  if (geomItemId > 0) {
    vec2 position = pointPositionFromGeomItemId(geomItemId);
    gl_Position = vec4(position, 0.0, 1.0);
    gl_PointSize = 1.0;
  } else {
    // Move it off screen
    gl_Position = vec4(-2.0, -2.0, 0.0, 1.0);
    gl_PointSize = 0.0;
  }
}

`),this.setShaderStage("FRAGMENT_SHADER",`
precision highp float;

#ifdef ENABLE_ES3
  out vec4 fragColor;
#endif

void main(void) {
#ifndef ENABLE_ES3
  vec4 fragColor;
#endif

  fragColor = vec4(1.0, 1.0, 1.0, 1.0);

#ifndef ENABLE_ES3
  gl_FragColor = fragColor;
#endif
}

`)}}var co=`
precision highp float;
#define GLSLIFY 1

/* VS Outputs */
varying vec4 v_color;

#ifdef ENABLE_ES3
  out vec4 fragColor;
#endif
void main(void) {
#ifndef ENABLE_ES3
  vec4 fragColor;
#endif

  int drawItemId = int(v_color.g);
  fragColor = v_color;

#ifndef ENABLE_ES3
  gl_FragColor = fragColor;
#endif
}
`,Zo=`
precision highp float;
#define GLSLIFY 1

attribute vec4 positions;

uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 cameraMatrix;

uniform highp int occlusionCulling;
uniform sampler2D reductionDataTexture;

import 'transpose.glsl'
import 'GLSLUtils.glsl'
import 'stack-gl/transpose.glsl'
import 'stack-gl/inverse.glsl'
import 'geomItemId.glsl'
import 'drawItemTexture.glsl'
import 'modelMatrix.glsl'

const int GEOMITEM_INVISIBLE_IN_GEOMDATA = 2; // 1<<1;

/* VS Outputs */
varying vec4 v_color;

void main(void) {

  int drawItemId = getGeomItemId();
  vec4 geomItemData  = getInstanceData(drawItemId);
  int flags = int(geomItemData.r + 0.5);

  if (occlusionCulling != 0) {
    // Check if in the reduction texture, this item is already flagged as visible.
    // Note: we only draw bboxes for those that have been flagged as invisible, but might
    // be just off screen, or onscreen, but were culled in the previous update.
    int isVisible = int(fetchTexel(reductionDataTexture, textureSize(reductionDataTexture, 0), drawItemId).r);
    if (isVisible > 0) {
      return;
    }
    if (testFlag(flags, GEOMITEM_INVISIBLE_IN_GEOMDATA)) {
      return;
    }
  }

  vec4 bboxMin = fetchTexel(instancesTexture, instancesTextureSize, (drawItemId * pixelsPerItem) + 6);
  vec4 bboxMax = fetchTexel(instancesTexture, instancesTextureSize, (drawItemId * pixelsPerItem) + 7);
  mat4 viewProjectionMatrix = projectionMatrix * viewMatrix;

  if (occlusionCulling != 0) {
    // TODO: The bounding box stochastic
    v_color = vec4(0.0, float(drawItemId), 0.0, 1.0);
  } else {
    v_color = fetchTexel(instancesTexture, instancesTextureSize, (drawItemId * pixelsPerItem) + 4);
  }

  vec4 pos = positions;
  if (pos.x < 0.0) pos.x = bboxMin.x;
  else if (pos.x > 0.0) pos.x = bboxMax.x;
  if (pos.y < 0.0) pos.y = bboxMin.y;
  else if (pos.y > 0.0) pos.y = bboxMax.y;
  if (pos.z < 0.0) pos.z = bboxMin.z;
  else if (pos.z > 0.0) pos.z = bboxMax.z;

  gl_Position = viewProjectionMatrix * pos;
}
`;class mo extends Pe{constructor(e){super(e,"BoundingBoxShader");this.setShaderStage("VERTEX_SHADER",Zo),this.setShaderStage("FRAGMENT_SHADER",co)}}var Wo=_C("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwp2YXIgd29ya2VyX2NvZGUgPSAoZnVuY3Rpb24gKGV4cG9ydHMpIHsKICAndXNlIHN0cmljdCc7CgogIC8qIGVzbGludC1kaXNhYmxlIGNhbWVsY2FzZSAqLwogIGNvbnN0IHZlYzNfc3VidHJhY3QgPSAodmVjMSwgdmVjMikgPT4gewogICAgcmV0dXJuIFt2ZWMxWzBdIC0gdmVjMlswXSwgdmVjMVsxXSAtIHZlYzJbMV0sIHZlYzFbMl0gLSB2ZWMyWzJdXQogIH07CiAgY29uc3QgdmVjM19sZW5ndGggPSAodmVjKSA9PiB7CiAgICByZXR1cm4gTWF0aC5zcXJ0KHZlY1swXSAqIHZlY1swXSArIHZlY1sxXSAqIHZlY1sxXSArIHZlY1syXSAqIHZlY1syXSkKICB9OwogIGNvbnN0IHZlYzJfc2NhbGUgPSAodmVjLCBzY2wpID0+IHsKICAgIHJldHVybiBbdmVjWzBdICogc2NsLCB2ZWNbMV0gKiBzY2xdCiAgfTsKICBjb25zdCB2ZWMyX2xlbmd0aCA9ICh2ZWMpID0+IHsKICAgIHJldHVybiBNYXRoLnNxcnQodmVjWzBdICogdmVjWzBdICsgdmVjWzFdICogdmVjWzFdKQogIH07CgogIGNvbnN0IHF1YXRfY29uanVnYXRlID0gKHF1YXQpID0+IHsKICAgIHJldHVybiBbLXF1YXRbMF0sIC1xdWF0WzFdLCAtcXVhdFsyXSwgcXVhdFszXV0KICB9OwogIGNvbnN0IHF1YXRfbXVsdGlwbHkgPSAocXVhdDEsIHF1YXQyKSA9PiB7CiAgICBjb25zdCBheCA9IHF1YXQxWzBdOwogICAgY29uc3QgYXkgPSBxdWF0MVsxXTsKICAgIGNvbnN0IGF6ID0gcXVhdDFbMl07CiAgICBjb25zdCBhdyA9IHF1YXQxWzNdOwogICAgY29uc3QgYnggPSBxdWF0MlswXTsKICAgIGNvbnN0IGJ5ID0gcXVhdDJbMV07CiAgICBjb25zdCBieiA9IHF1YXQyWzJdOwogICAgY29uc3QgYncgPSBxdWF0MlszXTsKCiAgICByZXR1cm4gWwogICAgICBheCAqIGJ3ICsgYXcgKiBieCArIGF5ICogYnogLSBheiAqIGJ5LAogICAgICBheSAqIGJ3ICsgYXcgKiBieSArIGF6ICogYnggLSBheCAqIGJ6LAogICAgICBheiAqIGJ3ICsgYXcgKiBieiArIGF4ICogYnkgLSBheSAqIGJ4LAogICAgICBhdyAqIGJ3IC0gYXggKiBieCAtIGF5ICogYnkgLSBheiAqIGJ6LAogICAgXQogIH07CiAgY29uc3QgcXVhdF9yb3RhdGVWZWMzID0gKHF1YXQsIHZlYzMpID0+IHsKICAgIGNvbnN0IHZxID0gW3ZlYzNbMF0sIHZlYzNbMV0sIHZlYzNbMl0sIDAuMF07CiAgICBjb25zdCBwcSA9IHF1YXRfbXVsdGlwbHkocXVhdF9tdWx0aXBseShxdWF0LCB2cSksIHF1YXRfY29uanVnYXRlKHF1YXQpKTsKICAgIHJldHVybiBbcHFbMF0sIHBxWzFdLCBwcVsyXV0KICB9OwoKICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogIC8vIEZydXN0dW0gQ3VsbGluZyBkYXRhLgogIGxldCBlbmFibGVPY2NsdXNpb25DdWxsaW5nID0gZmFsc2U7CiAgY29uc3QgZ2VvbUl0ZW1zRGF0YSA9IFtdOwogIGNvbnN0IG91dE9mRnJ1c3R1bSA9IFtdOwogIGxldCBmcnVzdHVtQ3VsbGVkQ291bnQgPSAwOwogIGxldCBuZXdseUN1bGxlZCA9IFtdOwogIGxldCBuZXdseVVuQ3VsbGVkID0gW107CgogIGxldCB2aXNpYmxlQ291bnQgPSAwOwogIGNvbnN0IHRvdGFsR2VvbVN0YXRzID0gewogICAgdHJpYW5nbGVzOiAwLAogICAgbGluZXM6IDAsCiAgICBwb2ludHM6IDAsCiAgfTsKICBjb25zdCB2aXNpYmxlR2VvbVN0YXRzID0gewogICAgdHJpYW5nbGVzOiAwLAogICAgbGluZXM6IDAsCiAgICBwb2ludHM6IDAsCiAgfTsKICBjb25zdCBnZW9tU3RhdHNfYWRkVG90YWwgPSAoZ2VvbVN0YXRzKSA9PiB7CiAgICAvLyBjb25zb2xlLmxvZygnZ2VvbVN0YXRzX2FkZDonLCBnZW9tU3RhdHMudHJpYW5nbGVzLCB2aXNpYmxlR2VvbVN0YXRzLnRyaWFuZ2xlcykKICAgIHRvdGFsR2VvbVN0YXRzLnRyaWFuZ2xlcyArPSBnZW9tU3RhdHMudHJpYW5nbGVzOwogICAgdG90YWxHZW9tU3RhdHMubGluZXMgKz0gZ2VvbVN0YXRzLmxpbmVzOwogICAgdG90YWxHZW9tU3RhdHMucG9pbnRzICs9IGdlb21TdGF0cy5wb2ludHM7CiAgfTsKICBjb25zdCBnZW9tU3RhdHNfc3VidHJhY3RUb3RhbCA9IChnZW9tU3RhdHMpID0+IHsKICAgIC8vIGNvbnNvbGUubG9nKCdnZW9tU3RhdHNfc3VidHJhY3Q6JywgZ2VvbVN0YXRzLnRyaWFuZ2xlcywgdmlzaWJsZUdlb21TdGF0cy50cmlhbmdsZXMpCiAgICB0b3RhbEdlb21TdGF0cy50cmlhbmdsZXMgLT0gZ2VvbVN0YXRzLnRyaWFuZ2xlczsKICAgIHRvdGFsR2VvbVN0YXRzLmxpbmVzIC09IGdlb21TdGF0cy5saW5lczsKICAgIHRvdGFsR2VvbVN0YXRzLnBvaW50cyAtPSBnZW9tU3RhdHMucG9pbnRzOwogIH07CiAgY29uc3QgZ2VvbVN0YXRzX2FkZCA9IChnZW9tU3RhdHMpID0+IHsKICAgIC8vIGNvbnNvbGUubG9nKCdnZW9tU3RhdHNfYWRkOicsIGdlb21TdGF0cy50cmlhbmdsZXMsIHZpc2libGVHZW9tU3RhdHMudHJpYW5nbGVzKQogICAgdmlzaWJsZUNvdW50Kys7CiAgICB2aXNpYmxlR2VvbVN0YXRzLnRyaWFuZ2xlcyArPSBnZW9tU3RhdHMudHJpYW5nbGVzOwogICAgdmlzaWJsZUdlb21TdGF0cy5saW5lcyArPSBnZW9tU3RhdHMubGluZXM7CiAgICB2aXNpYmxlR2VvbVN0YXRzLnBvaW50cyArPSBnZW9tU3RhdHMucG9pbnRzOwogIH07CiAgY29uc3QgZ2VvbVN0YXRzX3N1YnRyYWN0ID0gKGdlb21TdGF0cykgPT4gewogICAgLy8gY29uc29sZS5sb2coJ2dlb21TdGF0c19zdWJ0cmFjdDonLCBnZW9tU3RhdHMudHJpYW5nbGVzLCB2aXNpYmxlR2VvbVN0YXRzLnRyaWFuZ2xlcykKICAgIHZpc2libGVDb3VudC0tOwogICAgdmlzaWJsZUdlb21TdGF0cy50cmlhbmdsZXMgLT0gZ2VvbVN0YXRzLnRyaWFuZ2xlczsKICAgIHZpc2libGVHZW9tU3RhdHMubGluZXMgLT0gZ2VvbVN0YXRzLmxpbmVzOwogICAgdmlzaWJsZUdlb21TdGF0cy5wb2ludHMgLT0gZ2VvbVN0YXRzLnBvaW50czsKICB9OwoKICBsZXQgY2FtZXJhUG9zOwogIGxldCBjYW1lcmFJbnZPcmk7CiAgbGV0IGlzT3J0aG9ncmFwaGljID0gZmFsc2U7CiAgbGV0IGZydXN0dW1IZWlnaHQgPSAwOwogIGxldCBmcnVzdHVtV2lkdGggPSAwOwogIGxldCBmcnVzdHVtSGFsZkFuZ2xlWCA9IDA7CiAgbGV0IGZydXN0dW1IYWxmQW5nbGVZID0gMDsKICBsZXQgc29saWRBbmdsZUxpbWl0ID0gMC4wMDQ7CgogIGNvbnN0IGN1bGwgPSAoaW5kZXgpID0+IHsKICAgIGlmICghb3V0T2ZGcnVzdHVtW2luZGV4XSkgewogICAgICBvdXRPZkZydXN0dW1baW5kZXhdID0gdHJ1ZTsKICAgICAgZnJ1c3R1bUN1bGxlZENvdW50Kys7CiAgICAgIG5ld2x5Q3VsbGVkLnB1c2goaW5kZXgpOwoKICAgICAgLy8gV2UgY291bGQgYmUgY3VsbGluZyBzb21ldGhpbmcgdGhhdCB3YXMgYWxyZWFkeQogICAgICAvLyBub3QgdmlzaWJsZSBpbiB0aGUgb2NjbHVzaW9uIGJ1ZmZlci4KICAgICAgaWYgKCFlbmFibGVPY2NsdXNpb25DdWxsaW5nIHx8ICFvY2NsdWRlZFtpbmRleF0pIHsKICAgICAgICBnZW9tU3RhdHNfc3VidHJhY3QoZ2VvbUl0ZW1zRGF0YVtpbmRleF0uZ2VvbVN0YXRzKTsKICAgICAgfQogICAgfQogIH07CiAgY29uc3QgdW5DdWxsID0gKGluZGV4KSA9PiB7CiAgICBpZiAob3V0T2ZGcnVzdHVtW2luZGV4XSkgewogICAgICBvdXRPZkZydXN0dW1baW5kZXhdID0gZmFsc2U7CiAgICAgIGZydXN0dW1DdWxsZWRDb3VudC0tOwogICAgICBuZXdseVVuQ3VsbGVkLnB1c2goaW5kZXgpOwoKICAgICAgLy8gT2NjbHVzaW9uIGN1bGxpbmcgY2FuIG9ubHkgZGV0ZXJtaW5lIGlmIHNvbWV0aGluZyBpcyB2aXNpYmxlCiAgICAgIC8vIG1lYW5pbmcgdGhhdCB3ZSBhc3N1bWUgaXQgaXMgbm90LCB1bnRpbCBpdCBzaG93cyB1cCBpbiB0aGUgb2NjbHVzaW9uIGJ1ZmZlci4KICAgICAgLy8gT25jZSBpdCBhcHBlYXJzIGluIHRoZSBvY2NsdXNpb24gYnVmZmVyLCB3ZSBzdGFydCByZW5kZXJpbmcgaXQgYWdhaW4uCiAgICAgIC8vIFNvLCB3aGVuIGFuIGl0ZW0gY29tZXMgYmFjayBpbnRvIHRoZSBmcnVzdHVtLCB3ZSBzdGFydCByZW5kZXJpbmcgaXRzIGJib3guCiAgICAgIC8vIFRoZW4gaWYgdGhlIGJib3ggaXMgc2Vlbiwgd2UgdGhlbiBzdGFydCBzaG93aW5nIGl0LgogICAgICBpZiAoZW5hYmxlT2NjbHVzaW9uQ3VsbGluZyAmJiAhZ2VvbUl0ZW1zRGF0YVtpbmRleF0udHJhbnNwYXJlbnQpIHsKICAgICAgICBvY2NsdWRlZFtpbmRleF0gPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIGdlb21TdGF0c19hZGQoZ2VvbUl0ZW1zRGF0YVtpbmRleF0uZ2VvbVN0YXRzKTsKICAgICAgfQogICAgfQogIH07CgogIGNvbnN0IGNoZWNrR2VvbUl0ZW0gPSAoZ2VvbUl0ZW1EYXRhKSA9PiB7CiAgICBpZiAoIWdlb21JdGVtRGF0YSB8fCAhY2FtZXJhUG9zKSByZXR1cm4KICAgIGlmICghZ2VvbUl0ZW1EYXRhLnZpc2libGUpIHsKICAgICAgcmV0dXJuCiAgICB9CgogICAgLy8gU29tZSBpdGVtcywgbGlrZSBIYW5kbGVzIGFuZCB0aGUgZ3JpZCwgb3Igb3IgdGhlIFZSIGNvbnRyb2xsZXJzIHRoYXQgc2hvdWxkIG5vdCBiZSBjdWxsZWQuCiAgICBpZiAoIWdlb21JdGVtRGF0YS5jdWxsYWJsZSkgewogICAgICB1bkN1bGwoZ2VvbUl0ZW1EYXRhLmlkKTsKICAgICAgcmV0dXJuCiAgICB9CiAgICBjb25zdCBib3VuZGluZ1JhZGl1cyA9IGdlb21JdGVtRGF0YS5ib3VuZGluZ1JhZGl1czsKCiAgICBpZiAoaXNPcnRob2dyYXBoaWMpIHsKICAgICAgLy8gQ3VsbCB2ZXJ5IHNtYWxsIGl0ZW1zCiAgICAgIC8vIE5vdGU6IHdoZW4gaW4gVlIsIHRoZSBGb1YgYmVjb21lcyB2ZXJ5IHdpZGUgYW5kIHRoZSBwaXhlbAogICAgICAvLyBoZWlnaHQgdmFyaWVzLiBJdCBzZWVtcyBtb3JlIGNvbnNpc3RlbnQgdG8ganVzdCB1c2Ugc29saWRBbmdsZQogICAgICAvLyB3aGljaCBpcyByZXNvbHV0aW9uIGludmFyaWFudC4KICAgICAgY29uc3QgdmhlaWdodCA9IGJvdW5kaW5nUmFkaXVzIC8gZnJ1c3R1bUhlaWdodDsKICAgICAgaWYgKHNvbGlkQW5nbGVMaW1pdCA+IDAgJiYgdmhlaWdodCA8IHNvbGlkQW5nbGVMaW1pdCkgewogICAgICAgIGN1bGwoZ2VvbUl0ZW1EYXRhLmlkKTsKICAgICAgICByZXR1cm4KICAgICAgfQoKICAgICAgLy8gTm93IHdlIGNoZWNrIGlmIHRoZSBpdGVtIGlzIHdpdGhpbiB0aGUgdmlldyBmcnVzdHVtLgogICAgICAvLyBXZSBuZWVkIHRoZSBzb2xpZCBhbmdsZSBvZiB0aGUgaXRlbSBmb3IgZWFjaCBheGlzIChYICYgWSkKICAgICAgLy8gVGhpcyBpcyBiZWNhdXNlIGF0IHRoZSBjb3JuZXJzIG9mIHRoZSBzY3JlZW4sIHRoZSBvYmplY3QgaXMgc2xpZ2h0bHkKICAgICAgLy8gZnVydGhlciBhd2F5LCBzbyB0aGUgc29saWQgYW5nbGUgY2FsY3VsYXRlZCBhYm92ZSBnZXRzIHNtYWxsZXIuCiAgICAgIC8vIFRoaXMgd2FzIGNhdXNpbmcgaXRlbXMgd2l0aCBiaWcgYm91bmRpbmcgc3BoZXJlcyB0byBiZSBjdWxsZWQgdG9vIGVhcmx5CiAgICAgIC8vIGF0IHRoZSBjb3JuZXIgb2YgdGhlIHNjcmVlbi4KICAgICAgY29uc3QgdmVjID0gdmVjM19zdWJ0cmFjdChnZW9tSXRlbURhdGEucG9zLCBjYW1lcmFQb3MpOwogICAgICBjb25zdCB2aWV3UG9zID0gcXVhdF9yb3RhdGVWZWMzKGNhbWVyYUludk9yaSwgdmVjKTsKICAgICAgaWYgKAogICAgICAgIE1hdGguYWJzKHZpZXdQb3NbMF0pIC0gYm91bmRpbmdSYWRpdXMgPiBmcnVzdHVtV2lkdGggKiAwLjUgfHwKICAgICAgICBNYXRoLmFicyh2aWV3UG9zWzFdKSAtIGJvdW5kaW5nUmFkaXVzID4gZnJ1c3R1bUhlaWdodCAqIDAuNQogICAgICApIHsKICAgICAgICBjdWxsKGdlb21JdGVtRGF0YS5pZCk7CiAgICAgICAgcmV0dXJuCiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIGNvbnN0IHZlYyA9IHZlYzNfc3VidHJhY3QoZ2VvbUl0ZW1EYXRhLnBvcywgY2FtZXJhUG9zKTsKICAgICAgY29uc3QgZGlzdCA9IHZlYzNfbGVuZ3RoKHZlYyk7CiAgICAgIC8vIHVuQ3VsbCBpdGVtcyBjbG9zZSB0byB0aGUgdmlldy4KICAgICAgaWYgKGRpc3QgPCBib3VuZGluZ1JhZGl1cykgewogICAgICAgIHVuQ3VsbChnZW9tSXRlbURhdGEuaWQpOwogICAgICAgIHJldHVybgogICAgICB9CiAgICAgIC8vIEN1bGwgdmVyeSBzbWFsbCBpdGVtcwogICAgICAvLyBOb3RlOiB3aGVuIGluIFZSLCB0aGUgRm9WIGJlY29tZXMgdmVyeSB3aWRlIGFuZCB0aGUgcGl4ZWwKICAgICAgLy8gaGVpZ2h0IHZhcmllcy4gSXQgc2VlbXMgbW9yZSBjb25zaXN0ZW50IHRvIGp1c3QgdXNlIHNvbGlkQW5nbGUKICAgICAgLy8gd2hpY2ggaXMgcmVzb2x1dGlvbiBpbnZhcmlhbnQuCiAgICAgIGNvbnN0IHNvbGlkQW5nbGUgPSBNYXRoLmFzaW4oYm91bmRpbmdSYWRpdXMgLyBkaXN0KTsKICAgICAgaWYgKHNvbGlkQW5nbGVMaW1pdCA+IDAgJiYgc29saWRBbmdsZSA8IHNvbGlkQW5nbGVMaW1pdCkgewogICAgICAgIGN1bGwoZ2VvbUl0ZW1EYXRhLmlkKTsKICAgICAgICByZXR1cm4KICAgICAgfQoKICAgICAgLy8gTm93IHdlIGNoZWNrIGlmIHRoZSBpdGVtIGlzIHdpdGhpbiB0aGUgdmlldyBmcnVzdHVtLgogICAgICAvLyBXZSBuZWVkIHRoZSBzb2xpZCBhbmdsZSBvZiB0aGUgaXRlbSBmb3IgZWFjaCBheGlzIChYICYgWSkKICAgICAgLy8gVGhpcyBpcyBiZWNhdXNlIGF0IHRoZSBjb3JuZXJzIG9mIHRoZSBzY3JlZW4sIHRoZSBvYmplY3QgaXMgc2xpZ2h0bHkKICAgICAgLy8gZnVydGhlciBhd2F5LCBzbyB0aGUgc29saWQgYW5nbGUgY2FsY3VsYXRlZCBhYm92ZSBnZXRzIHNtYWxsZXIuCiAgICAgIC8vIFRoaXMgd2FzIGNhdXNpbmcgaXRlbXMgd2l0aCBiaWcgYm91bmRpbmcgc3BoZXJlcyB0byBiZSBjdWxsZWQgdG9vIGVhcmx5CiAgICAgIC8vIGF0IHRoZSBjb3JuZXIgb2YgdGhlIHNjcmVlbi4KICAgICAgY29uc3Qgdmlld1BvcyA9IHF1YXRfcm90YXRlVmVjMyhjYW1lcmFJbnZPcmksIHZlYyk7CiAgICAgIGNvbnN0IHZpZXdWZWNYWiA9IFt2aWV3UG9zWzBdLCB2aWV3UG9zWzJdXTsKICAgICAgY29uc3Qgdmlld1ZlY1laID0gW3ZpZXdQb3NbMV0sIHZpZXdQb3NbMl1dOwogICAgICBjb25zdCBkaXN0WCA9IHZlYzJfbGVuZ3RoKHZpZXdWZWNYWik7CiAgICAgIGNvbnN0IGRpc3RZID0gdmVjMl9sZW5ndGgodmlld1ZlY1laKTsKICAgICAgY29uc3Qgc29saWRBbmdsZVhaID0gTWF0aC5hc2luKGJvdW5kaW5nUmFkaXVzIC8gZGlzdFgpOwogICAgICBjb25zdCBzb2xpZEFuZ2xlWVogPSBNYXRoLmFzaW4oYm91bmRpbmdSYWRpdXMgLyBkaXN0WSk7CiAgICAgIGNvbnN0IHZpZXdWZWNOb3JtWFogPSB2ZWMyX3NjYWxlKHZpZXdWZWNYWiwgMSAvIGRpc3RYKTsKICAgICAgY29uc3Qgdmlld1ZlY05vcm1ZWiA9IHZlYzJfc2NhbGUodmlld1ZlY1laLCAxIC8gZGlzdFkpOwoKICAgICAgbGV0IHZpZXdBbmdsZTsKICAgICAgLy8gSWYgYW4gaXRlbSBpcyBiZWhpbmQgdGhlIHZpZXdlcgogICAgICBpZiAodmlld1Bvc1syXSA+IDApIHsKICAgICAgICB2aWV3QW5nbGUgPSBbCiAgICAgICAgICBNYXRoLlBJIC0gTWF0aC5hYnMoTWF0aC5hc2luKHZpZXdWZWNOb3JtWFpbMF0pKSAtIHNvbGlkQW5nbGVYWiwKICAgICAgICAgIE1hdGguUEkgLSBNYXRoLmFicyhNYXRoLmFzaW4odmlld1ZlY05vcm1ZWlswXSkpIC0gc29saWRBbmdsZVlaLAogICAgICAgIF07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmlld0FuZ2xlID0gWwogICAgICAgICAgTWF0aC5hYnMoTWF0aC5hc2luKHZpZXdWZWNOb3JtWFpbMF0pKSAtIHNvbGlkQW5nbGVYWiwKICAgICAgICAgIE1hdGguYWJzKE1hdGguYXNpbih2aWV3VmVjTm9ybVlaWzBdKSkgLSBzb2xpZEFuZ2xlWVosCiAgICAgICAgXTsKICAgICAgfQogICAgICAvLyBjb25zb2xlLmxvZyhnZW9tSXRlbURhdGEuaWQsICdhbmdsZSBUbyBJdGVtOicsIGZydXN0dW1IYWxmQW5nbGVYLCB2aWV3QW5nbGVbMF0sIGZydXN0dW1IYWxmQW5nbGVZLCB2aWV3QW5nbGVbMV0pCiAgICAgIGlmICh2aWV3QW5nbGVbMF0gPiBmcnVzdHVtSGFsZkFuZ2xlWCB8fCB2aWV3QW5nbGVbMV0gPiBmcnVzdHVtSGFsZkFuZ2xlWSkgewogICAgICAgIGN1bGwoZ2VvbUl0ZW1EYXRhLmlkKTsKICAgICAgICByZXR1cm4KICAgICAgfQogICAgfQoKICAgIHVuQ3VsbChnZW9tSXRlbURhdGEuaWQpOwogIH07CgogIGNvbnN0IG9uVmlld1BvcnRDaGFuZ2VkID0gKGRhdGEsIHBvc3RNZXNzYWdlKSA9PiB7CiAgICBpZiAoZGF0YS5pc09ydGhvZ3JhcGhpYykgewogICAgICBpc09ydGhvZ3JhcGhpYyA9IHRydWU7CiAgICAgIGZydXN0dW1IZWlnaHQgPSBkYXRhLmZydXN0dW1IZWlnaHQ7CiAgICAgIGZydXN0dW1XaWR0aCA9IGRhdGEuZnJ1c3R1bVdpZHRoOwogICAgfSBlbHNlIHsKICAgICAgaXNPcnRob2dyYXBoaWMgPSBmYWxzZTsKICAgICAgZnJ1c3R1bUhhbGZBbmdsZVggPSBkYXRhLmZydXN0dW1IYWxmQW5nbGVYOwogICAgICBmcnVzdHVtSGFsZkFuZ2xlWSA9IGRhdGEuZnJ1c3R1bUhhbGZBbmdsZVk7CiAgICB9CgogICAgc29saWRBbmdsZUxpbWl0ID0gZGF0YS5zb2xpZEFuZ2xlTGltaXQ7CiAgICBpZiAoY2FtZXJhUG9zICYmIGNhbWVyYUludk9yaSkgewogICAgICBnZW9tSXRlbXNEYXRhLmZvckVhY2goY2hlY2tHZW9tSXRlbSk7CiAgICAgIG9uRG9uZUZydXN0dW1DdWxsKHBvc3RNZXNzYWdlKTsKICAgIH0KICB9OwoKICBjb25zdCBvblZpZXdDaGFuZ2VkID0gKGRhdGEsIHBvc3RNZXNzYWdlKSA9PiB7CiAgICBjYW1lcmFQb3MgPSBkYXRhLmNhbWVyYVBvczsKICAgIGNhbWVyYUludk9yaSA9IHF1YXRfY29uanVnYXRlKGRhdGEuY2FtZXJhT3JpKTsKICAgIHNvbGlkQW5nbGVMaW1pdCA9IGRhdGEuc29saWRBbmdsZUxpbWl0OwogICAgaWYgKGdlb21JdGVtc0RhdGEubGVuZ3RoID4gMCkgewogICAgICBnZW9tSXRlbXNEYXRhLmZvckVhY2goY2hlY2tHZW9tSXRlbSk7CiAgICAgIG9uRG9uZUZydXN0dW1DdWxsKHBvc3RNZXNzYWdlKTsKICAgIH0KICB9OwoKICBsZXQgaW5GcnVzdHVtRHJhd0lkc0J1ZmZlclBvcHVsYXRlZCA9IGZhbHNlOwogIGNvbnN0IGdlbmVyYXRlSW5GcnVzdHVtSW5kaWNlcyA9ICgpID0+IHsKICAgIGxldCBvZmZzZXQgPSAwOwogICAgb3V0T2ZGcnVzdHVtLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4gewogICAgICBpZiAoaW5kZXggPiAwICYmICF2YWx1ZSAmJiBnZW9tSXRlbXNEYXRhW2luZGV4XS52aXNpYmxlICYmICFnZW9tSXRlbXNEYXRhW2luZGV4XS50cmFuc3BhcmVudCkgb2Zmc2V0Kys7CiAgICB9KTsKICAgIC8vIENyZWF0ZSBhIGZsb2F0IGFycmF5IHRoYXQgY2FuIGJlIHVzZWQgYXMgYW4gaW5zdGFuY2VzCiAgICAvLyBhdHRyaWJ1dGUgdG8gcGFzcyBpbnRvIHRoZSBkcmF3aW5nIG9mIHRoZSBib3VuZGluZyBib3hlcy4KICAgIGNvbnN0IGluRnJ1c3R1bUluZGljZXMgPSBuZXcgRmxvYXQzMkFycmF5KG9mZnNldCk7CiAgICBvZmZzZXQgPSAwOwogICAgb3V0T2ZGcnVzdHVtLmZvckVhY2goKHZhbHVlLCBpbmRleCkgPT4gewogICAgICBpZiAoaW5kZXggPiAwICYmICF2YWx1ZSAmJiBnZW9tSXRlbXNEYXRhW2luZGV4XS52aXNpYmxlICYmICFnZW9tSXRlbXNEYXRhW2luZGV4XS50cmFuc3BhcmVudCkgewogICAgICAgIGluRnJ1c3R1bUluZGljZXNbb2Zmc2V0XSA9IGluZGV4OwogICAgICAgIG9mZnNldCsrOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBpbkZydXN0dW1JbmRpY2VzCiAgfTsKCiAgY29uc3Qgb25Eb25lRnJ1c3R1bUN1bGwgPSAocG9zdE1lc3NhZ2UpID0+IHsKICAgIGlmICghZW5hYmxlT2NjbHVzaW9uQ3VsbGluZykgewogICAgICBjb25zdCBjb3VudEluRnJ1c3R1bSA9IGdlb21JdGVtc0RhdGEubGVuZ3RoIC0gMSAtIGZydXN0dW1DdWxsZWRDb3VudDsKCiAgICAgIHBvc3RNZXNzYWdlKHsKICAgICAgICB0eXBlOiAnQ3VsbFJlc3VsdHMnLAogICAgICAgIG5ld2x5Q3VsbGVkLAogICAgICAgIG5ld2x5VW5DdWxsZWQsCiAgICAgICAgdmlzaWJsZTogY291bnRJbkZydXN0dW0sCiAgICAgICAgdG90YWw6IGdlb21JdGVtc0RhdGEubGVuZ3RoIC0gMSwKICAgICAgICB2aXNpYmxlR2VvbVN0YXRzLAogICAgICAgIHRvdGFsR2VvbVN0YXRzLAogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdGcnVzdHVtQ3VsbFJlc3VsdHM6JywgJ25ld2x5Q3VsbGVkOicsIG5ld2x5Q3VsbGVkLCAnbmV3bHlVbkN1bGxlZDonLCBuZXdseVVuQ3VsbGVkLCBvdXRPZkZydXN0dW0pCiAgICAgIC8vIGNvbnN0IGNvdW50SW5GcnVzdHVtID0gZ2VvbUl0ZW1zRGF0YS5sZW5ndGggLSAxIC0gZnJ1c3R1bUN1bGxlZENvdW50CgogICAgICAvLyBpZiAoY291bnRJbkZydXN0dW0gPiAzMDApIHsKICAgICAgLy8gICBjb25zb2xlLmxvZygnY291bnRJbkZydXN0dW06JywgY291bnRJbkZydXN0dW0pCiAgICAgIC8vIH0KICAgICAgaWYgKG5ld2x5Q3VsbGVkLmxlbmd0aCA+IDAgfHwgbmV3bHlVbkN1bGxlZC5sZW5ndGggPiAwIHx8ICFpbkZydXN0dW1EcmF3SWRzQnVmZmVyUG9wdWxhdGVkKSB7CiAgICAgICAgY29uc3QgaW5GcnVzdHVtSW5kaWNlcyA9IGdlbmVyYXRlSW5GcnVzdHVtSW5kaWNlcygpOwoKICAgICAgICAvLyBXaGVuIG9jY2x1c2lvbiBjdWxsaW5nIGlzIG9uLCB3ZSBvbmx5IHVuY3VsbCBpdGVtcyBhZnRlciB0aGV5CiAgICAgICAgLy8gYXJlIGRldGVjdGVkIGluIHRoZSBvY2NsdXNpb24gYnVmZmVyLiBUcmFuc3BhcmVudCBpdGVtcyBhcmUgbm90CiAgICAgICAgLy8gcmVuZGVyZWQgdG8gdGhlIG9jY2x1c2lvbiBidWZmZXIsIHNvIG11c3QgYmUgdW5jdWxsZWQgaW1tZWRpYXRlbHkuCiAgICAgICAgY29uc3QgbmV3bHlVbkN1bGxlZF90cmFuc3BhcmVudCA9IFtdOwogICAgICAgIG5ld2x5VW5DdWxsZWQuZm9yRWFjaCgoaW5kZXgpID0+IHsKICAgICAgICAgIGlmIChpbmRleCA+IDAgJiYgZ2VvbUl0ZW1zRGF0YVtpbmRleF0gJiYgZ2VvbUl0ZW1zRGF0YVtpbmRleF0udmlzaWJsZSAmJiBnZW9tSXRlbXNEYXRhW2luZGV4XS50cmFuc3BhcmVudCkgewogICAgICAgICAgICBuZXdseVVuQ3VsbGVkX3RyYW5zcGFyZW50LnB1c2goaW5kZXgpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHBvc3RNZXNzYWdlKAogICAgICAgICAgewogICAgICAgICAgICB0eXBlOiAnSW5GcnVzdHVtSW5kaWNlcycsCiAgICAgICAgICAgIG5ld2x5Q3VsbGVkLAogICAgICAgICAgICBuZXdseVVuQ3VsbGVkOiBuZXdseVVuQ3VsbGVkX3RyYW5zcGFyZW50LAogICAgICAgICAgICAvKiBXaGVuIG9jY2x1c2lvbiBjdWxsaW5nIGlzIHJ1bm5pbmcsd2Ugb25seSBjb25zaWRlcgogICAgICAgICAgICBjdWxsaW5nIGNvbXBsZXRlZCBhZnRlciB0aGUgb2NjbHVzaW9uIGN1bGxpbmcgaXMgZG9uZS4KICAgICAgICAgICAgdmlzaWJsZTogdmlzaWJsZUNvdW50LAogICAgICAgICAgICB0b3RhbDogZ2VvbUl0ZW1zRGF0YS5sZW5ndGggLSAxLAogICAgICAgICAgICB2aXNpYmxlR2VvbVN0YXRzLAogICAgICAgICAgICB0b3RhbEdlb21TdGF0cywqLwogICAgICAgICAgICBpbkZydXN0dW1JbmRpY2VzLAogICAgICAgICAgfSwKICAgICAgICAgIFtpbkZydXN0dW1JbmRpY2VzLmJ1ZmZlcl0KICAgICAgICApOwogICAgICAgIGluRnJ1c3R1bURyYXdJZHNCdWZmZXJQb3B1bGF0ZWQgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIE5vdGU6IHRoZSBpbkZydXN0dW1EcmF3SWRzQnVmZmVyIGlzIGFscmVhZHkgdXAgdG8gZGF0ZSB3ZSBjYW4gc2tpcCB0aGlzLgogICAgICAgIHBvc3RNZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICdJbkZydXN0dW1JbmRpY2VzJywKICAgICAgICAgIG5ld2x5Q3VsbGVkOiBbXSwKICAgICAgICAgIG5ld2x5VW5DdWxsZWQ6IFtdLAogICAgICAgICAgdmlzaWJsZTogdmlzaWJsZUNvdW50LAogICAgICAgICAgdG90YWw6IGdlb21JdGVtc0RhdGEubGVuZ3RoIC0gMSwKICAgICAgICAgIHZpc2libGVHZW9tU3RhdHMsCiAgICAgICAgICB0b3RhbEdlb21TdGF0cywKICAgICAgICB9KTsKICAgICAgfQogICAgfQoKICAgIG5ld2x5Q3VsbGVkID0gW107CiAgICBuZXdseVVuQ3VsbGVkID0gW107CiAgfTsKCiAgLy8gLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8KICAvLyBPY2NsdXNpb24gQ3VsbGluZyBkYXRhLgogIGNvbnN0IG9jY2x1ZGVkID0gW107CiAgY29uc3QgcHJvY2Vzc09jY2x1c2lvbkRhdGEgPSAoZGF0YSkgPT4gewogICAgY29uc3QgdmlzaWJsZUl0ZW1zID0gZGF0YS52aXNpYmxlSXRlbXM7CgogICAgY29uc3QgbmV3bHlDdWxsZWQgPSBbXTsKICAgIGNvbnN0IG5ld2x5VW5DdWxsZWQgPSBbXTsKICAgIHZpc2libGVJdGVtcy5zb21lKCh2YWx1ZSwgaW5kZXgpID0+IHsKICAgICAgaWYgKGluZGV4ID09IDApIHJldHVybiBmYWxzZQogICAgICBpZiAoaW5kZXggPj0gZ2VvbUl0ZW1zRGF0YS5sZW5ndGgpIHJldHVybiB0cnVlCgogICAgICBjb25zdCBnZW9tSXRlbURhdGEgPSBnZW9tSXRlbXNEYXRhW2luZGV4XTsKICAgICAgaWYgKCFnZW9tSXRlbURhdGEgfHwgIWdlb21JdGVtRGF0YS5jdWxsYWJsZSB8fCAhZ2VvbUl0ZW1EYXRhLnZpc2libGUgfHwgZ2VvbUl0ZW1EYXRhLnRyYW5zcGFyZW50KSByZXR1cm4gZmFsc2UKCiAgICAgIGlmICghb3V0T2ZGcnVzdHVtW2luZGV4XSkgewogICAgICAgIGlmICh2YWx1ZSA9PSAwKSB7CiAgICAgICAgICAvLyBOb3QgdHJhbnNwYXJlbnQgb2JqZWN0IGNhbiBub3QgYmUgb2NjbHVzaW9uIGN1bGxlZCwgYmVjYXVzZSB3ZSBkbyBub3QgcmVuZGVyIHRoZW0gdG8gdGhlCiAgICAgICAgICAvLyBvY2NsdXNpb24gYnVmZmVyLiBUaGlzIG1lYW5zIHRoZXkgY2Fubm90IG9jY2x1ZGUsIG9yIGJlIGNvbnNpZGVyZWQgb2NjbHVkZWQuCiAgICAgICAgICBpZiAoIW9jY2x1ZGVkW2luZGV4XSkgewogICAgICAgICAgICBvY2NsdWRlZFtpbmRleF0gPSB0cnVlOwogICAgICAgICAgICBuZXdseUN1bGxlZC5wdXNoKGluZGV4KTsKICAgICAgICAgICAgZ2VvbVN0YXRzX3N1YnRyYWN0KGdlb21JdGVtRGF0YS5nZW9tU3RhdHMpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBpZiAob2NjbHVkZWRbaW5kZXhdKSB7CiAgICAgICAgICAgIG9jY2x1ZGVkW2luZGV4XSA9IGZhbHNlOwogICAgICAgICAgICBuZXdseVVuQ3VsbGVkLnB1c2goaW5kZXgpOwogICAgICAgICAgICBnZW9tU3RhdHNfYWRkKGdlb21JdGVtRGF0YS5nZW9tU3RhdHMpOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICAvLyBOb3RlOiBldmVuIGlmIG9jY2x1c2lvbiBjdWxsaW5nIGRpZCBudCBmaWx0ZXIgb3V0IGFueSBtb3JlIGl0ZW1zCiAgICAvLyB3ZSBtdXN0IGVtaXQgdGhpcyBtZXNzYWdlIHRvIHRoZSBtYWlucyB3b3JrZXIgc28gaXQga25vd3MgdGhhdCBjdWxsaW5nIGlzIGNvbXBsZXRlZC4KICAgIHBvc3RNZXNzYWdlKHsKICAgICAgdHlwZTogJ0N1bGxSZXN1bHRzJywKICAgICAgbmV3bHlDdWxsZWQsCiAgICAgIG5ld2x5VW5DdWxsZWQsCiAgICAgIHZpc2libGU6IHZpc2libGVDb3VudCwKICAgICAgdG90YWw6IGdlb21JdGVtc0RhdGEubGVuZ3RoIC0gMSwKICAgICAgdmlzaWJsZUdlb21TdGF0cywKICAgICAgdG90YWxHZW9tU3RhdHMsCiAgICB9KTsKICB9OwoKICAvLyAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLwogIC8vIE1lc3NhZ2luZwogIGNvbnN0IGhhbmRsZU1lc3NhZ2UgPSAoZGF0YSwgcG9zdE1lc3NhZ2UpID0+IHsKICAgIGlmIChkYXRhLnR5cGUgPT0gJ0luaXQnKSB7CiAgICAgIGNvbnNvbGUubG9nKCdJbml0aWFsaXplZCBDdWxsaW5nIFdvcmtlcicpOwogICAgICBlbmFibGVPY2NsdXNpb25DdWxsaW5nID0gZGF0YS5lbmFibGVPY2NsdXNpb25DdWxsaW5nOwogICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT0gJ1ZpZXdwb3J0Q2hhbmdlZCcpIHsKICAgICAgb25WaWV3UG9ydENoYW5nZWQoZGF0YSwgcG9zdE1lc3NhZ2UpOwogICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT0gJ1ZpZXdDaGFuZ2VkJykgewogICAgICBvblZpZXdDaGFuZ2VkKGRhdGEsIHBvc3RNZXNzYWdlKTsKICAgIH0gZWxzZSBpZiAoZGF0YS50eXBlID09ICdVcGRhdGVHZW9tSXRlbXMnKSB7CiAgICAgIGRhdGEucmVtb3ZlZEl0ZW1JbmRpY2VzLmZvckVhY2goKGluZGV4KSA9PiB7CiAgICAgICAgY29uc3QgZ2VvbUl0ZW1EYXRhID0gZ2VvbUl0ZW1zRGF0YVtpbmRleF07CiAgICAgICAgaWYgKGdlb21JdGVtRGF0YSAmJiBnZW9tSXRlbURhdGEudmlzaWJsZSkgewogICAgICAgICAgZ2VvbVN0YXRzX3N1YnRyYWN0VG90YWwoZ2VvbUl0ZW1EYXRhLmdlb21TdGF0cyk7CiAgICAgICAgICBpZiAoIWVuYWJsZU9jY2x1c2lvbkN1bGxpbmcgfHwgIW9jY2x1ZGVkW2luZGV4XSkgewogICAgICAgICAgICBnZW9tU3RhdHNfc3VidHJhY3QoZ2VvbUl0ZW1EYXRhLmdlb21TdGF0cyk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGdlb21JdGVtc0RhdGFbaW5kZXhdID0gbnVsbDsKICAgICAgICBvdXRPZkZydXN0dW1baW5kZXhdID0gdHJ1ZTsKICAgICAgfSk7CiAgICAgIGRhdGEuZ2VvbUl0ZW1zLmZvckVhY2goKGdlb21JdGVtRGF0YSkgPT4gewogICAgICAgIGNvbnN0IGluZGV4ID0gZ2VvbUl0ZW1EYXRhLmlkOwogICAgICAgIC8vIE5ldyBnZW9tcyBkZWZhdWx0IHRvIGJlaW5nIHVuLWN1bGxlZAogICAgICAgIC8vIEV4aXN0aW5nIGdlb21zIHRoYXQgbWF5IGJlIGNoYW5naW5nIHN0YXRlLCBsaWtlIGNoYW5naW5nCiAgICAgICAgLy8gdmlzaWJpbGl0eSBvciB0cmFuc2Zvcm1hdGlvbnMgc2hvdWxkIHNpbXBseSB1cGRhdGUuCiAgICAgICAgaWYgKCFnZW9tSXRlbXNEYXRhW2luZGV4XSkgewogICAgICAgICAgb3V0T2ZGcnVzdHVtW2luZGV4XSA9IGZhbHNlOwogICAgICAgICAgaWYgKGdlb21JdGVtRGF0YS52aXNpYmxlKSB7CiAgICAgICAgICAgIGdlb21TdGF0c19hZGRUb3RhbChnZW9tSXRlbURhdGEuZ2VvbVN0YXRzKTsKICAgICAgICAgICAgZ2VvbVN0YXRzX2FkZChnZW9tSXRlbURhdGEuZ2VvbVN0YXRzKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gYXJlIGVpdGhlciBhZGRpbmcgYSBuZXcgaXRlbSwgb3IgdW5oaWRpbmcgYW4gZXhpc3RpbmcgaXRlbS4KICAgICAgICAgIGNvbnN0IGJlY29taW5nVmlzaWJsZSA9ICFnZW9tSXRlbXNEYXRhW2luZGV4XS52aXNpYmxlICYmIGdlb21JdGVtRGF0YS52aXNpYmxlOwogICAgICAgICAgY29uc3QgYmVjb21pbmdJblZpc2libGUgPSBnZW9tSXRlbXNEYXRhW2luZGV4XS52aXNpYmxlICYmICFnZW9tSXRlbURhdGEudmlzaWJsZTsKICAgICAgICAgIGlmIChiZWNvbWluZ1Zpc2libGUpIHsKICAgICAgICAgICAgZ2VvbVN0YXRzX2FkZFRvdGFsKGdlb21JdGVtRGF0YS5nZW9tU3RhdHMpOwogICAgICAgICAgICBvdXRPZkZydXN0dW1baW5kZXhdID0gdHJ1ZTsKICAgICAgICAgICAgb2NjbHVkZWRbaW5kZXhdID0gZmFsc2U7CiAgICAgICAgICAgIC8vIGlmICghb3V0T2ZGcnVzdHVtW2luZGV4XSAmJiAhb2NjbHVkZWRbaW5kZXhdKSB7CiAgICAgICAgICAgIC8vICAgZ2VvbVN0YXRzX2FkZChnZW9tSXRlbURhdGEuZ2VvbVN0YXRzKQogICAgICAgICAgICAvLyB9CiAgICAgICAgICB9IGVsc2UgaWYgKGJlY29taW5nSW5WaXNpYmxlKSB7CiAgICAgICAgICAgIGdlb21TdGF0c19zdWJ0cmFjdFRvdGFsKGdlb21JdGVtRGF0YS5nZW9tU3RhdHMpOwogICAgICAgICAgICBpZiAoIW91dE9mRnJ1c3R1bVtpbmRleF0gJiYgKCFlbmFibGVPY2NsdXNpb25DdWxsaW5nIHx8ICFvY2NsdWRlZFtpbmRleF0pKSB7CiAgICAgICAgICAgICAgZ2VvbVN0YXRzX3N1YnRyYWN0KGdlb21JdGVtRGF0YS5nZW9tU3RhdHMpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG91dE9mRnJ1c3R1bVtpbmRleF0gPSB0cnVlOwogICAgICAgICAgICBvY2NsdWRlZFtpbmRleF0gPSBmYWxzZTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGNvbnN0IGJlY29taW5nVHJhbnNwYXJlbnQgPSAhZ2VvbUl0ZW1zRGF0YVtpbmRleF0udHJhbnNwYXJlbnQgJiYgZ2VvbUl0ZW1EYXRhLnRyYW5zcGFyZW50OwogICAgICAgICAgICBjb25zdCBiZWNvbWluZ09wYXF1ZSA9IGdlb21JdGVtc0RhdGFbaW5kZXhdLnRyYW5zcGFyZW50ICYmICFnZW9tSXRlbURhdGEudHJhbnNwYXJlbnQ7CiAgICAgICAgICAgIGlmIChiZWNvbWluZ1RyYW5zcGFyZW50KSB7CiAgICAgICAgICAgICAgaWYgKGVuYWJsZU9jY2x1c2lvbkN1bGxpbmcgJiYgIW91dE9mRnJ1c3R1bVtpbmRleF0gJiYgb2NjbHVkZWRbaW5kZXhdKSB7CiAgICAgICAgICAgICAgICAvLyBJdGVtcyBiZWNvbWluZyB0cmFuc3BhcmVudCBtdXN0IGJlIHVuY3VsbGVkIGltbWVkaWF0ZWx5LgogICAgICAgICAgICAgICAgbmV3bHlVbkN1bGxlZC5wdXNoKGluZGV4KTsKICAgICAgICAgICAgICAgIGdlb21TdGF0c19hZGQoZ2VvbUl0ZW1EYXRhLmdlb21TdGF0cyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGVsc2UgaWYgKGJlY29taW5nT3BhcXVlKSB7CiAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0JlY29taW5nIG9wYXF1ZTonLCBpbmRleCkKICAgICAgICAgICAgICAvLyBJdGVtcyBiZWNvbWluZyB0cmFuc3BhcmVudCBtdXN0IGJlIHVuY3VsbGVkIGltbWVkaWF0ZWx5LgogICAgICAgICAgICAgIC8vIE9jY2x1c2lvbiBjdWxsaW5nIGNhbiBvbmx5IGRldGVybWluZSBpZiBzb21ldGhpbmcgaXMgdmlzaWJsZQogICAgICAgICAgICAgIC8vIG1lYW5pbmcgdGhhdCB3ZSBhc3N1bWUgaXQgaXMgbm90LCB1bnRpbCBpdCBzaG93cyB1cCBpbiB0aGUgb2NjbHVzaW9uIGJ1ZmZlci4KICAgICAgICAgICAgICAvLyBPbmNlIGl0IGFwcGVhcnMgaW4gdGhlIG9jY2x1c2lvbiBidWZmZXIsIHdlIHN0YXJ0IHJlbmRlcmluZyBpdCBhZ2Fpbi4KICAgICAgICAgICAgICAvLyBTbywgd2hlbiBhbiBpdGVtIGNvbWVzIGJhY2sgaW50byB0aGUgZnJ1c3R1bSwgd2Ugc3RhcnQgcmVuZGVyaW5nIGl0cyBiYm94LgogICAgICAgICAgICAgIC8vIFRoZW4gaWYgdGhlIGJib3ggaXMgc2Vlbiwgd2UgdGhlbiBzdGFydCBzaG93aW5nIGl0LgogICAgICAgICAgICAgIGlmIChlbmFibGVPY2NsdXNpb25DdWxsaW5nICYmICFvdXRPZkZydXN0dW1baW5kZXhdKSB7CiAgICAgICAgICAgICAgICBvY2NsdWRlZFtpbmRleF0gPSB0cnVlOwogICAgICAgICAgICAgICAgZ2VvbVN0YXRzX3N1YnRyYWN0KGdlb21JdGVtRGF0YS5nZW9tU3RhdHMpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBnZW9tSXRlbXNEYXRhW2luZGV4XSA9IGdlb21JdGVtRGF0YTsKICAgICAgICBjaGVja0dlb21JdGVtKGdlb21JdGVtc0RhdGFbaW5kZXhdKTsKICAgICAgfSk7CiAgICAgIGluRnJ1c3R1bURyYXdJZHNCdWZmZXJQb3B1bGF0ZWQgPSBmYWxzZTsKICAgICAgb25Eb25lRnJ1c3R1bUN1bGwocG9zdE1lc3NhZ2UpOwogICAgfSBlbHNlIGlmIChkYXRhLnR5cGUgPT0gJ09jY2x1c2lvbkRhdGEnKSB7CiAgICAgIHByb2Nlc3NPY2NsdXNpb25EYXRhKGRhdGEpOwogICAgfQogIH07CgogIHNlbGYub25tZXNzYWdlID0gZnVuY3Rpb24gKGV2ZW50KSB7CiAgICBoYW5kbGVNZXNzYWdlKGV2ZW50LmRhdGEsIHNlbGYucG9zdE1lc3NhZ2UpOwogIH07CgogIGV4cG9ydHMuaGFuZGxlTWVzc2FnZSA9IGhhbmRsZU1lc3NhZ2U7CgogIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7CgogIHJldHVybiBleHBvcnRzOwoKfSkoe30pOwoK",null,!1);function bo(i,e,g,t){return new Promise((I,l)=>{function C(){const n=i.clientWaitSync(e,g,0);if(n==i.WAIT_FAILED){l();return}if(n==i.TIMEOUT_EXPIRED){setTimeout(C,t);return}I()}C()})}function Jo(i,e,g,t,I,l=0,C=0){return VI(this,void 0,void 0,function*(){const n=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);return i.flush(),yield bo(i,n,0,10),i.deleteSync(n),i.bindBuffer(e,g),i.getBufferSubData(e,t,I,l,C),i.bindBuffer(e,null),I})}function Go(i,e,g,t,I,l,C,n){return VI(this,void 0,void 0,function*(){const F=i.createBuffer();return i.bindBuffer(i.PIXEL_PACK_BUFFER,F),i.bufferData(i.PIXEL_PACK_BUFFER,n.byteLength,i.STREAM_READ),i.readPixels(e,g,t,I,l,C,0),i.bindBuffer(i.PIXEL_PACK_BUFFER,null),yield Jo(i,i.PIXEL_PACK_BUFFER,F,0,n),i.deleteBuffer(F),n})}class uo extends sg{constructor(){super();this.setNumVertices(8);const e=this.getVertexAttribute("positions");e.getValueRef(0).set(.5,-.5,.5),e.getValueRef(1).set(.5,.5,.5),e.getValueRef(2).set(-.5,.5,.5),e.getValueRef(3).set(-.5,-.5,.5),e.getValueRef(4).set(.5,-.5,-.5),e.getValueRef(5).set(.5,.5,-.5),e.getValueRef(6).set(-.5,.5,-.5),e.getValueRef(7).set(-.5,-.5,-.5),this.setNumSegments(34),this.setSegmentVertexIndices(0,0,1),this.setSegmentVertexIndices(1,0,2),this.setSegmentVertexIndices(2,0,3),this.setSegmentVertexIndices(3,0,4),this.setSegmentVertexIndices(4,0,5),this.setSegmentVertexIndices(5,0,6),this.setSegmentVertexIndices(6,0,7),this.setSegmentVertexIndices(7,1,0),this.setSegmentVertexIndices(8,1,2),this.setSegmentVertexIndices(9,1,3),this.setSegmentVertexIndices(10,1,4),this.setSegmentVertexIndices(11,1,5),this.setSegmentVertexIndices(12,1,6),this.setSegmentVertexIndices(13,1,7),this.setSegmentVertexIndices(14,2,0),this.setSegmentVertexIndices(15,2,1),this.setSegmentVertexIndices(16,2,3),this.setSegmentVertexIndices(17,2,4),this.setSegmentVertexIndices(18,2,5),this.setSegmentVertexIndices(19,2,6),this.setSegmentVertexIndices(20,2,7),this.setSegmentVertexIndices(21,3,1),this.setSegmentVertexIndices(22,3,2),this.setSegmentVertexIndices(23,3,0),this.setSegmentVertexIndices(24,3,4),this.setSegmentVertexIndices(25,3,5),this.setSegmentVertexIndices(26,3,6),this.setSegmentVertexIndices(27,3,7),this.setSegmentVertexIndices(28,4,5),this.setSegmentVertexIndices(29,4,6),this.setSegmentVertexIndices(30,4,7),this.setSegmentVertexIndices(31,5,6),this.setSegmentVertexIndices(32,5,7),this.setSegmentVertexIndices(33,6,7)}}class So extends Xe{constructor(e,g){var t;super();this.glGeomItems=[null],this.glGeomItemEventHandlers=[],this.glGeomItemsMap={},this.glGeomItemsIndexFreeList=[],this.dirtyItemIndices=[],this.dirtyWorkerItemIndices=new Set,this.removedItemIndices=[],this.glGeomItemsTexture=null,this.xrPresenting=!1,this.xrFovY=0,this.xrProjectionMatrix=new Ee,this.debugOcclusionBuffer=!1,this.inFrustumIndicesCount=0,this.drawIdsBufferDirty=!1,this.timer_query_ext=null,this.renderer=e,this.enableFrustumCulling=g.enableFrustumCulling||g.enableOcclusionCulling;const I=this.renderer.gl;this.enableOcclusionCulling=g.enableOcclusionCulling&&I.name=="webgl2",this.debugOcclusionBuffer=(t=g.debugOcclusionBuffer)!==null&&t!==void 0?t:!1,this.enableFrustumCulling&&this.setupCullingWorker(e)}setupCullingWorker(e){this.worker=new Wo,this.worker.postMessage({type:"Init",enableOcclusionCulling:this.enableOcclusionCulling});let g=!0;this.worker.onmessage=F=>{F.data.type=="InFrustumIndices"?this.enableOcclusionCulling?(F.data.newlyCulled&&this.applyCullResults(F.data),this.calculateOcclusionCulling(F.data.inFrustumIndices)):(this.applyCullResults(F.data),this.emitCullingUpdateData(F.data),g=!0):F.data.type=="CullResults"?(this.applyCullResults(F.data),this.emitCullingUpdateData(F.data),g=!0):F.data.type=="Done"&&this.renderer.emit("CullingUpdated"),g=!0};const t=()=>{const F=e.getViewport(),a=e.getViewport().getCamera(),U=F.getWidth()/F.getHeight();if(a.isOrthographic()){const d=a.getFrustumHeight(),s=d*U;this.worker.postMessage({type:"ViewportChanged",frustumHeight:d,frustumWidth:s,isOrthographic:!0,solidAngleLimit:e.solidAngleLimit})}else{const d=a.getFov()*.5,s=Math.atan(Math.tan(d)*U);this.worker.postMessage({type:"ViewportChanged",frustumHalfAngleX:s,frustumHalfAngleY:d,isOrthographic:!1,solidAngleLimit:e.solidAngleLimit})}};e.on("resized",t);const I=e.getViewport().getCamera();I.on("projectionParamChanged",F=>{I.isOrthographic()&&t()}),t(),e.once("xrViewportSetup",F=>{this.xrViewport=F.xrViewport;const a=F.xrViewport;a.on("presentingChanged",U=>{if(this.xrPresenting=U.state,U.state){C=10;const d=Math.PI/180;let s=62*d,o=50*d;switch(a.getHMDName()){case"Vive":s*=.6,o*=.6;break;case"Oculus":s*=.5,o*=.5;break;default:s*=.5,o*=.5;break}this.xrFovY=s*2;const A=62/50,B=a.depthRange[0],Q=a.depthRange[1];this.xrProjectionMatrix.setPerspectiveMatrix(this.xrFovY,A,B,Q),this.worker.postMessage({type:"ViewportChanged",frustumHalfAngleX:o,frustumHalfAngleY:s,isOrthographic:!1,solidAngleLimit:e.solidAngleLimit})}else C=5,t(),n()})});let l=0,C=5;e.on("viewChanged",F=>{if(g){if(l%C==0){g=!1;const a=F.viewXfo.tr,U=F.viewXfo.ori;this.worker.postMessage({type:"ViewChanged",cameraPos:a.asArray(),cameraOri:U.asArray(),solidAngleLimit:e.solidAngleLimit})}l++}});const n=()=>{const a=e.getViewport().getCamera().globalXfoParam.value,U=a.tr,d=a.ori;this.worker.postMessage({type:"ViewChanged",cameraPos:U.asArray(),cameraOri:d.asArray(),solidAngleLimit:e.solidAngleLimit})};if(e.getViewport().getCamera().on("movementFinished",n),n(),this.enableOcclusionCulling){const F=this.renderer.gl;this.timer_query_ext=F.getExtension("EXT_disjoint_timer_query_webgl2");let a=1;const U=Math.ceil(this.renderer.getWidth()*a),d=Math.ceil(this.renderer.getHeight()*a);this.occlusionDataBuffer=new ZI(F,{type:F.FLOAT,format:F.RGBA,minFilter:F.NEAREST,magFilter:F.NEAREST,width:U,height:d,depthType:F.UNSIGNED_SHORT,depthFormat:F.DEPTH_COMPONENT,depthInternalFormat:F.DEPTH_COMPONENT16}),this.renderer.on("resized",s=>{this.xrPresenting||this.occlusionDataBuffer.resize(Math.ceil(s.width*a),Math.ceil(s.height*a))}),this.reductionDataBuffer=new ZI(F,{type:F.UNSIGNED_BYTE,internalFormat:F.R8,format:F.RED,minFilter:F.NEAREST,magFilter:F.NEAREST,width:1,height:1,depthType:F.UNSIGNED_SHORT,depthFormat:F.DEPTH_COMPONENT,depthInternalFormat:F.DEPTH_COMPONENT16}),this.bbox=new Ya(F,new uo),this.reductionShader=new ho(F),this.boundingBoxShader=new mo(F),this.boundingBoxShader.compileForTarget("GLGeomItemLibrary",{directives:this.renderer.directives}),this.inFrustumIndicesCount=0}}applyCullResults(e){e.newlyCulled&&e.newlyCulled.forEach(g=>{this.glGeomItems[g]&&this.glGeomItems[g].setCulled(!0)}),e.newlyUnCulled&&e.newlyUnCulled.forEach(g=>{this.glGeomItems[g]&&this.glGeomItems[g].setCulled(!1)}),this.renderer.requestRedraw()}emitCullingUpdateData(e){var g,t;this.renderer.emit("CullingUpdated",{culled:(g=e.newlyCulled)===null||g===void 0?void 0:g.length,unCulled:(t=e.newlyUnCulled)===null||t===void 0?void 0:t.length,visible:e.visible,total:e.total,visibleGeomStats:e.visibleGeomStats,totalGeomStats:e.totalGeomStats})}updateCulledDrawIDsBuffer(e){const g=this.renderer.gl;if(!g.floatTexturesSupported){this.drawIdsBufferDirty=!1;return}this.inFrustumDrawIdsBuffer&&this.inFrustumIndicesCount!=e.length&&(g.deleteBuffer(this.inFrustumDrawIdsBuffer),this.inFrustumDrawIdsBuffer=null),this.inFrustumDrawIdsBuffer||(this.inFrustumDrawIdsBuffer=g.createBuffer(),g.bindBuffer(g.ARRAY_BUFFER,this.inFrustumDrawIdsBuffer)),g.bindBuffer(g.ARRAY_BUFFER,this.inFrustumDrawIdsBuffer),g.bufferData(g.ARRAY_BUFFER,e,g.STATIC_DRAW),this.inFrustumIndicesCount=e.length,this.drawIdsBufferDirty=!1;const t=Math.max(4,q.nextPow2(Math.round(Math.sqrt(this.glGeomItems.length)+.5)));this.reductionDataBuffer.width!=t&&(this.reductionDataBuffer.resize(t,t),this.reductionDataArray=new Uint8Array(t*t))}calculateOcclusionCulling(e){if(e&&e.length>0&&this.updateCulledDrawIDsBuffer(e),this.inFrustumIndicesCount==0){this.worker.postMessage({type:"OcclusionData",visibleItems:[]});return}const g=this.renderer.gl,t={shaderopts:{}};this.renderer.bindGLBaseRenderer(t),t.directives=[...this.renderer.directives,"#define DRAW_GEOMDATA"],t.shaderopts.directives=t.directives,t.floatGeomBuffer=!0,t.occlusionCulling=1,this.xrPresenting?(this.xrViewport.initCullingRenderState(t),t.viewports[0].fovY=this.xrFovY,t.viewports[0].projectionMatrix=this.xrProjectionMatrix):this.renderer.getViewport().initRenderState(t);const I=V=>{this.occlusionDataBuffer.bindForWriting(V,!0),g.disable(g.BLEND),g.disable(g.CULL_FACE),g.enable(g.DEPTH_TEST),g.depthFunc(g.LESS),g.depthMask(!0),this.renderer.getPass(0).drawGeomData(V),this.renderer.getPass(1).drawGeomData(V),this.occlusionDataBuffer.unbindForWriting(V)},l=this.occlusionDataBuffer.width*this.occlusionDataBuffer.height,C=this.timer_query_ext,n=(V,h,m)=>{this.reductionDataBuffer.bindForWriting(V,h),h||(g.enable(g.BLEND),g.blendEquation(g.FUNC_ADD),g.blendFunc(g.SRC_COLOR,g.DST_COLOR)),this.reductionShader.bind(V);const{geomDataTexture:Z,reductionTextureWidth:c}=V.unifs;Z&&this.occlusionDataBuffer.bindToUniform(V,Z),c&&g.uniform1i(c.location,this.reductionDataBuffer.width),C&&g.beginQuery(C.TIME_ELAPSED_EXT,m),g.drawArrays(g.POINTS,0,l),C&&g.endQuery(C.TIME_ELAPSED_EXT),h||g.disable(g.BLEND),this.reductionDataBuffer.unbindForWriting(V)},F=()=>{this.occlusionDataBuffer.bindForWriting(t,!1),this.debugOcclusionBuffer||(g.colorMask(!0,!0,!0,!0),g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT)),this.boundingBoxShader.bind(t,"GLGeomItemLibrary"),this.bbox.bind(t);const{instancesTexture:V,instancesTextureSize:h,instancedDraw:m,reductionDataTexture:Z,occlusionCulling:c}=t.unifs;this.glGeomItemsTexture.bindToUniform(t,V),g.uniform1i(h.location,this.glGeomItemsTexture.width),g.uniform1i(m.location,1),g.uniform1i(c.location,1),this.reductionDataBuffer.bindColorTexture(t,Z);const W=t.attrs.instancedIds.location;g.enableVertexAttribArray(W),g.bindBuffer(g.ARRAY_BUFFER,this.inFrustumDrawIdsBuffer),g.vertexAttribPointer(W,1,g.FLOAT,!1,1*4,0),g.vertexAttribDivisor(W,1),t.bindViewports(t.unifs,()=>{this.bbox.drawInstanced(t,this.inFrustumIndicesCount)}),this.occlusionDataBuffer.unbindForWriting(t)};let a,U,d,s;C&&(a=g.createQuery(),g.beginQuery(C.TIME_ELAPSED_EXT,a)),I(t),C&&g.endQuery(C.TIME_ELAPSED_EXT),C&&(U=g.createQuery()),n(t,!0,U),C&&(d=g.createQuery(),g.beginQuery(C.TIME_ELAPSED_EXT,d)),F(),C&&g.endQuery(C.TIME_ELAPSED_EXT),C&&(s=g.createQuery()),n(t,!1,s);const o={numReductionPoints:l},A=(V,h)=>{const m=g.getQueryParameter(h,g.QUERY_RESULT_AVAILABLE),Z=g.getParameter(C.GPU_DISJOINT_EXT);if(m&&!Z){const c=g.getQueryParameter(h,g.QUERY_RESULT);o[V]=c/1e6,g.deleteQuery(h)}},B=this.reductionDataBuffer.width,Q=this.reductionDataBuffer.height,r=g.RED,R=g.UNSIGNED_BYTE;this.reductionDataBuffer.bindForReading(),Go(g,0,0,B,Q,r,R,this.reductionDataArray).then(()=>{this.reductionDataBuffer.unbindForReading(),C&&(A("queryDrawScene",a),A("queryDrawCulledBBoxes",d),A("queryReduceSceneGeoms",U),A("queryReduceBBoxes",s),this.renderer.emit("occlusionCullingProfilingData",o)),this.worker.postMessage({type:"OcclusionData",visibleItems:this.reductionDataArray})})}addGeomItem(e){let g=this.glGeomItemsMap[e.getId()];if(g!=null)return this.glGeomItems[g];performance.now();const t=e.materialParam;let I=t.value,l=-1;l=this.renderer.glMaterialLibrary.addMaterial(I);const C=()=>{this.renderer.glMaterialLibrary.removeMaterial(I),I=t.value,o.materialId=this.renderer.glMaterialLibrary.addMaterial(I),B(),A()};t.on("valueChanged",C);const n=e.geomParam;let F=n.value;const a=this.renderer.glGeomLibrary.addGeom(F),U=()=>{this.renderer.glGeomLibrary.removeGeom(F),F=n.value,o.geomId=this.renderer.glGeomLibrary.addGeom(F),this.enableFrustumCulling&&this.dirtyWorkerItemIndices.add(g),A()};n.on("valueChanged",U),this.glGeomItemsIndexFreeList.length>0?g=this.glGeomItemsIndexFreeList.pop():(g=this.glGeomItems.length,this.glGeomItems.push(null)),this.removedItemIndices.includes(g)&&this.removedItemIndices.splice(this.removedItemIndices.indexOf(g),1),this.dirtyItemIndices.push(g);const d=this.renderer.gl,s=d.floatTexturesSupported,o=new Ro(d,e,g,a,l,s),A=()=>{this.dirtyItemIndices.includes(g)||(this.dirtyItemIndices.push(g),this.renderer.drawItemChanged())};e.geomMatParam.on("valueChanged",A),e.on("cutAwayChanged",A),e.on("highlightChanged",A),e.on("selectabilityChanged",A),e.on("opacityChanged",A);const B=()=>{this.enableFrustumCulling&&(this.dirtyWorkerItemIndices.has(g)||(this.dirtyWorkerItemIndices.add(g),this.renderer.drawItemChanged()))};return this.enableFrustumCulling&&this.dirtyWorkerItemIndices.add(g),e.on("visibilityChanged",B),e.on("opacityChanged",B),e.geomMatParam.on("valueChanged",B),n.on("boundingBoxChanged",B),this.glGeomItems[g]=o,this.glGeomItemEventHandlers[g]={geomItemChanged:A,materialChanged:C,geomChanged:U,workerItemDataChanged:B},this.glGeomItemsMap[e.getId()]=g,this.renderer.requestRedraw(),o}removeGeomItem(e){const g=this.glGeomItemsMap[e.getId()];if(g==null)return null;const t=this.glGeomItems[g],I=e.geomParam.value;this.renderer.glGeomLibrary.removeGeom(I);const l=e.materialParam.value;this.renderer.glMaterialLibrary.removeMaterial(l);const C=this.glGeomItemEventHandlers[g],n=e.geomParam;return e.materialParam.off("valueChanged",C.materialChanged),n.off("valueChanged",C.geomChanged),e.geomMatParam.off("valueChanged",C.geomItemChanged),e.off("cutAwayChanged",C.geomItemChanged),e.off("highlightChanged",C.geomItemChanged),e.off("selectabilityChanged",C.geomItemChanged),e.off("opacityChanged",C.geomItemChanged),e.off("visibilityChanged",C.workerItemDataChanged),e.geomMatParam.off("valueChanged",C.workerItemDataChanged),n.off("boundingBoxChanged",C.workerItemDataChanged),e.off("opacityChanged",C.workerItemDataChanged),this.glGeomItems[g]=null,this.glGeomItemEventHandlers[g]=null,this.glGeomItemsIndexFreeList.push(g),delete this.glGeomItemsMap[e.getId()],this.removedItemIndices.push(g),this.dirtyWorkerItemIndices.has(g)&&this.dirtyWorkerItemIndices.delete(g),this.renderer.requestRedraw(),t}getGeomItem(e){var g;if(e>=this.glGeomItems.length){console.warn("Invalid Draw Item id:"+e+" NumItems:"+(this.glGeomItems.length-1));return}return(g=this.glGeomItems[e])===null||g===void 0?void 0:g.geomItem}getGLGeomItem(e){const g=this.glGeomItemsMap[e.getId()];return g!=null?this.glGeomItems[g]:null}populateDrawItemDataArray(e,g,t){const I=this.glGeomItems[e];if(!I)return;const{geomItem:l,geomId:C}=I,n=l.materialParam.value,F=hg*4,a=g*F;let U=0;l.isCutawayEnabled()&&(U|=ft.GEOMITEM_FLAG_CUTAWAY),l.isSelectable()||(U|=ft.GEOMITEM_INVISIBLE_IN_GEOMDATA),(!n.isOpaque()||!l.isOpaque())&&(U|=ft.GEOMITEM_TRANSPARENT);const d=new Be(new Float32Array(t.buffer,(a+0)*4,4));d.set(U,l.opacity,0,0);const s=this.renderer.glMaterialLibrary.getMaterialAllocation(n);s&&(d.z=s.start),d.w=C;const o=l.geomMatParam.value,A=new Be(new Float32Array(t.buffer,(a+1*4)*4,4)),B=new Be(new Float32Array(t.buffer,(a+2*4)*4,4)),Q=new Be(new Float32Array(t.buffer,(a+3*4)*4,4));A.set(o.xAxis.x,o.yAxis.x,o.zAxis.x,o.translation.x),B.set(o.xAxis.y,o.yAxis.y,o.zAxis.y,o.translation.y),Q.set(o.xAxis.z,o.yAxis.z,o.zAxis.z,o.translation.z);const r=new Be(new Float32Array(t.buffer,(a+4*4)*4,4));if(l.isHighlighted()){const Z=l.getHighlight();r.set(Z.r,Z.g,Z.b,Z.a)}const R=new Be(new Float32Array(t.buffer,(a+5*4)*4,4));if(l.isCutawayEnabled()){const Z=l.getCutVector(),c=l.getCutDist();R.set(Z.x,Z.y,Z.z,c)}const V=l.boundingBoxParam.value,h=new Be(new Float32Array(t.buffer,(a+6*4)*4)),m=new Be(new Float32Array(t.buffer,(a+7*4)*4));h.set(V.p0.x,V.p0.y,V.p0.z,0),m.set(V.p1.x,V.p1.y,V.p1.z,0)}getCullingWorkerData(e,g,t){const I=e.boundingBoxParam.value,l=I.size()*.5,C=I.center();let n=e.cullable!=!1;const F=g.getParameter("MaintainScreenSize");F&&F.value&&(n=!1),g.getShaderName().startsWith("ScreenSpace")&&(n=!1),g.hasParameter("PointSize")&&(n=!1),this.enableOcclusionCulling&&!e.isSelectable()&&(n=!1);const a=!e.isOpaque()||!g.isOpaque(),U={triangles:0,lines:0,points:0},d=e.geomParam.value;if(d instanceof hI)U.triangles+=d.getNumTriangles(),U.lines+=d.getNumLineSegments(),U.points+=d.getNumPoints();else if(d instanceof ht||d instanceof Kg)U.triangles+=d.getNumTriangles();else if(d instanceof sg||d instanceof Gg)U.lines+=d.getNumLineSegments();else if(d instanceof Rt||d instanceof ct)U.points+=d.getNumVertices();else throw new Error("Unsupported geom type:"+d.constructor.name);return{id:t,boundingRadius:l,pos:C.asArray(),cullable:n,visible:e.isVisible(),transparent:a,geomStats:U}}uploadGeomItemsToWorker(){if(this.enableFrustumCulling){const e=[];this.dirtyWorkerItemIndices.forEach(g=>{const t=this.glGeomItems[g];if(!t)return;const{geomItem:I}=t,l=I.materialParam.value;e.push(this.getCullingWorkerData(I,l,g))}),this.worker.postMessage({type:"UpdateGeomItems",geomItems:e,removedItemIndices:this.removedItemIndices}),this.dirtyWorkerItemIndices.clear(),this.removedItemIndices=[]}}uploadGeomItems(e){const g=this.renderer.gl;if(!g.floatTexturesSupported)return;let t=Math.round(Math.sqrt(this.glGeomItems.length*hg)+.5);t=q.nextPow2(t),t%hg!=0&&(t+=hg-t%hg),this.glGeomItemsTexture?this.glGeomItemsTexture.width!=t&&(this.glGeomItemsTexture.resize(t,t),this.dirtyItemIndices=Array(t*t/hg).fill(0).map((l,C)=>C)):(this.glGeomItemsTexture=new Te(g,{format:"RGBA",type:"FLOAT",width:t,height:t,filter:"NEAREST",wrap:"CLAMP_TO_EDGE",mipMapped:!1}),this.glGeomItemsTexture.clear()),g.bindTexture(g.TEXTURE_2D,this.glGeomItemsTexture.glTex);const I=this.glGeomItemsTexture.getType();for(let l=0;l<this.dirtyItemIndices.length;l++){const C=this.dirtyItemIndices[l],n=Math.floor(C*hg/t);let F=C+1;for(let A=l+1;A<this.dirtyItemIndices.length;A++){const B=this.dirtyItemIndices[A];if(Math.floor(B*hg/t)!=n||B!=F)break;F++}const a=F-C,U=C*hg%t,d=hg*a,s=1,o=new Float32Array(hg*4*a);for(let A=C;A<F;A++)this.populateDrawItemDataArray(A,A-C,o);if(I==g.FLOAT)this.glGeomItemsTexture.populate(o,d,s,U,n,!1);else{const A=q.convertFloat32ArrayToUInt16Array(o);this.glGeomItemsTexture.populate(A,d,s,U,n,!1)}l+=a-1}this.removedItemIndices=[],this.dirtyItemIndices=[]}bind(e){(this.dirtyWorkerItemIndices.size>0||this.removedItemIndices.length>0)&&this.uploadGeomItemsToWorker(),this.dirtyItemIndices.length>0&&this.uploadGeomItems(e);const g=this.renderer.gl,{instancesTexture:t,instancesTextureSize:I}=e.unifs;t&&(this.glGeomItemsTexture.bindToUniform(e,t),g.uniform1i(I.location,this.glGeomItemsTexture.width))}}let Cg,pt=!1,ll=!1;const iI={};class No extends xt{constructor(e,g={}){var t;super();if(this.listenerIDs={},this.directives=[],this.solidAngleLimit=.004,this.__glcanvas=null,this.__scene=null,this.__shaderDirectives={},this.__renderGeomDataFbosRequested=!1,this.__shaders={},this.__passes={},this.passAssignments={},this.__passesRegistrationOrder=[],this.__passCallbacks=[],this.__viewports=[],this.__activeViewport=void 0,this.__continuousDrawing=!1,this.__redrawRequested=!1,this.__isMobile=!1,this.__drawSuspensionLevel=0,this.__xrViewportPresenting=!1,this.floatGeomBuffer=!0,this.__supportXR=!1,this.__xrViewport=void 0,this.screenQuad=null,!_e.gpuDesc)throw new Error("Unable to create renderer. WebGL not Supported");this.__isMobile=_e.isMobileDevice,this.requestRedraw=this.requestRedraw.bind(this),this.__gl=this.setupWebGL(e,g),this.screenQuad=new lo(this.__gl,{directives:this.directives}),this.bindEventHandlers();const I=this.addViewport("main");I.debugGeomDataBuffer=g.debugGeomDataBuffer,I.debugOcclusionBuffer=g.debugOcclusionBuffer,this.glMaterialLibrary=new Qo(this),this.glMaterialLibrary.on("updated",()=>{this.requestRedraw()}),this.glGeomLibrary=new ro(this),this.glGeomLibrary.on("updated",()=>{this.requestRedraw()}),this.glGeomItemLibrary=new So(this,g),this.glGeomItemLibrary.on("updated",()=>{this.requestRedraw()});for(const l in iI)for(const C of iI[l])this.addPass(new C,parseInt(l),!1);this.__supportXR=(t=g.supportXR)!==null&&t!==void 0?t:!0,this.__xrViewportPromise=new Promise((l,C)=>{var n,F;if(this.__supportXR&&!((n=navigator)===null||n===void 0)&&n.xr){const a=()=>{this.__gl.makeXRCompatible().then(()=>{this.__xrViewport=this.__setupXRViewport();let U=new BU(this.__xrViewport);this.emit("xrViewportSetup",U),l(this.__xrViewport)})};(F=navigator)===null||F===void 0||F.xr.isSessionSupported("immersive-vr").then(U=>{U&&a()}).catch(U=>{console.warn("Unable to setup XR:"+U)})}})}addShaderPreprocessorDirective(e,g){g?this.__shaderDirectives[e]="#define "+e+" = "+g:this.__shaderDirectives[e]="#define "+e;const t=[];for(const I in this.__shaderDirectives)t.push(this.__shaderDirectives[I]);this.directives=t}getWidth(){return this.__glcanvas.width}getHeight(){return this.__glcanvas.height}addViewport(e){const g=this,t=new Co(g,e,this.getWidth(),this.getHeight()),I=()=>{this.requestRedraw()},l=C=>{this.__xrViewportPresenting||this.emit("viewChanged",C)};return t.on("updated",I),t.on("viewChanged",l),this.__viewports.push(t),this.__activeViewport=t,t}getViewport(e=0){return this.__viewports[e]}getViewportAtPos(e,g){for(const t of this.__viewports){const I=t.getPosX(),l=t.getPosY(),C=t.getWidth(),n=t.getHeight();if(e>=I&&g>=l&&e<=C+I&&g<=n+l)return t}}activateViewport(e){this.__activeViewport!=e&&(this.__activeViewport=e)}activateViewportAtPos(e,g){if(this.__xrViewportPresenting)return;const t=this.getViewportAtPos(e,g);t&&t!=this.__activeViewport&&this.activateViewport(t)}getActiveViewport(){return this.__activeViewport}suspendDrawing(){this.__drawSuspensionLevel++}resumeDrawing(){this.__drawSuspensionLevel--,this.__drawSuspensionLevel==0&&(this.renderGeomDataFbos(),this.requestRedraw())}renderGeomDataFbos(){if(this.__renderGeomDataFbosRequested==!0)return;this.__renderGeomDataFbosRequested=!0;const e=()=>{for(const g of this.__viewports)g.renderGeomDataFbo();this.__renderGeomDataFbosRequested=!1};window.requestAnimationFrame(e)}getScene(){return this.__scene}setScene(e){this.__scene=e,this.addTreeItem(this.__scene.getRoot());let g=new aU(this.__scene);this.emit("sceneSet",g)}addTreeItem(e){if(!(e instanceof H))return;const g=e.getId(),t={};if(this.listenerIDs[g]=t,e instanceof ge){const I=e.geomParam;if(I.value==null){const l=()=>{delete t["Geometry.valueChanged"],this.assignTreeItemToGLPass(e)};t["Geometry.valueChanged"]=I.once("valueChanged",l)}else this.assignTreeItemToGLPass(e)}else this.assignTreeItemToGLPass(e);for(const I of e.getChildren())I&&this.addTreeItem(I);t.childAdded=e.on("childAdded",I=>{this.addTreeItem(I.childItem)}),t.childRemoved=e.on("childRemoved",I=>{this.removeTreeItem(I.childItem)}),this.renderGeomDataFbos()}assignTreeItemToGLPass(e){if(e instanceof ge){const t=e;this.glGeomItemLibrary.addGeomItem(t)}let g=!1;for(let t=this.__passesRegistrationOrder.length-1;t>=0;t--){const I=this.__passesRegistrationOrder[t],l={continueInSubTree:!0};if(g=I.itemAddedToScene(e,l),g){if(this.passAssignments[e.getId()]=t,!l.continueInSubTree)return;break}}if(!g)for(const t of this.__passCallbacks){const I={continueInSubTree:!0};if(t.itemAddedFn(e,I)){if(!I.continueInSubTree)return;break}}}removeTreeItem(e){if(!(e instanceof H))return;const g=e.getId(),t=this.listenerIDs[g];delete this.listenerIDs[g],e.removeListenerById("childAdded",t.childAdded),e.removeListenerById("childRemoved",t.childRemoved);const I=this.passAssignments[g];if(I!=null){const l=this.getPass(I),C={continueInSubTree:!0};l.itemRemovedFromScene(e,C),delete this.passAssignments[g]}for(const l of e.getChildren())l&&this.removeTreeItem(l);if(e instanceof ge){const l=e;t["Geometry.valueChanged"]&&e.geomParam.removeListenerById("valueChanged",t["Geometry.valueChanged"]),this.glGeomItemLibrary.removeGeomItem(l)}this.renderGeomDataFbos()}get gl(){return this.__gl}getGL(){return this.__gl}handleResize(e,g){if(this.__xrViewportPresenting)return;const t=Math.max(4,e),I=Math.max(4,g);this.__glcanvas.width=t,this.__glcanvas.height=I,this.__viewports.forEach(C=>{C.resize(t,I)});const l=new Hg(t,I);this.emit("resized",l),this.requestRedraw()}getDiv(){return this.__glcanvas.parentElement}setupWebGL(e,g={}){var t,I;const{tagName:l}=e;if(!["DIV","CANVAS"].includes(l))throw new Error("Only CANVAS and DIV are valid root elements.");const C=l==="DIV";this.__glcanvas=e,C?(console.warn("@GLBaseRenderer#setupWebGL.","Using a DIV as root element is deprecated.","Use a CANVAS instead.","See: https://docs.zea.live/zea-engine/#/getting-started/get-started-with-engine?id=basic-setup"),this.__glcanvas=document.createElement("canvas"),e.appendChild(this.__glcanvas)):this.__glcanvas=e,this.__glcanvas.style["touch-action"]="none",this.__glcanvas.parentElement.style.position="relative",this.__glcanvas.parentElement.style.overflow="hidden",this.__glcanvas.style.position="absolute";const n=eo(d=>{if(!(!Array.isArray(d)||!d.length))for(const s of d){if(!s.contentRect)return;const o=Math.round(s.contentRect.width),A=Math.round(s.contentRect.height);this.handleResize(o,A)}},500);window.addEventListener("resize",()=>{const d=[{contentRect:{width:this.__glcanvas.parentElement.clientWidth,height:this.__glcanvas.parentElement.clientHeight}}];n(d)});const F=new ResizeObserver(n);try{F.observe(this.__glcanvas.parentNode,{box:"device-pixel-content-box"})}catch{F.observe(this.__glcanvas.parentNode,{box:"content-box"})}this.handleResize(this.__glcanvas.parentElement.clientWidth,this.__glcanvas.parentElement.clientHeight);const a={};a.preserveDrawingBuffer=!0,a.antialias=(t=g.antialias)!==null&&t!==void 0?t:!0,a.depth=!0,a.stencil=!1,a.alpha=(I=g.alpha)!==null&&I!==void 0?I:!1,a.xrCompatible=!1,a.powerPreference=g.powerPreference||"high-performance";const U=Gd(this.__glcanvas,a);U||alert("Unable to create WebGL context. WebGL not supported."),U.name=="webgl2"&&this.addShaderPreprocessorDirective("ENABLE_ES3"),U.floatTexturesSupported&&this.addShaderPreprocessorDirective("ENABLE_FLOAT_TEXTURES");{const d=_e.browserName=="Safari"&&_e.fullVersion=="15.4";d&&console.warn("Disabling multi-draw on Safari 15.4 due to a regression in WebKit",_e),a.disableMultiDraw=g.disableMultiDraw||d;const s=U.name=="webgl2"?U.getExtension("WEBGL_multi_draw"):null;s&&!a.disableMultiDraw?(U.multiDrawArrays=s.multiDrawArraysWEBGL.bind(s),U.multiDrawElements=s.multiDrawElementsWEBGL.bind(s),U.multiDrawElementsInstanced=s.multiDrawElementsInstancedWEBGL.bind(s),U.multiDrawArraysInstanced=s.multiDrawArraysInstancedWEBGL.bind(s)):this.addShaderPreprocessorDirective("EMULATE_MULTI_DRAW")}return _e.browserName=="Safari"&&U.name=="webgl"?this.floatGeomBuffer=!1:this.floatGeomBuffer=g.floatGeomBuffer!=null?g.floatGeomBuffer:U.floatTexturesSupported,U.floatGeomBuffer=this.floatGeomBuffer,U}bindEventHandlers(){const e=()=>this.getWidth()>0&&this.getHeight(),g=I=>_e.isMobileDevice?(console.warn("Mobile device is triggering mouse event:",I.type),!0):!1;this.__glcanvas.addEventListener("mousedown",I=>{if(g(I))return;const l=new fg(I,this.__glcanvas.getBoundingClientRect());pt=!0,Cg=this,this.activateViewportAtPos(l.rendererX,l.rendererY);const C=this.getActiveViewport();C&&C.onPointerDown(l),ll=!1}),document.addEventListener("mouseup",I=>{if(g(I)||Cg!=this||!e())return;const l=new fg(I,this.__glcanvas.getBoundingClientRect());pt=!1;const C=this.getActiveViewport();C&&C.onPointerUp(l),ll&&(C&&C.onPointerLeave(l),Cg=void 0)}),document.addEventListener("mousemove",I=>{if(g(I)||Cg!=this||!e())return;const l=new fg(I,this.__glcanvas.getBoundingClientRect());pt||this.activateViewportAtPos(l.rendererX,l.rendererY);const C=this.getActiveViewport();C&&C.onPointerMove(l)}),this.__glcanvas.addEventListener("mouseenter",I=>{if(!g(I)&&!pt){Cg=this;const l=new fg(I,this.__glcanvas.getBoundingClientRect());if(this.activateViewportAtPos(l.rendererX,l.rendererY),!pt){const C=this.getActiveViewport();C&&C.onPointerEnter(l)}ll=!1}}),this.__glcanvas.addEventListener("mouseleave",I=>{if(g(I)||Cg!=this||!e())return;const l=new fg(I,this.__glcanvas.getBoundingClientRect());if(pt)ll=!0;else{const C=this.getActiveViewport();C&&C.onPointerLeave(l),Cg=void 0}}),document.addEventListener("contextmenu",I=>{Cg!=this||!e()||(I.preventDefault(),I.stopPropagation())}),this.__glcanvas.addEventListener("touchstart",I=>{Cg=this;const l=this.getActiveViewport(),C=new nt(I,this.__glcanvas.getBoundingClientRect());l.onPointerDown(C)},{passive:!0}),this.__glcanvas.addEventListener("touchend",I=>{const l=this.getActiveViewport(),C=new nt(I,this.__glcanvas.getBoundingClientRect());l.onPointerUp(C)},{passive:!0}),this.__glcanvas.addEventListener("touchmove",I=>{const l=this.getActiveViewport(),C=new nt(I,this.__glcanvas.getBoundingClientRect());l.onPointerMove(C)},{passive:!0}),this.__glcanvas.addEventListener("touchcancel",I=>{const l=this.getActiveViewport(),C=new nt(I,this.__glcanvas.getBoundingClientRect());l.onTouchCancel(C)},{passive:!0});const t=I=>{if(!(Cg!=this||!e())&&Cg){const l=new QU(I,this.__glcanvas.getBoundingClientRect()),C=Cg.getActiveViewport();C&&C.onWheel(l)}};window.addEventListener("wheel",t,{passive:!1}),document.addEventListener("keydown",I=>{if(Cg!=this||!e())return;const l=new qi(I),C=Cg.getActiveViewport();C&&C.onKeyDown(l)}),document.addEventListener("keyup",I=>{if(Cg!=this||!e())return;const l=new qi(I),C=Cg.getActiveViewport();C&&C.onKeyUp(l)})}getGLCanvas(){return this.__glcanvas}frameAll(e=0){this.__viewports[e].frameView([this.__scene.getRoot()])}getOrCreateShader(e){let g=this.__shaders[e];return g||(g=S.constructClass(e),g||console.error("@GLBaseRenderer#getOrCreateShader - Shader not registered with the Registry:",e),g.setGLContext(this.__gl),this.__shaders[e]=g),g}addPass(e,g=-1,t=!0){g==-1&&(g=e.getPassType()),this.__passes[g]||(this.__passes[g]=[]);let I=0;for(const l in this.__passes){if(l==g.toString())break;I+=this.__passes[l].length}if(I+=this.__passes[g].length,e.on("updated",l=>{this.requestRedraw(),this.renderGeomDataFbos()}),e.init(this,I),this.__passes[g].push(e),t){let l=0;for(const C in this.__passes){const n=this.__passes[C];n.forEach((F,a)=>{F.setPassIndex(l+a)}),l+=n.length}}return this.__passesRegistrationOrder.push(e),this.requestRedraw(),I}getPass(e){let g=0;for(const t in this.__passes){const I=this.__passes[t];if(e-g<I.length)return I[e-g];g+=I.length}}supportsVR(){var e;return console.warn("@GLBaseRenderer#supportVR - Deprecated Method. Please instead connect to the vrViewportSetup signal."),this.__supportXR&&((e=navigator)===null||e===void 0?void 0:e.xr)!=null}__setupXRViewport(){const e=new Fo(this),g=t=>{this.emit("viewChanged",t)};return e.on("presentingChanged",t=>{const I=t.state;if(this.__xrViewportPresenting!=I)if(this.__xrViewportPresenting=I,I){for(const l in this.__passes){const C=this.__passes[l];for(const n of C)n.startPresenting()}e.on("viewChanged",g)}else{e.off("viewChanged",g),this.emit("updated");for(const n in this.__passes){const F=this.__passes[n];for(const a of F)a.stopPresenting()}const l=this.getViewport().getCamera().globalXfoParam.value,C=new zC("CameraAndPointer",l);this.emit("viewChanged",C),this.requestRedraw()}}),e}getVRViewport(){return this.__xrViewport}getXRViewport(){return this.__xrViewportPromise}isXRViewportPresenting(){return this.__xrViewportPresenting}isContinuouslyDrawing(){return this.__continuousDrawing}startContinuousDrawing(){if(this.isContinuouslyDrawing()||this.__xrViewportPresenting)return;const e=()=>{this.__continuousDrawing&&!this.__xrViewportPresenting&&window.requestAnimationFrame(e);for(const g of this.__viewports)g.draw()};this.__continuousDrawing=!0,window.requestAnimationFrame(e)}stopContinuousDrawing(){this.__continuousDrawing=!1}toggleContinuousDrawing(){this.__continuousDrawing?this.stopContinuousDrawing():this.startContinuousDrawing()}drawItemChanged(){for(const e of this.__viewports)e.invalidateGeomDataBuffer();this.requestRedraw()}requestRedraw(){if(this.__redrawRequested||this.__continuousDrawing||this.__xrViewportPresenting||this.__drawSuspensionLevel>0)return!1;const e=()=>{this.__redrawRequested=!1;for(const g of this.__viewports)g.draw()};return window.requestAnimationFrame(e),this.__redrawRequested=!0,!0}forceRender(){if(!this.__redrawRequested){console.warn("@GlBaseRenderer#forceRender - Scene is not dirty");return}this.__redrawRequested=!1;for(const e of this.__viewports)e.draw()}bindGLBaseRenderer(e){e.gl=this.__gl,e.shaderopts={directives:this.directives};const g=this.__gl;!e.viewports||e.viewports.length==1?(e.bindRendererUnifs=t=>{const{cameraMatrix:I,viewMatrix:l,projectionMatrix:C,eye:n,isOrthographic:F}=t;I&&g.uniformMatrix4fv(I.location,!1,e.cameraMatrix.asArray());const a=e.viewports[0];l&&g.uniformMatrix4fv(l.location,!1,a.viewMatrix.asArray()),C&&g.uniformMatrix4fv(C.location,!1,a.projectionMatrix.asArray()),n&&g.uniform1i(n.location,0),F&&g.uniform1i(F.location,a.isOrthographic)},e.bindViewports=(t,I)=>I()):(e.bindRendererUnifs=t=>{const{cameraMatrix:I}=t;I&&g.uniformMatrix4fv(I.location,!1,e.cameraMatrix.asArray())},e.bindViewports=(t,I)=>{e.viewports.forEach((l,C)=>{let n=l.region;g.viewport(n[0],n[1],n[2],n[3]);const{viewMatrix:F,projectionMatrix:a,eye:U,isOrthographic:d}=t;F&&g.uniformMatrix4fv(F.location,!1,l.viewMatrix.asArray()),a&&g.uniformMatrix4fv(a.location,!1,l.projectionMatrix.asArray()),U&&g.uniform1i(U.location,C),d&&g.uniform1i(d.location,l.isOrthographic),I()})})}drawScene(e){e.directives=[...this.directives,"#define DRAW_COLOR"],e.shaderopts.directives=e.directives;for(const g in this.__passes){const t=this.__passes[g];for(const I of t)I.enabled&&I.draw(e)}}drawHighlightedGeoms(e){this.bindGLBaseRenderer(e),e.directives=[...this.directives,"#define DRAW_HIGHLIGHT"],e.shaderopts.directives=e.directives;for(const g in this.__passes){const t=this.__passes[g];for(const I of t)I.enabled&&I.drawHighlightedGeoms(e)}}drawSceneGeomData(e,g=255){this.bindGLBaseRenderer(e),e.directives=[...this.directives,"#define DRAW_GEOMDATA"],e.shaderopts.directives=e.directives,e.floatGeomBuffer=this.floatGeomBuffer;for(const t in this.__passes){if((Number.parseInt(t)&g)==0)continue;const I=this.__passes[t];for(const l of I)l.enabled&&l.drawGeomData(e)}}static registerPass(e,g){iI[g]||(iI[g]=[]),iI[g].push(e)}destroy(){this.resizeObserver.disconnect()}}var po=`
precision highp float;
#define GLSLIFY 1

uniform float outlineThickness;
uniform sampler2D highlightDataTexture;
uniform vec2 highlightDataTextureSize;

varying vec2 v_texCoord;

vec3 SobelFactor(vec3 ldc, vec3 ldl, vec3 ldr, vec3 ldu, vec3 ldd)
{
  return abs(ldl - ldc) +
      abs(ldr - ldc) +
      abs(ldu - ldc) +
      abs(ldd - ldc);
}

// https://github.com/ssell/UnitySobelOutline/blob/2e1f4a5b4e703ae2c96aaf08d5518ce58abbaab9/Assets/Resources/Shaders/SobelOutlineHLSL.shader#L18
vec4 SobelSample(vec2 uv)
{
  vec3 offset = vec3((1.0 / highlightDataTextureSize.x), (1.0 / highlightDataTextureSize.y), 0.0) * outlineThickness;

  vec4 pixelCenter = texture2D(highlightDataTexture, uv);
  vec3 pixelLeft   = texture2D(highlightDataTexture, uv - offset.xz).rgb;
  vec3 pixelRight  = texture2D(highlightDataTexture, uv + offset.xz).rgb;
  vec3 pixelUp     = texture2D(highlightDataTexture, uv + offset.zy).rgb;
  vec3 pixelDown   = texture2D(highlightDataTexture, uv - offset.zy).rgb;

  vec3 sobelNormalVec = SobelFactor(pixelCenter.rgb, pixelLeft, pixelRight, pixelUp, pixelDown);
  
  float sobelNormal = sobelNormalVec.x + sobelNormalVec.y + sobelNormalVec.z;
  
  float outlineDepthMultiplier = 10.0;
  float outlineDepthBias = 2.5;
  sobelNormal = pow(sobelNormal * outlineDepthMultiplier, outlineDepthBias);

  sobelNormal = clamp(sobelNormal, 0.0, 1.0);

  
  float pixelCenterWeight = length(pixelCenter.rgb) > 0.0 ? 1.0 : 0.0;
  float pixelLeftWeight   = length(pixelLeft) > 0.0 ? 1.0 : 0.0;
  float pixelRightWeight  = length(pixelRight) > 0.0 ? 1.0 : 0.0;
  float pixelUpWeight     = length(pixelUp) > 0.0 ? 1.0 : 0.0;
  float pixelDownWeight   = length(pixelDown) > 0.0 ? 1.0 : 0.0;
  
  // Weight each neighbors contribution to the current pixel color.
  pixelCenter.rgb = pixelCenter.rgb * pixelCenterWeight;
  pixelLeft   *= pixelLeftWeight;
  pixelRight  *= pixelRightWeight;
  pixelUp     *= pixelUpWeight;
  pixelDown   *= pixelDownWeight;

  // Add all the weighted contributions, and then normalize.
  vec3 outlineColor = pixelCenter.rgb + pixelLeft + pixelRight +  pixelUp + pixelDown;
  outlineColor /= pixelCenterWeight + pixelLeftWeight + pixelRightWeight + pixelUpWeight + pixelDownWeight;

  return mix(vec4(outlineColor, sobelNormal), pixelCenter, pixelCenter.a);
}

#ifdef ENABLE_ES3
out vec4 fragColor;
#endif

void main(void) {
    
  vec4 outlineColor = SobelSample(v_texCoord);
  
  if (outlineColor.a > 0.0001) {
#ifndef ENABLE_ES3
    gl_FragColor = outlineColor;
#else
    fragColor = outlineColor;
#endif
  }
  else {
      discard;
  }
}

`,yo=`
precision highp float;
#define GLSLIFY 1

attribute vec3 positions;    //(location = 0)

/* VS Outputs */
varying vec2 v_texCoord;
 
void main()
{
  v_texCoord = positions.xy+0.5;
  gl_Position = vec4(positions.xy*2.0, 0.0, 1.0);
}

`;class Xo extends Pe{constructor(e){super(e,"HighlightsShader");this.setShaderStage("VERTEX_SHADER",yo),this.setShaderStage("FRAGMENT_SHADER",po)}}var ko=`
#ifndef ENABLE_ES3
#extension GL_EXT_frag_depth: enable
#endif
precision highp float;
#define GLSLIFY 1

uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
uniform vec2 screenSize;
uniform vec2 depthRange;

uniform float outlineThickness;
uniform color outlineColor;
uniform float outlineSensitivity;
uniform float outlineDepthBias;

varying vec2 v_texCoord;

// http://web.archive.org/web/20130416194336/http://olivers.posterous.com/linear-depth-in-glsl-for-real
float LinearEyeDepth(float z_b) {
  float z_n = 2.0 * z_b - 1.0;
  float z_e = 2.0 * depthRange.x * depthRange.y / (depthRange.y + depthRange.x - z_n * (depthRange.y - depthRange.x));
  return z_e;
}

float LogEyeDepth(float z_b) {
  return depthRange.x + ((depthRange.y - depthRange.x) * z_b);
}

// https://www.vertexfragment.com/ramblings/unity-postprocessing-sobel-outline/#depth-based-outline
// https://github.com/ssell/UnitySobelOutline/blob/2e1f4a5b4e703ae2c96aaf08d5518ce58abbaab9/Assets/Resources/Shaders/SobelOutlineHLSL.shader

float SobelDepth(float ldc, float ldl, float ldr, float ldu, float ldd)
{
  return abs(ldl - ldc) +
      abs(ldr - ldc) +
      abs(ldu - ldc) +
      abs(ldd - ldc);
}

float SobelSampleDepth(vec2 uv, vec3 offset)
{
  float pixelCenter = LinearEyeDepth(texture2D(depthTexture, uv).r);
  float pixelLeft   = LinearEyeDepth(texture2D(depthTexture, uv - offset.xz).r);
  float pixelRight  = LinearEyeDepth(texture2D(depthTexture, uv + offset.xz).r);
  float pixelUp     = LinearEyeDepth(texture2D(depthTexture, uv + offset.zy).r);
  float pixelDown   = LinearEyeDepth(texture2D(depthTexture, uv - offset.zy).r);

  float  outlineDepthMultiplier = (1.0 / pixelCenter) * outlineSensitivity;

  return SobelDepth(pixelCenter, pixelLeft, pixelRight, pixelUp, pixelDown) * outlineDepthMultiplier;
}

#ifdef ENABLE_ES3
  out vec4 fragColor;
#endif
void main(void) {
#ifndef ENABLE_ES3
  vec4 fragColor;
#endif

  vec3 offset = vec3((1.0 / screenSize.x), (1.0 / screenSize.y), 0.0) * outlineThickness;
  float sobelDepth = SobelSampleDepth(v_texCoord, offset);
  float sobelValue = pow(sobelDepth, outlineDepthBias);

  float minEdgeValue = 0.25;
  float maxEdgeValue = 0.55;
  sobelDepth = smoothstep(minEdgeValue, maxEdgeValue, sobelValue);

#ifdef ENABLE_ES3
  fragColor = vec4(outlineColor.rgb, sobelDepth);
#else
  fragColor = vec4(mix(texture2D(colorTexture, v_texCoord).rgb, outlineColor.rgb, sobelDepth), 1.0);
#ifdef  GL_EXT_frag_depth
  gl_FragDepthEXT = texture2D(depthTexture, v_texCoord).r;
#endif
#endif

  // float z = texture2D(depthTexture, v_texCoord).r;
  // float near = depthRange.x * 2.0;    // the near plane
  // float far = depthRange.y / 2.0;     // the far plane
  // float c = (2.0 * near) / (far + near - z * (far - near));  // convert to linear values 
  // fragColor = vec4(vec3(c), 1.0);

  

#ifndef ENABLE_ES3
  gl_FragColor = fragColor;
#endif
}
`,fo=`
precision highp float;
#define GLSLIFY 1
attribute vec3 positions;    //(location = 0)

/* VS Outputs */
varying vec2 v_texCoord;
 
void main()
{
  v_texCoord = positions.xy+0.5;
  gl_Position = vec4(positions.xy*2.0, 0.0, 1.0);
}
`;class Eo extends Pe{constructor(e){super(e,"SilhouetteShader");this.setShaderStage("VERTEX_SHADER",fo),this.setShaderStage("FRAGMENT_SHADER",ko)}}const nI=dg.OPAQUE|dg.TRANSPARENT|dg.OVERLAY;class zt extends No{constructor(e,g={}){super(e,g);this.__glEnvMap=null,this.__rayCastRenderTarget=null,this.__backgroundMapShader=null,this.__backgroundMapShaderBinding=null,this.__rayCastRenderTargetProjMatrix=new Ee,this.__exposure=1,this.__tonemap=!0,this.__gamma=2.2,this.__displayEnvironment=!0,this.__debugMode=0,this._planeDist=0,this.__cutPlaneNormal=new b(1,0,0),this.rayCastDist=0,this.rayCastArea=0;const t=this.__gl;this.highlightsShader=new Xo(t),this.silhouetteShader=new Eo(t),this.highlightOutlineThickness=1,this.outlineThickness=0,this.outlineColor=new E(.15,.15,.15,1),this.outlineSensitivity=2,this.outlineDepthBias=.7,this.__debugTextures=[void 0],this.addShaderPreprocessorDirective("ENABLE_INLINE_GAMMACORRECTION"),g.disableTextures||this.addShaderPreprocessorDirective("ENABLE_TEXTURES"),g.debugGeomIds&&this.addShaderPreprocessorDirective("DEBUG_GEOM_ID")}__bindEnvMap(e){const g=this.__gl;if(e instanceof Fi){if(g.name!=="webgl2")return;e.type==="FLOAT"&&(this.addShaderPreprocessorDirective("ENABLE_PBR"),this.__glEnvMap=new Zs(this,e))}else{const I=e;if(I.type==="FLOAT"?this.__glBackgroundMap=new DI(this.__gl,I):this.__glBackgroundMap=new Te(this.__gl,I),this.__glBackgroundMap.on("loaded",()=>{this.requestRedraw()}),this.__glBackgroundMap.on("updated",()=>{this.requestRedraw()}),!this.__backgroundMapShader){g.__quadVertexIdsBuffer||g.setupInstancedQuad(),this.__backgroundMapShader=new ka(this.__gl);const l=this.__backgroundMapShader.compileForTarget();this.__backgroundMapShaderBinding=og(this.__gl,l.attrs,g.__quadattrbuffers,g.__quadIndexBuffer)}return}this.__glEnvMap.on("loaded",I=>{this.requestRedraw()}),this.__glEnvMap.on("updated",I=>{this.requestRedraw()});const t=new lU(this.__glEnvMap);this.emit("envMapAssigned",t)}setScene(e){const g=e.envMapParam;g.value!=null&&this.__bindEnvMap(g.value),g.on("valueChanged",()=>{this.__bindEnvMap(g.value)});const t=e.displayEnvMapParam;this.__displayEnvironment=t.value,t.on("valueChanged",()=>{this.__displayEnvironment=t.value,this.requestRedraw()}),super.setScene(e)}addViewport(e){return super.addViewport(e)}get exposure(){return this.__exposure}set exposure(e){this.__exposure=e,this.requestRedraw()}get gamma(){return this.__gamma}set gamma(e){this.__gamma=e,this.requestRedraw()}get displayEnvironment(){return this.__displayEnvironment}set displayEnvironment(e){this.__displayEnvironment=e,this.requestRedraw()}raycastWithRay(e,g,t=.01,I=nI){const l=new v;return l.setLookAt(e.start,e.start.add(e.dir),new b(0,0,1)),this.raycast(l,e,g,t,I)}raycastWithXfo(e,g,t=.01,I=nI){const l=new Ag(e.tr,e.ori.getZaxis().negate());return this.raycast(e,l,g,t,I)}raycast(e,g,t,I=.01,l=nI){return(this.rayCastDist!=t||this.rayCastArea!=I)&&(this.__rayCastRenderTargetProjMatrix.setOrthographicMatrix(I*-.5,I*.5,I*-.5,I*.5,0,t),this.rayCastDist=t,this.rayCastArea=I),this.raycastWithProjection(e,this.__rayCastRenderTargetProjMatrix,g,l)}raycastWithProjection(e,g,t,I=nI){var l;const C=[0,0,3,3],n={cameraMatrix:e.toMat4(),viewports:[{region:C,viewMatrix:e.inverse().toMat4(),projectionMatrix:g,isOrthographic:!0}]},F=this.__gl;this.__rayCastRenderTarget||(this.__rayCastRenderTarget=new ZI(F,{type:"FLOAT",format:"RGBA",filter:"NEAREST",createDepthTexture:!0,width:3,height:3,numColorChannels:1})),this.__rayCastRenderTarget.bindForWriting(n,!0),F.enable(F.CULL_FACE),F.enable(F.DEPTH_TEST),F.depthFunc(F.LEQUAL),F.depthMask(!0),this.drawSceneGeomData(n,I),F.finish(),this.__rayCastRenderTarget.unbindForWriting(),this.__rayCastRenderTarget.bindForReading();const a=new Float32Array(4*9);F.readPixels(0,0,3,3,F.RGBA,F.FLOAT,a),this.__rayCastRenderTarget.unbindForReading();const U=B=>a[B*4+3]!=0,d=[4,3,5,1,7];let s;for(const B of d)if(U(B)){s=a.subarray(B*4,B*4+4);break}if(!s)return null;const o=Math.round(s[0])&64-1,A=(l=this.getPass(o))===null||l===void 0?void 0:l.getGeomItemAndDist(s);if(A){const B=t.start.add(t.dir.scale(A.dist));return{pointerRay:t,intersectionPos:B,geomItem:A.geomItem,componentId:-1,dist:A.dist,geomData:s}}else return null}raycastCluster(e,g,t,I=.01,l=nI){const C=this.__gl;this.__rayCastRenderTarget||(this.__rayCastRenderTarget=new ZI(C,{type:"FLOAT",format:"RGBA",filter:"NEAREST",createDepthTexture:!0,width:3,height:3,numColorChannels:1}),this.__rayCastRenderTargetProjMatrix=new Ee),(this.rayCastDist!=t||this.rayCastArea!=I)&&(this.__rayCastRenderTargetProjMatrix.setOrthographicMatrix(I*-.5,I*.5,I*-.5,I*.5,0,t),this.rayCastDist=t,this.rayCastArea=I);const n=[0,0,3,3],F={};F.viewports=[{region:n,viewMatrix:e.inverse().toMat4(),projectionMatrix:this.__rayCastRenderTargetProjMatrix,isOrthographic:!0}],F.cameraMatrix=e.toMat4(),this.__rayCastRenderTarget.bindForWriting(F,!0),C.enable(C.CULL_FACE),C.enable(C.DEPTH_TEST),C.depthFunc(C.LEQUAL),C.depthMask(!0),this.drawSceneGeomData(F,l),C.finish(),this.__rayCastRenderTarget.unbindForWriting(),this.__rayCastRenderTarget.bindForReading();const a=new Float32Array(4*9);C.readPixels(0,0,3,3,C.RGBA,C.FLOAT,a),this.__rayCastRenderTarget.unbindForReading();const U=s=>a[s*4+3]!=0,d=[];for(let s=0;s<9;s++)if(U(s)){const o=a.subarray(s*4,s*4+4),A=Math.round(o[0])&64-1,B=this.getPass(A);if(B){const Q=B.getGeomItemAndDist(o);if(Q){const r=g.start.add(g.dir.scale(Q.dist));d.push({pointerRay:g,intersectionPos:r,geomItem:Q.geomItem,componentId:-1,dist:Q.dist,geomData:o})}}}return d}drawBackground(e){if(this.__glBackgroundMap&&this.__backgroundMapShader&&this.__backgroundMapShaderBinding){if(!this.__glBackgroundMap.isLoaded())return;const g=this.__gl;g.depthMask(!1),this.__backgroundMapShader.bind(e);const t=e.unifs;this.__glBackgroundMap.bindToUniform(e,t.backgroundImage),this.__backgroundMapShaderBinding.bind(e),g.drawQuad()}else this.__glEnvMap&&this.__glEnvMap.draw&&this.__glEnvMap.draw(e)}bindGLRenderer(e){super.bindGLBaseRenderer(e),e.envMap=this.__glEnvMap,e.exposure=this.__exposure,e.gamma=this.__gamma}drawScene(e){this.bindGLRenderer(e),this.__displayEnvironment&&this.drawBackground(e),super.drawScene(e)}}class To extends Xe{constructor(e,g){super();this.drawIdsArray=null,this.drawIdsBuffer=null,this.highlightedIdsArray=null,this.highlightedIdsBuffer=null,this.gl=e,this.glGeom=g,this.id=g?g.getGeom().getId():this.getId(),this.glGeomItems=[],this.glgeomItems_freeIndices=[],this.glgeomItemEventHandlers=[],this.drawIdsArray=null,this.drawIdsBuffer=null,this.drawIdsBufferDirty=!0,this.highlightedIdsArray=null,this.highlightedIdsBuffer=null,this.highlightedIdsBufferDirty=!0,this.visibleItems=[],this.highlightedItems=[]}getGLGeom(){return this.glGeom}getDrawCount(){return this.visibleItems.length}addGLGeomItem(e){let g;if(this.glgeomItems_freeIndices.length>0?g=this.glgeomItems_freeIndices.pop():(g=this.glGeomItems.length,this.glGeomItems.push(null)),e.geomItem.isVisible()){this.visibleItems.push(g);const I=new It(1,this.visibleItems.length);this.emit("drawCountChanged",I)}e.geomItem.isHighlighted()&&(this.highlightedItems.push(g),this.highlightedIdsBufferDirty=!0);const t={};t.highlightChanged=I=>{if(e.geomItem.isHighlighted()){if(this.highlightedItems.includes(g))return;this.highlightedItems.push(g);const l=new It(1,this.highlightedItems.length);this.emit("highlightedCountChanged",l)}else{this.highlightedItems.splice(this.highlightedItems.indexOf(g),1);const l=new It(-1,this.highlightedItems.length);this.emit("highlightedCountChanged",l)}this.highlightedIdsBufferDirty=!0},e.geomItem.on("highlightChanged",t.highlightChanged),t.visibilityChanged=I=>{if(I.visible){this.visibleItems.push(g);const C=new It(1,this.visibleItems.length);this.emit("drawCountChanged",C)}else{this.visibleItems.splice(this.visibleItems.indexOf(g),1);const C=new It(-1,this.visibleItems.length);this.emit("drawCountChanged",C)}this.drawIdsBufferDirty=!0},e.geomItem.on("visibilityChanged",t.visibilityChanged),this.glGeomItems[g]=e,this.glgeomItemEventHandlers[g]=t,this.drawIdsBufferDirty=!0,e.GLGeomItemSet=this}removeGLGeomItem(e){const g=this.glGeomItems.indexOf(e),t=this.glgeomItemEventHandlers[g];if(e.geomItem.off("highlightChanged",t.highlightChanged),e.geomItem.off("visibilityChanged",t.visibilityChanged),this.glGeomItems[g]=null,this.glgeomItemEventHandlers[g]=null,e.GLGeomItemSet=null,this.glgeomItems_freeIndices.push(g),e.geomItem.isVisible()){this.visibleItems.splice(this.visibleItems.indexOf(g),1);const I=new It(-1,this.visibleItems.length);this.emit("drawCountChanged",I)}if(e.geomItem.isHighlighted()){this.highlightedItems.splice(this.highlightedItems.indexOf(g),1);const I=new It(-1,this.highlightedItems.length);this.emit("highlightedCountChanged",I)}this.drawIdsBufferDirty=!0,this.glGeomItems.length==this.glgeomItems_freeIndices.length&&this.destroy()}updateDrawIDsBuffer(){const e=this.gl;if(!e.floatTexturesSupported){this.drawIdsBufferDirty=!1;return}this.drawIdsBuffer&&this.glGeomItems.length!=this.drawIdsArray.length&&(this.gl.deleteBuffer(this.drawIdsBuffer),this.drawIdsBuffer=null),this.drawIdsBuffer||(this.drawIdsBuffer=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.drawIdsBuffer)),e.bindBuffer(e.ARRAY_BUFFER,this.drawIdsBuffer),e.bufferData(e.ARRAY_BUFFER,this.getDrawIdsArray(),e.STATIC_DRAW),this.drawIdsBufferDirty=!1}getDrawIdsArray(){return this.drawIdsBufferDirty&&((!this.drawIdsArray||this.glGeomItems.length!=this.drawIdsArray.length)&&(this.drawIdsArray=new Float32Array(this.glGeomItems.length)),this.visibleItems.forEach((e,g)=>{this.drawIdsArray[g]=this.glGeomItems[e].getGeomItemId()}),this.drawIdsBufferDirty=!1),this.drawIdsArray}updateHighlightedIDsBuffer(){const e=this.gl;if(!e.floatTexturesSupported){this.highlightedIdsBufferDirty=!1;return}this.highlightedIdsBuffer&&this.glGeomItems.length>this.highlightedIdsArray.length&&(this.gl.deleteBuffer(this.highlightedIdsBuffer),this.highlightedIdsBuffer=null),this.highlightedIdsBuffer||(this.highlightedIdsBuffer=e.createBuffer()),e.bindBuffer(e.ARRAY_BUFFER,this.highlightedIdsBuffer),e.bufferData(e.ARRAY_BUFFER,this.getHighlightedIdsArray(),e.STATIC_DRAW),this.highlightedIdsBufferDirty=!1}getHighlightedIdsArray(){return this.highlightedIdsBufferDirty&&((!this.highlightedIdsArray||this.highlightedItems.length>this.highlightedIdsArray.length)&&(this.highlightedIdsArray=new Float32Array(this.glGeomItems.length)),this.highlightedItems.forEach((e,g)=>{this.highlightedIdsArray[g]=this.glGeomItems[e].getGeomItemId()}),this.highlightedIdsBufferDirty=!1),this.highlightedIdsArray}draw(e){this.visibleItems.length!=0&&(this.drawIdsBufferDirty&&this.updateDrawIDsBuffer(),this.__bindAndRender(e,this.visibleItems,this.drawIdsBuffer))}drawHighlighted(e){this.highlightedItems.length!=0&&(this.highlightedIdsBufferDirty&&this.updateHighlightedIDsBuffer(),this.__bindAndRender(e,this.highlightedItems,this.highlightedIdsBuffer))}drawGeomData(e){this.visibleItems.length!=0&&(this.drawIdsBufferDirty&&this.updateDrawIDsBuffer(),this.__bindAndRender(e,this.visibleItems,this.drawIdsBuffer))}__bindAndRender(e,g,t){const I=this.gl,l=e.unifs;if(e.glGeom!=this.glGeom&&(this.glGeom.bind(e),e.glGeom=this.glGeom),!I.floatTexturesSupported||!I.drawElementsInstanced||!e.supportsInstancing)e.unifs.instancedDraw&&I.uniform1i(e.unifs.instancedDraw.location,0),g.forEach(C=>{this.glGeomItems[C].bind(e),e.bindViewports(l,()=>{this.glGeom.draw(e)})});else{e.unifs.instancedDraw&&I.uniform1i(e.unifs.instancedDraw.location,1);const C=e.attrs.instancedIds.location;I.enableVertexAttribArray(C),I.bindBuffer(I.ARRAY_BUFFER,t),I.vertexAttribPointer(C,1,I.FLOAT,!1,1*4,0),I.vertexAttribDivisor(C,1),e.bindViewports(l,()=>{this.glGeom.drawInstanced(e,g.length)})}}destroy(){this.drawIdsBuffer&&(this.gl.deleteBuffer(this.drawIdsBuffer),this.drawIdsBuffer=null),this.highlightedIdsBuffer&&(this.gl.deleteBuffer(this.highlightedIdsBuffer),this.highlightedIdsBuffer=null),this.emit("destructing")}}class Yo extends Xe{constructor(e,g){super();this.glGeomItemSets={},this.pass=e,this.__gl=e.renderer.gl,this.glMaterial=g,this.glGeomItemSets={},this.drawCount=0;const t=g.getMaterial(),I=l=>{t.off("opacityChanged",I);for(const C in this.glGeomItemSets){const n=this.glGeomItemSets[C];for(const F of n.glGeomItems){const a=F.geomItem;this.pass.removeGeomItem(a),this.pass.renderer.assignTreeItemToGLPass(a)}}};t.on("opacityChanged",I)}getGLMaterial(){return this.glMaterial}addGLGeomItem(e,g){const t=g.getGeom().getId();let I=this.glGeomItemSets[t];I||(I=new To(this.__gl,g),this.addGeomItemSet(I)),I.addGLGeomItem(e)}drawCountChanged(e){this.drawCount+=e.change,this.emit("updated")}__materialChanged(){const e=this.glMaterial.getMaterial();if(!this.pass.checkMaterial(e))for(const g in this.glGeomItemSets){const t=this.glGeomItemSets[g];for(const I of t.glGeomItems){const l=I.geomItem;this.pass.removeGeomItem(l),this.pass.renderer.assignTreeItemToGLPass(l)}}}addGeomItemSet(e){const g=e.getGLGeom().getGeom().getId();this.glGeomItemSets[g]=e;const t=e.on("drawCountChanged",I=>{this.drawCountChanged(I)});e.once("destructing",()=>{e.removeListenerById("drawCountChanged",t),delete this.glGeomItemSets[g],Object.keys(this.glGeomItemSets).length==0&&this.emit("destructing")})}draw(e){if(this.drawCount==0)return;const g=!0;this.glMaterial.bind(e,g);for(const t in this.glGeomItemSets)this.glGeomItemSets[t].draw(e);this.glMaterial.unbind(e)}drawHighlighted(e){this.glMaterial.bind(e,!1);for(const g in this.glGeomItemSets)this.glGeomItemSets[g].drawHighlighted(e);this.glMaterial.unbind(e)}drawGeomData(e){this.glMaterial.bind(e,!1);for(const g in this.glGeomItemSets)this.glGeomItemSets[g].draw(e);this.glMaterial.unbind(e)}}class vo extends Xe{constructor(e,g,t){super();this.gl=e,this.pass=g,this.glShader=t.glShader,this.glgeomdatashader=t.glgeomdatashader,this.glselectedshader=t.glselectedshader,this.glMaterialGeomItemSets=[]}findMaterialGeomItemSets(e){for(const g of this.glMaterialGeomItemSets)if(g.glMaterial==e)return g;return null}addGLGeomItem(e,g,t){let I=this.findMaterialGeomItemSets(t);I||(I=new Yo(this.pass,t),this.addMaterialGeomItemSets(I)),I.addGLGeomItem(e,g)}addMaterialGeomItemSets(e){this.glMaterialGeomItemSets.push(e);const g=()=>{this.emit("updated")},t=()=>{e.off("updated",g),e.off("destructing",t);const I=this.glMaterialGeomItemSets.indexOf(e);this.glMaterialGeomItemSets.splice(I,1),this.glMaterialGeomItemSets.length==0&&this.emit("destructing")};e.on("updated",g),e.on("destructing",t)}removeMaterialGeomItemSets(e){const g=this.glMaterialGeomItemSets.indexOf(e);this.glMaterialGeomItemSets.splice(g,1)}getMaterialGeomItemSets(){return this.glMaterialGeomItemSets}draw(e){const g=this.glShader;if(!!this.glShader.bind(e)){this.pass.renderer.glGeomItemLibrary.bind(e);for(const t of this.glMaterialGeomItemSets)t.draw(e);g.unbind(e)}}drawHighlightedGeoms(e){if(!(!this.glselectedshader||!this.glselectedshader.bind(e,"highlight"))){this.pass.renderer.glGeomItemLibrary.bind(e);for(const g of this.glMaterialGeomItemSets)g.drawHighlighted(e);this.glselectedshader.unbind(e)}}drawGeomData(e){var g;if(!this.glgeomdatashader||!this.glgeomdatashader.bind(e,"geomData"))return;this.pass.renderer.glGeomItemLibrary.bind(e);const t=this.gl,{floatGeomBuffer:I,passId:l,occlusionCulling:C}=e.unifs;I&&t.uniform1i(I.location,e.floatGeomBuffer?1:0),l&&t.uniform1i(l.location,e.passIndex),C&&t.uniform1i(C.location,(g=e.occlusionCulling)!==null&&g!==void 0?g:0);for(const n of this.glMaterialGeomItemSets)n.drawGeomData(e);this.glgeomdatashader.unbind(e)}}var Mo=`
precision highp float;
precision highp int;
#define GLSLIFY 1

import 'imageAtlas.glsl'

uniform sampler2D atlasBillboards;

/* VS Outputs */
varying float v_instanceID;
varying vec2 v_texCoord;
varying float v_alpha;
varying vec4 v_tint;
varying vec3 v_viewPos;

uniform sampler2D instancesTexture;
uniform int instancesTextureSize;

#if defined(DRAW_GEOMDATA)
  uniform int isOrthographic;
  import 'surfaceGeomData.glsl'
#endif // DRAW_GEOMDATA

const int cols_per_instance = 7;

vec4 getHilightColor(int id) {
  return fetchTexel(instancesTexture, instancesTextureSize, (id * cols_per_instance) + 6);
}

#ifdef ENABLE_ES3
  out vec4 fragColor;
#endif
void main(void) {
#ifndef ENABLE_ES3
  vec4 fragColor;
#endif

  int instanceID = int(v_instanceID);
  vec4 imageColor = texture2D(atlasBillboards, v_texCoord) * v_tint;
  imageColor.a *= v_alpha;
  if(imageColor.a < 0.1)
    discard;

#if defined(DRAW_COLOR)
  fragColor = imageColor;
  // fragColor.r = 1.0;
  // fragColor.a = 1.0;
#elif defined(DRAW_GEOMDATA)
  fragColor = setFragColor_geomData(v_viewPos, floatGeomBuffer, passId, v_instanceID, 0.0, isOrthographic);
#elif defined(DRAW_HIGHLIGHT)
  fragColor = getHilightColor(instanceID);
  // Skip unhilighting labels.
  if(fragColor.r < 0.001 && fragColor.g < 0.001 && fragColor.b < 0.001)
    discard;
#endif // DRAW_HIGHLIGHT
  
#ifndef ENABLE_ES3
  gl_FragColor = fragColor;
#endif
}
`,Ho=`
precision highp float;
precision highp int;
#define GLSLIFY 1

import 'quadVertexFromID.glsl'

uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;
uniform mat4 cameraMatrix;

import 'GLSLUtils.glsl'

#ifdef ENABLE_FLOAT_TEXTURES

// A sorted attribute of instance Ids so we draw from back to front.
instancedattribute float instanceIds;

import 'transpose.glsl'
import 'imageAtlas.glsl'

uniform sampler2D atlasBillboards_layout;
uniform vec4 atlasBillboards_desc;

uniform sampler2D instancesTexture;
uniform int instancesTextureSize;
uniform int passId;

const int cols_per_instance = 7;

mat4 getMatrix(sampler2D texture, int textureSize, int index) {
  // Unpack 3 x 4 matix columns into a 4 x 4 matrix.
  vec4 col0 = fetchTexel(texture, textureSize, (index * cols_per_instance) + 0);
  vec4 col1 = fetchTexel(texture, textureSize, (index * cols_per_instance) + 1);
  vec4 col2 = fetchTexel(texture, textureSize, (index * cols_per_instance) + 2);
  mat4 result = mat4(col0, col1, col2, vec4(0.0, 0.0, 0.0, 1.0));
  return transpose(result);
  // return mat4(1.0);
}

mat4 getModelMatrix(int id) {
  return getMatrix(instancesTexture, instancesTextureSize, id);
}
vec4 getInstanceData(int id) {
  return fetchTexel(instancesTexture, instancesTextureSize, (id * cols_per_instance) + 3);
}
vec4 getPivot(int id) {
  return fetchTexel(instancesTexture, instancesTextureSize, (id * cols_per_instance) + 4);
}
vec4 getTintColor(int id) {
  return fetchTexel(instancesTexture, instancesTextureSize, (id * cols_per_instance) + 5);
}

#else

uniform vec4 atlasBillboards_desc;

uniform mat4 modelMatrix;
uniform vec2 pivot;
uniform vec4 billboardData;
uniform vec4 tintColor;
uniform vec4 layoutData;

#endif

uniform int inVR;

mat4 calcLookAtMatrix(vec3 origin, vec3 target, float roll) {
  // vec3 rr = vec3(sin(roll), 0.0, cos(roll));
  vec3 rr = vec3(0.0, 0.0, 1.0);
  vec3 ww = normalize(target - origin);
  vec3 uu = normalize(cross(rr, ww));
  vec3 vv = normalize(cross(ww, uu));

  return mat4(vec4(uu, 0.0), vec4(vv, 0.0), vec4(ww, 0.0), vec4(origin, 1.0));
}

float map(float value, float inMin, float inMax, float outMin, float outMax) {
  return outMin + (outMax - outMin) * (value - inMin) / (inMax - inMin);
}

/* VS Outputs */
varying float v_instanceID;
varying vec2 v_texCoord;
varying float v_alpha;
varying vec4 v_tint;
varying vec3 v_viewPos;

void main(void) {

#ifdef ENABLE_FLOAT_TEXTURES

  int instanceID = int(instanceIds);
  v_instanceID = float(instanceID) + 0.25;

  mat4 modelMatrix = getModelMatrix(instanceID);
  vec2 pivot = getPivot(instanceID).xy;
  vec4 billboardData = getInstanceData(instanceID);
  vec4 layoutData = fetchTexel(atlasBillboards_layout, int(atlasBillboards_desc.z), int(billboardData.z));
  v_tint = getTintColor(instanceID);

#else

  v_tint = tintColor;

#endif

  vec2 quadVertex = getQuadVertexPositionFromID();
  
  vec2 pos = quadVertex + vec2(0.5, 0.0) - pivot;
  v_texCoord = vec2(quadVertex.x, -quadVertex.y) + 0.5;
  v_alpha = billboardData.w;
  v_texCoord *= layoutData.zw;
  v_texCoord += layoutData.xy;

  float scl = billboardData.x;
  float width = layoutData.z * atlasBillboards_desc.x * scl;
  float height = layoutData.w * atlasBillboards_desc.y * scl;
  int flags = int(billboardData.y);

  // Use cross platform bit flags methods
  bool alignedToCamera = testFlag(flags, 4); // flag = 1<<2
  bool drawOnTop = testFlag(flags, 8); // flag = 1 << 3
  bool fixedSizeOnscreen = testFlag(flags, 16); // flag = 1 << 4

  mat4 modelViewMatrix = viewMatrix * modelMatrix;

  // Note: items in front of the camera will have a negative value here.
  float sc = 1.0;
  if (fixedSizeOnscreen) {
    sc = -modelViewMatrix[3][2];
    
    if (inVR == 1) {
      // During XR sessions, there is a scaling applied to the view matrix
      // which causes a distortion to the line width. We extract that scale here
      // and use to correct the distortion.
      // See also: FatPointsShader
      vec3 viewZ = modelViewMatrix[2].xyz;
      float viewScale = length(viewZ);
      sc /= viewScale;
    }
  }
  
  mat4 modelViewProjectionMatrix;
  if (alignedToCamera) {
    if (inVR == 0) {
      gl_Position = modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);
      gl_Position += vec4(pos.x * width * sc, (pos.y + 0.5) * height * sc, 0.0, 0.0);
      v_viewPos = gl_Position.xyz;
      gl_Position = projectionMatrix * gl_Position;
    } else {
      vec3 cameraPos = vec3(cameraMatrix[3][0], cameraMatrix[3][1], cameraMatrix[3][2]);
      vec3 billboardPos = vec3(modelMatrix[3][0], modelMatrix[3][1], modelMatrix[3][2]);
      mat4 lookAt = calcLookAtMatrix(billboardPos, cameraPos, 0.0);
      mat4 modelViewProjectionMatrix = projectionMatrix * viewMatrix * lookAt;
      gl_Position = modelViewProjectionMatrix * vec4(pos.x * width * sc, (pos.y + 0.5) * height * sc, 0.0, 1.0);
      v_viewPos = (modelViewMatrix * vec4(pos.x * width * sc, (pos.y + 0.5) * height * sc, 0.0, 1.0)).xyz;
    }
  }
  else {
    modelViewProjectionMatrix = projectionMatrix * viewMatrix * modelMatrix;
    gl_Position = modelViewProjectionMatrix * vec4(pos.x * width, (pos.y + 0.5) * height, 0.0, 1.0);
    v_viewPos = (modelViewMatrix * vec4(pos.x * width, (pos.y + 0.5) * height, 0.0, 1.0)).xyz;
  }

  // Use cross platform bit flags methods
  if (drawOnTop) {
    gl_Position.z = mix(gl_Position.z, -gl_Position.w, 0.5);
  }
}
`;class xo extends Pe{constructor(e){super(e,"BillboardShader");this.setShaderStage("VERTEX_SHADER",Ho),this.setShaderStage("FRAGMENT_SHADER",Mo)}}const wo=new Ve("EnvProjectionShader_template");wo.addParameter(new kI("projectionCenter",new b(0,0,1.7)));var Do=`
precision highp float;
#define GLSLIFY 1

uniform color BaseColor;
uniform mat4 cameraMatrix;

#ifdef ENABLE_ES3
  out vec4 fragColor;
#endif

/* VS Outputs */
varying vec3 v_viewPos;
varying vec3 v_viewNormal;
varying vec2 v_texCoord;
varying float v_geomItemId;
varying vec4 v_geomItemData;
varying float v_drawItemID;
varying vec3 v_worldPos;

import 'GLSLUtils.glsl'
import 'drawItemTexture.glsl'
import 'cutaways.glsl'
import 'GLSLBits.glsl'

uniform int floatGeomBuffer;
uniform int passId;

#if defined(DRAW_HIGHLIGHT)
  import 'surfaceHighlight.glsl'
#endif

void main(void) {
#ifndef ENABLE_ES3
  vec4 fragColor;
#endif
  float treeItemOpacity = v_geomItemData.y;

#if defined(DRAW_COLOR)
  int debugLevel = 0;
  if (debugLevel == 0) {

    vec3 viewVector = mat3(cameraMatrix) * normalize(-v_viewPos);
    vec3 normal = mat3(cameraMatrix) * v_viewNormal;
    float NdotV = dot(normalize(normal), normalize(viewVector));

    // Modulate the lighting using the texture coord so the line looks round.
    NdotV *= cos((v_texCoord.x - 0.5) * 2.0);

    vec4 color = BaseColor * NdotV;
    fragColor = vec4(color.rgb, BaseColor.a * treeItemOpacity);
  }
  else {
    fragColor = vec4(v_texCoord.x, 0.0, 0.0, 1.0);
  }
#elif defined(DRAW_GEOMDATA)
  int geomItemId = int(v_geomItemId + 0.5);
  int flags = int(v_geomItemData.x + 0.5);

 // Cutaways
  if (testFlag(flags, GEOMITEM_FLAG_CUTAWAY)) {
    vec4 cutAwayData  = getCutaway(geomItemId);
    vec3 planeNormal = cutAwayData.xyz;
    float planeDist = cutAwayData.w;
    if (cutaway(v_worldPos, planeNormal, planeDist)) {
      discard;
      return;
    }
  }
  if (testFlag(flags, GEOMITEM_INVISIBLE_IN_GEOMDATA)) {
    discard;
    return;
  }

  float dist = length(v_viewPos);

  if (floatGeomBuffer != 0) {
    fragColor.r = float(passId); 
    fragColor.g = float(v_drawItemID);
    fragColor.b = 0.0;// TODO: store poly-id or something.
    fragColor.a = dist;
  }
#elif defined(DRAW_HIGHLIGHT)
  fragColor = setFragColor_highlight(v_geomItemId);
#endif

#ifndef ENABLE_ES3
  gl_FragColor = fragColor;
#endif
}
`,Ko=`
precision highp float;
#define GLSLIFY 1

instancedattribute vec2 segmentIndices;
attribute float vertexIDs;

uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;

import 'drawItemTexture.glsl'
import 'modelMatrix.glsl'

uniform int geomItemId;
int getGeomItemId() {
  return geomItemId;
}

uniform sampler2D positionsTexture;
uniform int positionsTextureSize;

uniform float LineThickness;
uniform float Overlay;

import 'calcFatLinesViewPos.glsl'

varying vec3 v_viewPos;
varying vec3 v_viewNormal;
varying vec2 v_texCoord;

varying float v_geomItemId;
varying vec4 v_geomItemData;
varying float v_drawItemID;
varying vec3 v_worldPos;

void main(void) {

  int geomItemId = getGeomItemId();
  v_geomItemId = float(geomItemId);
  v_geomItemData = getInstanceData(geomItemId);

  int vertexID = int(vertexIDs);

  mat4 modelMatrix = getModelMatrix(geomItemId);
  mat4 modelViewMatrix = viewMatrix * modelMatrix;
  vec3 pos;

  #if defined(DRAW_COLOR)
    v_viewPos       = calcFatLinesViewPos(vertexID, modelViewMatrix, v_viewNormal, v_texCoord, pos);
  #elif defined(DRAW_GEOMDATA)
    vec3  viewNormal;
    vec2  texCoord;
    v_viewPos       = calcFatLinesViewPos(vertexID, modelViewMatrix, viewNormal, texCoord, pos);
    v_drawItemID = float(getGeomItemId());
    v_worldPos      = (modelMatrix * vec4(pos, 1.0)).xyz;
  #endif

  gl_Position     = projectionMatrix * vec4(v_viewPos, 1.0);
  if (Overlay > 0.0) {
    gl_Position.z = mix(gl_Position.z, -gl_Position.w, Overlay);
  }

}
`;class Lo extends Pe{constructor(e){super(e,"FatLinesShader");this.setShaderStage("VERTEX_SHADER",Ko),this.setShaderStage("FRAGMENT_SHADER",Do)}bind(e,g){return super.bind(e,g)?(e.supportsInstancing=!1,!0):!1}static supportsInstancing(){return!1}static getMaterialTemplate(){return zo}}const zo=new wl("FatLinesShader_template");S.register("FatLinesShader",Lo);var _o=`
precision highp float;
#define GLSLIFY 1

attribute vec3 positions;
#ifdef ENABLE_TEXTURES
attribute vec2 texCoords;
#endif

uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;

import 'GLSLUtils.glsl'

import 'geomItemId.glsl'
import 'drawItemTexture.glsl'
import 'modelMatrix.glsl'

#ifdef ENABLE_MULTI_DRAW
import 'materialparams.glsl'
#else
uniform float Overlay;
#endif

/* VS Outputs */
varying vec4 v_drawItemIds;
varying vec4 v_geomItemData;
varying vec3 v_viewPos;
#ifdef ENABLE_TEXTURES
varying vec2 v_textureCoord;
#endif
varying vec3 v_worldPos;

void main(void) {
  v_drawItemIds = getDrawItemIds();
  int geomItemId = int(v_drawItemIds.x + 0.5);
  v_geomItemData  = getInstanceData(geomItemId);

  mat4 modelMatrix = getModelMatrix(geomItemId);
  mat4 modelViewMatrix = viewMatrix * modelMatrix;

  vec4 pos = vec4(positions, 1.);
  vec4 viewPos = (modelViewMatrix * pos);
  gl_Position = projectionMatrix * viewPos;

  v_viewPos = viewPos.xyz;
#ifdef ENABLE_TEXTURES
  v_textureCoord = texCoords;
  v_textureCoord.y = 1.0 - v_textureCoord.y;// Flip y
#endif

  //////////////////////////////////////////////
  // Overlay

#ifdef ENABLE_MULTI_DRAW
  vec2 materialCoords = v_geomItemData.zw;
  vec4 materialValue1 = getMaterialValue(materialCoords, 1);
  float overlay = materialValue1.x;
#else
  float overlay = Overlay;
#endif

  gl_Position.z = mix(gl_Position.z, -gl_Position.w, overlay);

  //////////////////////////////////////////////
  
  v_worldPos      = (modelMatrix * pos).xyz;
}
`,Oo=`
precision highp float;
#define GLSLIFY 1

import 'GLSLUtils.glsl'
import 'drawItemTexture.glsl'
import 'cutaways.glsl'
import 'gamma.glsl'
import 'materialparams.glsl'

#ifndef ENABLE_MULTI_DRAW

uniform color BaseColor;

#ifdef ENABLE_TEXTURES
uniform sampler2D BaseColorTex;
uniform int BaseColorTexType;
#endif

#endif // ENABLE_MULTI_DRAW

/* VS Outputs */
varying vec4 v_drawItemIds;
varying vec4 v_geomItemData;
varying vec3 v_viewPos;
#ifdef ENABLE_TEXTURES
varying vec2 v_textureCoord;
#endif
varying vec3 v_worldPos;

#ifdef ENABLE_ES3
out vec4 fragColor;
#endif

#if defined(DRAW_GEOMDATA)
  uniform int isOrthographic;
  import 'surfaceGeomData.glsl'
#elif defined(DRAW_HIGHLIGHT)
  import 'surfaceHighlight.glsl'
#endif // DRAW_HIGHLIGHT

void main(void) {
#ifndef ENABLE_ES3
  vec4 fragColor;
#endif

  int geomItemId = int(v_drawItemIds.x + 0.5);
  int flags = int(v_geomItemData.x + 0.5);
  float treeItemOpacity = v_geomItemData.y;

  // Cutaways
  if (testFlag(flags, GEOMITEM_FLAG_CUTAWAY)) 
  {
    vec4 cutAwayData   = getCutaway(geomItemId);
    vec3 planeNormal = cutAwayData.xyz;
    float planeDist = cutAwayData.w;
    if (cutaway(v_worldPos, planeNormal, planeDist)) {
      discard;
      return;
    }
  }

  //////////////////////////////////////////////
  // Material
#ifdef ENABLE_MULTI_DRAW

  vec2 materialCoords = v_geomItemData.zw;
  if (v_drawItemIds.z > 0.5) {
    materialCoords.x = v_drawItemIds.z;
  }
  vec4 baseColor = getMaterialValue(materialCoords, 0);

#else // ENABLE_MULTI_DRAW

#ifndef ENABLE_TEXTURES
  vec4 baseColor = BaseColor;
#else
  vec4 baseColor = getColorParamValue(BaseColor, BaseColorTex, BaseColorTexType, v_textureCoord);
#endif // ENABLE_TEXTURES

#endif // ENABLE_MULTI_DRAW

  baseColor.a *= treeItemOpacity;
  if (baseColor.a < 0.001) discard;

#if defined(DRAW_COLOR)
  // Cutaways
  if (testFlag(flags, GEOMITEM_FLAG_CUTAWAY)) {
    if (!gl_FrontFacing) {
#ifdef ENABLE_ES3
      fragColor = cutColor;
#else
      gl_FragColor = cutColor;
#endif
      return;
    }
  }

  //////////////////////////////////////////////
  fragColor = baseColor;

#ifdef ENABLE_INLINE_GAMMACORRECTION
  fragColor.rgb = toGamma(fragColor.rgb);
#endif

#elif defined(DRAW_GEOMDATA)

  if (testFlag(flags, GEOMITEM_INVISIBLE_IN_GEOMDATA)) {
    discard;
    return;
  }
  if (occlusionCulling != 0) {
    // Transparent geoms do not render to the occlusion buffer
    if (testFlag(flags, GEOMITEM_TRANSPARENT)) {
      discard;
      return;
    }
  }
  fragColor = setFragColor_geomData(v_viewPos, floatGeomBuffer, passId, v_drawItemIds.x, v_drawItemIds.y, isOrthographic);
#elif defined(DRAW_HIGHLIGHT)
  fragColor = setFragColor_highlight(v_drawItemIds.x);
#endif // DRAW_HIGHLIGHT

#ifndef ENABLE_ES3
  gl_FragColor = fragColor;
#endif
}
`;class Po extends Pe{constructor(e){super(e,"FlatSurfaceShader");this.setShaderStage("VERTEX_SHADER",_o),this.setShaderStage("FRAGMENT_SHADER",Oo)}bind(e,g){super.bind(e,g);const t=this.__gl;return t.disable(t.CULL_FACE),!0}unbind(e){super.unbind(e);const g=this.__gl;return g.enable(g.CULL_FACE),!0}static getPackedMaterialData(e){const g=new Float32Array(8),t=e.getParameter("BaseColor");let I;t instanceof ye&&t.colorSpace==Bg.Gamma?I=t.value.toLinear():I=t.value,g[0]=I.r,g[1]=I.g,g[2]=I.b,g[3]=I.a;const l=e.getParameter("Overlay");return l&&(g[4]=l.getValue()),g}static getMaterialTemplate(){return jo}}const jo=new xI("FlatSurfaceShader_template");S.register("FlatSurfaceShader",Po);var qo=`
precision highp float;
#define GLSLIFY 1

attribute vec3 positions;
attribute vec3 positionsNext;

import 'GLSLUtils.glsl'
import 'geomItemId.glsl'
import 'drawItemTexture.glsl'
import 'modelMatrix.glsl'

uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;

#ifdef ENABLE_MULTI_DRAW
import 'materialparams.glsl'
#else
uniform float Overlay;
#endif

/* VS Outputs */
varying float v_geomItemId;
varying vec4 v_geomItemData;
varying vec3 v_viewPos;
varying vec3 v_worldPos;
varying vec3 v_nextVertexDist;

void main(void) {
  int geomItemId = getGeomItemId();
  v_geomItemId = float(geomItemId);
  v_geomItemData  = getInstanceData(geomItemId);

  mat4 modelMatrix = getModelMatrix(geomItemId);
  mat4 modelViewMatrix = viewMatrix * modelMatrix;
  vec4 viewPos = modelViewMatrix * vec4(positions, 1.0);
  vec4 viewPosNext = modelViewMatrix * vec4(positionsNext, 1.0);

#ifdef ENABLE_ES3
  float nextVertexDist = length(viewPosNext.xyz - viewPos.xyz);
  if (imod(gl_VertexID, 2) == 0) {
    v_nextVertexDist.x = nextVertexDist;
    v_nextVertexDist.y = 0.0;
  } else {
    v_nextVertexDist.x = 0.0;
    v_nextVertexDist.y = nextVertexDist;
  }
  v_nextVertexDist.z = float(gl_VertexID);
#endif

  v_viewPos = viewPos.xyz;
  gl_Position = projectionMatrix * viewPos;
    

  //////////////////////////////////////////////
  // Overlay

#ifdef ENABLE_MULTI_DRAW
  vec2 materialCoords = v_geomItemData.zw;
  vec4 materialValue1 = getMaterialValue(materialCoords, 1);
  float overlay = materialValue1.y;
#else
  float overlay = Overlay;
#endif

#if defined(DRAW_GEOMDATA)
  gl_Position.z = mix(gl_Position.z, -gl_Position.w, mix(overlay, 1.0, 0.0001));
#else
  gl_Position.z = mix(gl_Position.z, -gl_Position.w, overlay);
#endif

  //////////////////////////////////////////////
  
  
  vec4 pos = vec4(positions, 1.);
  v_worldPos      = (modelMatrix * pos).xyz;
}
`,$o=`
precision highp float;
#define GLSLIFY 1

import 'GLSLUtils.glsl'
import 'drawItemTexture.glsl'
import 'cutaways.glsl'
import 'materialparams.glsl'

uniform int occluded;

#ifndef ENABLE_MULTI_DRAW

uniform color BaseColor;
uniform float Opacity;

uniform float StippleScale;
uniform float StippleValue;
uniform float OccludedStippleValue;

#endif // ENABLE_MULTI_DRAW

#if defined(DRAW_GEOMDATA)

uniform int isOrthographic;

import 'surfaceGeomData.glsl'

#elif defined(DRAW_HIGHLIGHT)

#ifdef ENABLE_FLOAT_TEXTURES
vec4 getHighlightColor(int id) {
  return fetchTexel(instancesTexture, instancesTextureSize, (id * pixelsPerItem) + 4);
}
#else // ENABLE_FLOAT_TEXTURES

uniform vec4 highlightColor;

vec4 getHighlightColor() {
  return highlightColor;
}

#endif // ENABLE_FLOAT_TEXTURES

#endif // DRAW_HIGHLIGHT

/* VS Outputs */
varying float v_geomItemId;
varying vec4 v_geomItemData;
varying vec3 v_viewPos;
varying vec3 v_worldPos;
varying vec3 v_nextVertexDist;

#ifdef ENABLE_ES3
  out vec4 fragColor;
#endif

void main(void) {
#ifndef ENABLE_ES3
  vec4 fragColor;
#endif

  int geomItemId = int(v_geomItemId + 0.5);
  int flags = int(v_geomItemData.x + 0.5);
  float treeItemOpacity = v_geomItemData.y;

  // Cutaways
  if (testFlag(flags, GEOMITEM_FLAG_CUTAWAY)) 
  {
    vec4 cutAwayData   = getCutaway(geomItemId);
    vec3 planeNormal = cutAwayData.xyz;
    float planeDist = cutAwayData.w;
    if (cutaway(v_worldPos, planeNormal, planeDist)) {
      discard;
      return;
    }
  }

  //////////////////////////////////////////////
  // Material

#ifdef ENABLE_MULTI_DRAW

  vec2 materialCoords = v_geomItemData.zw;
  vec4 BaseColor = getMaterialValue(materialCoords, 0);
  vec4 matValue1 = getMaterialValue(materialCoords, 1);
  vec4 matValue2 = getMaterialValue(materialCoords, 2);
  float Opacity  = matValue1.r;

  float StippleScale = matValue1.b;
  float StippleValue = matValue1.a;
  float OccludedStippleValue = matValue2.r;
#endif // ENABLE_MULTI_DRAW

  ///////////////////
  // Stippling
  float stippleValue = occluded == 0 ? StippleValue : OccludedStippleValue;
#ifdef ENABLE_ES3 // No stippling < es3 
  if (stippleValue > 0.0) {
    // Note: a value of 0.0, means no stippling (solid). A value of 1.0 means invisible
    float dist = -v_viewPos.z * StippleScale;
    float nextVertexDist = imod(int(floor(v_nextVertexDist.z)), 2) == 0 ? v_nextVertexDist.x : v_nextVertexDist.y;
    if (mod(nextVertexDist / dist, 1.0) < stippleValue) {
      discard;
      return;
    }
  }
#endif

  //////////////////////////////////////////////
  // Color
#if defined(DRAW_COLOR)

  fragColor = BaseColor;
  fragColor.a *= Opacity * treeItemOpacity;

  
#ifndef ENABLE_ES3
  if (occluded == 1) fragColor.a *= 1.0 - stippleValue;
#endif

  //////////////////////////////////////////////
  // GeomData
#elif defined(DRAW_GEOMDATA)
  // Cutaways
  if (testFlag(flags, GEOMITEM_INVISIBLE_IN_GEOMDATA)) {
    discard;
    return;
  }
  
  fragColor = setFragColor_geomData(v_viewPos, floatGeomBuffer, passId, v_geomItemId, 0.0, isOrthographic);
  
  //////////////////////////////////////////////
  // Highlight
#elif defined(DRAW_HIGHLIGHT)
  
  fragColor = getHighlightColor(geomItemId);

#endif // DRAW_HIGHLIGHT

#ifndef ENABLE_ES3
  gl_FragColor = fragColor;
#endif
}
`;class eA extends Pe{constructor(e){super(e,"LinesShader");this.setShaderStage("VERTEX_SHADER",qo),this.setShaderStage("FRAGMENT_SHADER",$o)}static getPackedMaterialData(e){const g=new Float32Array(12),t=e.getParameter("BaseColor");let I;return t instanceof ye&&t.colorSpace==Bg.Gamma?I=t.value.toLinear():I=t.value,g[0]=I.r,g[1]=I.g,g[2]=I.b,g[3]=I.a,g[4]=e.getParameter("Opacity").value,g[5]=e.getParameter("Overlay").value,g[6]=e.getParameter("StippleScale").value,g[7]=e.getParameter("StippleValue").value,g[8]=e.getParameter("OccludedStippleValue").value,g}static getMaterialTemplate(){return gA}}const gA=new Lt("LinesShader_template");S.register("LinesShader",eA);var tA=`
precision highp float;
#define GLSLIFY 1

#ifndef ENABLE_MULTI_DRAW

uniform color BaseColor;

#endif

import 'GLSLUtils.glsl'
import 'drawItemTexture.glsl'
import 'cutaways.glsl'
import 'materialparams.glsl'

#if defined(DRAW_GEOMDATA)

uniform int floatGeomBuffer;
uniform int passId;

import 'GLSLBits.glsl'

#elif defined(DRAW_HIGHLIGHT)

#ifdef ENABLE_FLOAT_TEXTURES
vec4 getHighlightColor(int id) {
  return fetchTexel(instancesTexture, instancesTextureSize, (id * pixelsPerItem) + 4);
}
#else // ENABLE_FLOAT_TEXTURES

uniform vec4 highlightColor;

vec4 getHighlightColor() {
  return highlightColor;
}

#endif // ENABLE_FLOAT_TEXTURES

#endif // DRAW_HIGHLIGHT

/* VS Outputs */
varying float v_geomItemId;
varying vec4 v_geomItemData;
varying vec3 v_viewPos;
/* VS Outputs */

#ifdef ENABLE_ES3
out vec4 fragColor;
#endif

void main(void) {

#ifndef ENABLE_ES3
  vec4 fragColor;
#endif

  //////////////////////////////////////////////
  // Color
#if defined(DRAW_COLOR)

#ifdef ENABLE_MULTI_DRAW

  vec2 materialCoords = v_geomItemData.zw;
  vec4 baseColor = getMaterialValue(materialCoords, 0);
  vec4 matValue1 = getMaterialValue(materialCoords, 1);
  float pointSize       = baseColor.a * matValue1.r;
  float overlay      = matValue1.g;

#else // ENABLE_MULTI_DRAW

  vec4 baseColor = BaseColor;

#endif // ENABLE_MULTI_DRAW

  fragColor = baseColor;

  //////////////////////////////////////////////
  // GeomData
#elif defined(DRAW_GEOMDATA)

  float viewDist = length(v_viewPos);

  if (floatGeomBuffer != 0) {
    fragColor.r = float(passId); 
    fragColor.g = float(v_geomItemId);
    fragColor.b = 0.0;// TODO: store poly-id or something.
    fragColor.a = viewDist;
  }
  else {
    ///////////////////////////////////
    // UInt8 buffer
    fragColor.r = mod(v_geomItemId, 256.) / 256.;
    fragColor.g = (floor(v_geomItemId / 256.) + (float(passId) * 64.)) / 256.;

    // encode the dist as a 16 bit float
    vec2 float16bits = encode16BitFloatInto2xUInt8(viewDist);
    fragColor.b = float16bits.x;
    fragColor.a = float16bits.y;
  }

  //////////////////////////////////////////////
  // Highlight
#elif defined(DRAW_HIGHLIGHT)
  
  int geomItemId = int(v_geomItemId + 0.5);
  fragColor = getHighlightColor(geomItemId);

#endif // DRAW_HIGHLIGHT

#ifndef ENABLE_ES3
  gl_FragColor = fragColor;
#endif
}
`,IA=`
precision highp float;
#define GLSLIFY 1

attribute vec3 positions;

import 'GLSLUtils.glsl'
import 'geomItemId.glsl'
import 'drawItemTexture.glsl'
import 'modelMatrix.glsl'

uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;

#ifdef ENABLE_MULTI_DRAW
import 'materialparams.glsl'
#else
uniform float PointSize;
uniform float Overlay;
#endif

/* VS Outputs */
varying float v_geomItemId;
varying vec4 v_geomItemData;
varying vec3 v_viewPos;

void main(void) {
  int geomItemId = getGeomItemId();
  v_geomItemId = float(geomItemId);
  v_geomItemData  = getInstanceData(geomItemId);

  mat4 modelMatrix = getModelMatrix(geomItemId);
  mat4 modelViewMatrix = viewMatrix * modelMatrix;
  
  vec4 viewPos = modelViewMatrix * vec4(positions, 1.);
  gl_Position = projectionMatrix * viewPos;
  

  //////////////////////////////////////////////
  // Material
#ifdef ENABLE_MULTI_DRAW
  vec2 materialCoords = v_geomItemData.zw;
  vec4 materialValue1 = getMaterialValue(materialCoords, 1);
  int maintainScreenSize = int(materialValue1.x + 0.5);
  float pointSize = materialValue1.x;
  float overlay = materialValue1.y;
#else
  float pointSize = PointSize;
  float overlay = Overlay;
#endif
  //////////////////////////////////////////////

  // Note: as of 22/01/2021 gl_PointSize has stopped working again...
  gl_PointSize = pointSize;

#if defined(DRAW_GEOMDATA)
  // Make the geom data point size at least 8 pixels across, else its impossible to hit.
  gl_PointSize = max(8.0, pointSize);
#endif
  gl_Position.z = mix(gl_Position.z, -gl_Position.w, overlay);

  
  v_viewPos = -viewPos.xyz;
}
`;class lA extends Pe{constructor(e){super(e,"PointsShader");this.setShaderStage("VERTEX_SHADER",IA),this.setShaderStage("FRAGMENT_SHADER",tA)}static getPackedMaterialData(e){const g=new Float32Array(12),t=e.getParameter("BaseColor");let I;return t instanceof ye&&t.colorSpace==Bg.Gamma?I=t.value.toLinear():I=t.value,g[0]=I.r,g[1]=I.g,g[2]=I.b,g[3]=I.a,g[4]=e.getParameter("PointSize").value,g[5]=e.getParameter("Overlay").value,g}static getMaterialTemplate(){return CA}}const CA=new Kl("PointsShader_template");S.register("PointsShader",lA);var iA=`
precision highp float;
#define GLSLIFY 1

instancedattribute vec3 positions;

uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;

import 'GLSLUtils.glsl' 
import 'inverse.glsl'
import 'drawItemTexture.glsl'
import 'modelMatrix.glsl'
import 'quadVertexFromID.glsl'

uniform int geomItemId;
int getGeomItemId() {
  return geomItemId;
}

uniform float PointSize;
uniform float Overlay;

/* VS Outputs */
varying vec2 v_texCoord;
varying vec3 v_viewPos;
varying float v_geomItemId;

void main(void) {
  int geomItemId = getGeomItemId();
  vec2 quadPointPos = getQuadVertexPositionFromID();
  v_texCoord = quadPointPos + 0.5;

  mat4 modelMatrix = getModelMatrix(geomItemId);
  mat4 modelViewMatrix = viewMatrix * modelMatrix;
  
  vec4 viewPos = modelViewMatrix * vec4(positions, 1.);

  // During XR sessions, there is a scaling applied to the view matrix
  // which causes a distortion to the line width. We extract that scale here
  // and use to correct the distortion.
  // See also: FatLinesShader
  vec3 viewZ = modelViewMatrix[2].xyz;
  float viewScale = length(viewZ);
  viewPos += vec4(vec3(quadPointPos, 0.0) * PointSize * viewScale, 0.);

  // Generate a quad which is 0.5 * PointSize closer towards
  // us. This allows points to be visualized even if snug on 
  // a surface. (else they get fully clipped)
  viewPos.z += 0.5 * PointSize;

  v_geomItemId = float(getGeomItemId());
  v_viewPos = -viewPos.xyz;
  
  gl_Position = projectionMatrix * viewPos;
  if (Overlay > 0.0) {
    gl_Position.z = mix(gl_Position.z, -gl_Position.w, Overlay);
  }
}
`,nA=`
precision highp float;
#define GLSLIFY 1

import 'constants.glsl'

uniform color BaseColor;
uniform float Rounded;
uniform float BorderWidth;

/* VS Outputs */
varying vec2 v_texCoord;
varying vec3 v_viewPos;
varying float v_geomItemId;

#ifdef ENABLE_ES3
out vec4 fragColor;
#endif

#if defined(DRAW_GEOMDATA)
  uniform int isOrthographic;
  import 'surfaceGeomData.glsl'
#elif defined(DRAW_HIGHLIGHT)
  import 'surfaceHighlight.glsl'
#endif // DRAW_HIGHLIGHT

void main(void) {

#ifndef ENABLE_ES3
  vec4 fragColor;
#endif

float dist = length(v_texCoord - 0.5);
if (dist > 0.5)
  discard;

#if defined(DRAW_COLOR)

  if (dist > 0.5 - (BorderWidth * 0.5))
    fragColor = vec4(0.,0.,0.,1.);
  else {
    // Modulate the lighting using the texture coord so the point looks round.
    float NdotV = cos(dist * PI);

    fragColor = BaseColor * mix(1.0, NdotV, Rounded);
  }

#elif defined(DRAW_GEOMDATA)
  fragColor = setFragColor_geomData(v_viewPos, floatGeomBuffer, passId, v_geomItemId, 0.0, isOrthographic);
#elif defined(DRAW_HIGHLIGHT)
  fragColor = setFragColor_highlight(v_geomItemId);
#endif // DRAW_HIGHLIGHT

  

#ifndef ENABLE_ES3
  gl_FragColor = fragColor;
#endif
}
`;class aA extends Pe{constructor(e){super(e,"FatPointsShader");this.setShaderStage("VERTEX_SHADER",iA),this.setShaderStage("FRAGMENT_SHADER",nA)}bind(e,g){return super.bind(e,g)?(e.supportsInstancing=!1,!0):!1}static supportsInstancing(){return!1}static getMaterialTemplate(){return FA}}const FA=new Dl("FatPointsShader_template");S.register("FatPointsShader",aA);var UA=`precision highp float;
#define GLSLIFY 1
#ifdef ENABLE_MULTI_DRAW
// #define DEBUG_GEOM_ID
#endif

import 'GLSLUtils.glsl'
import 'drawItemTexture.glsl'
import 'cutaways.glsl'
import 'gamma.glsl'
import 'materialparams.glsl'

#ifdef DEBUG_GEOM_ID
import 'debugColors.glsl'
#endif

/* VS Outputs */
varying vec4 v_drawItemIds;
varying vec4 v_geomItemData;
varying vec3 v_viewPos;
varying vec3 v_viewNormal;
#ifdef ENABLE_TEXTURES
varying vec2 v_textureCoord;
#endif
varying vec3 v_worldPos;
/* VS Outputs */

uniform mat4 cameraMatrix;
uniform int isOrthographic;

#ifndef ENABLE_MULTI_DRAW

uniform color BaseColor;
uniform float Opacity;
uniform float EmissiveStrength;

#ifdef ENABLE_TEXTURES
uniform sampler2D BaseColorTex;
uniform int BaseColorTexType;
uniform sampler2D OpacityTex;
uniform int OpacityTexType;
uniform sampler2D EmissiveStrengthTex;
uniform int EmissiveStrengthTexType;
#endif // ENABLE_TEXTURES

#endif // ENABLE_MULTI_DRAW

import 'computeViewNormal.glsl'
  

#ifdef ENABLE_ES3
    out vec4 fragColor;
#endif

#if defined(DRAW_GEOMDATA)
  import 'surfaceGeomData.glsl'
#elif defined(DRAW_HIGHLIGHT)
  import 'surfaceHighlight.glsl'
#endif // DRAW_HIGHLIGHT

void main(void) {
#ifndef ENABLE_ES3
  vec4 fragColor;
#endif
  int geomItemId = int(v_drawItemIds.x + 0.5);
  int elemId = int(v_drawItemIds.y + 0.5);
  int perFaceMaterialId = int(v_drawItemIds.z);
  int flags = int(v_geomItemData.x + 0.5);
  float treeItemOpacity = v_geomItemData.y;

  // Cutaways
  if (testFlag(flags, GEOMITEM_FLAG_CUTAWAY)) 
  {
    vec4 cutAwayData   = getCutaway(geomItemId);
    vec3 planeNormal = cutAwayData.xyz;
    float planeDist = cutAwayData.w;
    if (cutaway(v_worldPos, planeNormal, planeDist)) {
      discard;
      return;
    }
  }

#if defined(DRAW_COLOR)
  // Cutaways
  if (testFlag(flags, GEOMITEM_FLAG_CUTAWAY)) 
  {
    if (!gl_FrontFacing) {
#ifdef ENABLE_ES3
      fragColor = cutColor;
#else
      gl_FragColor = cutColor;
#endif
      return;
    }
  }

  //////////////////////////////////////////////
  // Normals
  
  vec3 viewNormal;
  if (length(v_viewNormal) < 0.1) {
    viewNormal = computeViewNormal(v_viewPos);
  } else {
    viewNormal = normalize(v_viewNormal);
  }
  vec3 normal = normalize(mat3(cameraMatrix) * viewNormal);
  
  vec3 viewVector;
  if (isOrthographic == 0)
    viewVector = normalize(mat3(cameraMatrix) * normalize(v_viewPos));
  else 
    viewVector = vec3(-cameraMatrix[2][0], -cameraMatrix[2][1], -cameraMatrix[2][2]);
  
  //////////////////////////////////////////////
  // Material

#ifdef ENABLE_MULTI_DRAW

  vec2 materialCoords = v_geomItemData.zw;
  if (v_drawItemIds.z > 0.5) {
    materialCoords.x = v_drawItemIds.z;
  }
  vec4 baseColor      = getMaterialValue(materialCoords, 0);
  vec4 matValue1      = getMaterialValue(materialCoords, 1);
  float opacity       = baseColor.a * matValue1.r;
  float emission      = matValue1.g;

#else // ENABLE_MULTI_DRAW

#ifndef ENABLE_TEXTURES
  vec4 baseColor      = BaseColor;
  float emission      = EmissiveStrength;
  float opacity       = baseColor.a * Opacity;
#else
  vec4 baseColor      = getColorParamValue(BaseColor, BaseColorTex, BaseColorTexType, v_textureCoord);
  float opacity       = baseColor.a * getLuminanceParamValue(Opacity, OpacityTex, OpacityTexType, v_textureCoord) * treeItemOpacity;
  float emission      = getLuminanceParamValue(EmissiveStrength, EmissiveStrengthTex, EmissiveStrengthTexType, v_textureCoord);
#endif

#endif // ENABLE_MULTI_DRAW

  // Hacky simple irradiance. 
  float ndotv = dot(normal, viewVector);
  if (ndotv < 0.0) {
    normal = -normal;
    ndotv = dot(normal, viewVector);

    // Note: these 2 lines can be used to debug inverted meshes.
    //baseColor = vec4(1.0, 0.0, 0.0, 1.0);
    //ndotv = 1.0;
  }

  fragColor = vec4((ndotv * baseColor.rgb) + (emission * baseColor.rgb), opacity);

  // Note: the 'treeItemOpacity' is not an input to the lighting, 
  // as we want to also blend off the specular reflections to make an object
  // fade away to nothing. (not become a transparent glass object).
  fragColor.a *= treeItemOpacity;

#ifdef DEBUG_GEOM_ID
  if (testFlag(flags, GEOMITEM_INVISIBLE_IN_GEOMDATA)) {
    discard;
    return;
  }

  // ///////////////////////
  // Debug Draw ID (this correlates to GeomID within a GLGeomSet)
  float geomId = v_geomItemData.w;
  fragColor.rgb = getDebugColor(geomId);
  // ///////////////////////
#endif

#ifdef ENABLE_INLINE_GAMMACORRECTION
  fragColor.rgb = toGamma(fragColor.rgb);
#endif

#elif defined(DRAW_GEOMDATA)

  if (testFlag(flags, GEOMITEM_INVISIBLE_IN_GEOMDATA)) {
    discard;
    return;
  }
  if (occlusionCulling != 0) {
    // Transparent geoms do not render to the occlusion buffer
    if (testFlag(flags, GEOMITEM_TRANSPARENT)) {
      discard;
      return;
    }
  }
  fragColor = setFragColor_geomData(v_viewPos, floatGeomBuffer, passId, v_drawItemIds.x, v_drawItemIds.y, isOrthographic);
#elif defined(DRAW_HIGHLIGHT)
  fragColor = setFragColor_highlight(v_drawItemIds.x);
#endif // DRAW_HIGHLIGHT

#ifndef ENABLE_ES3
  gl_FragColor = fragColor;
#endif
}`,dA=`precision highp float;
#define GLSLIFY 1

attribute vec3 positions;
attribute vec3 normals;
#ifdef ENABLE_TEXTURES
attribute vec2 texCoords;
#endif

uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;

import 'GLSLUtils.glsl'
import 'transpose.glsl'
import 'inverse.glsl'
import 'geomItemId.glsl'
import 'drawItemTexture.glsl'
import 'modelMatrix.glsl'

/* VS Outputs */
varying vec4 v_drawItemIds;
varying vec4 v_geomItemData;
varying vec3 v_viewPos;
varying vec3 v_viewNormal;
#ifdef ENABLE_TEXTURES
varying vec2 v_textureCoord;
#endif
varying vec3 v_worldPos;

void main(void) {
  v_drawItemIds = getDrawItemIds();
  int geomItemId = int(v_drawItemIds.x + 0.5);
  v_geomItemData  = getInstanceData(geomItemId);

  mat4 modelMatrix = getModelMatrix(geomItemId);
  mat4 modelViewMatrix = viewMatrix * modelMatrix;

  vec4 pos = vec4(positions, 1.);
  vec4 viewPos    = modelViewMatrix * pos;
  gl_Position     = projectionMatrix * viewPos;

  mat3 normalMatrix = mat3(transpose(inverse(modelViewMatrix)));
  v_viewPos       = -viewPos.xyz;
  v_viewNormal    = normalMatrix * normals;

#ifdef ENABLE_TEXTURES
  v_textureCoord  = texCoords;
  // v_textureCoord.y = 1.0 - v_textureCoord.y;// Flip y
#endif

  v_worldPos      = (modelMatrix * pos).xyz;
}
`;class sA extends Pe{constructor(e){super(e,"SimpleSurfaceShader");this.setShaderStage("VERTEX_SHADER",dA),this.setShaderStage("FRAGMENT_SHADER",UA)}static getPackedMaterialData(e){const g=new Float32Array(8),t=e.getParameter("BaseColor");let I;return t instanceof ye&&t.colorSpace==Bg.Gamma?I=t.value.toLinear():I=t.value,g[0]=I.r,g[1]=I.g,g[2]=I.b,g[3]=I.a,g[4]=e.getParameter("Opacity").value,g[5]=e.getParameter("EmissiveStrength").value,g}static getMaterialTemplate(){return oA}}const oA=new zl("SimpleSurfaceShader_template");S.register("SimpleSurfaceShader",sA);var AA=`
precision highp float;
precision highp int;
#define GLSLIFY 1

attribute vec3 positions;
attribute vec3 normals;
#ifdef ENABLE_TEXTURES
attribute vec2 texCoords;
#endif

uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;

// Now that we render multiple types of geometry from a single shader
// we need to know what kind of geometry it is...
uniform int geomType;

// should be imported by bottom 3
import 'GLSLUtils.glsl'
import 'transpose.glsl'
import 'inverse.glsl'

import 'geomItemId.glsl'
import 'geomType.glsl'
import 'drawItemTexture.glsl'
import 'modelMatrix.glsl'

/* VS Outputs */
varying vec4 v_drawItemIds;
varying vec4 v_geomItemData;
varying vec3 v_viewPos;
varying vec3 v_viewNormal;
#ifdef ENABLE_TEXTURES
varying vec2 v_textureCoord;
#endif
varying vec3 v_worldPos;
/* VS Outputs */

#if defined(DRAW_COLOR)
#elif defined(DRAW_GEOMDATA)
#elif defined(DRAW_HIGHLIGHT)
#endif // DRAW_HIGHLIGHT

void main(void) {

  v_drawItemIds = getDrawItemIds();
  int geomItemId = int(v_drawItemIds.x + 0.5);
  v_geomItemData = getInstanceData(geomItemId);
  mat4 modelMatrix = getModelMatrix(geomItemId);

  vec4 pos = vec4(positions, 1.);
  mat4 modelViewMatrix = viewMatrix * modelMatrix;
  vec4 viewPos    = modelViewMatrix * pos;
  gl_Position     = projectionMatrix * viewPos;
  v_viewPos = -viewPos.xyz;
  v_worldPos      = (modelMatrix * pos).xyz;

  mat3 normalMatrix = mat3(transpose(inverse(modelViewMatrix)));
  v_viewPos       = -viewPos.xyz;
  v_viewNormal    = normalMatrix * normals;
  
  // offset slightly the lines and points to make them clearly defined.
  // This ensures that lines drawn over surfaces are solid and not clipped
  // at all by the surface.
  if (geomType == LINES) { // start 'LINES'
    float overlay = 0.00001;
    gl_Position.z = mix(gl_Position.z, -gl_Position.w, overlay);
  } // end 'LINES'
  else if (geomType == POINTS) { // start 'POINTS'
    float overlay = 0.00003;
    gl_Position.z = mix(gl_Position.z, -gl_Position.w, overlay);
  }  // end 'POINTS'

#ifdef ENABLE_TEXTURES
  v_textureCoord  = texCoords;
#endif

}
`,BA=`precision highp float;
precision highp int;
#define GLSLIFY 1
import 'GLSLUtils.glsl'
import 'drawItemTexture.glsl' 
import 'cutaways.glsl'
import 'gamma.glsl'
import 'materialparams.glsl'
import 'GLSLBits.glsl'

/* VS Outputs */
varying vec4 v_drawItemIds;
varying vec4 v_geomItemData;
varying vec3 v_viewPos;
varying vec3 v_viewNormal;
#ifdef ENABLE_TEXTURES
varying vec2 v_textureCoord;
#endif
varying vec3 v_worldPos;
/* VS Outputs */

#ifdef ENABLE_ES3
  out vec4 fragColor;
#endif

// Now that we render multiple types of geometry from a single shader
// we need to know what kind of geometry it is...
uniform int geomType;
import 'geomType.glsl'

#if defined(DRAW_COLOR)

#ifdef ENABLE_INLINE_GAMMACORRECTION
uniform float exposure;
#endif

uniform mat4 cameraMatrix;
uniform int isOrthographic;

#ifndef ENABLE_MULTI_DRAW

uniform color BaseColor;
uniform float AmbientOcclusion;
uniform float Roughness;
uniform float Metallic;
uniform float Reflectance;
uniform float EmissiveStrength;
uniform float Opacity;

uniform color EdgeColor;
uniform color PointColor;

#ifdef ENABLE_TEXTURES
uniform sampler2D BaseColorTex;
uniform int BaseColorTexType;

uniform sampler2D AmbientOcclusionTex;
uniform int AmbientOcclusionTexType;

#ifdef ENABLE_PBR
uniform sampler2D RoughnessTex;
uniform int RoughnessTexType;

uniform sampler2D MetallicTex;
uniform int MetallicTexType;

uniform sampler2D ReflectanceTex;
uniform int ReflectanceTexType;

uniform sampler2D NormalTex;
uniform int NormalTexType;
#endif // ENABLE_PBR

uniform sampler2D EmissiveStrengthTex;
uniform int EmissiveStrengthTexType;

#endif // ENABLE_TEXTURES
#endif // ENABLE_MULTI_DRAW

import 'PBRSurfaceRadiance.glsl'

#ifdef ENABLE_PBR
mat3 cotangentFrame( in vec3 normal, in vec3 pos, in vec2 texCoord ) {
  // https://stackoverflow.com/questions/5255806/how-to-calculate-tangent-and-binormal
  vec3 n = normal;
  // derivations of the fragment position
  vec3 pos_dx = dFdx( pos );
  vec3 pos_dy = dFdy( pos );
  // derivations of the texture coordinate
  vec2 texC_dx = dFdx( texCoord );
  vec2 texC_dy = dFdy( texCoord );
  // tangent vector and binormal vector
  vec3 t = -(texC_dy.y * pos_dx - texC_dx.y * pos_dy);
  vec3 b = -(texC_dx.x * pos_dy - texC_dy.x * pos_dx);

  t = t - n * dot( t, n ); // orthonormalization ot the tangent vectors
  b = b - n * dot( b, n ); // orthonormalization of the binormal vectors to the normal vector
  b = b - t * dot( b, t ); // orthonormalization of the binormal vectors to the tangent vector
  mat3 tbn = mat3( normalize(t), normalize(b), n );

  return tbn;
}
#endif

import 'computeViewNormal.glsl'

#elif defined(DRAW_GEOMDATA)

#ifdef ENABLE_MULTI_DRAW
// #define DEBUG_GEOM_ID
#endif
#ifdef DEBUG_GEOM_ID
import 'debugColors.glsl'
#endif

uniform int isOrthographic;
import 'surfaceGeomData.glsl'

#elif defined(DRAW_HIGHLIGHT)
import 'surfaceHighlight.glsl'
#endif // DRAW_HIGHLIGHT

void main(void) {
  #ifndef ENABLE_ES3
    vec4 fragColor;
  #endif
  
  int geomItemId = int(v_drawItemIds.x + 0.5);
  int elemId = int(v_drawItemIds.y + 0.5);
  int perFaceMaterialId = int(v_drawItemIds.z);
  int flags = int(v_geomItemData.x + 0.5);
  float treeItemOpacity = v_geomItemData.y;

  if (testFlag(flags, GEOMITEM_FLAG_CUTAWAY)) {
    vec4 cutAwayData   = getCutaway(geomItemId);
    vec3 planeNormal = cutAwayData.xyz;
    float planeDist = cutAwayData.w;
    if (cutaway(v_worldPos, planeNormal, planeDist)) {
        discard;
        return;
    }
  }
  vec2 materialCoords = v_geomItemData.zw;
  if (v_drawItemIds.z > 0.5) {
    materialCoords.x = v_drawItemIds.z;
  }
  
#if defined(DRAW_COLOR)

  if (geomType == TRIANGLES) { // start 'TRIANGLES'

  // Cutaways
  if (testFlag(flags, GEOMITEM_FLAG_CUTAWAY)) {
    if (!gl_FrontFacing) {
#ifdef ENABLE_ES3
      fragColor = cutColor;
#else
      gl_FragColor = cutColor;
#endif
      return;
    }
  }

  

  //////////////////////////////////////////////
  // Normals
  vec3 viewNormal;
  if (length(v_viewNormal) < 0.1) {
    viewNormal = computeViewNormal(v_viewPos);
  } else {
    viewNormal = normalize(v_viewNormal);
  }
  vec3 normal = normalize(mat3(cameraMatrix) * viewNormal);
  
  vec3 viewVector;
  if (isOrthographic == 0)
    viewVector = normalize(mat3(cameraMatrix) * normalize(v_viewPos));
  else 
    viewVector = vec3(-cameraMatrix[2][0], -cameraMatrix[2][1], -cameraMatrix[2][2]);
    
  if (dot(normal, viewVector) < 0.0) {
    normal = -normal;
    // Note: this line can be used to debug inverted meshes.
    //material.baseColor = vec3(1.0, 0.0, 0.0);
  }

  //////////////////////////////////////////////
  // Material

  MaterialParams material;

#ifdef ENABLE_MULTI_DRAW
  vec4 matValue0      = getMaterialValue(materialCoords, 0);
  vec4 matValue1      = getMaterialValue(materialCoords, 1);
  vec4 matValue2      = getMaterialValue(materialCoords, 2);

  material.baseColor     = matValue0.rgb;
  material.ambientOcclusion      = matValue1.r;
  material.metallic      = matValue1.g;
  material.roughness     = matValue1.b;
  material.reflectance   = matValue1.a;

  material.emission      = matValue2.r;
  material.opacity       = matValue2.g * matValue0.a;
  if (material.opacity < 0.001) discard;

#else // ENABLE_MULTI_DRAW

#ifndef ENABLE_TEXTURES
  material.baseColor     = BaseColor.rgb;
  material.emission      = EmissiveStrength;

#ifdef ENABLE_PBR
  material.roughness     = Roughness;
  material.metallic      = Metallic;
  material.reflectance   = Reflectance;
#endif

#else // ENABLE_TEXTURES
  // Planar YZ projection for texturing, repeating every meter.
  // vec2 texCoord       = v_worldPos.xz * 0.2;
  vec2 texCoord          = v_textureCoord;

  vec4 baseColor         = getColorParamValue(BaseColor, BaseColorTex, BaseColorTexType, texCoord);

  material.ambientOcclusion = getLuminanceParamValue(AmbientOcclusion, AmbientOcclusionTex, AmbientOcclusionTexType, texCoord);
  material.baseColor     = baseColor.rgb;
  
  material.opacity       = Opacity * baseColor.a;
  if (material.opacity < 0.001) discard;

#ifdef ENABLE_PBR

  material.metallic      = getLuminanceParamValue(Metallic, MetallicTex, MetallicTexType, texCoord);
  material.roughness     = getLuminanceParamValue(Roughness, RoughnessTex, RoughnessTexType, texCoord);

  // TODO: Communicate that this tex contains the roughness as well.
  if (MetallicTexType != 0) {
    vec4 metallicRoughness = vec4(Metallic, Roughness, 0.0, 1.0);
    metallicRoughness     = texture2D(MetallicTex, texCoord);
    material.roughness     = metallicRoughness.g;
    material.metallic     = metallicRoughness.b;
  }

  material.reflectance   = getLuminanceParamValue(Reflectance, ReflectanceTex, ReflectanceTexType, texCoord);
#endif // ENABLE_PBR
  material.emission         = getLuminanceParamValue(EmissiveStrength, EmissiveStrengthTex, EmissiveStrengthTexType, texCoord);
#endif // ENABLE_TEXTURES

#ifdef ENABLE_TEXTURES
#ifdef ENABLE_PBR
  if (NormalTexType != 0) {
      mat3 tbn = cotangentFrame(normal, viewVector, texCoord);
      normal = normalize(tbn * (texture2D(NormalTex, texCoord).rgb * 2.0 - 1.0));
  }
#endif // ENABLE_PBR
#endif // ENABLE_TEXTURES
#endif // ENABLE_MULTI_DRAW

  fragColor = pbrSurfaceRadiance(material, normal, viewVector);
  
  // Note: the 'treeItemOpacity' is not an input to the PBR lighting, 
  // as we want to also blend off the specular reflections to make an object
  // fade away to nothing. (not become a transparent glass object).
  fragColor.a *= treeItemOpacity;

  // Debugging code to help understand what might be happening in the shader.
  // fragColor = vec4(texture2D(NormalTex, texCoord).rgb, 1.0);
  // fragColor = metallicRoughness;
  // fragColor = vec4(material.baseColor, 1.0);;
  // fragColor = vec4(vec3(material.metallic), 1.0);;
  // fragColor = vec4(vec3(material.roughness), 1.0);;
  // fragColor = vec4(vec3(material.ambientOcclusion), 1.0);

  } // end 'TRIANGLES'
  else if (geomType == LINES) { // start 'LINES'
#ifdef ENABLE_MULTI_DRAW
    vec4 edgeColor      = getMaterialValue(materialCoords, 3);
    vec4 matValue2      = getMaterialValue(materialCoords, 2);
    float opacity       = matValue2.g;
#else 
    vec4 edgeColor      = EdgeColor;
    float opacity        = Opacity;
#endif // ENABLE_MULTI_DRAW
    edgeColor.a = edgeColor.a * opacity * treeItemOpacity;
    if (edgeColor.a < 0.001) discard;
    fragColor = edgeColor;
  } // end 'LINES'
  else if (geomType == POINTS) { // start 'POINTS'
#ifdef ENABLE_MULTI_DRAW
    vec4 pointColor     = getMaterialValue(materialCoords, 4);
    vec4 matValue2      = getMaterialValue(materialCoords, 2);
    float opacity       = matValue2.g;
#else 
    vec4 pointColor      = PointColor;
    float opacity        = Opacity;
#endif // ENABLE_MULTI_DRAW
    pointColor.a = pointColor.a * opacity * treeItemOpacity;
    if (pointColor.a < 0.001) discard;
    fragColor = pointColor;
  }  // end 'POINTS'
  
#ifdef DEBUG_GEOM_ID
  // ///////////////////////
  // Debug Draw ID (this correlates to GeomID within a GLGeomSet)
  float geomId = v_geomItemData.w;
  fragColor.rgb = getDebugColor(geomId);
  // ///////////////////////
#endif

#ifdef ENABLE_INLINE_GAMMACORRECTION
  fragColor.rgb = toGamma(fragColor.rgb * exposure);
#endif

#elif defined(DRAW_GEOMDATA)
  // Cutaways
  if (testFlag(flags, GEOMITEM_INVISIBLE_IN_GEOMDATA)) {
    discard;
    return;
  }
  if (occlusionCulling != 0) {
    // Transparent geoms do not render to the occlusion buffer
    if (testFlag(flags, GEOMITEM_TRANSPARENT)) {
      discard;
      return;
    }
  }

  // We can make geoms invisible to hide them. 
  // Avoid drawing GeomData for geoms that are completely transparent.
  if (geomType == TRIANGLES) { // start 'TRIANGLES'
    vec4 matValue0      = getMaterialValue(materialCoords, 0);
    vec4 matValue2      = getMaterialValue(materialCoords, 2);
    float opacity          = matValue2.g * matValue0.a * treeItemOpacity;
    if (opacity < 0.001) {
      discard;
      return;
    }
  } // end 'TRIANGLES'
  else if (geomType == LINES) { // start 'LINES'
#ifdef ENABLE_MULTI_DRAW
    vec4 edgeColor      = getMaterialValue(materialCoords, 3);
#else 
    vec4 edgeColor      = EdgeColor;
#endif // ENABLE_MULTI_DRAW
    float opacity          = edgeColor.a * treeItemOpacity;
    if (opacity < 0.001) {
      discard;
      return;
    }
  } // end 'LINES'
  else if (geomType == POINTS) { // start 'POINTS'
#ifdef ENABLE_MULTI_DRAW
    vec4 pointColor      = getMaterialValue(materialCoords, 4);
#else 
    vec4 pointColor      = PointColor;
#endif // ENABLE_MULTI_DRAW
    float opacity          = pointColor.a * treeItemOpacity;
    if (opacity < 0.001) {
      discard;
      return;
    }
  }  // end 'POINTS'

  
  fragColor = setFragColor_geomData(v_viewPos, floatGeomBuffer, passId, v_drawItemIds.x, v_drawItemIds.y, isOrthographic);
   
#elif defined(DRAW_HIGHLIGHT)
  fragColor = getHighlightColor(geomItemId);
#endif // DRAW_HIGHLIGHT

#ifndef ENABLE_ES3
  gl_FragColor = fragColor;
#endif

}`;class va extends Pe{constructor(e){super(e,"StandardSuraceShader");this.setShaderStage("VERTEX_SHADER",AA),this.setShaderStage("FRAGMENT_SHADER",BA)}bind(e,g){const t=e;super.bind(e,g);const I=this.__gl;t.envMap&&t.envMap.bind(t);const{exposure:l,cutColor:C}=t.unifs;return l&&I.uniform1f(l.location,t.exposure),C&&I.uniform4f(C.location,.3,0,0,1),!0}static getPackedMaterialData(e){const g=new Float32Array(20),t=e.getParameter("BaseColor");let I;t instanceof ye&&t.colorSpace==Bg.Gamma?I=t.value.toLinear():I=t.value,g[0]=I.r,g[1]=I.g,g[2]=I.b,g[3]=I.a,g[4]=e.getParameter("AmbientOcclusion").value,g[5]=e.getParameter("Metallic").value,g[6]=e.getParameter("Roughness").value,g[7]=e.getParameter("Reflectance").value,g[8]=e.getParameter("EmissiveStrength").value,g[9]=e.getParameter("Opacity").value;const l=e.getParameter("EdgeColor").value;g[12]=l.r,g[13]=l.g,g[14]=l.b,g[15]=l.a;const C=e.getParameter("PointColor").value;return g[16]=C.r,g[17]=C.g,g[18]=C.b,g[19]=C.a,g}static getMaterialTemplate(){return QA}}const QA=new _l("StandardSurfaceShader_template");S.register("StandardSurfaceShader",va);S.register("TransparentSurfaceShader",va);var VA=`
precision highp float;
#define GLSLIFY 1

import 'GLSLUtils.glsl'
#ifdef ENABLE_MULTI_DRAW
import 'drawItemTexture.glsl'
#endif // ENABLE_MULTI_DRAW

import 'gamma.glsl'
import 'materialparams.glsl'

#if defined(DRAW_COLOR)

  #ifndef ENABLE_MULTI_DRAW

    uniform color BaseColor;

    #ifdef ENABLE_TEXTURES
      uniform sampler2D BaseColorTex;
      uniform int BaseColorTexType;
    #endif

  #endif // ENABLE_MULTI_DRAW
#endif // DRAW_COLOR

/* VS Outputs */
varying float v_geomItemId;
varying vec4 v_geomItemData;
#ifdef ENABLE_TEXTURES
varying vec2 v_textureCoord;
#endif

#if defined(DRAW_GEOMDATA)
  uniform int isOrthographic;
  import 'surfaceGeomData.glsl'
#elif defined(DRAW_HIGHLIGHT)
  import 'surfaceHighlight.glsl'
#endif // DRAW_HIGHLIGHT

#ifdef ENABLE_ES3
  out vec4 fragColor;
#endif

void main(void) {
  
#ifndef ENABLE_ES3
  vec4 fragColor;
#endif

  //////////////////////////////////////////////
  // Color
#if defined(DRAW_COLOR)

  #ifdef ENABLE_MULTI_DRAW

    vec2 materialCoords = v_geomItemData.zw;
    vec4 baseColor = getMaterialValue(materialCoords, 0);

  #else // ENABLE_MULTI_DRAW

  #ifndef ENABLE_TEXTURES
    vec4 baseColor = BaseColor;
  #else
    vec4 baseColor      = getColorParamValue(BaseColor, BaseColorTex, BaseColorTexType, v_textureCoord);
  #endif

  #endif // ENABLE_MULTI_DRAW

    fragColor = baseColor;

  #ifdef ENABLE_INLINE_GAMMACORRECTION
    fragColor.rgb = toGamma(fragColor.rgb);
  #endif

  //////////////////////////////////////////////
  // GeomData
#elif defined(DRAW_GEOMDATA)
  fragColor = setFragColor_geomData(vec3(0,0,0), floatGeomBuffer, passId, v_geomItemId, 0.0, isOrthographic);
#elif defined(DRAW_HIGHLIGHT)
  fragColor = setFragColor_highlight(v_geomItemId);
#endif // DRAW_HIGHLIGHT

#ifndef ENABLE_ES3
  gl_FragColor = fragColor;
#endif
}
`,rA=`
precision highp float;
#define GLSLIFY 1

attribute vec3 positions;
#ifdef ENABLE_TEXTURES
attribute vec2 texCoords;
#endif

import 'GLSLUtils.glsl'
import 'geomItemId.glsl'
import 'drawItemTexture.glsl'
import 'modelMatrix.glsl'

/* VS Outputs */
varying float v_geomItemId;
varying vec4 v_geomItemData;
#ifdef ENABLE_TEXTURES
varying vec2 v_textureCoord;
#endif

void main(void) {
  int geomItemId = getGeomItemId();
  v_geomItemId = float(geomItemId);
  v_geomItemData  = getInstanceData(geomItemId);

  mat4 modelMatrix = getModelMatrix(geomItemId);

  gl_Position = (modelMatrix * vec4(positions, 1.0));

  v_textureCoord = texCoords;
  v_textureCoord.y = 1.0 - v_textureCoord.y;// Flip y
}
`;class RA extends Pe{constructor(e){super(e,"ScreenSpaceShader");this.setShaderStage("VERTEX_SHADER",rA),this.setShaderStage("FRAGMENT_SHADER",VA)}static isOverlay(){return!0}static getPackedMaterialData(e){const g=new Float32Array(8),t=e.getParameter("BaseColor").value;return g[0]=t.r,g[1]=t.g,g[2]=t.b,g[3]=t.a,g}static getMaterialTemplate(){return hA}}const hA=new Ll("ScreenSpaceShader_template");S.register("ScreenSpaceShader",RA);class Ma extends Ga{constructor(){super();this.materials={},this.listenerIDs={}}init(e,g){super.init(e,g)}itemAddedToScene(e,g){if(e instanceof ge){const t=e;return this.filterGeomItem(t)?(this.addGeomItem(t),!0):!1}else return!1}itemRemovedFromScene(e,g){return e instanceof ge?(this.removeGeomItem(e),!0):!1}filterGeomItem(e){return!0}addGeomItem(e){const g={};this.listenerIDs[e.getId()]=g;const t=()=>{this.removeGeomItem(e),this.renderer.assignTreeItemToGLPass(e)};g["materialParam.valueChanged"]=e.materialParam.on("valueChanged",t),g["geomParam.valueChanged"]=e.geomParam.on("valueChanged",t);const I=C=>{C.isOpaqueStateChanged&&t()},l=e.materialParam.value;this.materials[e.getId()]=l,g["geomItem.opacityChanged"]=e.on("opacityChanged",I),g["material.opacityChanged"]=l.on("opacityChanged",I)}removeGeomItem(e){const g=e.getId(),t=this.listenerIDs[g];delete this.listenerIDs[g],e.materialParam.removeListenerById("valueChanged",t["materialParam.valueChanged"]),e.geomParam.removeListenerById("valueChanged",t["geomParam.valueChanged"]);const I=this.materials[e.getId()];delete this.materials[g],e.removeListenerById("opacityChanged",t["geomItem.opacityChanged"]),I.removeListenerById("opacityChanged",t["material.opacityChanged"])}constructShaders(e){let g,t;const I=this.__renderer.getOrCreateShader(e);return I.getGeomDataShaderName()?g=this.__renderer.getOrCreateShader(I.getGeomDataShaderName()):g=I,I.getSelectedShaderName()?t=this.__renderer.getOrCreateShader(I.getSelectedShaderName()):t=I,{glShader:I,glgeomdatashader:g,glselectedshader:t}}getGeomItemAndDist(e){let g,t=-1,I;e instanceof Float32Array?(g=Math.round(e[1]),t=Math.round(e[2]),I=e[3]):(g=e[0]+((e[1]&63)<<8),I=q.decode16BitFloatFrom2xUInt8(e.slice(2,3)));const l=this.renderer.glGeomItemLibrary.getGeomItem(g);if(l)return{geomItem:l,componentId:t,dist:I}}}var cA=`
precision highp float;
#define GLSLIFY 1
attribute vec3 positions;  //(location = 0)

/* VS Outputs */
varying vec2 v_texCoord;
 
void main()
{
  v_texCoord = positions.xy+0.5;
  gl_Position = vec4(positions.xy*2.0, -1.0, 1.0);
}
`,ZA=`
precision highp float;
#define GLSLIFY 1

uniform sampler2D colorTexture;
uniform sampler2D depthTexture;
uniform vec2 screenSize;

uniform float growth;

varying vec2 v_texCoord;

bool sampleNeiPixel(vec2 fragCoord, inout vec4 res) {
  res = texture2D(colorTexture, fragCoord/screenSize);
  if (res.a > 0.0) {
    return true;
  }
  return false;
}

vec4 samplePixels(vec2 fragCoord) {
  vec4 res = vec4(0.0);
  
  if (sampleNeiPixel(fragCoord, res)) return res; // M
  
  // Search surrounding pixels for geoms
  if (sampleNeiPixel(fragCoord+vec2( 1, 0), res)) return res; // E
  if (sampleNeiPixel(fragCoord+vec2(-1, 0), res)) return res; // W
  if (sampleNeiPixel(fragCoord+vec2( 0, 1), res)) return res; // N
  if (sampleNeiPixel(fragCoord+vec2( 0,-1), res)) return res; // S
  if (sampleNeiPixel(fragCoord+vec2( 1, 1), res)) return res; // NW
  if (sampleNeiPixel(fragCoord+vec2(-1, 1), res)) return res; // NE
  if (sampleNeiPixel(fragCoord+vec2( 1,-1), res)) return res; // SW
  if (sampleNeiPixel(fragCoord+vec2(-1,-1), res)) return res; // SE
  
  return res;
}

#ifdef ENABLE_ES3
  out vec4 fragColor;
#endif
void main(void) {
#ifndef ENABLE_ES3
  vec4 fragColor;
#endif

  fragColor = samplePixels(gl_FragCoord.xy);
  if (fragColor.a < 0.0001) {
    discard; 
  }

#ifndef ENABLE_ES3
  gl_FragColor = fragColor;
#endif
}
`;class Ha extends Pe{constructor(e){super(e,"FattenLinesShader");this.setShaderStage("VERTEX_SHADER",cA),this.setShaderStage("FRAGMENT_SHADER",ZA)}}const mA=(i,e)=>i.length==e.length&&!i.some((g,t)=>g!=e[t]);var Yg;(function(i){i[i.TRIANGLES=0]="TRIANGLES",i[i.LINES=1]="LINES",i[i.POINTS=2]="POINTS"})(Yg||(Yg={}));class WA extends Xe{constructor(e){super();this.glGeomItems=[],this.glGeomIdsMapping={},this.glgeomItemEventHandlers=[],this.freeIndices=[],this.dirtyGeomItems=new Set,this.drawIdsBufferDirty=!0,this.drawIdsArraysAllocators={},this.drawIdsArrays={},this.drawIdsTextures={},this.drawElementCounts={},this.drawElementOffsets={},this.drawOrderToIndex=[],this.indexToDrawIndex=[],this.highlightedItems={},this.highlightedIdsArraysAllocators={},this.highlightElementCounts={},this.highlightElementOffsets={},this.highlightedIdsArray={},this.highlightedIdsTextures={},this.dirtyHighlightedGeomItems=new Set,this.highlightedIdsBufferDirty=!0,this.linesGeomDataBuffer=null,this.fattenLinesShader=null,this.quad=null,this.fbo=null,this.renderer=e,this.gl=e.gl,this.renderer.glGeomLibrary.on("geomDataChanged",g=>{const t=this.glGeomIdsMapping[g.index];t!=null&&t.forEach(I=>{this.dirtyGeomItems.add(I),this.drawIdsBufferDirty||(this.drawIdsBufferDirty=!0,this.emit("updated"))})})}addGLGeomItem(e){const g=this.freeIndices.length>0?this.freeIndices.pop():this.glGeomItems.length;this.glGeomIdsMapping[e.geomId]?this.glGeomIdsMapping[e.geomId].push(g):this.glGeomIdsMapping[e.geomId]=[g];const t={};e.visible&&(this.indexToDrawIndex[g]=this.drawOrderToIndex.length,this.drawOrderToIndex.push(g),this.dirtyGeomItems.add(g)),t.visibilityChanged=l=>{if(l.visible){const C=this.renderer.glGeomLibrary.getGeomBuffers(e.geomId);for(let n in C.counts){if(C.counts[n]==0)continue;const F=this.drawIdsArraysAllocators[n];if(F){const a=F.getAllocation(g);if(a){const U=a.start;if(e.shattered)for(let d=0;d<a.size;d++)this.drawElementCounts[n][U+d]=C.subGeomCounts[n][d];else{const d=C.materialSubGeoms[n];for(let s=0;s<a.size;s++){const o=d[s];this.drawElementCounts[n][U+s]=o.count}}}}}}else for(let C in this.drawIdsArraysAllocators){const n=this.drawIdsArraysAllocators[C];if(n){const F=n.getAllocation(g);if(F){const a=F.start;for(let U=0;U<F.size;U++)this.drawElementCounts[C][a+U]=0}}}this.emit("updated")},e.on("visibilityChanged",t.visibilityChanged);const I=l=>{const C=l.indexOf(":");let n=[];C!=-1&&(n=l.substring(C+1).split(",").map(F=>Number.parseInt(F))),!(this.highlightedItems[g]&&mA(this.highlightedItems[g],n))&&(this.highlightedItems[g]=n,this.highlightedIdsBufferDirty=!0,this.emit("updated"))};e.geomItem.isHighlighted()&&I(e.geomItem.getHighlightName()),t.highlightChanged=l=>{l&&l.name?I(l.name):(delete this.highlightedItems[g],this.highlightedIdsBufferDirty=!0,this.emit("updated"))},e.geomItem.on("highlightChanged",t.highlightChanged),t.shatterStateChanged=l=>{this.dirtyGeomItems.add(g),this.drawIdsBufferDirty=!0,this.renderer.renderGeomDataFbos()},e.on("shatterStateChanged",t.shatterStateChanged),e.geomItem.geomParam.value.materials.forEach(C=>{this.renderer.glMaterialLibrary.addMaterial(C)}),this.glGeomItems[g]=e,this.glgeomItemEventHandlers[g]=t,this.drawIdsBufferDirty=!0,this.emit("updated")}removeGLGeomItem(e){const g=this.glGeomItems.indexOf(e),t=this.glGeomIdsMapping[e.geomId];t.splice(t.indexOf(g),1),t.length==0&&delete this.glGeomIdsMapping[e.geomId];const I=this.glgeomItemEventHandlers[g];e.geomItem.off("highlightChanged",I.highlightChanged),e.off("visibilityChanged",I.visibilityChanged),this.glGeomItems[g]=null,this.glgeomItemEventHandlers[g]=null,this.freeIndices.push(g),this.dirtyGeomItems.has(g)&&this.dirtyGeomItems.delete(g);for(let l in this.drawIdsArraysAllocators){const C=this.drawIdsArraysAllocators[l].getAllocation(g);if(C){for(let n=0;n<C.size;n++)this.drawElementOffsets[l][C.start+n]=0,this.drawElementCounts[l][C.start+n]=0;this.drawIdsArraysAllocators[l].deallocate(g)}}if(e.isVisible()){const l=this.drawOrderToIndex.indexOf(g);this.drawOrderToIndex.splice(l,1),this.indexToDrawIndex[g]=-1,this.drawIdsBufferDirty=!0}e.geomItem.isHighlighted()&&(delete this.highlightedItems[g],this.highlightedIdsBufferDirty=!0),this.emit("updated")}updateDrawIDsBuffer(e){this.dirtyGeomItems.forEach(C=>{const n=this.glGeomItems[C];if(!!n){const F=this.renderer.glGeomLibrary.getGeomBuffers(n.geomId);let a={};if(n.shattered)for(let U in F.subGeomCounts)a[U]=F.subGeomCounts[U].length;else for(let U in F.materialSubGeoms)a[U]=F.materialSubGeoms[U].length;for(let U in a){const d=a[U];this.drawIdsArraysAllocators[U]||(this.drawIdsArraysAllocators[U]=new vt);const s=this.drawIdsArraysAllocators[U].getAllocation(C);if(s)for(let o=0;o<s.size;o++)this.drawElementCounts[U][s.start+o]=0;this.drawIdsArraysAllocators[U].allocate(C,d)}}});let g=!1;for(let C in this.drawIdsArraysAllocators){const n=this.drawIdsArraysAllocators[C];(!this.drawElementCounts[C]||n.reservedSpace>this.drawElementCounts[C].length)&&(this.drawElementCounts[C]&&n.reservedSpace>this.drawElementCounts[C].length&&(g=!0),this.drawIdsArrays[C]=new Float32Array(n.reservedSpace*4),this.drawElementOffsets[C]=new Int32Array(n.reservedSpace),this.drawElementCounts[C]=new Int32Array(n.reservedSpace))}if(g)for(let C=0;C<this.drawOrderToIndex.length;C++)this.dirtyGeomItems.add(C);const t=4;this.dirtyGeomItems.forEach(C=>{const n=this.glGeomItems[C];if(!n)return;const F=this.renderer.glGeomLibrary.getGeomOffsetAndCount(n.geomId),a=this.renderer.glGeomLibrary.getGeomBuffers(n.geomId),U=n.isVisible();if(n.shattered){let d=0;const s=(o,A,B)=>{const Q=this.drawIdsArraysAllocators[B],r=this.drawIdsArrays[B],R=this.drawElementOffsets[B],V=this.drawElementCounts[B],h=Q.getAllocation(C);if(!h)return;const m=a.materials;for(let Z=0;Z<o.length;Z++){const c=h.start+Z;if(R[c]=F[0]+o[Z]*t,V[c]=U?A[Z]:0,r[c*4+0]=n.geomItemId,r[c*4+1]=d+1,m.length>0&&a.subGeomMaterialIndices[Z]>0){const W=a.subGeomMaterialIndices[Z]-1,u=a.materials[W];this.renderer.glMaterialLibrary.addMaterial(u);const J=this.renderer.glMaterialLibrary.getMaterialAllocation(u);r[c*4+2]=J.start}else r[c*4+2]=0;r[c*4+3]=0,d++}};s(a.subGeomOffsets.TRIANGLES,a.subGeomCounts.TRIANGLES,"TRIANGLES"),s(a.subGeomOffsets.LINES,a.subGeomCounts.LINES,"LINES"),s(a.subGeomOffsets.POINTS,a.subGeomCounts.POINTS,"POINTS")}else{const d=(s,o)=>{const A=this.drawIdsArraysAllocators[o],B=this.drawIdsArrays[o],Q=this.drawElementOffsets[o],r=this.drawElementCounts[o],R=A.getAllocation(C);if(!R)return;const V=a.materials;for(let h=0;h<s.length;h++){const m=s[h],Z=R.start+h;if(Q[Z]=F[0]+m.offset*t,r[Z]=U?m.count:0,B[Z*4+0]=n.geomItemId,B[Z*4+1]=0,V.length>0&&m.materialId>=0&&a.materials[m.materialId]){const c=a.materials[m.materialId];this.renderer.glMaterialLibrary.addMaterial(c);const W=this.renderer.glMaterialLibrary.getMaterialAllocation(c);B[Z*4+2]=W.start}else B[Z*4+2]=0;B[Z*4+3]=0}};for(let s in a.materialSubGeoms){if(!this.drawIdsArraysAllocators[s].getAllocation(C))continue;const B=a.materialSubGeoms[s];d(B,s)}}});const I=this.renderer.gl;if(!I.multiDrawElements)return;const l=C=>{const n=this.drawIdsArrays[C];let F=this.drawIdsTextures[C];const a=this.drawIdsArraysAllocators[C].reservedSpace,U=e.boundTextures++;I.activeTexture(I.TEXTURE0+U);const d=q.nextPow2(Math.ceil(Math.sqrt(a)));if(!F)F=new Te(this.gl,{format:"RGBA",type:"FLOAT",width:d,height:d,filter:"NEAREST",wrap:"CLAMP_TO_EDGE",mipMapped:!1}),this.drawIdsTextures[C]=F,g=!0;else if(F.width<d||F.height<d){F.resize(d,d);for(let s=0;s<this.drawOrderToIndex.length;s++)this.dirtyGeomItems.add(s);g=!0}{const s=F,o=F.width;I.bindTexture(I.TEXTURE_2D,s.glTex);const A=0,B=0,Q=1,r=s.getFormat(),R=s.getType();if(g){const V=this.drawIdsArraysAllocators[C].allocatedSpace,h=Math.ceil((B+V)/o);let m=0,Z=V,c=B;for(let W=0;W<h;W++){let u;c+Z>o?(u=o-c,c=0):u=Z;const J=m%o,N=Math.floor(m/o),X=n.subarray(m*4,(m+u)*4);if(X.length!=u*4)throw new Error("Invalid drawIds subarray :"+X.length+" width:"+u);I.texSubImage2D(I.TEXTURE_2D,A,J,N,u,Q,r,R,X),m+=u,Z-=u}}else{const V=this.drawIdsArraysAllocators[C];this.dirtyGeomItems.forEach(h=>{const m=V.getAllocation(h);if(!m)return;const Z=m.start,c=m.size,W=Z%o,u=Math.ceil((W+c)/o);let J=0,N=c,X=W;for(let y=0;y<u;y++){let p;X+N>o?(p=o-X,X=0):p=N;const _=(Z+J)%o,ae=Math.floor((Z+J)/o),ne=n.subarray((Z+J)*4,(Z+J+p)*4);if(ne.length!=p*4)throw new Error("Invalid drawIds subarray :"+ne.length+" width:"+p);I.texSubImage2D(I.TEXTURE_2D,A,_,ae,p,Q,r,R,ne),J+=p,N-=p}})}}I.bindTexture(I.TEXTURE_2D,null),e.boundTextures--};for(let C in this.drawIdsArrays)l(C);this.dirtyGeomItems=new Set,this.drawIdsBufferDirty=!1}updateHighlightedIDsBuffer(e){if(this.highlightedIdsBufferDirty){this.highlightedIdsArraysAllocators={},this.highlightedIdsArray={},this.highlightElementOffsets={},this.highlightElementCounts={};for(let l in this.highlightedItems){const C=Number.parseInt(l),n=this.highlightedItems[l],F=this.glGeomItems[C],a=this.renderer.glGeomLibrary.getGeomBuffers(F.geomId);let U={TRIANGLES:0,LINES:0,POINTS:0};if(n.length>0)n.forEach(d=>{if(d<a.subGeomCounts.TRIANGLES.length)U.TRIANGLES+=1;else{const s=d-a.subGeomCounts.TRIANGLES.length;s<a.subGeomCounts.LINES.length?U.LINES+=1:s-a.subGeomCounts.LINES.length<a.subGeomCounts.POINTS.length&&(U.POINTS+=1)}});else for(let d in a.counts)a.counts[d]>0&&(U[d]=1);for(let d in U){const s=U[d];s!=0&&(this.highlightedIdsArraysAllocators[d]||(this.highlightedIdsArraysAllocators[d]=new vt),this.highlightedIdsArraysAllocators[d].allocate(C,s))}}for(let l in this.highlightedIdsArraysAllocators){const C=this.highlightedIdsArraysAllocators[l];(!this.highlightElementCounts[l]||C.reservedSpace>this.highlightElementCounts[l].length)&&(this.highlightedIdsArray[l]=new Float32Array(C.reservedSpace*4),this.highlightElementOffsets[l]=new Int32Array(C.reservedSpace),this.highlightElementCounts[l]=new Int32Array(C.reservedSpace))}const I=4;for(let l in this.highlightedItems){const C=Number.parseInt(l),n=this.highlightedItems[l],F=this.glGeomItems[C],a=this.renderer.glGeomLibrary.getGeomOffsetAndCount(F.geomId),U=this.renderer.glGeomLibrary.getGeomBuffers(F.geomId);if(n.length!=0)n.forEach((d,s)=>{const o=(A,B,Q,r)=>{const R=this.highlightedIdsArraysAllocators[Q],V=this.highlightedIdsArray[Q],h=this.highlightElementOffsets[Q],m=this.highlightElementCounts[Q],c=R.getAllocation(C).start+s;h[c]=a[0]+A[r]*I,m[c]=B[r],V[c*4+0]=F.geomItemId,V[c*4+1]=d+1,V[c*4+2]=0,V[c*4+3]=0};if(d<U.subGeomCounts.TRIANGLES.length)o(U.subGeomOffsets.TRIANGLES,U.subGeomCounts.TRIANGLES,"TRIANGLES",d);else{const A=d-U.subGeomCounts.TRIANGLES.length;A<U.subGeomCounts.LINES.length?o(U.subGeomOffsets.LINES,U.subGeomCounts.LINES,"LINES",A):A-U.subGeomCounts.LINES.length<U.subGeomCounts.POINTS.length}});else for(let d in U.offsets){const s=U.counts[d];if(s==0)continue;const o=U.offsets[d],Q=this.highlightedIdsArraysAllocators[d].getAllocation(C).start;this.highlightElementOffsets[d][Q]=a[0]+o*I,this.highlightElementCounts[d][Q]=s,this.highlightedIdsArray[d][Q*4+0]=F.geomItemId}}this.highlightedIdsBufferDirty=!1}const g=this.renderer.gl;if(!g.multiDrawElements)return;const t=I=>{const l=this.highlightedIdsArray[I];if(!l||l.length==0)return;let C=this.highlightedIdsTextures[I];const n=this.highlightedIdsArraysAllocators[I].reservedSpace,F=e.boundTextures++;g.activeTexture(g.TEXTURE0+F);const a=q.nextPow2(Math.ceil(Math.sqrt(n)));C?(C.width<a||C.height<a)&&C.resize(a,a):(C=new Te(this.gl,{format:"RGBA",type:"FLOAT",width:a,height:a,filter:"NEAREST",wrap:"CLAMP_TO_EDGE",mipMapped:!1}),this.highlightedIdsTextures[I]=C);{const U=C,d=C.width;g.bindTexture(g.TEXTURE_2D,U.glTex);const s=0,o=0,A=1,B=U.getFormat(),Q=U.getType(),r=this.highlightedIdsArraysAllocators[I].allocatedSpace,R=Math.ceil((o+r)/d);let V=0,h=r,m=o;for(let Z=0;Z<R;Z++){let c;m+h>d?(c=d-m,m=0):c=h;const W=V%d,u=Math.floor(V/d),J=l.subarray(V*4,(V+c)*4);if(J.length!=c*4)throw new Error("Invalid drawIds subarray :"+J.length+" width:"+c);g.texSubImage2D(g.TEXTURE_2D,s,W,u,c,A,B,Q,J),V+=c,h-=c}}g.bindTexture(g.TEXTURE_2D,null),e.boundTextures--};for(let I in this.highlightedIdsArray)t(I)}draw(e){this.drawOrderToIndex.length!=0&&(this.drawIdsBufferDirty&&this.updateDrawIDsBuffer(e),this.bindAndRender(e,this.drawIdsArrays,this.drawElementCounts,this.drawElementOffsets,this.drawIdsTextures,this.drawIdsArraysAllocators,!0))}drawGeomData(e){this.drawIdsBufferDirty&&this.updateDrawIDsBuffer(e);const g=this.renderer.gl,t=e.unifs,{drawIdsTexture:I,geomType:l}=t,C=this.drawElementCounts,n=this.drawElementOffsets,F=this.drawIdsTextures,a=this.drawIdsArraysAllocators,U=this.drawIdsArrays;e.bindViewports(t,()=>{U.TRIANGLES&&a.TRIANGLES.allocatedSpace>0&&(g.multiDrawElements&&F.TRIANGLES.bindToUniform(e,I),l&&g.uniform1i(l.location,Yg.TRIANGLES),this.multiDrawMeshes(e,U.TRIANGLES,C.TRIANGLES,n.TRIANGLES,a.TRIANGLES.allocatedSpace))});const d=!0;if(e.geomDataFbo&&d){this.linesGeomDataBuffer||(this.linesGeomDataBuffer=new Te(g,{type:this.renderer.floatGeomBuffer?"FLOAT":"UNSIGNED_BYTE",format:"RGBA",filter:"NEAREST",width:1,height:2}),this.fattenLinesShader=new Ha(g),this.quad=new ql(g,new Dt(1,1)));const s=e.geomDataFbo,o=s.width,A=s.height;if(this.linesGeomDataBuffer.width!=o||this.linesGeomDataBuffer.height!=A){this.fbo&&(g.deleteFramebuffer(this.fbo),this.fbo=null),this.linesGeomDataBuffer.resize(o,A),this.fbo=g.createFramebuffer();const B=this.linesGeomDataBuffer.glTex,Q=s.__depthTexture;g.name=="webgl2"?(g.bindFramebuffer(g.DRAW_FRAMEBUFFER,this.fbo),g.framebufferTexture2D(g.DRAW_FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,B,0),g.framebufferTexture2D(g.DRAW_FRAMEBUFFER,g.DEPTH_ATTACHMENT,g.TEXTURE_2D,Q,0)):(g.bindFramebuffer(g.FRAMEBUFFER,this.fbo),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,B,0),g.framebufferTexture2D(g.FRAMEBUFFER,g.DEPTH_ATTACHMENT,g.TEXTURE_2D,Q,0)),hl(g,o,A)}else g.name=="webgl2"?g.bindFramebuffer(g.DRAW_FRAMEBUFFER,this.fbo):g.bindFramebuffer(g.FRAMEBUFFER,this.fbo);g.colorMask(!0,!0,!0,!0),g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT)}if(e.bindViewports(t,()=>{U.LINES&&a.LINES.allocatedSpace>0&&(g.multiDrawElements&&F.LINES.bindToUniform(e,I),l&&g.uniform1i(l.location,Yg.LINES),this.multiDrawLines(e,U.LINES,C.LINES,n.LINES,a.LINES.allocatedSpace)),U.POINTS&&a.POINTS.allocatedSpace>0&&(g.multiDrawElements&&F.POINTS.bindToUniform(e,I),l&&g.uniform1i(l.location,Yg.POINTS),this.multiDrawPoints(e,U.POINTS,C.POINTS,n.POINTS,a.POINTS.allocatedSpace))}),this.linesGeomDataBuffer&&e.geomDataFbo&&d){e.boundRendertarget=null,e.geomDataFbo.bindForWriting(e);const s=e.glShader,o=e.shaderkey;this.fattenLinesShader.bind(e),g.disable(g.DEPTH_TEST);const{colorTexture:A,screenSize:B}=e.unifs;this.linesGeomDataBuffer.bindToUniform(e,A);const Q=e.geomDataFbo;g.uniform2f(B.location,Q.width,Q.height),this.quad.bindAndDraw(e),g.enable(g.DEPTH_TEST),s.bind(e,o),this.renderer.glGeomLibrary.bind(e),this.renderer.glMaterialLibrary.bind(e)}}drawHighlighted(e){if(Object.keys(this.highlightedItems).length==0)return;this.highlightedIdsBufferDirty&&this.updateHighlightedIDsBuffer(e);const g=this.renderer.gl;g.disable(g.CULL_FACE),this.bindAndRender(e,this.highlightedIdsArray,this.highlightElementCounts,this.highlightElementOffsets,this.highlightedIdsTextures,this.highlightedIdsArraysAllocators,!1)}bindAndRender(e,g,t,I,l,C,n=!1){const F=this.gl,a=e.unifs;F.depthFunc(F.LEQUAL),F.disable(F.CULL_FACE);const{drawIdsTexture:U,geomType:d}=e.unifs;e.bindViewports(a,()=>{g.TRIANGLES&&C.TRIANGLES.allocatedSpace>0&&(F.multiDrawElements&&l.TRIANGLES.bindToUniform(e,U),d&&F.uniform1i(d.location,Yg.TRIANGLES),this.multiDrawMeshes(e,g.TRIANGLES,t.TRIANGLES,I.TRIANGLES,C.TRIANGLES.allocatedSpace)),n&&(F.enable(F.BLEND),F.blendEquation(F.FUNC_ADD),F.blendFunc(F.SRC_ALPHA,F.ONE_MINUS_SRC_ALPHA)),g.LINES&&C.LINES.allocatedSpace>0&&(F.multiDrawElements&&l.LINES.bindToUniform(e,U),d&&F.uniform1i(d.location,Yg.LINES),this.multiDrawLines(e,g.LINES,t.LINES,I.LINES,C.LINES.allocatedSpace)),g.POINTS&&C.POINTS.allocatedSpace>0&&(F.multiDrawElements&&l.POINTS.bindToUniform(e,U),d&&F.uniform1i(d.location,Yg.POINTS),this.multiDrawPoints(e,g.POINTS,t.POINTS,I.POINTS,C.POINTS.allocatedSpace)),n&&F.disable(F.BLEND)}),d&&F.uniform1i(d.location,0)}multiDrawMeshes(e,g,t,I,l){const C=this.gl;if(C.multiDrawElements)C.multiDrawElements(C.TRIANGLES,t,0,C.UNSIGNED_INT,I,0,l);else{const{geomItemId:n}=e.unifs;for(let F=0;F<l;F++)C.uniform1i(n.location,g[F*4]),C.drawElements(C.TRIANGLES,t[F],C.UNSIGNED_INT,I[F])}}multiDrawLines(e,g,t,I,l){const C=this.gl;if(C.multiDrawElements){const{occluded:n}=e.unifs;n&&C.uniform1i(n.location,0),C.multiDrawElements(C.LINES,t,0,C.UNSIGNED_INT,I,0,l),n&&(C.uniform1i(n.location,1),C.depthFunc(C.GREATER),C.multiDrawElements(C.LINES,t,0,C.UNSIGNED_INT,I,0,l),C.depthFunc(C.LEQUAL))}else{const{geomItemId:n,occluded:F}=e.unifs;F&&C.uniform1i(F.location,0);for(let a=0;a<l;a++)C.uniform1i(n.location,g[a*4]),C.drawElements(C.LINES,t[a],C.UNSIGNED_INT,I[a]);if(F){C.uniform1i(F.location,1),C.depthFunc(C.GREATER);for(let a=0;a<l;a++)C.uniform1i(n.location,g[a*4]),C.drawElements(C.LINES,t[a],C.UNSIGNED_INT,I[a]);C.depthFunc(C.LEQUAL)}}}multiDrawPoints(e,g,t,I,l){const C=this.gl;if(C.multiDrawElements)C.multiDrawElements(C.POINTS,t,0,C.UNSIGNED_INT,I,0,l);else{const{geomItemId:n}=e.unifs;for(let F=0;F<l;F++)C.uniform1i(n.location,g[F*4]),C.drawElements(C.POINTS,t[F],C.UNSIGNED_INT,I[F])}}sortItems(e){this.drawIdsBufferDirty}destroy(){for(let e in this.drawIdsTextures)this.drawIdsTextures[e].destroy();for(let e in this.highlightedIdsTextures)this.highlightedIdsTextures[e].destroy();this.emit("destructing")}}class ri extends Xe{constructor(e){super();this.glGeomItems=[],this.glGeomIdsMapping={},this.glgeomItemEventHandlers=[],this.freeIndices=[],this.viewPos=new b,this.drawElementCounts=new Int32Array(0),this.drawElementOffsets=new Int32Array(0),this.highlightElementCounts=new Int32Array(0),this.highlightElementOffsets=new Int32Array(0),this.drawOrderToIndex=[],this.indexToDrawIndex=[],this.drawIdsArray=new Float32Array(0),this.drawIdsBufferDirty=!0,this.drawIdsTexture=null,this.highlightedItems=[],this.highlightedIdsArray=null,this.highlightedIdsTexture=null,this.highlightedIdsBufferDirty=!1,this.dirtyGeomIndices=new Set,this.renderer=e,this.gl=e.gl,this.renderer.glGeomLibrary.on("geomDataChanged",g=>{this.dirtyGeomIndices.add(g.index)})}addGLGeomItem(e){const g=this.freeIndices.length>0?this.freeIndices.pop():this.glGeomItems.length;this.glGeomIdsMapping[e.geomId]?this.glGeomIdsMapping[e.geomId].push(g):this.glGeomIdsMapping[e.geomId]=[g],this.indexToDrawIndex[g]=this.drawOrderToIndex.length,this.drawOrderToIndex.push(g);const t={};t.visibilityChanged=I=>{const l=this.indexToDrawIndex[g];if(I.visible){const C=this.renderer.glGeomLibrary.getGeomOffsetAndCount(e.geomId);this.drawElementCounts[l]=C[1]}else this.drawElementCounts[l]=0;this.emit("updated")},e.on("visibilityChanged",t.visibilityChanged),e.geomItem.isHighlighted()&&(this.highlightedItems.push(e),this.highlightedIdsBufferDirty=!0),t.highlightChanged=I=>{if(I&&I.name){if(this.highlightedItems.includes(e))return;this.highlightedItems.push(e)}else this.highlightedItems.splice(this.highlightedItems.indexOf(e),1);this.highlightedIdsBufferDirty=!0,this.emit("updated")},e.geomItem.on("highlightChanged",t.highlightChanged),this.glGeomItems[g]=e,this.glgeomItemEventHandlers[g]=t,this.drawIdsBufferDirty=!0,this.emit("updated")}removeGLGeomItem(e){const g=this.glGeomItems.indexOf(e),t=this.glGeomIdsMapping[e.geomId];t.splice(t.indexOf(g),1),t.length==0&&(delete this.glGeomIdsMapping[e.geomId],this.dirtyGeomIndices.has(e.geomId)&&this.dirtyGeomIndices.delete(e.geomId));const I=this.glgeomItemEventHandlers[g];if(e.geomItem.off("highlightChanged",I.highlightChanged),e.off("visibilityChanged",I.visibilityChanged),this.glGeomItems[g]=null,this.glgeomItemEventHandlers[g]=null,this.drawIdsArray[g]=0,this.drawElementOffsets[g]=0,this.drawElementCounts[g]=0,this.freeIndices.push(g),e.isVisible()){const l=this.drawOrderToIndex.indexOf(g);this.drawOrderToIndex.splice(l,1),this.indexToDrawIndex[g]=-1,this.drawElementCounts[l]=0,this.drawIdsBufferDirty=!0}if(e.geomItem.isHighlighted()){const l=this.highlightedItems.indexOf(e);this.highlightedItems.splice(l,1),this.highlightedIdsBufferDirty=!0}this.emit("updated")}cleanGeomIds(){this.dirtyGeomIndices.forEach(e=>{const g=this.glGeomIdsMapping[e];if(g!=null){const t=this.renderer.glGeomLibrary.getGeomOffsetAndCount(e);g.forEach(I=>{const l=this.glGeomItems[I];if(l.isVisible()){const C=this.indexToDrawIndex[I];this.drawElementOffsets[C]=t[0],this.drawElementCounts[C]=t[1],this.drawIdsArray[C]=l.geomItemId;const n=this.highlightedItems.indexOf(l);n!=-1&&(this.highlightElementOffsets[n]=t[0],this.highlightElementCounts[n]=t[1])}})}}),this.dirtyGeomIndices=new Set}updateDrawIDsBuffer(e){(!this.drawIdsArray||this.drawOrderToIndex.length>this.drawIdsArray.length)&&(this.drawIdsArray=new Float32Array(this.drawOrderToIndex.length),this.drawElementOffsets=new Int32Array(this.drawOrderToIndex.length),this.drawElementCounts=new Int32Array(this.drawOrderToIndex.length)),this.drawOrderToIndex.forEach((l,C)=>{const n=this.glGeomItems[l];if(!n)return;const F=this.renderer.glGeomLibrary.getGeomOffsetAndCount(n.geomId);this.drawElementOffsets[C]=F[0],this.drawElementCounts[C]=n.isVisible()?F[1]:0,this.drawIdsArray[C]=n.geomItemId,this.indexToDrawIndex[l]=C}),this.dirtyGeomIndices=new Set;const g=this.renderer.gl;if(!g.multiDrawElements)return;const t=e.boundTextures++;g.activeTexture(g.TEXTURE0+t);const I=q.nextPow2(Math.ceil(Math.sqrt(this.drawOrderToIndex.length)))*2;this.drawIdsTexture?(this.drawIdsTexture.width<I||this.drawIdsTexture.height<I)&&this.drawIdsTexture.resize(I,I):this.drawIdsTexture=new Te(this.gl,{format:g.name=="webgl2"?"RED":"ALPHA",type:"FLOAT",width:I,height:I,filter:"NEAREST",wrap:"CLAMP_TO_EDGE",mipMapped:!1});{const l=this.drawIdsTexture,C=this.drawIdsTexture.width;g.bindTexture(g.TEXTURE_2D,l.glTex);const n=0,F=0,a=1,U=l.getFormat(),d=l.getType(),s=Math.ceil((F+this.drawOrderToIndex.length)/C);let o=0,A=this.drawOrderToIndex.length,B=F;for(let Q=0;Q<s;Q++){let r;B+A>C?(r=C-B,B=0):r=A;const R=o%C,V=Math.floor(o/C),h=this.drawIdsArray.subarray(o,o+r);g.texSubImage2D(g.TEXTURE_2D,n,R,V,r,a,U,d,h),o+=r,A-=r}}g.bindTexture(g.TEXTURE_2D,null),e.boundTextures--,this.drawIdsBufferDirty=!1}updateHighlightedIDsBuffer(e){if(this.highlightedIdsBufferDirty){(!this.highlightedIdsArray||this.highlightedItems.length>this.highlightedIdsArray.length)&&(this.highlightedIdsArray=new Float32Array(this.highlightedItems.length),this.highlightElementOffsets=new Int32Array(this.highlightedItems.length),this.highlightElementCounts=new Int32Array(this.highlightedItems.length)),this.highlightedItems.forEach((l,C)=>{this.highlightedIdsArray[C]=l.geomItemId;const n=this.renderer.glGeomLibrary.getGeomOffsetAndCount(l.geomId);this.highlightElementOffsets[C]=n[0],this.highlightElementCounts[C]=n[1]});for(let l=this.highlightedItems.length;l<this.highlightElementCounts.length;l++)this.highlightElementOffsets[l]=0,this.highlightElementCounts[l]=0;this.highlightedIdsBufferDirty=!1}const g=this.renderer.gl;if(!g.multiDrawElements)return;const t=e.boundTextures++;g.activeTexture(g.TEXTURE0+t);const I=q.nextPow2(Math.ceil(Math.sqrt(this.highlightedItems.length)));this.highlightedIdsTexture?(this.highlightedIdsTexture.width<I||this.highlightedIdsTexture.height<I)&&this.highlightedIdsTexture.resize(I,I):this.highlightedIdsTexture=new Te(this.gl,{format:g.name=="webgl2"?"RED":"ALPHA",type:"FLOAT",width:I,height:I,filter:"NEAREST",wrap:"CLAMP_TO_EDGE",mipMapped:!1});{const l=this.highlightedIdsTexture,C=this.highlightedIdsTexture.width;g.bindTexture(g.TEXTURE_2D,l.glTex);const n=0,F=0,a=1,U=l.getFormat(),d=l.getType(),s=Math.ceil((F+this.highlightedIdsArray.length)/C);let o=0,A=this.highlightedIdsArray.length,B=F;for(let Q=0;Q<s;Q++){let r;B+A>C?(r=C-B,B=0):r=A;const R=o%C,V=Math.floor(o/C),h=this.highlightedIdsArray.subarray(o,o+r);g.texSubImage2D(g.TEXTURE_2D,n,R,V,r,a,U,d,h),o+=r,A-=r}}g.bindTexture(g.TEXTURE_2D,null),e.boundTextures--}draw(e){if(this.drawIdsBufferDirty?this.updateDrawIDsBuffer(e):this.dirtyGeomIndices.size>0&&this.cleanGeomIds(),this.drawIdsArray.length!=0){if(this.drawIdsTexture){const{drawIdsTexture:g}=e.unifs;this.drawIdsTexture.bindToUniform(e,g)}this.bindAndRender(e,this.drawIdsArray,this.drawElementCounts,this.drawElementOffsets,this.drawOrderToIndex.length)}}drawHighlighted(e){if(this.highlightedItems.length!=0){if(this.highlightedIdsBufferDirty&&this.updateHighlightedIDsBuffer(e),this.highlightedIdsTexture){const{drawIdsTexture:g}=e.unifs;this.highlightedIdsTexture.bindToUniform(e,g)}this.bindAndRender(e,this.highlightedIdsArray,this.highlightElementCounts,this.highlightElementOffsets,this.highlightedItems.length)}}drawGeomData(e){if(this.drawIdsBufferDirty&&this.updateDrawIDsBuffer(e),this.drawOrderToIndex.length!=0){if(this.drawIdsTexture){const{drawIdsTexture:g}=e.unifs;this.drawIdsTexture.bindToUniform(e,g)}this.bindAndRender(e,this.drawIdsArray,this.drawElementCounts,this.drawElementOffsets,this.drawOrderToIndex.length)}}bindAndRender(e,g,t,I,l){const C=this.gl,n=e.unifs;n.instancedDraw&&C.uniform1i(e.unifs.instancedDraw.location,1),e.bindViewports(n,()=>{this.multiDraw(e,g,t,I,l)})}sortItems(e){const g=new Float32Array(this.drawOrderToIndex.length);this.drawOrderToIndex.forEach(t=>{const I=this.glGeomItems[t];if(I){const l=I.geomItem.boundingBoxParam.value,C=l.center(),n=l.size(),F=C.distanceTo(e)-n;g[t]=F}}),this.drawOrderToIndex.sort((t,I)=>g[I]-g[t]),this.drawOrderToIndex.forEach((t,I)=>{const l=this.glGeomItems[t];l&&(this.drawIdsArray[I]=l.geomItemId,this.indexToDrawIndex[t]=I)}),this.drawIdsBufferDirty=!0,this.viewPos=e}destroy(){this.drawIdsTexture&&this.drawIdsTexture.destroy(),this.highlightedIdsTexture&&this.highlightedIdsTexture.destroy(),this.emit("destructing")}}class bA extends ri{multiDraw(e,g,t,I,l){const C=this.gl;if(C.multiDrawArrays){const{occluded:n}=e.unifs;n&&C.uniform1i(n.location,0),C.multiDrawElements(C.LINES,t,0,C.UNSIGNED_INT,I,0,l),n&&(C.uniform1i(n.location,1),C.depthFunc(C.GREATER),C.multiDrawElements(C.LINES,t,0,C.UNSIGNED_INT,I,0,l),C.depthFunc(C.LEQUAL))}else{const{geomItemId:n,occluded:F}=e.unifs;F&&C.uniform1i(F.location,0);for(let a=0;a<l;a++)C.uniform1i(n.location,g[a]),C.drawElements(C.LINES,t[a],C.UNSIGNED_INT,I[a]);if(F){C.uniform1i(F.location,1),C.depthFunc(C.GREATER);for(let a=0;a<l;a++)C.uniform1i(n.location,g[a]),C.drawElements(C.LINES,t[a],C.UNSIGNED_INT,I[a]);C.depthFunc(C.LEQUAL)}}}}class JA extends ri{multiDraw(e,g,t,I,l){const C=this.gl;if(C.multiDrawArrays)C.multiDrawArrays(C.POINTS,I,0,t,0,l);else{const{geomItemId:n}=e.unifs;for(let F=0;F<l;F++)C.uniform1i(n.location,g[F]),C.drawArrays(C.POINTS,I[F],t[F])}}}class GA extends ri{multiDraw(e,g,t,I,l){const C=this.gl;if(C.multiDrawElements)C.multiDrawElements(C.TRIANGLES,t,0,C.UNSIGNED_INT,I,0,l);else{const{geomItemId:n}=e.unifs;for(let F=0;F<l;F++)C.uniform1i(n.location,g[F]),C.drawElements(C.TRIANGLES,t[F],C.UNSIGNED_INT,I[F])}}}class xa extends Xe{constructor(e,g,t){super();this.glGeomItemSets={},this.glGeomDataShaderKey="",this.glHighlightShaderKey="",this.pass=e,this.gl=g,this.glShader=t.glShader,this.glGeomDataShader=t.glgeomdatashader?t.glgeomdatashader:t.glShader,this.glHighlightShader=t.glselectedshader?t.glselectedshader:t.glShader,this.glShaderKey=t.glShader.getId()+"multidraw-draw",this.glGeomDataShader&&(this.glGeomDataShaderKey=this.glGeomDataShader.getId()+"multidraw-geomdata"),this.glHighlightShader&&(this.glHighlightShaderKey=this.glHighlightShader.getId()+"multidraw-highlight")}getOrCreateGLGeomItemSet(e){let g;if(e instanceof hI){if(this.glGeomItemSets.CompoundGeom)return this.glGeomItemSets.CompoundGeom;g=new WA(this.pass.renderer),this.glGeomItemSets.CompoundGeom=g}else if(e instanceof ht||e instanceof Kg){if(this.glGeomItemSets.GLMesh)return this.glGeomItemSets.GLMesh;g=new GA(this.pass.renderer),this.glGeomItemSets.GLMesh=g}else if(e instanceof sg||e instanceof Gg){if(this.glGeomItemSets.GLLines)return this.glGeomItemSets.GLLines;g=new bA(this.pass.renderer),this.glGeomItemSets.GLLines=g}else if(e instanceof Rt||e instanceof ct){if(this.glGeomItemSets.GLPoints)return this.glGeomItemSets.GLPoints;g=new JA(this.pass.renderer),this.glGeomItemSets.GLPoints=g}else throw new Error("Unsupported geom type:"+e.constructor.name);return g.on("updated",()=>{this.emit("updated")}),g}addGLGeomItem(e){const g=e.geomItem.geomParam.value,t=this.getOrCreateGLGeomItemSet(g);e.GLGeomItemSet=t,t.addGLGeomItem(e)}removeGLGeomItem(e){e.GLGeomItemSet.removeGLGeomItem(e),e.GLGeomItemSet=null}bindShader(e,g,t){const I=this.gl;if(e.isCompiledForTarget(t)||(I.multiDrawElements?g.shaderopts.directives.push(`#define ENABLE_MULTI_DRAW
#extension GL_ANGLE_multi_draw : enable`):g.shaderopts.directives.push("#define ENABLE_MULTI_DRAW"),e.compileForTarget(t,g.shaderopts),g.shaderopts.directives.pop()),!e.bind(g,t))throw new Error("Unable to bind shader:"+e);this.pass.renderer.glGeomItemLibrary.bind(g),this.pass.renderer.glGeomLibrary.bind(g),this.pass.renderer.glMaterialLibrary.bind(g)}draw(e){this.bindShader(this.glShader,e,this.glShaderKey);for(const g in this.glGeomItemSets)this.glGeomItemSets[g].draw(e);this.glShader.unbind(e)}drawHighlightedGeoms(e){if(!!this.glHighlightShader){this.bindShader(this.glHighlightShader,e,this.glHighlightShaderKey);for(const g in this.glGeomItemSets)this.glGeomItemSets[g].drawHighlighted(e);this.glHighlightShader.unbind(e)}}drawGeomData(e){var g;this.bindShader(this.glGeomDataShader,e,this.glGeomDataShaderKey);const t=e.gl,{floatGeomBuffer:I,passId:l,occlusionCulling:C,viewportSize:n}=e.unifs;I&&t.uniform1i(I.location,e.floatGeomBuffer?1:0),l&&t.uniform1i(l.location,e.passIndex),C&&t.uniform1i(C.location,(g=e.occlusionCulling)!==null&&g!==void 0?g:0);for(const F in this.glGeomItemSets)this.glGeomItemSets[F].drawGeomData(e);this.glGeomDataShader.unbind(e)}sortItems(e){for(const g in this.glGeomItemSets)this.glGeomItemSets[g].sortItems(e)}}class Ri extends Ma{constructor(){super();this.__glshadermaterials={},this.__glShaderGeomSets={}}getPassType(){return dg.OPAQUE}filterGeomItem(e){const g=e.materialParam.value;return e.isOpaque()&&g.isOpaque()}checkMaterial(e){return e.isOpaque()}removeAndReAddGeomItem(e){this.removeGeomItem(e),this.__renderer.assignTreeItemToGLPass(e)}addGeomItem(e){super.addGeomItem(e);const t=e.materialParam.value,I=this.renderer.glGeomLibrary,l=this.renderer.glGeomItemLibrary;if(!t.isTextured()&&t.getShaderClass().supportsInstancing()){const d=t.getShaderName();let s=this.__glShaderGeomSets[d];if(!s){const A=this.constructShaders(d);s=new xa(this,this.__gl,A),s.on("updated",()=>{this.__renderer.requestRedraw()}),this.__glShaderGeomSets[d]=s}const o=this.renderer.glGeomItemLibrary.getGLGeomItem(e);return s.addGLGeomItem(o),o.GLShaderGeomSets=s,this.emit("updated"),!0}const C=I.constructGLGeom(e.geomParam.value),n=l.getGLGeomItem(e),F=t.getShaderName(),a=this.renderer.glMaterialLibrary.getGLMaterial(t);let U=this.__glshadermaterials[F];if(!U){const d=this.constructShaders(F);U=new vo(this.__gl,this,d),this.__glshadermaterials[F]=U,U.on("updated",()=>{this.__renderer.requestRedraw()})}return U.addGLGeomItem(n,C,a),!0}removeGeomItem(e){super.removeGeomItem(e);const g=this.renderer.glGeomItemLibrary.getGLGeomItem(e);return g.GLShaderGeomSets?(g.GLShaderGeomSets.removeGLGeomItem(g),g.GLShaderGeomSets=null,!0):(g.GLGeomItemSet&&(g.GLGeomItemSet.removeGLGeomItem(g),g.GLGeomItemSet=null),!0)}removeMaterial(e){const g=e.getShaderName(),t=this.__glshadermaterials[g];if(!t||t!=e.getMetadata("glshaderMaterials")){console.warn("Material not found in pass");return}const I=e.getMetadata("glMaterialGeomItemSets");t.removeMaterialGeomItemSets(I)}__traverseTreeAndDraw(e){for(const g in this.__glShaderGeomSets)this.__glShaderGeomSets[g].draw(e);for(const g in this.__glshadermaterials)this.__glshadermaterials[g].draw(e);e.glGeom&&e.glGeom.unbind(e)}draw(e){const g=this.__gl;g.disable(g.BLEND),g.disable(g.CULL_FACE),g.enable(g.DEPTH_TEST),g.depthFunc(g.LEQUAL),g.depthMask(!0),this.__traverseTreeAndDraw(e),e.viewport.drawSilhouettes(e)}drawHighlightedGeoms(e){const g=this.__gl;g.disable(g.CULL_FACE);for(const t in this.__glShaderGeomSets)this.__glShaderGeomSets[t].drawHighlightedGeoms(e);for(const t in this.__glshadermaterials)this.__glshadermaterials[t].drawHighlightedGeoms(e);e.glGeom&&e.glGeom.unbind(e)}drawGeomData(e){e.passIndex=this.passIndex;const g=this.__gl;g.disable(g.BLEND),g.disable(g.CULL_FACE),g.enable(g.DEPTH_TEST),g.depthFunc(g.LEQUAL),g.depthMask(!0);for(const t in this.__glShaderGeomSets)this.__glShaderGeomSets[t].drawGeomData(e);for(const t in this.__glshadermaterials)this.__glshadermaterials[t].drawGeomData(e);e.glGeom&&e.glGeom.unbind(e)}}zt.registerPass(Ri,dg.OPAQUE);class uA extends Ri{constructor(){super();this.linesGeomDataBuffer=null,this.fattenLinesShader=null,this.quad=null,this.fbo=null}init(e,g){super.init(e,g)}filterGeomItem(e){const g=e.geomParam.value;return g instanceof sg||g instanceof Gg||g instanceof Rt||g instanceof ct}draw(e){const g=this.__gl;g.enable(g.BLEND),g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA),g.enable(g.DEPTH_TEST),g.depthFunc(g.LEQUAL),g.depthMask(!0),this.__traverseTreeAndDraw(e),g.disable(g.BLEND)}drawGeomData(e){const g=this.__gl;if(e.geomDataFbo&&!e.occlusionCulling){this.linesGeomDataBuffer||(this.linesGeomDataBuffer=new Te(g,{type:this.__renderer.floatGeomBuffer?"FLOAT":"UNSIGNED_BYTE",format:"RGBA",filter:"NEAREST",width:1,height:2}),this.fattenLinesShader=new Ha(g),this.quad=new ql(g,new Dt(1,1)));const t=e.geomDataFbo,I=t.width,l=t.height;if(this.linesGeomDataBuffer.width!=I||this.linesGeomDataBuffer.height!=l){this.fbo&&(g.deleteFramebuffer(this.fbo),this.fbo=null),this.linesGeomDataBuffer.resize(I,l),this.fbo=g.createFramebuffer();const C=this.linesGeomDataBuffer.glTex,n=t.__depthTexture;g.name=="webgl2"?(g.bindFramebuffer(g.DRAW_FRAMEBUFFER,this.fbo),g.framebufferTexture2D(g.DRAW_FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,C,0),g.framebufferTexture2D(g.DRAW_FRAMEBUFFER,g.DEPTH_ATTACHMENT,g.TEXTURE_2D,n,0)):(g.bindFramebuffer(g.FRAMEBUFFER,this.fbo),g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,C,0),g.framebufferTexture2D(g.FRAMEBUFFER,g.DEPTH_ATTACHMENT,g.TEXTURE_2D,n,0)),hl(g,I,l)}else g.name=="webgl2"?g.bindFramebuffer(g.DRAW_FRAMEBUFFER,this.fbo):g.bindFramebuffer(g.FRAMEBUFFER,this.fbo);g.colorMask(!0,!0,!0,!0),g.clearColor(0,0,0,0),g.clear(g.COLOR_BUFFER_BIT)}if(super.drawGeomData(e),e.geomDataFbo&&!e.occlusionCulling){e.geomDataFbo.bindForWriting(e),this.fattenLinesShader.bind(e);const{colorTexture:t,screenSize:I}=e.unifs;this.linesGeomDataBuffer.bindToUniform(e,t);const l=e.geomDataFbo;g.uniform2f(I.location,l.width,l.height),this.quad.bindAndDraw(e)}}}zt.registerPass(uA,dg.OPAQUE);class SA extends Ma{constructor(){super();this.itemCount=0,this.__glShaderGeomSets={},this.transparentItems=[],this.transparentItemIndices={},this.freeList=[],this.visibleItems=[],this.prevSortCameraPos=new b,this.sortCameraMovementDistance=0,this.reSort=!1}init(e,g){super.init(e,g),this.itemCount=0,this.__glShaderGeomSets={},this.transparentItems=[],this.transparentItemIndices={},this.freeList=[],this.visibleItems=[],this.prevSortCameraPos=new b(999,999,999),this.sortCameraMovementDistance=.25,this.reSort=!1}getPassType(){return dg.TRANSPARENT}filterGeomItem(e){const g=e.geomParam.value;if(g instanceof sg||g instanceof Rt||g instanceof ct||g instanceof Gg)return!1;const t=e.materialParam.value;return!e.isOpaque()||!t.isOpaque()}resortNeeded(){this.reSort=!0}addGeomItem(e){super.addGeomItem(e),this.itemCount++;const g=this.listenerIDs[e.getId()],t=e.materialParam.value,I=t.getShaderName(),l=this.constructShaders(I);if(!t.isTextured()&&t.getShaderClass().supportsInstancing()){let s=this.__glShaderGeomSets[I];s||(s=new xa(this,this.__gl,l),s.on("updated",()=>{this.renderer.requestRedraw()}),this.__glShaderGeomSets[I]=s);const o=this.renderer.glGeomItemLibrary.getGLGeomItem(e);s.addGLGeomItem(o),g["glGeomItem.visibilityChanged"]=o.on("visibilityChanged",()=>{this.resortNeeded()}),this.emit("updated"),o.GLShaderGeomSets=s,this.reSort=!0;return}const C=this.renderer.glGeomLibrary.constructGLGeom(e.geomParam.value),n=this.renderer.glGeomItemLibrary.getGLGeomItem(e);if(!n)throw new Error("glGeomItem not found for geomItem:"+e.getName());const F=this.renderer.glMaterialLibrary.getGLMaterial(t),a=s=>{if(s.visible)this.visibleItems.push(U);else{const o=this.visibleItems.indexOf(U);this.visibleItems.splice(o,1)}this.reSort=!0};g["glGeomItem.visibilityChanged"]=n.on("visibilityChanged",a),g["GeomMat.valueChanged"]=e.geomMatParam.on("valueChanged",()=>{this.reSort=!0});const U={geomItem:e,shaders:l,glGeom:C,glMaterial:F,glGeomItem:n,material:t};let d;this.freeList.length>0?d=this.freeList.pop():d=this.transparentItems.length,this.transparentItems[d]=U,this.transparentItemIndices[e.getId()]=d,e.isVisible()&&this.visibleItems.push(U),this.reSort=!0}removeGeomItem(e){this.itemCount--;const g=this.listenerIDs[e.getId()];super.removeGeomItem(e);const t=this.renderer.glGeomItemLibrary.getGLGeomItem(e);if(!t)throw new Error("glGeomItem not found for geomItem:"+e.getName());if(t.removeListenerById("visibilityChanged",g["glGeomItem.visibilityChanged"]),t.GLShaderGeomSets)t.GLShaderGeomSets.removeGLGeomItem(t),t.GLShaderGeomSets=null;else{const I=this.transparentItemIndices[e.getId()],l=this.transparentItems[I];delete this.transparentItemIndices[e.getId()],this.transparentItems[I]=null,this.freeList.push(I);const C=this.visibleItems.indexOf(l);C!=-1&&this.visibleItems.splice(C,1)}return this.emit("updated"),!0}sortItems(e){for(const g in this.__glShaderGeomSets)this.__glShaderGeomSets[g].sortItems(e);for(const g of this.visibleItems){const t=g.glGeomItem.geomItem.geomMatParam.value;g.dist=t.translation.distanceTo(e)}this.visibleItems.sort((g,t)=>g.dist>t.dist?-1:g.dist<t.dist?1:0),this.reSort=!1}_drawItem(e,g,t){t.currentGLMaterial!=g.glMaterial&&(t.currentGLMaterial=g.glMaterial,t.currentGLMaterial.bind(e)),t.currentGLGeom!=g.glGeom&&(t.currentGLGeom=g.glGeom,t.currentGLGeom.bind(e)),g.glGeomItem.bind(e),e.bindViewports(e.unifs,()=>{t.currentGLGeom.draw(e)})}_drawItems(e){for(const t in this.__glShaderGeomSets)this.__glShaderGeomSets[t].draw(e);const g={currentglShader:null,currentGLMaterial:null,currentGLGeom:null};for(const t of this.visibleItems){const I=t.shaders.glShader;if(g.currentglShader!=I){if(!I.bind(e,"color"))continue;const l=this.__gl,C=e.unifs;C.instancedDraw&&l.uniform1i(C.instancedDraw.location,0),this.renderer.glGeomItemLibrary.bind(e),g.currentglShader=I}this._drawItem(e,t,g)}}draw(e){if(this.itemCount==0)return;const g=this.__gl,t=e.viewXfo.tr;if(this.reSort||t.distanceTo(this.prevSortCameraPos)>this.sortCameraMovementDistance){if(this.sortItems(t),this.prevSortCameraPos=t,e.vrviewport)this.sortCameraMovementDistance=e.viewScale*.2;else if(e.viewport){const I=e.viewport.getCamera();this.sortCameraMovementDistance=I.getFocalDistance()*.3}}g.enable(g.DEPTH_TEST),g.depthFunc(g.LESS),g.enable(g.BLEND),g.blendEquation(g.FUNC_ADD),e.pass="ADD",g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA),g.enable(g.CULL_FACE),g.cullFace(g.BACK),this._drawItems(e),g.disable(g.BLEND),g.depthMask(!0)}drawHighlightedGeoms(e){const g=this.__gl;g.disable(g.CULL_FACE);for(const I in this.__glShaderGeomSets)this.__glShaderGeomSets[I].drawHighlightedGeoms(e);const t={currentglShader:null,currentGLMaterial:null,currentGLGeom:null};for(const I of this.visibleItems){if(!I.geomItem.isHighlighted()||!I.shaders.glselectedshader)continue;const l=I.shaders;if(t.currentglShader!=l.glselectedshader){if(!l.glselectedshader.bind(e,"highlight"))continue;t.currentglShader=l.glselectedshader}const{floatGeomBuffer:C,passId:n,instancedDraw:F}=e.unifs;C&&g.uniform1i(C.location,g.floatGeomBuffer?1:0),n&&g.uniform1i(n.location,this.passIndex),F&&g.uniform1i(F.location,0),this.renderer.glGeomItemLibrary.bind(e),this._drawItem(e,I,t)}t.currentGLGeom&&t.currentGLGeom.unbind(e)}drawGeomData(e){const g=this.__gl;g.disable(g.BLEND),g.disable(g.CULL_FACE),g.enable(g.DEPTH_TEST),g.depthFunc(g.LESS),g.depthMask(!0);for(const I in this.__glShaderGeomSets)this.__glShaderGeomSets[I].drawGeomData(e);const t={currentglShader:null,currentGLMaterial:null,currentGLGeom:null};for(const I of this.visibleItems){if(!I.glGeomItem.geomItem.isSelectable())continue;const l=I.shaders;if(!l.glgeomdatashader)continue;if(t.currentglShader!=l.glgeomdatashader){if(!l.glgeomdatashader.bind(e,"geomdata"))continue;t.currentglShader=l.glgeomdatashader}const{floatGeomBuffer:C,passId:n,instancedDraw:F}=e.unifs;C&&g.uniform1i(C.location,g.floatGeomBuffer?1:0),n&&g.uniform1i(n.location,this.passIndex),F&&g.uniform1i(F.location,0),this.renderer.glGeomItemLibrary.bind(e),this._drawItem(e,I,t)}t.currentGLGeom&&t.currentGLGeom.unbind(e)}}zt.registerPass(SA,dg.TRANSPARENT);var NA=`

precision highp float;
#define GLSLIFY 1

import 'quadVertexFromID.glsl'

uniform vec2 pos;
uniform vec2 size;
uniform vec2 srctextureDim;
const int border = 2;

/* VS Outputs */
varying vec2 v_texCoord;
 
void main()
{
  vec2 position = getQuadVertexPositionFromID();
  v_texCoord = position+0.5;
  gl_Position = vec4(vec2(-1.0, -1.0) + (pos * 2.0) + (v_texCoord * size * 2.0), 0.0, 1.0);

  vec2 borderVec2 = vec2(float(border), float(border));
  v_texCoord *= (srctextureDim + (borderVec2 * 2.0)) / srctextureDim;
  v_texCoord -= borderVec2 / srctextureDim;
}

`,pA=`
precision highp float;
#define GLSLIFY 1

uniform sampler2D srctexture;
uniform vec2 srctextureDim;
uniform bool alphaFromLuminance;
uniform bool invert;

/* VS Outputs */
varying vec2 v_texCoord;

float luminanceFromRGB(vec3 rgb) {
  return 0.2126*rgb.r + 0.7152*rgb.g + 0.0722*rgb.b;
}

#ifdef ENABLE_ES3
  out vec4 fragColor;
#endif

void main(void) {
  vec2 pixelCoord = v_texCoord*srctextureDim;
  vec2 uv = v_texCoord;

  // Wrap X coords
  if (pixelCoord.x < 0.0) {
    uv.x += 1.0/srctextureDim.x;
    uv.y = 1.0 - uv.y;
  }
  else if (pixelCoord.x > srctextureDim.x) {
    uv.x -= 1.0/srctextureDim.x;
    uv.y = 1.0 - uv.y;
  }

  // Wrap Y coords
  if (pixelCoord.y < 0.0) {
    uv.y += 1.0/srctextureDim.y;
    uv.x = 1.0 - uv.x;
  }
  else if (pixelCoord.y > srctextureDim.y) {
    uv.y -= 1.0/srctextureDim.y;
    uv.x = 1.0 - uv.x;
  }

  vec4 texel = texture2D(srctexture, uv);

#ifndef ENABLE_ES3
  vec4 fragColor;
#endif

  // TODO: check why we pre-multiply alphas here.
  // fragColor = vec4(texel.rgb/texel.a, texel.a);

  if (alphaFromLuminance) {
    fragColor = vec4(texel.rgb, luminanceFromRGB(texel.rgb));
  }
  else {
    fragColor = texel;
  }
  
  if (invert) {
    fragColor = vec4(1.0) - fragColor;
  }

#ifndef ENABLE_ES3
  gl_FragColor = fragColor;
#endif
}

`;class yA extends Pe{constructor(e){super(e,"AtlasLayoutShader");this.setShaderStage("VERTEX_SHADER",NA),this.setShaderStage("FRAGMENT_SHADER",pA)}}class XA extends ZI{constructor(e,g,t="RGBA",I="FLOAT"){super(e);this.__asyncCount=0,this.loaded=!1,this.ready=!1,this.__layout=[],this.__layoutVec4s=[],this.__atlasLayoutShaderBinding=null,this.__atlasLayoutShader=null,this.__name=g,this.__formatParam=t,this.__typeParam=I,this.clearColor=new E(0,0,0,0),this.__subImages=[],this.__layoutNeedsRegeneration=!1,this.__asyncCount=0,this.loaded=!1}incAsyncCount(e=1){this.__asyncCount+=e,this.ready=!1}decAsyncCount(){this.__asyncCount>0&&(this.__asyncCount--,this.__asyncCount==0&&(this.loaded=!0,this.emit("loaded")))}isLoaded(){return this.__asyncCount==0}addSubImage(e){if(e instanceof ug){const g=new Te(this.__gl,e);e.isLoaded()||(this.incAsyncCount(),e.on("loaded",()=>{this.decAsyncCount()})),e.setMetadata("ImageAtlas_gltex",g),g.addRef(this);const t=()=>{this.__layoutNeedsRegeneration=!0,this.renderAtlas()};e.on("updated",t),this.__subImages.push(g)}else{const g=e;g.addRef(this),this.__subImages.push(g)}return this.__layoutNeedsRegeneration=!0,this.__subImages.length-1}removeSubImage(e){let g;if(e instanceof ug){const I=e.getMetadata("ImageAtlas_gltex");g=this.__subImages.indexOf(I),e.deleteMetadata("ImageAtlas_gltex")}else g=this.__subImages.indexOf(e);this.__subImages[g].removeRef(this),this.__subImages.splice(g,1),this.__layoutNeedsRegeneration=!0}getSubImage(e){return this.__subImages[e]}numSubImages(){return this.__layout?this.__layout.length:this.__subImages.length}generateAtlasLayout(e){if(this.__subImages.length==0){this.__layoutNeedsRegeneration=!1;return}const g=2,t=[];this.__subImages.forEach((U,d)=>{t.push({w:U.width+g*2,h:U.height+g*2,area:U.width*U.height,index:d})}),t.sort((U,d)=>U.area>d.area?-1:U.area<d.area?1:0);const I=new gU;I.fit(t),this.__layout=[],t.forEach((U,d)=>{U.fit?this.__layout[U.index]={pos:new f(U.fit.x+g,U.fit.y+g),size:new f(U.w,U.h)}:console.warn("Unable to fit image")});const l=I.root.w,C=I.root.h;this.configure({width:l,height:C,format:this.__typeParam=="FLOAT"&&this.__formatParam=="RGB"?"RGBA":this.__formatParam,type:this.__typeParam,filter:"LINEAR"});const n=this.__gl;if(n.__quadVertexIdsBuffer||n.setupInstancedQuad(),!this.__atlasLayoutShader){this.__atlasLayoutShader=new yA(this.__gl);const U=[];n.name=="webgl2"&&U.push("#define ENABLE_ES3");const d=this.__atlasLayoutShader.compileForTarget("GLImageAtlas",{directives:U});this.__atlasLayoutShaderBinding=og(this.__gl,d.attrs,n.__quadattrbuffers,n.__quadIndexBuffer)}const F=1;let a=Math.round(Math.sqrt(this.__layout.length*F)+.5);if(a=q.nextPow2(a),a%F!=0&&(a+=F-a%F),!n.floatTexturesSupported)this.__layoutVec4s=[],this.__layout.forEach((U,d)=>{this.__layoutVec4s[d]=[U.pos.x/l,U.pos.y/C,U.size.x/l,U.size.y/C]});else{const U=new Float32Array(a*a*4);for(let d=0;d<this.__layout.length;d++){const s=this.__layout[d];new Be(new Float32Array(U.buffer,d*4*4,4)).set(s.pos.x/l,s.pos.y/C,s.size.x/l,s.size.y/C)}!this.__atlasLayoutTexture||this.__atlasLayoutTexture.width!=a||this.__atlasLayoutTexture.height!=a?(this.__atlasLayoutTexture&&this.__atlasLayoutTexture.destroy(),this.__atlasLayoutTexture=new Te(n,{format:"RGBA",type:"FLOAT",filter:"NEAREST",wrap:"CLAMP_TO_EDGE",mipMapped:!1,width:a,height:a,data:U})):this.__atlasLayoutTexture.bufferData(U,a,a)}this.textureDesc[0]=this.width,this.textureDesc[1]=this.height,this.textureDesc[2]=this.__atlasLayoutTexture.width,this.__layoutNeedsRegeneration=!1}getLayoutData(e){return this.__layoutVec4s[e]}renderAtlas(e=!1,g=0){if(this.__subImages.length==0)return;this.__layoutNeedsRegeneration&&this.generateAtlasLayout();const t=this.__gl,I={};this.bindForWriting(I,!0),this.__atlasLayoutShader.bind(I,"GLImageAtlas"),this.__atlasLayoutShaderBinding.bind(I);const l=new f(1/this.width,1/this.height),C=I.unifs;for(let n=g;n<this.__subImages.length;n++){const F=this.__subImages[n],a=this.__layout[n];!F.bindToUniform(I,C.srctexture)||(t.uniform2fv(C.pos.location,a.pos.multiply(l).asArray()),t.uniform2fv(C.size.location,a.size.multiply(l).asArray()),t.uniform2f(C.srctextureDim.location,F.width,F.height),t.uniform1i(C.alphaFromLuminance.location,F.alphaFromLuminance?1:0),t.uniform1i(C.invert.location,F.invert?1:0),t.drawQuad(),I.boundTextures--)}e&&this.cleanup(),this.unbind(I),this.emit("updated")}isReady(){return this.__atlasLayoutTexture!=null}bindToUniform(e,g){super.bindToUniform(e,g);const t=e.unifs;if(this.__atlasLayoutTexture){const I=t[g.name+"_layout"];I&&this.__atlasLayoutTexture.bindToUniform(e,I);const l=t[g.name+"_desc"];l&&this.__gl.uniform4fv(l.location,this.textureDesc)}else{const I=t[g.name+"_desc"];I&&this.__gl.uniform4f(I.location,this.width,this.height,0,0)}return!0}cleanup(){for(const e of this.__subImages)e.removeRef(this);this.__subImages=[],this.destroy()}destroy(){this.cleanup(),super.destroy()}}const pg=7;class kA extends Ga{constructor(){super();this.atlas=null,this.indexArrayUpdateNeeded=!1,this.instanceIdsBuffer=null,this.indexArray=new Float32Array(0),this.glshader=null,this.shaderComp={},this.shaderBinding=null,this.modelMatrixArray=[],this.billboardDataArray=[],this.tintColorArray=[],this.width=0,this.drawItemsTexture=null,this.billboards=[],this.dirtyBillboards=new Set,this.freeIndices=[],this.drawCount=0,this.threshold=0,this.updateRequested=!1,this.prevSortCameraPos=new b}init(e,g){super.init(e,g),this.atlas=new XA(this.renderer.gl,"Billboards","RGBA","UNSIGNED_BYTE"),this.atlas.clearColor=new E(1,1,1,0);const t=I=>this.emit("updated",I);this.atlas.on("loaded",t),this.atlas.on("updated",t)}getPassType(){return dg.TRANSPARENT}itemAddedToScene(e,g){return e instanceof cI?(this.addBillboard(e),!0):!1}itemRemovedFromScene(e,g){return e instanceof cI?(this.removeBillboard(e),!0):!1}addBillboard(e){const g=e.imageParam,t=g.value;if(!t){g.on("valueChanged",()=>this.addBillboard(e));return}let I;this.freeIndices.length>0?I=this.freeIndices.pop():I=this.billboards.length;const l=this.atlas.addSubImage(t);e.setMetadata("GLBillboardsPass_Index",I);const C=()=>{e.isVisible()?(this.drawCount++,this.dirtyBillboards.add(I)):this.drawCount--,this.reqUpdateIndexArray()};e.on("visibilityChanged",C);const n=()=>{e.isVisible()&&(this.dirtyBillboards.add(I),this.emit("updated"))};e.globalXfoParam.on("valueChanged",n),e.alphaParam.on("valueChanged",n),e.on("highlightChanged",n),e.isVisible()&&this.drawCount++,this.billboards[I]={billboard:e,imageIndex:l,visibilityChanged:C,updateBillboard:n},this.indexArrayUpdateNeeded=!0,this.requestUpdate()}removeBillboard(e){const g=e.getMetadata("GLBillboardsPass_Index");if(g==-1){console.warn("Billboard already removed.");return}const t=this.billboards[g],I=t.billboard.imageParam.value;this.atlas.removeSubImage(I),e.off("visibilityChanged",t.visibilityChanged),e.off("highlightChanged",t.updateBillboard),e.globalXfoParam.off("valueChanged",t.updateBillboard),e.alphaParam.off("valueChanged",t.updateBillboard),this.billboards[g]=null,this.freeIndices.push(g),e.isVisible()&&this.drawCount--,this.indexArrayUpdateNeeded=!0,this.requestUpdate()}populateBillboardDataArray(e,g,t){const I=e.billboard,l=I.globalXfoParam.value.toMat4(),C=I.pixelsPerMeterParam.value,n=I.pivotParam.value,F=1/C;let a=0;I.alignedToCameraParam.value&&(a|=1<<2),I.drawOnTopParam.value&&(a|=1<<3),I.fixedSizeOnscreenParam.value&&(a|=1<<4);const U=I.alphaParam.value,d=I.colorParam.value,s=g*pg*4,o=new Be(new Float32Array(t.buffer,s*4,4)),A=new Be(new Float32Array(t.buffer,(s+4)*4,4)),B=new Be(new Float32Array(t.buffer,(s+8)*4,4)),Q=new Be(new Float32Array(t.buffer,(s+12)*4,4));if(o.set(l.xAxis.x,l.yAxis.x,l.zAxis.x,l.translation.x),A.set(l.xAxis.y,l.yAxis.y,l.zAxis.y,l.translation.y),B.set(l.xAxis.z,l.yAxis.z,l.zAxis.z,l.translation.z),Q.set(F,a,e.imageIndex,U),new Be(new Float32Array(t.buffer,(s+16)*4,4)).set(n.x,n.y,0,0),new Be(new Float32Array(t.buffer,(s+20)*4,4)).set(d.r,d.g,d.b,d.a),I.isHighlighted()){const V=I.getHighlight();new Be(new Float32Array(t.buffer,(s+24)*4,4)).set(V.r,V.g,V.b,V.a)}}requestUpdate(){this.updateRequested||(this.updateRequested=!0,this.emit("updated"))}reqUpdateIndexArray(){this.indexArrayUpdateNeeded||(this.indexArrayUpdateNeeded=!0,this.emit("updated"))}updateIndexArray(){const e=this.__gl;this.indexArray&&this.indexArray.length!=this.drawCount&&(e.deleteBuffer(this.instanceIdsBuffer),this.instanceIdsBuffer=null),this.indexArray=new Float32Array(this.drawCount);let g=0;for(let t=0;t<this.billboards.length;t++)this.billboards[t]&&this.billboards[t].billboard.isVisible()&&(this.indexArray[g]=t,g++);this.instanceIdsBuffer||(this.instanceIdsBuffer=e.createBuffer()),e.bindBuffer(e.ARRAY_BUFFER,this.instanceIdsBuffer),e.bufferData(e.ARRAY_BUFFER,this.indexArray,e.STATIC_DRAW),this.indexArrayUpdateNeeded=!1}updateBillboards(e){const g=()=>{this.indexArrayUpdateNeeded&&this.updateIndexArray();const t=this.__gl;if(!this.glshader){t.__quadVertexIdsBuffer||t.setupInstancedQuad(),this.glshader=new xo(t);const l=this.glshader.compileForTarget("GLBillboardsPass",e.shaderopts);this.shaderBinding=og(t,l.attrs,t.__quadattrbuffers,t.__quadIndexBuffer)}if(this.atlas.renderAtlas(),!t.floatTexturesSupported||!t.drawElementsInstanced){this.modelMatrixArray=[],this.billboardDataArray=[],this.tintColorArray=[],this.indexArray.forEach(l=>{const C=this.billboards[l],n=C.billboard,F=n.globalXfoParam.value.toMat4(),a=n.pixelsPerMeterParam.value,U=1/a;let d=0;n.alignedToCameraParam.value&&(d|=4),n.drawOnTopParam.value&&(d|=8),n.fixedSizeOnscreenParam.value&&(d|=16);const s=n.alphaParam.value,o=n.colorParam.value;this.modelMatrixArray[l]=F.asArray(),this.billboardDataArray[l]=[U,d,C.imageIndex,s],this.tintColorArray[l]=[o.r,o.g,o.b,o.a]}),this.updateRequested=!1;return}let I=Math.round(Math.sqrt((this.billboards.length-this.freeIndices.length)*pg)+.5);if(I%pg!=0&&(I+=pg-I%pg),this.width=I,this.drawItemsTexture)this.drawItemsTexture.resize(I,I);else{const l={format:"RGBA",type:"FLOAT",width:I,height:I,filter:"NEAREST",wrap:"CLAMP_TO_EDGE",mipMapped:!1};this.drawItemsTexture=new Te(t,l),this.drawItemsTexture.clear()}this.indexArray.forEach(l=>{l!=-1&&this.updateBillboard(l)}),this.updateRequested=!1};this.atlas.isLoaded()?g():this.atlas.on("loaded",g)}updateBillboard(e){if(this.drawCount==0||!this.drawItemsTexture)return;const g=this.billboards[e];if(!g.billboard.isVisible())return;const t=this.__gl,I=new Float32Array(pg*4);this.populateBillboardDataArray(g,0,I),t.bindTexture(t.TEXTURE_2D,this.drawItemsTexture.glTex);const l=e*pg%this.width,C=Math.floor(e*pg/this.width),n=pg,F=1,a=this.drawItemsTexture.getType(),U=this.drawItemsTexture.getFormat();if(a==t.FLOAT)t.texSubImage2D(t.TEXTURE_2D,0,l,C,n,F,U,a,I);else{const d=q.convertFloat32ArrayToUInt16Array(I);t.texSubImage2D(t.TEXTURE_2D,0,l,C,n,F,U,a,d)}}sort(e){for(const t of this.billboards){const{billboard:I}=t;if(I&&I.isVisible()){const l=I.globalXfoParam.value;t.dist=l.tr.distanceTo(e)}}this.indexArray.sort((t,I)=>t==-1?1:I==-1||this.billboards[t].dist>this.billboards[I].dist?-1:this.billboards[t].dist<this.billboards[I].dist?1:0);const g=this.__gl;g.floatTexturesSupported&&this.instanceIdsBuffer&&(g.bindBuffer(g.ARRAY_BUFFER,this.instanceIdsBuffer),g.bufferData(g.ARRAY_BUFFER,this.indexArray,g.STATIC_DRAW))}__draw(e,g){const t=this.__gl;if(!this.glshader)return;this.glshader.bind(e,g),this.shaderBinding.bind(e);const I=e.unifs,{atlasBillboards:l,passId:C,floatGeomBuffer:n,inVR:F}=e.unifs;if(l&&this.atlas.bindToUniform(e,I.atlasBillboards),n&&t.uniform1i(n.location,e.floatGeomBuffer?1:0),C&&t.uniform1i(C.location,this.passIndex),F&&t.uniform1i(F.location,e.vrPresenting?1:0),!t.floatTexturesSupported||!t.drawElementsInstanced){const{modelMatrix:a,billboardData:U,tintColor:d,layoutData:s}=e.unifs,o=this.indexArray.length;for(let A=0;A<o;A++)t.uniformMatrix4fv(a.location,!1,this.modelMatrixArray[A]),t.uniform4fv(U.location,this.billboardDataArray[A]),t.uniform4fv(d.location,this.tintColorArray[A]),t.uniform4fv(s.location,this.atlas.getLayoutData(this.billboards[A].imageIndex)),e.bindViewports(I,()=>{t.drawQuad()})}else{const{instancesTexture:a,instancesTextureSize:U}=e.unifs;this.drawItemsTexture.bindToUniform(e,a),t.uniform1i(U.location,this.width);{const d=e.attrs.instanceIds.location;t.enableVertexAttribArray(d),t.bindBuffer(t.ARRAY_BUFFER,this.instanceIdsBuffer),t.vertexAttribPointer(d,1,t.FLOAT,!1,4,0),t.vertexAttribDivisor(d,1)}e.bindViewports(I,()=>{t.drawElementsInstanced(t.TRIANGLES,6,t.UNSIGNED_SHORT,0,this.drawCount)})}}draw(e){if(this.drawCount==0||(this.updateRequested&&this.updateBillboards(e),this.dirtyBillboards.size>0&&(this.dirtyBillboards.forEach(l=>{this.updateBillboard(l)}),this.dirtyBillboards.clear()),this.indexArrayUpdateNeeded&&this.updateIndexArray(),!this.glshader))return;const g=e.viewXfo.tr;if(g.distanceTo(this.prevSortCameraPos)>this.threshold)if(this.sort(g),this.prevSortCameraPos=g.clone(),this.drawCount>1){const l=this.indexArray[this.indexArray.length-1],C=this.indexArray[this.indexArray.length-2],n=this.billboards[l].billboard,F=this.billboards[C].billboard,a=n.globalXfoParam.value.tr,U=F.globalXfoParam.value.tr;this.threshold=a.distanceTo(U)}else this.threshold=9999;const I=this.__gl;I.depthMask(!1),I.disable(I.CULL_FACE),I.enable(I.BLEND),I.blendEquation(I.FUNC_ADD),I.blendFunc(I.SRC_ALPHA,I.ONE_MINUS_SRC_ALPHA),this.__draw(e,"DRAW_COLOR"),I.disable(I.BLEND),I.depthMask(!0)}drawHighlightedGeoms(e){this.drawCount!=0&&this.__draw(e,"DRAW_HIGHLIGHT")}drawGeomData(e){this.drawCount!=0&&this.__draw(e,"DRAW_GEOMDATA")}getGeomItemAndDist(e){let g,t;if(e instanceof Float32Array?(g=Math.round(e[1]),t=e[3]):(g=e[0]+((e[1]&63)<<8),t=q.decode16BitFloatFrom2xUInt8(e.slice(2,3))),g>=this.billboards.length){console.warn("Invalid Draw Item id:"+g+" NumBillboards:"+(this.billboards.length-1));return}return{geomItem:this.billboards[g].billboard,componentId:0,dist:t}}}zt.registerPass(kA,dg.TRANSPARENT);class fA extends Ri{constructor(){super()}getPassType(){return dg.OVERLAY}filterGeomItem(e){if(e.isOverlay())return!0;const g=e.materialParam.value.getShaderClass();return!!(g&&g.isOverlay())}draw(e){const g=this.__gl;g.clear(g.DEPTH_BUFFER_BIT),g.enable(g.CULL_FACE),g.cullFace(g.BACK),g.enable(g.BLEND),g.blendEquation(g.FUNC_ADD),e.pass="ADD",g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA),this.__traverseTreeAndDraw(e),g.disable(g.BLEND)}drawGeomData(e){const g=this.__gl;g.clear(g.DEPTH_BUFFER_BIT),g.enable(g.CULL_FACE),g.cullFace(g.BACK),g.enable(g.BLEND),g.blendEquation(g.FUNC_ADD),e.pass="ADD",g.blendFunc(g.SRC_ALPHA,g.ONE_MINUS_SRC_ALPHA),super.drawGeomData(e),g.disable(g.BLEND),g.enable(g.DEPTH_TEST)}}zt.registerPass(fA,dg.OVERLAY);const ml=new OF(Aa);console.log(`Zea Engine v${Aa}`);var EA="@zeainc/zea-ux",TA="4.0.5",YA="Zea UX",vA="dist/index.cjs.js",hi="dist/index.esm.js",MA="dist/index.umd.js",HA="dist/zea-ux.d.ts",xA=["dist/","css/"],wA=["Zea","UX"],DA={"build:tsc":"npx tsc","build:tsc:watch":"npx tsc --watch","clean:build":"rm -Rf dist/ buildcache","build:rollup":"rollup -c","build:rollup:watch":"rollup -w -c",build:"npm-run-all clean:build build:rollup",dev:"npm-run-all --parallel build:rollup:watch start:watch",start:"es-dev-server --app-index testing-e2e/index.html --open","start:watch":"es-dev-server --app-index testing-e2e/index.html --open --watch",release:"standard-version",dist:"yarn publish --access=public",docs:"adg --config adg.config.json","docs-w":"adg -w --config=adg.config.json","docs:serve":"docsify serve docs/",lint:"eslint src/",prepare:"yarn run build",test:"jest",generate:"plop","test:coverage":"jest --coverage","test:debug":"node --inspect ./node_modules/jest/bin/jest.js --runInBand --watch","test:watch":"jest --watch","test:e2e":"percy exec cypress run --browser chrome --headless","test:e2e:watch":"percy exec cypress open","to-cleanup":"rm -Rf dist/ node_modules/ yarn.lock","to-link-packages":"yarn link @zeainc/zea-engine"},KA={type:"git",url:"git+ssh://git@github.com/ZeaInc/zea-ux.git"},LA={url:"https://github.com/ZeaInc/zea-ux/issues"},zA="https://github.com/ZeaInc/zea-ux#readme",_A="Zea Inc.",OA="MIT",PA={"@babel/preset-env":"^7.12.7","@percy/cypress":"^2.3.1","@rollup/plugin-commonjs":"^21.0.1","@rollup/plugin-json":"^4.1.0","@rollup/plugin-node-resolve":"^13.0.6","@zeainc/jsdocs2md":"^0.0.7","@zeainc/zea-collab":"^6.0.1","@zeainc/zea-engine":"^4",canvas:"^2.6.1",copyfiles:"^2.4.1",cypress:"^5.6.0","docsify-cli":"^4.4.2",documentation:"^13.1.0","es-dev-server":"^1.60.1",eslint:"^7.14.0","eslint-config-google":"^0.14.0","eslint-config-prettier":"^6.15.0","eslint-plugin-prettier":"^3.2.0",husky:"^4.3.0","husky-run":"^0.0.0",jest:"^26.6.3","npm-run-all":"^4.1.5",plop:"^2.7.4",prettier:"^2.2.1",rollup:"^2.34.1","rollup-plugin-commonjs":"^10.1.0","rollup-plugin-dts":"^4.1.0","rollup-plugin-node-resolve":"^5.2.0","rollup-plugin-terser":"^7.0.2","rollup-plugin-typescript":"^1.0.1","standard-version":"^9.0.0","ts-node":"^10.4.0",tslib:"^2.3.1",typescript:"^4.4.4"},jA={"dom-to-image":"^2.6.0"},qA={hooks:{"disabled=pre-commit":"npm test","disabled=pre-push":"npm test"}},$A={name:EA,version:TA,description:YA,main:vA,module:hi,browser:MA,types:HA,files:xA,keywords:wA,scripts:DA,repository:KA,bugs:LA,homepage:zA,author:_A,license:OA,devDependencies:PA,dependencies:jA,husky:qA};function Et(i){if(typeof i=="undefined"){console.warn("undefined event");return}if(i instanceof fg)return i.pointerRay;if(i instanceof nt)return i.touches[0].touchRay;if(i instanceof it){const e=i.controller.getTipXfo(),g=e.ori.getZaxis().negate();return new Ag(e.tr,g)}else return console.warn("unhandled pointer event"),new Ag}class mI extends H{constructor(e){super(e);this.captured=!1,this.colorParam=new Fg("Color",new E),this.highlightColorParam=new Fg("HighlightColor",new E(1,1,1)),this.addParameter(this.colorParam),this.addParameter(this.highlightColorParam)}highlight(){this.emit("highlight")}unhighlight(){this.emit("unhighlight")}getManipulationPlane(){const e=this.globalXfoParam.value;return new Ag(e.tr,e.ori.getZaxis())}onPointerEnter(e){this.highlight()}onPointerLeave(e){this.unhighlight()}onPointerDown(e){e.setCapture(this),e.stopPropagation(),this.captured=!0,this.changedTouches&&this.highlight(),e.pointerType=="mouse"||e.pointerType=="touch"?this.handlePointerDown(e):e.pointerType=="xr"&&this.onVRControllerButtonDown(e)}onPointerMove(e){this.captured&&(e.stopPropagation(),e.pointerType=="mouse"||e.pointerType=="touch"?this.handlePointerMove(e):e.pointerType=="xr"&&this.onVRPoseChanged(e)),e.preventDefault()}onPointerUp(e){this.captured&&(e.releaseCapture(),e.stopPropagation(),this.captured=!1,this.changedTouches&&this.unhighlight(),e.pointerType=="mouse"||e.pointerType=="touch"?this.handlePointerUp(e):e.pointerType=="xr"&&this.onVRControllerButtonUp(e))}onWheel(e){}handlePointerDown(e){this.gizmoRay=this.getManipulationPlane();const g=Et(e),t=g.intersectRayPlane(this.gizmoRay);this.grabPos=g.pointAtDist(t),this.onDragStart(e)}handlePointerMove(e){const g=Et(e),t=g.intersectRayPlane(this.gizmoRay);this.holdPos=g.pointAtDist(t),this.onDrag(e)}handlePointerUp(e){const g=Et(e);if(g){const t=g.intersectRayPlane(this.gizmoRay);this.releasePos=g.pointAtDist(t)}this.onDragEnd(e)}onVRControllerButtonDown(e){this.activeController=e.controller;const g=this.activeController.getTipXfo().clone(),t=this.getManipulationPlane(),I=g.tr.subtract(t.start),l=g.tr.subtract(t.dir.scale(I.dot(t.dir)));this.grabPos=l,this.onDragStart(e)}onVRPoseChanged(e){if(this.activeController){const g=this.activeController.getTipXfo(),t=this.getManipulationPlane(),I=g.tr.subtract(t.start),l=g.tr.subtract(t.dir.scale(I.dot(t.dir)));this.holdPos=l,this.onDrag(e)}}onVRControllerButtonUp(e){this.activeController==e.controller&&(this.activeController.getTipXfo(),this.onDragEnd(e),this.activeController=void 0)}onDragStart(e){console.warn("@Handle#onDragStart - Implement me!",e)}onDrag(e){console.warn("@Handle#onDrag - Implement me!",e)}onDragEnd(e){console.warn("@Handle#onDragEnd - Implement me!",e)}setTargetParam(e,g){console.warn("setTargetParam not implemented")}}class wa extends mI{constructor(e){super(e)}handlePointerDown(e){this.gizmoRay=this.getManipulationPlane();const g=Et(e);this.grabDist=g.intersectRayVector(this.gizmoRay)[1];const t=this.gizmoRay.pointAtDist(this.grabDist);this.grabPos=t,this.onDragStart(e)}handlePointerMove(e){const t=Et(e).intersectRayVector(this.gizmoRay)[1];this.holdPos=this.gizmoRay.pointAtDist(t),this.holdDist=t,this.value=t,this.delta=t-this.grabDist,this.onDrag(e)}handlePointerUp(e){const g=Et(e);if(g){const t=g.intersectRayVector(this.gizmoRay)[1],I=this.gizmoRay.pointAtDist(t);this.releasePos=I}this.onDragEnd(e)}onVRControllerButtonDown(e){this.gizmoRay=this.getManipulationPlane(),this.activeController=e.controller;const g=this.activeController.getTipXfo();this.grabDist=g.tr.subtract(this.gizmoRay.start).dot(this.gizmoRay.dir),this.grabPos=this.gizmoRay.start.add(this.gizmoRay.dir.scale(this.grabDist)),this.onDragStart(e)}onVRPoseChanged(e){const t=this.activeController.getTipXfo().tr.subtract(this.gizmoRay.start).dot(this.gizmoRay.dir);this.holdPos=this.gizmoRay.start.add(this.gizmoRay.dir.scale(t)),this.value=t,this.delta=t-this.grabDist,this.onDrag(e)}onVRControllerButtonUp(e){this.activeController==e.controller&&(this.onDragEnd(),this.activeController=void 0)}}class Ge extends Xe{constructor(){super();this.__undoStack=[],this.__redoStack=[],this.__currChange=null,this.__currChangeUpdated=this.__currChangeUpdated.bind(this)}flush(){for(const e of this.__undoStack)e.destroy();this.__undoStack=[];for(const e of this.__redoStack)e.destroy();this.__redoStack=[],this.__currChange&&(this.__currChange.off("updated",this.__currChangeUpdated),this.__currChange=null)}addChange(e){this.__currChange&&this.__currChange.off&&this.__currChange.off("updated",this.__currChangeUpdated),this.__undoStack.push(e),this.__currChange=e,this.__currChange.on&&this.__currChange.on("updated",this.__currChangeUpdated);for(const g of this.__redoStack)g.destroy();this.__redoStack=[],this.emit("changeAdded",{change:e})}getCurrentChange(){return this.__currChange}__currChangeUpdated(e){this.emit("changeUpdated",e)}undo(e=!0){if(this.__undoStack.length>0){this.__currChange&&(this.__currChange.off("updated",this.__currChangeUpdated),this.__currChange=null);const g=this.__undoStack.pop();g.undo(),e&&(this.__redoStack.push(g),this.emit("changeUndone"))}}cancel(){this.__undoStack.length>0&&(this.__currChange&&(this.__currChange.off("updated",this.__currChangeUpdated),this.__currChange=null),this.__undoStack.pop().undo())}redo(){if(this.__redoStack.length>0){const e=this.__redoStack.pop();e.redo(),this.__undoStack.push(e),this.emit("changeRedone")}}constructChange(e){return S.constructClass(e)}static isChangeClassRegistered(e){try{const g=S.getClassName(Object.getPrototypeOf(e).constructor);return!0}catch{return!1}}static getChangeClassName(e){return S.getClassName(Object.getPrototypeOf(e).constructor)}static registerChange(e,g){S.register(e,g)}static getInstance(){return rC||(rC=new Ge),rC}}let rC;class Ng extends Xe{constructor(e){super();this.secondaryChanges=[],this.suppressPrimaryChange=!1,this.name=e||Ge.getChangeClassName(this)}addSecondaryChange(e){const g=this.secondaryChanges.length;return this.secondaryChanges.push(e),g}undo(){this.secondaryChanges.forEach(e=>e.undo())}redo(){this.secondaryChanges.forEach(e=>e.redo())}update(e){throw new Error("Implement me")}toJSON(e){return{}}fromJSON(e,g){}updateFromJSON(e){this.update(e)}destroy(){}}class _t extends Ng{constructor(e,g){if(e){super(e?e.getName()+" Changed":"ParameterValueChange");this.prevValue=e.getValue(),this.param=e,g!=null&&(this.nextValue=g,this.param.value=this.nextValue)}else super()}undo(){this.param&&!this.suppressPrimaryChange&&(this.param.value=this.prevValue),super.undo()}redo(){this.param&&!this.suppressPrimaryChange&&(this.param.value=this.nextValue),super.redo()}update(e){!this.param||(this.nextValue=e.value,this.param.value=this.nextValue,this.emit("updated",e))}toJSON(e){const g={name:this.name,paramPath:this.param.getPath()};return this.nextValue!=null&&(this.nextValue.toJSON?g.value=this.nextValue.toJSON():g.value=this.nextValue),g}fromJSON(e,g){const t=g.appData.scene.getRoot().resolvePath(e.paramPath,1);if(!t||!(t instanceof Le)){console.warn("resolvePath is unable to resolve",e.paramPath);return}this.param=t,this.prevValue=this.param.getValue(),this.prevValue.clone?this.nextValue=this.prevValue.clone():this.nextValue=this.prevValue,this.name=e.name,e.value!=null&&this.updateFromJSON(e)}updateFromJSON(e){!this.param||(this.nextValue.fromJSON?this.nextValue.fromJSON(e.value):this.nextValue=e.value,this.param.value=this.nextValue)}}Ge.registerChange("ParameterValueChange",_t);class ci extends Ve{constructor(e){super(e);this.baseColorParam=new ye("BaseColor",new E(1,1,.5)),this.maintainScreenSizeParam=new k("MaintainScreenSize",0),this.overlayParam=new k("Overlay",0,[0,1]),this.__shaderName="HandleShader",this.addParameter(this.baseColorParam),this.addParameter(this.maintainScreenSizeParam),this.addParameter(this.overlayParam)}}S.register("HandleMaterial",ci);class eB extends Pe{constructor(e){super(e);this.__shaderStages.VERTEX_SHADER=ue.parseShader("HandleShader.vertexShader",`
precision highp float;

attribute vec3 positions;
#ifdef ENABLE_TEXTURES
attribute vec2 texCoords;
#endif

<%include file="GLSLUtils.glsl"/>
<%include file="stack-gl/transpose.glsl"/>
<%include file="drawItemId.glsl"/>
<%include file="drawItemTexture.glsl"/>
<%include file="modelMatrix.glsl"/>

uniform mat4 viewMatrix;
uniform mat4 projectionMatrix;

#ifdef ENABLE_MULTI_DRAW
<%include file="materialparams.glsl"/>
#else
uniform int MaintainScreenSize;
uniform float Overlay;
#endif

/* VS Outputs */
varying float v_drawItemId;
varying vec4 v_geomItemData;
varying vec3 v_viewPos;
#ifdef ENABLE_TEXTURES
varying vec2 v_textureCoord;
#endif

void main(void) {
  int drawItemId = getDrawItemId();
  v_drawItemId = float(drawItemId);
  v_geomItemData  = getInstanceData(drawItemId);

  //////////////////////////////////////////////
  // Material

#ifdef ENABLE_MULTI_DRAW
  vec2 materialCoords = v_geomItemData.zw;
  vec4 materialValue1 = getMaterialValue(materialCoords, 1);
  int maintainScreenSize = int(materialValue1.x + 0.5);
  float overlay = materialValue1.y;
#else
  int maintainScreenSize = MaintainScreenSize;
  float overlay = Overlay;
#endif

  //////////////////////////////////////////////
  // Matrix
  
  mat4 modelMatrix = getModelMatrix(drawItemId);
  if (maintainScreenSize != 0) {
    // Remove the scale from the model matrix.
    vec3 row0 = normalize(vec3(modelMatrix[0][0], modelMatrix[0][1], modelMatrix[0][2]));
    vec3 row1 = normalize(vec3(modelMatrix[1][0], modelMatrix[1][1], modelMatrix[1][2]));
    vec3 row2 = normalize(vec3(modelMatrix[2][0], modelMatrix[2][1], modelMatrix[2][2]));
    modelMatrix = mat4(
      row0.x, row0.y, row0.z, 0.0,
      row1.x, row1.y, row1.z, 0.0,
      row2.x, row2.y, row2.z, 0.0,
      modelMatrix[3][0], modelMatrix[3][1], modelMatrix[3][2], 1.0
    );
  }
  mat4 modelViewMatrix = viewMatrix * modelMatrix;
  if (maintainScreenSize != 0) {
    float dist = modelViewMatrix[3][2];
    float sc = abs(dist); // Note: items in front of the camera will have a negative value here.
    mat4 scmat = mat4(
      sc, 0.0, 0.0, 0.0,
      0.0, sc, 0.0, 0.0,
      0.0, 0.0, sc, 0.0,
      0.0, 0.0, 0.0, 1.0
    );
    modelViewMatrix = modelViewMatrix * scmat;
  }

  vec4 viewPos = modelViewMatrix * vec4(positions, 1.0);
  gl_Position = projectionMatrix * viewPos;

  if(overlay > 0.0){
    gl_Position.z = mix(gl_Position.z, -gl_Position.w, overlay);
  }

  v_viewPos = viewPos.xyz;
  v_textureCoord = texCoords;
  v_textureCoord.y = 1.0 - v_textureCoord.y;// Flip y
}
`),this.__shaderStages.FRAGMENT_SHADER=ue.parseShader("HandleShader.fragmentShader",`
precision highp float;

<%include file="GLSLUtils.glsl"/>
<%include file="math/constants.glsl"/>
<%include file="drawItemTexture.glsl"/>
<%include file="stack-gl/gamma.glsl"/>
<%include file="materialparams.glsl"/>


#if defined(DRAW_COLOR)

uniform color BaseColor;

#ifdef ENABLE_TEXTURES
uniform sampler2D BaseColorTex;
uniform int BaseColorTexType;
#endif

#elif defined(DRAW_GEOMDATA)

uniform int isOrthographic;
import 'surfaceGeomData.glsl'

#elif defined(DRAW_HIGHLIGHT)

#ifdef ENABLE_FLOAT_TEXTURES
vec4 getHighlightColor(int id) {
  return fetchTexel(instancesTexture, instancesTextureSize, (id * pixelsPerItem) + 4);
}
#else // ENABLE_FLOAT_TEXTURES

uniform vec4 highlightColor;

vec4 getHighlightColor() {
    return highlightColor;
}

#endif // ENABLE_FLOAT_TEXTURES

#endif // DRAW_HIGHLIGHT

/* VS Outputs */
varying float v_drawItemId;
varying vec4 v_geomItemData;
varying vec3 v_viewPos;
#ifdef ENABLE_TEXTURES
varying vec2 v_textureCoord;
#endif


#ifdef ENABLE_ES3
  out vec4 fragColor;
#endif
void main(void) {
#ifndef ENABLE_ES3
  vec4 fragColor;
#endif

  int drawItemId = int(v_drawItemId + 0.5);

  //////////////////////////////////////////////
  // Color
#if defined(DRAW_COLOR)


#ifdef ENABLE_MULTI_DRAW

  vec2 materialCoords = v_geomItemData.zw;
  vec4 baseColor = toLinear(getMaterialValue(materialCoords, 0));

#else // ENABLE_MULTI_DRAW

#ifndef ENABLE_TEXTURES
  vec4 baseColor = toLinear(BaseColor);
#else
  vec4 baseColor = getColorParamValue(BaseColor, BaseColorTex, BaseColorTexType, v_textureCoord);
#endif // ENABLE_TEXTURES

#endif // ENABLE_MULTI_DRAW

  fragColor = baseColor;

#ifdef ENABLE_INLINE_GAMMACORRECTION
  fragColor.rgb = toGamma(fragColor.rgb);
#endif

  //////////////////////////////////////////////
  // GeomData
#elif defined(DRAW_GEOMDATA)

  fragColor = setFragColor_geomData(v_viewPos, floatGeomBuffer, passId, v_drawItemId, isOrthographic);
  //////////////////////////////////////////////
  // Highlight
#elif defined(DRAW_HIGHLIGHT)
  
  fragColor = getHighlightColor(drawItemId);

#endif // DRAW_HIGHLIGHT


#ifndef ENABLE_ES3
  gl_FragColor = fragColor;
#endif
}
`)}static getPackedMaterialData(e){const g=new Float32Array(8),t=e.getParameter("BaseColor").getValue();return g[0]=t.r,g[1]=t.g,g[2]=t.b,g[3]=t.a,g[4]=e.getParameter("MaintainScreenSize").getValue(),g[5]=e.getParameter("Overlay").getValue(),g}static isOverlay(){return!0}static getMaterialTemplate(){return gB}}const gB=new ci("HandleShader_template");S.register("HandleShader",eB);const Da=(i,e)=>{i.update();const g=i.getVertexAttribute("positions");for(let t=0;t<g.getCount();t++){const I=g.getValueRef(t),l=e.transformVec3(I);I.set(l.x,l.y,l.z)}};class eC extends Ng{constructor(e,g){super("SelectionXfoChange");this.treeItems=[],this.localXfos=[],this.prevValues=[],this.newValues=[],this.treeItems=e,this.baseXfo=g;const t=g.inverse();this.treeItems.forEach(I=>{this.localXfos.push(t.multiply(I.globalXfoParam.value)),this.prevValues.push(I.globalXfoParam.value),this.newValues.push(I.globalXfoParam.value)})}setDeltaXfo(e){const g=this.baseXfo.clone();g.tr=e.tr.add(g.tr),g.ori=e.ori.multiply(g.ori),g.sc=e.sc.multiply(g.sc),this.prevValues.forEach((t,I)=>{const l=g.multiply(this.localXfos[I]);this.newValues[I]=l,this.treeItems[I].globalXfoParam.value=this.newValues[I].clone()}),this.emit("updated")}setDone(){this.emit("done")}undo(){this.treeItems.forEach((e,g)=>{e.globalXfoParam.value=this.prevValues[g]}),super.undo()}redo(){this.treeItems.forEach((e,g)=>{e.globalXfoParam.value=this.newValues[g]}),super.redo()}update(e){this.newValues=e.newValues,this.treeItems.forEach((g,t)=>{g.globalXfoParam.value=this.newValues[t]}),this.emit("updated",e)}toJSON(e){const g={name:this.name,treeItems:[],prevValues:[],newValues:[]};return this.treeItems.forEach((t,I)=>{g.treeItems[I]=this.treeItems[I].getPath(),g.prevValues[I]=this.prevValues[I].toJSON(),g.newValues[I]=this.newValues[I].toJSON()}),g}fromJSON(e,g){const t=g.appData.scene.getRoot().resolvePath(e.paramPath,1);if(!t||!(t instanceof Le)){console.warn("resolvePath is unable to resolve",e.paramPath);return}e.treeItems.forEach((I,l)=>{this.treeItems[l]=g.appData.scene.getRoot().resolvePath(I,1),this.prevValues[l]||(this.prevValues[l]=new v),this.prevValues[l].fromJSON(e.prevValues[l]),this.newValues[l]||(this.newValues[l]=new v),this.newValues[l].fromJSON(e.newValues[l])})}updateFromJSON(e){e.treeItems.forEach((g,t)=>{this.prevValues[t].fromJSON(e.prevValues[t]),this.newValues[t].fromJSON(e.newValues[t])})}}Ge.registerChange("SelectionXfoChange",eC);class Cl extends wa{constructor(e,g=.1,t=.003,I=new E){super(e);this.colorParam.value=I,this.handleMat=new Ve("handle","HandleShader"),this.handleMat.getParameter("BaseColor").value=I,this.handleMat.getParameter("MaintainScreenSize").value=1,this.handleMat.getParameter("Overlay").value=.9;const l=new Ci(t,g,64);l.baseZAtZeroParam.value=!0;const C=new li(t*4,t*10,64,!0),n=new ge("handle",l,this.handleMat),F=new ge("tip",C,this.handleMat),a=new v;a.tr.set(0,0,g),Da(C,a),this.colorParam.on("valueChanged",()=>{this.handleMat.getParameter("BaseColor").value=this.colorParam.getValue()}),this.addChild(n),this.addChild(F)}highlight(){super.highlight(),this.handleMat.getParameter("BaseColor").value=this.highlightColorParam.getValue()}unhighlight(){super.unhighlight(),this.handleMat.getParameter("BaseColor").value=this.colorParam.getValue()}setSelectionGroup(e){this.selectionGroup=e}setTargetParam(e,g=!0){if(this.param=e,g){const t=()=>{this.globalXfoParam.value=e.getValue()};t(),e.on("valueChanged",t)}}getTargetParam(){return this.param?this.param:this.globalXfoParam}onDragStart(e){const g=this.getTargetParam();if(this.baseXfo=g.getValue(),this.selectionGroup){const t=this.selectionGroup.getItems();this.change=new eC(Array.from(t),this.globalXfoParam.value),Ge.getInstance().addChange(this.change)}else this.change=new _t(g),Ge.getInstance().addChange(this.change)}onDrag(e){const g=this.holdPos.subtract(this.grabPos);if(this.selectionGroup){const t=this.change,I=new v(g);t.setDeltaXfo(I)}else{const t=this.baseXfo.clone();t.tr.addInPlace(g),this.change.update({value:t})}}onDragEnd(e){this.selectionGroup&&this.change.setDone(),this.change=null}}class Ka extends mI{constructor(e){super(e);this.deltaXfo=new v,this.offsetXfo=new v}setSelectionGroup(e){this.selectionGroup=e}setTargetParam(e,g=!0){if(this.param=e,g){const t=()=>{this.globalXfoParam.value=e.getValue()};t(),e.on("valueChanged",t)}}getTargetParam(){return this.param?this.param:this.globalXfoParam}onDragStart(e){if(this.baseXfo=this.globalXfoParam.value.clone(),this.baseXfo.sc.set(1,1,1),this.deltaXfo=new v,this.vec0=this.grabPos.subtract(this.baseXfo.tr),this.grabCircleRadius=this.vec0.length(),this.vec0.normalizeInPlace(),this.selectionGroup){this.offsetXfo=this.localXfoParam.value.inverse();const g=this.selectionGroup.getItems();this.change=new eC(Array.from(g),this.baseXfo),Ge.getInstance().addChange(this.change)}else{const g=this.getTargetParam(),t=g.value;this.offsetXfo=this.baseXfo.inverse().multiply(t),this.change=new _t(g),Ge.getInstance().addChange(this.change)}}onDrag(e){const g=this.holdPos.subtract(this.baseXfo.tr);g.normalizeInPlace();const t=1;let I=this.vec0.angleTo(g)*t;if(this.vec0.cross(g).dot(this.baseXfo.ori.getZaxis())<0&&(I=-I),this.range&&(I=q.clamp(I,this.range[0],this.range[1])),(e instanceof fg||e instanceof nt)&&e.shiftKey){const n=22.5*(Math.PI/180);I=Math.floor(I/n)*n}if(this.deltaXfo.ori.setFromAxisAndAngle(this.baseXfo.ori.getZaxis(),I),this.selectionGroup)this.change.setDeltaXfo(this.deltaXfo);else{const C=this.baseXfo.multiply(this.deltaXfo).multiply(this.offsetXfo);this.change.update({value:C})}}onDragEnd(e){this.selectionGroup&&this.change.setDone(),this.change=null}}class il extends Ka{constructor(e,g,t,I=new E(1,1,0)){super(e);this.radiusParam=new k("Radius",g),this.colorParam.value=I,this.addParameter(this.radiusParam),this.handleMat=new Ve("handle","HandleShader"),this.handleMat.getParameter("BaseColor").value=I,this.handleMat.getParameter("MaintainScreenSize").value=1,this.handleMat.getParameter("Overlay").value=.9;const l=new ba(t,g,64,Math.PI*.5);this.handle=new ge("handle",l,this.handleMat),this.handleXfo=new v,this.radiusParam.on("valueChanged",()=>{g=this.radiusParam.getValue(),l.outerRadiusParam.value=g,l.innerRadiusParam.value=g*.02}),this.colorParam.on("valueChanged",()=>{this.handleMat.getParameter("BaseColor").value=this.colorParam.getValue()}),this.addChild(this.handle)}highlight(){super.highlight(),this.handleMat.getParameter("BaseColor").value=this.highlightColorParam.getValue()}unhighlight(){super.unhighlight(),this.handleMat.getParameter("BaseColor").value=this.colorParam.getValue()}getBaseXfo(){return this.globalXfoParam.value}onDragStart(e){super.onDragStart(e)}onDrag(e){super.onDrag(e)}onDragEnd(e){super.onDragEnd(e)}}class tB extends mI{constructor(e){super(e);this.fullXfoManipulationInVR=!0}setSelectionGroup(e){this.selectionGroup=e}setTargetParam(e,g=!0){if(this.param=e,g){const t=()=>{this.globalXfoParam.value=e.getValue()};t(),e.on("valueChanged",t)}}getTargetParam(){return this.param?this.param:this.globalXfoParam}onDragStart(e){this.grabPos=this.grabPos;const g=this.getTargetParam();if(this.baseXfo=g.value,this.selectionGroup){const t=this.selectionGroup.getItems();this.change=new eC(Array.from(t),this.globalXfoParam.value),Ge.getInstance().addChange(this.change)}else this.change=new _t(g),Ge.getInstance().addChange(this.change)}onDrag(e){const g=this.holdPos.subtract(this.grabPos);if(this.selectionGroup){const t=this.change,I=new v(g);t.setDeltaXfo(I)}else{const t=this.baseXfo.clone();t.tr.addInPlace(g),this.change.update({value:t})}}onDragEnd(e){this.selectionGroup&&this.change.setDone(),this.change=null}onVRControllerButtonDown(e){if(this.fullXfoManipulationInVR){this.activeController=e.controller;const g=this.activeController.getTipXfo(),t=this.globalXfoParam.value;this.grabOffset=g.inverse().multiply(t)}else super.onVRControllerButtonDown(e)}onVRPoseChanged(e){if(this.fullXfoManipulationInVR){const t=this.activeController.getTipXfo().multiply(this.grabOffset);if(this.change)this.change.update({value:t});else{const I=this.getTargetParam();I.value=t}}else super.onVRPoseChanged(e)}onVRControllerButtonUp(e){this.fullXfoManipulationInVR?this.change=null:super.onVRControllerButtonUp(e)}}class nl extends tB{constructor(e,g,t,I=new E){super(e);this.sizeParam=new k("Size",g),this.addParameter(this.sizeParam),this.colorParam.value=I,this.handleMat=new Ve("handle","HandleShader"),this.handleMat.getParameter("BaseColor").value=I,this.handleMat.getParameter("MaintainScreenSize").value=1,this.handleMat.getParameter("Overlay").value=.9;const l=new Hl(g,g,g*.02),C=new v;C.tr=t,Da(l,C),this.handle=new ge("handle",l,this.handleMat),this.sizeParam.on("valueChanged",()=>{g=this.sizeParam.getValue(),l.sizeXParam.value=g,l.sizeYParam.value=g,l.sizeZParam.value=g*.02}),this.colorParam.on("valueChanged",()=>{this.handleMat.getParameter("BaseColor").value=this.colorParam.getValue()}),this.addChild(this.handle)}highlight(){super.highlight(),this.handleMat.getParameter("BaseColor").value=this.highlightColorParam.getValue()}unhighlight(){super.unhighlight(),this.handleMat.getParameter("BaseColor").value=this.colorParam.getValue()}}class IB extends H{constructor(e=.1,g=.003){super("XfoHandle");this.highlightColorParam=new Fg("HighlightColor",new E(1,1,1)),this.highlightColorParam.on("valueChanged",()=>{const a=this.highlightColorParam.getValue();this.traverse(U=>{U instanceof mI&&(U.highlightColorParam.value=a)})}),this.addParameter(this.highlightColorParam);const t=new H("Translate");this.addChild(t);const I=new E(1,.1,.1),l=new E("#32CD32"),C=new E("#1E90FF");I.a=1,l.a=1,C.a=1;{const a=new Cl("linearX",e,g,I),U=new v;U.ori.setFromAxisAndAngle(new b(0,1,0),Math.PI*.5),a.localXfoParam.value=U,t.addChild(a)}{const a=new Cl("linearY",e,g,l),U=new v;U.ori.setFromAxisAndAngle(new b(1,0,0),Math.PI*-.5),a.localXfoParam.value=U,t.addChild(a)}{const a=new Cl("linearZ",e,g,C);t.addChild(a)}const n=e*.35;{const a=new nl("planarXY",n,new b(n*.5,n*.5,0),C),U=new v;a.localXfoParam.value=U,t.addChild(a)}{const a=new nl("planarYZ",n,new b(n*-.5,n*.5,0),I),U=new v;U.ori.setFromAxisAndAngle(new b(0,1,0),Math.PI*.5),a.localXfoParam.value=U,t.addChild(a)}{const a=new nl("planarXZ",n,new b(n*.5,n*.5,0),l),U=new v;U.ori.setFromAxisAndAngle(new b(1,0,0),Math.PI*.5),a.localXfoParam.value=U,t.addChild(a)}const F=new H("Rotate");this.addChild(F);{const a=new il("rotationX",e*.75,g,I),U=new v;U.ori.setFromEulerAngles(new lt(Math.PI*-.5,Math.PI*-.5,0)),a.localXfoParam.value=U,F.addChild(a)}{const a=new il("rotationY",e*.75,g,l),U=new v;U.ori.setFromAxisAndAngle(new b(1,0,0),Math.PI*-.5),a.localXfoParam.value=U,F.addChild(a)}{const a=new il("rotationZ",e*.75,g,C),U=new v;U.ori.setFromAxisAndAngle(new b(0,0,1),Math.PI*.5),a.localXfoParam.value=U,F.addChild(a)}}showHandles(e){e?this.setVisible(!0):this.setVisible(!1)}setTargetParam(e,g=!0){this.param=e,this.traverse(t=>{t instanceof mI&&t.setTargetParam(e,!1)})}setSelectionGroup(e){this.traverse(g=>{(g instanceof Cl||g instanceof nl||g instanceof il)&&g.setSelectionGroup(e)})}}class lB extends ag{constructor(e,g){super();this.xfoModeInput=new xU("InitialXfoMode"),this.xfoOutput=new Yl("GroupGlobalXfo"),this.addInput(this.xfoModeInput).setParam(e),this.addOutput(this.xfoOutput).setParam(g),this.currGroupXfo=new v}addItem(e){const g=new Pg("MemberGlobalXfo"+this.getNumInputs());g.setParam(e.globalXfoParam),this.addInput(g),this.setDirty()}removeItem(e){const g=e.globalXfoParam;for(let t=1;t<this.getNumInputs();t++){const I=this.getInputByIndex(t);if(I.getParam()==g){this.removeInput(I),this.setDirty();return}}throw new Error("Item not found in SelectionGroupXfoOperator")}backPropagateValue(e){const g=this.currGroupXfo.inverse(),t=e.multiply(g);t.ori.normalizeInPlace(),this.currGroupXfo=t.multiply(this.currGroupXfo);for(let I=1;I<this.getNumInputs();I++){const l=this.getInputByIndex(I),C=l.getValue(),n=t.multiply(C);l.setValue(n)}}evaluate(){if(this.currGroupXfo=new v,this.getNumInputs()==1){this.xfoOutput.setClean(this.currGroupXfo);return}const e=this.xfoModeInput.getValue();if(e==at.INITIAL_XFO_MODES.manual){this.currGroupXfo=this.xfoOutput.getValue().clone();return}else if(e==at.INITIAL_XFO_MODES.first){const g=this.getInputByIndex(1).getValue();this.currGroupXfo.tr=g.tr.clone(),this.currGroupXfo.ori=g.ori.clone()}else if(e==at.INITIAL_XFO_MODES.average){this.currGroupXfo.ori.set(0,0,0,0);let g=0;for(let t=1;t<this.getNumInputs();t++){const I=this.getInputByIndex(t).getValue();this.currGroupXfo.tr.addInPlace(I.tr),g==0&&this.currGroupXfo.ori.addInPlace(I.ori),g++}this.currGroupXfo.tr.scaleInPlace(1/g)}else if(e==at.INITIAL_XFO_MODES.globalOri){let g=0;for(let t=1;t<this.getNumInputs();t++){const I=this.getInputByIndex(t).getValue();this.currGroupXfo.tr.addInPlace(I.tr),g++}this.currGroupXfo.tr.scaleInPlace(1/g)}else throw new Error("Invalid KinematicGroup.INITIAL_XFO_MODES.");this.currGroupXfo.ori.normalizeInPlace(),this.xfoOutput.setClean(this.currGroupXfo)}}const rn={disabled:0,manual:1,first:2,average:3,globalOri:4};class Zi extends wI{constructor(e){super();this.initialXfoModeParam=new OC("InitialXfoMode",rn.average,["manual","first","average","global"]);let g,t;e.selectionOutlineColor?g=e.selectionOutlineColor:g=new E(3/255,227/255,172/255,.1),e.branchSelectionOutlineColor?t=e.branchSelectionOutlineColor:(t=g.lerp(new E("white"),.5),t.a=.1),this.highlightColorParam.value=g,this.addParameter(new Fg("SubtreeHighlightColor",t)),this.itemsParam.setFilterFn(I=>I instanceof jg),this.addParameter(this.initialXfoModeParam),this.selectionGroupXfoOp=new lB(this.initialXfoModeParam,this.globalXfoParam)}static get INITIAL_XFO_MODES(){return rn}clone(){const e=new Zi;return e.copyFrom(this),e}bindItem(e,g){if(e instanceof H){const t=this.highlightColorParam.value;t.a=this.highlightFillParam.value,e.addHighlight("selected"+this.getId(),t,!1);const I=this.getParameter("SubtreeHighlightColor").getValue();e.getChildren().forEach(l=>{l instanceof H&&l.addHighlight("branchselected"+this.getId(),I,!0)}),this.selectionGroupXfoOp.addItem(e)}}unbindItem(e,g){e instanceof H&&(e.removeHighlight("selected"+this.getId()),e.getChildren().forEach(t=>{t instanceof H&&t.removeHighlight("branchselected"+this.getId(),!0)}),this.selectionGroupXfoOp.removeItem(e))}}class kt extends Ng{constructor(e,g,t){super("SelectionChange");this.__selectionManager=e,this.__prevSelection=g,this.__newSelection=t}undo(){this.__selectionManager.setSelection(this.__prevSelection,!1)}redo(){this.__selectionManager.setSelection(this.__newSelection,!1)}toJSON(e){const g=super.toJSON(e),t=[];for(const I of this.__newSelection)t.push(I.getPath());return g.itemPaths=t,g}fromJSON(e,g){super.fromJSON(e,g),this.__selectionManager=g.appData.selectionManager,this.__prevSelection=new Set(this.__selectionManager.getSelection());const t=g.appData.scene.getRoot(),I=new Set;for(const l of e.itemPaths)I.add(t.resolvePath(l,1));this.__newSelection=I,this.__selectionManager.setSelection(this.__newSelection,!1)}}Ge.registerChange("SelectionChange",kt);class La extends Ng{constructor(e,g){super("Selection Visibility Change");this.selection=e,this.state=g,this._changeItemsVisibility(this.state)}undo(){this._changeItemsVisibility(!this.state)}redo(){this._changeItemsVisibility(this.state)}_changeItemsVisibility(e){for(const g of this.selection)g.getParameter("Visible").value=e}}Ge.registerChange("ToggleSelectionVisibility",La);class CB extends Xe{constructor(e,g={}){super();this.leadSelection=void 0,this.appData=e,this.selectionGroup=new Zi(g),g.enableXfoHandles===!0&&(this.xfoHandle=new IB(.1,.002),this.xfoHandle.setSelectionGroup(this.selectionGroup),this.xfoHandle.setVisible(!1),this.xfoHandle.highlightColorParam.value=new E(1,1,0),this.xfoHandleVisible=!0,this.selectionGroup.addChild(this.xfoHandle)),this.appData.renderer&&this.setRenderer(this.appData.renderer)}setRenderer(e){if(this.__renderer==e){console.warn("Renderer already set on SelectionManager");return}this.__renderer=e,this.__renderer.addTreeItem(this.selectionGroup)}setXfoMode(e){this.xfoHandle&&(this.selectionGroup.initialXfoModeParam.value=e)}showHandles(e){this.xfoHandleVisible=e}updateHandleVisibility(){if(!this.xfoHandle)return;const e=this.selectionGroup.getItems(),g=Array.from(e).length>0;this.xfoHandle.setVisible(g&&this.xfoHandleVisible),this.__renderer.requestRedraw()}getSelection(){return this.selectionGroup.getItems()}setSelection(e,g=!0){const t=new Set(this.selectionGroup.getItems()),I=new Set(t);for(const l of e)t.has(l)||(l.setSelected(!0),t.add(l));for(const l of t)e.has(l)||(l.setSelected(!1),t.delete(l));if(this.selectionGroup.setItems(t),t.size>0?this.__setLeadSelection(t.values().next().value):this.__setLeadSelection(),this.updateHandleVisibility(),g){const l=new kt(this,I,t);Ge.getInstance().addChange(l)}this.emit("selectionChanged",{prevSelection:I,selection:t})}__setLeadSelection(e){this.leadSelection!=e&&(this.leadSelection=e,this.emit("leadSelectionChanged",{treeItem:e}))}toggleItemSelection(e,g=!0){const t=new Set(this.selectionGroup.getItems()),I=new Set(t);if(g&&!(t.size==1&&t.has(e))){let n=!0;if(t.has(e)){let F=1;e.traverse(a=>{t.has(a)&&F++}),n=F!=t.size}n&&(Array.from(t).forEach(F=>{F.setSelected(!1)}),t.clear())}let l;t.has(e)?(e.setSelected(!1),t.delete(e),l=!1):(e.setSelected(!0),t.add(e),l=!0),this.selectionGroup.setItems(t),l&&t.size===1?this.__setLeadSelection(e):l||(t.size===1?this.__setLeadSelection(t.values().next().value):t.size===0&&this.__setLeadSelection());const C=new kt(this,I,t);Ge.getInstance().addChange(C),this.updateHandleVisibility(),this.emit("selectionChanged",{prevSelection:I,selection:t})}clearSelection(e=!0){const g=new Set(this.selectionGroup.getItems());if(g.size==0)return!1;let t;e&&(t=new Set(g));for(const I of g)I.setSelected(!1);if(g.clear(),this.selectionGroup.setItems(g),this.__setLeadSelection(),this.updateHandleVisibility(),e){const I=new kt(this,t,g);Ge.getInstance().addChange(I),this.emit("selectionChanged",{selection:g,prevSelection:t})}return!0}selectItems(e,g=!0){const t=new Set(this.selectionGroup.getItems()),I=new Set(t);g&&t.clear();for(const C of e)t.has(C)||(C.setSelected(!0),t.add(C));const l=new kt(this,I,t);Ge.getInstance().addChange(l),this.selectionGroup.setItems(t),t.size===1?this.__setLeadSelection(t.values().next().value):t.size===0&&this.__setLeadSelection(),this.updateHandleVisibility(),this.emit("selectionChanged",{prevSelection:I,selection:t})}deselectItems(e){const g=new Set(this.selectionGroup.getItems()),t=new Set(g);for(const l of e)g.has(l)&&(l.setSelected(!1),g.delete(l));this.selectionGroup.setItems(g);const I=new kt(this,t,g);Ge.getInstance().addChange(I),g.size===1?this.__setLeadSelection(g.values().next().value):g.size===0&&this.__setLeadSelection(),this.updateHandleVisibility(),this.emit("selectionChanged",{prevSelection:t,selection:g})}toggleSelectionVisibility(){if(this.leadSelection){const e=this.selectionGroup.getItems(),g=!this.leadSelection.getVisible(),t=new La(e,g);Ge.getInstance().addChange(t)}}startPickingMode(e,g,t,I){console.log(e),this.__pickCB=g,this.__pickFilter=t,this.__pickCount=I,this.__picked=[]}pickingFilter(e){return this.__pickFilter(e)}pickingModeActive(){return this.__pickCB!=null}cancelPickingMode(){this.__pickCB=void 0}pick(e){if(this.__pickCB){if(Array.isArray(e))this.__pickFilter?this.__picked=this.__picked.concat(e.filter(this.__pickFilter)):this.__picked=this.__picked.concat(e);else{if(this.__pickFilter&&!this.__pickFilter(e))return;this.__picked.push(e)}this.__picked.length==this.__pickCount&&(this.__pickCB(this.__picked),this.__pickCB=void 0)}}}class iB extends Ng{constructor(e,g,t){if(e){super(e.getName()+" Added");this.treeItem=e,this.owner=g,this.selectionManager=t,this.prevSelection=new Set(this.selectionManager.getSelection()),this.treeItemIndex=this.owner.getChildIndex(this.owner.addChild(this.treeItem)),this.selectionManager.setSelection(new Set([this.treeItem]),!1)}else super()}undo(){this.treeItem instanceof ag?this.treeItem.detach():this.treeItem instanceof H&&this.treeItem.traverse(e=>{e instanceof ag&&e.detach()},!1),this.owner.removeChild(this.treeItemIndex),this.selectionManager&&this.selectionManager.setSelection(this.prevSelection,!1)}redo(){this.treeItem instanceof ag?this.treeItem.reattach():this.treeItem instanceof H&&this.treeItem.traverse(e=>{e instanceof ag&&e.reattach()},!1),this.owner.addChild(this.treeItem),this.selectionManager&&this.selectionManager.setSelection(new Set([this.treeItem]),!1)}toJSON(e){return{name:this.name,treeItem:this.treeItem.toJSON(e),treeItemPath:this.treeItem.getPath(),treeItemIndex:this.treeItemIndex}}fromJSON(e,g){const t=S.constructClass(e.treeItem.type);if(!t){console.warn("resolvePath is unable to construct",e.treeItem);return}this.name=e.name,this.treeItem=t,this.treeItem.fromJSON(e.treeItem,g),this.treeItemIndex=this.owner.getChildIndex(this.owner.addChild(this.treeItem))}destroy(){}}Ge.registerChange("TreeItemAddChange",iB);class nB extends Ng{constructor(e,g){if(e){super(e.getName()+" Moved");this.treeItem=e,this.oldOwner=this.treeItem.getOwner(),this.oldOwnerIndex=this.oldOwner.getChildIndex(this.treeItem),this.newOwner=g,this.newOwner.addChild(this.treeItem,!0)}else super()}undo(){this.oldOwner.insertChild(this.treeItem,this.oldOwnerIndex,!0)}redo(){this.newOwner.addChild(this.treeItem,!0)}toJSON(e){return{name:this.name,treeItemPath:this.treeItem.getPath(),newOwnerPath:this.newOwner.getPath()}}fromJSON(e,g){if(!g||!g.scene)return;const t=g.scene.getRoot().resolvePath(e.treeItemPath,1);if(!t){console.warn("resolvePath is unable to resolve",e.treeItemPath);return}const I=g.scene.getRoot().resolvePath(e.newOwnerPath,1);if(!I){console.warn("resolvePath is unable to resolve",e.newOwnerPath);return}this.name=e.name,this.treeItem=t,this.newOwner=I,this.oldOwner=this.treeItem.getOwner(),this.oldOwnerIndex=this.oldOwner.getChildIndex(this.treeItem),this.newOwner.addChild(this.treeItem,!0)}}Ge.registerChange("TreeItemMoveChange",nB);class aB extends Ng{constructor(e,g){super();if(this.items=[],this.itemOwners=[],this.itemPaths=[],this.itemIndices=[],e){this.selectionManager=g.selectionManager,this.prevSelection=new Set(this.selectionManager.getSelection()),this.items=e,this.newSelection=new Set(this.prevSelection);const t=[];this.items.forEach(I=>{const l=I.getOwner(),C=l.getChildIndex(I);t.push(I.getName()),this.itemOwners.push(l),this.itemPaths.push(I.getPath()),this.itemIndices.push(C),this.selectionManager&&this.newSelection.has(I)&&this.newSelection.delete(I),I instanceof ag?I.detach():I instanceof H&&I.traverse(n=>{n instanceof ag&&n.detach(),this.selectionManager&&this.newSelection.has(n)&&this.newSelection.delete(n)},!1),l.removeChild(C)}),this.selectionManager.setSelection(this.newSelection,!1),this.name=t+" Deleted"}}undo(){this.items.forEach((e,g)=>{this.itemOwners[g].insertChild(e,this.itemIndices[g],!1,!1),e instanceof ag?e.reattach():e instanceof H&&e.traverse(t=>{t instanceof ag&&t.reattach()},!1)}),this.selectionManager&&this.selectionManager.setSelection(this.prevSelection,!1)}redo(){this.selectionManager&&this.selectionManager.setSelection(this.newSelection,!1),this.items.forEach((e,g)=>{this.itemOwners[g].removeChild(this.itemIndices[g]),e instanceof ag?e.detach():e instanceof H&&e.traverse(t=>{t instanceof ag&&t.detach()},!1)})}toJSON(e){const g={name:this.name,items:[],itemPaths:this.itemPaths,itemIndices:this.itemIndices};return this.items.forEach(t=>{g.items.push(t.toJSON())}),g}fromJSON(e,g){this.name=e.name,e.itemPaths.forEach(t=>{const I=g.scene.getRoot().resolvePath(t,1);if(!I){console.warn("resolvePath is unable to resolve",t);return}const l=I.getOwner();this.itemOwners.push(l),this.itemPaths.push(I.getPath()),this.itemIndices.push(l.getChildIndex(I))})}destroy(){}}Ge.registerChange("TreeItemsRemoveChange",aB);new Dt(1,1);class FB extends Ng{constructor(e){super("HoldObjectsChange");this.__selection=[],this.__prevXfos=[],this.__newXfos=[],e&&this.update(e)}undo(){for(let e=0;e<this.__selection.length;e++)this.__selection[e]&&this.__prevXfos[e]&&(this.__selection[e].globalXfoParam.value=this.__prevXfos[e])}redo(){for(let e=0;e<this.__selection.length;e++)this.__selection[e]&&this.__newXfos[e]&&(this.__selection[e].globalXfoParam.value=this.__newXfos[e])}update(e){if(e.newItem)this.__selection[e.newItemId]=e.newItem,this.__prevXfos[e.newItemId]=e.newItem.globalXfoParam.value;else if(e.changeXfos)for(let g=0;g<e.changeXfoIds.length;g++){const t=e.changeXfoIds[g];!this.__selection[t]||(this.__selection[t].globalXfoParam.value=e.changeXfos[g],this.__newXfos[t]=e.changeXfos[g])}this.emit("updated",e)}toJSON(e){const g=super.toJSON(e),t=[];for(let I=0;I<this.__selection.length;I++)this.__selection[I]?t[I]=this.__selection[I].getPath():t.push(null);return g.itemPaths=t,g}fromJSON(e,g){super.fromJSON(e,g);const t=g.appData.scene.getRoot();this.__selection=[];for(let I=0;I<e.itemPaths.length;I++){const l=e.itemPaths[I];if(l&&l!=""){const C=t.resolvePath(l,1);C!=t&&(this.__selection[I]=C,this.__prevXfos[I]=C.globalXfoParam.value)}}}updateFromJSON(e){this.update(e)}}Ge.registerChange("HoldObjectsChange",FB);class mt extends Ng{constructor(e,g){super(e);this.parentItem=g||null}setParentAndXfo(e,g){this.parentItem=e;const t=this.parentItem.generateUniqueName(this.geomItem.getName());this.geomItem.setName(t),this.geomItem.globalXfoParam.value=g,this.parentItem.addChild(this.geomItem)}undo(){this.parentItem.removeChild(this.parentItem.getChildIndex(this.geomItem))}redo(){this.parentItem.addChild(this.geomItem,!1,!1)}toJSON(e){const g=super.toJSON(e);g.parentItemPath=this.parentItem.getPath(),g.geomItemName=this.geomItem.getName(),g.geomItemXfo=this.geomItem.localXfoParam.getValue();const t=this.geomItem.getParameter("Material").getValue();return g.color=t.getParameter("BaseColor").getValue(),g}fromJSON(e,g){const t=g.appData.scene.getRoot();this.parentItem=t.resolvePath(e.parentItemPath,1),this.geomItem.setName(this.parentItem.generateUniqueName(e.geomItemName));const I=new v;if(I.fromJSON(e.geomItemXfo),this.geomItem.localXfoParam.value=I,this.childIndex=this.parentItem.getChildIndex(this.parentItem.addChild(this.geomItem,!1)),e.color){const l=new E(.7,.2,.2);l.fromJSON(e.color);const C=this.geomItem.getParameter("Material").getValue();C.getParameter("BaseColor").value=l}}destroy(){}}class UB extends mt{constructor(e,g,t,I=.001){super("Create Line");this.line=new sg,this.line.setNumVertices(2),this.line.setNumSegments(1),this.line.getVertexAttribute("positions").setValue(0,new b),this.line.setSegmentVertexIndices(0,0,1);const C=new wl("Line");t&&(C.baseColorParam.value=t),C.lineThicknessParam&&(C.lineThicknessParam.value=I),this.geomItem=new ge("Line",this.line,C),e&&g&&this.setParentAndXfo(e,g)}update(e){e.p1&&(this.line.positions.getValueRef(1).setFromOther(e.p1),this.line.setBoundingBoxDirty(),this.line.emit("geomDataChanged")),this.emit("updated",e)}fromJSON(e,g){if(super.fromJSON(e,g),e.color){const t=new E;t.fromJSON(e.color);const I=this.geomItem.materialParam.value;I.getParameter("BaseColor").value=t}}}Ge.registerChange("CreateLineChange",UB);class dB extends mt{constructor(e,g,t){super("Create Cone");const I=new li(0,0);I.heightParam.value=0;const l=new Ve("Cone","SimpleSurfaceShader");this.geomItem=new ge("Cone",I,l),e&&g&&(l.getParameter("BaseColor").value=t,this.setParentAndXfo(e,g))}update(e){e.radius&&(this.geomItem.getParameter("Geometry").getValue().radiusParam.value=e.radius),e.height&&(this.geomItem.getParameter("Geometry").getValue().getParameter("Height").value=e.height),this.emit("updated",e)}}Ge.registerChange("CreateConeChange",dB);class sB extends mt{constructor(e,g){super("CreateCircle");this.circle=new Ii(0,64);const t=new Ve("circle","FatLinesShader");t.getParameter("BaseColor").value=new E(.7,.2,.2),this.geomItem=new ge("Circle",this.circle,t),e&&g&&this.setParentAndXfo(e,g)}update(e){this.circle.radiusParam.value=e.radius,this.emit("updated",e)}toJSON(){const e=super.toJSON();return e.radius=this.circle.radiusParam.value,e}updateFromJSON(e){console.log("CreateCircleChange:",e),e.radius&&(this.circle.radiusParam.value=e.radius)}}Ge.registerChange("CreateCircleChange",sB);class oB extends mt{constructor(e,g){super("CreateRect");this.rect=new ti(0,0);const t=new Ve("circle","FatLinesShader");t.getParameter("BaseColor").value=new E(.7,.2,.2),this.geomItem=new ge("Rect",this.rect,t),e&&g&&this.setParentAndXfo(e,g)}update(e){if(e.baseSize&&(this.rect.sizeXParam.value=e.baseSize[0],this.rect.sizeYParam.value=e.baseSize[1]),e.tr){const g=this.geomItem.localXfoParam.getValue();g.tr.fromJSON(e.tr),this.geomItem.localXfoParam.value=g}this.emit("updated",e)}}Ge.registerChange("CreateRectChange",oB);class AB extends mt{constructor(e,g,t,I=.001){super("CreateFreehandLine");this.vertexCount=100,this.used=0,this.line=new sg,this.line.setNumVertices(this.vertexCount),this.line.setNumSegments(this.vertexCount-1),this.line.getVertexAttribute("positions").setValue(0,new b);const C=new wl("freeHandLine");t&&(C.baseColorParam.value=t),C.lineThicknessParam&&(C.lineThicknessParam.value=I),this.geomItem=new ge("freeHandLine",this.line,C),e&&g&&this.setParentAndXfo(e,g)}update(e){this.used++;let g=!1;this.used>=this.line.getNumSegments()&&(this.vertexCount=this.vertexCount+100,this.line.setNumVertices(this.vertexCount),this.line.setNumSegments(this.vertexCount-1),g=!0),this.line.getVertexAttribute("positions").setValue(this.used,e.point),this.line.setSegmentVertexIndices(this.used-1,this.used-1,this.used),this.line.setBoundingBoxDirty(),g?this.line.emit("geomDataTopologyChanged",{topologyChanged:!0}):this.line.emit("geomDataChanged",{topologyChanged:!0}),this.emit("updated",e)}toJSON(e){const g=super.toJSON(e),t=this.geomItem.materialParam.value;return g.lineThickness=t.lineThicknessParam.value,g.color=t.baseColorParam.value,g}fromJSON(e,g){if(e.lineThickness){const t=this.geomItem.materialParam.value;t.lineThicknessParam.value=e.lineThickness}if(e.color){const t=new E(.7,.2,.2);t.fromJSON(e.color);const I=this.geomItem.materialParam.value;I.baseColorParam.value=t}super.fromJSON(e,g)}}Ge.registerChange("CreateFreehandLineChange",AB);class BB extends mt{constructor(e,g,t){super("CreateSphere",e);this.sphere=new Kt(0,24,12);const I=new Ve("Sphere","SimpleSurfaceShader");this.geomItem=new ge("Sphere",this.sphere,I),this.geomItem.setSelectable(!1),e&&g&&t&&(I.getParameter("BaseColor").value=t,this.setParentAndXfo(e,g))}update(e){this.sphere.radiusParam.value=e.radius,this.emit("updated",e)}toJSON(){const e=super.toJSON();return e.radius=this.sphere.radiusParam.getValue(),e}updateFromJSON(e){e.radius&&(this.sphere.radiusParam.value=e.radius)}}Ge.registerChange("CreateSphereChange",BB);class QB extends mt{constructor(e,g,t){super("CreateCuboid");this.cuboid=new Hl(0,0,0,!0);const I=new Ve("Cuboid","SimpleSurfaceShader");this.geomItem=new ge("Cuboid",this.cuboid,I),e&&g&&(I.getParameter("BaseColor").value=t,this.setParentAndXfo(e,g))}update(e){if(e.baseSize&&(this.cuboid.sizeXParam.value=e.baseSize[0],this.cuboid.sizeYParam.value=e.baseSize[1]),e.tr){const g=this.geomItem.localXfoParam.getValue();g.tr.fromJSON(e.tr),this.geomItem.localXfoParam.value=g}e.height&&(this.cuboid.sizeZParam.value=e.height),this.emit("updated",e)}}Ge.registerChange("CreateCuboidChange",QB);class VB extends wa{constructor(e,g=.5,t=.02,I=new E("#F9CE03")){super(e);this.handleXfo=new v,this.baseBarXfo=new v,this.topBarXfo=new v,this.lengthParam=new k("Length",g),this.handleRadiusParam=new k("HandleRadius",t),this.barRadiusParam=new k("BarRadius",t*.25),this.addParameter(this.lengthParam),this.addParameter(this.handleRadiusParam),this.addParameter(this.barRadiusParam),this.colorParam.value=I,this.handleMat=new Ve("handle","FlatSurfaceShader"),this.handleMat.getParameter("BaseColor").value=this.colorParam.getValue();const l=new Ve("topBar","FlatSurfaceShader");l.getParameter("BaseColor").value=new E(.5,.5,.5);const C=new Ci(t*.25,1,64,2,!0,!0),n=new Kt(t,64);this.handle=new ge("handle",n,this.handleMat),this.baseBar=new ge("baseBar",C,this.handleMat),this.topBar=new ge("topBar",C,l),this.barRadiusParam.on("valueChanged",()=>{C.radiusParam.value=this.barRadiusParam.getValue()}),this.handleRadiusParam.on("valueChanged",()=>{n.radiusParam.value=this.handleRadiusParam.getValue()}),this.lengthParam.on("valueChanged",()=>{this.__updateSlider(this.value)}),this.colorParam.on("valueChanged",()=>{this.handleMat.getParameter("BaseColor").value=this.colorParam.getValue()}),this.addChild(this.handle),this.addChild(this.baseBar),this.addChild(this.topBar),this.__updateSlider(0)}highlight(){super.highlight(),this.handleMat.getParameter("BaseColor").value=this.highlightColorParam.getValue()}unhighlight(){super.unhighlight(),this.handleMat.getParameter("BaseColor").value=this.colorParam.getValue()}setTargetParam(e){this.param=e;const g=()=>{this.__updateSlider(e.getValue())};g(),e.on("valueChanged",g)}__updateSlider(e){this.value=e;const g=this.param,t=g&&g.getRange()?g.getRange():[0,1],I=q.remap(e,t[0],t[1],0,1),l=this.lengthParam.getValue();this.baseBarXfo.sc.z=I*l,this.handleXfo.tr.z=I*l,this.topBarXfo.tr.z=I*l,this.topBarXfo.sc.z=(1-I)*l,this.handle.localXfoParam.value=this.handleXfo,this.baseBar.localXfoParam.value=this.baseBarXfo,this.topBar.localXfoParam.value=this.topBarXfo}onDragStart(e){this.handleXfo.sc.x=this.handleXfo.sc.y=this.handleXfo.sc.z=1.2,this.handle.localXfoParam.value=this.handleXfo,this.param&&(this.change=new _t(this.param),Ge.getInstance().addChange(this.change))}onDrag(e){const g=this.lengthParam.getValue(),t=this.param,I=t&&t.getRange()?t.getRange():[0,1],l=q.clamp(q.remap(this.value,0,g,I[0],I[1]),I[0],I[1]);if(!this.param){this.__updateSlider(l),this.value=l;return}this.change.update({value:l})}onDragEnd(e){this.change=null,this.handleXfo.sc.x=this.handleXfo.sc.y=this.handleXfo.sc.z=1,this.handle.localXfoParam.value=this.handleXfo}toJSON(e){const g=super.toJSON(e);return this.param&&(g.targetParam=this.param.getPath()),g}fromJSON(e,g){super.fromJSON(e,g),e.targetParam&&g.resolvePath(e.targetParam).then(t=>{this.setTargetParam(t)})}}S.register("SliderHandle",VB);class rB extends Ka{constructor(e,g=1,t=1,I=.02,l=new E(1,1,0)){super(e);this.handleXfo=new v,this.handleGeomOffsetXfo=new v,this.arcRadiusParam=new k("ArcRadius",g),this.arcAngleParam=new k("ArcAngle",t),this.handleRadiusParam=new k("HandleRadius",I),this.addParameter(this.arcRadiusParam),this.addParameter(this.arcAngleParam),this.addParameter(this.handleRadiusParam),this.colorParam.value=l,this.handleMat=new Ve("handleMat","HandleShader"),this.handleMat.getParameter("BaseColor").value=l;const C=new Ii(g,64,t),n=new Kt(I,64);this.handle=new ge("handle",n,this.handleMat),this.arc=new ge("arc",C,this.handleMat),this.handleGeomOffsetXfo.tr.x=g,this.handle.geomOffsetXfoParam.value=this.handleGeomOffsetXfo,this.range=[0,t],this.arcAngleParam.on("valueChanged",()=>{const F=this.arcAngleParam.getValue();C.angleParam.value=F,this.range=[0,F]}),this.arcRadiusParam.on("valueChanged",()=>{const F=this.arcRadiusParam.getValue();C.radiusParam.value=F,this.handleGeomOffsetXfo.tr.x=F,this.handle.geomOffsetXfoParam.value=this.handleGeomOffsetXfo}),this.handleRadiusParam.on("valueChanged",()=>{n.radiusParam.value=this.handleRadiusParam.getValue()}),this.colorParam.on("valueChanged",()=>{this.handleMat.getParameter("BaseColor").value=this.colorParam.getValue()}),this.addChild(this.handle),this.addChild(this.arc),this.setTargetParam(this.handle.globalXfoParam,!1)}onPointerEnter(e){e.intersectionData&&e.intersectionData.geomItem==this.handle&&this.highlight()}onPointerLeave(e){this.unhighlight()}onPointerDown(e){e.intersectionData&&e.intersectionData.geomItem==this.handle&&super.onPointerDown(e)}highlight(){super.highlight(),this.handleMat.getParameter("BaseColor").value=this.highlightColorParam.getValue()}unhighlight(){super.unhighlight(),this.handleMat.getParameter("BaseColor").value=this.colorParam.getValue()}setTargetParam(e,g=!0){if(this.param=e,g){if(this.param instanceof cg){const t=()=>{this.globalXfoParam.value=e.value};t(),e.on("valueChanged",t)}else if(this.param instanceof k){const t=()=>{this.handleXfo.ori.setFromAxisAndAngle(new b(0,0,1),e.getValue()),this.handle.globalXfoParam.value=this.handleXfo};t(),e.on("valueChanged",t)}}}getBaseXfo(){return this.handle.globalXfoParam.value}onDragStart(e){this.baseXfo=this.globalXfoParam.value.clone(),this.baseXfo.sc.set(1,1,1),this.deltaXfo=new v,this.vec0=this.globalXfoParam.value.ori.getXaxis(),this.vec0.normalizeInPlace(),this.change=new _t(this.param),Ge.getInstance().addChange(this.change),this.handleGeomOffsetXfo.sc.x=this.handleGeomOffsetXfo.sc.y=this.handleGeomOffsetXfo.sc.z=1.2,this.handle.geomOffsetXfoParam.value=this.handleGeomOffsetXfo,this.emit("dragStart")}onDrag(e){const g=this.holdPos.subtract(this.baseXfo.tr);g.normalizeInPlace();let t=this.vec0.angleTo(g);if(this.vec0.cross(g).dot(this.baseXfo.ori.getZaxis())<0&&(t=-t),this.range&&(t=q.clamp(t,this.range[0],this.range[1])),(e instanceof fg||e instanceof nt)&&e.shiftKey){const F=22.5*(Math.PI/180);t=Math.floor(t/F)*F}this.deltaXfo.ori.setFromAxisAndAngle(new b(0,0,1),t);const l=this.baseXfo.multiply(this.deltaXfo);this.change?this.param instanceof cg?this.change.update({value:l}):this.param instanceof k&&this.change.update({value:t}):this.param instanceof cg?this.param.value=l:this.param instanceof k&&(this.param.value=t)}onDragEnd(e){this.change=null,this.handleGeomOffsetXfo.sc.x=this.handleGeomOffsetXfo.sc.y=this.handleGeomOffsetXfo.sc.z=1,this.handle.geomOffsetXfoParam.value=this.handleGeomOffsetXfo,this.emit("dragEnd")}toJSON(e){const g=super.toJSON(e);return this.param&&(g.targetParam=this.param.getPath()),g}fromJSON(e,g){super.fromJSON(e,g),e.targetParam&&g.resolvePath(e.targetParam).then(t=>{this.setTargetParam(t)})}}S.register("ArcSlider",rB);const Rn=new Kt(.003,24,12,!1);class za extends H{constructor(e="Measure",g=new E("#F9CE03")){super(e);this.colorParam=this.addParameter(new Fg("Color",g)),this.markerMaterial=new ci("Marker"),this.markerMaterial.getParameter("BaseColor").value=new E(0,0,0),this.markerMaterial.getParameter("MaintainScreenSize").value=1,this.markerMaterial.getParameter("Overlay").value=.5,this.lineMaterial=new Lt("Line"),this.lineMaterial.baseColorParam.value=new E(0,0,0),this.lineMaterial.overlayParam.value=.5,this.markerA=new ge("markerA",Rn,this.markerMaterial),this.markerB=new ge("markerB",Rn,this.markerMaterial),this.addChild(this.markerA),this.addChild(this.markerB),this.colorParam.on("valueChanged",()=>{const t=this.colorParam.getValue();this.label.getParameter("BackgroundColor").value=t})}}const Wt=new sg;Wt.setNumVertices(2);Wt.setNumSegments(1);Wt.setSegmentVertexIndices(0,0,1);Wt.getVertexAttribute("positions").setValue(0,new b);Wt.getVertexAttribute("positions").setValue(1,new b(0,0,1));Wt.setBoundingBoxDirty();class RB extends za{constructor(e="MeasureDistance",g=new E("#F9CE03"),t="Meters"){super(e,g);this.lineGeomItem=null,this.sceneUnits=null,this.sceneUnits=t}updateMeasurement(){const e=this.markerA.globalXfoParam.value,t=this.markerB.globalXfoParam.value.tr.subtract(e.tr),I=t.length();if(I==0)return;const l=this.colorParam.getValue();let C=1;switch(this.sceneUnits){case"Millimeters":break;case"Meters":C=1e3;break}const n=I*C,F=`${parseFloat(n.toFixed(3))}mm`;this.label?this.label.getParameter("Text").value=F:(this.label=new Ui("Distance"),this.label.getParameter("FontSize").value=20,this.label.getParameter("BackgroundColor").value=l,this.label.getParameter("Text").value=F,this.billboard=new cI("DistanceBillboard",this.label),this.billboard.localXfoParam.value=new v,this.billboard.getParameter("PixelsPerMeter").value=1500,this.billboard.getParameter("AlignedToCamera").value=!0,this.billboard.getParameter("DrawOnTop").value=!0,this.billboard.getParameter("FixedSizeOnscreen").value=!0,this.billboard.getParameter("Alpha").value=1,this.addChild(this.billboard),this.lineMaterial=new Lt("Line"),this.lineMaterial.getParameter("BaseColor").value=new E(0,0,0),this.lineMaterial.getParameter("Overlay").value=.5,this.lineGeomItem=new ge("Line",Wt,this.lineMaterial),this.lineGeomItem.setSelectable(!1),this.addChild(this.lineGeomItem));const a=e.clone();a.ori.setFromDirectionAndUpvector(t,new b(t.z,t.x,t.y)),a.sc.z=I,this.lineGeomItem.globalXfoParam.value=a,t.normalizeInPlace();const U=e.tr.add(t.scale(I*.5)),d=new v(U);d.ori.setFromDirectionAndUpvector(t,new b(t.z,t.x,t.y)),this.billboard.globalXfoParam.value=d}setStartMarkerPos(e){const g=this.markerA.globalXfoParam.value;g.tr=e,this.markerA.globalXfoParam.value=g,this.label&&this.updateMeasurement()}setEndMarkerPos(e){const g=this.markerB.globalXfoParam.value;g.tr=e,this.markerB.globalXfoParam.value=g,this.updateMeasurement()}setGeomBuffersVisibility(e){this.markerA.setSelectable(!e),this.markerB.setSelectable(!e)}getMeasurementText(){return this.label.getParameter("Text").getValue()}}S.register("MeasureDistance",RB);const Bt=new sg;Bt.setNumVertices(2);Bt.setNumSegments(1);Bt.setSegmentVertexIndices(0,0,1);const _a=Bt.getVertexAttribute("positions");_a.setValue(0,new b);_a.setValue(1,new b(0,0,1));Bt.setBoundingBoxDirty();class hB extends za{constructor(e="MeasureAngle",g=new E("#F9CE03")){super(e,g)}createLinesAndLabel(){const e=this.markerA.globalXfoParam.value,g=this.markerB.globalXfoParam.value,t=e.ori.getZaxis(),I=g.ori.getZaxis(),l=t.cross(I).normalize(),C=l.cross(t).normalize(),n=l.cross(I).normalize(),F=new Ag(e.tr,C),a=new Ag(g.tr,n),U=F.intersectRayVector(a),d=t.angleTo(I),s=new ge("Line",Bt,this.lineMaterial),o=new ge("Line",Bt,this.lineMaterial);this.markerA.addChild(s,!1),this.markerB.addChild(o,!1),this.label=new Ui("Distance"),this.label.fontSizeParam.value=20,this.label.backgroundColorParam.value=this.colorParam.getValue(),this.label.textParam.value=`${(d/(Math.PI/180)).toFixed(3)} \xB0`,this.billboard=new cI("DistanceBillboard",this.label),this.billboard.localXfoParam.value=new v,this.billboard.pixelsPerMeterParam.value=1500,this.billboard.alignedToCameraParam.value=!0,this.billboard.drawOnTopParam.value=!0,this.billboard.fixedSizeOnscreenParam.value=!0,this.billboard.alphaParam.value=1,this.addChild(this.billboard),this.colorParam.on("valueChanged",()=>{const r=this.colorParam.getValue();this.markerMaterial.getParameter("BaseColor").value=r,this.lineMaterial.baseColorParam.value=r,this.label.backgroundColorParam.value=r});const A=new v;A.tr.addInPlace(F.pointAtDist(U[0])),A.tr.addInPlace(a.pointAtDist(U[1])),A.tr.scaleInPlace(.5),e.ori.setFromDirectionAndUpvector(C,t),this.markerA.globalXfoParam.value=e,g.ori.setFromDirectionAndUpvector(n,t),this.markerB.globalXfoParam.value=g;const B=new v;B.sc.z=U[0],s.localXfoParam.value=B;const Q=new v;Q.sc.z=U[1],o.localXfoParam.value=Q,this.billboard.globalXfoParam.value=A}setXfoA(e){this.markerA.globalXfoParam.value=e,this.markerB.globalXfoParam.value=e}getXfoA(){return this.markerA.globalXfoParam.value}setXfoB(e){this.markerB.globalXfoParam.value=e,this.createLinesAndLabel()}}S.register("MeasureAngle",hB);class cB extends Ng{constructor(e){super("MeasurementChange");e&&(this.measurement=e)}update(e){this.measurement.fromJSON(e.measurementData),this.emit("updated",e)}end(){this.measurement.setGeomBuffersVisibility(!0)}undo(){console.log("undo MeasurementChange"),this.parentItem=this.measurement.getOwner(),this.childIndex=this.parentItem.getChildIndex(this.measurement),this.parentItem.removeChild(this.childIndex)}redo(){console.log("redo MeasurementChange"),this.parentItem.insertChild(this.measurement,this.childIndex)}toJSON(e){const g=super.toJSON(e);return g.parentItemPath=this.measurement.getOwner().getPath(),g.measurementType=S.getClassName(Object.getPrototypeOf(this.measurement).constructor),g.measurementData=this.measurement.toJSON(e),g}fromJSON(e,g){const I=g.appData.scene.getRoot().resolvePath(e.parentItemPath,1);I&&(this.measurement=S.constructClass(e.measurementType),this.measurement.fromJSON(e.measurementData),I.addChild(this.measurement))}destroy(){}}Ge.registerChange("MeasurementChange",cB);ml?ml.registerLib($A):console.warn("The version of the Zea Engine that you're using doesn't support the libraries registry. Please upgrade to the latest Zea Engine version.");var Oa={exports:{}};(function(i){function e(t){var I=Math.floor,l=new Array(64),C=new Array(64),n=new Array(64),F=new Array(64),a,U,d,s,o=new Array(65535),A=new Array(65535),B=new Array(64),Q=new Array(64),r=[],R=0,V=7,h=new Array(64),m=new Array(64),Z=new Array(64),c=new Array(256),W=new Array(2048),u,J=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],N=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],X=[0,1,2,3,4,5,6,7,8,9,10,11],y=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],p=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],_=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],ae=[0,1,2,3,4,5,6,7,8,9,10,11],ne=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],K=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function te(G){for(var z=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],$=0;$<64;$++){var P=I((z[$]*G+50)/100);P<1?P=1:P>255&&(P=255),l[J[$]]=P}for(var Fe=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Re=0;Re<64;Re++){var fe=I((Fe[Re]*G+50)/100);fe<1?fe=1:fe>255&&(fe=255),C[J[Re]]=fe}for(var Ae=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],w=0,D=0;D<8;D++)for(var Y=0;Y<8;Y++)n[w]=1/(l[J[w]]*Ae[D]*Ae[Y]*8),F[w]=1/(C[J[w]]*Ae[D]*Ae[Y]*8),w++}function j(G,z){for(var $=0,P=0,Fe=new Array,Re=1;Re<=16;Re++){for(var fe=1;fe<=G[Re];fe++)Fe[z[P]]=[],Fe[z[P]][0]=$,Fe[z[P]][1]=Re,P++,$++;$*=2}return Fe}function se(){a=j(N,X),U=j(_,ae),d=j(y,p),s=j(ne,K)}function Ce(){for(var G=1,z=2,$=1;$<=15;$++){for(var P=G;P<z;P++)A[32767+P]=$,o[32767+P]=[],o[32767+P][1]=$,o[32767+P][0]=P;for(var Fe=-(z-1);Fe<=-G;Fe++)A[32767+Fe]=$,o[32767+Fe]=[],o[32767+Fe][1]=$,o[32767+Fe][0]=z-1+Fe;G<<=1,z<<=1}}function Qe(){for(var G=0;G<256;G++)W[G]=19595*G,W[G+256>>0]=38470*G,W[G+512>>0]=7471*G+32768,W[G+768>>0]=-11059*G,W[G+1024>>0]=-21709*G,W[G+1280>>0]=32768*G+8421375,W[G+1536>>0]=-27439*G,W[G+1792>>0]=-5329*G}function L(G){for(var z=G[0],$=G[1]-1;$>=0;)z&1<<$&&(R|=1<<V),$--,V--,V<0&&(R==255?(M(255),M(0)):M(R),V=7,R=0)}function M(G){r.push(G)}function Ie(G){M(G>>8&255),M(G&255)}function me(G,z){var $,P,Fe,Re,fe,Ae,w,D,Y=0,ce,he=8,pe=64;for(ce=0;ce<he;++ce){$=G[Y],P=G[Y+1],Fe=G[Y+2],Re=G[Y+3],fe=G[Y+4],Ae=G[Y+5],w=G[Y+6],D=G[Y+7];var O=$+D,Ue=$-D,Me=P+w,He=P-w,xe=Fe+Ae,Vg=Fe-Ae,jt=Re+fe,CC=Re-fe,et=O+jt,Jt=O-jt,gt=Me+xe,Gt=Me-xe;G[Y]=et+gt,G[Y+4]=et-gt;var qt=(Gt+Jt)*.707106781;G[Y+2]=Jt+qt,G[Y+6]=Jt-qt,et=CC+Vg,gt=Vg+He,Gt=He+Ue;var $t=(et-Gt)*.382683433,eI=.5411961*et+$t,gI=1.306562965*Gt+$t,pi=gt*.707106781,yi=Ue+pi,Xi=Ue-pi;G[Y+5]=Xi+eI,G[Y+3]=Xi-eI,G[Y+1]=yi+gI,G[Y+7]=yi-gI,Y+=8}for(Y=0,ce=0;ce<he;++ce){$=G[Y],P=G[Y+8],Fe=G[Y+16],Re=G[Y+24],fe=G[Y+32],Ae=G[Y+40],w=G[Y+48],D=G[Y+56];var ki=$+D,iC=$-D,fi=P+w,Ei=P-w,Ti=Fe+Ae,Yi=Fe-Ae,vi=Re+fe,MF=Re-fe,tI=ki+vi,nC=ki-vi,OI=fi+Ti,PI=fi-Ti;G[Y]=tI+OI,G[Y+32]=tI-OI;var Mi=(PI+nC)*.707106781;G[Y+16]=nC+Mi,G[Y+48]=nC-Mi,tI=MF+Yi,OI=Yi+Ei,PI=Ei+iC;var Hi=(tI-PI)*.382683433,xi=.5411961*tI+Hi,wi=1.306562965*PI+Hi,Di=OI*.707106781,Ki=iC+Di,Li=iC-Di;G[Y+40]=Li+xi,G[Y+24]=Li-xi,G[Y+8]=Ki+wi,G[Y+56]=Ki-wi,Y++}var jI;for(ce=0;ce<pe;++ce)jI=G[ce]*z[ce],B[ce]=jI>0?jI+.5|0:jI-.5|0;return B}function ke(){Ie(65504),Ie(16),M(74),M(70),M(73),M(70),M(0),M(1),M(1),M(0),Ie(1),Ie(1),M(0),M(0)}function oe(G){if(!!G){Ie(65505),G[0]===69&&G[1]===120&&G[2]===105&&G[3]===102?Ie(G.length+2):(Ie(G.length+5+2),M(69),M(120),M(105),M(102),M(0));for(var z=0;z<G.length;z++)M(G[z])}}function Ne(G,z){Ie(65472),Ie(17),M(8),Ie(z),Ie(G),M(3),M(1),M(17),M(0),M(2),M(17),M(1),M(3),M(17),M(1)}function We(){Ie(65499),Ie(132),M(0);for(var G=0;G<64;G++)M(l[G]);M(1);for(var z=0;z<64;z++)M(C[z])}function Ye(){Ie(65476),Ie(418),M(0);for(var G=0;G<16;G++)M(N[G+1]);for(var z=0;z<=11;z++)M(X[z]);M(16);for(var $=0;$<16;$++)M(y[$+1]);for(var P=0;P<=161;P++)M(p[P]);M(1);for(var Fe=0;Fe<16;Fe++)M(_[Fe+1]);for(var Re=0;Re<=11;Re++)M(ae[Re]);M(17);for(var fe=0;fe<16;fe++)M(ne[fe+1]);for(var Ae=0;Ae<=161;Ae++)M(K[Ae])}function re(){Ie(65498),Ie(12),M(3),M(1),M(0),M(2),M(17),M(3),M(17),M(0),M(63),M(0)}function x(G,z,$,P,Fe){for(var Re=Fe[0],fe=Fe[240],Ae,w=16,D=63,Y=64,ce=me(G,z),he=0;he<Y;++he)Q[J[he]]=ce[he];var pe=Q[0]-$;$=Q[0],pe==0?L(P[0]):(Ae=32767+pe,L(P[A[Ae]]),L(o[Ae]));for(var O=63;O>0&&Q[O]==0;O--);if(O==0)return L(Re),$;for(var Ue=1,Me;Ue<=O;){for(var He=Ue;Q[Ue]==0&&Ue<=O;++Ue);var xe=Ue-He;if(xe>=w){Me=xe>>4;for(var Vg=1;Vg<=Me;++Vg)L(fe);xe=xe&15}Ae=32767+Q[Ue],L(Fe[(xe<<4)+A[Ae]]),L(o[Ae]),Ue++}return O!=D&&L(Re),$}function T(){for(var G=String.fromCharCode,z=0;z<256;z++)c[z]=G(z)}this.encode=function(G,z){new Date().getTime(),z&&be(z),r=new Array,R=0,V=7,Ie(65496),ke(),oe(G.exifBuffer),We(),Ne(G.width,G.height),Ye(),re();var $=0,P=0,Fe=0;R=0,V=7,this.encode.displayName="_encode_";for(var Re=G.data,fe=G.width,Ae=G.height,w=fe*4,D,Y=0,ce,he,pe,O,Ue,Me,He,xe;Y<Ae;){for(D=0;D<w;){for(O=w*Y+D,Ue=O,Me=-1,He=0,xe=0;xe<64;xe++)He=xe>>3,Me=(xe&7)*4,Ue=O+He*w+Me,Y+He>=Ae&&(Ue-=w*(Y+1+He-Ae)),D+Me>=w&&(Ue-=D+Me-w+4),ce=Re[Ue++],he=Re[Ue++],pe=Re[Ue++],h[xe]=(W[ce]+W[he+256>>0]+W[pe+512>>0]>>16)-128,m[xe]=(W[ce+768>>0]+W[he+1024>>0]+W[pe+1280>>0]>>16)-128,Z[xe]=(W[ce+1280>>0]+W[he+1536>>0]+W[pe+1792>>0]>>16)-128;$=x(h,n,$,a,d),P=x(m,F,P,U,s),Fe=x(Z,F,Fe,U,s),D+=32}Y+=8}if(V>=0){var Vg=[];Vg[1]=V+1,Vg[0]=(1<<V+1)-1,L(Vg)}return Ie(65497),Buffer.from(r)};function be(G){if(G<=0&&(G=1),G>100&&(G=100),u!=G){var z=0;G<50?z=Math.floor(5e3/G):z=Math.floor(200-G*2),te(z),u=G}}function ie(){var G=new Date().getTime();t||(t=50),T(),se(),Ce(),Qe(),be(t),new Date().getTime()-G}ie()}i.exports=g;function g(t,I){typeof I=="undefined"&&(I=50);var l=new e(I),C=l.encode(t,I);return{data:C,width:t.width,height:t.height}}})(Oa);var Pa={exports:{}};(function(i){var e=function(){var I=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),l=4017,C=799,n=3406,F=2276,a=1567,U=3784,d=5793,s=2896;function o(){}function A(m,Z){for(var c=0,W=[],u,J,N=16;N>0&&!m[N-1];)N--;W.push({children:[],index:0});var X=W[0],y;for(u=0;u<N;u++){for(J=0;J<m[u];J++){for(X=W.pop(),X.children[X.index]=Z[c];X.index>0;){if(W.length===0)throw new Error("Could not recreate Huffman Table");X=W.pop()}for(X.index++,W.push(X);W.length<=u;)W.push(y={children:[],index:0}),X.children[X.index]=y.children,X=y;c++}u+1<N&&(W.push(y={children:[],index:0}),X.children[X.index]=y.children,X=y)}return W[0].children}function B(m,Z,c,W,u,J,N,X,y,p){c.precision,c.samplesPerLine,c.scanLines;var _=c.mcusPerLine,ae=c.progressive;c.maxH,c.maxV;var ne=Z,K=0,te=0;function j(){if(te>0)return te--,K>>te&1;if(K=m[Z++],K==255){var w=m[Z++];if(w)throw new Error("unexpected marker: "+(K<<8|w).toString(16))}return te=7,K>>>7}function se(w){for(var D=w,Y;(Y=j())!==null;){if(D=D[Y],typeof D=="number")return D;if(typeof D!="object")throw new Error("invalid huffman sequence")}return null}function Ce(w){for(var D=0;w>0;){var Y=j();if(Y===null)return;D=D<<1|Y,w--}return D}function Qe(w){var D=Ce(w);return D>=1<<w-1?D:D+(-1<<w)+1}function L(w,D){var Y=se(w.huffmanTableDC),ce=Y===0?0:Qe(Y);D[0]=w.pred+=ce;for(var he=1;he<64;){var pe=se(w.huffmanTableAC),O=pe&15,Ue=pe>>4;if(O===0){if(Ue<15)break;he+=16;continue}he+=Ue;var Me=I[he];D[Me]=Qe(O),he++}}function M(w,D){var Y=se(w.huffmanTableDC),ce=Y===0?0:Qe(Y)<<y;D[0]=w.pred+=ce}function Ie(w,D){D[0]|=j()<<y}var me=0;function ke(w,D){if(me>0){me--;return}for(var Y=J,ce=N;Y<=ce;){var he=se(w.huffmanTableAC),pe=he&15,O=he>>4;if(pe===0){if(O<15){me=Ce(O)+(1<<O)-1;break}Y+=16;continue}Y+=O;var Ue=I[Y];D[Ue]=Qe(pe)*(1<<y),Y++}}var oe=0,Ne;function We(w,D){for(var Y=J,ce=N,he=0;Y<=ce;){var pe=I[Y],O=D[pe]<0?-1:1;switch(oe){case 0:var Ue=se(w.huffmanTableAC),Me=Ue&15,he=Ue>>4;if(Me===0)he<15?(me=Ce(he)+(1<<he),oe=4):(he=16,oe=1);else{if(Me!==1)throw new Error("invalid ACn encoding");Ne=Qe(Me),oe=he?2:3}continue;case 1:case 2:D[pe]?D[pe]+=(j()<<y)*O:(he--,he===0&&(oe=oe==2?3:0));break;case 3:D[pe]?D[pe]+=(j()<<y)*O:(D[pe]=Ne<<y,oe=0);break;case 4:D[pe]&&(D[pe]+=(j()<<y)*O);break}Y++}oe===4&&(me--,me===0&&(oe=0))}function Ye(w,D,Y,ce,he){var pe=Y/_|0,O=Y%_,Ue=pe*w.v+ce,Me=O*w.h+he;w.blocks[Ue]===void 0&&p.tolerantDecoding||D(w,w.blocks[Ue][Me])}function re(w,D,Y){var ce=Y/w.blocksPerLine|0,he=Y%w.blocksPerLine;w.blocks[ce]===void 0&&p.tolerantDecoding||D(w,w.blocks[ce][he])}var x=W.length,T,be,ie,G,z,$;ae?J===0?$=X===0?M:Ie:$=X===0?ke:We:$=L;var P=0,Fe,Re;x==1?Re=W[0].blocksPerLine*W[0].blocksPerColumn:Re=_*c.mcusPerColumn,u||(u=Re);for(var fe,Ae;P<Re;){for(be=0;be<x;be++)W[be].pred=0;if(me=0,x==1)for(T=W[0],z=0;z<u;z++)re(T,$,P),P++;else for(z=0;z<u;z++){for(be=0;be<x;be++)for(T=W[be],fe=T.h,Ae=T.v,ie=0;ie<Ae;ie++)for(G=0;G<fe;G++)Ye(T,$,P,ie,G);if(P++,P===Re)break}if(P===Re)do{if(m[Z]===255&&m[Z+1]!==0)break;Z+=1}while(Z<m.length-2);if(te=0,Fe=m[Z]<<8|m[Z+1],Fe<65280)throw new Error("marker was not found");if(Fe>=65488&&Fe<=65495)Z+=2;else break}return Z-ne}function Q(m,Z){var c=[],W=Z.blocksPerLine,u=Z.blocksPerColumn,J=W<<3,N=new Int32Array(64),X=new Uint8Array(64);function y(Ce,Qe,L){var M=Z.quantizationTable,Ie,me,ke,oe,Ne,We,Ye,re,x,T=L,be;for(be=0;be<64;be++)T[be]=Ce[be]*M[be];for(be=0;be<8;++be){var ie=8*be;if(T[1+ie]==0&&T[2+ie]==0&&T[3+ie]==0&&T[4+ie]==0&&T[5+ie]==0&&T[6+ie]==0&&T[7+ie]==0){x=d*T[0+ie]+512>>10,T[0+ie]=x,T[1+ie]=x,T[2+ie]=x,T[3+ie]=x,T[4+ie]=x,T[5+ie]=x,T[6+ie]=x,T[7+ie]=x;continue}Ie=d*T[0+ie]+128>>8,me=d*T[4+ie]+128>>8,ke=T[2+ie],oe=T[6+ie],Ne=s*(T[1+ie]-T[7+ie])+128>>8,re=s*(T[1+ie]+T[7+ie])+128>>8,We=T[3+ie]<<4,Ye=T[5+ie]<<4,x=Ie-me+1>>1,Ie=Ie+me+1>>1,me=x,x=ke*U+oe*a+128>>8,ke=ke*a-oe*U+128>>8,oe=x,x=Ne-Ye+1>>1,Ne=Ne+Ye+1>>1,Ye=x,x=re+We+1>>1,We=re-We+1>>1,re=x,x=Ie-oe+1>>1,Ie=Ie+oe+1>>1,oe=x,x=me-ke+1>>1,me=me+ke+1>>1,ke=x,x=Ne*F+re*n+2048>>12,Ne=Ne*n-re*F+2048>>12,re=x,x=We*C+Ye*l+2048>>12,We=We*l-Ye*C+2048>>12,Ye=x,T[0+ie]=Ie+re,T[7+ie]=Ie-re,T[1+ie]=me+Ye,T[6+ie]=me-Ye,T[2+ie]=ke+We,T[5+ie]=ke-We,T[3+ie]=oe+Ne,T[4+ie]=oe-Ne}for(be=0;be<8;++be){var G=be;if(T[8+G]==0&&T[16+G]==0&&T[24+G]==0&&T[32+G]==0&&T[40+G]==0&&T[48+G]==0&&T[56+G]==0){x=d*L[be+0]+8192>>14,T[0+G]=x,T[8+G]=x,T[16+G]=x,T[24+G]=x,T[32+G]=x,T[40+G]=x,T[48+G]=x,T[56+G]=x;continue}Ie=d*T[0+G]+2048>>12,me=d*T[32+G]+2048>>12,ke=T[16+G],oe=T[48+G],Ne=s*(T[8+G]-T[56+G])+2048>>12,re=s*(T[8+G]+T[56+G])+2048>>12,We=T[24+G],Ye=T[40+G],x=Ie-me+1>>1,Ie=Ie+me+1>>1,me=x,x=ke*U+oe*a+2048>>12,ke=ke*a-oe*U+2048>>12,oe=x,x=Ne-Ye+1>>1,Ne=Ne+Ye+1>>1,Ye=x,x=re+We+1>>1,We=re-We+1>>1,re=x,x=Ie-oe+1>>1,Ie=Ie+oe+1>>1,oe=x,x=me-ke+1>>1,me=me+ke+1>>1,ke=x,x=Ne*F+re*n+2048>>12,Ne=Ne*n-re*F+2048>>12,re=x,x=We*C+Ye*l+2048>>12,We=We*l-Ye*C+2048>>12,Ye=x,T[0+G]=Ie+re,T[56+G]=Ie-re,T[8+G]=me+Ye,T[48+G]=me-Ye,T[16+G]=ke+We,T[40+G]=ke-We,T[24+G]=oe+Ne,T[32+G]=oe-Ne}for(be=0;be<64;++be){var z=128+(T[be]+8>>4);Qe[be]=z<0?0:z>255?255:z}}h(J*u*8);for(var p,_,ae=0;ae<u;ae++){var ne=ae<<3;for(p=0;p<8;p++)c.push(new Uint8Array(J));for(var K=0;K<W;K++){y(Z.blocks[ae][K],X,N);var te=0,j=K<<3;for(_=0;_<8;_++){var se=c[ne+_];for(p=0;p<8;p++)se[j+p]=X[te++]}}}return c}function r(m){return m<0?0:m>255?255:m}o.prototype={load:function(Z){var c=new XMLHttpRequest;c.open("GET",Z,!0),c.responseType="arraybuffer",c.onload=function(){var W=new Uint8Array(c.response||c.mozResponseArrayBuffer);this.parse(W),this.onload&&this.onload()}.bind(this),c.send(null)},parse:function(Z){var c=this.opts.maxResolutionInMP*1e3*1e3,W=0;Z.length;function u(){var O=Z[W]<<8|Z[W+1];return W+=2,O}function J(){var O=u(),Ue=Z.subarray(W,W+O-2);return W+=Ue.length,Ue}function N(O){var Ue=0,Me=0,He,xe;for(xe in O.components)O.components.hasOwnProperty(xe)&&(He=O.components[xe],Ue<He.h&&(Ue=He.h),Me<He.v&&(Me=He.v));var Vg=Math.ceil(O.samplesPerLine/8/Ue),jt=Math.ceil(O.scanLines/8/Me);for(xe in O.components)if(O.components.hasOwnProperty(xe)){He=O.components[xe];var CC=Math.ceil(Math.ceil(O.samplesPerLine/8)*He.h/Ue),et=Math.ceil(Math.ceil(O.scanLines/8)*He.v/Me),Jt=Vg*He.h,gt=jt*He.v,Gt=gt*Jt,qt=[];h(Gt*256);for(var $t=0;$t<gt;$t++){for(var eI=[],gI=0;gI<Jt;gI++)eI.push(new Int32Array(64));qt.push(eI)}He.blocksPerLine=CC,He.blocksPerColumn=et,He.blocks=qt}O.maxH=Ue,O.maxV=Me,O.mcusPerLine=Vg,O.mcusPerColumn=jt}var X=null,y=null,p,_,ae=[],ne=[],K=[],te=[],j=u(),se=-1;if(this.comments=[],j!=65496)throw new Error("SOI not found");for(j=u();j!=65497;){var Ce,Qe;switch(j){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var L=J();if(j===65534){var M=String.fromCharCode.apply(null,L);this.comments.push(M)}j===65504&&L[0]===74&&L[1]===70&&L[2]===73&&L[3]===70&&L[4]===0&&(X={version:{major:L[5],minor:L[6]},densityUnits:L[7],xDensity:L[8]<<8|L[9],yDensity:L[10]<<8|L[11],thumbWidth:L[12],thumbHeight:L[13],thumbData:L.subarray(14,14+3*L[12]*L[13])}),j===65505&&L[0]===69&&L[1]===120&&L[2]===105&&L[3]===102&&L[4]===0&&(this.exifBuffer=L.subarray(5,L.length)),j===65518&&L[0]===65&&L[1]===100&&L[2]===111&&L[3]===98&&L[4]===101&&L[5]===0&&(y={version:L[6],flags0:L[7]<<8|L[8],flags1:L[9]<<8|L[10],transformCode:L[11]});break;case 65499:for(var Ie=u(),me=Ie+W-2;W<me;){var ke=Z[W++];h(256);var oe=new Int32Array(64);if(ke>>4===0)for(Qe=0;Qe<64;Qe++){var Ne=I[Qe];oe[Ne]=Z[W++]}else if(ke>>4===1)for(Qe=0;Qe<64;Qe++){var Ne=I[Qe];oe[Ne]=u()}else throw new Error("DQT: invalid table spec");ae[ke&15]=oe}break;case 65472:case 65473:case 65474:u(),p={},p.extended=j===65473,p.progressive=j===65474,p.precision=Z[W++],p.scanLines=u(),p.samplesPerLine=u(),p.components={},p.componentsOrder=[];var We=p.scanLines*p.samplesPerLine;if(We>c){var Ye=Math.ceil((We-c)/1e6);throw new Error(`maxResolutionInMP limit exceeded by ${Ye}MP`)}var re=Z[W++],x;for(Ce=0;Ce<re;Ce++){x=Z[W];var T=Z[W+1]>>4,be=Z[W+1]&15,ie=Z[W+2];p.componentsOrder.push(x),p.components[x]={h:T,v:be,quantizationIdx:ie},W+=3}N(p),ne.push(p);break;case 65476:var G=u();for(Ce=2;Ce<G;){var z=Z[W++],$=new Uint8Array(16),P=0;for(Qe=0;Qe<16;Qe++,W++)P+=$[Qe]=Z[W];h(16+P);var Fe=new Uint8Array(P);for(Qe=0;Qe<P;Qe++,W++)Fe[Qe]=Z[W];Ce+=17+P,(z>>4===0?te:K)[z&15]=A($,Fe)}break;case 65501:u(),_=u();break;case 65500:u(),u();break;case 65498:u();var Re=Z[W++],fe=[],Ae;for(Ce=0;Ce<Re;Ce++){Ae=p.components[Z[W++]];var w=Z[W++];Ae.huffmanTableDC=te[w>>4],Ae.huffmanTableAC=K[w&15],fe.push(Ae)}var D=Z[W++],Y=Z[W++],ce=Z[W++],he=B(Z,W,p,fe,_,D,Y,ce>>4,ce&15,this.opts);W+=he;break;case 65535:Z[W]!==255&&W--;break;default:if(Z[W-3]==255&&Z[W-2]>=192&&Z[W-2]<=254){W-=3;break}else if(j===224||j==225){if(se!==-1)throw new Error(`first unknown JPEG marker at offset ${se.toString(16)}, second unknown JPEG marker ${j.toString(16)} at offset ${(W-1).toString(16)}`);se=W-1;const O=u();if(Z[W+O-2]===255){W+=O-2;break}}throw new Error("unknown JPEG marker "+j.toString(16))}j=u()}if(ne.length!=1)throw new Error("only single frame JPEGs supported");for(var Ce=0;Ce<ne.length;Ce++){var pe=ne[Ce].components;for(var Qe in pe)pe[Qe].quantizationTable=ae[pe[Qe].quantizationIdx],delete pe[Qe].quantizationIdx}this.width=p.samplesPerLine,this.height=p.scanLines,this.jfif=X,this.adobe=y,this.components=[];for(var Ce=0;Ce<p.componentsOrder.length;Ce++){var Ae=p.components[p.componentsOrder[Ce]];this.components.push({lines:Q(p,Ae),scaleX:Ae.h/p.maxH,scaleY:Ae.v/p.maxV})}},getData:function(Z,c){var W=this.width/Z,u=this.height/c,J,N,X,y,p,_,ae,ne,K,te,j=0,se,Ce,Qe,L,M,Ie,me,ke,oe,Ne,We,Ye=Z*c*this.components.length;h(Ye);var re=new Uint8Array(Ye);switch(this.components.length){case 1:for(J=this.components[0],te=0;te<c;te++)for(p=J.lines[0|te*J.scaleY*u],K=0;K<Z;K++)se=p[0|K*J.scaleX*W],re[j++]=se;break;case 2:for(J=this.components[0],N=this.components[1],te=0;te<c;te++)for(p=J.lines[0|te*J.scaleY*u],_=N.lines[0|te*N.scaleY*u],K=0;K<Z;K++)se=p[0|K*J.scaleX*W],re[j++]=se,se=_[0|K*N.scaleX*W],re[j++]=se;break;case 3:for(We=!0,this.adobe&&this.adobe.transformCode?We=!0:typeof this.opts.colorTransform!="undefined"&&(We=!!this.opts.colorTransform),J=this.components[0],N=this.components[1],X=this.components[2],te=0;te<c;te++)for(p=J.lines[0|te*J.scaleY*u],_=N.lines[0|te*N.scaleY*u],ae=X.lines[0|te*X.scaleY*u],K=0;K<Z;K++)We?(se=p[0|K*J.scaleX*W],Ce=_[0|K*N.scaleX*W],Qe=ae[0|K*X.scaleX*W],ke=r(se+1.402*(Qe-128)),oe=r(se-.3441363*(Ce-128)-.71413636*(Qe-128)),Ne=r(se+1.772*(Ce-128))):(ke=p[0|K*J.scaleX*W],oe=_[0|K*N.scaleX*W],Ne=ae[0|K*X.scaleX*W]),re[j++]=ke,re[j++]=oe,re[j++]=Ne;break;case 4:if(!this.adobe)throw new Error("Unsupported color mode (4 components)");for(We=!1,this.adobe&&this.adobe.transformCode?We=!0:typeof this.opts.colorTransform!="undefined"&&(We=!!this.opts.colorTransform),J=this.components[0],N=this.components[1],X=this.components[2],y=this.components[3],te=0;te<c;te++)for(p=J.lines[0|te*J.scaleY*u],_=N.lines[0|te*N.scaleY*u],ae=X.lines[0|te*X.scaleY*u],ne=y.lines[0|te*y.scaleY*u],K=0;K<Z;K++)We?(se=p[0|K*J.scaleX*W],Ce=_[0|K*N.scaleX*W],Qe=ae[0|K*X.scaleX*W],L=ne[0|K*y.scaleX*W],M=255-r(se+1.402*(Qe-128)),Ie=255-r(se-.3441363*(Ce-128)-.71413636*(Qe-128)),me=255-r(se+1.772*(Ce-128))):(M=p[0|K*J.scaleX*W],Ie=_[0|K*N.scaleX*W],me=ae[0|K*X.scaleX*W],L=ne[0|K*y.scaleX*W]),re[j++]=255-M,re[j++]=255-Ie,re[j++]=255-me,re[j++]=255-L;break;default:throw new Error("Unsupported color mode")}return re},copyToImageData:function(Z,c){var W=Z.width,u=Z.height,J=Z.data,N=this.getData(W,u),X=0,y=0,p,_,ae,ne,K,te,j,se,Ce;switch(this.components.length){case 1:for(_=0;_<u;_++)for(p=0;p<W;p++)ae=N[X++],J[y++]=ae,J[y++]=ae,J[y++]=ae,c&&(J[y++]=255);break;case 3:for(_=0;_<u;_++)for(p=0;p<W;p++)j=N[X++],se=N[X++],Ce=N[X++],J[y++]=j,J[y++]=se,J[y++]=Ce,c&&(J[y++]=255);break;case 4:for(_=0;_<u;_++)for(p=0;p<W;p++)K=N[X++],te=N[X++],ae=N[X++],ne=N[X++],j=255-r(K*(1-ne/255)+ne),se=255-r(te*(1-ne/255)+ne),Ce=255-r(ae*(1-ne/255)+ne),J[y++]=j,J[y++]=se,J[y++]=Ce,c&&(J[y++]=255);break;default:throw new Error("Unsupported color mode")}}};var R=0,V=0;function h(m=0){var Z=R+m;if(Z>V){var c=Math.ceil((Z-V)/1024/1024);throw new Error(`maxMemoryUsageInMB limit exceeded by at least ${c}MB`)}R=Z}return o.resetMaxMemoryUsage=function(m){R=0,V=m},o.getBytesAllocated=function(){return R},o.requestMemoryAllocation=h,o}();i.exports=g;function g(t,I={}){var l={colorTransform:void 0,useTArray:!1,formatAsRGBA:!0,tolerantDecoding:!0,maxResolutionInMP:100,maxMemoryUsageInMB:512},C=FC(FC({},l),I),n=new Uint8Array(t),F=new e;F.opts=C,e.resetMaxMemoryUsage(C.maxMemoryUsageInMB*1024*1024),F.parse(n);var a=C.formatAsRGBA?4:3,U=F.width*F.height*a;try{e.requestMemoryAllocation(U);var d={width:F.width,height:F.height,exifBuffer:F.exifBuffer,data:C.useTArray?new Uint8Array(U):Buffer.alloc(U)};F.comments.length>0&&(d.comments=F.comments)}catch(s){throw s instanceof RangeError?new Error("Could not allocate enough memory for the image. Required: "+U):s}return F.copyToImageData(d,C.formatAsRGBA),d}})(Pa);var ZB=Oa.exports,mB=Pa.exports,WB={encode:ZB,decode:mB};(function(i){if(i.TextEncoder&&i.TextDecoder)return!1;function e(t="utf-8"){if(t!=="utf-8")throw new RangeError(`Failed to construct 'TextEncoder': The encoding label provided ('${t}') is invalid.`)}Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),e.prototype.encode=function(t,I={stream:!1}){if(I.stream)throw new Error("Failed to encode: the 'stream' option is unsupported.");let l=0;const C=t.length;let n=0,F=Math.max(32,C+(C>>1)+7),a=new Uint8Array(F>>3<<3);for(;l<C;){let U=t.charCodeAt(l++);if(U>=55296&&U<=56319){if(l<C){const d=t.charCodeAt(l);(d&64512)===56320&&(++l,U=((U&1023)<<10)+(d&1023)+65536)}if(U>=55296&&U<=56319)continue}if(n+4>a.length){F+=8,F*=1+l/t.length*2,F=F>>3<<3;const d=new Uint8Array(F);d.set(a),a=d}if((U&4294967168)===0){a[n++]=U;continue}else if((U&4294965248)===0)a[n++]=U>>6&31|192;else if((U&4294901760)===0)a[n++]=U>>12&15|224,a[n++]=U>>6&63|128;else if((U&4292870144)===0)a[n++]=U>>18&7|240,a[n++]=U>>12&63|128,a[n++]=U>>6&63|128;else continue;a[n++]=U&63|128}return a.slice(0,n)};function g(t="utf-8",I={fatal:!1}){if(t!=="utf-8")throw new RangeError(`Failed to construct 'TextDecoder': The encoding label provided ('${t}') is invalid.`);if(I.fatal)throw new Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}Object.defineProperty(g.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(g.prototype,"fatal",{value:!1}),Object.defineProperty(g.prototype,"ignoreBOM",{value:!1}),g.prototype.decode=function(t,I={stream:!1}){if(I.stream)throw new Error("Failed to decode: the 'stream' option is unsupported.");const l=new Uint8Array(t);let C=0;const n=l.length,F=[];for(;C<n;){const a=l[C++];if(a===0)break;if((a&128)===0)F.push(a);else if((a&224)===192){const U=l[C++]&63;F.push((a&31)<<6|U)}else if((a&240)===224){const U=l[C++]&63,d=l[C++]&63;F.push((a&31)<<12|U<<6|d)}else if((a&248)===240){const U=l[C++]&63,d=l[C++]&63,s=l[C++]&63;let o=(a&7)<<18|U<<12|d<<6|s;o>65535&&(o-=65536,F.push(o>>>10&1023|55296),o=56320|o&1023),F.push(o)}}return String.fromCharCode.apply(null,F)},i.TextEncoder=e,i.TextDecoder=g})(typeof window!="undefined"?window:typeof self!="undefined"?self:globalThis);const bB=new TextDecoder("utf-8");function JB(i){return bB.decode(i)}const GB=new TextEncoder;function uB(i){return GB.encode(i)}const SB=1024*8;class mi{constructor(e=SB,g={}){let t=!1;typeof e=="number"?e=new ArrayBuffer(e):(t=!0,this.lastWrittenByte=e.byteLength);const I=g.offset?g.offset>>>0:0,l=e.byteLength-I;let C=I;(ArrayBuffer.isView(e)||e instanceof mi)&&(e.byteLength!==e.buffer.byteLength&&(C=e.byteOffset+I),e=e.buffer),t?this.lastWrittenByte=l:this.lastWrittenByte=0,this.buffer=e,this.length=l,this.byteLength=l,this.byteOffset=C,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,C,l),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const t=(this.offset+e)*2,I=new Uint8Array(t);I.set(new Uint8Array(this.buffer)),this.buffer=I.buffer,this.length=this.byteLength=t,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){const g=new Uint8Array(e);for(let t=0;t<e;t++)g[t]=this.readByte();return g}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let g="";for(let t=0;t<e;t++)g+=this.readChar();return g}readUtf8(e=1){return JB(this.readBytes(e))}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let g=0;g<e.length;g++)this._data.setUint8(this.offset++,e[g]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let g=0;g<e.length;g++)this.writeUint8(e.charCodeAt(g));return this}writeUtf8(e){return this.writeBytes(uB(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}/*! pako 2.0.4 https://github.com/nodeca/pako @license (MIT AND Zlib) */const NB=4,hn=0,cn=1,pB=2;function Ot(i){let e=i.length;for(;--e>=0;)i[e]=0}const yB=0,ja=1,XB=2,kB=3,fB=258,Wi=29,KI=256,WI=KI+1+Wi,Tt=30,bi=19,qa=2*WI+1,Ft=15,RC=16,EB=7,Ji=256,$a=16,eF=17,gF=18,HC=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),Al=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),TB=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),tF=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),YB=512,Xg=new Array((WI+2)*2);Ot(Xg);const sI=new Array(Tt*2);Ot(sI);const bI=new Array(YB);Ot(bI);const JI=new Array(fB-kB+1);Ot(JI);const Gi=new Array(Wi);Ot(Gi);const Wl=new Array(Tt);Ot(Wl);function hC(i,e,g,t,I){this.static_tree=i,this.extra_bits=e,this.extra_base=g,this.elems=t,this.max_length=I,this.has_stree=i&&i.length}let IF,lF,CF;function cC(i,e){this.dyn_tree=i,this.max_code=0,this.stat_desc=e}const iF=i=>i<256?bI[i]:bI[256+(i>>>7)],GI=(i,e)=>{i.pending_buf[i.pending++]=e&255,i.pending_buf[i.pending++]=e>>>8&255},Ug=(i,e,g)=>{i.bi_valid>RC-g?(i.bi_buf|=e<<i.bi_valid&65535,GI(i,i.bi_buf),i.bi_buf=e>>RC-i.bi_valid,i.bi_valid+=g-RC):(i.bi_buf|=e<<i.bi_valid&65535,i.bi_valid+=g)},bg=(i,e,g)=>{Ug(i,g[e*2],g[e*2+1])},nF=(i,e)=>{let g=0;do g|=i&1,i>>>=1,g<<=1;while(--e>0);return g>>>1},vB=i=>{i.bi_valid===16?(GI(i,i.bi_buf),i.bi_buf=0,i.bi_valid=0):i.bi_valid>=8&&(i.pending_buf[i.pending++]=i.bi_buf&255,i.bi_buf>>=8,i.bi_valid-=8)},MB=(i,e)=>{const g=e.dyn_tree,t=e.max_code,I=e.stat_desc.static_tree,l=e.stat_desc.has_stree,C=e.stat_desc.extra_bits,n=e.stat_desc.extra_base,F=e.stat_desc.max_length;let a,U,d,s,o,A,B=0;for(s=0;s<=Ft;s++)i.bl_count[s]=0;for(g[i.heap[i.heap_max]*2+1]=0,a=i.heap_max+1;a<qa;a++)U=i.heap[a],s=g[g[U*2+1]*2+1]+1,s>F&&(s=F,B++),g[U*2+1]=s,!(U>t)&&(i.bl_count[s]++,o=0,U>=n&&(o=C[U-n]),A=g[U*2],i.opt_len+=A*(s+o),l&&(i.static_len+=A*(I[U*2+1]+o)));if(B!==0){do{for(s=F-1;i.bl_count[s]===0;)s--;i.bl_count[s]--,i.bl_count[s+1]+=2,i.bl_count[F]--,B-=2}while(B>0);for(s=F;s!==0;s--)for(U=i.bl_count[s];U!==0;)d=i.heap[--a],!(d>t)&&(g[d*2+1]!==s&&(i.opt_len+=(s-g[d*2+1])*g[d*2],g[d*2+1]=s),U--)}},aF=(i,e,g)=>{const t=new Array(Ft+1);let I=0,l,C;for(l=1;l<=Ft;l++)t[l]=I=I+g[l-1]<<1;for(C=0;C<=e;C++){let n=i[C*2+1];n!==0&&(i[C*2]=nF(t[n]++,n))}},HB=()=>{let i,e,g,t,I;const l=new Array(Ft+1);for(g=0,t=0;t<Wi-1;t++)for(Gi[t]=g,i=0;i<1<<HC[t];i++)JI[g++]=t;for(JI[g-1]=t,I=0,t=0;t<16;t++)for(Wl[t]=I,i=0;i<1<<Al[t];i++)bI[I++]=t;for(I>>=7;t<Tt;t++)for(Wl[t]=I<<7,i=0;i<1<<Al[t]-7;i++)bI[256+I++]=t;for(e=0;e<=Ft;e++)l[e]=0;for(i=0;i<=143;)Xg[i*2+1]=8,i++,l[8]++;for(;i<=255;)Xg[i*2+1]=9,i++,l[9]++;for(;i<=279;)Xg[i*2+1]=7,i++,l[7]++;for(;i<=287;)Xg[i*2+1]=8,i++,l[8]++;for(aF(Xg,WI+1,l),i=0;i<Tt;i++)sI[i*2+1]=5,sI[i*2]=nF(i,5);IF=new hC(Xg,HC,KI+1,WI,Ft),lF=new hC(sI,Al,0,Tt,Ft),CF=new hC(new Array(0),TB,0,bi,EB)},FF=i=>{let e;for(e=0;e<WI;e++)i.dyn_ltree[e*2]=0;for(e=0;e<Tt;e++)i.dyn_dtree[e*2]=0;for(e=0;e<bi;e++)i.bl_tree[e*2]=0;i.dyn_ltree[Ji*2]=1,i.opt_len=i.static_len=0,i.last_lit=i.matches=0},UF=i=>{i.bi_valid>8?GI(i,i.bi_buf):i.bi_valid>0&&(i.pending_buf[i.pending++]=i.bi_buf),i.bi_buf=0,i.bi_valid=0},xB=(i,e,g,t)=>{UF(i),t&&(GI(i,g),GI(i,~g)),i.pending_buf.set(i.window.subarray(e,e+g),i.pending),i.pending+=g},Zn=(i,e,g,t)=>{const I=e*2,l=g*2;return i[I]<i[l]||i[I]===i[l]&&t[e]<=t[g]},ZC=(i,e,g)=>{const t=i.heap[g];let I=g<<1;for(;I<=i.heap_len&&(I<i.heap_len&&Zn(e,i.heap[I+1],i.heap[I],i.depth)&&I++,!Zn(e,t,i.heap[I],i.depth));)i.heap[g]=i.heap[I],g=I,I<<=1;i.heap[g]=t},mn=(i,e,g)=>{let t,I,l=0,C,n;if(i.last_lit!==0)do t=i.pending_buf[i.d_buf+l*2]<<8|i.pending_buf[i.d_buf+l*2+1],I=i.pending_buf[i.l_buf+l],l++,t===0?bg(i,I,e):(C=JI[I],bg(i,C+KI+1,e),n=HC[C],n!==0&&(I-=Gi[C],Ug(i,I,n)),t--,C=iF(t),bg(i,C,g),n=Al[C],n!==0&&(t-=Wl[C],Ug(i,t,n)));while(l<i.last_lit);bg(i,Ji,e)},xC=(i,e)=>{const g=e.dyn_tree,t=e.stat_desc.static_tree,I=e.stat_desc.has_stree,l=e.stat_desc.elems;let C,n,F=-1,a;for(i.heap_len=0,i.heap_max=qa,C=0;C<l;C++)g[C*2]!==0?(i.heap[++i.heap_len]=F=C,i.depth[C]=0):g[C*2+1]=0;for(;i.heap_len<2;)a=i.heap[++i.heap_len]=F<2?++F:0,g[a*2]=1,i.depth[a]=0,i.opt_len--,I&&(i.static_len-=t[a*2+1]);for(e.max_code=F,C=i.heap_len>>1;C>=1;C--)ZC(i,g,C);a=l;do C=i.heap[1],i.heap[1]=i.heap[i.heap_len--],ZC(i,g,1),n=i.heap[1],i.heap[--i.heap_max]=C,i.heap[--i.heap_max]=n,g[a*2]=g[C*2]+g[n*2],i.depth[a]=(i.depth[C]>=i.depth[n]?i.depth[C]:i.depth[n])+1,g[C*2+1]=g[n*2+1]=a,i.heap[1]=a++,ZC(i,g,1);while(i.heap_len>=2);i.heap[--i.heap_max]=i.heap[1],MB(i,e),aF(g,F,i.bl_count)},Wn=(i,e,g)=>{let t,I=-1,l,C=e[0*2+1],n=0,F=7,a=4;for(C===0&&(F=138,a=3),e[(g+1)*2+1]=65535,t=0;t<=g;t++)l=C,C=e[(t+1)*2+1],!(++n<F&&l===C)&&(n<a?i.bl_tree[l*2]+=n:l!==0?(l!==I&&i.bl_tree[l*2]++,i.bl_tree[$a*2]++):n<=10?i.bl_tree[eF*2]++:i.bl_tree[gF*2]++,n=0,I=l,C===0?(F=138,a=3):l===C?(F=6,a=3):(F=7,a=4))},bn=(i,e,g)=>{let t,I=-1,l,C=e[0*2+1],n=0,F=7,a=4;for(C===0&&(F=138,a=3),t=0;t<=g;t++)if(l=C,C=e[(t+1)*2+1],!(++n<F&&l===C)){if(n<a)do bg(i,l,i.bl_tree);while(--n!==0);else l!==0?(l!==I&&(bg(i,l,i.bl_tree),n--),bg(i,$a,i.bl_tree),Ug(i,n-3,2)):n<=10?(bg(i,eF,i.bl_tree),Ug(i,n-3,3)):(bg(i,gF,i.bl_tree),Ug(i,n-11,7));n=0,I=l,C===0?(F=138,a=3):l===C?(F=6,a=3):(F=7,a=4)}},wB=i=>{let e;for(Wn(i,i.dyn_ltree,i.l_desc.max_code),Wn(i,i.dyn_dtree,i.d_desc.max_code),xC(i,i.bl_desc),e=bi-1;e>=3&&i.bl_tree[tF[e]*2+1]===0;e--);return i.opt_len+=3*(e+1)+5+5+4,e},DB=(i,e,g,t)=>{let I;for(Ug(i,e-257,5),Ug(i,g-1,5),Ug(i,t-4,4),I=0;I<t;I++)Ug(i,i.bl_tree[tF[I]*2+1],3);bn(i,i.dyn_ltree,e-1),bn(i,i.dyn_dtree,g-1)},KB=i=>{let e=4093624447,g;for(g=0;g<=31;g++,e>>>=1)if(e&1&&i.dyn_ltree[g*2]!==0)return hn;if(i.dyn_ltree[9*2]!==0||i.dyn_ltree[10*2]!==0||i.dyn_ltree[13*2]!==0)return cn;for(g=32;g<KI;g++)if(i.dyn_ltree[g*2]!==0)return cn;return hn};let Jn=!1;const LB=i=>{Jn||(HB(),Jn=!0),i.l_desc=new cC(i.dyn_ltree,IF),i.d_desc=new cC(i.dyn_dtree,lF),i.bl_desc=new cC(i.bl_tree,CF),i.bi_buf=0,i.bi_valid=0,FF(i)},dF=(i,e,g,t)=>{Ug(i,(yB<<1)+(t?1:0),3),xB(i,e,g,!0)},zB=i=>{Ug(i,ja<<1,3),bg(i,Ji,Xg),vB(i)},_B=(i,e,g,t)=>{let I,l,C=0;i.level>0?(i.strm.data_type===pB&&(i.strm.data_type=KB(i)),xC(i,i.l_desc),xC(i,i.d_desc),C=wB(i),I=i.opt_len+3+7>>>3,l=i.static_len+3+7>>>3,l<=I&&(I=l)):I=l=g+5,g+4<=I&&e!==-1?dF(i,e,g,t):i.strategy===NB||l===I?(Ug(i,(ja<<1)+(t?1:0),3),mn(i,Xg,sI)):(Ug(i,(XB<<1)+(t?1:0),3),DB(i,i.l_desc.max_code+1,i.d_desc.max_code+1,C+1),mn(i,i.dyn_ltree,i.dyn_dtree)),FF(i),t&&UF(i)},OB=(i,e,g)=>(i.pending_buf[i.d_buf+i.last_lit*2]=e>>>8&255,i.pending_buf[i.d_buf+i.last_lit*2+1]=e&255,i.pending_buf[i.l_buf+i.last_lit]=g&255,i.last_lit++,e===0?i.dyn_ltree[g*2]++:(i.matches++,e--,i.dyn_ltree[(JI[g]+KI+1)*2]++,i.dyn_dtree[iF(e)*2]++),i.last_lit===i.lit_bufsize-1);var PB=LB,jB=dF,qB=_B,$B=OB,eQ=zB,gQ={_tr_init:PB,_tr_stored_block:jB,_tr_flush_block:qB,_tr_tally:$B,_tr_align:eQ};const tQ=(i,e,g,t)=>{let I=i&65535|0,l=i>>>16&65535|0,C=0;for(;g!==0;){C=g>2e3?2e3:g,g-=C;do I=I+e[t++]|0,l=l+I|0;while(--C);I%=65521,l%=65521}return I|l<<16|0};var uI=tQ;const IQ=()=>{let i,e=[];for(var g=0;g<256;g++){i=g;for(var t=0;t<8;t++)i=i&1?3988292384^i>>>1:i>>>1;e[g]=i}return e},lQ=new Uint32Array(IQ()),CQ=(i,e,g,t)=>{const I=lQ,l=t+g;i^=-1;for(let C=t;C<l;C++)i=i>>>8^I[(i^e[C])&255];return i^-1};var eg=CQ,Ht={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},LI={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:iQ,_tr_stored_block:nQ,_tr_flush_block:aQ,_tr_tally:zg,_tr_align:FQ}=gQ,{Z_NO_FLUSH:bt,Z_PARTIAL_FLUSH:UQ,Z_FULL_FLUSH:dQ,Z_FINISH:_g,Z_BLOCK:Gn,Z_OK:Jg,Z_STREAM_END:un,Z_STREAM_ERROR:rg,Z_DATA_ERROR:sQ,Z_BUF_ERROR:mC,Z_DEFAULT_COMPRESSION:oQ,Z_FILTERED:AQ,Z_HUFFMAN_ONLY:al,Z_RLE:BQ,Z_FIXED:QQ,Z_DEFAULT_STRATEGY:VQ,Z_UNKNOWN:rQ,Z_DEFLATED:gC}=LI,RQ=9,hQ=15,cQ=8,ZQ=29,mQ=256,wC=mQ+1+ZQ,WQ=30,bQ=19,JQ=2*wC+1,GQ=15,Ze=3,wg=258,mg=wg+Ze+1,uQ=32,tC=42,DC=69,Bl=73,Ql=91,Vl=103,Ut=113,UI=666,$e=1,zI=2,Qt=3,Pt=4,SQ=3,Dg=(i,e)=>(i.msg=Ht[e],e),Sn=i=>(i<<1)-(i>4?9:0),Mg=i=>{let e=i.length;for(;--e>=0;)i[e]=0};let NQ=(i,e,g)=>(e<<i.hash_shift^g)&i.hash_mask,Og=NQ;const Tg=i=>{const e=i.state;let g=e.pending;g>i.avail_out&&(g=i.avail_out),g!==0&&(i.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+g),i.next_out),i.next_out+=g,e.pending_out+=g,i.total_out+=g,i.avail_out-=g,e.pending-=g,e.pending===0&&(e.pending_out=0))},Ig=(i,e)=>{aQ(i,i.block_start>=0?i.block_start:-1,i.strstart-i.block_start,e),i.block_start=i.strstart,Tg(i.strm)},Se=(i,e)=>{i.pending_buf[i.pending++]=e},aI=(i,e)=>{i.pending_buf[i.pending++]=e>>>8&255,i.pending_buf[i.pending++]=e&255},pQ=(i,e,g,t)=>{let I=i.avail_in;return I>t&&(I=t),I===0?0:(i.avail_in-=I,e.set(i.input.subarray(i.next_in,i.next_in+I),g),i.state.wrap===1?i.adler=uI(i.adler,e,I,g):i.state.wrap===2&&(i.adler=eg(i.adler,e,I,g)),i.next_in+=I,i.total_in+=I,I)},sF=(i,e)=>{let g=i.max_chain_length,t=i.strstart,I,l,C=i.prev_length,n=i.nice_match;const F=i.strstart>i.w_size-mg?i.strstart-(i.w_size-mg):0,a=i.window,U=i.w_mask,d=i.prev,s=i.strstart+wg;let o=a[t+C-1],A=a[t+C];i.prev_length>=i.good_match&&(g>>=2),n>i.lookahead&&(n=i.lookahead);do if(I=e,!(a[I+C]!==A||a[I+C-1]!==o||a[I]!==a[t]||a[++I]!==a[t+1])){t+=2,I++;do;while(a[++t]===a[++I]&&a[++t]===a[++I]&&a[++t]===a[++I]&&a[++t]===a[++I]&&a[++t]===a[++I]&&a[++t]===a[++I]&&a[++t]===a[++I]&&a[++t]===a[++I]&&t<s);if(l=wg-(s-t),t=s-wg,l>C){if(i.match_start=e,C=l,l>=n)break;o=a[t+C-1],A=a[t+C]}}while((e=d[e&U])>F&&--g!==0);return C<=i.lookahead?C:i.lookahead},Vt=i=>{const e=i.w_size;let g,t,I,l,C;do{if(l=i.window_size-i.lookahead-i.strstart,i.strstart>=e+(e-mg)){i.window.set(i.window.subarray(e,e+e),0),i.match_start-=e,i.strstart-=e,i.block_start-=e,t=i.hash_size,g=t;do I=i.head[--g],i.head[g]=I>=e?I-e:0;while(--t);t=e,g=t;do I=i.prev[--g],i.prev[g]=I>=e?I-e:0;while(--t);l+=e}if(i.strm.avail_in===0)break;if(t=pQ(i.strm,i.window,i.strstart+i.lookahead,l),i.lookahead+=t,i.lookahead+i.insert>=Ze)for(C=i.strstart-i.insert,i.ins_h=i.window[C],i.ins_h=Og(i,i.ins_h,i.window[C+1]);i.insert&&(i.ins_h=Og(i,i.ins_h,i.window[C+Ze-1]),i.prev[C&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=C,C++,i.insert--,!(i.lookahead+i.insert<Ze)););}while(i.lookahead<mg&&i.strm.avail_in!==0)},yQ=(i,e)=>{let g=65535;for(g>i.pending_buf_size-5&&(g=i.pending_buf_size-5);;){if(i.lookahead<=1){if(Vt(i),i.lookahead===0&&e===bt)return $e;if(i.lookahead===0)break}i.strstart+=i.lookahead,i.lookahead=0;const t=i.block_start+g;if((i.strstart===0||i.strstart>=t)&&(i.lookahead=i.strstart-t,i.strstart=t,Ig(i,!1),i.strm.avail_out===0)||i.strstart-i.block_start>=i.w_size-mg&&(Ig(i,!1),i.strm.avail_out===0))return $e}return i.insert=0,e===_g?(Ig(i,!0),i.strm.avail_out===0?Qt:Pt):(i.strstart>i.block_start&&(Ig(i,!1),i.strm.avail_out===0),$e)},WC=(i,e)=>{let g,t;for(;;){if(i.lookahead<mg){if(Vt(i),i.lookahead<mg&&e===bt)return $e;if(i.lookahead===0)break}if(g=0,i.lookahead>=Ze&&(i.ins_h=Og(i,i.ins_h,i.window[i.strstart+Ze-1]),g=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),g!==0&&i.strstart-g<=i.w_size-mg&&(i.match_length=sF(i,g)),i.match_length>=Ze)if(t=zg(i,i.strstart-i.match_start,i.match_length-Ze),i.lookahead-=i.match_length,i.match_length<=i.max_lazy_match&&i.lookahead>=Ze){i.match_length--;do i.strstart++,i.ins_h=Og(i,i.ins_h,i.window[i.strstart+Ze-1]),g=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart;while(--i.match_length!==0);i.strstart++}else i.strstart+=i.match_length,i.match_length=0,i.ins_h=i.window[i.strstart],i.ins_h=Og(i,i.ins_h,i.window[i.strstart+1]);else t=zg(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++;if(t&&(Ig(i,!1),i.strm.avail_out===0))return $e}return i.insert=i.strstart<Ze-1?i.strstart:Ze-1,e===_g?(Ig(i,!0),i.strm.avail_out===0?Qt:Pt):i.last_lit&&(Ig(i,!1),i.strm.avail_out===0)?$e:zI},yt=(i,e)=>{let g,t,I;for(;;){if(i.lookahead<mg){if(Vt(i),i.lookahead<mg&&e===bt)return $e;if(i.lookahead===0)break}if(g=0,i.lookahead>=Ze&&(i.ins_h=Og(i,i.ins_h,i.window[i.strstart+Ze-1]),g=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart),i.prev_length=i.match_length,i.prev_match=i.match_start,i.match_length=Ze-1,g!==0&&i.prev_length<i.max_lazy_match&&i.strstart-g<=i.w_size-mg&&(i.match_length=sF(i,g),i.match_length<=5&&(i.strategy===AQ||i.match_length===Ze&&i.strstart-i.match_start>4096)&&(i.match_length=Ze-1)),i.prev_length>=Ze&&i.match_length<=i.prev_length){I=i.strstart+i.lookahead-Ze,t=zg(i,i.strstart-1-i.prev_match,i.prev_length-Ze),i.lookahead-=i.prev_length-1,i.prev_length-=2;do++i.strstart<=I&&(i.ins_h=Og(i,i.ins_h,i.window[i.strstart+Ze-1]),g=i.prev[i.strstart&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=i.strstart);while(--i.prev_length!==0);if(i.match_available=0,i.match_length=Ze-1,i.strstart++,t&&(Ig(i,!1),i.strm.avail_out===0))return $e}else if(i.match_available){if(t=zg(i,0,i.window[i.strstart-1]),t&&Ig(i,!1),i.strstart++,i.lookahead--,i.strm.avail_out===0)return $e}else i.match_available=1,i.strstart++,i.lookahead--}return i.match_available&&(t=zg(i,0,i.window[i.strstart-1]),i.match_available=0),i.insert=i.strstart<Ze-1?i.strstart:Ze-1,e===_g?(Ig(i,!0),i.strm.avail_out===0?Qt:Pt):i.last_lit&&(Ig(i,!1),i.strm.avail_out===0)?$e:zI},XQ=(i,e)=>{let g,t,I,l;const C=i.window;for(;;){if(i.lookahead<=wg){if(Vt(i),i.lookahead<=wg&&e===bt)return $e;if(i.lookahead===0)break}if(i.match_length=0,i.lookahead>=Ze&&i.strstart>0&&(I=i.strstart-1,t=C[I],t===C[++I]&&t===C[++I]&&t===C[++I])){l=i.strstart+wg;do;while(t===C[++I]&&t===C[++I]&&t===C[++I]&&t===C[++I]&&t===C[++I]&&t===C[++I]&&t===C[++I]&&t===C[++I]&&I<l);i.match_length=wg-(l-I),i.match_length>i.lookahead&&(i.match_length=i.lookahead)}if(i.match_length>=Ze?(g=zg(i,1,i.match_length-Ze),i.lookahead-=i.match_length,i.strstart+=i.match_length,i.match_length=0):(g=zg(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++),g&&(Ig(i,!1),i.strm.avail_out===0))return $e}return i.insert=0,e===_g?(Ig(i,!0),i.strm.avail_out===0?Qt:Pt):i.last_lit&&(Ig(i,!1),i.strm.avail_out===0)?$e:zI},kQ=(i,e)=>{let g;for(;;){if(i.lookahead===0&&(Vt(i),i.lookahead===0)){if(e===bt)return $e;break}if(i.match_length=0,g=zg(i,0,i.window[i.strstart]),i.lookahead--,i.strstart++,g&&(Ig(i,!1),i.strm.avail_out===0))return $e}return i.insert=0,e===_g?(Ig(i,!0),i.strm.avail_out===0?Qt:Pt):i.last_lit&&(Ig(i,!1),i.strm.avail_out===0)?$e:zI};function Wg(i,e,g,t,I){this.good_length=i,this.max_lazy=e,this.nice_length=g,this.max_chain=t,this.func=I}const dI=[new Wg(0,0,0,0,yQ),new Wg(4,4,8,4,WC),new Wg(4,5,16,8,WC),new Wg(4,6,32,32,WC),new Wg(4,4,16,16,yt),new Wg(8,16,32,32,yt),new Wg(8,16,128,128,yt),new Wg(8,32,128,256,yt),new Wg(32,128,258,1024,yt),new Wg(32,258,258,4096,yt)],fQ=i=>{i.window_size=2*i.w_size,Mg(i.head),i.max_lazy_match=dI[i.level].max_lazy,i.good_match=dI[i.level].good_length,i.nice_match=dI[i.level].nice_length,i.max_chain_length=dI[i.level].max_chain,i.strstart=0,i.block_start=0,i.lookahead=0,i.insert=0,i.match_length=i.prev_length=Ze-1,i.match_available=0,i.ins_h=0};function EQ(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=gC,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(JQ*2),this.dyn_dtree=new Uint16Array((2*WQ+1)*2),this.bl_tree=new Uint16Array((2*bQ+1)*2),Mg(this.dyn_ltree),Mg(this.dyn_dtree),Mg(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(GQ+1),this.heap=new Uint16Array(2*wC+1),Mg(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(2*wC+1),Mg(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const oF=i=>{if(!i||!i.state)return Dg(i,rg);i.total_in=i.total_out=0,i.data_type=rQ;const e=i.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?tC:Ut,i.adler=e.wrap===2?0:1,e.last_flush=bt,iQ(e),Jg},AF=i=>{const e=oF(i);return e===Jg&&fQ(i.state),e},TQ=(i,e)=>!i||!i.state||i.state.wrap!==2?rg:(i.state.gzhead=e,Jg),BF=(i,e,g,t,I,l)=>{if(!i)return rg;let C=1;if(e===oQ&&(e=6),t<0?(C=0,t=-t):t>15&&(C=2,t-=16),I<1||I>RQ||g!==gC||t<8||t>15||e<0||e>9||l<0||l>QQ)return Dg(i,rg);t===8&&(t=9);const n=new EQ;return i.state=n,n.strm=i,n.wrap=C,n.gzhead=null,n.w_bits=t,n.w_size=1<<n.w_bits,n.w_mask=n.w_size-1,n.hash_bits=I+7,n.hash_size=1<<n.hash_bits,n.hash_mask=n.hash_size-1,n.hash_shift=~~((n.hash_bits+Ze-1)/Ze),n.window=new Uint8Array(n.w_size*2),n.head=new Uint16Array(n.hash_size),n.prev=new Uint16Array(n.w_size),n.lit_bufsize=1<<I+6,n.pending_buf_size=n.lit_bufsize*4,n.pending_buf=new Uint8Array(n.pending_buf_size),n.d_buf=1*n.lit_bufsize,n.l_buf=(1+2)*n.lit_bufsize,n.level=e,n.strategy=l,n.method=g,AF(i)},YQ=(i,e)=>BF(i,e,gC,hQ,cQ,VQ),vQ=(i,e)=>{let g,t;if(!i||!i.state||e>Gn||e<0)return i?Dg(i,rg):rg;const I=i.state;if(!i.output||!i.input&&i.avail_in!==0||I.status===UI&&e!==_g)return Dg(i,i.avail_out===0?mC:rg);I.strm=i;const l=I.last_flush;if(I.last_flush=e,I.status===tC)if(I.wrap===2)i.adler=0,Se(I,31),Se(I,139),Se(I,8),I.gzhead?(Se(I,(I.gzhead.text?1:0)+(I.gzhead.hcrc?2:0)+(I.gzhead.extra?4:0)+(I.gzhead.name?8:0)+(I.gzhead.comment?16:0)),Se(I,I.gzhead.time&255),Se(I,I.gzhead.time>>8&255),Se(I,I.gzhead.time>>16&255),Se(I,I.gzhead.time>>24&255),Se(I,I.level===9?2:I.strategy>=al||I.level<2?4:0),Se(I,I.gzhead.os&255),I.gzhead.extra&&I.gzhead.extra.length&&(Se(I,I.gzhead.extra.length&255),Se(I,I.gzhead.extra.length>>8&255)),I.gzhead.hcrc&&(i.adler=eg(i.adler,I.pending_buf,I.pending,0)),I.gzindex=0,I.status=DC):(Se(I,0),Se(I,0),Se(I,0),Se(I,0),Se(I,0),Se(I,I.level===9?2:I.strategy>=al||I.level<2?4:0),Se(I,SQ),I.status=Ut);else{let C=gC+(I.w_bits-8<<4)<<8,n=-1;I.strategy>=al||I.level<2?n=0:I.level<6?n=1:I.level===6?n=2:n=3,C|=n<<6,I.strstart!==0&&(C|=uQ),C+=31-C%31,I.status=Ut,aI(I,C),I.strstart!==0&&(aI(I,i.adler>>>16),aI(I,i.adler&65535)),i.adler=1}if(I.status===DC)if(I.gzhead.extra){for(g=I.pending;I.gzindex<(I.gzhead.extra.length&65535)&&!(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>g&&(i.adler=eg(i.adler,I.pending_buf,I.pending-g,g)),Tg(i),g=I.pending,I.pending===I.pending_buf_size));)Se(I,I.gzhead.extra[I.gzindex]&255),I.gzindex++;I.gzhead.hcrc&&I.pending>g&&(i.adler=eg(i.adler,I.pending_buf,I.pending-g,g)),I.gzindex===I.gzhead.extra.length&&(I.gzindex=0,I.status=Bl)}else I.status=Bl;if(I.status===Bl)if(I.gzhead.name){g=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>g&&(i.adler=eg(i.adler,I.pending_buf,I.pending-g,g)),Tg(i),g=I.pending,I.pending===I.pending_buf_size)){t=1;break}I.gzindex<I.gzhead.name.length?t=I.gzhead.name.charCodeAt(I.gzindex++)&255:t=0,Se(I,t)}while(t!==0);I.gzhead.hcrc&&I.pending>g&&(i.adler=eg(i.adler,I.pending_buf,I.pending-g,g)),t===0&&(I.gzindex=0,I.status=Ql)}else I.status=Ql;if(I.status===Ql)if(I.gzhead.comment){g=I.pending;do{if(I.pending===I.pending_buf_size&&(I.gzhead.hcrc&&I.pending>g&&(i.adler=eg(i.adler,I.pending_buf,I.pending-g,g)),Tg(i),g=I.pending,I.pending===I.pending_buf_size)){t=1;break}I.gzindex<I.gzhead.comment.length?t=I.gzhead.comment.charCodeAt(I.gzindex++)&255:t=0,Se(I,t)}while(t!==0);I.gzhead.hcrc&&I.pending>g&&(i.adler=eg(i.adler,I.pending_buf,I.pending-g,g)),t===0&&(I.status=Vl)}else I.status=Vl;if(I.status===Vl&&(I.gzhead.hcrc?(I.pending+2>I.pending_buf_size&&Tg(i),I.pending+2<=I.pending_buf_size&&(Se(I,i.adler&255),Se(I,i.adler>>8&255),i.adler=0,I.status=Ut)):I.status=Ut),I.pending!==0){if(Tg(i),i.avail_out===0)return I.last_flush=-1,Jg}else if(i.avail_in===0&&Sn(e)<=Sn(l)&&e!==_g)return Dg(i,mC);if(I.status===UI&&i.avail_in!==0)return Dg(i,mC);if(i.avail_in!==0||I.lookahead!==0||e!==bt&&I.status!==UI){let C=I.strategy===al?kQ(I,e):I.strategy===BQ?XQ(I,e):dI[I.level].func(I,e);if((C===Qt||C===Pt)&&(I.status=UI),C===$e||C===Qt)return i.avail_out===0&&(I.last_flush=-1),Jg;if(C===zI&&(e===UQ?FQ(I):e!==Gn&&(nQ(I,0,0,!1),e===dQ&&(Mg(I.head),I.lookahead===0&&(I.strstart=0,I.block_start=0,I.insert=0))),Tg(i),i.avail_out===0))return I.last_flush=-1,Jg}return e!==_g?Jg:I.wrap<=0?un:(I.wrap===2?(Se(I,i.adler&255),Se(I,i.adler>>8&255),Se(I,i.adler>>16&255),Se(I,i.adler>>24&255),Se(I,i.total_in&255),Se(I,i.total_in>>8&255),Se(I,i.total_in>>16&255),Se(I,i.total_in>>24&255)):(aI(I,i.adler>>>16),aI(I,i.adler&65535)),Tg(i),I.wrap>0&&(I.wrap=-I.wrap),I.pending!==0?Jg:un)},MQ=i=>{if(!i||!i.state)return rg;const e=i.state.status;return e!==tC&&e!==DC&&e!==Bl&&e!==Ql&&e!==Vl&&e!==Ut&&e!==UI?Dg(i,rg):(i.state=null,e===Ut?Dg(i,sQ):Jg)},HQ=(i,e)=>{let g=e.length;if(!i||!i.state)return rg;const t=i.state,I=t.wrap;if(I===2||I===1&&t.status!==tC||t.lookahead)return rg;if(I===1&&(i.adler=uI(i.adler,e,g,0)),t.wrap=0,g>=t.w_size){I===0&&(Mg(t.head),t.strstart=0,t.block_start=0,t.insert=0);let F=new Uint8Array(t.w_size);F.set(e.subarray(g-t.w_size,g),0),e=F,g=t.w_size}const l=i.avail_in,C=i.next_in,n=i.input;for(i.avail_in=g,i.next_in=0,i.input=e,Vt(t);t.lookahead>=Ze;){let F=t.strstart,a=t.lookahead-(Ze-1);do t.ins_h=Og(t,t.ins_h,t.window[F+Ze-1]),t.prev[F&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=F,F++;while(--a);t.strstart=F,t.lookahead=Ze-1,Vt(t)}return t.strstart+=t.lookahead,t.block_start=t.strstart,t.insert=t.lookahead,t.lookahead=0,t.match_length=t.prev_length=Ze-1,t.match_available=0,i.next_in=C,i.input=n,i.avail_in=l,t.wrap=I,Jg};var xQ=YQ,wQ=BF,DQ=AF,KQ=oF,LQ=TQ,zQ=vQ,_Q=MQ,OQ=HQ,PQ="pako deflate (from Nodeca project)",oI={deflateInit:xQ,deflateInit2:wQ,deflateReset:DQ,deflateResetKeep:KQ,deflateSetHeader:LQ,deflate:zQ,deflateEnd:_Q,deflateSetDictionary:OQ,deflateInfo:PQ};const jQ=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var qQ=function(i){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const g=e.shift();if(!!g){if(typeof g!="object")throw new TypeError(g+"must be non-object");for(const t in g)jQ(g,t)&&(i[t]=g[t])}}return i},$Q=i=>{let e=0;for(let t=0,I=i.length;t<I;t++)e+=i[t].length;const g=new Uint8Array(e);for(let t=0,I=0,l=i.length;t<l;t++){let C=i[t];g.set(C,I),I+=C.length}return g},IC={assign:qQ,flattenChunks:$Q};let QF=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{QF=!1}const SI=new Uint8Array(256);for(let i=0;i<256;i++)SI[i]=i>=252?6:i>=248?5:i>=240?4:i>=224?3:i>=192?2:1;SI[254]=SI[254]=1;var e0=i=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(i);let e,g,t,I,l,C=i.length,n=0;for(I=0;I<C;I++)g=i.charCodeAt(I),(g&64512)===55296&&I+1<C&&(t=i.charCodeAt(I+1),(t&64512)===56320&&(g=65536+(g-55296<<10)+(t-56320),I++)),n+=g<128?1:g<2048?2:g<65536?3:4;for(e=new Uint8Array(n),l=0,I=0;l<n;I++)g=i.charCodeAt(I),(g&64512)===55296&&I+1<C&&(t=i.charCodeAt(I+1),(t&64512)===56320&&(g=65536+(g-55296<<10)+(t-56320),I++)),g<128?e[l++]=g:g<2048?(e[l++]=192|g>>>6,e[l++]=128|g&63):g<65536?(e[l++]=224|g>>>12,e[l++]=128|g>>>6&63,e[l++]=128|g&63):(e[l++]=240|g>>>18,e[l++]=128|g>>>12&63,e[l++]=128|g>>>6&63,e[l++]=128|g&63);return e};const g0=(i,e)=>{if(e<65534&&i.subarray&&QF)return String.fromCharCode.apply(null,i.length===e?i:i.subarray(0,e));let g="";for(let t=0;t<e;t++)g+=String.fromCharCode(i[t]);return g};var t0=(i,e)=>{const g=e||i.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(i.subarray(0,e));let t,I;const l=new Array(g*2);for(I=0,t=0;t<g;){let C=i[t++];if(C<128){l[I++]=C;continue}let n=SI[C];if(n>4){l[I++]=65533,t+=n-1;continue}for(C&=n===2?31:n===3?15:7;n>1&&t<g;)C=C<<6|i[t++]&63,n--;if(n>1){l[I++]=65533;continue}C<65536?l[I++]=C:(C-=65536,l[I++]=55296|C>>10&1023,l[I++]=56320|C&1023)}return g0(l,I)},I0=(i,e)=>{e=e||i.length,e>i.length&&(e=i.length);let g=e-1;for(;g>=0&&(i[g]&192)===128;)g--;return g<0||g===0?e:g+SI[i[g]]>e?g:e},NI={string2buf:e0,buf2string:t0,utf8border:I0};function l0(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var VF=l0;const rF=Object.prototype.toString,{Z_NO_FLUSH:C0,Z_SYNC_FLUSH:i0,Z_FULL_FLUSH:n0,Z_FINISH:a0,Z_OK:bl,Z_STREAM_END:F0,Z_DEFAULT_COMPRESSION:U0,Z_DEFAULT_STRATEGY:d0,Z_DEFLATED:s0}=LI;function ui(i){this.options=IC.assign({level:U0,method:s0,chunkSize:16384,windowBits:15,memLevel:8,strategy:d0},i||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new VF,this.strm.avail_out=0;let g=oI.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(g!==bl)throw new Error(Ht[g]);if(e.header&&oI.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(typeof e.dictionary=="string"?t=NI.string2buf(e.dictionary):rF.call(e.dictionary)==="[object ArrayBuffer]"?t=new Uint8Array(e.dictionary):t=e.dictionary,g=oI.deflateSetDictionary(this.strm,t),g!==bl)throw new Error(Ht[g]);this._dict_set=!0}}ui.prototype.push=function(i,e){const g=this.strm,t=this.options.chunkSize;let I,l;if(this.ended)return!1;for(e===~~e?l=e:l=e===!0?a0:C0,typeof i=="string"?g.input=NI.string2buf(i):rF.call(i)==="[object ArrayBuffer]"?g.input=new Uint8Array(i):g.input=i,g.next_in=0,g.avail_in=g.input.length;;){if(g.avail_out===0&&(g.output=new Uint8Array(t),g.next_out=0,g.avail_out=t),(l===i0||l===n0)&&g.avail_out<=6){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(I=oI.deflate(g,l),I===F0)return g.next_out>0&&this.onData(g.output.subarray(0,g.next_out)),I=oI.deflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===bl;if(g.avail_out===0){this.onData(g.output);continue}if(l>0&&g.next_out>0){this.onData(g.output.subarray(0,g.next_out)),g.avail_out=0;continue}if(g.avail_in===0)break}return!0};ui.prototype.onData=function(i){this.chunks.push(i)};ui.prototype.onEnd=function(i){i===bl&&(this.result=IC.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};const Fl=30,o0=12;var A0=function(e,g){let t,I,l,C,n,F,a,U,d,s,o,A,B,Q,r,R,V,h,m,Z,c,W,u,J;const N=e.state;t=e.next_in,u=e.input,I=t+(e.avail_in-5),l=e.next_out,J=e.output,C=l-(g-e.avail_out),n=l+(e.avail_out-257),F=N.dmax,a=N.wsize,U=N.whave,d=N.wnext,s=N.window,o=N.hold,A=N.bits,B=N.lencode,Q=N.distcode,r=(1<<N.lenbits)-1,R=(1<<N.distbits)-1;e:do{A<15&&(o+=u[t++]<<A,A+=8,o+=u[t++]<<A,A+=8),V=B[o&r];g:for(;;){if(h=V>>>24,o>>>=h,A-=h,h=V>>>16&255,h===0)J[l++]=V&65535;else if(h&16){m=V&65535,h&=15,h&&(A<h&&(o+=u[t++]<<A,A+=8),m+=o&(1<<h)-1,o>>>=h,A-=h),A<15&&(o+=u[t++]<<A,A+=8,o+=u[t++]<<A,A+=8),V=Q[o&R];t:for(;;){if(h=V>>>24,o>>>=h,A-=h,h=V>>>16&255,h&16){if(Z=V&65535,h&=15,A<h&&(o+=u[t++]<<A,A+=8,A<h&&(o+=u[t++]<<A,A+=8)),Z+=o&(1<<h)-1,Z>F){e.msg="invalid distance too far back",N.mode=Fl;break e}if(o>>>=h,A-=h,h=l-C,Z>h){if(h=Z-h,h>U&&N.sane){e.msg="invalid distance too far back",N.mode=Fl;break e}if(c=0,W=s,d===0){if(c+=a-h,h<m){m-=h;do J[l++]=s[c++];while(--h);c=l-Z,W=J}}else if(d<h){if(c+=a+d-h,h-=d,h<m){m-=h;do J[l++]=s[c++];while(--h);if(c=0,d<m){h=d,m-=h;do J[l++]=s[c++];while(--h);c=l-Z,W=J}}}else if(c+=d-h,h<m){m-=h;do J[l++]=s[c++];while(--h);c=l-Z,W=J}for(;m>2;)J[l++]=W[c++],J[l++]=W[c++],J[l++]=W[c++],m-=3;m&&(J[l++]=W[c++],m>1&&(J[l++]=W[c++]))}else{c=l-Z;do J[l++]=J[c++],J[l++]=J[c++],J[l++]=J[c++],m-=3;while(m>2);m&&(J[l++]=J[c++],m>1&&(J[l++]=J[c++]))}}else if((h&64)===0){V=Q[(V&65535)+(o&(1<<h)-1)];continue t}else{e.msg="invalid distance code",N.mode=Fl;break e}break}}else if((h&64)===0){V=B[(V&65535)+(o&(1<<h)-1)];continue g}else if(h&32){N.mode=o0;break e}else{e.msg="invalid literal/length code",N.mode=Fl;break e}break}}while(t<I&&l<n);m=A>>3,t-=m,A-=m<<3,o&=(1<<A)-1,e.next_in=t,e.next_out=l,e.avail_in=t<I?5+(I-t):5-(t-I),e.avail_out=l<n?257+(n-l):257-(l-n),N.hold=o,N.bits=A};const Xt=15,Nn=852,pn=592,yn=0,bC=1,Xn=2,B0=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),Q0=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),V0=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),r0=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),R0=(i,e,g,t,I,l,C,n)=>{const F=n.bits;let a=0,U=0,d=0,s=0,o=0,A=0,B=0,Q=0,r=0,R=0,V,h,m,Z,c,W=null,u=0,J;const N=new Uint16Array(Xt+1),X=new Uint16Array(Xt+1);let y=null,p=0,_,ae,ne;for(a=0;a<=Xt;a++)N[a]=0;for(U=0;U<t;U++)N[e[g+U]]++;for(o=F,s=Xt;s>=1&&N[s]===0;s--);if(o>s&&(o=s),s===0)return I[l++]=1<<24|64<<16|0,I[l++]=1<<24|64<<16|0,n.bits=1,0;for(d=1;d<s&&N[d]===0;d++);for(o<d&&(o=d),Q=1,a=1;a<=Xt;a++)if(Q<<=1,Q-=N[a],Q<0)return-1;if(Q>0&&(i===yn||s!==1))return-1;for(X[1]=0,a=1;a<Xt;a++)X[a+1]=X[a]+N[a];for(U=0;U<t;U++)e[g+U]!==0&&(C[X[e[g+U]]++]=U);if(i===yn?(W=y=C,J=19):i===bC?(W=B0,u-=257,y=Q0,p-=257,J=256):(W=V0,y=r0,J=-1),R=0,U=0,a=d,c=l,A=o,B=0,m=-1,r=1<<o,Z=r-1,i===bC&&r>Nn||i===Xn&&r>pn)return 1;for(;;){_=a-B,C[U]<J?(ae=0,ne=C[U]):C[U]>J?(ae=y[p+C[U]],ne=W[u+C[U]]):(ae=32+64,ne=0),V=1<<a-B,h=1<<A,d=h;do h-=V,I[c+(R>>B)+h]=_<<24|ae<<16|ne|0;while(h!==0);for(V=1<<a-1;R&V;)V>>=1;if(V!==0?(R&=V-1,R+=V):R=0,U++,--N[a]===0){if(a===s)break;a=e[g+C[U]]}if(a>o&&(R&Z)!==m){for(B===0&&(B=o),c+=d,A=a-B,Q=1<<A;A+B<s&&(Q-=N[A+B],!(Q<=0));)A++,Q<<=1;if(r+=1<<A,i===bC&&r>Nn||i===Xn&&r>pn)return 1;m=R&Z,I[m]=o<<24|A<<16|c-l|0}}return R!==0&&(I[c+R]=a-B<<24|64<<16|0),n.bits=o,0};var AI=R0;const h0=0,RF=1,hF=2,{Z_FINISH:kn,Z_BLOCK:c0,Z_TREES:Ul,Z_OK:rt,Z_STREAM_END:Z0,Z_NEED_DICT:m0,Z_STREAM_ERROR:Rg,Z_DATA_ERROR:cF,Z_MEM_ERROR:ZF,Z_BUF_ERROR:W0,Z_DEFLATED:fn}=LI,mF=1,En=2,Tn=3,Yn=4,vn=5,Mn=6,Hn=7,xn=8,wn=9,Dn=10,Jl=11,yg=12,JC=13,Kn=14,GC=15,Ln=16,zn=17,_n=18,On=19,dl=20,sl=21,Pn=22,jn=23,qn=24,$n=25,ea=26,uC=27,ga=28,ta=29,we=30,WF=31,b0=32,J0=852,G0=592,u0=15,S0=u0,Ia=i=>(i>>>24&255)+(i>>>8&65280)+((i&65280)<<8)+((i&255)<<24);function N0(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const bF=i=>{if(!i||!i.state)return Rg;const e=i.state;return i.total_in=i.total_out=e.total=0,i.msg="",e.wrap&&(i.adler=e.wrap&1),e.mode=mF,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(J0),e.distcode=e.distdyn=new Int32Array(G0),e.sane=1,e.back=-1,rt},JF=i=>{if(!i||!i.state)return Rg;const e=i.state;return e.wsize=0,e.whave=0,e.wnext=0,bF(i)},GF=(i,e)=>{let g;if(!i||!i.state)return Rg;const t=i.state;return e<0?(g=0,e=-e):(g=(e>>4)+1,e<48&&(e&=15)),e&&(e<8||e>15)?Rg:(t.window!==null&&t.wbits!==e&&(t.window=null),t.wrap=g,t.wbits=e,JF(i))},uF=(i,e)=>{if(!i)return Rg;const g=new N0;i.state=g,g.window=null;const t=GF(i,e);return t!==rt&&(i.state=null),t},p0=i=>uF(i,S0);let la=!0,SC,NC;const y0=i=>{if(la){SC=new Int32Array(512),NC=new Int32Array(32);let e=0;for(;e<144;)i.lens[e++]=8;for(;e<256;)i.lens[e++]=9;for(;e<280;)i.lens[e++]=7;for(;e<288;)i.lens[e++]=8;for(AI(RF,i.lens,0,288,SC,0,i.work,{bits:9}),e=0;e<32;)i.lens[e++]=5;AI(hF,i.lens,0,32,NC,0,i.work,{bits:5}),la=!1}i.lencode=SC,i.lenbits=9,i.distcode=NC,i.distbits=5},SF=(i,e,g,t)=>{let I;const l=i.state;return l.window===null&&(l.wsize=1<<l.wbits,l.wnext=0,l.whave=0,l.window=new Uint8Array(l.wsize)),t>=l.wsize?(l.window.set(e.subarray(g-l.wsize,g),0),l.wnext=0,l.whave=l.wsize):(I=l.wsize-l.wnext,I>t&&(I=t),l.window.set(e.subarray(g-t,g-t+I),l.wnext),t-=I,t?(l.window.set(e.subarray(g-t,g),0),l.wnext=t,l.whave=l.wsize):(l.wnext+=I,l.wnext===l.wsize&&(l.wnext=0),l.whave<l.wsize&&(l.whave+=I))),0},X0=(i,e)=>{let g,t,I,l,C,n,F,a,U,d,s,o,A,B,Q=0,r,R,V,h,m,Z,c,W;const u=new Uint8Array(4);let J,N;const X=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!i||!i.state||!i.output||!i.input&&i.avail_in!==0)return Rg;g=i.state,g.mode===yg&&(g.mode=JC),C=i.next_out,I=i.output,F=i.avail_out,l=i.next_in,t=i.input,n=i.avail_in,a=g.hold,U=g.bits,d=n,s=F,W=rt;e:for(;;)switch(g.mode){case mF:if(g.wrap===0){g.mode=JC;break}for(;U<16;){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}if(g.wrap&2&&a===35615){g.check=0,u[0]=a&255,u[1]=a>>>8&255,g.check=eg(g.check,u,2,0),a=0,U=0,g.mode=En;break}if(g.flags=0,g.head&&(g.head.done=!1),!(g.wrap&1)||(((a&255)<<8)+(a>>8))%31){i.msg="incorrect header check",g.mode=we;break}if((a&15)!==fn){i.msg="unknown compression method",g.mode=we;break}if(a>>>=4,U-=4,c=(a&15)+8,g.wbits===0)g.wbits=c;else if(c>g.wbits){i.msg="invalid window size",g.mode=we;break}g.dmax=1<<g.wbits,i.adler=g.check=1,g.mode=a&512?Dn:yg,a=0,U=0;break;case En:for(;U<16;){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}if(g.flags=a,(g.flags&255)!==fn){i.msg="unknown compression method",g.mode=we;break}if(g.flags&57344){i.msg="unknown header flags set",g.mode=we;break}g.head&&(g.head.text=a>>8&1),g.flags&512&&(u[0]=a&255,u[1]=a>>>8&255,g.check=eg(g.check,u,2,0)),a=0,U=0,g.mode=Tn;case Tn:for(;U<32;){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}g.head&&(g.head.time=a),g.flags&512&&(u[0]=a&255,u[1]=a>>>8&255,u[2]=a>>>16&255,u[3]=a>>>24&255,g.check=eg(g.check,u,4,0)),a=0,U=0,g.mode=Yn;case Yn:for(;U<16;){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}g.head&&(g.head.xflags=a&255,g.head.os=a>>8),g.flags&512&&(u[0]=a&255,u[1]=a>>>8&255,g.check=eg(g.check,u,2,0)),a=0,U=0,g.mode=vn;case vn:if(g.flags&1024){for(;U<16;){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}g.length=a,g.head&&(g.head.extra_len=a),g.flags&512&&(u[0]=a&255,u[1]=a>>>8&255,g.check=eg(g.check,u,2,0)),a=0,U=0}else g.head&&(g.head.extra=null);g.mode=Mn;case Mn:if(g.flags&1024&&(o=g.length,o>n&&(o=n),o&&(g.head&&(c=g.head.extra_len-g.length,g.head.extra||(g.head.extra=new Uint8Array(g.head.extra_len)),g.head.extra.set(t.subarray(l,l+o),c)),g.flags&512&&(g.check=eg(g.check,t,o,l)),n-=o,l+=o,g.length-=o),g.length))break e;g.length=0,g.mode=Hn;case Hn:if(g.flags&2048){if(n===0)break e;o=0;do c=t[l+o++],g.head&&c&&g.length<65536&&(g.head.name+=String.fromCharCode(c));while(c&&o<n);if(g.flags&512&&(g.check=eg(g.check,t,o,l)),n-=o,l+=o,c)break e}else g.head&&(g.head.name=null);g.length=0,g.mode=xn;case xn:if(g.flags&4096){if(n===0)break e;o=0;do c=t[l+o++],g.head&&c&&g.length<65536&&(g.head.comment+=String.fromCharCode(c));while(c&&o<n);if(g.flags&512&&(g.check=eg(g.check,t,o,l)),n-=o,l+=o,c)break e}else g.head&&(g.head.comment=null);g.mode=wn;case wn:if(g.flags&512){for(;U<16;){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}if(a!==(g.check&65535)){i.msg="header crc mismatch",g.mode=we;break}a=0,U=0}g.head&&(g.head.hcrc=g.flags>>9&1,g.head.done=!0),i.adler=g.check=0,g.mode=yg;break;case Dn:for(;U<32;){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}i.adler=g.check=Ia(a),a=0,U=0,g.mode=Jl;case Jl:if(g.havedict===0)return i.next_out=C,i.avail_out=F,i.next_in=l,i.avail_in=n,g.hold=a,g.bits=U,m0;i.adler=g.check=1,g.mode=yg;case yg:if(e===c0||e===Ul)break e;case JC:if(g.last){a>>>=U&7,U-=U&7,g.mode=uC;break}for(;U<3;){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}switch(g.last=a&1,a>>>=1,U-=1,a&3){case 0:g.mode=Kn;break;case 1:if(y0(g),g.mode=dl,e===Ul){a>>>=2,U-=2;break e}break;case 2:g.mode=zn;break;case 3:i.msg="invalid block type",g.mode=we}a>>>=2,U-=2;break;case Kn:for(a>>>=U&7,U-=U&7;U<32;){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}if((a&65535)!==(a>>>16^65535)){i.msg="invalid stored block lengths",g.mode=we;break}if(g.length=a&65535,a=0,U=0,g.mode=GC,e===Ul)break e;case GC:g.mode=Ln;case Ln:if(o=g.length,o){if(o>n&&(o=n),o>F&&(o=F),o===0)break e;I.set(t.subarray(l,l+o),C),n-=o,l+=o,F-=o,C+=o,g.length-=o;break}g.mode=yg;break;case zn:for(;U<14;){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}if(g.nlen=(a&31)+257,a>>>=5,U-=5,g.ndist=(a&31)+1,a>>>=5,U-=5,g.ncode=(a&15)+4,a>>>=4,U-=4,g.nlen>286||g.ndist>30){i.msg="too many length or distance symbols",g.mode=we;break}g.have=0,g.mode=_n;case _n:for(;g.have<g.ncode;){for(;U<3;){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}g.lens[X[g.have++]]=a&7,a>>>=3,U-=3}for(;g.have<19;)g.lens[X[g.have++]]=0;if(g.lencode=g.lendyn,g.lenbits=7,J={bits:g.lenbits},W=AI(h0,g.lens,0,19,g.lencode,0,g.work,J),g.lenbits=J.bits,W){i.msg="invalid code lengths set",g.mode=we;break}g.have=0,g.mode=On;case On:for(;g.have<g.nlen+g.ndist;){for(;Q=g.lencode[a&(1<<g.lenbits)-1],r=Q>>>24,R=Q>>>16&255,V=Q&65535,!(r<=U);){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}if(V<16)a>>>=r,U-=r,g.lens[g.have++]=V;else{if(V===16){for(N=r+2;U<N;){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}if(a>>>=r,U-=r,g.have===0){i.msg="invalid bit length repeat",g.mode=we;break}c=g.lens[g.have-1],o=3+(a&3),a>>>=2,U-=2}else if(V===17){for(N=r+3;U<N;){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}a>>>=r,U-=r,c=0,o=3+(a&7),a>>>=3,U-=3}else{for(N=r+7;U<N;){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}a>>>=r,U-=r,c=0,o=11+(a&127),a>>>=7,U-=7}if(g.have+o>g.nlen+g.ndist){i.msg="invalid bit length repeat",g.mode=we;break}for(;o--;)g.lens[g.have++]=c}}if(g.mode===we)break;if(g.lens[256]===0){i.msg="invalid code -- missing end-of-block",g.mode=we;break}if(g.lenbits=9,J={bits:g.lenbits},W=AI(RF,g.lens,0,g.nlen,g.lencode,0,g.work,J),g.lenbits=J.bits,W){i.msg="invalid literal/lengths set",g.mode=we;break}if(g.distbits=6,g.distcode=g.distdyn,J={bits:g.distbits},W=AI(hF,g.lens,g.nlen,g.ndist,g.distcode,0,g.work,J),g.distbits=J.bits,W){i.msg="invalid distances set",g.mode=we;break}if(g.mode=dl,e===Ul)break e;case dl:g.mode=sl;case sl:if(n>=6&&F>=258){i.next_out=C,i.avail_out=F,i.next_in=l,i.avail_in=n,g.hold=a,g.bits=U,A0(i,s),C=i.next_out,I=i.output,F=i.avail_out,l=i.next_in,t=i.input,n=i.avail_in,a=g.hold,U=g.bits,g.mode===yg&&(g.back=-1);break}for(g.back=0;Q=g.lencode[a&(1<<g.lenbits)-1],r=Q>>>24,R=Q>>>16&255,V=Q&65535,!(r<=U);){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}if(R&&(R&240)===0){for(h=r,m=R,Z=V;Q=g.lencode[Z+((a&(1<<h+m)-1)>>h)],r=Q>>>24,R=Q>>>16&255,V=Q&65535,!(h+r<=U);){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}a>>>=h,U-=h,g.back+=h}if(a>>>=r,U-=r,g.back+=r,g.length=V,R===0){g.mode=ea;break}if(R&32){g.back=-1,g.mode=yg;break}if(R&64){i.msg="invalid literal/length code",g.mode=we;break}g.extra=R&15,g.mode=Pn;case Pn:if(g.extra){for(N=g.extra;U<N;){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}g.length+=a&(1<<g.extra)-1,a>>>=g.extra,U-=g.extra,g.back+=g.extra}g.was=g.length,g.mode=jn;case jn:for(;Q=g.distcode[a&(1<<g.distbits)-1],r=Q>>>24,R=Q>>>16&255,V=Q&65535,!(r<=U);){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}if((R&240)===0){for(h=r,m=R,Z=V;Q=g.distcode[Z+((a&(1<<h+m)-1)>>h)],r=Q>>>24,R=Q>>>16&255,V=Q&65535,!(h+r<=U);){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}a>>>=h,U-=h,g.back+=h}if(a>>>=r,U-=r,g.back+=r,R&64){i.msg="invalid distance code",g.mode=we;break}g.offset=V,g.extra=R&15,g.mode=qn;case qn:if(g.extra){for(N=g.extra;U<N;){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}g.offset+=a&(1<<g.extra)-1,a>>>=g.extra,U-=g.extra,g.back+=g.extra}if(g.offset>g.dmax){i.msg="invalid distance too far back",g.mode=we;break}g.mode=$n;case $n:if(F===0)break e;if(o=s-F,g.offset>o){if(o=g.offset-o,o>g.whave&&g.sane){i.msg="invalid distance too far back",g.mode=we;break}o>g.wnext?(o-=g.wnext,A=g.wsize-o):A=g.wnext-o,o>g.length&&(o=g.length),B=g.window}else B=I,A=C-g.offset,o=g.length;o>F&&(o=F),F-=o,g.length-=o;do I[C++]=B[A++];while(--o);g.length===0&&(g.mode=sl);break;case ea:if(F===0)break e;I[C++]=g.length,F--,g.mode=sl;break;case uC:if(g.wrap){for(;U<32;){if(n===0)break e;n--,a|=t[l++]<<U,U+=8}if(s-=F,i.total_out+=s,g.total+=s,s&&(i.adler=g.check=g.flags?eg(g.check,I,s,C-s):uI(g.check,I,s,C-s)),s=F,(g.flags?a:Ia(a))!==g.check){i.msg="incorrect data check",g.mode=we;break}a=0,U=0}g.mode=ga;case ga:if(g.wrap&&g.flags){for(;U<32;){if(n===0)break e;n--,a+=t[l++]<<U,U+=8}if(a!==(g.total&4294967295)){i.msg="incorrect length check",g.mode=we;break}a=0,U=0}g.mode=ta;case ta:W=Z0;break e;case we:W=cF;break e;case WF:return ZF;case b0:default:return Rg}return i.next_out=C,i.avail_out=F,i.next_in=l,i.avail_in=n,g.hold=a,g.bits=U,(g.wsize||s!==i.avail_out&&g.mode<we&&(g.mode<uC||e!==kn))&&SF(i,i.output,i.next_out,s-i.avail_out),d-=i.avail_in,s-=i.avail_out,i.total_in+=d,i.total_out+=s,g.total+=s,g.wrap&&s&&(i.adler=g.check=g.flags?eg(g.check,I,s,i.next_out-s):uI(g.check,I,s,i.next_out-s)),i.data_type=g.bits+(g.last?64:0)+(g.mode===yg?128:0)+(g.mode===dl||g.mode===GC?256:0),(d===0&&s===0||e===kn)&&W===rt&&(W=W0),W},k0=i=>{if(!i||!i.state)return Rg;let e=i.state;return e.window&&(e.window=null),i.state=null,rt},f0=(i,e)=>{if(!i||!i.state)return Rg;const g=i.state;return(g.wrap&2)===0?Rg:(g.head=e,e.done=!1,rt)},E0=(i,e)=>{const g=e.length;let t,I,l;return!i||!i.state||(t=i.state,t.wrap!==0&&t.mode!==Jl)?Rg:t.mode===Jl&&(I=1,I=uI(I,e,g,0),I!==t.check)?cF:(l=SF(i,e,g,g),l?(t.mode=WF,ZF):(t.havedict=1,rt))};var T0=JF,Y0=GF,v0=bF,M0=p0,H0=uF,x0=X0,w0=k0,D0=f0,K0=E0,L0="pako inflate (from Nodeca project)",kg={inflateReset:T0,inflateReset2:Y0,inflateResetKeep:v0,inflateInit:M0,inflateInit2:H0,inflate:x0,inflateEnd:w0,inflateGetHeader:D0,inflateSetDictionary:K0,inflateInfo:L0};function z0(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var _0=z0;const NF=Object.prototype.toString,{Z_NO_FLUSH:O0,Z_FINISH:P0,Z_OK:pI,Z_STREAM_END:pC,Z_NEED_DICT:yC,Z_STREAM_ERROR:j0,Z_DATA_ERROR:Ca,Z_MEM_ERROR:q0}=LI;function _I(i){this.options=IC.assign({chunkSize:1024*64,windowBits:15,to:""},i||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(i&&i.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new VF,this.strm.avail_out=0;let g=kg.inflateInit2(this.strm,e.windowBits);if(g!==pI)throw new Error(Ht[g]);if(this.header=new _0,kg.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=NI.string2buf(e.dictionary):NF.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(g=kg.inflateSetDictionary(this.strm,e.dictionary),g!==pI)))throw new Error(Ht[g])}_I.prototype.push=function(i,e){const g=this.strm,t=this.options.chunkSize,I=this.options.dictionary;let l,C,n;if(this.ended)return!1;for(e===~~e?C=e:C=e===!0?P0:O0,NF.call(i)==="[object ArrayBuffer]"?g.input=new Uint8Array(i):g.input=i,g.next_in=0,g.avail_in=g.input.length;;){for(g.avail_out===0&&(g.output=new Uint8Array(t),g.next_out=0,g.avail_out=t),l=kg.inflate(g,C),l===yC&&I&&(l=kg.inflateSetDictionary(g,I),l===pI?l=kg.inflate(g,C):l===Ca&&(l=yC));g.avail_in>0&&l===pC&&g.state.wrap>0&&i[g.next_in]!==0;)kg.inflateReset(g),l=kg.inflate(g,C);switch(l){case j0:case Ca:case yC:case q0:return this.onEnd(l),this.ended=!0,!1}if(n=g.avail_out,g.next_out&&(g.avail_out===0||l===pC))if(this.options.to==="string"){let F=NI.utf8border(g.output,g.next_out),a=g.next_out-F,U=NI.buf2string(g.output,F);g.next_out=a,g.avail_out=t-a,a&&g.output.set(g.output.subarray(F,F+a),0),this.onData(U)}else this.onData(g.output.length===g.next_out?g.output:g.output.subarray(0,g.next_out));if(!(l===pI&&n===0)){if(l===pC)return l=kg.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,!0;if(g.avail_in===0)break}}return!0};_I.prototype.onData=function(i){this.chunks.push(i)};_I.prototype.onEnd=function(i){i===pI&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=IC.flattenChunks(this.chunks)),this.chunks=[],this.err=i,this.msg=this.strm.msg};function Si(i,e){const g=new _I(e);if(g.push(i),g.err)throw g.msg||Ht[g.err];return g.result}function $0(i,e){return e=e||{},e.raw=!0,Si(i,e)}var eV=_I,gV=Si,tV=$0,IV=Si,lV=LI,CV={Inflate:eV,inflate:gV,inflateRaw:tV,ungzip:IV,constants:lV};const{Inflate:iV,inflate:nV,inflateRaw:Ur,ungzip:dr}=CV;var aV=iV,FV=nV;const XC=[137,80,78,71,13,10,26,10],pF=[];for(let i=0;i<256;i++){let e=i;for(let g=0;g<8;g++)e&1?e=3988292384^e>>>1:e=e>>>1;pF[i]=e}const ia=4294967295;function UV(i,e,g){let t=i;for(let I=0;I<g;I++)t=pF[(t^e[I])&255]^t>>>8;return t}function dV(i,e){return(UV(ia,i,e)^ia)>>>0}var Ct;(function(i){i[i.UNKNOWN=-1]="UNKNOWN",i[i.GREYSCALE=0]="GREYSCALE",i[i.TRUECOLOUR=2]="TRUECOLOUR",i[i.INDEXED_COLOUR=3]="INDEXED_COLOUR",i[i.GREYSCALE_ALPHA=4]="GREYSCALE_ALPHA",i[i.TRUECOLOUR_ALPHA=6]="TRUECOLOUR_ALPHA"})(Ct||(Ct={}));var BI;(function(i){i[i.UNKNOWN=-1]="UNKNOWN",i[i.DEFLATE=0]="DEFLATE"})(BI||(BI={}));var Gl;(function(i){i[i.UNKNOWN=-1]="UNKNOWN",i[i.ADAPTIVE=0]="ADAPTIVE"})(Gl||(Gl={}));var ul;(function(i){i[i.UNKNOWN=-1]="UNKNOWN",i[i.NO_INTERLACE=0]="NO_INTERLACE",i[i.ADAM7=1]="ADAM7"})(ul||(ul={}));const sV=new Uint8Array(0),na="\0",oV=new Uint16Array([255]),AV=new Uint8Array(oV.buffer),BV=AV[0]===255;class QV extends mi{constructor(e,g={}){super(e);const{checkCrc:t=!1}=g;this._checkCrc=t,this._inflator=new aV,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._end=!1,this._hasPalette=!1,this._palette=[],this._compressionMethod=BI.UNKNOWN,this._filterMethod=Gl.UNKNOWN,this._interlaceMethod=ul.UNKNOWN,this._colorType=-1,this.setBigEndian()}decode(){for(this.decodeSignature();!this._end;)this.decodeChunk();return this.decodeImage(),this._png}decodeSignature(){for(let e=0;e<XC.length;e++)if(this.readUint8()!==XC[e])throw new Error(`wrong PNG signature. Byte at ${e} should be ${XC[e]}.`)}decodeChunk(){const e=this.readUint32(),g=this.readChars(4),t=this.offset;switch(g){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case"tEXt":this.decodetEXt(e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-t!==e)throw new Error(`Length mismatch while decoding chunk ${g}`);if(this._checkCrc){const I=this.readUint32(),l=e+4,C=dV(new Uint8Array(this.buffer,this.byteOffset+this.offset-l-4,l),l);if(C!==I)throw new Error(`CRC mismatch for chunk ${g}. Expected ${I}, found ${C}`)}else this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=WV(this.readUint8());const g=this.readUint8();this._colorType=g;let t;switch(g){case Ct.GREYSCALE:t=1;break;case Ct.TRUECOLOUR:t=3;break;case Ct.INDEXED_COLOUR:t=1;break;case Ct.GREYSCALE_ALPHA:t=2;break;case Ct.TRUECOLOUR_ALPHA:t=4;break;default:throw new Error(`Unknown color type: ${g}`)}if(this._png.channels=t,this._compressionMethod=this.readUint8(),this._compressionMethod!==BI.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const g=e/3;this._hasPalette=!0;const t=[];this._palette=t;for(let I=0;I<g;I++)t.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._inflator.push(new Uint8Array(this.buffer,this.offset+this.byteOffset,e)),this.skip(e)}decodetRNS(e){if(this._colorType===3){if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let g=0;for(;g<e;g++){const t=this.readByte();this._palette[g].push(t)}for(;g<this._palette.length;g++)this._palette[g].push(255)}}decodeiCCP(e){let g="",t;for(;(t=this.readChar())!==na;)g+=t;const I=this.readUint8();if(I!==BI.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${I}`);const l=this.readBytes(e-g.length-2);this._png.iccEmbeddedProfile={name:g,profile:FV(l)}}decodetEXt(e){let g="",t;for(;(t=this.readChar())!==na;)g+=t;this._png.text[g]=this.readChars(e-g.length-1)}decodepHYs(){const e=this.readUint32(),g=this.readUint32(),t=this.readByte();this._png.resolution={x:e,y:g,unit:t}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._inflator.result;if(this._filterMethod!==Gl.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===ul.NO_INTERLACE)this.decodeInterlaceNull(e);else throw new Error(`Interlace method ${this._interlaceMethod} not supported`)}decodeInterlaceNull(e){const g=this._png.height,t=this._png.channels*this._png.depth/8,I=this._png.width*t,l=new Uint8Array(this._png.height*I);let C=sV,n=0,F,a;for(let U=0;U<g;U++){switch(F=e.subarray(n+1,n+1+I),a=l.subarray(U*I,(U+1)*I),e[n]){case 0:VV(F,a,I);break;case 1:rV(F,a,I,t);break;case 2:RV(F,a,C,I);break;case 3:hV(F,a,C,I,t);break;case 4:cV(F,a,C,I,t);break;default:throw new Error(`Unsupported filter: ${e[n]}`)}C=a,n+=I+1}if(this._hasPalette&&(this._png.palette=this._palette),this._png.depth===16){const U=new Uint16Array(l.buffer);if(BV)for(let d=0;d<U.length;d++)U[d]=mV(U[d]);this._png.data=U}else this._png.data=l}}function VV(i,e,g){for(let t=0;t<g;t++)e[t]=i[t]}function rV(i,e,g,t){let I=0;for(;I<t;I++)e[I]=i[I];for(;I<g;I++)e[I]=i[I]+e[I-t]&255}function RV(i,e,g,t){let I=0;if(g.length===0)for(;I<t;I++)e[I]=i[I];else for(;I<t;I++)e[I]=i[I]+g[I]&255}function hV(i,e,g,t,I){let l=0;if(g.length===0){for(;l<I;l++)e[l]=i[l];for(;l<t;l++)e[l]=i[l]+(e[l-I]>>1)&255}else{for(;l<I;l++)e[l]=i[l]+(g[l]>>1)&255;for(;l<t;l++)e[l]=i[l]+(e[l-I]+g[l]>>1)&255}}function cV(i,e,g,t,I){let l=0;if(g.length===0){for(;l<I;l++)e[l]=i[l];for(;l<t;l++)e[l]=i[l]+e[l-I]&255}else{for(;l<I;l++)e[l]=i[l]+g[l]&255;for(;l<t;l++)e[l]=i[l]+ZV(e[l-I],g[l],g[l-I])&255}}function ZV(i,e,g){const t=i+e-g,I=Math.abs(t-i),l=Math.abs(t-e),C=Math.abs(t-g);return I<=l&&I<=C?i:l<=C?e:g}function mV(i){return(i&255)<<8|i>>8&255}function WV(i){if(i!==1&&i!==2&&i!==4&&i!==8&&i!==16)throw new Error(`invalid bit depth: ${i}`);return i}var aa;(function(i){i[i.UNKNOWN=0]="UNKNOWN",i[i.METRE=1]="METRE"})(aa||(aa={}));function bV(i,e){return new QV(i,e).decode()}var JV={name:"@zeainc/gltf-loader",libraryName:"GLTFLoader",author:"Philip Taylor",description:"A plugin to load GLTF files in Zea Engine.",version:"4.0.5",license:"MIT",main:"dist/index.cjs.js",module:"dist/index.esm.js",browser:"dist/index.umd.js",files:["dist/"],keywords:["WebGL","ES6","Zea","GLTF","Draco"],repository:{type:"git",url:"https://github.com/ZeaInc/gltf-loader"},scripts:{build:"rollup -c","build:watch":"rollup -w -c",dev:"npm-run-all --parallel build:watch start:watch",dist:"yarn publish --access=public",generate:"plop",prepare:"yarn run build",release:"standard-version",start:"es-dev-server","start:watch":"es-dev-server --app-index testing-e2e/index.html --open --watch","test:e2e":"percy exec cypress run --browser chrome --headless","test:e2e:watch":"percy exec cypress open"},devDependencies:{"@percy/cypress":"^2.3.2","@rollup/plugin-json":"^4.1.0","@zeainc/zea-engine":"^4",cypress:"^5.4.0","es-dev-server":"^1.57.8",eslint:"^6.5.1","eslint-config-google":"^0.14.0","eslint-config-prettier":"^6.3.0","eslint-plugin-prettier":"^3.1.1","npm-run-all":"^4.1.5",plop:"^2.7.4",prettier:"^2.1.1",rollup:"^2.2.0","rollup-plugin-terser":"^5.3.0","rollup-plugin-web-worker-loader":"^0.9.0","standard-version":"^9.0.0",yargs:"12.0.2"},dependencies:{"fast-png":"^6.1.0","jpeg-js":"^0.4.3"}};const le={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,INT:5124,UNSIGNED_INT:5125,FLOAT:5126};function yF(i,e,g){let t=new glMatrix.ARRAY_TYPE(g);for(let I=0;I<g;++I)t[I]=i[e+I];return t}function lC(i,e,g){for(const t of Object.keys(i)){const I=i[t];if(I!=null&&typeof a_string!="string"&&(I.initGl!==void 0&&I.initGl(e,g),Array.isArray(I)))for(const l of I)l!=null&&l.initGl!==void 0&&l.initGl(e,g)}}function qe(i,e){if(i===void 0)return[];const g=[];for(const t of i)g.push(XF(t,e));return g}function XF(i,e){const g=new e;return g.fromJson(i),g}function yI(i,e,g=[]){for(let t of Object.keys(i))(!g||g.find(function(I){return I==t})===void 0)&&e[t]!==void 0&&(i[t.replace("^@","")]=e[t])}function kC(i,e,g){return Math.min(Math.max(i,e),g)}function GV(i){return function(e){const g=e.toLowerCase().split(".");if(g.length!=1)return g[g.length-1]}(i)=="glb"}function kF(i){return i.substring(0,i.lastIndexOf("/")+1)}class je{constructor(){this.extensions=void 0,this.extras=void 0}fromJson(e){yI(this,e)}initGl(e,g){lC(this,e,g)}}class Sl extends je{constructor(){super(),this.bufferView=void 0,this.byteOffset=0,this.componentType=void 0,this.normalized=!1,this.count=void 0,this.type=void 0,this.max=void 0,this.min=void 0,this.sparse=void 0,this.name=void 0,this.glBuffer=void 0,this.typedView=void 0,this.filteredView=void 0,this.normalizedFilteredView=void 0,this.normalizedTypedView=void 0}getTypedView(e){if(this.typedView!==void 0)return this.typedView;if(this.bufferView!==void 0){const g=e.bufferViews[this.bufferView],t=e.buffers[g.buffer],I=this.byteOffset+g.byteOffset,l=this.getComponentSize(this.componentType);let C=this.getComponentCount(this.type),n=0;switch(g.byteStride!==0?l!==0?n=g.byteStride/l*(this.count-1)+C:console.warn("Invalid component type in accessor '"+(this.name?this.name:"")+"'"):n=this.count*C,n*l>t.buffer.byteLength-I&&(n=(t.buffer.byteLength-I)/l,console.warn("Count in accessor '"+(this.name?this.name:"")+"' is too large.")),this.componentType){case le.BYTE:this.typedView=new Int8Array(t.buffer,I,n);break;case le.UNSIGNED_BYTE:this.typedView=new Uint8Array(t.buffer,I,n);break;case le.SHORT:this.typedView=new Int16Array(t.buffer,I,n);break;case le.UNSIGNED_SHORT:this.typedView=new Uint16Array(t.buffer,I,n);break;case le.UNSIGNED_INT:this.typedView=new Uint32Array(t.buffer,I,n);break;case le.FLOAT:this.typedView=new Float32Array(t.buffer,I,n)}}return this.typedView===void 0?console.warn("Failed to convert buffer view to typed view!: "+this.bufferView):this.sparse!==void 0&&this.applySparse(e,this.typedView),this.typedView}getNormalizedTypedView(e){if(this.normalizedTypedView!==void 0)return this.normalizedTypedView;const g=this.getTypedView(e);return this.normalizedTypedView=this.normalized?Sl.dequantize(g,this.componentType):g,this.normalizedTypedView}getDeinterlacedView(e){if(this.filteredView!==void 0)return this.filteredView;if(this.bufferView!==void 0){const g=e.bufferViews[this.bufferView],t=e.buffers[g.buffer],I=this.byteOffset+g.byteOffset,l=this.getComponentSize(this.componentType),C=this.getComponentCount(this.type),n=this.count*C;let F=g.byteStride!==0?g.byteStride:C*l;const a=t.buffer.byteLength-I;let U=new DataView(t.buffer,I,Math.min(a,this.count*F)),d=U.getFloat32.bind(U);switch(this.componentType){case le.BYTE:this.filteredView=new Int8Array(n),d=U.getInt8.bind(U);break;case le.UNSIGNED_BYTE:this.filteredView=new Uint8Array(n),d=U.getUint8.bind(U);break;case le.SHORT:this.filteredView=new Int16Array(n),d=U.getInt16.bind(U);break;case le.UNSIGNED_SHORT:this.filteredView=new Uint16Array(n),d=U.getUint16.bind(U);break;case le.UNSIGNED_INT:this.filteredView=new Uint32Array(n),d=U.getUint32.bind(U);break;case le.FLOAT:this.filteredView=new Float32Array(n),d=U.getFloat32.bind(U)}for(let s=0;s<n;++s){let o=Math.floor(s/C)*F+s%C*l;this.filteredView[s]=d(o,!0)}}return this.filteredView===void 0?console.warn("Failed to convert buffer view to filtered view!: "+this.bufferView):this.sparse!==void 0&&this.applySparse(e,this.filteredView),this.filteredView}getNormalizedDeinterlacedView(e){if(this.normalizedFilteredView!==void 0)return this.normalizedFilteredView;const g=this.getDeinterlacedView(e);return this.normalizedFilteredView=this.normalized?Sl.dequantize(g,this.componentType):g,this.normalizedFilteredView}applySparse(e,g){const t=e.bufferViews[this.sparse.indices.bufferView],I=e.buffers[t.buffer],l=this.sparse.indices.byteOffset+t.byteOffset,C=this.getComponentSize(this.sparse.indices.componentType);let n=1;t.byteStride!==0&&(n=t.byteStride/C);const F=this.sparse.count*n;let a;switch(this.sparse.indices.componentType){case le.UNSIGNED_BYTE:a=new Uint8Array(I.buffer,l,F);break;case le.UNSIGNED_SHORT:a=new Uint16Array(I.buffer,l,F);break;case le.UNSIGNED_INT:a=new Uint32Array(I.buffer,l,F)}const U=e.bufferViews[this.sparse.values.bufferView],d=e.buffers[U.buffer],s=this.sparse.values.byteOffset+U.byteOffset,o=this.getComponentSize(this.componentType);let A=this.getComponentCount(this.type);U.byteStride!==0&&(A=U.byteStride/o);const B=this.sparse.count*A;let Q;switch(this.componentType){case le.BYTE:Q=new Int8Array(d.buffer,s,B);break;case le.UNSIGNED_BYTE:Q=new Uint8Array(d.buffer,s,B);break;case le.SHORT:Q=new Int16Array(d.buffer,s,B);break;case le.UNSIGNED_SHORT:Q=new Uint16Array(d.buffer,s,B);break;case le.UNSIGNED_INT:Q=new Uint32Array(d.buffer,s,B);break;case le.FLOAT:Q=new Float32Array(d.buffer,s,B)}for(let r=0;r<this.sparse.count;++r)for(let R=0;R<A;++R)g[a[r]*A+R]=Q[r*A+R]}static dequantize(e,g){switch(g){case le.BYTE:return new Float32Array(e).map(t=>Math.max(t/127,-1));case le.UNSIGNED_BYTE:return new Float32Array(e).map(t=>t/255);case le.SHORT:return new Float32Array(e).map(t=>Math.max(t/32767,-1));case le.UNSIGNED_SHORT:return new Float32Array(e).map(t=>t/65535);default:return e}}getComponentCount(e){return uV.get(e)}getComponentSize(e){switch(e){case le.BYTE:case le.UNSIGNED_BYTE:return 1;case le.SHORT:case le.UNSIGNED_SHORT:return 2;case le.UNSIGNED_INT:case le.FLOAT:return 4;default:return 0}}destroy(){this.glBuffer!==void 0&&WebGl.context.deleteBuffer(this.glBuffer),this.glBuffer=void 0}}const uV=new Map([["SCALAR",1],["VEC2",2],["VEC3",3],["VEC4",4],["MAT2",4],["MAT3",9],["MAT4",16]]);class fF extends je{constructor(){super(),this.uri=void 0,this.byteLength=void 0,this.name=void 0,this.buffer=void 0}load(e,g){if(this.buffer!==void 0)return void console.error("buffer has already been loaded");const t=this;return new Promise(function(I){t.setBufferFromFiles(g,I)||t.setBufferFromUri(e,I)||(console.error("Was not able to resolve buffer with uri '%s'",t.uri),I())})}setBufferFromUri(e,g){if(this.uri===void 0)return!1;const t=this;return this.uri.startsWith("data:application")?ee.loadFile("binary",this.uri).then(function(I){t.buffer=I,g()}):ee.loadFile("binary",kF(e.path)+this.uri).then(function(I){t.buffer=I,g()}),!0}setBufferFromFiles(e,g){if(this.uri===void 0||e===void 0)return!1;const t=e.find(function(C){if(C.name===this.uri||C.fullPath===this.uri)return!0},this);if(t===void 0)return!1;const I=this,l=new FileReader;return l.onloadend=function(C){I.buffer=C.target.result,g()},l.readAsArrayBuffer(t),!0}}class EF extends je{constructor(){super(),this.buffer=void 0,this.byteOffset=0,this.byteLength=void 0,this.byteStride=0,this.target=void 0,this.name=void 0}}class Ni extends je{constructor(e="perspective",g=.01,t=1/0,I=45*Math.PI/180,l,C=1,n=1,F,a){super(),this.type=e,this.znear=g,this.zfar=t,this.yfov=I,this.xmag=C,this.ymag=n,this.aspectRatio=l,this.name=F,this.node=a}initGl(e,g){super.initGl(e,g);let t;for(let I=0;I<e.nodes.length;I++)if(t=e.nodes[I].camera,t!==void 0&&e.cameras[t]===this){this.node=I;break}this.node===void 0&&t!==void 0&&console.error("Invalid node for camera "+t)}fromJson(e){this.name=name,e.perspective!==void 0?(this.type="perspective",yI(this,e.perspective)):e.orthographic!==void 0&&(this.type="orthographic",yI(this,e.orthographic))}sortPrimitivesByDepth(e,g){for(const t of g){const I=mat4.create();mat4.multiply(I,this.getViewMatrix(e),t.node.worldTransform);const l=vec3.transformMat4(vec3.create(),vec3.clone(t.primitive.centroid),I);t.depth=l[2]}return g.filter(t=>t.depth<=0).sort((t,I)=>t.depth-I.depth)}getProjectionMatrix(){const e=mat4.create();return this.type==="perspective"?mat4.perspective(e,this.yfov,this.aspectRatio,this.znear,this.zfar):this.type==="orthographic"&&(e[0]=1/this.xmag,e[5]=1/this.ymag,e[10]=2/(this.znear-this.zfar),e[14]=(this.zfar+this.znear)/(this.znear-this.zfar)),e}getViewMatrix(e){const g=mat4.create(),t=this.getPosition(e),I=this.getTarget(e);return mat4.lookAt(g,t,I,vec3.fromValues(0,1,0)),g}getTarget(e){const g=vec3.create(),t=this.getPosition(e),I=this.getLookDirection(e);return vec3.add(g,I,t),g}getPosition(e){const g=vec3.create(),t=this.getNode(e);return mat4.getTranslation(g,t.worldTransform),g}getLookDirection(e){const g=vec3.create(),t=this.getRotation(e);return vec3.transformQuat(g,vec3.fromValues(0,0,-1),t),g}getRotation(e){const g=quat.create(),t=this.getNode(e);return mat4.getRotation(g,t.worldTransform),g}clone(){return new Ni(this.type,this.znear,this.zfar,this.yfov,this.aspectRatio,this.xmag,this.ymag,this.name,this.node)}getNode(e){return e.nodes[this.node]}getTransformMatrix(e){const g=this.getNode(e);return g!==void 0&&g.worldTransform!==void 0?g.worldTransform:mat4.create()}getDescription(e){const g={type:this.type};this.name!==void 0&&(g.name=this.name),this.type==="perspective"?(g.perspective={},this.aspectRatio!==void 0&&(g.perspective.aspectRatio=this.aspectRatio),g.perspective.yfov=this.yfov,this.zfar!=1/0&&(g.perspective.zfar=this.zfar),g.perspective.znear=this.znear):this.type==="orthographic"&&(g.orthographic={},g.orthographic.xmag=this.xmag,g.orthographic.ymag=this.ymag,g.orthographic.zfar=this.zfar,g.orthographic.znear=this.znear);const t=this.getTransformMatrix(e),I={camera:0,matrix:[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]};return this.nodeIndex!==void 0&&e.nodes[this.nodeIndex].name!==void 0&&(I.name=e.nodes[this.nodeIndex].name),{asset:{generator:"gltf-sample-viewer",version:"2.0"},cameras:[g],nodes:[I]}}}class TF{static async readAsArrayBuffer(e){return new Promise((g,t)=>{const I=new FileReader;I.onload=()=>g(I.result),I.onerror=t,I.readAsArrayBuffer(e)})}static async readAsText(e){return new Promise((g,t)=>{const I=new FileReader;I.onload=()=>g(I.result),I.onerror=t,I.readAsText(e)})}static async readAsDataURL(e){return new Promise((g,t)=>{const I=new FileReader;I.onload=()=>g(I.result),I.onerror=t,I.readAsDataURL(e)})}}const FI="image/jpeg",ol="image/png",Fa="image/ktx2",SV="image/texture";class QI extends je{constructor(e,g=le.TEXTURE_2D,t=0,I,l,C=FI,n){super(),this.uri=e,this.bufferView=I,this.mimeType=C,this.image=n,this.name=l,this.type=g,this.miplevel=t}fromJson(e){super.fromJson(e)}resolveRelativePath(e){(typeof this.uri=="string"||this.uri instanceof String)&&(this.uri.startsWith("./")&&(this.uri=this.uri.substr(2)),this.uri=e+this.uri)}async load(e,g){this.image===void 0?await this.setImageFromBufferView(e)||await this.setImageFromFiles(g,e)||await this.setImageFromUri(e)||console.error("Was not able to resolve image with uri '%s'",this.uri):this.mimeType!==SV&&console.error("image has already been loaded")}static loadHTMLImage(e){return new Promise((g,t)=>{const I=new qg(this.name);I.load(e).then(()=>{g(I)},()=>{t()})})}async setImageFromUri(e){return this.uri!==void 0&&(typeof Image=="undefined"||this.mimeType!==FI&&this.mimeType!==ol?(console.error("Unsupported image type "+this.mimeType),!1):(this.zeaImage=await QI.loadHTMLImage(this.uri).catch(g=>{console.error(g)}),!0))}async setImageFromBufferView(e){const g=e.bufferViews[this.bufferView];if(g===void 0)return!1;const t=e.buffers[g.buffer].buffer,I=new Uint8Array(t,g.byteOffset,g.byteLength);if(this.mimeType===Fa)e.ktxDecoder!==void 0?this.image=await e.ktxDecoder.loadKtxFromBuffer(I):console.warn("Loading of ktx images failed: KtxDecoder not initalized");else if(typeof Image=="undefined"||this.mimeType!==FI&&this.mimeType!==ol)if(this.mimeType===FI)this.image=WB.decode(I,{useTArray:!0});else{if(this.mimeType!==ol)return console.error("Unsupported image type "+this.mimeType),!1;this.image=bV(I)}else{const l=new Blob([I],{type:this.mimeType}),C=URL.createObjectURL(l);this.image=await QI.loadHTMLImage(C).catch(()=>{console.error("Could not load image from buffer view")})}return!0}async setImageFromFiles(e,g){if(this.uri===void 0||e===void 0)return!1;let t=e.find(function(I){const l=this.uri.split("\\").pop().split("/").pop();if(I.name===l)return!0},this);if(t===void 0)return!1;if(this.mimeType===Fa)if(g.ktxDecoder!==void 0){const I=new Uint8Array(await t.arrayBuffer());this.image=await g.ktxDecoder.loadKtxFromBuffer(I)}else console.warn("Loading of ktx images failed: KtxDecoder not initalized");else{if(typeof Image=="undefined"||this.mimeType!==FI&&this.mimeType!==ol)return console.error("Unsupported image type "+this.mimeType),!1;{const I=await TF.readAsDataURL(t).catch(()=>{console.error("Could not load image with FileReader")});this.image=await QI.loadHTMLImage(I).catch(()=>{console.error("Could not create image from FileReader image data")})}}return!0}}class NV extends je{constructor(e="directional",g=[1,1,1],t=1,I=0,l=Math.PI/4,C=-1,n,F){super(),this.type=e,this.color=g,this.intensity=t,this.innerConeAngle=I,this.outerConeAngle=l,this.range=C,this.name=n,this.node=F,this.direction=void 0}initGl(e,g){super.initGl(e,g);for(let t=0;t<e.nodes.length;t++){const I=e.nodes[t].extensions;if(I===void 0)continue;const l=I.KHR_lights_punctual;if(l===void 0)continue;const C=l.light;if(e.lights[C]===this){this.node=t;break}}}fromJson(e){super.fromJson(e),e.spot!==void 0&&yI(this,e.spot)}toUniform(e){const g=new XV;if(this.node!==void 0){const C=e.nodes[this.node].worldTransform;var t=vec3.fromValues(1,1,1);mat4.getScaling(t,C);const n=mat4.create();for(const a of[0,1,2])n[a]=C[a]/t[0],n[a+4]=C[a+4]/t[1],n[a+8]=C[a+8]/t[2];var I=quat.create();mat4.getRotation(I,n),quat.normalize(I,I);const F=vec3.fromValues(0,0,-1);vec3.transformQuat(g.direction,F,I);var l=vec3.fromValues(0,0,0);mat4.getTranslation(l,C),g.position=l}switch(this.direction!==void 0&&(g.direction=this.direction),g.range=this.range,g.color=this.color,g.intensity=this.intensity,g.innerConeCos=Math.cos(this.innerConeAngle),g.outerConeCos=Math.cos(this.outerConeAngle),this.type){case"spot":g.type=yV;break;case"point":g.type=pV;break;case"directional":default:g.type=YF}return g}}const YF=0,pV=1,yV=2;class XV extends class{}{constructor(){super();const e=vec3.fromValues(-.7399,-.6428,-.1983);this.direction=e,this.range=-1,this.color=[1,1,1],this.intensity=1,this.position=[0,0,0],this.innerConeCos=0,this.outerConeCos=Math.PI/4,this.type=YF,this.padding1=0,this.padding2=0}}class kV extends je{constructor(){super(),this.rotation=[0,0,0,1],this.brightnessFactor=1,this.brightnessOffset=0,this.specularEnvironmentTexture=void 0,this.diffuseEnvironmentTexture=void 0,this.sheenEnvironmentTexture=void 0,this.levelCount=1}fromJson(e){super.fromJson(e),e.extensions!==void 0&&this.fromJsonExtensions(e.extensions)}fromJsonExtensions(e){e.KHR_materials_sheen!==void 0&&(this.sheenEnvironmentTexture=e.KHR_materials_sheen.sheenEnvironmentTexture)}initGl(e,g){if(this.diffuseEnvironmentTexture!==void 0&&(e.textures[this.diffuseEnvironmentTexture].type=le.TEXTURE_CUBE_MAP),this.specularEnvironmentTexture!==void 0){const t=e.textures[this.specularEnvironmentTexture];t.type=le.TEXTURE_CUBE_MAP;const I=e.images[t.source];this.levelCount=I.image.levelCount}if(this.sheenEnvironmentTexture!==void 0){const t=e.textures[this.sheenEnvironmentTexture];t.type=le.TEXTURE_CUBE_MAP;const I=e.images[t.source];this.levelCount!==I.image.levelCount&&console.error("Specular and sheen do not have same level count")}}}class fV extends je{constructor(e,g,t=le.TEXTURE_2D){super(),this.sampler=e,this.source=g,this.glTexture=void 0,this.type=t,this.initialized=!1,this.mipLevelCount=0}initGl(e,g){this.sampler===void 0&&(this.sampler=e.samplers.length-1),lC(this,e,g)}fromJson(e){super.fromJson(e),e.extensions!==void 0&&e.extensions.KHR_texture_basisu!==void 0&&e.extensions.KHR_texture_basisu.source!==void 0&&(this.source=e.extensions.KHR_texture_basisu.source)}destroy(){}}class ig{constructor(e,g=0,t=!0,I="",l=!0){this.index=e,this.texCoord=g,this.linear=t,this.samplerName=I,this.strength=1,this.scale=1,this.generateMips=l,this.extensions=void 0}initGl(e,g){lC(this,e,g)}fromJson(e){yI(this,e)}}class Nl extends je{constructor(){super(),this.name=void 0,this.pbrMetallicRoughness=void 0,this.normalTexture=void 0,this.occlusionTexture=void 0,this.emissiveTexture=void 0,this.emissiveFactor=[0,0,0],this.alphaMode="OPAQUE",this.alphaCutoff=.5,this.doubleSided=!1,this.hasClearcoat=!1,this.hasSheen=!1,this.hasTransmission=!1,this.hasIOR=!1,this.hasVolume=!1,this.type="unlit",this.textures=[],this.properties=new Map,this.defines=[]}static createDefault(){const e=new Nl;e.type="MR",e.name="Default Material",e.defines.push("MATERIAL_METALLICROUGHNESS 1");const g=new Be(1,1,1,1);return e.properties.set("u_BaseColorFactor",g),e.properties.set("u_MetallicFactor",1),e.properties.set("u_RoughnessFactor",1),e}getShaderIdentifier(){switch(this.type){default:case"SG":case"MR":return"pbr.frag"}}getDefines(e){const g=Array.from(this.defines);return this.hasClearcoat&&e.enabledExtensions.KHR_materials_clearcoat&&g.push("MATERIAL_CLEARCOAT 1"),this.hasSheen&&e.enabledExtensions.KHR_materials_sheen&&g.push("MATERIAL_SHEEN 1"),this.hasTransmission&&e.enabledExtensions.KHR_materials_transmission&&g.push("MATERIAL_TRANSMISSION 1"),this.hasVolume&&e.enabledExtensions.KHR_materials_volume&&g.push("MATERIAL_VOLUME 1"),this.hasIOR&&e.enabledExtensions.KHR_materials_ior&&g.push("MATERIAL_IOR 1"),this.hasSpecular&&e.enabledExtensions.KHR_materials_specular&&g.push("MATERIAL_SPECULAR 1"),g}getProperties(){return this.properties}getTextures(){return this.textures}parseTextureInfoExtensions(e,g){if(e.extensions!==void 0&&e.extensions.KHR_texture_transform!==void 0){const t=e.extensions.KHR_texture_transform;t.texCoord!==void 0&&(e.texCoord=t.texCoord);let I=new ng,l=new ng,C=new ng;if(t.rotation!==void 0){const F=Math.sin(t.rotation),a=Math.cos(t.rotation);I=new ng([a,F,0,-F,a,0,0,0,1])}t.scale!==void 0&&(l=new ng([t.scale[0],0,0,0,t.scale[1],0,0,0,1])),t.offset!==void 0&&(C=new ng([1,0,t.offset[0],0,1,t.offset[1],0,0,1]));const n=I.multiply(l);n.multiplyInPlace(C),this.defines.push("HAS_"+g.toUpperCase()+"_UV_TRANSFORM 1"),this.properties.set("u_"+g+"UVTransform",n)}}initGl(e,g){this.zeaMaterial=new Ve(this.name,"StandardSurfaceShader");const t=(I,l)=>{const C=e.textures[I.index],n=e.samplers[C.sampler],F=e.images[C.source];F.zeaImage.wrapS=n.wrapS,F.zeaImage.wrapT=n.wrapT,l.setImage(F.zeaImage)};if(this.normalTexture!==void 0&&t(this.normalTexture,this.zeaMaterial.getParameter("Normal")),this.occlusionTexture!==void 0&&t(this.occlusionTexture,this.zeaMaterial.getParameter("AmbientOcclusion")),this.properties.set("u_EmissiveFactor",this.emissiveFactor),this.emissiveTexture!==void 0&&t(this.emissiveTexture,this.zeaMaterial.getParameter("EmissiveStrength")),this.baseColorTexture!==void 0&&t(this.baseColorTexture,this.zeaMaterial.getParameter("BaseColor")),this.metallicRoughnessTexture!==void 0&&t(this.metallicRoughnessTexture,this.zeaMaterial.getParameter("Metallic")),this.diffuseTexture!==void 0&&t(this.diffuseTexture,this.zeaMaterial.getParameter("BaseColor")),this.specularGlossinessTexture!==void 0&&t(this.specularGlossinessTexture,this.zeaMaterial.getParameter("Reflectance")),this.alphaMode==="MASK"?(this.defines.push("ALPHAMODE_MASK 1"),this.properties.set("u_AlphaCutoff",this.alphaCutoff)):this.alphaMode==="OPAQUE"&&this.defines.push("ALPHAMODE_OPAQUE 1"),this.pbrMetallicRoughness!==void 0&&this.type!=="SG"){this.defines.push("MATERIAL_METALLICROUGHNESS 1");let I=new E(1,1,1,1),l=1,C=1;this.pbrMetallicRoughness.baseColorFactor!==void 0&&I.set(...this.pbrMetallicRoughness.baseColorFactor),this.pbrMetallicRoughness.metallicFactor!==void 0&&(l=this.pbrMetallicRoughness.metallicFactor),this.pbrMetallicRoughness.roughnessFactor!==void 0&&(C=this.pbrMetallicRoughness.roughnessFactor),this.properties.set("u_BaseColorFactor",I),this.properties.set("u_MetallicFactor",l),this.properties.set("u_RoughnessFactor",C),this.zeaMaterial.getParameter("BaseColor").setValue(I),this.zeaMaterial.getParameter("Metallic").setValue(l),this.zeaMaterial.getParameter("Roughness").setValue(C)}if(this.extensions!==void 0&&(this.extensions.KHR_materials_unlit!==void 0&&this.defines.push("MATERIAL_UNLIT 1"),this.extensions.KHR_materials_pbrSpecularGlossiness!==void 0)){this.defines.push("MATERIAL_SPECULARGLOSSINESS 1");let I=new E(1,1,1,1),l=new b(1,1,1),C=1;this.extensions.KHR_materials_pbrSpecularGlossiness.diffuseFactor!==void 0&&(I=this.extensions.KHR_materials_pbrSpecularGlossiness.diffuseFactor),this.extensions.KHR_materials_pbrSpecularGlossiness.specularFactor!==void 0&&(l=this.extensions.KHR_materials_pbrSpecularGlossiness.specularFactor),this.extensions.KHR_materials_pbrSpecularGlossiness.glossinessFactor!==void 0&&(C=this.extensions.KHR_materials_pbrSpecularGlossiness.glossinessFactor),this.properties.set("u_DiffuseFactor",I),this.properties.set("u_SpecularFactor",l),this.properties.set("u_GlossinessFactor",C)}lC(this,e,g)}fromJson(e){if(super.fromJson(e),e.emissiveFactor!==void 0&&(this.emissiveFactor=e.emissiveFactor),e.normalTexture!==void 0){const g=new ig;g.fromJson(e.normalTexture),this.normalTexture=g}if(e.occlusionTexture!==void 0){const g=new ig;g.fromJson(e.occlusionTexture),this.occlusionTexture=g}if(e.emissiveTexture!==void 0){const g=new ig(void 0,0,!1);g.fromJson(e.emissiveTexture),this.emissiveTexture=g}e.extensions!==void 0&&this.fromJsonMaterialExtensions(e.extensions),e.pbrMetallicRoughness!==void 0&&this.type!=="SG"&&(this.type="MR",this.fromJsonMetallicRoughness(e.pbrMetallicRoughness))}fromJsonMaterialExtensions(e){e.KHR_materials_pbrSpecularGlossiness!==void 0&&(this.type="SG",this.fromJsonSpecularGlossiness(e.KHR_materials_pbrSpecularGlossiness)),e.KHR_materials_unlit!==void 0&&(this.type="unlit"),e.KHR_materials_clearcoat!==void 0&&this.fromJsonClearcoat(e.KHR_materials_clearcoat),e.KHR_materials_sheen!==void 0&&this.fromJsonSheen(e.KHR_materials_sheen),e.KHR_materials_transmission!==void 0&&this.fromJsonTransmission(e.KHR_materials_transmission),e.KHR_materials_specular!==void 0&&this.fromJsonSpecular(e.KHR_materials_specular),e.KHR_materials_volume!==void 0&&this.fromJsonVolume(e.KHR_materials_volume)}fromJsonMetallicRoughness(e){if(e.baseColorTexture!==void 0){const g=new ig(void 0,0,!1);g.fromJson(e.baseColorTexture),this.baseColorTexture=g}if(e.metallicRoughnessTexture!==void 0){const g=new ig;g.fromJson(e.metallicRoughnessTexture),this.metallicRoughnessTexture=g}}fromJsonSpecularGlossiness(e){if(e.diffuseTexture!==void 0){const g=new ig(void 0,0,!1);g.fromJson(e.diffuseTexture),this.diffuseTexture=g}if(e.specularGlossinessTexture!==void 0){const g=new ig(void 0,0,!1);g.fromJson(e.specularGlossinessTexture),this.specularGlossinessTexture=g}}fromJsonClearcoat(e){if(e.clearcoatTexture!==void 0){const g=new ig;g.fromJson(e.clearcoatTexture),this.clearcoatTexture=g}if(e.clearcoatRoughnessTexture!==void 0){const g=new ig;g.fromJson(e.clearcoatRoughnessTexture),this.clearcoatRoughnessTexture=g}if(e.clearcoatNormalTexture!==void 0){const g=new ig;g.fromJson(e.clearcoatNormalTexture),this.clearcoatNormalTexture=g}}fromJsonSheen(e){if(e.sheenColorTexture!==void 0){const g=new ig(void 0,0,!1);g.fromJson(e.sheenColorTexture),this.sheenColorTexture=g}if(e.sheenRoughnessTexture!==void 0){const g=new ig;g.fromJson(e.sheenRoughnessTexture),this.sheenRoughnessTexture=g}}fromJsonTransmission(e){if(e.transmissionTexture!==void 0){const g=new ig;g.fromJson(e.transmissionTexture),this.transmissionTexture=g}}fromJsonSpecular(e){if(e.specularTexture!==void 0){const g=new ig;g.fromJson(e.specularTexture),this.specularTexture=g}if(e.specularTexture!==void 0){const g=new ig;g.fromJson(e.specularTexture),this.specularTexture=g}}fromJsonVolume(e){if(e.thicknessTexture!==void 0){const g=new ig;g.fromJson(e.thicknessTexture),this.thicknessTexture=g}}}class Eg{constructor(e){if(!Eg.instance&&e===void 0){if(DracoDecoderModule===void 0)return void console.error("Failed to initalize DracoDecoder: draco library undefined");e=DracoDecoderModule}return Eg.instance||(Eg.instance=this,this.module=null,this.initializingPromise=new Promise(g=>{let t={};t.onModuleLoaded=I=>{this.module=I,g()},e(t)})),Eg.instance}async ready(){await this.initializingPromise,Object.freeze(Eg.instance)}}class EV extends je{constructor(){super(),this.attributes=[],this.targets=[],this.indices=void 0,this.material=void 0,this.mode="TRIANGLES",this.glAttributes=[],this.defines=[],this.skip=!0,this.hasWeights=!1,this.hasJoints=!1,this.hasNormals=!1,this.hasTangents=!1,this.hasTexcoord=!1,this.hasColor=!1,this.centroid=void 0}initGl(e,g){if(this.material===void 0&&(this.material=e.materials.length-1),this.extensions!==void 0&&this.extensions.KHR_draco_mesh_compression!==void 0){const F=new Eg;if(F!==void 0&&Object.isFrozen(F)){let a=this.decodeDracoBufferToIntermediate(this.extensions.KHR_draco_mesh_compression,e);this.copyDataFromDecodedGeometry(e,a,this.attributes)}else console.warn("Failed to load draco compressed mesh: DracoDecoder not initialized")}for(const F of Object.keys(this.attributes)){const a=this.attributes[F];switch(F){case"POSITION":this.skip=!1,this.glAttributes.push({attribute:F,name:"a_Position",accessor:a});break;case"NORMAL":this.hasNormals=!0,this.defines.push("HAS_NORMALS 1"),this.glAttributes.push({attribute:F,name:"a_Normal",accessor:a});break;case"TANGENT":this.hasTangents=!0,this.defines.push("HAS_TANGENTS 1"),this.glAttributes.push({attribute:F,name:"a_Tangent",accessor:a});break;case"TEXCOORD_0":this.hasTexcoord=!0,this.defines.push("HAS_UV_SET1 1"),this.glAttributes.push({attribute:F,name:"a_UV1",accessor:a});break;case"TEXCOORD_1":this.hasTexcoord=!0,this.defines.push("HAS_UV_SET2 1"),this.glAttributes.push({attribute:F,name:"a_UV2",accessor:a});break;case"COLOR_0":this.hasColor=!0;const U=e.accessors[a];this.defines.push("HAS_VERTEX_COLOR_"+U.type+" 1"),this.glAttributes.push({attribute:F,name:"a_Color",accessor:a});break;case"JOINTS_0":this.hasJoints=!0,this.defines.push("HAS_JOINT_SET1 1"),this.glAttributes.push({attribute:F,name:"a_Joint1",accessor:a});break;case"WEIGHTS_0":this.hasWeights=!0,this.defines.push("HAS_WEIGHT_SET1 1"),this.glAttributes.push({attribute:F,name:"a_Weight1",accessor:a});break;case"JOINTS_1":this.hasJoints=!0,this.defines.push("HAS_JOINT_SET2 1"),this.glAttributes.push({attribute:F,name:"a_Joint2",accessor:a});break;case"WEIGHTS_1":this.hasWeights=!0,this.defines.push("HAS_WEIGHT_SET2 1"),this.glAttributes.push({attribute:F,name:"a_Weight2",accessor:a});break;default:console.log("Unknown attribute: "+F)}}const t=e.materials[this.material];let I=t.zeaMaterial;const l=e.accessors[this.attributes.POSITION],C={geomBuffers:{numVertices:l.count,attrBuffers:{}},bbox:new gg(new b(...l.min),new b(...l.max))};if(this.indices!==void 0){const F=e.accessors[this.indices].getTypedView(e);C.geomBuffers.indices=F}for(const F of Object.keys(this.attributes)){const a=this.attributes[F],U=e.accessors[a],d=e.bufferViews[U.bufferView],s=U.getComponentSize(U.componentType),o=U.getComponentCount(U.type);let A;switch(A=d.byteStride==0||d.byteStride==s*o?U.getTypedView(e):U.getDeinterlacedView(e),F){case"POSITION":C.geomBuffers.attrBuffers.positions={dataType:"Vec3",normalized:!1,values:A};break;case"NORMAL":C.geomBuffers.attrBuffers.normals={dataType:"Vec3",normalized:!0,values:A};break;case"TEXCOORD_0":C.geomBuffers.attrBuffers.texCoords={dataType:"Vec2",normalized:!1,values:A};break;case"COLOR_0":let B=!0;for(let Q=1;Q<A.length/o;Q++)for(let r=0;r<o;r++)A[r]!=A[Q*o+r]&&(B=!1);if(B){const Q=`Material [R=${A[0]}, G=${A[1]}, B=${A[2]}]`;if(e.materialsMap[Q])I=e.materialsMap[Q];else{const r=new E;s==1?r.set(A[0]/256,A[1]/256,A[2]/256,o==4?A[3]/256:1):s==4&&r.set(A[0],A[1],A[2],o==4?A[3]:1),I=I.clone(),I.getParameter("BaseColor").setValue(r),e.materialsMap[Q]=I}}else C.geomBuffers.attrBuffers.vertexColors={dataType:"Color",normalized:!1,values:A}}}let n;switch(this.mode){case"POINTS":case 0:{C.name="GLTFPoints",n=new ct(C);const F=I.getParameter("BaseColor").getValue(),a=`PointsMaterial [${F.r.toFixed(2)}, ${F.g.toFixed(2)}, ${F.b.toFixed(2)}]`;e.materialsMap[a]?I=e.materialsMap[a]:(I=I.clone(),I.setShaderName("PointsShader"),e.materialsMap[a]=I);break}case"LINES":case 1:{C.name="GLTFLines",n=new Gg(C);const F=I.getParameter("BaseColor").getValue(),a=`LinesMaterial [R=${F.r.toFixed(2)}, G=${F.g.toFixed(2)}, B=${F.b.toFixed(2)}]`;e.materialsMap[a]?I=e.materialsMap[a]:(I=I.clone(),I.setShaderName("LinesShader"),e.materialsMap[a]=I);break}case"LINE_LOOP":case 2:{if(C.name="GLTFLineLoop",C.geomBuffers.indices==null){const U=new Uint32Array(2*C.geomBuffers.numVertices);for(let d=0;d<C.geomBuffers.numVertices;d++)U[2*d]=d,U[2*d+1]=(d+1)%U.length;C.geomBuffers.indices=U}else{const U=C.geomBuffers.indices,d=new Uint32Array(2*U.length);d[0]=U[0],d[1]=U[1];let s=1;for(let o=2;o<=U.length;o++)d[2*s]=U[o-1],d[2*s+1]=U[o%U.length],s++;d[0]==1209&&console.log(C.name,C.geomBuffers.indices.toString()),C.geomBuffers.indices=d}n=new Gg(C);const F=I.getParameter("BaseColor").getValue(),a=`LinesMaterial [R=${F.r.toFixed(2)}, G=${F.g.toFixed(2)}, B=${F.b.toFixed(2)}]`;e.materialsMap[a]?I=e.materialsMap[a]:(I=I.clone(),I.setShaderName("LinesShader"),e.materialsMap[a]=I);break}case"LINE_STRIP":case 3:{if(C.name="GLTFLineStrip",C.geomBuffers.indices==null){const U=new Uint32Array(2*(C.geomBuffers.numVertices-1));for(let d=0;d<C.geomBuffers.numVertices-1;d++)U[2*d]=d,U[2*d+1]=d+1;C.geomBuffers.indices=U}else{const U=C.geomBuffers.indices,d=new Uint32Array(2*(U.length-1));d[0]=U[0],d[1]=U[1];let s=1;for(let o=2;o<U.length;o++)d[2*s]=U[o-1],d[2*s+1]=U[o],s++;d[0]==1209&&console.log(C.name,C.geomBuffers.indices.toString()),C.geomBuffers.indices=d}n=new Gg(C);const F=I.getParameter("BaseColor").getValue(),a=`LinesMaterial [R=${F.r.toFixed(2)}, G=${F.g.toFixed(2)}, B=${F.b.toFixed(2)}]`;e.materialsMap[a]?I=e.materialsMap[a]:(I=I.clone(),I.setShaderName("LinesShader"),e.materialsMap[a]=I);break}case"TRIANGLES":case 4:if(C.name="GLTFMesh",C.geomBuffers.indices==null){const F=new Uint32Array(C.geomBuffers.numVertices);for(let a=0;a<C.geomBuffers.numVertices;a++)F[a]=a;C.geomBuffers.indices=F}n=new Kg(C);break;case"TRIANGLE_STRIP":case 5:if(C.name="GLTFMesh",C.geomBuffers.indices==null){const F=new Uint32Array(3*C.geomBuffers.numVertices-2);F[0]=0,F[1]=1,F[2]=2;for(let a=3;a<F.length;a+=3)F[a-2]=F[a-1],F[a-1]=F[a-2],F[a]=a;C.geomBuffers.indices=F}else{const F=C.geomBuffers.indices,a=F.length-2,U=new Uint32Array(3*a);U[0]=F[0],U[1]=F[1],U[2]=F[2];let d=1;for(let s=3;s<F.length;s++)U[3*d]=F[s-2],U[3*d+1]=F[s-1],U[3*d+2]=F[s],d++;C.geomBuffers.indices=U}n=new Kg(C);break;case"TRIANGLE_FAN":case 6:if(C.name="GLTFMesh",C.geomBuffers.indices==null){const F=new Uint32Array(3*C.geomBuffers.numVertices-2);F[0]=0,F[1]=1,F[2]=2;for(let a=3;a<F.length;a+=3)F[a-2]=F[0],F[a-1]=F[a-1],F[a]=a;C.geomBuffers.indices=F}else{const F=C.geomBuffers.indices,a=F.length-2,U=new Uint32Array(3*a);U[0]=F[0],U[1]=F[1],U[2]=F[2];let d=1;for(let s=3;s<F.length;s++)U[3*d]=F[0],U[3*d+1]=F[s-1],U[3*d+2]=F[s],d++;C.geomBuffers.indices=U}n=new Kg(C)}if(n){if(t.alphaMode=="OPAQUE"){const a=I.getParameter("BaseColor").getValue();a.a=1,I.getParameter("BaseColor").setValue(a)}const F=new ge(C.name,n,I);g.addChild(F,!1)}}computeCentroid(e,g){const t=e.accessors[this.attributes.POSITION].getTypedView(e);if(this.indices!==void 0){const I=e.accessors[this.indices].getTypedView(e),l=new Float32Array(3);for(let n=0;n<I.length;n++){const F=3*I[n];l[0]+=t[F],l[1]+=t[F+1],l[2]+=t[F+2]}const C=new Float32Array([l[0]/I.length,l[1]/I.length,l[2]/I.length]);this.centroid=C}else{const I=new Float32Array(3);for(let n=0;n<t.length;n+=3)I[0]+=t[n],I[1]+=t[n+1],I[2]+=t[n+2];const l=t.length/3,C=new Float32Array([I[0]/l,I[1]/l,I[2]/l]);this.centroid=C}}getShaderIdentifier(){return"primitive.vert"}getDefines(){return this.defines}fromJson(e){super.fromJson(e),e.extensions!==void 0&&this.fromJsonPrimitiveExtensions(e.extensions)}fromJsonPrimitiveExtensions(e){e.KHR_materials_variants!==void 0&&this.fromJsonVariants(e.KHR_materials_variants)}fromJsonVariants(e){e.mappings!==void 0&&(this.mappings=e.mappings)}copyDataFromDecodedGeometry(e,g,t){let I=g.index.array;if(this.loadBufferIntoGltf(I,e,this.indices,34963,"index buffer view"),g.attributes.POSITION!==void 0){let l=this.loadArrayIntoArrayBuffer(g.attributes.POSITION.array,g.attributes.POSITION.componentType);this.loadBufferIntoGltf(l,e,t.POSITION,34962,"position buffer view")}if(g.attributes.NORMAL!==void 0){let l=this.loadArrayIntoArrayBuffer(g.attributes.NORMAL.array,g.attributes.NORMAL.componentType);this.loadBufferIntoGltf(l,e,t.NORMAL,34962,"normal buffer view")}if(g.attributes.TEXCOORD_0!==void 0){let l=this.loadArrayIntoArrayBuffer(g.attributes.TEXCOORD_0.array,g.attributes.TEXCOORD_0.componentType);this.loadBufferIntoGltf(l,e,t.TEXCOORD_0,34962,"TEXCOORD_0 buffer view")}if(g.attributes.TEXCOORD_1!==void 0){let l=this.loadArrayIntoArrayBuffer(g.attributes.TEXCOORD_1.array,g.attributes.TEXCOORD_1.componentType);this.loadBufferIntoGltf(l,e,t.TEXCOORD_1,34962,"TEXCOORD_1 buffer view")}if(g.attributes.TANGENT!==void 0){let l=this.loadArrayIntoArrayBuffer(g.attributes.TANGENT.array,g.attributes.TANGENT.componentType);this.loadBufferIntoGltf(l,e,t.TANGENT,34962,"Tangent buffer view")}if(g.attributes.COLOR_0!==void 0){let l=this.loadArrayIntoArrayBuffer(g.attributes.COLOR_0.array,g.attributes.COLOR_0.componentType);this.loadBufferIntoGltf(l,e,t.COLOR_0,34962,"color buffer view")}if(g.attributes.JOINTS_0!==void 0){let l=this.loadArrayIntoArrayBuffer(g.attributes.JOINTS_0.array,g.attributes.JOINTS_0.componentType);this.loadBufferIntoGltf(l,e,t.JOINTS_0,34963,"JOINTS_0 buffer view")}if(g.attributes.WEIGHTS_0!==void 0){let l=this.loadArrayIntoArrayBuffer(g.attributes.WEIGHTS_0.array,g.attributes.WEIGHTS_0.componentType);this.loadBufferIntoGltf(l,e,t.WEIGHTS_0,34963,"WEIGHTS_0 buffer view")}if(g.attributes.JOINTS_1!==void 0){let l=this.loadArrayIntoArrayBuffer(g.attributes.JOINTS_1.array,g.attributes.JOINTS_1.componentType);this.loadBufferIntoGltf(l,e,t.JOINTS_1,34963,"JOINTS_1 buffer view")}if(g.attributes.WEIGHTS_1!==void 0){let l=this.loadArrayIntoArrayBuffer(g.attributes.WEIGHTS_1.array,g.attributes.WEIGHTS_1.componentType);this.loadBufferIntoGltf(l,e,t.WEIGHTS_1,34963,"WEIGHTS_1 buffer view")}}loadBufferIntoGltf(e,g,t,I,l){const C=new fF;C.byteLength=e.byteLength,C.buffer=e,g.buffers.push(C);const n=new EF;n.buffer=g.buffers.length-1,n.byteLength=e.byteLength,l!==void 0&&(n.name=l),n.target=I,g.bufferViews.push(n),g.accessors[t].byteOffset=0,g.accessors[t].bufferView=g.bufferViews.length-1}loadArrayIntoArrayBuffer(e,g){let t;switch(g){case"Int8Array":t=new ArrayBuffer(e.length),new Int8Array(t).set(e);break;case"Uint8Array":t=new ArrayBuffer(e.length),new Uint8Array(t).set(e);break;case"Int16Array":t=new ArrayBuffer(2*e.length),new Int16Array(t).set(e);break;case"Uint16Array":t=new ArrayBuffer(2*e.length),new Uint16Array(t).set(e);break;case"Int32Array":t=new ArrayBuffer(4*e.length),new Int32Array(t).set(e);break;case"Uint32Array":t=new ArrayBuffer(4*e.length),new Uint32Array(t).set(e);break;default:case"Float32Array":t=new ArrayBuffer(4*e.length),new Float32Array(t).set(e)}return t}decodeDracoBufferToIntermediate(e,g){let t=e.bufferView;const I=g.bufferViews[t],l=g.buffers[I.buffer],C=new Int8Array(l.buffer).slice(I.byteOffset,I.byteOffset+I.byteLength);let n=new Eg().module,F=new n.Decoder,a=new n.DecoderBuffer;a.Init(C,I.byteLength);let U=this.decodeGeometry(n,F,a,e.attributes,g);return n.destroy(a),U}getDracoArrayTypeFromComponentType(e){switch(e){case le.BYTE:return"Int8Array";case le.UNSIGNED_BYTE:return"Uint8Array";case le.SHORT:return"Int16Array";case le.UNSIGNED_SHORT:return"Uint16Array";case le.INT:return"Int32Array";case le.UNSIGNED_INT:return"Uint32Array";case le.FLOAT:default:return"Float32Array"}}decodeGeometry(e,g,t,I,l){let C,n,F=g.GetEncodedGeometryType(t);if(F!==e.TRIANGULAR_MESH)throw new Error("DRACOLoader: Unexpected geometry type.");if(C=new e.Mesh,n=g.DecodeBufferToMesh(t,C),!n.ok()||C.ptr===0)throw new Error("DRACOLoader: Decoding failed: "+n.error_msg());let a={index:null,attributes:{}},U=C.num_points();for(let s in I){let o,A=le.BYTE;for(const[Q,r]of Object.entries(this.attributes))if(Q===s){A=l.accessors[r].componentType,o=l.accessors[r].count;break}if(U!==o)throw new Error(`DRACOLoader: Accessor vertex count ${o} does not match draco decoder vertex count  ${U}`);A=this.getDracoArrayTypeFromComponentType(A);let B=g.GetAttributeByUniqueId(C,I[s]);var d=this.decodeAttribute(e,g,C,s,B,A);a.attributes[d.name]=d}if(F===e.TRIANGULAR_MESH){let s=3*C.num_faces(),o=4*s,A=e._malloc(o);g.GetTrianglesUInt32Array(C,o,A);let B=new Uint32Array(e.HEAPU32.buffer,A,s).slice();e._free(A),a.index={array:B,itemSize:1}}return e.destroy(C),a}decodeAttribute(e,g,t,I,l,C){let n,F,a,U=l.num_components(),d=t.num_points()*U;switch(C){case"Float32Array":a=4*d,n=e._malloc(a),g.GetAttributeDataArrayForAllPoints(t,l,e.DT_FLOAT32,a,n),F=new Float32Array(e.HEAPF32.buffer,n,d).slice(),e._free(n);break;case"Int8Array":n=e._malloc(d),g.GetAttributeDataArrayForAllPoints(t,l,e.DT_INT8,d,n),F=new Int8Array(e.HEAP8.buffer,n,d).slice(),e._free(n);break;case"Int16Array":a=2*d,n=e._malloc(a),g.GetAttributeDataArrayForAllPoints(t,l,e.DT_INT16,a,n),F=new Int16Array(e.HEAP16.buffer,n,d).slice(),e._free(n);break;case"Int32Array":a=4*d,n=e._malloc(a),g.GetAttributeDataArrayForAllPoints(t,l,e.DT_INT32,a,n),F=new Int32Array(e.HEAP32.buffer,n,d).slice(),e._free(n);break;case"Uint8Array":n=e._malloc(d),g.GetAttributeDataArrayForAllPoints(t,l,e.DT_UINT8,d,n),F=new Uint8Array(e.HEAPU8.buffer,n,d).slice(),e._free(n);break;case"Uint16Array":a=2*d,n=e._malloc(a),g.GetAttributeDataArrayForAllPoints(t,l,e.DT_UINT16,a,n),F=new Uint16Array(e.HEAPU16.buffer,n,d).slice(),e._free(n);break;case"Uint32Array":a=4*d,n=e._malloc(a),g.GetAttributeDataArrayForAllPoints(t,l,e.DT_UINT32,a,n),F=new Uint32Array(e.HEAPU32.buffer,n,d).slice(),e._free(n);break;default:throw new Error("DRACOLoader: Unexpected attribute type.")}return{name:I,array:F,itemSize:U,componentType:C}}}class TV extends je{constructor(){super(),this.primitives=[],this.name=void 0,this.weights=[],this.weightsAnimated=void 0}fromJson(e){super.fromJson(e),e.name!==void 0&&(this.name=e.name),this.primitives=qe(e.primitives,EV),e.weights!==void 0&&(this.weights=e.weights)}getWeightsAnimated(){return this.weightsAnimated!==void 0?this.weightsAnimated:this.weights}initGl(e,g){this.primitives.forEach(t=>{t.initGl(e,g)})}}class YV extends je{constructor(){super(),this.camera=void 0,this.children=[],this.matrix=void 0,this.rotation=[0,0,0,1],this.scale=[1,1,1],this.translation=[0,0,0],this.name=void 0,this.mesh=void 0,this.skin=void 0,this.light=void 0,this.changed=!0,this.animationRotation=void 0,this.animationTranslation=void 0,this.animationScale=void 0}fromJson(e){super.fromJson(e)}initGl(e,g){let t;if(this.extras){if(window.zeaCad){const{CADBody:l}=zeaCad;t=new l(this.name)}else t=new H(this.name);for(let l in this.extras){const C=this.extras[l];typeof C=="string"?t.addParameter(new Zg(l,C)):typeof C=="boolean"?t.addParameter(new Je(l,C)):typeof C=="number"?t.addParameter(new k(l,C)):typeof C=="object"&&t.addParameter(new Le(l,C,"json"))}t.extras=this.extras}else t=new H(this.name);const I=new v;if(this.matrix!==void 0){const l=new Ee(Float32Array.from(this.matrix));I.setFromMat4(l)}else this.scale!==void 0&&I.sc.set(...this.scale),this.rotation!==void 0&&I.ori.set(...this.rotation),this.translation!==void 0&&I.tr.set(...this.translation);t.getParameter("LocalXfo").setValue(I),this.children.forEach(l=>{e.nodes[l].initGl(e,t)}),this.mesh!=null&&e.meshes[this.mesh].initGl(e,t),g.addChild(t,!1),ee.incrementWorkDone(1)}applyMatrix(e){this.matrix=e,mat4.getScaling(this.scale,this.matrix);const g=mat4.create();for(const t of[0,1,2])g[t]=this.matrix[t]/this.scale[0],g[t+4]=this.matrix[t+4]/this.scale[1],g[t+8]=this.matrix[t+8]/this.scale[2];mat4.getRotation(this.rotation,g),quat.normalize(this.rotation,this.rotation),mat4.getTranslation(this.translation,this.matrix),this.changed=!0}applyTranslationAnimation(e){this.animationTranslation=e,this.changed=!0}applyRotationAnimation(e){this.animationRotation=e,this.changed=!0}applyScaleAnimation(e){this.animationScale=e,this.changed=!0}resetTransform(){this.rotation=[0,0,0,1],this.scale=[1,1,1],this.translation=[0,0,0],this.changed=!0}getLocalTransform(){if(this.transform===void 0||this.changed){this.transform=mat4.create();const e=this.animationTranslation!==void 0?this.animationTranslation:this.translation,g=this.animationRotation!==void 0?this.animationRotation:this.rotation,t=this.animationScale!==void 0?this.animationScale:this.scale;mat4.fromRotationTranslationScale(this.transform,g,e,t),this.changed=!1}return mat4.clone(this.transform)}}class pl extends je{constructor(e="LINEAR",g="LINEAR_MIPMAP_LINEAR",t="REPEAT",I="REPEAT"){super(),this.magFilter=e,this.minFilter=g,this.wrapS=t,this.wrapT=I,this.name=void 0}static createDefault(){return new pl}}class vV extends je{constructor(e=[],g){super(),this.nodes=e,this.name=g,this.imageBasedLight=void 0}initGl(e,g){if(this.extensions!==void 0&&this.extensions.KHR_lights_image_based!==void 0){const t=this.extensions.KHR_lights_image_based.imageBasedLight;this.imageBasedLight=e.imageBasedLights[t]}this.nodes.forEach(t=>{e.nodes[t].initGl(e,g)})}gatherNodes(e){const g=[];function t(I){const l=e.nodes[I];g.push(l);for(const C of l.children)t(C)}for(const I of this.nodes)t(I);return g}includesNode(e,g){let t=[...this.nodes];for(;t.length>0;){const I=t.pop();if(I===g)return!0;t=t.concat(e.nodes[I].children)}return!1}}class MV extends je{constructor(){super(),this.copyright=void 0,this.generator=void 0,this.version=void 0,this.minVersion=void 0}}class HV extends je{constructor(){super(),this.target={node:void 0,path:void 0},this.sampler=void 0}}const xV="translation",vF="rotation",wV="scale",DV="weights";class KV extends je{constructor(){super(),this.input=void 0,this.interpolation=void 0,this.output=void 0}}const LV="LINEAR",Ua="STEP",da="CUBICSPLINE";class zV{constructor(){this.prevKey=0,this.prevT=0}slerpQuat(e,g,t){const I=quat.create(),l=quat.create();quat.normalize(I,e),quat.normalize(l,g);const C=quat.create();return quat.slerp(C,I,l,t),quat.normalize(C,C),C}step(e,g,t){const I=new glMatrix.ARRAY_TYPE(t);for(let l=0;l<t;++l)I[l]=g[e*t+l];return I}linear(e,g,t,I,l){const C=new glMatrix.ARRAY_TYPE(l);for(let n=0;n<l;++n)C[n]=t[e*l+n]*(1-I)+t[g*l+n]*I;return C}cubicSpline(e,g,t,I,l,C){const n=e*C*3,F=g*C*3,a=1*C,U=2*C,d=new glMatrix.ARRAY_TYPE(C),s=l**2,o=l**3;for(let A=0;A<C;++A){const B=t[n+A+a],Q=I*t[F+A+0],r=I*t[n+A+U],R=t[F+A+a];d[A]=(2*o-3*s+1)*B+(o-2*s+l)*r+(-2*o+3*s)*R+(o-s)*Q}return d}resetKey(){this.prevKey=0}interpolate(e,g,t,I,l,C){if(I===void 0)return;const n=e.accessors[t.input].getNormalizedDeinterlacedView(e),F=e.accessors[t.output].getNormalizedDeinterlacedView(e);if(F.length===l)return yF(F,0,l);I=kC(I%=C,n[0],n[n.length-1]),this.prevT>I&&(this.prevKey=0),this.prevT=I;let a=null;for(let s=this.prevKey;s<n.length;++s)if(I<=n[s]){a=kC(s,1,n.length-1);break}this.prevKey=kC(a-1,0,a);const U=n[a]-n[this.prevKey],d=(I-n[this.prevKey])/U;if(g.target.path===vF){if(da===t.interpolation){const s=this.cubicSpline(this.prevKey,a,F,U,d,4);return quat.normalize(s,s),s}if(t.interpolation===LV){const s=this.getQuat(F,this.prevKey),o=this.getQuat(F,a);return this.slerpQuat(s,o,d)}if(t.interpolation===Ua)return this.getQuat(F,this.prevKey)}switch(t.interpolation){case Ua:return this.step(this.prevKey,F,l);case da:return this.cubicSpline(this.prevKey,a,F,U,d,l);default:return this.linear(this.prevKey,a,F,d,l)}}getQuat(e,g){const t=e[4*g],I=e[4*g+1],l=e[4*g+2],C=e[4*g+3];return quat.fromValues(t,I,l,C)}}class _V extends je{constructor(){super(),this.channels=[],this.samplers=[],this.name="",this.interpolators=[],this.maxTime=0,this.disjointAnimations=[]}fromJson(e){if(super.fromJson(e),this.channels=qe(e.channels,HV),this.samplers=qe(e.samplers,KV),this.name=e.name,this.channels!==void 0)for(let g=0;g<this.channels.length;++g)this.interpolators.push(new zV);else console.error("No channel data found for skin")}advance(e,g){if(this.channels!==void 0){if(this.maxTime==0)for(let t=0;t<this.channels.length;++t){const I=this.channels[t],l=this.samplers[I.sampler],C=e.accessors[l.input].getDeinterlacedView(e),n=C[C.length-1];n>this.maxTime&&(this.maxTime=n)}for(let t=0;t<this.interpolators.length;++t){const I=this.channels[t],l=this.samplers[I.sampler],C=this.interpolators[t],n=e.nodes[I.target.node];switch(I.target.path){case xV:n.applyTranslationAnimation(C.interpolate(e,I,l,g,3,this.maxTime));break;case vF:n.applyRotationAnimation(C.interpolate(e,I,l,g,4,this.maxTime));break;case wV:n.applyScaleAnimation(C.interpolate(e,I,l,g,3,this.maxTime));break;case DV:{const F=e.meshes[n.mesh];F.weightsAnimated=C.interpolate(e,I,l,g,F.weights.length,this.maxTime);break}}}}}}class OV extends je{constructor(){super(),this.name="",this.inverseBindMatrices=void 0,this.joints=[],this.skeleton=void 0,this.jointMatrices=[],this.jointNormalMatrices=[]}computeJoints(e,g){const t=e.accessors[this.inverseBindMatrices].getDeinterlacedView(e);this.jointMatrices=[],this.jointNormalMatrices=[];let I=0;for(const l of this.joints){const C=e.nodes[l];let n=mat4.create(),F=yF(t,16*I++,16);mat4.mul(n,C.worldTransform,F),mat4.mul(n,g.inverseWorldTransform,n),this.jointMatrices.push(n);let a=mat4.create();mat4.invert(a,n),mat4.transpose(a,a),this.jointNormalMatrices.push(a)}}}class PV extends je{constructor(){super(),this.name=void 0}fromJson(e){e.name!==void 0&&(this.name=e.name)}}class jV extends je{constructor(e){super(),this.asset=void 0,this.accessors=[],this.nodes=[],this.scene=void 0,this.scenes=[],this.cameras=[],this.lights=[],this.imageBasedLights=[],this.textures=[],this.images=[],this.samplers=[],this.meshes=[],this.buffers=[],this.bufferViews=[],this.materials=[],this.materialsMap={},this.animations=[],this.skins=[],this.path=e}initGl(e){const g=this;for(const t of this.images)t!=null&&t.initGl!==void 0&&t.initGl(g,e);for(const t of this.samplers)t!=null&&t.initGl!==void 0&&t.initGl(g,e);for(const t of this.textures)t!=null&&t.initGl!==void 0&&t.initGl(g,e);for(const t of this.materials)t!=null&&t.initGl!==void 0&&t.initGl(g,e);this.scenes[this.scene].initGl(this,e)}fromJson(e){super.fromJson(e),this.asset=XF(e.asset,MV),this.cameras=qe(e.cameras,Ni),this.accessors=qe(e.accessors,Sl),this.meshes=qe(e.meshes,TV),this.samplers=qe(e.samplers,pl),this.materials=qe(e.materials,Nl),this.buffers=qe(e.buffers,fF),this.bufferViews=qe(e.bufferViews,EF),this.scenes=qe(e.scenes,vV),this.textures=qe(e.textures,fV),this.nodes=qe(e.nodes,YV),this.lights=qe(function(g){return g===void 0?[]:g.KHR_lights_punctual===void 0?[]:g.KHR_lights_punctual.lights}(e.extensions),NV),this.imageBasedLights=qe(function(g){return g===void 0?[]:g.KHR_lights_image_based===void 0?[]:g.KHR_lights_image_based.imageBasedLights}(e.extensions),kV),this.images=qe(e.images,QI),this.animations=qe(e.animations,_V),this.skins=qe(e.skins,OV),this.variants=qe(function(g){return g===void 0?[]:g.KHR_materials_variants===void 0?[]:g.KHR_materials_variants.variants}(e.extensions),PV),this.variants=function(g){for(let t=0;t<g.length;t++){const I=g[t].name;for(let l=t+1;l<g.length;l++)g[l].name==I&&(g[l].name+="0")}return g}(this.variants),this.materials.push(Nl.createDefault()),this.samplers.push(pl.createDefault()),e.scenes!==void 0&&(e.scene===void 0&&e.scenes.length>0?this.scene=0:this.scene=e.scene),this.computeDisjointAnimations()}computeDisjointAnimations(){for(let e=0;e<this.animations.length;e++){this.animations[e].disjointAnimations=[];for(let g=0;g<this.animations.length;g++){if(e==g)continue;let t=!0;for(const I of this.animations[e].channels)for(const l of this.animations[g].channels)if(I.target.node===l.target.node&&I.target.path===l.target.path){t=!1;break}t&&this.animations[e].disjointAnimations.push(g)}}}nonDisjointAnimations(e){const g=this.animations,t=[];for(let I=0;I<g.length;I++){let l=!0;for(const C of e)I!=C&&(g[C].disjointAnimations.includes(I)||(l=!1));l||t.push(I)}return t}}class qV{constructor(e){this.data=e,this.glbHeaderInts=3,this.glbChunkHeaderInts=2,this.glbMagic=1179937895,this.glbVersion=2,this.jsonChunkType=1313821514,this.binaryChunkType=5130562}extractGlbData(){if(this.getCheckedGlbInfo()===void 0)return;let e,g=[];const t=this.getAllChunkInfos();for(let I of t)I.type!=this.jsonChunkType||e?I.type==this.binaryChunkType&&g.push(this.getBufferFromChunk(I)):e=this.getJsonFromChunk(I);return{json:e,buffers:g}}getCheckedGlbInfo(){const e=new Uint32Array(this.data,0,this.glbHeaderInts),g=e[0],t=e[1],I=e[2];if(this.checkEquality(g,this.glbMagic,"glb magic")&&this.checkEquality(t,this.glbVersion,"glb header version")&&this.checkEquality(I,this.data.byteLength,"glb byte length"))return{magic:g,version:t,length:I}}getAllChunkInfos(){let e=[],g=4*this.glbHeaderInts;for(;g<this.data.byteLength;){const t=this.getChunkInfo(g);e.push(t),g+=t.length+4*this.glbChunkHeaderInts}return e}getChunkInfo(e){const g=new Uint32Array(this.data,e,this.glbChunkHeaderInts);return{start:e+4*this.glbChunkHeaderInts,length:g[0],type:g[1]}}getJsonFromChunk(e){const g=e.length,t=4*(this.glbHeaderInts+this.glbChunkHeaderInts),I=new Uint8Array(this.data,t,g),l=new TextDecoder("utf-8").decode(I);return JSON.parse(l)}getBufferFromChunk(e){return this.data.slice(e.start,e.start+e.length)}checkEquality(e,g,t){return e==g||(console.error("Found invalid/unsupported "+t+", expected: "+g+", but was: "+e),!1)}}class vg{static async load(e,g,t){const I=vg.getBuffers(t),l=vg.getAdditionalFiles(t),C=vg.loadBuffers(e,I,l);await C;const n=vg.loadImages(e,l);return await Promise.all([C,n]).then(()=>{e.initGl(g)})}static unload(e){for(let g of e.images)g.image=void 0;e.images=[];for(let g of e.textures)g.destroy();e.textures=[];for(let g of e.accessors)g.destroy();e.accessors=[]}static getBuffers(e){return vg.getTypedAppendix(e,ArrayBuffer)}static getAdditionalFiles(e){return typeof File!="undefined"?vg.getTypedAppendix(e,File):void 0}static getTypedAppendix(e,g){if(e&&e.length>0&&e[0]instanceof g)return e}static loadBuffers(e,g,t){const I=[];if(g!==void 0&&g[0]!==void 0){g.length>1&&console.warn("Too many buffer chunks in GLB file. Only one or zero allowed"),e.buffers[0].buffer=g[0];for(let l=1;l<e.buffers.length;++l)I.push(e.buffers[l].load(e,t))}else for(const l of e.buffers)I.push(l.load(e,t));return Promise.all(I)}static loadImages(e,g){const t=[];for(let I of e.images)t.push(I.load(e,g));return Promise.all(t)}}async function fC(i){let e="",g=0;const t=i;let I;for(;!e.match(/\n\n[^\n]+\n/g);)e+=String.fromCharCode(t[g++]);if(I=e.match(/FORMAT=(.*)$/m),I.length<2)return;if(I=I[1],I!="32-bit_rle_rgbe")return console.warn("unknown format : "+I),this.onerror();let l=e.split(/\n/).reverse();if(l.length<2||(l=l[1].split(" "),l.length<4))return;const C=1*l[3],n=1*l[1],F=new Uint8Array(C*n*4);let a=0;for(let U=0;U<n;U++){const d=[];let s=t.slice(g,g+=4);if(s[0]==2&&s[1]==2&&s[2]==(C>>8&255)&&s[3]==(255&C)&&C>=8&&C<32768){for(let o=0;o<4;o++){let A=o*C;const B=(o+1)*C;let Q,r;for(;A<B;)if(Q=t.slice(g,g+=2),Q[0]>128)for(r=Q[0]-128;r-- >0;)d[A++]=Q[1];else for(r=Q[0]-1,d[A++]=Q[1];r-- >0;)d[A++]=t[g++]}for(let o=0;o<C;o++)F[a++]=d[o+0*C],F[a++]=d[o+1*C],F[a++]=d[o+2*C],F[a++]=d[o+3*C]}else{g-=4;for(let o=0;o<C;o++)s=t.slice(g,g+=4),F[a++]=s[0],F[a++]=s[1],F[a++]=s[2],F[a++]=s[3]}}return{dataFloat:function(U){const d=U.byteLength>>2,s=new Float32Array(3*d);for(let o=0;o<d;o++){const A=Math.pow(2,U[4*o+3]-136);s[3*o]=U[4*o]*A,s[3*o+1]=U[4*o+1]*A,s[3*o+2]=U[4*o+2]*A}return s}(F),width:C,height:n}}class $V extends H{constructor(e){super(e),this.init()}init(e,g){this.initKtxLib(g),this.initDracoLib(e)}async load(e,g){await this.init();let t,I,l,C;if(g||(g=e),ee.incrementWorkload(1),typeof e=="string"){t=GV(g);let F=await ee.loadFile(t?"binary":"json",e);l=F,C=F}else console.error("Passed invalid type to loadGltf "+typeof gltfFile);if(t){const F=new qV(C).extractGlbData();l=F.json,I=F.buffers}const n=new jV(g);n.fromJson(l);for(const F of n.images)F.resolveRelativePath(kF(n.path));return ee.incrementWorkload(n.nodes.length),await vg.load(n,this,I),ee.incrementWorkDone(1),n}async loadEnvironment(e,g){let t;if(typeof e=="string"){let I=await ee.loadFile(e?"binary":"json",url);t=await fC(new Uint8Array(I.data))}else if(e instanceof ArrayBuffer)t=await fC(new Uint8Array(e));else if(typeof File!="undefined"&&e instanceof File){const I=await TF.readAsArrayBuffer(e).catch(()=>{console.error("Could not load image with FileReader")});t=await fC(new Uint8Array(I))}else console.error("Passed invalid type to loadEnvironment "+typeof gltfFile);if(t!==void 0)return _loadEnvironmentFromPanorama(t,this.view,g)}initKtxLib(e){}async initDracoLib(e){const g=new Eg(e);g!==void 0&&await g.ready()}}ml?ml.registerLib(JV):console.warn("The version of the Zea Engine that you're using doesn't support the libraries registry. Please upgrade to the latest Zea Engine version.");let sa=!1;class er extends HTMLElement{constructor(){super();tt(this,"modal");tt(this,"content");tt(this,"loadFileCallback");const e=this.attachShadow({mode:"open"});this.modal=document.createElement("div"),this.modal.classList.add("modal"),e.appendChild(this.modal),this.content=document.createElement("div"),this.content.classList.add("modal-content"),this.modal.appendChild(this.content),this.content.innerHTML=`<div id="fileDropZone" class="fixed w-full flex h-screen">
    <input
      accept=".zcad, .gltf, .glb, gltf, .obj"
      multiple
      type="file"
      class="absolute inset-0 z-50 m-0 p-0 w-full h-full outline-none opacity-0"
      id="dropHotSpot"
    />
      <div
        class="border-2 border-gray-400 py-12 justify-center items-center p-4 m-auto rounded-lg w-3/12 h-1/3 bg-gray-200 bg-opacity-25 hover:bg-blue-200 hover:bg-opacity-25 text-black grid justify-items-center"
      >
        <div class="m-auto">
          <div class="flex flex-col space-y-2 items-center justify-center">
            <i class="fas fa-cloud-upload-alt fa-3x text-currentColor" />
            <p class="text-gray-700 text-center">Drag your gltf, obj or zcad files here or click in this area.</p>
          </div>
        </div>
      </div>
  </div>`;const g=a=>{sa&&this.shadowRoot.getElementById("fileDropZone").classList.remove("pointer-events-none"),a.preventDefault()},t=a=>{a.preventDefault()},I=a=>{if(a.dataTransfer){for(var U=0;U<a.dataTransfer.items.length;U++)if(a.dataTransfer.items[U].kind==="file"){const d=a.dataTransfer.items[U].getAsFile();d&&C(d)}}a.preventDefault()},l=a=>{for(var U=0;U<a.target.files.length;U++){let d=a.target.files[U];C(d)}a.preventDefault()},C=a=>{const U=new FileReader;U.addEventListener("load",()=>{const d=U.result,s=a.name;this.loadFile(d,s)},!1),U.readAsDataURL(a)},n=this.shadowRoot.getElementById("dropHotSpot");n.addEventListener("change",l),n.addEventListener("drop",I),document.body.addEventListener("dragover",t),document.body.addEventListener("dragenter",g),document.body.addEventListener("drop",I);const F=document.createElement("style");F.appendChild(document.createTextNode(`
/* The Modal (background) */
.modal {
  display: block; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content/Box */
.modal-content {
  background-color: #eeeeee88;
  margin: 15% auto; /* 15% from the top and centered */
  padding: 20px;
  border: 1px solid #888;
  width: 80%; /* Could be more or less, depending on screen size */
  max-width: 600px;
}

`)),e.appendChild(F),this.hide()}display(e){this.loadFileCallback=e,this.modal.style.setProperty("pointer-events","auto"),this.modal.style.setProperty("display","block")}hide(){this.modal.style.setProperty("pointer-events","none"),this.modal.style.setProperty("display","none")}loadFile(e,g){this.hide(),sa=!0,this.loadFileCallback&&this.loadFileCallback(e,g)}}customElements.define("drop-zone",er);const EC="2d37e395cc590b4e127317494566f1aaf881f0ac1b5ff7d4180506fd682d68ea",gr=!0;async function tr(i){const e=new TextEncoder().encode(i),g=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(g)).map(l=>l.toString(16).padStart(2,"0")).join("")}class Ir{async isAuthenticated(){const e=await this.getUserData();return e&&(e.hashedPassword===EC||!gr)}async getUserData(){const{zeaUserData:e}=window.localStorage;return e&&JSON.parse(e)}async setUserData(e){{if(!e.password)throw new Error("Password not provided.");if(e.hashedPassword!==EC&&(e.hashedPassword=await tr(e.password),e.password="".padEnd(6,"*")),e.hashedPassword!==EC)throw new Error("Wrong password.")}window.localStorage.zeaUserData=JSON.stringify(e)}async signOut(){localStorage.removeItem("zeaUserData")}}const TC=new Ir,rl=(i=3)=>Math.random().toString(36).replace(/[^a-z]+/g,"").substr(0,i),lr=()=>`${rl(3)}-${rl(3)}-${rl(3)}`,Cr=(i,e)=>{var g=new URL(window.location.href);g.searchParams.set(i,e),window.history.pushState({},"",g.href)};class ir extends HTMLElement{constructor(){super();tt(this,"modal");tt(this,"content");tt(this,"onCloseCallback");const e=this.attachShadow({mode:"open"});this.modal=document.createElement("div"),this.modal.classList.add("modal"),e.appendChild(this.modal),this.content=document.createElement("div"),this.content.classList.add("modal-content"),this.modal.appendChild(this.content),this.content.innerHTML=`
        <div class="imgcontainer">
          <img src="./data/logo-zea.svg" alt="Avatar" class="avatar">
        </div>

        <div class="container">
          <label for="uname"><b>Username</b></label>
          <input id="uname" type="text" placeholder="Enter Username" name="uname" required>

          <label for="psw"><b>Password</b></label>
          <input id="psw" type="password" placeholder="Enter Password" name="psw" required>

          <label for="room"><b>Room ID</b></label>
          <input id="room" type="text" placeholder="Enter Room ID" name="room" required>


          <button type="submit" id="login">Login</button>
        </div>`;const g=this.shadowRoot.getElementById("uname");let t;t=this.shadowRoot.getElementById("psw"),t.addEventListener("input",()=>{t.style.border=""});let I;{I=this.shadowRoot.getElementById("room");const a=new URLSearchParams(window.location.search).get("roomId")||lr();I.value=a}let l;TC.getUserData().then(F=>{l=F||{},F&&(t.value=F.password,g.value=F.firstName)});const C=this.shadowRoot.getElementById("login");C.onclick=async()=>{const F=rl();l.color=E.random().toHex(),l.firstName=g.value,l.id=F,l.lastName="",l.password=t.value,l.username=g.value,I.value&&Cr("roomId",I.value);try{await TC.setUserData(l)}catch{t.style.border="2px solid #f00";return}this.close()};const n=document.createElement("style");n.appendChild(document.createTextNode(`
/* The Modal (background) */
.modal {
  display: none; /* Hidden by default */
  position: fixed; /* Stay in place */
  z-index: 1; /* Sit on top */
  left: 0;
  top: 0;
  width: 100%; /* Full width */
  height: 100%; /* Full height */
  overflow: auto; /* Enable scroll if needed */
  background-color: rgb(0,0,0); /* Fallback color */
  background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}

/* Modal Content/Box */
.modal-content {
  background-color: #eeeeee;
  margin: 15% auto; /* 15% from the top and centered */
  padding: 20px;
  border: 1px solid #888;
  width: 80%; /* Could be more or less, depending on screen size */
  max-width: 600px;
}


/* The Close Button */
.close {
  color: #aaa;
  float: right;
  font-size: 28px;
  font-weight: bold;
}

.close:hover,
.close:focus {
  color: black;
  text-decoration: none;
  cursor: pointer;
}

/* Full-width inputs */
input[type=text], input[type=password] {
  width: 100%;
  padding: 12px 20px;
  margin: 8px 0;
  display: inline-block;
  border: 1px solid #ccc;
  box-sizing: border-box;
}

/* Set a style for all buttons */
button {
  background-color: #f9ce03;
  color: black;
  padding: 14px 20px;
  margin: 8px 0;
  border: none;
  cursor: pointer;
  width: 100%;
}

/* Add a hover effect for buttons */
button:hover {
  opacity: 0.8;
}

/* Extra style for the cancel button (red) */
.cancelbtn {
  width: auto;
  padding: 10px 18px;
  background-color: #f44336;
}

/* Center the avatar image inside this container */
.imgcontainer {
  text-align: center;
  margin: 24px 0 12px 0;
}

/* Avatar image */
img.avatar {
  height: 40px;
}

/* Add padding to containers */
.container {
  padding: 16px;
}

/* The "Forgot password" text */
span.psw {
  float: right;
  padding-top: 16px;
}

/* Change styles for span and cancel button on extra small screens */
@media screen and (max-width: 300px) {
  span.psw {
    display: block;
    float: none;
  }
  .cancelbtn {
    width: 100%;
  }
}

`)),e.appendChild(n)}show(e){this.onCloseCallback=e,new URLSearchParams(window.location.search).has("roomId")&&TC.isAuthenticated().then(t=>{t&&this.close()}),this.modal.style.display="block"}close(){this.modal.style.display="none",this.onCloseCallback&&this.onCloseCallback()}}customElements.define("login-dialog",ir);function nr(){const i=new URLSearchParams(window.location.search),e=new Wd;e.setupGrid(10,10);const g=new zt(document.getElementById("canvas"),{debugGeomIds:!1,enableFrustumCulling:!0});g.setScene(e),g.getViewport().getCamera().setPositionAndTarget(new b(2,2,2),new b(0,0,.5));const t=new Fi;t.load("/data/StudioG.zenv"),e.setEnvMap(t);const I={scene:e,renderer:g},l=new E("#F9CE03");l.a=.1;const C=new CB(I,{selectionOutlineColor:l,branchSelectionOutlineColor:l});I.selectionManager=C;const n=document.getElementById("progress");let F=0;ee.on("progressIncremented",R=>{n.value=R.percent,R.percent>=100?F=setTimeout(()=>n.classList.add("hidden"),1e3):R.percent<100&&(F&&(clearTimeout(F),F=0),n.classList.remove("hidden"))});const a=document.getElementById("fps");if(a){let R=0;g.on("redrawOccurred",()=>{R++}),setInterval(()=>{a.textContent=`Fps: ${R*2}`,R=0},500)}const U=document.querySelector("#tree");U.setSelectionManager(C),U.setTreeItem(e.getRoot());const d=new E("#F9CE03");d.a=.1;const s=R=>{let V=R;for(;V&&!(V instanceof At)&&!(V instanceof xg);)V=V.getOwner();return V.getOwner()instanceof Ol&&(V=V.getOwner()),V};g.getViewport().on("pointerDown",R=>{if(R.intersectionData){const V=s(R.intersectionData.geomItem);V&&console.log(V.getPath())}}),g.getViewport().on("pointerUp",R=>{if(R.button==0&&R.intersectionData){const V=s(R.intersectionData.geomItem);if(V)if(!R.shiftKey)C.toggleItemSelection(V,!R.ctrlKey);else{const h=new Set;h.add(V),C.deselectItems(h)}}}),document.addEventListener("keydown",R=>{R.key=="f"&&(g.frameAll(),R.stopPropagation())}),g.getXRViewport().then(R=>{a&&(a.style.bottom="70px");const V=document.getElementById("xr-button");V&&(V.textContent="Launch VR",V.classList.remove("hidden"),R.on("presentingChanged",h=>{const{state:m}=h;m?V.textContent="Exit VR":V.textContent="Launch VR"}),V.addEventListener("click",()=>{R.togglePresenting()})),document.addEventListener("keydown",h=>{h.key==" "&&R.togglePresenting()})}),i.has("profile")&&g.startContinuousDrawing();const o=()=>{let R=0,V=0,h=0,m=0;e.getRoot().traverse(Z=>{if(Z instanceof jl)R++;else if(Z instanceof ge){V++;const c=Z.geomParam.value;c instanceof sg?m+=c.getNumSegments():c instanceof Gg?m+=c.getNumLineSegments():c instanceof ht?h+=c.computeNumTriangles():c instanceof Kg?h+=c.getNumTriangles():c instanceof hI&&(m+=c.getNumLineSegments(),h+=c.getNumTriangles())}}),console.log(`parts:${R} geomItems:${V} lines:${m} triangles:${h}`)},A=R=>{const V=new ot,h=new st;if(h.camera=g.getViewport().getCamera(),V.load(R,h).then(()=>{g.frameAll()}),V.getGeometryLibrary().on("loaded",()=>{o()}),i.has("ytoz")){const m=new v;m.ori.setFromAxisAndAngle(new b(1,0,0),Math.PI*.5),V.globalXfoParam.value=m}e.getRoot().addChild(V)},B=(R,V="")=>{const h=new $V(V);return h.load(R,V).then(()=>{o(),g.frameAll()}),e.getRoot().addChild(h),h},Q=(R,V="")=>{const h=new bd(V);return h.load(R).then(()=>{o(),g.frameAll()}),e.getRoot().addChild(h),h},r=(R,V="")=>{if(V.endsWith("zcad"))return A(R);if(V.endsWith("gltf")||V.endsWith("glb"))return B(R,V);if(V.endsWith("obj"))return Q(R,V);throw new Error("Unsupported file type:"+V)};i.has("zcad")?A(i.get("zcad")):i.has("gltf")?B(i.get("gltf")):i.has("obj")?Q(i.get("obj")):document.getElementById("dropZone").display((V,h)=>{r(V,h)})}nr()});export default ar();
